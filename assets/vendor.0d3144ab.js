var u2=Object.defineProperty,c2=Object.defineProperties;var h2=Object.getOwnPropertyDescriptors;var z_=Object.getOwnPropertySymbols;var f2=Object.prototype.hasOwnProperty,d2=Object.prototype.propertyIsEnumerable;var L_=(e,r,a)=>r in e?u2(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Ei=(e,r)=>{for(var a in r||(r={}))f2.call(r,a)&&L_(e,a,r[a]);if(z_)for(var a of z_(r))d2.call(r,a)&&L_(e,a,r[a]);return e},iu=(e,r)=>c2(e,h2(r));function p2(e,r){return r.forEach(function(a){a&&typeof a!="string"&&!Array.isArray(a)&&Object.keys(a).forEach(function(c){if(c!=="default"&&!(c in e)){var d=Object.getOwnPropertyDescriptor(a,c);Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:function(){return a[c]}})}})}),Object.freeze(e)}var su=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Jh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lt={exports:{}},_n={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var O_=Object.getOwnPropertySymbols,m2=Object.prototype.hasOwnProperty,g2=Object.prototype.propertyIsEnumerable;function y2(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function _2(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},a=0;a<10;a++)r["_"+String.fromCharCode(a)]=a;var c=Object.getOwnPropertyNames(r).map(function(_){return r[_]});if(c.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(_){d[_]=_}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Bv=_2()?Object.assign:function(e,r){for(var a,c=y2(e),d,_=1;_<arguments.length;_++){a=Object(arguments[_]);for(var x in a)m2.call(a,x)&&(c[x]=a[x]);if(O_){d=O_(a);for(var l=0;l<d.length;l++)g2.call(a,d[l])&&(c[d[l]]=a[d[l]])}}return c};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=Bv,Ru=60103,Nv=60106;_n.Fragment=60107;_n.StrictMode=60108;_n.Profiler=60114;var Uv=60109,Vv=60110,$v=60112;_n.Suspense=60113;var jv=60115,Gv=60116;if(typeof Symbol=="function"&&Symbol.for){var Co=Symbol.for;Ru=Co("react.element"),Nv=Co("react.portal"),_n.Fragment=Co("react.fragment"),_n.StrictMode=Co("react.strict_mode"),_n.Profiler=Co("react.profiler"),Uv=Co("react.provider"),Vv=Co("react.context"),$v=Co("react.forward_ref"),_n.Suspense=Co("react.suspense"),jv=Co("react.memo"),Gv=Co("react.lazy")}var R_=typeof Symbol=="function"&&Symbol.iterator;function v2(e){return e===null||typeof e!="object"?null:(e=R_&&e[R_]||e["@@iterator"],typeof e=="function"?e:null)}function mh(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qv={};function Du(e,r,a){this.props=e,this.context=r,this.refs=qv,this.updater=a||Zv}Du.prototype.isReactComponent={};Du.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(mh(85));this.updater.enqueueSetState(this,e,r,"setState")};Du.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wv(){}Wv.prototype=Du.prototype;function ng(e,r,a){this.props=e,this.context=r,this.refs=qv,this.updater=a||Zv}var rg=ng.prototype=new Wv;rg.constructor=ng;tg(rg,Du.prototype);rg.isPureReactComponent=!0;var ig={current:null},Xv=Object.prototype.hasOwnProperty,Hv={key:!0,ref:!0,__self:!0,__source:!0};function Yv(e,r,a){var c,d={},_=null,x=null;if(r!=null)for(c in r.ref!==void 0&&(x=r.ref),r.key!==void 0&&(_=""+r.key),r)Xv.call(r,c)&&!Hv.hasOwnProperty(c)&&(d[c]=r[c]);var l=arguments.length-2;if(l===1)d.children=a;else if(1<l){for(var S=Array(l),A=0;A<l;A++)S[A]=arguments[A+2];d.children=S}if(e&&e.defaultProps)for(c in l=e.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:Ru,type:e,key:_,ref:x,props:d,_owner:ig.current}}function x2(e,r){return{$$typeof:Ru,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function og(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ru}function w2(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return r[a]})}var D_=/\/+/g;function vp(e,r){return typeof e=="object"&&e!==null&&e.key!=null?w2(""+e.key):r.toString(36)}function mf(e,r,a,c,d){var _=typeof e;(_==="undefined"||_==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(_){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case Ru:case Nv:x=!0}}if(x)return x=e,d=d(x),e=c===""?"."+vp(x,0):c,Array.isArray(d)?(a="",e!=null&&(a=e.replace(D_,"$&/")+"/"),mf(d,r,a,"",function(A){return A})):d!=null&&(og(d)&&(d=x2(d,a+(!d.key||x&&x.key===d.key?"":(""+d.key).replace(D_,"$&/")+"/")+e)),r.push(d)),1;if(x=0,c=c===""?".":c+":",Array.isArray(e))for(var l=0;l<e.length;l++){_=e[l];var S=c+vp(_,l);x+=mf(_,r,a,S,d)}else if(S=v2(e),typeof S=="function")for(e=S.call(e),l=0;!(_=e.next()).done;)_=_.value,S=c+vp(_,l++),x+=mf(_,r,a,S,d);else if(_==="object")throw r=""+e,Error(mh(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r));return x}function Qh(e,r,a){if(e==null)return e;var c=[],d=0;return mf(e,c,"","",function(_){return r.call(a,_,d++)}),c}function b2(e){if(e._status===-1){var r=e._result;r=r(),e._status=0,e._result=r,r.then(function(a){e._status===0&&(a=a.default,e._status=1,e._result=a)},function(a){e._status===0&&(e._status=2,e._result=a)})}if(e._status===1)return e._result;throw e._result}var Kv={current:null};function Ma(){var e=Kv.current;if(e===null)throw Error(mh(321));return e}var E2={ReactCurrentDispatcher:Kv,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:ig,IsSomeRendererActing:{current:!1},assign:tg};_n.Children={map:Qh,forEach:function(e,r,a){Qh(e,function(){r.apply(this,arguments)},a)},count:function(e){var r=0;return Qh(e,function(){r++}),r},toArray:function(e){return Qh(e,function(r){return r})||[]},only:function(e){if(!og(e))throw Error(mh(143));return e}};_n.Component=Du;_n.PureComponent=ng;_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E2;_n.cloneElement=function(e,r,a){if(e==null)throw Error(mh(267,e));var c=tg({},e.props),d=e.key,_=e.ref,x=e._owner;if(r!=null){if(r.ref!==void 0&&(_=r.ref,x=ig.current),r.key!==void 0&&(d=""+r.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(S in r)Xv.call(r,S)&&!Hv.hasOwnProperty(S)&&(c[S]=r[S]===void 0&&l!==void 0?l[S]:r[S])}var S=arguments.length-2;if(S===1)c.children=a;else if(1<S){l=Array(S);for(var A=0;A<S;A++)l[A]=arguments[A+2];c.children=l}return{$$typeof:Ru,type:e.type,key:d,ref:_,props:c,_owner:x}};_n.createContext=function(e,r){return r===void 0&&(r=null),e={$$typeof:Vv,_calculateChangedBits:r,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:Uv,_context:e},e.Consumer=e};_n.createElement=Yv;_n.createFactory=function(e){var r=Yv.bind(null,e);return r.type=e,r};_n.createRef=function(){return{current:null}};_n.forwardRef=function(e){return{$$typeof:$v,render:e}};_n.isValidElement=og;_n.lazy=function(e){return{$$typeof:Gv,_payload:{_status:-1,_result:e},_init:b2}};_n.memo=function(e,r){return{$$typeof:jv,type:e,compare:r===void 0?null:r}};_n.useCallback=function(e,r){return Ma().useCallback(e,r)};_n.useContext=function(e,r){return Ma().useContext(e,r)};_n.useDebugValue=function(){};_n.useEffect=function(e,r){return Ma().useEffect(e,r)};_n.useImperativeHandle=function(e,r,a){return Ma().useImperativeHandle(e,r,a)};_n.useLayoutEffect=function(e,r){return Ma().useLayoutEffect(e,r)};_n.useMemo=function(e,r){return Ma().useMemo(e,r)};_n.useReducer=function(e,r,a){return Ma().useReducer(e,r,a)};_n.useRef=function(e){return Ma().useRef(e)};_n.useState=function(e){return Ma().useState(e)};_n.version="17.0.2";Lt.exports=_n;var S2=Lt.exports,sd={exports:{}},lo={},Jv={exports:{}},Qv={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var r,a,c,d;if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;e.unstable_now=function(){return _.now()}}else{var x=Date,l=x.now();e.unstable_now=function(){return x.now()-l}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var S=null,A=null,z=function(){if(S!==null)try{var Ye=e.unstable_now();S(!0,Ye),S=null}catch(mt){throw setTimeout(z,0),mt}};r=function(Ye){S!==null?setTimeout(r,0,Ye):(S=Ye,setTimeout(z,0))},a=function(Ye,mt){A=setTimeout(Ye,mt)},c=function(){clearTimeout(A)},e.unstable_shouldYield=function(){return!1},d=e.unstable_forceFrameRate=function(){}}else{var C=window.setTimeout,P=window.clearTimeout;if(typeof console!="undefined"){var q=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof q!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var te=!1,Z=null,j=-1,N=5,$=0;e.unstable_shouldYield=function(){return e.unstable_now()>=$},d=function(){},e.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Ye?Math.floor(1e3/Ye):5};var G=new MessageChannel,J=G.port2;G.port1.onmessage=function(){if(Z!==null){var Ye=e.unstable_now();$=Ye+N;try{Z(!0,Ye)?J.postMessage(null):(te=!1,Z=null)}catch(mt){throw J.postMessage(null),mt}}else te=!1},r=function(Ye){Z=Ye,te||(te=!0,J.postMessage(null))},a=function(Ye,mt){j=C(function(){Ye(e.unstable_now())},mt)},c=function(){P(j),j=-1}}function me(Ye,mt){var At=Ye.length;Ye.push(mt);e:for(;;){var xt=At-1>>>1,wt=Ye[xt];if(wt!==void 0&&0<ne(wt,mt))Ye[xt]=mt,Ye[At]=wt,At=xt;else break e}}function H(Ye){return Ye=Ye[0],Ye===void 0?null:Ye}function se(Ye){var mt=Ye[0];if(mt!==void 0){var At=Ye.pop();if(At!==mt){Ye[0]=At;e:for(var xt=0,wt=Ye.length;xt<wt;){var Xt=2*(xt+1)-1,yn=Ye[Xt],un=Xt+1,xn=Ye[un];if(yn!==void 0&&0>ne(yn,At))xn!==void 0&&0>ne(xn,yn)?(Ye[xt]=xn,Ye[un]=At,xt=un):(Ye[xt]=yn,Ye[Xt]=At,xt=Xt);else if(xn!==void 0&&0>ne(xn,At))Ye[xt]=xn,Ye[un]=At,xt=un;else break e}}return mt}return null}function ne(Ye,mt){var At=Ye.sortIndex-mt.sortIndex;return At!==0?At:Ye.id-mt.id}var Te=[],Ce=[],Pe=1,Ze=null,rt=3,ft=!1,dt=!1,Ue=!1;function yt(Ye){for(var mt=H(Ce);mt!==null;){if(mt.callback===null)se(Ce);else if(mt.startTime<=Ye)se(Ce),mt.sortIndex=mt.expirationTime,me(Te,mt);else break;mt=H(Ce)}}function rn(Ye){if(Ue=!1,yt(Ye),!dt)if(H(Te)!==null)dt=!0,r(vn);else{var mt=H(Ce);mt!==null&&a(rn,mt.startTime-Ye)}}function vn(Ye,mt){dt=!1,Ue&&(Ue=!1,c()),ft=!0;var At=rt;try{for(yt(mt),Ze=H(Te);Ze!==null&&(!(Ze.expirationTime>mt)||Ye&&!e.unstable_shouldYield());){var xt=Ze.callback;if(typeof xt=="function"){Ze.callback=null,rt=Ze.priorityLevel;var wt=xt(Ze.expirationTime<=mt);mt=e.unstable_now(),typeof wt=="function"?Ze.callback=wt:Ze===H(Te)&&se(Te),yt(mt)}else se(Te);Ze=H(Te)}if(Ze!==null)var Xt=!0;else{var yn=H(Ce);yn!==null&&a(rn,yn.startTime-mt),Xt=!1}return Xt}finally{Ze=null,rt=At,ft=!1}}var Sn=d;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ye){Ye.callback=null},e.unstable_continueExecution=function(){dt||ft||(dt=!0,r(vn))},e.unstable_getCurrentPriorityLevel=function(){return rt},e.unstable_getFirstCallbackNode=function(){return H(Te)},e.unstable_next=function(Ye){switch(rt){case 1:case 2:case 3:var mt=3;break;default:mt=rt}var At=rt;rt=mt;try{return Ye()}finally{rt=At}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Sn,e.unstable_runWithPriority=function(Ye,mt){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var At=rt;rt=Ye;try{return mt()}finally{rt=At}},e.unstable_scheduleCallback=function(Ye,mt,At){var xt=e.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?xt+At:xt):At=xt,Ye){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=At+wt,Ye={id:Pe++,callback:mt,priorityLevel:Ye,startTime:At,expirationTime:wt,sortIndex:-1},At>xt?(Ye.sortIndex=At,me(Ce,Ye),H(Te)===null&&Ye===H(Ce)&&(Ue?c():Ue=!0,a(rn,At-xt))):(Ye.sortIndex=wt,me(Te,Ye),dt||ft||(dt=!0,r(vn))),Ye},e.unstable_wrapCallback=function(Ye){var mt=rt;return function(){var At=rt;rt=mt;try{return Ye.apply(this,arguments)}finally{rt=At}}}})(Qv);Jv.exports=Qv;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ld=Lt.exports,sr=Bv,Fr=Jv.exports;function at(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!ld)throw Error(at(227));var ex=new Set,eh={};function xl(e,r){Pu(e,r),Pu(e+"Capture",r)}function Pu(e,r){for(eh[e]=r,e=0;e<r.length;e++)ex.add(r[e])}var Ca=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),T2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F_=Object.prototype.hasOwnProperty,B_={},N_={};function A2(e){return F_.call(N_,e)?!0:F_.call(B_,e)?!1:T2.test(e)?N_[e]=!0:(B_[e]=!0,!1)}function C2(e,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k2(e,r,a,c){if(r===null||typeof r=="undefined"||C2(e,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function vi(e,r,a,c,d,_,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=_,this.removeEmptyString=x}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qr[e]=new vi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];qr[r]=new vi(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qr[e]=new vi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qr[e]=new vi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qr[e]=new vi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qr[e]=new vi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qr[e]=new vi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qr[e]=new vi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qr[e]=new vi(e,5,!1,e.toLowerCase(),null,!1,!1)});var ag=/[\-:]([a-z])/g;function sg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(ag,sg);qr[r]=new vi(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(ag,sg);qr[r]=new vi(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(ag,sg);qr[r]=new vi(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qr[e]=new vi(e,1,!1,e.toLowerCase(),null,!1,!1)});qr.xlinkHref=new vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qr[e]=new vi(e,1,!1,e.toLowerCase(),null,!0,!0)});function lg(e,r,a,c){var d=qr.hasOwnProperty(r)?qr[r]:null,_=d!==null?d.type===0:c?!1:!(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N");_||(k2(r,a,d,c)&&(a=null),c||d===null?A2(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):d.mustUseProperty?e[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?e.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?e.setAttributeNS(c,r,a):e.setAttribute(r,a))))}var wl=ld.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=60103,ll=60106,rs=60107,ug=60108,Uc=60114,cg=60109,hg=60110,ud=60112,Vc=60113,Mf=60120,cd=60115,fg=60116,dg=60121,pg=60128,tx=60129,mg=60130,Jp=60131;if(typeof Symbol=="function"&&Symbol.for){var Dr=Symbol.for;Lc=Dr("react.element"),ll=Dr("react.portal"),rs=Dr("react.fragment"),ug=Dr("react.strict_mode"),Uc=Dr("react.profiler"),cg=Dr("react.provider"),hg=Dr("react.context"),ud=Dr("react.forward_ref"),Vc=Dr("react.suspense"),Mf=Dr("react.suspense_list"),cd=Dr("react.memo"),fg=Dr("react.lazy"),dg=Dr("react.block"),Dr("react.scope"),pg=Dr("react.opaque.id"),tx=Dr("react.debug_trace_mode"),mg=Dr("react.offscreen"),Jp=Dr("react.legacy_hidden")}var U_=typeof Symbol=="function"&&Symbol.iterator;function xc(e){return e===null||typeof e!="object"?null:(e=U_&&e[U_]||e["@@iterator"],typeof e=="function"?e:null)}var xp;function Oc(e){if(xp===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xp=r&&r[1]||""}return`
`+xp+e}var wp=!1;function ef(e,r){if(!e||wp)return"";wp=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(S){var c=S}Reflect.construct(e,[],r)}else{try{r.call()}catch(S){c=S}e.call(r.prototype)}else{try{throw Error()}catch(S){c=S}e()}}catch(S){if(S&&c&&typeof S.stack=="string"){for(var d=S.stack.split(`
`),_=c.stack.split(`
`),x=d.length-1,l=_.length-1;1<=x&&0<=l&&d[x]!==_[l];)l--;for(;1<=x&&0<=l;x--,l--)if(d[x]!==_[l]){if(x!==1||l!==1)do if(x--,l--,0>l||d[x]!==_[l])return`
`+d[x].replace(" at new "," at ");while(1<=x&&0<=l);break}}}finally{wp=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?Oc(e):""}function I2(e){switch(e.tag){case 5:return Oc(e.type);case 16:return Oc("Lazy");case 13:return Oc("Suspense");case 19:return Oc("SuspenseList");case 0:case 2:case 15:return e=ef(e.type,!1),e;case 11:return e=ef(e.type.render,!1),e;case 22:return e=ef(e.type._render,!1),e;case 1:return e=ef(e.type,!0),e;default:return""}}function vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rs:return"Fragment";case ll:return"Portal";case Uc:return"Profiler";case ug:return"StrictMode";case Vc:return"Suspense";case Mf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hg:return(e.displayName||"Context")+".Consumer";case cg:return(e._context.displayName||"Context")+".Provider";case ud:var r=e.render;return r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case cd:return vu(e.type);case dg:return vu(e._render);case fg:r=e._payload,e=e._init;try{return vu(e(r))}catch{}}return null}function gs(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function nx(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function P2(e){var r=nx(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),c=""+e[r];if(!e.hasOwnProperty(r)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,_=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,_.call(this,x)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function tf(e){e._valueTracker||(e._valueTracker=P2(e))}function rx(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return e&&(c=nx(e)?e.checked?"true":"false":e.value),e=c,e!==a?(r.setValue(e),!0):!1}function zf(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qp(e,r){var a=r.checked;return sr({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:e._wrapperState.initialChecked})}function V_(e,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=gs(r.value!=null?r.value:a),e._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ix(e,r){r=r.checked,r!=null&&lg(e,"checked",r,!1)}function em(e,r){ix(e,r);var a=gs(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?tm(e,r.type,a):r.hasOwnProperty("defaultValue")&&tm(e,r.type,gs(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function $_(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function tm(e,r,a){(r!=="number"||zf(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}function M2(e){var r="";return ld.Children.forEach(e,function(a){a!=null&&(r+=a)}),r}function nm(e,r){return e=sr({children:void 0},r),(r=M2(r.children))&&(e.children=r),e}function xu(e,r,a,c){if(e=e.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=r.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&c&&(e[a].defaultSelected=!0)}else{for(a=""+gs(a),r=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,c&&(e[d].defaultSelected=!0);return}r!==null||e[d].disabled||(r=e[d])}r!==null&&(r.selected=!0)}}function rm(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(at(91));return sr({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function j_(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(at(92));if(Array.isArray(a)){if(!(1>=a.length))throw Error(at(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:gs(a)}}function ox(e,r){var a=gs(r.value),c=gs(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),c!=null&&(e.defaultValue=""+c)}function G_(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}var im={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ax(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function om(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?ax(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nf,sx=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return e(r,a,c,d)})}:e}(function(e,r){if(e.namespaceURI!==im.svg||"innerHTML"in e)e.innerHTML=r;else{for(nf=nf||document.createElement("div"),nf.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=nf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function th(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var $c={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z2=["Webkit","ms","Moz","O"];Object.keys($c).forEach(function(e){z2.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),$c[r]=$c[e]})});function lx(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||$c.hasOwnProperty(e)&&$c[e]?(""+r).trim():r+"px"}function ux(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=lx(a,r[a],c);a==="float"&&(a="cssFloat"),c?e.setProperty(a,d):e[a]=d}}var L2=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(e,r){if(r){if(L2[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(at(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(at(60));if(!(typeof r.dangerouslySetInnerHTML=="object"&&"__html"in r.dangerouslySetInnerHTML))throw Error(at(61))}if(r.style!=null&&typeof r.style!="object")throw Error(at(62))}}function sm(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function gg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lm=null,wu=null,bu=null;function Z_(e){if(e=yh(e)){if(typeof lm!="function")throw Error(at(280));var r=e.stateNode;r&&(r=gd(r),lm(e.stateNode,e.type,r))}}function cx(e){wu?bu?bu.push(e):bu=[e]:wu=e}function hx(){if(wu){var e=wu,r=bu;if(bu=wu=null,Z_(e),r)for(e=0;e<r.length;e++)Z_(r[e])}}function yg(e,r){return e(r)}function fx(e,r,a,c,d){return e(r,a,c,d)}function _g(){}var dx=yg,ul=!1,bp=!1;function vg(){(wu!==null||bu!==null)&&(_g(),hx())}function O2(e,r,a){if(bp)return e(r,a);bp=!0;try{return dx(e,r,a)}finally{bp=!1,vg()}}function nh(e,r){var a=e.stateNode;if(a===null)return null;var c=gd(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(at(231,r,typeof a));return a}var um=!1;if(Ca)try{var wc={};Object.defineProperty(wc,"passive",{get:function(){um=!0}}),window.addEventListener("test",wc,wc),window.removeEventListener("test",wc,wc)}catch{um=!1}function R2(e,r,a,c,d,_,x,l,S){var A=Array.prototype.slice.call(arguments,3);try{r.apply(a,A)}catch(z){this.onError(z)}}var jc=!1,Lf=null,Of=!1,cm=null,D2={onError:function(e){jc=!0,Lf=e}};function F2(e,r,a,c,d,_,x,l,S){jc=!1,Lf=null,R2.apply(D2,arguments)}function B2(e,r,a,c,d,_,x,l,S){if(F2.apply(this,arguments),jc){if(jc){var A=Lf;jc=!1,Lf=null}else throw Error(at(198));Of||(Of=!0,cm=A)}}function bl(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&1026)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function px(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function q_(e){if(bl(e)!==e)throw Error(at(188))}function N2(e){var r=e.alternate;if(!r){if(r=bl(e),r===null)throw Error(at(188));return r!==e?null:e}for(var a=e,c=r;;){var d=a.return;if(d===null)break;var _=d.alternate;if(_===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===a)return q_(d),e;if(_===c)return q_(d),r;_=_.sibling}throw Error(at(188))}if(a.return!==c.return)a=d,c=_;else{for(var x=!1,l=d.child;l;){if(l===a){x=!0,a=d,c=_;break}if(l===c){x=!0,c=d,a=_;break}l=l.sibling}if(!x){for(l=_.child;l;){if(l===a){x=!0,a=_,c=d;break}if(l===c){x=!0,c=_,a=d;break}l=l.sibling}if(!x)throw Error(at(189))}}if(a.alternate!==c)throw Error(at(190))}if(a.tag!==3)throw Error(at(188));return a.stateNode.current===a?e:r}function mx(e){if(e=N2(e),!e)return null;for(var r=e;;){if(r.tag===5||r.tag===6)return r;if(r.child)r.child.return=r,r=r.child;else{if(r===e)break;for(;!r.sibling;){if(!r.return||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}}return null}function W_(e,r){for(var a=e.alternate;r!==null;){if(r===e||r===a)return!0;r=r.return}return!1}var gx,xg,yx,_x,hm=!1,qo=[],ls=null,us=null,cs=null,rh=new Map,ih=new Map,bc=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fm(e,r,a,c,d){return{blockedOn:e,domEventName:r,eventSystemFlags:a|16,nativeEvent:d,targetContainers:[c]}}function H_(e,r){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":rh.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(r.pointerId)}}function Ec(e,r,a,c,d,_){return e===null||e.nativeEvent!==_?(e=fm(r,a,c,d,_),r!==null&&(r=yh(r),r!==null&&xg(r)),e):(e.eventSystemFlags|=c,r=e.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),e)}function U2(e,r,a,c,d){switch(r){case"focusin":return ls=Ec(ls,e,r,a,c,d),!0;case"dragenter":return us=Ec(us,e,r,a,c,d),!0;case"mouseover":return cs=Ec(cs,e,r,a,c,d),!0;case"pointerover":var _=d.pointerId;return rh.set(_,Ec(rh.get(_)||null,e,r,a,c,d)),!0;case"gotpointercapture":return _=d.pointerId,ih.set(_,Ec(ih.get(_)||null,e,r,a,c,d)),!0}return!1}function V2(e){var r=cl(e.target);if(r!==null){var a=bl(r);if(a!==null){if(r=a.tag,r===13){if(r=px(a),r!==null){e.blockedOn=r,_x(e.lanePriority,function(){Fr.unstable_runWithPriority(e.priority,function(){yx(a)})});return}}else if(r===3&&a.stateNode.hydrate){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gf(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=Sg(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a!==null)return r=yh(a),r!==null&&xg(r),e.blockedOn=a,!1;r.shift()}return!0}function Y_(e,r,a){gf(e)&&a.delete(r)}function $2(){for(hm=!1;0<qo.length;){var e=qo[0];if(e.blockedOn!==null){e=yh(e.blockedOn),e!==null&&gx(e);break}for(var r=e.targetContainers;0<r.length;){var a=Sg(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a!==null){e.blockedOn=a;break}r.shift()}e.blockedOn===null&&qo.shift()}ls!==null&&gf(ls)&&(ls=null),us!==null&&gf(us)&&(us=null),cs!==null&&gf(cs)&&(cs=null),rh.forEach(Y_),ih.forEach(Y_)}function Sc(e,r){e.blockedOn===r&&(e.blockedOn=null,hm||(hm=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,$2)))}function vx(e){function r(d){return Sc(d,e)}if(0<qo.length){Sc(qo[0],e);for(var a=1;a<qo.length;a++){var c=qo[a];c.blockedOn===e&&(c.blockedOn=null)}}for(ls!==null&&Sc(ls,e),us!==null&&Sc(us,e),cs!==null&&Sc(cs,e),rh.forEach(r),ih.forEach(r),a=0;a<bc.length;a++)c=bc[a],c.blockedOn===e&&(c.blockedOn=null);for(;0<bc.length&&(a=bc[0],a.blockedOn===null);)V2(a),a.blockedOn===null&&bc.shift()}function rf(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var cu={animationend:rf("Animation","AnimationEnd"),animationiteration:rf("Animation","AnimationIteration"),animationstart:rf("Animation","AnimationStart"),transitionend:rf("Transition","TransitionEnd")},Ep={},xx={};Ca&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function hd(e){if(Ep[e])return Ep[e];if(!cu[e])return e;var r=cu[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in xx)return Ep[e]=r[a];return e}var wx=hd("animationend"),bx=hd("animationiteration"),Ex=hd("animationstart"),Sx=hd("transitionend"),Tx=new Map,wg=new Map,j2=["abort","abort",wx,"animationEnd",bx,"animationIteration",Ex,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Sx,"transitionEnd","waiting","waiting"];function bg(e,r){for(var a=0;a<e.length;a+=2){var c=e[a],d=e[a+1];d="on"+(d[0].toUpperCase()+d.slice(1)),wg.set(c,r),Tx.set(c,d),xl(d,[c])}}var G2=Fr.unstable_now;G2();var Xn=8;function lu(e){if((1&e)!==0)return Xn=15,1;if((2&e)!==0)return Xn=14,2;if((4&e)!==0)return Xn=13,4;var r=24&e;return r!==0?(Xn=12,r):(e&32)!==0?(Xn=11,32):(r=192&e,r!==0?(Xn=10,r):(e&256)!==0?(Xn=9,256):(r=3584&e,r!==0?(Xn=8,r):(e&4096)!==0?(Xn=7,4096):(r=4186112&e,r!==0?(Xn=6,r):(r=62914560&e,r!==0?(Xn=5,r):e&67108864?(Xn=4,67108864):(e&134217728)!==0?(Xn=3,134217728):(r=805306368&e,r!==0?(Xn=2,r):(1073741824&e)!==0?(Xn=1,1073741824):(Xn=8,e))))))}function Z2(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function q2(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(at(358,e))}}function oh(e,r){var a=e.pendingLanes;if(a===0)return Xn=0;var c=0,d=0,_=e.expiredLanes,x=e.suspendedLanes,l=e.pingedLanes;if(_!==0)c=_,d=Xn=15;else if(_=a&134217727,_!==0){var S=_&~x;S!==0?(c=lu(S),d=Xn):(l&=_,l!==0&&(c=lu(l),d=Xn))}else _=a&~x,_!==0?(c=lu(_),d=Xn):l!==0&&(c=lu(l),d=Xn);if(c===0)return 0;if(c=31-ys(c),c=a&((0>c?0:1<<c)<<1)-1,r!==0&&r!==c&&(r&x)===0){if(lu(r),d<=Xn)return r;Xn=d}if(r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=c;0<r;)a=31-ys(r),d=1<<a,c|=e[a],r&=~d;return c}function Ax(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rf(e,r){switch(e){case 15:return 1;case 14:return 2;case 12:return e=uu(24&~r),e===0?Rf(10,r):e;case 10:return e=uu(192&~r),e===0?Rf(8,r):e;case 8:return e=uu(3584&~r),e===0&&(e=uu(4186112&~r),e===0&&(e=512)),e;case 2:return r=uu(805306368&~r),r===0&&(r=268435456),r}throw Error(at(358,e))}function uu(e){return e&-e}function Sp(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function fd(e,r,a){e.pendingLanes|=r;var c=r-1;e.suspendedLanes&=c,e.pingedLanes&=c,e=e.eventTimes,r=31-ys(r),e[r]=a}var ys=Math.clz32?Math.clz32:H2,W2=Math.log,X2=Math.LN2;function H2(e){return e===0?32:31-(W2(e)/X2|0)|0}var Y2=Fr.unstable_UserBlockingPriority,K2=Fr.unstable_runWithPriority,yf=!0;function J2(e,r,a,c){ul||_g();var d=Eg,_=ul;ul=!0;try{fx(d,e,r,a,c)}finally{(ul=_)||vg()}}function Q2(e,r,a,c){K2(Y2,Eg.bind(null,e,r,a,c))}function Eg(e,r,a,c){if(yf){var d;if((d=(r&4)===0)&&0<qo.length&&-1<X_.indexOf(e))e=fm(null,e,r,a,c),qo.push(e);else{var _=Sg(e,r,a,c);if(_===null)d&&H_(e,c);else{if(d){if(-1<X_.indexOf(e)){e=fm(_,e,r,a,c),qo.push(e);return}if(U2(_,e,r,a,c))return;H_(e,c)}Nx(e,r,c,null,a)}}}}function Sg(e,r,a,c){var d=gg(c);if(d=cl(d),d!==null){var _=bl(d);if(_===null)d=null;else{var x=_.tag;if(x===13){if(d=px(_),d!==null)return d;d=null}else if(x===3){if(_.stateNode.hydrate)return _.tag===3?_.stateNode.containerInfo:null;d=null}else _!==d&&(d=null)}}return Nx(e,r,c,d,a),null}var is=null,Tg=null,_f=null;function Cx(){if(_f)return _f;var e,r=Tg,a=r.length,c,d="value"in is?is.value:is.textContent,_=d.length;for(e=0;e<a&&r[e]===d[e];e++);var x=a-e;for(c=1;c<=x&&r[a-c]===d[_-c];c++);return _f=d.slice(e,1<c?1-c:void 0)}function vf(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function of(){return!0}function K_(){return!1}function Ni(e){function r(a,c,d,_,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(_):_[l]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?of:K_,this.isPropagationStopped=K_,this}return sr(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=of)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=of)},persist:function(){},isPersistent:of}),r}var Fu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ag=Ni(Fu),gh=sr({},Fu,{view:0,detail:0}),eE=Ni(gh),Tp,Ap,Tc,dd=sr({},gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tc&&(Tc&&e.type==="mousemove"?(Tp=e.screenX-Tc.screenX,Ap=e.screenY-Tc.screenY):Ap=Tp=0,Tc=e),Tp)},movementY:function(e){return"movementY"in e?e.movementY:Ap}}),J_=Ni(dd),tE=sr({},dd,{dataTransfer:0}),nE=Ni(tE),rE=sr({},gh,{relatedTarget:0}),Cp=Ni(rE),iE=sr({},Fu,{animationName:0,elapsedTime:0,pseudoElement:0}),oE=Ni(iE),aE=sr({},Fu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sE=Ni(aE),lE=sr({},Fu,{data:0}),Q_=Ni(lE),uE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fE(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=hE[e])?!!r[e]:!1}function Cg(){return fE}var dE=sr({},gh,{key:function(e){if(e.key){var r=uE[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=vf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cg,charCode:function(e){return e.type==="keypress"?vf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pE=Ni(dE),mE=sr({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=Ni(mE),gE=sr({},gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cg}),yE=Ni(gE),_E=sr({},Fu,{propertyName:0,elapsedTime:0,pseudoElement:0}),vE=Ni(_E),xE=sr({},dd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wE=Ni(xE),bE=[9,13,27,32],kg=Ca&&"CompositionEvent"in window,Gc=null;Ca&&"documentMode"in document&&(Gc=document.documentMode);var EE=Ca&&"TextEvent"in window&&!Gc,kx=Ca&&(!kg||Gc&&8<Gc&&11>=Gc),t0=String.fromCharCode(32),n0=!1;function Ix(e,r){switch(e){case"keyup":return bE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Px(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hu=!1;function SE(e,r){switch(e){case"compositionend":return Px(r);case"keypress":return r.which!==32?null:(n0=!0,t0);case"textInput":return e=r.data,e===t0&&n0?null:e;default:return null}}function TE(e,r){if(hu)return e==="compositionend"||!kg&&Ix(e,r)?(e=Cx(),_f=Tg=is=null,hu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return kx&&r.locale!=="ko"?null:r.data;default:return null}}var AE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!AE[e.type]:r==="textarea"}function Mx(e,r,a,c){cx(c),r=Df(r,"onChange"),0<r.length&&(a=new Ag("onChange","change",null,a,c),e.push({event:a,listeners:r}))}var Zc=null,ah=null;function CE(e){Dx(e,0)}function pd(e){var r=du(e);if(rx(r))return e}function kE(e,r){if(e==="change")return r}var zx=!1;if(Ca){var kp;if(Ca){var Ip="oninput"in document;if(!Ip){var i0=document.createElement("div");i0.setAttribute("oninput","return;"),Ip=typeof i0.oninput=="function"}kp=Ip}else kp=!1;zx=kp&&(!document.documentMode||9<document.documentMode)}function o0(){Zc&&(Zc.detachEvent("onpropertychange",Lx),ah=Zc=null)}function Lx(e){if(e.propertyName==="value"&&pd(ah)){var r=[];if(Mx(r,ah,e,gg(e)),e=CE,ul)e(r);else{ul=!0;try{yg(e,r)}finally{ul=!1,vg()}}}}function IE(e,r,a){e==="focusin"?(o0(),Zc=r,ah=a,Zc.attachEvent("onpropertychange",Lx)):e==="focusout"&&o0()}function PE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pd(ah)}function ME(e,r){if(e==="click")return pd(r)}function zE(e,r){if(e==="input"||e==="change")return pd(r)}function LE(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var no=typeof Object.is=="function"?Object.is:LE,OE=Object.prototype.hasOwnProperty;function sh(e,r){if(no(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++)if(!OE.call(r,a[c])||!no(e[a[c]],r[a[c]]))return!1;return!0}function a0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s0(e,r){var a=a0(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=r&&c>=r)return{node:a,offset:r-e};e=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=a0(a)}}function Ox(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Ox(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function l0(){for(var e=window,r=zf();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=zf(e.document)}return r}function dm(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var RE=Ca&&"documentMode"in document&&11>=document.documentMode,fu=null,pm=null,qc=null,mm=!1;function u0(e,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mm||fu==null||fu!==zf(c)||(c=fu,"selectionStart"in c&&dm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),qc&&sh(qc,c)||(qc=c,c=Df(pm,"onSelect"),0<c.length&&(r=new Ag("onSelect","select",null,r,a),e.push({event:r,listeners:c}),r.target=fu)))}bg("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);bg("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);bg(j2,2);for(var c0="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Pp=0;Pp<c0.length;Pp++)wg.set(c0[Pp],0);Pu("onMouseEnter",["mouseout","mouseover"]);Pu("onMouseLeave",["mouseout","mouseover"]);Pu("onPointerEnter",["pointerout","pointerover"]);Pu("onPointerLeave",["pointerout","pointerover"]);xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function h0(e,r,a){var c=e.type||"unknown-event";e.currentTarget=a,B2(c,r,void 0,e),e.currentTarget=null}function Dx(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],d=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var x=c.length-1;0<=x;x--){var l=c[x],S=l.instance,A=l.currentTarget;if(l=l.listener,S!==_&&d.isPropagationStopped())break e;h0(d,l,A),_=S}else for(x=0;x<c.length;x++){if(l=c[x],S=l.instance,A=l.currentTarget,l=l.listener,S!==_&&d.isPropagationStopped())break e;h0(d,l,A),_=S}}}if(Of)throw e=cm,Of=!1,cm=null,e}function er(e,r){var a=Vx(r),c=e+"__bubble";a.has(c)||(Bx(r,e,2,!1),a.add(c))}var f0="_reactListening"+Math.random().toString(36).slice(2);function Fx(e){e[f0]||(e[f0]=!0,ex.forEach(function(r){Rx.has(r)||d0(r,!1,e,null),d0(r,!0,e,null)}))}function d0(e,r,a,c){var d=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,_=a;if(e==="selectionchange"&&a.nodeType!==9&&(_=a.ownerDocument),c!==null&&!r&&Rx.has(e)){if(e!=="scroll")return;d|=2,_=c}var x=Vx(_),l=e+"__"+(r?"capture":"bubble");x.has(l)||(r&&(d|=4),Bx(_,e,d,r),x.add(l))}function Bx(e,r,a,c){var d=wg.get(r);switch(d===void 0?2:d){case 0:d=J2;break;case 1:d=Q2;break;default:d=Eg}a=d.bind(null,r,a,e),d=void 0,!um||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?e.addEventListener(r,a,{capture:!0,passive:d}):e.addEventListener(r,a,!0):d!==void 0?e.addEventListener(r,a,{passive:d}):e.addEventListener(r,a,!1)}function Nx(e,r,a,c,d){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var l=c.stateNode.containerInfo;if(l===d||l.nodeType===8&&l.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var S=x.tag;if((S===3||S===4)&&(S=x.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;x=x.return}for(;l!==null;){if(x=cl(l),x===null)return;if(S=x.tag,S===5||S===6){c=_=x;continue e}l=l.parentNode}}c=c.return}O2(function(){var A=_,z=gg(a),C=[];e:{var P=Tx.get(e);if(P!==void 0){var q=Ag,te=e;switch(e){case"keypress":if(vf(a)===0)break e;case"keydown":case"keyup":q=pE;break;case"focusin":te="focus",q=Cp;break;case"focusout":te="blur",q=Cp;break;case"beforeblur":case"afterblur":q=Cp;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=J_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=nE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=yE;break;case wx:case bx:case Ex:q=oE;break;case Sx:q=vE;break;case"scroll":q=eE;break;case"wheel":q=wE;break;case"copy":case"cut":case"paste":q=sE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=e0}var Z=(r&4)!==0,j=!Z&&e==="scroll",N=Z?P!==null?P+"Capture":null:P;Z=[];for(var $=A,G;$!==null;){G=$;var J=G.stateNode;if(G.tag===5&&J!==null&&(G=J,N!==null&&(J=nh($,N),J!=null&&Z.push(lh($,J,G)))),j)break;$=$.return}0<Z.length&&(P=new q(P,te,null,a,z),C.push({event:P,listeners:Z}))}}if((r&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",P&&(r&16)===0&&(te=a.relatedTarget||a.fromElement)&&(cl(te)||te[Bu]))break e;if((q||P)&&(P=z.window===z?z:(P=z.ownerDocument)?P.defaultView||P.parentWindow:window,q?(te=a.relatedTarget||a.toElement,q=A,te=te?cl(te):null,te!==null&&(j=bl(te),te!==j||te.tag!==5&&te.tag!==6)&&(te=null)):(q=null,te=A),q!==te)){if(Z=J_,J="onMouseLeave",N="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(Z=e0,J="onPointerLeave",N="onPointerEnter",$="pointer"),j=q==null?P:du(q),G=te==null?P:du(te),P=new Z(J,$+"leave",q,a,z),P.target=j,P.relatedTarget=G,J=null,cl(z)===A&&(Z=new Z(N,$+"enter",te,a,z),Z.target=G,Z.relatedTarget=j,J=Z),j=J,q&&te)t:{for(Z=q,N=te,$=0,G=Z;G;G=ou(G))$++;for(G=0,J=N;J;J=ou(J))G++;for(;0<$-G;)Z=ou(Z),$--;for(;0<G-$;)N=ou(N),G--;for(;$--;){if(Z===N||N!==null&&Z===N.alternate)break t;Z=ou(Z),N=ou(N)}Z=null}else Z=null;q!==null&&p0(C,P,q,Z,!1),te!==null&&j!==null&&p0(C,j,te,Z,!0)}}e:{if(P=A?du(A):window,q=P.nodeName&&P.nodeName.toLowerCase(),q==="select"||q==="input"&&P.type==="file")var me=kE;else if(r0(P))if(zx)me=zE;else{me=PE;var H=IE}else(q=P.nodeName)&&q.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(me=ME);if(me&&(me=me(e,A))){Mx(C,me,a,z);break e}H&&H(e,P,A),e==="focusout"&&(H=P._wrapperState)&&H.controlled&&P.type==="number"&&tm(P,"number",P.value)}switch(H=A?du(A):window,e){case"focusin":(r0(H)||H.contentEditable==="true")&&(fu=H,pm=A,qc=null);break;case"focusout":qc=pm=fu=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,u0(C,a,z);break;case"selectionchange":if(RE)break;case"keydown":case"keyup":u0(C,a,z)}var se;if(kg)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else hu?Ix(e,a)&&(ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ne="onCompositionStart");ne&&(kx&&a.locale!=="ko"&&(hu||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&hu&&(se=Cx()):(is=z,Tg="value"in is?is.value:is.textContent,hu=!0)),H=Df(A,ne),0<H.length&&(ne=new Q_(ne,e,null,a,z),C.push({event:ne,listeners:H}),se?ne.data=se:(se=Px(a),se!==null&&(ne.data=se)))),(se=EE?SE(e,a):TE(e,a))&&(A=Df(A,"onBeforeInput"),0<A.length&&(z=new Q_("onBeforeInput","beforeinput",null,a,z),C.push({event:z,listeners:A}),z.data=se))}Dx(C,r)})}function lh(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Df(e,r){for(var a=r+"Capture",c=[];e!==null;){var d=e,_=d.stateNode;d.tag===5&&_!==null&&(d=_,_=nh(e,a),_!=null&&c.unshift(lh(e,_,d)),_=nh(e,r),_!=null&&c.push(lh(e,_,d))),e=e.return}return c}function ou(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function p0(e,r,a,c,d){for(var _=r._reactName,x=[];a!==null&&a!==c;){var l=a,S=l.alternate,A=l.stateNode;if(S!==null&&S===c)break;l.tag===5&&A!==null&&(l=A,d?(S=nh(a,_),S!=null&&x.unshift(lh(a,S,l))):d||(S=nh(a,_),S!=null&&x.push(lh(a,S,l)))),a=a.return}x.length!==0&&e.push({event:r,listeners:x})}function Ff(){}var Mp=null,zp=null;function Ux(e,r){switch(e){case"button":case"input":case"select":case"textarea":return!!r.autoFocus}return!1}function gm(e,r){return e==="textarea"||e==="option"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var m0=typeof setTimeout=="function"?setTimeout:void 0,DE=typeof clearTimeout=="function"?clearTimeout:void 0;function Ig(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Eu(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break}return e}function g0(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var Lp=0;function FE(e){return{$$typeof:pg,toString:e,valueOf:e}}var md=Math.random().toString(36).slice(2),os="__reactFiber$"+md,Bf="__reactProps$"+md,Bu="__reactContainer$"+md,y0="__reactEvents$"+md;function cl(e){var r=e[os];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Bu]||a[os]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=g0(e);e!==null;){if(a=e[os])return a;e=g0(e)}return r}e=a,a=e.parentNode}return null}function yh(e){return e=e[os]||e[Bu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function du(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(at(33))}function gd(e){return e[Bf]||null}function Vx(e){var r=e[y0];return r===void 0&&(r=e[y0]=new Set),r}var ym=[],pu=-1;function Es(e){return{current:e}}function tr(e){0>pu||(e.current=ym[pu],ym[pu]=null,pu--)}function _r(e,r){pu++,ym[pu]=e.current,e.current=r}var _s={},ii=Es(_s),Ai=Es(!1),ml=_s;function Mu(e,r){var a=e.type.contextTypes;if(!a)return _s;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},_;for(_ in a)d[_]=r[_];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=d),d}function Ci(e){return e=e.childContextTypes,e!=null}function Nf(){tr(Ai),tr(ii)}function _0(e,r,a){if(ii.current!==_s)throw Error(at(168));_r(ii,r),_r(Ai,a)}function $x(e,r,a){var c=e.stateNode;if(e=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in e))throw Error(at(108,vu(r)||"Unknown",d));return sr({},a,c)}function xf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_s,ml=ii.current,_r(ii,e),_r(Ai,Ai.current),!0}function v0(e,r,a){var c=e.stateNode;if(!c)throw Error(at(169));a?(e=$x(e,r,ml),c.__reactInternalMemoizedMergedChildContext=e,tr(Ai),tr(ii),_r(ii,e)):tr(Ai),_r(Ai,a)}var Pg=null,pl=null,BE=Fr.unstable_runWithPriority,Mg=Fr.unstable_scheduleCallback,_m=Fr.unstable_cancelCallback,NE=Fr.unstable_shouldYield,x0=Fr.unstable_requestPaint,vm=Fr.unstable_now,UE=Fr.unstable_getCurrentPriorityLevel,yd=Fr.unstable_ImmediatePriority,jx=Fr.unstable_UserBlockingPriority,Gx=Fr.unstable_NormalPriority,Zx=Fr.unstable_LowPriority,qx=Fr.unstable_IdlePriority,Op={},VE=x0!==void 0?x0:function(){},ba=null,wf=null,Rp=!1,w0=vm(),ni=1e4>w0?vm:function(){return vm()-w0};function zu(){switch(UE()){case yd:return 99;case jx:return 98;case Gx:return 97;case Zx:return 96;case qx:return 95;default:throw Error(at(332))}}function Wx(e){switch(e){case 99:return yd;case 98:return jx;case 97:return Gx;case 96:return Zx;case 95:return qx;default:throw Error(at(332))}}function gl(e,r){return e=Wx(e),BE(e,r)}function uh(e,r,a){return e=Wx(e),Mg(e,r,a)}function Jo(){if(wf!==null){var e=wf;wf=null,_m(e)}Xx()}function Xx(){if(!Rp&&ba!==null){Rp=!0;var e=0;try{var r=ba;gl(99,function(){for(;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}}),ba=null}catch(a){throw ba!==null&&(ba=ba.slice(e+1)),Mg(yd,Jo),a}finally{Rp=!1}}}var $E=wl.ReactCurrentBatchConfig;function ko(e,r){if(e&&e.defaultProps){r=sr({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}var Uf=Es(null),Vf=null,mu=null,$f=null;function zg(){$f=mu=Vf=null}function Lg(e){var r=Uf.current;tr(Uf),e.type._context._currentValue=r}function Hx(e,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&r)===r){if(a===null||(a.childLanes&r)===r)break;a.childLanes|=r}else e.childLanes|=r,a!==null&&(a.childLanes|=r);e=e.return}}function Su(e,r){Vf=e,$f=mu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Io=!0),e.firstContext=null)}function ao(e,r){if($f!==e&&r!==!1&&r!==0)if((typeof r!="number"||r===1073741823)&&($f=e,r=1073741823),r={context:e,observedBits:r,next:null},mu===null){if(Vf===null)throw Error(at(308));mu=r,Vf.dependencies={lanes:0,firstContext:r,responders:null}}else mu=mu.next=r;return e._currentValue}var ns=!1;function Og(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Yx(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hs(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function fs(e,r){if(e=e.updateQueue,e!==null){e=e.shared;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}}function b0(e,r){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};_===null?d=_=x:_=_.next=x,a=a.next}while(a!==null);_===null?d=_=r:_=_.next=r}else d=_=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:c.shared,effects:c.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function ch(e,r,a,c){var d=e.updateQueue;ns=!1;var _=d.firstBaseUpdate,x=d.lastBaseUpdate,l=d.shared.pending;if(l!==null){d.shared.pending=null;var S=l,A=S.next;S.next=null,x===null?_=A:x.next=A,x=S;var z=e.alternate;if(z!==null){z=z.updateQueue;var C=z.lastBaseUpdate;C!==x&&(C===null?z.firstBaseUpdate=A:C.next=A,z.lastBaseUpdate=S)}}if(_!==null){C=d.baseState,x=0,z=A=S=null;do{l=_.lane;var P=_.eventTime;if((c&l)===l){z!==null&&(z=z.next={eventTime:P,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var q=e,te=_;switch(l=r,P=a,te.tag){case 1:if(q=te.payload,typeof q=="function"){C=q.call(P,C,l);break e}C=q;break e;case 3:q.flags=q.flags&-4097|64;case 0:if(q=te.payload,l=typeof q=="function"?q.call(P,C,l):q,l==null)break e;C=sr({},C,l);break e;case 2:ns=!0}}_.callback!==null&&(e.flags|=32,l=d.effects,l===null?d.effects=[_]:l.push(_))}else P={eventTime:P,lane:l,tag:_.tag,payload:_.payload,callback:_.callback,next:null},z===null?(A=z=P,S=C):z=z.next=P,x|=l;if(_=_.next,_===null){if(l=d.shared.pending,l===null)break;_=l.next,l.next=null,d.lastBaseUpdate=l,d.shared.pending=null}}while(1);z===null&&(S=C),d.baseState=S,d.firstBaseUpdate=A,d.lastBaseUpdate=z,vh|=x,e.lanes=x,e.memoizedState=C}}function E0(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var c=e[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(at(191,d));d.call(c)}}}var Kx=new ld.Component().refs;function jf(e,r,a,c){r=e.memoizedState,a=a(c,r),a=a==null?r:sr({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var _d={isMounted:function(e){return(e=e._reactInternals)?bl(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var c=Bi(),d=ds(e),_=hs(c,d);_.payload=r,a!=null&&(_.callback=a),fs(e,_),ps(e,d,c)},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var c=Bi(),d=ds(e),_=hs(c,d);_.tag=1,_.payload=r,a!=null&&(_.callback=a),fs(e,_),ps(e,d,c)},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=Bi(),c=ds(e),d=hs(a,c);d.tag=2,r!=null&&(d.callback=r),fs(e,d),ps(e,c,a)}};function S0(e,r,a,c,d,_,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,_,x):r.prototype&&r.prototype.isPureReactComponent?!sh(a,c)||!sh(d,_):!0}function Jx(e,r,a){var c=!1,d=_s,_=r.contextType;return typeof _=="object"&&_!==null?_=ao(_):(d=Ci(r)?ml:ii.current,c=r.contextTypes,_=(c=c!=null)?Mu(e,d):_s),r=new r(a,_),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_d,e.stateNode=r,r._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=_),r}function T0(e,r,a,c){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==e&&_d.enqueueReplaceState(r,r.state,null)}function xm(e,r,a,c){var d=e.stateNode;d.props=a,d.state=e.memoizedState,d.refs=Kx,Og(e);var _=r.contextType;typeof _=="object"&&_!==null?d.context=ao(_):(_=Ci(r)?ml:ii.current,d.context=Mu(e,_)),ch(e,a,d,c),d.state=e.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(jf(e,r,_,a),d.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&_d.enqueueReplaceState(d,d.state,null),ch(e,a,d,c),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4)}var af=Array.isArray;function Ac(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(at(309));var c=a.stateNode}if(!c)throw Error(at(147,e));var d=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(_){var x=c.refs;x===Kx&&(x=c.refs={}),_===null?delete x[d]:x[d]=_},r._stringRef=d,r)}if(typeof e!="string")throw Error(at(284));if(!a._owner)throw Error(at(290,e))}return e}function sf(e,r){if(e.type!=="textarea")throw Error(at(31,Object.prototype.toString.call(r)==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":r))}function Qx(e){function r(j,N){if(e){var $=j.lastEffect;$!==null?($.nextEffect=N,j.lastEffect=N):j.firstEffect=j.lastEffect=N,N.nextEffect=null,N.flags=8}}function a(j,N){if(!e)return null;for(;N!==null;)r(j,N),N=N.sibling;return null}function c(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function d(j,N){return j=xs(j,N),j.index=0,j.sibling=null,j}function _(j,N,$){return j.index=$,e?($=j.alternate,$!==null?($=$.index,$<N?(j.flags=2,N):$):(j.flags=2,N)):N}function x(j){return e&&j.alternate===null&&(j.flags=2),j}function l(j,N,$,G){return N===null||N.tag!==6?(N=Up($,j.mode,G),N.return=j,N):(N=d(N,$),N.return=j,N)}function S(j,N,$,G){return N!==null&&N.elementType===$.type?(G=d(N,$.props),G.ref=Ac(j,N,$),G.return=j,G):(G=Tf($.type,$.key,$.props,null,j.mode,G),G.ref=Ac(j,N,$),G.return=j,G)}function A(j,N,$,G){return N===null||N.tag!==4||N.stateNode.containerInfo!==$.containerInfo||N.stateNode.implementation!==$.implementation?(N=Vp($,j.mode,G),N.return=j,N):(N=d(N,$.children||[]),N.return=j,N)}function z(j,N,$,G,J){return N===null||N.tag!==7?(N=ku($,j.mode,G,J),N.return=j,N):(N=d(N,$),N.return=j,N)}function C(j,N,$){if(typeof N=="string"||typeof N=="number")return N=Up(""+N,j.mode,$),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Lc:return $=Tf(N.type,N.key,N.props,null,j.mode,$),$.ref=Ac(j,null,N),$.return=j,$;case ll:return N=Vp(N,j.mode,$),N.return=j,N}if(af(N)||xc(N))return N=ku(N,j.mode,$,null),N.return=j,N;sf(j,N)}return null}function P(j,N,$,G){var J=N!==null?N.key:null;if(typeof $=="string"||typeof $=="number")return J!==null?null:l(j,N,""+$,G);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Lc:return $.key===J?$.type===rs?z(j,N,$.props.children,G,J):S(j,N,$,G):null;case ll:return $.key===J?A(j,N,$,G):null}if(af($)||xc($))return J!==null?null:z(j,N,$,G,null);sf(j,$)}return null}function q(j,N,$,G,J){if(typeof G=="string"||typeof G=="number")return j=j.get($)||null,l(N,j,""+G,J);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Lc:return j=j.get(G.key===null?$:G.key)||null,G.type===rs?z(N,j,G.props.children,J,G.key):S(N,j,G,J);case ll:return j=j.get(G.key===null?$:G.key)||null,A(N,j,G,J)}if(af(G)||xc(G))return j=j.get($)||null,z(N,j,G,J,null);sf(N,G)}return null}function te(j,N,$,G){for(var J=null,me=null,H=N,se=N=0,ne=null;H!==null&&se<$.length;se++){H.index>se?(ne=H,H=null):ne=H.sibling;var Te=P(j,H,$[se],G);if(Te===null){H===null&&(H=ne);break}e&&H&&Te.alternate===null&&r(j,H),N=_(Te,N,se),me===null?J=Te:me.sibling=Te,me=Te,H=ne}if(se===$.length)return a(j,H),J;if(H===null){for(;se<$.length;se++)H=C(j,$[se],G),H!==null&&(N=_(H,N,se),me===null?J=H:me.sibling=H,me=H);return J}for(H=c(j,H);se<$.length;se++)ne=q(H,j,se,$[se],G),ne!==null&&(e&&ne.alternate!==null&&H.delete(ne.key===null?se:ne.key),N=_(ne,N,se),me===null?J=ne:me.sibling=ne,me=ne);return e&&H.forEach(function(Ce){return r(j,Ce)}),J}function Z(j,N,$,G){var J=xc($);if(typeof J!="function")throw Error(at(150));if($=J.call($),$==null)throw Error(at(151));for(var me=J=null,H=N,se=N=0,ne=null,Te=$.next();H!==null&&!Te.done;se++,Te=$.next()){H.index>se?(ne=H,H=null):ne=H.sibling;var Ce=P(j,H,Te.value,G);if(Ce===null){H===null&&(H=ne);break}e&&H&&Ce.alternate===null&&r(j,H),N=_(Ce,N,se),me===null?J=Ce:me.sibling=Ce,me=Ce,H=ne}if(Te.done)return a(j,H),J;if(H===null){for(;!Te.done;se++,Te=$.next())Te=C(j,Te.value,G),Te!==null&&(N=_(Te,N,se),me===null?J=Te:me.sibling=Te,me=Te);return J}for(H=c(j,H);!Te.done;se++,Te=$.next())Te=q(H,j,se,Te.value,G),Te!==null&&(e&&Te.alternate!==null&&H.delete(Te.key===null?se:Te.key),N=_(Te,N,se),me===null?J=Te:me.sibling=Te,me=Te);return e&&H.forEach(function(Pe){return r(j,Pe)}),J}return function(j,N,$,G){var J=typeof $=="object"&&$!==null&&$.type===rs&&$.key===null;J&&($=$.props.children);var me=typeof $=="object"&&$!==null;if(me)switch($.$$typeof){case Lc:e:{for(me=$.key,J=N;J!==null;){if(J.key===me){switch(J.tag){case 7:if($.type===rs){a(j,J.sibling),N=d(J,$.props.children),N.return=j,j=N;break e}break;default:if(J.elementType===$.type){a(j,J.sibling),N=d(J,$.props),N.ref=Ac(j,J,$),N.return=j,j=N;break e}}a(j,J);break}else r(j,J);J=J.sibling}$.type===rs?(N=ku($.props.children,j.mode,G,$.key),N.return=j,j=N):(G=Tf($.type,$.key,$.props,null,j.mode,G),G.ref=Ac(j,N,$),G.return=j,j=G)}return x(j);case ll:e:{for(J=$.key;N!==null;){if(N.key===J)if(N.tag===4&&N.stateNode.containerInfo===$.containerInfo&&N.stateNode.implementation===$.implementation){a(j,N.sibling),N=d(N,$.children||[]),N.return=j,j=N;break e}else{a(j,N);break}else r(j,N);N=N.sibling}N=Vp($,j.mode,G),N.return=j,j=N}return x(j)}if(typeof $=="string"||typeof $=="number")return $=""+$,N!==null&&N.tag===6?(a(j,N.sibling),N=d(N,$),N.return=j,j=N):(a(j,N),N=Up($,j.mode,G),N.return=j,j=N),x(j);if(af($))return te(j,N,$,G);if(xc($))return Z(j,N,$,G);if(me&&sf(j,$),typeof $=="undefined"&&!J)switch(j.tag){case 1:case 22:case 0:case 11:case 15:throw Error(at(152,vu(j.type)||"Component"))}return a(j,N)}}var Gf=Qx(!0),e1=Qx(!1),_h={},Yo=Es(_h),hh=Es(_h),fh=Es(_h);function hl(e){if(e===_h)throw Error(at(174));return e}function wm(e,r){switch(_r(fh,r),_r(hh,e),_r(Yo,_h),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:om(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=om(r,e)}tr(Yo),_r(Yo,r)}function Lu(){tr(Yo),tr(hh),tr(fh)}function A0(e){hl(fh.current);var r=hl(Yo.current),a=om(r,e.type);r!==a&&(_r(hh,e),_r(Yo,a))}function Rg(e){hh.current===e&&(tr(Yo),tr(hh))}var yr=Es(0);function Zf(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&64)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sa=null,as=null,Ko=!1;function t1(e,r){var a=ro(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=r,a.return=e,a.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=a,e.lastEffect=a):e.firstEffect=e.lastEffect=a}function C0(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,!0):!1;case 13:return!1;default:return!1}}function bm(e){if(Ko){var r=as;if(r){var a=r;if(!C0(e,r)){if(r=Eu(a.nextSibling),!r||!C0(e,r)){e.flags=e.flags&-1025|2,Ko=!1,Sa=e;return}t1(Sa,a)}Sa=e,as=Eu(r.firstChild)}else e.flags=e.flags&-1025|2,Ko=!1,Sa=e}}function k0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sa=e}function lf(e){if(e!==Sa)return!1;if(!Ko)return k0(e),Ko=!0,!1;var r=e.type;if(e.tag!==5||r!=="head"&&r!=="body"&&!gm(r,e.memoizedProps))for(r=as;r;)t1(e,r),r=Eu(r.nextSibling);if(k0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(at(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){as=Eu(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}as=null}}else as=Sa?Eu(e.stateNode.nextSibling):null;return!0}function Dp(){as=Sa=null,Ko=!1}var Tu=[];function Dg(){for(var e=0;e<Tu.length;e++)Tu[e]._workInProgressVersionPrimary=null;Tu.length=0}var Wc=wl.ReactCurrentDispatcher,oo=wl.ReactCurrentBatchConfig,dh=0,Er=null,ti=null,Gr=null,qf=!1,Xc=!1;function Si(){throw Error(at(321))}function Fg(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!no(e[a],r[a]))return!1;return!0}function Bg(e,r,a,c,d,_){if(dh=_,Er=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Wc.current=e===null||e.memoizedState===null?GE:ZE,e=a(c,d),Xc){_=0;do{if(Xc=!1,!(25>_))throw Error(at(301));_+=1,Gr=ti=null,r.updateQueue=null,Wc.current=qE,e=a(c,d)}while(Xc)}if(Wc.current=Yf,r=ti!==null&&ti.next!==null,dh=0,Gr=ti=Er=null,qf=!1,r)throw Error(at(300));return e}function fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Er.memoizedState=Gr=e:Gr=Gr.next=e,Gr}function El(){if(ti===null){var e=Er.alternate;e=e!==null?e.memoizedState:null}else e=ti.next;var r=Gr===null?Er.memoizedState:Gr.next;if(r!==null)Gr=r,ti=e;else{if(e===null)throw Error(at(310));ti=e,e={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},Gr===null?Er.memoizedState=Gr=e:Gr=Gr.next=e}return Gr}function Wo(e,r){return typeof r=="function"?r(e):r}function Cc(e){var r=El(),a=r.queue;if(a===null)throw Error(at(311));a.lastRenderedReducer=e;var c=ti,d=c.baseQueue,_=a.pending;if(_!==null){if(d!==null){var x=d.next;d.next=_.next,_.next=x}c.baseQueue=d=_,a.pending=null}if(d!==null){d=d.next,c=c.baseState;var l=x=_=null,S=d;do{var A=S.lane;if((dh&A)===A)l!==null&&(l=l.next={lane:0,action:S.action,eagerReducer:S.eagerReducer,eagerState:S.eagerState,next:null}),c=S.eagerReducer===e?S.eagerState:e(c,S.action);else{var z={lane:A,action:S.action,eagerReducer:S.eagerReducer,eagerState:S.eagerState,next:null};l===null?(x=l=z,_=c):l=l.next=z,Er.lanes|=A,vh|=A}S=S.next}while(S!==null&&S!==d);l===null?_=c:l.next=x,no(c,r.memoizedState)||(Io=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=l,a.lastRenderedState=c}return[r.memoizedState,a.dispatch]}function kc(e){var r=El(),a=r.queue;if(a===null)throw Error(at(311));a.lastRenderedReducer=e;var c=a.dispatch,d=a.pending,_=r.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do _=e(_,x.action),x=x.next;while(x!==d);no(_,r.memoizedState)||(Io=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function I0(e,r,a){var c=r._getVersion;c=c(r._source);var d=r._workInProgressVersionPrimary;if(d!==null?e=d===c:(e=e.mutableReadLanes,(e=(dh&e)===e)&&(r._workInProgressVersionPrimary=c,Tu.push(r))),e)return a(r._source);throw Tu.push(r),Error(at(350))}function n1(e,r,a,c){var d=_i;if(d===null)throw Error(at(349));var _=r._getVersion,x=_(r._source),l=Wc.current,S=l.useState(function(){return I0(d,r,a)}),A=S[1],z=S[0];S=Gr;var C=e.memoizedState,P=C.refs,q=P.getSnapshot,te=C.source;C=C.subscribe;var Z=Er;return e.memoizedState={refs:P,source:r,subscribe:c},l.useEffect(function(){P.getSnapshot=a,P.setSnapshot=A;var j=_(r._source);if(!no(x,j)){j=a(r._source),no(z,j)||(A(j),j=ds(Z),d.mutableReadLanes|=j&d.pendingLanes),j=d.mutableReadLanes,d.entangledLanes|=j;for(var N=d.entanglements,$=j;0<$;){var G=31-ys($),J=1<<G;N[G]|=j,$&=~J}}},[a,r,c]),l.useEffect(function(){return c(r._source,function(){var j=P.getSnapshot,N=P.setSnapshot;try{N(j(r._source));var $=ds(Z);d.mutableReadLanes|=$&d.pendingLanes}catch(G){N(function(){throw G})}})},[r,c]),no(q,a)&&no(te,r)&&no(C,c)||(e={pending:null,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:z},e.dispatch=A=Vg.bind(null,Er,e),S.queue=e,S.baseQueue=null,z=I0(d,r,a),S.memoizedState=S.baseState=z),z}function r1(e,r,a){var c=El();return n1(c,e,r,a)}function Ic(e){var r=fl();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e=r.queue={pending:null,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:e},e=e.dispatch=Vg.bind(null,Er,e),[r.memoizedState,e]}function Wf(e,r,a,c){return e={tag:e,create:r,destroy:a,deps:c,next:null},r=Er.updateQueue,r===null?(r={lastEffect:null},Er.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,r.lastEffect=e)),e}function P0(e){var r=fl();return e={current:e},r.memoizedState=e}function Xf(){return El().memoizedState}function Em(e,r,a,c){var d=fl();Er.flags|=e,d.memoizedState=Wf(1|r,a,void 0,c===void 0?null:c)}function Ng(e,r,a,c){var d=El();c=c===void 0?null:c;var _=void 0;if(ti!==null){var x=ti.memoizedState;if(_=x.destroy,c!==null&&Fg(c,x.deps)){Wf(r,a,_,c);return}}Er.flags|=e,d.memoizedState=Wf(1|r,a,_,c)}function M0(e,r){return Em(516,4,e,r)}function Hf(e,r){return Ng(516,4,e,r)}function i1(e,r){return Ng(4,2,e,r)}function o1(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function a1(e,r,a){return a=a!=null?a.concat([e]):null,Ng(4,2,o1.bind(null,r,e),a)}function Ug(){}function s1(e,r){var a=El();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Fg(r,c[1])?c[0]:(a.memoizedState=[e,r],e)}function l1(e,r){var a=El();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Fg(r,c[1])?c[0]:(e=e(),a.memoizedState=[e,r],e)}function jE(e,r){var a=zu();gl(98>a?98:a,function(){e(!0)}),gl(97<a?97:a,function(){var c=oo.transition;oo.transition=1;try{e(!1),r()}finally{oo.transition=c}})}function Vg(e,r,a){var c=Bi(),d=ds(e),_={lane:d,action:a,eagerReducer:null,eagerState:null,next:null},x=r.pending;if(x===null?_.next=_:(_.next=x.next,x.next=_),r.pending=_,x=e.alternate,e===Er||x!==null&&x===Er)Xc=qf=!0;else{if(e.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var l=r.lastRenderedState,S=x(l,a);if(_.eagerReducer=x,_.eagerState=S,no(S,l))return}catch{}finally{}ps(e,d,c)}}var Yf={readContext:ao,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useOpaqueIdentifier:Si,unstable_isNewReconciler:!1},GE={readContext:ao,useCallback:function(e,r){return fl().memoizedState=[e,r===void 0?null:r],e},useContext:ao,useEffect:M0,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Em(4,2,o1.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Em(4,2,e,r)},useMemo:function(e,r){var a=fl();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var c=fl();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,e=c.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},e=e.dispatch=Vg.bind(null,Er,e),[c.memoizedState,e]},useRef:P0,useState:Ic,useDebugValue:Ug,useDeferredValue:function(e){var r=Ic(e),a=r[0],c=r[1];return M0(function(){var d=oo.transition;oo.transition=1;try{c(e)}finally{oo.transition=d}},[e]),a},useTransition:function(){var e=Ic(!1),r=e[0];return e=jE.bind(null,e[1]),P0(e),[e,r]},useMutableSource:function(e,r,a){var c=fl();return c.memoizedState={refs:{getSnapshot:r,setSnapshot:null},source:e,subscribe:a},n1(c,e,r,a)},useOpaqueIdentifier:function(){if(Ko){var e=!1,r=FE(function(){throw e||(e=!0,a("r:"+(Lp++).toString(36))),Error(at(355))}),a=Ic(r)[1];return(Er.mode&2)===0&&(Er.flags|=516,Wf(5,function(){a("r:"+(Lp++).toString(36))},void 0,null)),r}return r="r:"+(Lp++).toString(36),Ic(r),r},unstable_isNewReconciler:!1},ZE={readContext:ao,useCallback:s1,useContext:ao,useEffect:Hf,useImperativeHandle:a1,useLayoutEffect:i1,useMemo:l1,useReducer:Cc,useRef:Xf,useState:function(){return Cc(Wo)},useDebugValue:Ug,useDeferredValue:function(e){var r=Cc(Wo),a=r[0],c=r[1];return Hf(function(){var d=oo.transition;oo.transition=1;try{c(e)}finally{oo.transition=d}},[e]),a},useTransition:function(){var e=Cc(Wo)[0];return[Xf().current,e]},useMutableSource:r1,useOpaqueIdentifier:function(){return Cc(Wo)[0]},unstable_isNewReconciler:!1},qE={readContext:ao,useCallback:s1,useContext:ao,useEffect:Hf,useImperativeHandle:a1,useLayoutEffect:i1,useMemo:l1,useReducer:kc,useRef:Xf,useState:function(){return kc(Wo)},useDebugValue:Ug,useDeferredValue:function(e){var r=kc(Wo),a=r[0],c=r[1];return Hf(function(){var d=oo.transition;oo.transition=1;try{c(e)}finally{oo.transition=d}},[e]),a},useTransition:function(){var e=kc(Wo)[0];return[Xf().current,e]},useMutableSource:r1,useOpaqueIdentifier:function(){return kc(Wo)[0]},unstable_isNewReconciler:!1},WE=wl.ReactCurrentOwner,Io=!1;function Ti(e,r,a,c){r.child=e===null?e1(r,null,a,c):Gf(r,e.child,a,c)}function z0(e,r,a,c,d){a=a.render;var _=r.ref;return Su(r,d),c=Bg(e,r,a,c,_,d),e!==null&&!Io?(r.updateQueue=e.updateQueue,r.flags&=-517,e.lanes&=~d,Ta(e,r,d)):(r.flags|=1,Ti(e,r,c,d),r.child)}function L0(e,r,a,c,d,_){if(e===null){var x=a.type;return typeof x=="function"&&!Wg(x)&&x.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=x,u1(e,r,x,c,d,_)):(e=Tf(a.type,null,c,r,r.mode,_),e.ref=r.ref,e.return=r,r.child=e)}return x=e.child,(d&_)===0&&(d=x.memoizedProps,a=a.compare,a=a!==null?a:sh,a(d,c)&&e.ref===r.ref)?Ta(e,r,_):(r.flags|=1,e=xs(x,c),e.ref=r.ref,e.return=r,r.child=e)}function u1(e,r,a,c,d,_){if(e!==null&&sh(e.memoizedProps,c)&&e.ref===r.ref)if(Io=!1,(_&d)!==0)(e.flags&16384)!==0&&(Io=!0);else return r.lanes=e.lanes,Ta(e,r,_);return Sm(e,r,a,c,_)}function Fp(e,r,a){var c=r.pendingProps,d=c.children,_=e!==null?e.memoizedState:null;if(c.mode==="hidden"||c.mode==="unstable-defer-without-hiding")if((r.mode&4)===0)r.memoizedState={baseLanes:0},cf(r,a);else if((a&1073741824)!==0)r.memoizedState={baseLanes:0},cf(r,_!==null?_.baseLanes:a);else return e=_!==null?_.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e},cf(r,e),null;else _!==null?(c=_.baseLanes|a,r.memoizedState=null):c=a,cf(r,c);return Ti(e,r,d,a),r.child}function c1(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=128)}function Sm(e,r,a,c,d){var _=Ci(a)?ml:ii.current;return _=Mu(r,_),Su(r,d),a=Bg(e,r,a,c,_,d),e!==null&&!Io?(r.updateQueue=e.updateQueue,r.flags&=-517,e.lanes&=~d,Ta(e,r,d)):(r.flags|=1,Ti(e,r,a,d),r.child)}function O0(e,r,a,c,d){if(Ci(a)){var _=!0;xf(r)}else _=!1;if(Su(r,d),r.stateNode===null)e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),Jx(r,a,c),xm(r,a,c,d),c=!0;else if(e===null){var x=r.stateNode,l=r.memoizedProps;x.props=l;var S=x.context,A=a.contextType;typeof A=="object"&&A!==null?A=ao(A):(A=Ci(a)?ml:ii.current,A=Mu(r,A));var z=a.getDerivedStateFromProps,C=typeof z=="function"||typeof x.getSnapshotBeforeUpdate=="function";C||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(l!==c||S!==A)&&T0(r,x,c,A),ns=!1;var P=r.memoizedState;x.state=P,ch(r,c,x,d),S=r.memoizedState,l!==c||P!==S||Ai.current||ns?(typeof z=="function"&&(jf(r,a,z,c),S=r.memoizedState),(l=ns||S0(r,a,l,c,P,S,A))?(C||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4)):(typeof x.componentDidMount=="function"&&(r.flags|=4),r.memoizedProps=c,r.memoizedState=S),x.props=c,x.state=S,x.context=A,c=l):(typeof x.componentDidMount=="function"&&(r.flags|=4),c=!1)}else{x=r.stateNode,Yx(e,r),l=r.memoizedProps,A=r.type===r.elementType?l:ko(r.type,l),x.props=A,C=r.pendingProps,P=x.context,S=a.contextType,typeof S=="object"&&S!==null?S=ao(S):(S=Ci(a)?ml:ii.current,S=Mu(r,S));var q=a.getDerivedStateFromProps;(z=typeof q=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(l!==C||P!==S)&&T0(r,x,c,S),ns=!1,P=r.memoizedState,x.state=P,ch(r,c,x,d);var te=r.memoizedState;l!==C||P!==te||Ai.current||ns?(typeof q=="function"&&(jf(r,a,q,c),te=r.memoizedState),(A=ns||S0(r,a,A,c,P,te,S))?(z||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,te,S),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,te,S)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=256)):(typeof x.componentDidUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(r.flags|=256),r.memoizedProps=c,r.memoizedState=te),x.props=c,x.state=te,x.context=S,c=A):(typeof x.componentDidUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(r.flags|=256),c=!1)}return Tm(e,r,a,c,_,d)}function Tm(e,r,a,c,d,_){c1(e,r);var x=(r.flags&64)!==0;if(!c&&!x)return d&&v0(r,a,!1),Ta(e,r,_);c=r.stateNode,WE.current=r;var l=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,e!==null&&x?(r.child=Gf(r,e.child,null,_),r.child=Gf(r,null,l,_)):Ti(e,r,l,_),r.memoizedState=c.state,d&&v0(r,a,!0),r.child}function R0(e){var r=e.stateNode;r.pendingContext?_0(e,r.pendingContext,r.pendingContext!==r.context):r.context&&_0(e,r.context,!1),wm(e,r.containerInfo)}var uf={dehydrated:null,retryLane:0};function D0(e,r,a){var c=r.pendingProps,d=yr.current,_=!1,x;return(x=(r.flags&64)!==0)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(_=!0,r.flags&=-65):e!==null&&e.memoizedState===null||c.fallback===void 0||c.unstable_avoidThisFallback===!0||(d|=1),_r(yr,d&1),e===null?(c.fallback!==void 0&&bm(r),e=c.children,d=c.fallback,_?(e=F0(r,e,d,a),r.child.memoizedState={baseLanes:a},r.memoizedState=uf,e):typeof c.unstable_expectedLoadTime=="number"?(e=F0(r,e,d,a),r.child.memoizedState={baseLanes:a},r.memoizedState=uf,r.lanes=33554432,e):(a=Xg({mode:"visible",children:e},r.mode,a,null),a.return=r,r.child=a)):e.memoizedState!==null?_?(c=N0(e,r,c.children,c.fallback,a),_=r.child,d=e.child.memoizedState,_.memoizedState=d===null?{baseLanes:a}:{baseLanes:d.baseLanes|a},_.childLanes=e.childLanes&~a,r.memoizedState=uf,c):(a=B0(e,r,c.children,a),r.memoizedState=null,a):_?(c=N0(e,r,c.children,c.fallback,a),_=r.child,d=e.child.memoizedState,_.memoizedState=d===null?{baseLanes:a}:{baseLanes:d.baseLanes|a},_.childLanes=e.childLanes&~a,r.memoizedState=uf,c):(a=B0(e,r,c.children,a),r.memoizedState=null,a)}function F0(e,r,a,c){var d=e.mode,_=e.child;return r={mode:"hidden",children:r},(d&2)===0&&_!==null?(_.childLanes=0,_.pendingProps=r):_=Xg(r,d,0,null),a=ku(a,d,c,null),_.return=e,a.return=e,_.sibling=a,e.child=_,a}function B0(e,r,a,c){var d=e.child;return e=d.sibling,a=xs(d,{mode:"visible",children:a}),(r.mode&2)===0&&(a.lanes=c),a.return=r,a.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,r.firstEffect=r.lastEffect=e),r.child=a}function N0(e,r,a,c,d){var _=r.mode,x=e.child;e=x.sibling;var l={mode:"hidden",children:a};return(_&2)===0&&r.child!==x?(a=r.child,a.childLanes=0,a.pendingProps=l,x=a.lastEffect,x!==null?(r.firstEffect=a.firstEffect,r.lastEffect=x,x.nextEffect=null):r.firstEffect=r.lastEffect=null):a=xs(x,l),e!==null?c=xs(e,c):(c=ku(c,_,d,null),c.flags|=2),c.return=r,a.return=r,a.sibling=c,r.child=a,c}function U0(e,r){e.lanes|=r;var a=e.alternate;a!==null&&(a.lanes|=r),Hx(e.return,r)}function Bp(e,r,a,c,d,_){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d,lastEffect:_}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=a,x.tailMode=d,x.lastEffect=_)}function V0(e,r,a){var c=r.pendingProps,d=c.revealOrder,_=c.tail;if(Ti(e,r,c.children,a),c=yr.current,(c&2)!==0)c=c&1|2,r.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U0(e,a);else if(e.tag===19)U0(e,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(_r(yr,c),(r.mode&2)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)e=a.alternate,e!==null&&Zf(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Bp(r,!1,d,a,_,r.lastEffect);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(e=d.alternate,e!==null&&Zf(e)===null){r.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Bp(r,!0,a,null,_,r.lastEffect);break;case"together":Bp(r,!1,null,null,void 0,r.lastEffect);break;default:r.memoizedState=null}return r.child}function Ta(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),vh|=r.lanes,(a&r.childLanes)!==0){if(e!==null&&r.child!==e.child)throw Error(at(153));if(r.child!==null){for(e=r.child,a=xs(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=xs(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}return null}var h1,Am,f1,d1;h1=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Am=function(){};f1=function(e,r,a,c){var d=e.memoizedProps;if(d!==c){e=r.stateNode,hl(Yo.current);var _=null;switch(a){case"input":d=Qp(e,d),c=Qp(e,c),_=[];break;case"option":d=nm(e,d),c=nm(e,c),_=[];break;case"select":d=sr({},d,{value:void 0}),c=sr({},c,{value:void 0}),_=[];break;case"textarea":d=rm(e,d),c=rm(e,c),_=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Ff)}am(a,c);var x;a=null;for(A in d)if(!c.hasOwnProperty(A)&&d.hasOwnProperty(A)&&d[A]!=null)if(A==="style"){var l=d[A];for(x in l)l.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(eh.hasOwnProperty(A)?_||(_=[]):(_=_||[]).push(A,null));for(A in c){var S=c[A];if(l=d!=null?d[A]:void 0,c.hasOwnProperty(A)&&S!==l&&(S!=null||l!=null))if(A==="style")if(l){for(x in l)!l.hasOwnProperty(x)||S&&S.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in S)S.hasOwnProperty(x)&&l[x]!==S[x]&&(a||(a={}),a[x]=S[x])}else a||(_||(_=[]),_.push(A,a)),a=S;else A==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,l=l?l.__html:void 0,S!=null&&l!==S&&(_=_||[]).push(A,S)):A==="children"?typeof S!="string"&&typeof S!="number"||(_=_||[]).push(A,""+S):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(eh.hasOwnProperty(A)?(S!=null&&A==="onScroll"&&er("scroll",e),_||l===S||(_=[])):typeof S=="object"&&S!==null&&S.$$typeof===pg?S.toString():(_=_||[]).push(A,S))}a&&(_=_||[]).push("style",a);var A=_;(r.updateQueue=A)&&(r.flags|=4)}};d1=function(e,r,a,c){a!==c&&(r.flags|=4)};function Pc(e,r){if(!Ko)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function XE(e,r,a){var c=r.pendingProps;switch(r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ci(r.type)&&Nf(),null;case 3:return Lu(),tr(Ai),tr(ii),Dg(),c=r.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(lf(r)?r.flags|=4:c.hydrate||(r.flags|=256)),Am(r),null;case 5:Rg(r);var d=hl(fh.current);if(a=r.type,e!==null&&r.stateNode!=null)f1(e,r,a,c,d),e.ref!==r.ref&&(r.flags|=128);else{if(!c){if(r.stateNode===null)throw Error(at(166));return null}if(e=hl(Yo.current),lf(r)){c=r.stateNode,a=r.type;var _=r.memoizedProps;switch(c[os]=r,c[Bf]=_,a){case"dialog":er("cancel",c),er("close",c);break;case"iframe":case"object":case"embed":er("load",c);break;case"video":case"audio":for(e=0;e<Rc.length;e++)er(Rc[e],c);break;case"source":er("error",c);break;case"img":case"image":case"link":er("error",c),er("load",c);break;case"details":er("toggle",c);break;case"input":V_(c,_),er("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!_.multiple},er("invalid",c);break;case"textarea":j_(c,_),er("invalid",c)}am(a,_),e=null;for(var x in _)_.hasOwnProperty(x)&&(d=_[x],x==="children"?typeof d=="string"?c.textContent!==d&&(e=["children",d]):typeof d=="number"&&c.textContent!==""+d&&(e=["children",""+d]):eh.hasOwnProperty(x)&&d!=null&&x==="onScroll"&&er("scroll",c));switch(a){case"input":tf(c),$_(c,_,!0);break;case"textarea":tf(c),G_(c);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(c.onclick=Ff)}c=e,r.updateQueue=c,c!==null&&(r.flags|=4)}else{switch(x=d.nodeType===9?d:d.ownerDocument,e===im.html&&(e=ax(a)),e===im.html?a==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=x.createElement(a,{is:c.is}):(e=x.createElement(a),a==="select"&&(x=e,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):e=x.createElementNS(e,a),e[os]=r,e[Bf]=c,h1(e,r,!1,!1),r.stateNode=e,x=sm(a,c),a){case"dialog":er("cancel",e),er("close",e),d=c;break;case"iframe":case"object":case"embed":er("load",e),d=c;break;case"video":case"audio":for(d=0;d<Rc.length;d++)er(Rc[d],e);d=c;break;case"source":er("error",e),d=c;break;case"img":case"image":case"link":er("error",e),er("load",e),d=c;break;case"details":er("toggle",e),d=c;break;case"input":V_(e,c),d=Qp(e,c),er("invalid",e);break;case"option":d=nm(e,c);break;case"select":e._wrapperState={wasMultiple:!!c.multiple},d=sr({},c,{value:void 0}),er("invalid",e);break;case"textarea":j_(e,c),d=rm(e,c),er("invalid",e);break;default:d=c}am(a,d);var l=d;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];_==="style"?ux(e,S):_==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&sx(e,S)):_==="children"?typeof S=="string"?(a!=="textarea"||S!=="")&&th(e,S):typeof S=="number"&&th(e,""+S):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(eh.hasOwnProperty(_)?S!=null&&_==="onScroll"&&er("scroll",e):S!=null&&lg(e,_,S,x))}switch(a){case"input":tf(e),$_(e,c,!1);break;case"textarea":tf(e),G_(e);break;case"option":c.value!=null&&e.setAttribute("value",""+gs(c.value));break;case"select":e.multiple=!!c.multiple,_=c.value,_!=null?xu(e,!!c.multiple,_,!1):c.defaultValue!=null&&xu(e,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Ff)}Ux(a,c)&&(r.flags|=4)}r.ref!==null&&(r.flags|=128)}return null;case 6:if(e&&r.stateNode!=null)d1(e,r,e.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(at(166));a=hl(fh.current),hl(Yo.current),lf(r)?(c=r.stateNode,a=r.memoizedProps,c[os]=r,c.nodeValue!==a&&(r.flags|=4)):(c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[os]=r,r.stateNode=c)}return null;case 13:return tr(yr),c=r.memoizedState,(r.flags&64)!==0?(r.lanes=a,r):(c=c!==null,a=!1,e===null?r.memoizedProps.fallback!==void 0&&lf(r):a=e.memoizedState!==null,c&&!a&&(r.mode&2)!==0&&(e===null&&r.memoizedProps.unstable_avoidThisFallback!==!0||(yr.current&1)!==0?Zr===0&&(Zr=3):((Zr===0||Zr===3)&&(Zr=4),_i===null||(vh&134217727)===0&&(Uu&134217727)===0||Au(_i,ri))),(c||a)&&(r.flags|=4),null);case 4:return Lu(),Am(r),e===null&&Fx(r.stateNode.containerInfo),null;case 10:return Lg(r),null;case 17:return Ci(r.type)&&Nf(),null;case 19:if(tr(yr),c=r.memoizedState,c===null)return null;if(_=(r.flags&64)!==0,x=c.rendering,x===null)if(_)Pc(c,!1);else{if(Zr!==0||e!==null&&(e.flags&64)!==0)for(e=r.child;e!==null;){if(x=Zf(e),x!==null){for(r.flags|=64,Pc(c,!1),_=x.updateQueue,_!==null&&(r.updateQueue=_,r.flags|=4),c.lastEffect===null&&(r.firstEffect=null),r.lastEffect=c.lastEffect,c=a,a=r.child;a!==null;)_=a,e=c,_.flags&=2,_.nextEffect=null,_.firstEffect=null,_.lastEffect=null,x=_.alternate,x===null?(_.childLanes=0,_.lanes=e,_.child=null,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=x.childLanes,_.lanes=x.lanes,_.child=x.child,_.memoizedProps=x.memoizedProps,_.memoizedState=x.memoizedState,_.updateQueue=x.updateQueue,_.type=x.type,e=x.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return _r(yr,yr.current&1|2),r.child}e=e.sibling}c.tail!==null&&ni()>zm&&(r.flags|=64,_=!0,Pc(c,!1),r.lanes=33554432)}else{if(!_)if(e=Zf(x),e!==null){if(r.flags|=64,_=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Pc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!x.alternate&&!Ko)return r=r.lastEffect=c.lastEffect,r!==null&&(r.nextEffect=null),null}else 2*ni()-c.renderingStartTime>zm&&a!==1073741824&&(r.flags|=64,_=!0,Pc(c,!1),r.lanes=33554432);c.isBackwards?(x.sibling=r.child,r.child=x):(a=c.last,a!==null?a.sibling=x:r.child=x,c.last=x)}return c.tail!==null?(a=c.tail,c.rendering=a,c.tail=a.sibling,c.lastEffect=r.lastEffect,c.renderingStartTime=ni(),a.sibling=null,r=yr.current,_r(yr,_?r&1|2:r&1),a):null;case 23:case 24:return qg(),e!==null&&e.memoizedState!==null!=(r.memoizedState!==null)&&c.mode!=="unstable-defer-without-hiding"&&(r.flags|=4),null}throw Error(at(156,r.tag))}function HE(e){switch(e.tag){case 1:Ci(e.type)&&Nf();var r=e.flags;return r&4096?(e.flags=r&-4097|64,e):null;case 3:if(Lu(),tr(Ai),tr(ii),Dg(),r=e.flags,(r&64)!==0)throw Error(at(285));return e.flags=r&-4097|64,e;case 5:return Rg(e),null;case 13:return tr(yr),r=e.flags,r&4096?(e.flags=r&-4097|64,e):null;case 19:return tr(yr),null;case 4:return Lu(),null;case 10:return Lg(e),null;case 23:case 24:return qg(),null;default:return null}}function $g(e,r){try{var a="",c=r;do a+=I2(c),c=c.return;while(c);var d=a}catch(_){d=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:r,stack:d}}function Cm(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var YE=typeof WeakMap=="function"?WeakMap:Map;function p1(e,r,a){a=hs(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){Jf||(Jf=!0,Lm=c),Cm(e,r)},a}function m1(e,r,a){a=hs(-1,a),a.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return Cm(e,r),c(d)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){typeof c!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this),Cm(e,r));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),a}var KE=typeof WeakSet=="function"?WeakSet:Set;function $0(e){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){ms(e,a)}else r.current=null}function JE(e,r){switch(r.tag){case 0:case 11:case 15:case 22:return;case 1:if(r.flags&256&&e!==null){var a=e.memoizedProps,c=e.memoizedState;e=r.stateNode,r=e.getSnapshotBeforeUpdate(r.elementType===r.type?a:ko(r.type,a),c),e.__reactInternalSnapshotBeforeUpdate=r}return;case 3:r.flags&256&&Ig(r.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(at(163))}function QE(e,r,a){switch(a.tag){case 0:case 11:case 15:case 22:if(r=a.updateQueue,r=r!==null?r.lastEffect:null,r!==null){e=r=r.next;do{if((e.tag&3)===3){var c=e.create;e.destroy=c()}e=e.next}while(e!==r)}if(r=a.updateQueue,r=r!==null?r.lastEffect:null,r!==null){e=r=r.next;do{var d=e;c=d.next,d=d.tag,(d&4)!==0&&(d&1)!==0&&(S1(a,e),sS(a,e)),e=c}while(e!==r)}return;case 1:e=a.stateNode,a.flags&4&&(r===null?e.componentDidMount():(c=a.elementType===a.type?r.memoizedProps:ko(a.type,r.memoizedProps),e.componentDidUpdate(c,r.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),r=a.updateQueue,r!==null&&E0(a,r,e);return;case 3:if(r=a.updateQueue,r!==null){if(e=null,a.child!==null)switch(a.child.tag){case 5:e=a.child.stateNode;break;case 1:e=a.child.stateNode}E0(a,r,e)}return;case 5:e=a.stateNode,r===null&&a.flags&4&&Ux(a.type,a.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:a.memoizedState===null&&(a=a.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&vx(a))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(at(163))}function j0(e,r){for(var a=e;;){if(a.tag===5){var c=a.stateNode;if(r)c=c.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{c=a.stateNode;var d=a.memoizedProps.style;d=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=lx("display",d)}}else if(a.tag===6)a.stateNode.nodeValue=r?"":a.memoizedProps;else if((a.tag!==23&&a.tag!==24||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function G0(e,r){if(pl&&typeof pl.onCommitFiberUnmount=="function")try{pl.onCommitFiberUnmount(Pg,r)}catch{}switch(r.tag){case 0:case 11:case 14:case 15:case 22:if(e=r.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var a=e=e.next;do{var c=a,d=c.destroy;if(c=c.tag,d!==void 0)if((c&4)!==0)S1(r,a);else{c=r;try{d()}catch(_){ms(c,_)}}a=a.next}while(a!==e)}break;case 1:if($0(r),e=r.stateNode,typeof e.componentWillUnmount=="function")try{e.props=r.memoizedProps,e.state=r.memoizedState,e.componentWillUnmount()}catch(_){ms(r,_)}break;case 5:$0(r);break;case 4:g1(e,r)}}function Z0(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function q0(e){return e.tag===5||e.tag===3||e.tag===4}function W0(e){e:{for(var r=e.return;r!==null;){if(q0(r))break e;r=r.return}throw Error(at(160))}var a=r;switch(r=a.stateNode,a.tag){case 5:var c=!1;break;case 3:r=r.containerInfo,c=!0;break;case 4:r=r.containerInfo,c=!0;break;default:throw Error(at(161))}a.flags&16&&(th(r,""),a.flags&=-17);e:t:for(a=e;;){for(;a.sibling===null;){if(a.return===null||q0(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2)){a=a.stateNode;break e}}c?km(e,a,r):Im(e,a,r)}function km(e,r,a){var c=e.tag,d=c===5||c===6;if(d)e=d?e.stateNode:e.stateNode.instance,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ff));else if(c!==4&&(e=e.child,e!==null))for(km(e,r,a),e=e.sibling;e!==null;)km(e,r,a),e=e.sibling}function Im(e,r,a){var c=e.tag,d=c===5||c===6;if(d)e=d?e.stateNode:e.stateNode.instance,r?a.insertBefore(e,r):a.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(Im(e,r,a),e=e.sibling;e!==null;)Im(e,r,a),e=e.sibling}function g1(e,r){for(var a=r,c=!1,d,_;;){if(!c){c=a.return;e:for(;;){if(c===null)throw Error(at(160));switch(d=c.stateNode,c.tag){case 5:_=!1;break e;case 3:d=d.containerInfo,_=!0;break e;case 4:d=d.containerInfo,_=!0;break e}c=c.return}c=!0}if(a.tag===5||a.tag===6){e:for(var x=e,l=a,S=l;;)if(G0(x,S),S.child!==null&&S.tag!==4)S.child.return=S,S=S.child;else{if(S===l)break e;for(;S.sibling===null;){if(S.return===null||S.return===l)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}_?(x=d,l=a.stateNode,x.nodeType===8?x.parentNode.removeChild(l):x.removeChild(l)):d.removeChild(a.stateNode)}else if(a.tag===4){if(a.child!==null){d=a.stateNode.containerInfo,_=!0,a.child.return=a,a=a.child;continue}}else if(G0(e,a),a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return,a.tag===4&&(c=!1)}a.sibling.return=a.return,a=a.sibling}}function Np(e,r){switch(r.tag){case 0:case 11:case 14:case 15:case 22:var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do(c.tag&3)===3&&(e=c.destroy,c.destroy=void 0,e!==void 0&&e()),c=c.next;while(c!==a)}return;case 1:return;case 5:if(a=r.stateNode,a!=null){c=r.memoizedProps;var d=e!==null?e.memoizedProps:c;e=r.type;var _=r.updateQueue;if(r.updateQueue=null,_!==null){for(a[Bf]=c,e==="input"&&c.type==="radio"&&c.name!=null&&ix(a,c),sm(e,d),r=sm(e,c),d=0;d<_.length;d+=2){var x=_[d],l=_[d+1];x==="style"?ux(a,l):x==="dangerouslySetInnerHTML"?sx(a,l):x==="children"?th(a,l):lg(a,x,l,r)}switch(e){case"input":em(a,c);break;case"textarea":ox(a,c);break;case"select":e=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!c.multiple,_=c.value,_!=null?xu(a,!!c.multiple,_,!1):e!==!!c.multiple&&(c.defaultValue!=null?xu(a,!!c.multiple,c.defaultValue,!0):xu(a,!!c.multiple,c.multiple?[]:"",!1))}}}return;case 6:if(r.stateNode===null)throw Error(at(162));r.stateNode.nodeValue=r.memoizedProps;return;case 3:a=r.stateNode,a.hydrate&&(a.hydrate=!1,vx(a.containerInfo));return;case 12:return;case 13:r.memoizedState!==null&&(Zg=ni(),j0(r.child,!0)),X0(r);return;case 19:X0(r);return;case 17:return;case 23:case 24:j0(r,r.memoizedState!==null);return}throw Error(at(163))}function X0(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new KE),r.forEach(function(c){var d=cS.bind(null,e,c);a.has(c)||(a.add(c),c.then(d,d))})}}function eS(e,r){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(r=r.memoizedState,r!==null&&r.dehydrated===null):!1}var tS=Math.ceil,Kf=wl.ReactCurrentDispatcher,jg=wl.ReactCurrentOwner,Ht=0,_i=null,Pr=null,ri=0,yl=0,Pm=Es(0),Zr=0,vd=null,Nu=0,vh=0,Uu=0,Gg=0,Mm=null,Zg=0,zm=1/0;function Vu(){zm=ni()+500}var Pt=null,Jf=!1,Lm=null,Xo=null,vs=!1,Hc=null,Dc=90,Om=[],Rm=[],Aa=null,Yc=0,Dm=null,bf=-1,Ea=0,Ef=0,Kc=null,Sf=!1;function Bi(){return(Ht&48)!==0?ni():bf!==-1?bf:bf=ni()}function ds(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return zu()===99?1:2;if(Ea===0&&(Ea=Nu),$E.transition!==0){Ef!==0&&(Ef=Mm!==null?Mm.pendingLanes:0),e=Ea;var r=4186112&~Ef;return r&=-r,r===0&&(e=4186112&~e,r=e&-e,r===0&&(r=8192)),r}return e=zu(),(Ht&4)!==0&&e===98?e=Rf(12,Ea):(e=Z2(e),e=Rf(e,Ea)),e}function ps(e,r,a){if(50<Yc)throw Yc=0,Dm=null,Error(at(185));if(e=xd(e,r),e===null)return null;fd(e,r,a),e===_i&&(Uu|=r,Zr===4&&Au(e,ri));var c=zu();r===1?(Ht&8)!==0&&(Ht&48)===0?Fm(e):(so(e,a),Ht===0&&(Vu(),Jo())):((Ht&4)===0||c!==98&&c!==99||(Aa===null?Aa=new Set([e]):Aa.add(e)),so(e,a)),Mm=e}function xd(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}function so(e,r){for(var a=e.callbackNode,c=e.suspendedLanes,d=e.pingedLanes,_=e.expirationTimes,x=e.pendingLanes;0<x;){var l=31-ys(x),S=1<<l,A=_[l];if(A===-1){if((S&c)===0||(S&d)!==0){A=r,lu(S);var z=Xn;_[l]=10<=z?A+250:6<=z?A+5e3:-1}}else A<=r&&(e.expiredLanes|=S);x&=~S}if(c=oh(e,e===_i?ri:0),r=Xn,c===0)a!==null&&(a!==Op&&_m(a),e.callbackNode=null,e.callbackPriority=0);else{if(a!==null){if(e.callbackPriority===r)return;a!==Op&&_m(a)}r===15?(a=Fm.bind(null,e),ba===null?(ba=[a],wf=Mg(yd,Xx)):ba.push(a),a=Op):r===14?a=uh(99,Fm.bind(null,e)):(a=q2(r),a=uh(a,y1.bind(null,e))),e.callbackPriority=r,e.callbackNode=a}}function y1(e){if(bf=-1,Ef=Ea=0,(Ht&48)!==0)throw Error(at(327));var r=e.callbackNode;if(Ss()&&e.callbackNode!==r)return null;var a=oh(e,e===_i?ri:0);if(a===0)return null;var c=a,d=Ht;Ht|=16;var _=w1();(_i!==e||ri!==c)&&(Vu(),Cu(e,c));do try{iS();break}catch(l){x1(e,l)}while(1);if(zg(),Kf.current=_,Ht=d,Pr!==null?c=0:(_i=null,ri=0,c=Zr),(Nu&Uu)!==0)Cu(e,0);else if(c!==0){if(c===2&&(Ht|=64,e.hydrate&&(e.hydrate=!1,Ig(e.containerInfo)),a=Ax(e),a!==0&&(c=Fc(e,a))),c===1)throw r=vd,Cu(e,0),Au(e,a),so(e,ni()),r;switch(e.finishedWork=e.current.alternate,e.finishedLanes=a,c){case 0:case 1:throw Error(at(345));case 2:sl(e);break;case 3:if(Au(e,a),(a&62914560)===a&&(c=Zg+500-ni(),10<c)){if(oh(e,0)!==0)break;if(d=e.suspendedLanes,(d&a)!==a){Bi(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=m0(sl.bind(null,e),c);break}sl(e);break;case 4:if(Au(e,a),(a&4186112)===a)break;for(c=e.eventTimes,d=-1;0<a;){var x=31-ys(a);_=1<<x,x=c[x],x>d&&(d=x),a&=~_}if(a=d,a=ni()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*tS(a/1960))-a,10<a){e.timeoutHandle=m0(sl.bind(null,e),a);break}sl(e);break;case 5:sl(e);break;default:throw Error(at(329))}}return so(e,ni()),e.callbackNode===r?y1.bind(null,e):null}function Au(e,r){for(r&=~Gg,r&=~Uu,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-ys(r),c=1<<a;e[a]=-1,r&=~c}}function Fm(e){if((Ht&48)!==0)throw Error(at(327));if(Ss(),e===_i&&(e.expiredLanes&ri)!==0){var r=ri,a=Fc(e,r);(Nu&Uu)!==0&&(r=oh(e,r),a=Fc(e,r))}else r=oh(e,0),a=Fc(e,r);if(e.tag!==0&&a===2&&(Ht|=64,e.hydrate&&(e.hydrate=!1,Ig(e.containerInfo)),r=Ax(e),r!==0&&(a=Fc(e,r))),a===1)throw a=vd,Cu(e,0),Au(e,r),so(e,ni()),a;return e.finishedWork=e.current.alternate,e.finishedLanes=r,sl(e),so(e,ni()),null}function nS(){if(Aa!==null){var e=Aa;Aa=null,e.forEach(function(r){r.expiredLanes|=24&r.pendingLanes,so(r,ni())})}Jo()}function _1(e,r){var a=Ht;Ht|=1;try{return e(r)}finally{Ht=a,Ht===0&&(Vu(),Jo())}}function v1(e,r){var a=Ht;Ht&=-2,Ht|=8;try{return e(r)}finally{Ht=a,Ht===0&&(Vu(),Jo())}}function cf(e,r){_r(Pm,yl),yl|=r,Nu|=r}function qg(){yl=Pm.current,tr(Pm)}function Cu(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,DE(a)),Pr!==null)for(a=Pr.return;a!==null;){var c=a;switch(c.tag){case 1:c=c.type.childContextTypes,c!=null&&Nf();break;case 3:Lu(),tr(Ai),tr(ii),Dg();break;case 5:Rg(c);break;case 4:Lu();break;case 13:tr(yr);break;case 19:tr(yr);break;case 10:Lg(c);break;case 23:case 24:qg()}a=a.return}_i=e,Pr=xs(e.current,null),ri=yl=Nu=r,Zr=0,vd=null,Gg=Uu=vh=0}function x1(e,r){do{var a=Pr;try{if(zg(),Wc.current=Yf,qf){for(var c=Er.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}qf=!1}if(dh=0,Gr=ti=Er=null,Xc=!1,jg.current=null,a===null||a.return===null){Zr=1,vd=r,Pr=null;break}e:{var _=e,x=a.return,l=a,S=r;if(r=ri,l.flags|=2048,l.firstEffect=l.lastEffect=null,S!==null&&typeof S=="object"&&typeof S.then=="function"){var A=S;if((l.mode&2)===0){var z=l.alternate;z?(l.updateQueue=z.updateQueue,l.memoizedState=z.memoizedState,l.lanes=z.lanes):(l.updateQueue=null,l.memoizedState=null)}var C=(yr.current&1)!==0,P=x;do{var q;if(q=P.tag===13){var te=P.memoizedState;if(te!==null)q=te.dehydrated!==null;else{var Z=P.memoizedProps;q=Z.fallback===void 0?!1:Z.unstable_avoidThisFallback!==!0?!0:!C}}if(q){var j=P.updateQueue;if(j===null){var N=new Set;N.add(A),P.updateQueue=N}else j.add(A);if((P.mode&2)===0){if(P.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var $=hs(-1,1);$.tag=2,fs(l,$)}l.lanes|=1;break e}S=void 0,l=r;var G=_.pingCache;if(G===null?(G=_.pingCache=new YE,S=new Set,G.set(A,S)):(S=G.get(A),S===void 0&&(S=new Set,G.set(A,S))),!S.has(l)){S.add(l);var J=uS.bind(null,_,A,l);A.then(J,J)}P.flags|=4096,P.lanes=r;break e}P=P.return}while(P!==null);S=Error((vu(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Zr!==5&&(Zr=2),S=$g(S,l),P=x;do{switch(P.tag){case 3:_=S,P.flags|=4096,r&=-r,P.lanes|=r;var me=p1(P,_,r);b0(P,me);break e;case 1:_=S;var H=P.type,se=P.stateNode;if((P.flags&64)===0&&(typeof H.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Xo===null||!Xo.has(se)))){P.flags|=4096,r&=-r,P.lanes|=r;var ne=m1(P,_,r);b0(P,ne);break e}}P=P.return}while(P!==null)}E1(a)}catch(Te){r=Te,Pr===a&&a!==null&&(Pr=a=a.return);continue}break}while(1)}function w1(){var e=Kf.current;return Kf.current=Yf,e===null?Yf:e}function Fc(e,r){var a=Ht;Ht|=16;var c=w1();_i===e&&ri===r||Cu(e,r);do try{rS();break}catch(d){x1(e,d)}while(1);if(zg(),Ht=a,Kf.current=c,Pr!==null)throw Error(at(261));return _i=null,ri=0,Zr}function rS(){for(;Pr!==null;)b1(Pr)}function iS(){for(;Pr!==null&&!NE();)b1(Pr)}function b1(e){var r=T1(e.alternate,e,yl);e.memoizedProps=e.pendingProps,r===null?E1(e):Pr=r,jg.current=null}function E1(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&2048)===0){if(a=XE(a,r,yl),a!==null){Pr=a;return}if(a=r,a.tag!==24&&a.tag!==23||a.memoizedState===null||(yl&1073741824)!==0||(a.mode&4)===0){for(var c=0,d=a.child;d!==null;)c|=d.lanes|d.childLanes,d=d.sibling;a.childLanes=c}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=r.firstEffect),r.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=r.firstEffect),e.lastEffect=r.lastEffect),1<r.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=r:e.firstEffect=r,e.lastEffect=r))}else{if(a=HE(r),a!==null){a.flags&=2047,Pr=a;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(r=r.sibling,r!==null){Pr=r;return}Pr=r=e}while(r!==null);Zr===0&&(Zr=5)}function sl(e){var r=zu();return gl(99,oS.bind(null,e,r)),null}function oS(e,r){do Ss();while(Hc!==null);if((Ht&48)!==0)throw Error(at(327));var a=e.finishedWork;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(at(177));e.callbackNode=null;var c=a.lanes|a.childLanes,d=c,_=e.pendingLanes&~d;e.pendingLanes=d,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=d,e.mutableReadLanes&=d,e.entangledLanes&=d,d=e.entanglements;for(var x=e.eventTimes,l=e.expirationTimes;0<_;){var S=31-ys(_),A=1<<S;d[S]=0,x[S]=-1,l[S]=-1,_&=~A}if(Aa!==null&&(c&24)===0&&Aa.has(e)&&Aa.delete(e),e===_i&&(Pr=_i=null,ri=0),1<a.flags?a.lastEffect!==null?(a.lastEffect.nextEffect=a,c=a.firstEffect):c=a:c=a.firstEffect,c!==null){if(d=Ht,Ht|=32,jg.current=null,Mp=yf,x=l0(),dm(x)){if("selectionStart"in x)l={start:x.selectionStart,end:x.selectionEnd};else e:if(l=(l=x.ownerDocument)&&l.defaultView||window,(A=l.getSelection&&l.getSelection())&&A.rangeCount!==0){l=A.anchorNode,_=A.anchorOffset,S=A.focusNode,A=A.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var z=0,C=-1,P=-1,q=0,te=0,Z=x,j=null;t:for(;;){for(var N;Z!==l||_!==0&&Z.nodeType!==3||(C=z+_),Z!==S||A!==0&&Z.nodeType!==3||(P=z+A),Z.nodeType===3&&(z+=Z.nodeValue.length),(N=Z.firstChild)!==null;)j=Z,Z=N;for(;;){if(Z===x)break t;if(j===l&&++q===_&&(C=z),j===S&&++te===A&&(P=z),(N=Z.nextSibling)!==null)break;Z=j,j=Z.parentNode}Z=N}l=C===-1||P===-1?null:{start:C,end:P}}else l=null;l=l||{start:0,end:0}}else l=null;zp={focusedElem:x,selectionRange:l},yf=!1,Kc=null,Sf=!1,Pt=c;do try{aS()}catch(Te){if(Pt===null)throw Error(at(330));ms(Pt,Te),Pt=Pt.nextEffect}while(Pt!==null);Kc=null,Pt=c;do try{for(x=e;Pt!==null;){var $=Pt.flags;if($&16&&th(Pt.stateNode,""),$&128){var G=Pt.alternate;if(G!==null){var J=G.ref;J!==null&&(typeof J=="function"?J(null):J.current=null)}}switch($&1038){case 2:W0(Pt),Pt.flags&=-3;break;case 6:W0(Pt),Pt.flags&=-3,Np(Pt.alternate,Pt);break;case 1024:Pt.flags&=-1025;break;case 1028:Pt.flags&=-1025,Np(Pt.alternate,Pt);break;case 4:Np(Pt.alternate,Pt);break;case 8:l=Pt,g1(x,l);var me=l.alternate;Z0(l),me!==null&&Z0(me)}Pt=Pt.nextEffect}}catch(Te){if(Pt===null)throw Error(at(330));ms(Pt,Te),Pt=Pt.nextEffect}while(Pt!==null);if(J=zp,G=l0(),$=J.focusedElem,x=J.selectionRange,G!==$&&$&&$.ownerDocument&&Ox($.ownerDocument.documentElement,$)){for(x!==null&&dm($)&&(G=x.start,J=x.end,J===void 0&&(J=G),"selectionStart"in $?($.selectionStart=G,$.selectionEnd=Math.min(J,$.value.length)):(J=(G=$.ownerDocument||document)&&G.defaultView||window,J.getSelection&&(J=J.getSelection(),l=$.textContent.length,me=Math.min(x.start,l),x=x.end===void 0?me:Math.min(x.end,l),!J.extend&&me>x&&(l=x,x=me,me=l),l=s0($,me),_=s0($,x),l&&_&&(J.rangeCount!==1||J.anchorNode!==l.node||J.anchorOffset!==l.offset||J.focusNode!==_.node||J.focusOffset!==_.offset)&&(G=G.createRange(),G.setStart(l.node,l.offset),J.removeAllRanges(),me>x?(J.addRange(G),J.extend(_.node,_.offset)):(G.setEnd(_.node,_.offset),J.addRange(G)))))),G=[],J=$;J=J.parentNode;)J.nodeType===1&&G.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<G.length;$++)J=G[$],J.element.scrollLeft=J.left,J.element.scrollTop=J.top}yf=!!Mp,zp=Mp=null,e.current=a,Pt=c;do try{for($=e;Pt!==null;){var H=Pt.flags;if(H&36&&QE($,Pt.alternate,Pt),H&128){G=void 0;var se=Pt.ref;if(se!==null){var ne=Pt.stateNode;switch(Pt.tag){case 5:G=ne;break;default:G=ne}typeof se=="function"?se(G):se.current=G}}Pt=Pt.nextEffect}}catch(Te){if(Pt===null)throw Error(at(330));ms(Pt,Te),Pt=Pt.nextEffect}while(Pt!==null);Pt=null,VE(),Ht=d}else e.current=a;if(vs)vs=!1,Hc=e,Dc=r;else for(Pt=c;Pt!==null;)r=Pt.nextEffect,Pt.nextEffect=null,Pt.flags&8&&(H=Pt,H.sibling=null,H.stateNode=null),Pt=r;if(c=e.pendingLanes,c===0&&(Xo=null),c===1?e===Dm?Yc++:(Yc=0,Dm=e):Yc=0,a=a.stateNode,pl&&typeof pl.onCommitFiberRoot=="function")try{pl.onCommitFiberRoot(Pg,a,void 0,(a.current.flags&64)===64)}catch{}if(so(e,ni()),Jf)throw Jf=!1,e=Lm,Lm=null,e;return(Ht&8)!==0||Jo(),null}function aS(){for(;Pt!==null;){var e=Pt.alternate;Sf||Kc===null||((Pt.flags&8)!==0?W_(Pt,Kc)&&(Sf=!0):Pt.tag===13&&eS(e,Pt)&&W_(Pt,Kc)&&(Sf=!0));var r=Pt.flags;(r&256)!==0&&JE(e,Pt),(r&512)===0||vs||(vs=!0,uh(97,function(){return Ss(),null})),Pt=Pt.nextEffect}}function Ss(){if(Dc!==90){var e=97<Dc?97:Dc;return Dc=90,gl(e,lS)}return!1}function sS(e,r){Om.push(r,e),vs||(vs=!0,uh(97,function(){return Ss(),null}))}function S1(e,r){Rm.push(r,e),vs||(vs=!0,uh(97,function(){return Ss(),null}))}function lS(){if(Hc===null)return!1;var e=Hc;if(Hc=null,(Ht&48)!==0)throw Error(at(331));var r=Ht;Ht|=32;var a=Rm;Rm=[];for(var c=0;c<a.length;c+=2){var d=a[c],_=a[c+1],x=d.destroy;if(d.destroy=void 0,typeof x=="function")try{x()}catch(S){if(_===null)throw Error(at(330));ms(_,S)}}for(a=Om,Om=[],c=0;c<a.length;c+=2){d=a[c],_=a[c+1];try{var l=d.create;d.destroy=l()}catch(S){if(_===null)throw Error(at(330));ms(_,S)}}for(l=e.current.firstEffect;l!==null;)e=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=e;return Ht=r,Jo(),!0}function H0(e,r,a){r=$g(a,r),r=p1(e,r,1),fs(e,r),r=Bi(),e=xd(e,1),e!==null&&(fd(e,1,r),so(e,r))}function ms(e,r){if(e.tag===3)H0(e,e,r);else for(var a=e.return;a!==null;){if(a.tag===3){H0(a,e,r);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xo===null||!Xo.has(c))){e=$g(r,e);var d=m1(a,e,1);if(fs(a,d),d=Bi(),a=xd(a,1),a!==null)fd(a,1,d),so(a,d);else if(typeof c.componentDidCatch=="function"&&(Xo===null||!Xo.has(c)))try{c.componentDidCatch(r,e)}catch{}break}}a=a.return}}function uS(e,r,a){var c=e.pingCache;c!==null&&c.delete(r),r=Bi(),e.pingedLanes|=e.suspendedLanes&a,_i===e&&(ri&a)===a&&(Zr===4||Zr===3&&(ri&62914560)===ri&&500>ni()-Zg?Cu(e,0):Gg|=a),so(e,r)}function cS(e,r){var a=e.stateNode;a!==null&&a.delete(r),r=0,r===0&&(r=e.mode,(r&2)===0?r=1:(r&4)===0?r=zu()===99?1:2:(Ea===0&&(Ea=Nu),r=uu(62914560&~Ea),r===0&&(r=4194304))),a=Bi(),e=xd(e,r),e!==null&&(fd(e,r,a),so(e,a))}var T1;T1=function(e,r,a){var c=r.lanes;if(e!==null)if(e.memoizedProps!==r.pendingProps||Ai.current)Io=!0;else if((a&c)!==0)Io=(e.flags&16384)!==0;else{switch(Io=!1,r.tag){case 3:R0(r),Dp();break;case 5:A0(r);break;case 1:Ci(r.type)&&xf(r);break;case 4:wm(r,r.stateNode.containerInfo);break;case 10:c=r.memoizedProps.value;var d=r.type._context;_r(Uf,d._currentValue),d._currentValue=c;break;case 13:if(r.memoizedState!==null)return(a&r.child.childLanes)!==0?D0(e,r,a):(_r(yr,yr.current&1),r=Ta(e,r,a),r!==null?r.sibling:null);_r(yr,yr.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(e.flags&64)!==0){if(c)return V0(e,r,a);r.flags|=64}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),_r(yr,yr.current),c)break;return null;case 23:case 24:return r.lanes=0,Fp(e,r,a)}return Ta(e,r,a)}else Io=!1;switch(r.lanes=0,r.tag){case 2:if(c=r.type,e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),e=r.pendingProps,d=Mu(r,ii.current),Su(r,a),d=Bg(null,r,c,e,d,a),r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0){if(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ci(c)){var _=!0;xf(r)}else _=!1;r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Og(r);var x=c.getDerivedStateFromProps;typeof x=="function"&&jf(r,c,x,e),d.updater=_d,r.stateNode=d,d._reactInternals=r,xm(r,c,e,a),r=Tm(null,r,c,!0,_,a)}else r.tag=0,Ti(null,r,d,a),r=r.child;return r;case 16:d=r.elementType;e:{switch(e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),e=r.pendingProps,_=d._init,d=_(d._payload),r.type=d,_=r.tag=fS(d),e=ko(d,e),_){case 0:r=Sm(null,r,d,e,a);break e;case 1:r=O0(null,r,d,e,a);break e;case 11:r=z0(null,r,d,e,a);break e;case 14:r=L0(null,r,d,ko(d.type,e),c,a);break e}throw Error(at(306,d,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:ko(c,d),Sm(e,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:ko(c,d),O0(e,r,c,d,a);case 3:if(R0(r),c=r.updateQueue,e===null||c===null)throw Error(at(282));if(c=r.pendingProps,d=r.memoizedState,d=d!==null?d.element:null,Yx(e,r),ch(r,c,null,a),c=r.memoizedState.element,c===d)Dp(),r=Ta(e,r,a);else{if(d=r.stateNode,(_=d.hydrate)&&(as=Eu(r.stateNode.containerInfo.firstChild),Sa=r,_=Ko=!0),_){if(e=d.mutableSourceEagerHydrationData,e!=null)for(d=0;d<e.length;d+=2)_=e[d],_._workInProgressVersionPrimary=e[d+1],Tu.push(_);for(a=e1(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|1024,a=a.sibling}else Ti(e,r,c,a),Dp();r=r.child}return r;case 5:return A0(r),e===null&&bm(r),c=r.type,d=r.pendingProps,_=e!==null?e.memoizedProps:null,x=d.children,gm(c,d)?x=null:_!==null&&gm(c,_)&&(r.flags|=16),c1(e,r),Ti(e,r,x,a),r.child;case 6:return e===null&&bm(r),null;case 13:return D0(e,r,a);case 4:return wm(r,r.stateNode.containerInfo),c=r.pendingProps,e===null?r.child=Gf(r,null,c,a):Ti(e,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:ko(c,d),z0(e,r,c,d,a);case 7:return Ti(e,r,r.pendingProps,a),r.child;case 8:return Ti(e,r,r.pendingProps.children,a),r.child;case 12:return Ti(e,r,r.pendingProps.children,a),r.child;case 10:e:{c=r.type._context,d=r.pendingProps,x=r.memoizedProps,_=d.value;var l=r.type._context;if(_r(Uf,l._currentValue),l._currentValue=_,x!==null)if(l=x.value,_=no(l,_)?0:(typeof c._calculateChangedBits=="function"?c._calculateChangedBits(l,_):1073741823)|0,_===0){if(x.children===d.children&&!Ai.current){r=Ta(e,r,a);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var S=l.dependencies;if(S!==null){x=l.child;for(var A=S.firstContext;A!==null;){if(A.context===c&&(A.observedBits&_)!==0){l.tag===1&&(A=hs(-1,a&-a),A.tag=2,fs(l,A)),l.lanes|=a,A=l.alternate,A!==null&&(A.lanes|=a),Hx(l.return,a),S.lanes|=a;break}A=A.next}}else x=l.tag===10&&l.type===r.type?null:l.child;if(x!==null)x.return=l;else for(x=l;x!==null;){if(x===r){x=null;break}if(l=x.sibling,l!==null){l.return=x.return,x=l;break}x=x.return}l=x}Ti(e,r,d.children,a),r=r.child}return r;case 9:return d=r.type,_=r.pendingProps,c=_.children,Su(r,a),d=ao(d,_.unstable_observedBits),c=c(d),r.flags|=1,Ti(e,r,c,a),r.child;case 14:return d=r.type,_=ko(d,r.pendingProps),_=ko(d.type,_),L0(e,r,d,_,c,a);case 15:return u1(e,r,r.type,r.pendingProps,c,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:ko(c,d),e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),r.tag=1,Ci(c)?(e=!0,xf(r)):e=!1,Su(r,a),Jx(r,c,d),xm(r,c,d,a),Tm(null,r,c,!0,e,a);case 19:return V0(e,r,a);case 23:return Fp(e,r,a);case 24:return Fp(e,r,a)}throw Error(at(156,r.tag))};function hS(e,r,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ro(e,r,a,c){return new hS(e,r,a,c)}function Wg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fS(e){if(typeof e=="function")return Wg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ud)return 11;if(e===cd)return 14}return 2}function xs(e,r){var a=e.alternate;return a===null?(a=ro(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Tf(e,r,a,c,d,_){var x=2;if(c=e,typeof e=="function")Wg(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case rs:return ku(a.children,d,_,r);case tx:x=8,d|=16;break;case ug:x=8,d|=1;break;case Uc:return e=ro(12,a,r,d|8),e.elementType=Uc,e.type=Uc,e.lanes=_,e;case Vc:return e=ro(13,a,r,d),e.type=Vc,e.elementType=Vc,e.lanes=_,e;case Mf:return e=ro(19,a,r,d),e.elementType=Mf,e.lanes=_,e;case mg:return Xg(a,d,_,r);case Jp:return e=ro(24,a,r,d),e.elementType=Jp,e.lanes=_,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cg:x=10;break e;case hg:x=9;break e;case ud:x=11;break e;case cd:x=14;break e;case fg:x=16,c=null;break e;case dg:x=22;break e}throw Error(at(130,e==null?e:typeof e,""))}return r=ro(x,a,r,d),r.elementType=e,r.type=c,r.lanes=_,r}function ku(e,r,a,c){return e=ro(7,e,c,r),e.lanes=a,e}function Xg(e,r,a,c){return e=ro(23,e,c,r),e.elementType=mg,e.lanes=a,e}function Up(e,r,a){return e=ro(6,e,null,r),e.lanes=a,e}function Vp(e,r,a){return r=ro(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function dS(e,r,a){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Sp(0),this.expirationTimes=Sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sp(0),this.mutableSourceEagerHydrationData=null}function pS(e,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:c==null?null:""+c,children:e,containerInfo:r,implementation:a}}function Qf(e,r,a,c){var d=r.current,_=Bi(),x=ds(d);e:if(a){a=a._reactInternals;t:{if(bl(a)!==a||a.tag!==1)throw Error(at(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Ci(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(at(171))}if(a.tag===1){var S=a.type;if(Ci(S)){a=$x(a,S,l);break e}}a=l}else a=_s;return r.context===null?r.context=a:r.pendingContext=a,r=hs(_,x),r.payload={element:e},c=c===void 0?null:c,c!==null&&(r.callback=c),fs(d,r),ps(d,x,_),x}function $p(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y0(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Hg(e,r){Y0(e,r),(e=e.alternate)&&Y0(e,r)}function mS(){return null}function Yg(e,r,a){var c=a!=null&&a.hydrationOptions!=null&&a.hydrationOptions.mutableSources||null;if(a=new dS(e,r,a!=null&&a.hydrate===!0),r=ro(3,null,null,r===2?7:r===1?3:0),a.current=r,r.stateNode=a,Og(r),e[Bu]=a.current,Fx(e.nodeType===8?e.parentNode:e),c)for(e=0;e<c.length;e++){r=c[e];var d=r._getVersion;d=d(r._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[r,d]:a.mutableSourceEagerHydrationData.push(r,d)}this._internalRoot=a}Yg.prototype.render=function(e){Qf(e,this._internalRoot,null,null)};Yg.prototype.unmount=function(){var e=this._internalRoot,r=e.containerInfo;Qf(null,e,null,function(){r[Bu]=null})};function xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gS(e,r){if(r||(r=e?e.nodeType===9?e.documentElement:e.firstChild:null,r=!(!r||r.nodeType!==1||!r.hasAttribute("data-reactroot"))),!r)for(var a;a=e.lastChild;)e.removeChild(a);return new Yg(e,0,r?{hydrate:!0}:void 0)}function wd(e,r,a,c,d){var _=a._reactRootContainer;if(_){var x=_._internalRoot;if(typeof d=="function"){var l=d;d=function(){var A=$p(x);l.call(A)}}Qf(r,x,e,d)}else{if(_=a._reactRootContainer=gS(a,c),x=_._internalRoot,typeof d=="function"){var S=d;d=function(){var A=$p(x);S.call(A)}}v1(function(){Qf(r,x,e,d)})}return $p(x)}gx=function(e){if(e.tag===13){var r=Bi();ps(e,4,r),Hg(e,4)}};xg=function(e){if(e.tag===13){var r=Bi();ps(e,67108864,r),Hg(e,67108864)}};yx=function(e){if(e.tag===13){var r=Bi(),a=ds(e);ps(e,a,r),Hg(e,a)}};_x=function(e,r){return r()};lm=function(e,r,a){switch(r){case"input":if(em(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==e&&c.form===e.form){var d=gd(c);if(!d)throw Error(at(90));rx(c),em(c,d)}}}break;case"textarea":ox(e,a);break;case"select":r=a.value,r!=null&&xu(e,!!a.multiple,r,!1)}};yg=_1;fx=function(e,r,a,c,d){var _=Ht;Ht|=4;try{return gl(98,e.bind(null,r,a,c,d))}finally{Ht=_,Ht===0&&(Vu(),Jo())}};_g=function(){(Ht&49)===0&&(nS(),Ss())};dx=function(e,r){var a=Ht;Ht|=2;try{return e(r)}finally{Ht=a,Ht===0&&(Vu(),Jo())}};function A1(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(r))throw Error(at(200));return pS(e,r,null,a)}var yS={Events:[yh,du,gd,cx,hx,Ss,{current:!1}]},Mc={findFiberByHostInstance:cl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},_S={bundleType:Mc.bundleType,version:Mc.version,rendererPackageName:Mc.rendererPackageName,rendererConfig:Mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mx(e),e===null?null:e.stateNode},findFiberByHostInstance:Mc.findFiberByHostInstance||mS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{Pg=hf.inject(_S),pl=hf}catch{}}lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS;lo.createPortal=A1;lo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(at(188)):Error(at(268,Object.keys(e)));return e=mx(r),e=e===null?null:e.stateNode,e};lo.flushSync=function(e,r){var a=Ht;if((a&48)!==0)return e(r);Ht|=1;try{if(e)return gl(99,e.bind(null,r))}finally{Ht=a,Jo()}};lo.hydrate=function(e,r,a){if(!xh(r))throw Error(at(200));return wd(null,e,r,!0,a)};lo.render=function(e,r,a){if(!xh(r))throw Error(at(200));return wd(null,e,r,!1,a)};lo.unmountComponentAtNode=function(e){if(!xh(e))throw Error(at(40));return e._reactRootContainer?(v1(function(){wd(null,null,e,!1,function(){e._reactRootContainer=null,e[Bu]=null})}),!0):!1};lo.unstable_batchedUpdates=_1;lo.unstable_createPortal=function(e,r){return A1(e,r,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};lo.unstable_renderSubtreeIntoContainer=function(e,r,a,c){if(!xh(a))throw Error(at(200));if(e==null||e._reactInternals===void 0)throw Error(at(38));return wd(e,r,a,!1,c)};lo.version="17.0.2";function C1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C1)}catch(e){console.error(e)}}C1(),sd.exports=lo;var bC=sd.exports;/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function K0(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);r&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,c)}return a}function kt(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?K0(Object(a),!0).forEach(function(c){wS(e,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K0(Object(a)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(a,c))})}return e}function ed(e){return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ed(e)}function vS(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function J0(e,r){for(var a=0;a<r.length;a++){var c=r[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function xS(e,r,a){return r&&J0(e.prototype,r),a&&J0(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function wS(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Kg(e,r){return ES(e)||TS(e,r)||k1(e,r)||CS()}function bd(e){return bS(e)||SS(e)||k1(e)||AS()}function bS(e){if(Array.isArray(e))return Bm(e)}function ES(e){if(Array.isArray(e))return e}function SS(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TS(e,r){var a=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var c=[],d=!0,_=!1,x,l;try{for(a=a.call(e);!(d=(x=a.next()).done)&&(c.push(x.value),!(r&&c.length===r));d=!0);}catch(S){_=!0,l=S}finally{try{!d&&a.return!=null&&a.return()}finally{if(_)throw l}}return c}}function k1(e,r){if(!!e){if(typeof e=="string")return Bm(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Bm(e,r)}}function Bm(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,c=new Array(r);a<r;a++)c[a]=e[a];return c}function AS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q0=function(){},Jg={},I1={},P1=null,M1={mark:Q0,measure:Q0};try{typeof window!="undefined"&&(Jg=window),typeof document!="undefined"&&(I1=document),typeof MutationObserver!="undefined"&&(P1=MutationObserver),typeof performance!="undefined"&&(M1=performance)}catch{}var kS=Jg.navigator||{},ev=kS.userAgent,tv=ev===void 0?"":ev,ws=Jg,nr=I1,nv=P1,ff=M1;ws.document;var za=!!nr.documentElement&&!!nr.head&&typeof nr.addEventListener=="function"&&typeof nr.createElement=="function",z1=~tv.indexOf("MSIE")||~tv.indexOf("Trident/"),ka="___FONT_AWESOME___",Nm=16,L1="fa",O1="svg-inline--fa",_l="data-fa-i2svg",Um="data-fa-pseudo-element",IS="data-fa-pseudo-element-pending",Qg="data-prefix",ey="data-icon",rv="fontawesome-i2svg",PS="async",MS=["HTML","HEAD","STYLE","SCRIPT"],R1=function(){try{return!0}catch{return!1}}(),ty={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},td={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},D1={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},zS={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},LS=/fa[srltdbk\-\ ]/,F1="fa-layers-text",OS=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,RS={"900":"fas","400":"far",normal:"far","300":"fal","100":"fat"},B1=[1,2,3,4,5,6,7,8,9,10],DS=B1.concat([11,12,13,14,15,16,17,18,19,20]),FS=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],dl={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},BS=[].concat(bd(Object.keys(td)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",dl.GROUP,dl.SWAP_OPACITY,dl.PRIMARY,dl.SECONDARY]).concat(B1.map(function(e){return"".concat(e,"x")})).concat(DS.map(function(e){return"w-".concat(e)})),N1=ws.FontAwesomeConfig||{};function NS(e){var r=nr.querySelector("script["+e+"]");if(r)return r.getAttribute(e)}function US(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(nr&&typeof nr.querySelector=="function"){var VS=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];VS.forEach(function(e){var r=Kg(e,2),a=r[0],c=r[1],d=US(NS(a));d!=null&&(N1[c]=d)})}var $S={familyPrefix:L1,styleDefault:"solid",replacementClass:O1,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Jc=kt(kt({},$S),N1);Jc.autoReplaceSvg||(Jc.observeMutations=!1);var Vt={};Object.keys(Jc).forEach(function(e){Object.defineProperty(Vt,e,{enumerable:!0,set:function(a){Jc[e]=a,Af.forEach(function(c){return c(Vt)})},get:function(){return Jc[e]}})});ws.FontAwesomeConfig=Vt;var Af=[];function jS(e){return Af.push(e),function(){Af.splice(Af.indexOf(e),1)}}var ts=Nm,Ho={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function GS(e){if(!(!e||!za)){var r=nr.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=e;for(var a=nr.head.childNodes,c=null,d=a.length-1;d>-1;d--){var _=a[d],x=(_.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(x)>-1&&(c=_)}return nr.head.insertBefore(r,c),e}}var ZS="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ph(){for(var e=12,r="";e-- >0;)r+=ZS[Math.random()*62|0];return r}function $u(e){for(var r=[],a=(e||[]).length>>>0;a--;)r[a]=e[a];return r}function ny(e){return e.classList?$u(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(r){return r})}function U1(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qS(e){return Object.keys(e||{}).reduce(function(r,a){return r+"".concat(a,'="').concat(U1(e[a]),'" ')},"").trim()}function Ed(e){return Object.keys(e||{}).reduce(function(r,a){return r+"".concat(a,": ").concat(e[a].trim(),";")},"")}function ry(e){return e.size!==Ho.size||e.x!==Ho.x||e.y!==Ho.y||e.rotate!==Ho.rotate||e.flipX||e.flipY}function WS(e){var r=e.transform,a=e.containerWidth,c=e.iconWidth,d={transform:"translate(".concat(a/2," 256)")},_="translate(".concat(r.x*32,", ").concat(r.y*32,") "),x="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),l="rotate(".concat(r.rotate," 0 0)"),S={transform:"".concat(_," ").concat(x," ").concat(l)},A={transform:"translate(".concat(c/2*-1," -256)")};return{outer:d,inner:S,path:A}}function XS(e){var r=e.transform,a=e.width,c=a===void 0?Nm:a,d=e.height,_=d===void 0?Nm:d,x=e.startCentered,l=x===void 0?!1:x,S="";return l&&z1?S+="translate(".concat(r.x/ts-c/2,"em, ").concat(r.y/ts-_/2,"em) "):l?S+="translate(calc(-50% + ".concat(r.x/ts,"em), calc(-50% + ").concat(r.y/ts,"em)) "):S+="translate(".concat(r.x/ts,"em, ").concat(r.y/ts,"em) "),S+="scale(".concat(r.size/ts*(r.flipX?-1:1),", ").concat(r.size/ts*(r.flipY?-1:1),") "),S+="rotate(".concat(r.rotate,"deg) "),S}var HS=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function V1(){var e=L1,r=O1,a=Vt.familyPrefix,c=Vt.replacementClass,d=HS;if(a!==e||c!==r){var _=new RegExp("\\.".concat(e,"\\-"),"g"),x=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(r),"g");d=d.replace(_,".".concat(a,"-")).replace(x,"--".concat(a,"-")).replace(l,".".concat(c))}return d}var iv=!1;function jp(){Vt.autoAddCss&&!iv&&(GS(V1()),iv=!0)}var YS={mixout:function(){return{dom:{css:V1,insertCss:jp}}},hooks:function(){return{beforeDOMElementCreation:function(){jp()},beforeI2svg:function(){jp()}}}},Ia=ws||{};Ia[ka]||(Ia[ka]={});Ia[ka].styles||(Ia[ka].styles={});Ia[ka].hooks||(Ia[ka].hooks={});Ia[ka].shims||(Ia[ka].shims=[]);var Po=Ia[ka],$1=[],KS=function e(){nr.removeEventListener("DOMContentLoaded",e),nd=1,$1.map(function(r){return r()})},nd=!1;za&&(nd=(nr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(nr.readyState),nd||nr.addEventListener("DOMContentLoaded",KS));function JS(e){!za||(nd?setTimeout(e,0):$1.push(e))}function wh(e){var r=e.tag,a=e.attributes,c=a===void 0?{}:a,d=e.children,_=d===void 0?[]:d;return typeof e=="string"?U1(e):"<".concat(r," ").concat(qS(c),">").concat(_.map(wh).join(""),"</").concat(r,">")}function ov(e,r,a){if(e&&e[r]&&e[r][a])return{prefix:r,iconName:a,icon:e[r][a]}}var QS=function(r,a){return function(c,d,_,x){return r.call(a,c,d,_,x)}},Gp=function(r,a,c,d){var _=Object.keys(r),x=_.length,l=d!==void 0?QS(a,d):a,S,A,z;for(c===void 0?(S=1,z=r[_[0]]):(S=0,z=c);S<x;S++)A=_[S],z=l(z,r[A],A,r);return z};function eT(e){for(var r=[],a=0,c=e.length;a<c;){var d=e.charCodeAt(a++);if(d>=55296&&d<=56319&&a<c){var _=e.charCodeAt(a++);(_&64512)==56320?r.push(((d&1023)<<10)+(_&1023)+65536):(r.push(d),a--)}else r.push(d)}return r}function Vm(e){var r=eT(e);return r.length===1?r[0].toString(16):null}function tT(e,r){var a=e.length,c=e.charCodeAt(r),d;return c>=55296&&c<=56319&&a>r+1&&(d=e.charCodeAt(r+1),d>=56320&&d<=57343)?(c-55296)*1024+d-56320+65536:c}function av(e){return Object.keys(e).reduce(function(r,a){var c=e[a],d=!!c.icon;return d?r[c.iconName]=c.icon:r[a]=c,r},{})}function $m(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=a.skipHooks,d=c===void 0?!1:c,_=av(r);typeof Po.hooks.addPack=="function"&&!d?Po.hooks.addPack(e,av(r)):Po.styles[e]=kt(kt({},Po.styles[e]||{}),_),e==="fas"&&$m("fa",r)}var Qc=Po.styles,nT=Po.shims,rT=Object.values(D1),iy=null,j1={},G1={},Z1={},q1={},W1={},iT=Object.keys(ty);function oT(e){return~BS.indexOf(e)}function aT(e,r){var a=r.split("-"),c=a[0],d=a.slice(1).join("-");return c===e&&d!==""&&!oT(d)?d:null}var X1=function(){var r=function(_){return Gp(Qc,function(x,l,S){return x[S]=Gp(l,_,{}),x},{})};j1=r(function(d,_,x){if(_[3]&&(d[_[3]]=x),_[2]){var l=_[2].filter(function(S){return typeof S=="number"});l.forEach(function(S){d[S.toString(16)]=x})}return d}),G1=r(function(d,_,x){if(d[x]=x,_[2]){var l=_[2].filter(function(S){return typeof S=="string"});l.forEach(function(S){d[S]=x})}return d}),W1=r(function(d,_,x){var l=_[2];return d[x]=x,l.forEach(function(S){d[S]=x}),d});var a="far"in Qc||Vt.autoFetchSvg,c=Gp(nT,function(d,_){var x=_[0],l=_[1],S=_[2];return l==="far"&&!a&&(l="fas"),typeof x=="string"&&(d.names[x]={prefix:l,iconName:S}),typeof x=="number"&&(d.unicodes[x.toString(16)]={prefix:l,iconName:S}),d},{names:{},unicodes:{}});Z1=c.names,q1=c.unicodes,iy=Sd(Vt.styleDefault)};jS(function(e){iy=Sd(e.styleDefault)});X1();function oy(e,r){return(j1[e]||{})[r]}function sT(e,r){return(G1[e]||{})[r]}function gu(e,r){return(W1[e]||{})[r]}function H1(e){return Z1[e]||{prefix:null,iconName:null}}function lT(e){var r=q1[e],a=oy("fas",e);return r||(a?{prefix:"fas",iconName:a}:null)||{prefix:null,iconName:null}}function bs(){return iy}var ay=function(){return{prefix:null,iconName:null,rest:[]}};function Sd(e){var r=ty[e],a=td[e]||td[r],c=e in Po.styles?e:null;return a||c||null}function Td(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.skipLookups,c=a===void 0?!1:a,d=null,_=e.reduce(function(x,l){var S=aT(Vt.familyPrefix,l);if(Qc[l]?(l=rT.includes(l)?zS[l]:l,d=l,x.prefix=l):iT.indexOf(l)>-1?(d=l,x.prefix=Sd(l)):S?x.iconName=S:l!==Vt.replacementClass&&x.rest.push(l),!c&&x.prefix&&x.iconName){var A=d==="fa"?H1(x.iconName):{},z=gu(x.prefix,x.iconName);A.prefix&&(d=null),x.iconName=A.iconName||z||x.iconName,x.prefix=A.prefix||x.prefix,x.prefix==="far"&&!Qc.far&&Qc.fas&&!Vt.autoFetchSvg&&(x.prefix="fas")}return x},ay());return(_.prefix==="fa"||d==="fa")&&(_.prefix=bs()||"fas"),_}var uT=function(){function e(){vS(this,e),this.definitions={}}return xS(e,[{key:"add",value:function(){for(var a=this,c=arguments.length,d=new Array(c),_=0;_<c;_++)d[_]=arguments[_];var x=d.reduce(this._pullDefinitions,{});Object.keys(x).forEach(function(l){a.definitions[l]=kt(kt({},a.definitions[l]||{}),x[l]),$m(l,x[l]);var S=D1[l];S&&$m(S,x[l]),X1()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(a,c){var d=c.prefix&&c.iconName&&c.icon?{0:c}:c;return Object.keys(d).map(function(_){var x=d[_],l=x.prefix,S=x.iconName,A=x.icon,z=A[2];a[l]||(a[l]={}),z.length>0&&z.forEach(function(C){typeof C=="string"&&(a[l][C]=A)}),a[l][S]=A}),a}}]),e}(),sv=[],yu={},Iu={},cT=Object.keys(Iu);function hT(e,r){var a=r.mixoutsTo;return sv=e,yu={},Object.keys(Iu).forEach(function(c){cT.indexOf(c)===-1&&delete Iu[c]}),sv.forEach(function(c){var d=c.mixout?c.mixout():{};if(Object.keys(d).forEach(function(x){typeof d[x]=="function"&&(a[x]=d[x]),ed(d[x])==="object"&&Object.keys(d[x]).forEach(function(l){a[x]||(a[x]={}),a[x][l]=d[x][l]})}),c.hooks){var _=c.hooks();Object.keys(_).forEach(function(x){yu[x]||(yu[x]=[]),yu[x].push(_[x])})}c.provides&&c.provides(Iu)}),a}function jm(e,r){for(var a=arguments.length,c=new Array(a>2?a-2:0),d=2;d<a;d++)c[d-2]=arguments[d];var _=yu[e]||[];return _.forEach(function(x){r=x.apply(null,[r].concat(c))}),r}function vl(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];var d=yu[e]||[];d.forEach(function(_){_.apply(null,a)})}function Pa(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1);return Iu[e]?Iu[e].apply(null,r):void 0}function Gm(e){e.prefix==="fa"&&(e.prefix="fas");var r=e.iconName,a=e.prefix||bs();if(!!r)return r=gu(a,r)||r,ov(Y1.definitions,a,r)||ov(Po.styles,a,r)}var Y1=new uT,fT=function(){Vt.autoReplaceSvg=!1,Vt.observeMutations=!1,vl("noAuto")},dT={i2svg:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return za?(vl("beforeI2svg",r),Pa("pseudoElements2svg",r),Pa("i2svg",r)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.autoReplaceSvgRoot;Vt.autoReplaceSvg===!1&&(Vt.autoReplaceSvg=!0),Vt.observeMutations=!0,JS(function(){mT({autoReplaceSvgRoot:a}),vl("watch",r)})}},pT={icon:function(r){if(r===null)return null;if(ed(r)==="object"&&r.prefix&&r.iconName)return{prefix:r.prefix,iconName:gu(r.prefix,r.iconName)||r.iconName};if(Array.isArray(r)&&r.length===2){var a=r[1].indexOf("fa-")===0?r[1].slice(3):r[1],c=Sd(r[0]);return{prefix:c,iconName:gu(c,a)||a}}if(typeof r=="string"&&(r.indexOf("".concat(Vt.familyPrefix,"-"))>-1||r.match(LS))){var d=Td(r.split(" "),{skipLookups:!0});return{prefix:d.prefix||bs(),iconName:gu(d.prefix,d.iconName)||d.iconName}}if(typeof r=="string"){var _=bs();return{prefix:_,iconName:gu(_,r)||r}}}},Ui={noAuto:fT,config:Vt,dom:dT,parse:pT,library:Y1,findIconDefinition:Gm,toHtml:wh},mT=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.autoReplaceSvgRoot,c=a===void 0?nr:a;(Object.keys(Po.styles).length>0||Vt.autoFetchSvg)&&za&&Vt.autoReplaceSvg&&Ui.dom.i2svg({node:c})};function Ad(e,r){return Object.defineProperty(e,"abstract",{get:r}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(c){return wh(c)})}}),Object.defineProperty(e,"node",{get:function(){if(!!za){var c=nr.createElement("div");return c.innerHTML=e.html,c.children}}}),e}function gT(e){var r=e.children,a=e.main,c=e.mask,d=e.attributes,_=e.styles,x=e.transform;if(ry(x)&&a.found&&!c.found){var l=a.width,S=a.height,A={x:l/S/2,y:.5};d.style=Ed(kt(kt({},_),{},{"transform-origin":"".concat(A.x+x.x/16,"em ").concat(A.y+x.y/16,"em")}))}return[{tag:"svg",attributes:d,children:r}]}function yT(e){var r=e.prefix,a=e.iconName,c=e.children,d=e.attributes,_=e.symbol,x=_===!0?"".concat(r,"-").concat(Vt.familyPrefix,"-").concat(a):_;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:kt(kt({},d),{},{id:x}),children:c}]}]}function sy(e){var r=e.icons,a=r.main,c=r.mask,d=e.prefix,_=e.iconName,x=e.transform,l=e.symbol,S=e.title,A=e.maskId,z=e.titleId,C=e.extra,P=e.watchable,q=P===void 0?!1:P,te=c.found?c:a,Z=te.width,j=te.height,N=d==="fak",$=[Vt.replacementClass,_?"".concat(Vt.familyPrefix,"-").concat(_):""].filter(function(Te){return C.classes.indexOf(Te)===-1}).filter(function(Te){return Te!==""||!!Te}).concat(C.classes).join(" "),G={children:[],attributes:kt(kt({},C.attributes),{},{"data-prefix":d,"data-icon":_,class:$,role:C.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Z," ").concat(j)})},J=N&&!~C.classes.indexOf("fa-fw")?{width:"".concat(Z/j*16*.0625,"em")}:{};q&&(G.attributes[_l]=""),S&&(G.children.push({tag:"title",attributes:{id:G.attributes["aria-labelledby"]||"title-".concat(z||ph())},children:[S]}),delete G.attributes.title);var me=kt(kt({},G),{},{prefix:d,iconName:_,main:a,mask:c,maskId:A,transform:x,symbol:l,styles:kt(kt({},J),C.styles)}),H=c.found&&a.found?Pa("generateAbstractMask",me)||{children:[],attributes:{}}:Pa("generateAbstractIcon",me)||{children:[],attributes:{}},se=H.children,ne=H.attributes;return me.children=se,me.attributes=ne,l?yT(me):gT(me)}function lv(e){var r=e.content,a=e.width,c=e.height,d=e.transform,_=e.title,x=e.extra,l=e.watchable,S=l===void 0?!1:l,A=kt(kt(kt({},x.attributes),_?{title:_}:{}),{},{class:x.classes.join(" ")});S&&(A[_l]="");var z=kt({},x.styles);ry(d)&&(z.transform=XS({transform:d,startCentered:!0,width:a,height:c}),z["-webkit-transform"]=z.transform);var C=Ed(z);C.length>0&&(A.style=C);var P=[];return P.push({tag:"span",attributes:A,children:[r]}),_&&P.push({tag:"span",attributes:{class:"sr-only"},children:[_]}),P}function _T(e){var r=e.content,a=e.title,c=e.extra,d=kt(kt(kt({},c.attributes),a?{title:a}:{}),{},{class:c.classes.join(" ")}),_=Ed(c.styles);_.length>0&&(d.style=_);var x=[];return x.push({tag:"span",attributes:d,children:[r]}),a&&x.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),x}var Zp=Po.styles;function Zm(e){var r=e[0],a=e[1],c=e.slice(4),d=Kg(c,1),_=d[0],x=null;return Array.isArray(_)?x={tag:"g",attributes:{class:"".concat(Vt.familyPrefix,"-").concat(dl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Vt.familyPrefix,"-").concat(dl.SECONDARY),fill:"currentColor",d:_[0]}},{tag:"path",attributes:{class:"".concat(Vt.familyPrefix,"-").concat(dl.PRIMARY),fill:"currentColor",d:_[1]}}]}:x={tag:"path",attributes:{fill:"currentColor",d:_}},{found:!0,width:r,height:a,icon:x}}var vT={found:!1,width:512,height:512};function xT(e,r){!R1&&!Vt.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(r,'" is missing.'))}function qm(e,r){var a=r;return r==="fa"&&Vt.styleDefault!==null&&(r=bs()),new Promise(function(c,d){if(Pa("missingIconAbstract"),a==="fa"){var _=H1(e)||{};e=_.iconName||e,r=_.prefix||r}if(e&&r&&Zp[r]&&Zp[r][e]){var x=Zp[r][e];return c(Zm(x))}xT(e,r),c(kt(kt({},vT),{},{icon:Vt.showMissingIcons&&e?Pa("missingIconAbstract")||{}:{}}))})}var uv=function(){},Wm=Vt.measurePerformance&&ff&&ff.mark&&ff.measure?ff:{mark:uv,measure:uv},Bc='FA "6.0.0"',wT=function(r){return Wm.mark("".concat(Bc," ").concat(r," begins")),function(){return K1(r)}},K1=function(r){Wm.mark("".concat(Bc," ").concat(r," ends")),Wm.measure("".concat(Bc," ").concat(r),"".concat(Bc," ").concat(r," begins"),"".concat(Bc," ").concat(r," ends"))},ly={begin:wT,end:K1},Cf=function(){};function cv(e){var r=e.getAttribute?e.getAttribute(_l):null;return typeof r=="string"}function bT(e){var r=e.getAttribute?e.getAttribute(Qg):null,a=e.getAttribute?e.getAttribute(ey):null;return r&&a}function ET(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(Vt.replacementClass)}function ST(){if(Vt.autoReplaceSvg===!0)return kf.replace;var e=kf[Vt.autoReplaceSvg];return e||kf.replace}function TT(e){return nr.createElementNS("http://www.w3.org/2000/svg",e)}function AT(e){return nr.createElement(e)}function J1(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.ceFn,c=a===void 0?e.tag==="svg"?TT:AT:a;if(typeof e=="string")return nr.createTextNode(e);var d=c(e.tag);Object.keys(e.attributes||[]).forEach(function(x){d.setAttribute(x,e.attributes[x])});var _=e.children||[];return _.forEach(function(x){d.appendChild(J1(x,{ceFn:c}))}),d}function CT(e){var r=" ".concat(e.outerHTML," ");return r="".concat(r,"Font Awesome fontawesome.com "),r}var kf={replace:function(r){var a=r[0];if(a.parentNode)if(r[1].forEach(function(d){a.parentNode.insertBefore(J1(d),a)}),a.getAttribute(_l)===null&&Vt.keepOriginalSource){var c=nr.createComment(CT(a));a.parentNode.replaceChild(c,a)}else a.remove()},nest:function(r){var a=r[0],c=r[1];if(~ny(a).indexOf(Vt.replacementClass))return kf.replace(r);var d=new RegExp("".concat(Vt.familyPrefix,"-.*"));if(delete c[0].attributes.id,c[0].attributes.class){var _=c[0].attributes.class.split(" ").reduce(function(l,S){return S===Vt.replacementClass||S.match(d)?l.toSvg.push(S):l.toNode.push(S),l},{toNode:[],toSvg:[]});c[0].attributes.class=_.toSvg.join(" "),_.toNode.length===0?a.removeAttribute("class"):a.setAttribute("class",_.toNode.join(" "))}var x=c.map(function(l){return wh(l)}).join(`
`);a.setAttribute(_l,""),a.innerHTML=x}};function hv(e){e()}function Q1(e,r){var a=typeof r=="function"?r:Cf;if(e.length===0)a();else{var c=hv;Vt.mutateApproach===PS&&(c=ws.requestAnimationFrame||hv),c(function(){var d=ST(),_=ly.begin("mutate");e.map(d),_(),a()})}}var uy=!1;function ew(){uy=!0}function Xm(){uy=!1}var rd=null;function fv(e){if(!!nv&&!!Vt.observeMutations){var r=e.treeCallback,a=r===void 0?Cf:r,c=e.nodeCallback,d=c===void 0?Cf:c,_=e.pseudoElementsCallback,x=_===void 0?Cf:_,l=e.observeMutationsRoot,S=l===void 0?nr:l;rd=new nv(function(A){if(!uy){var z=bs();$u(A).forEach(function(C){if(C.type==="childList"&&C.addedNodes.length>0&&!cv(C.addedNodes[0])&&(Vt.searchPseudoElements&&x(C.target),a(C.target)),C.type==="attributes"&&C.target.parentNode&&Vt.searchPseudoElements&&x(C.target.parentNode),C.type==="attributes"&&cv(C.target)&&~FS.indexOf(C.attributeName))if(C.attributeName==="class"&&bT(C.target)){var P=Td(ny(C.target)),q=P.prefix,te=P.iconName;C.target.setAttribute(Qg,q||z),te&&C.target.setAttribute(ey,te)}else ET(C.target)&&d(C.target)})}}),!!za&&rd.observe(S,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function kT(){!rd||rd.disconnect()}function IT(e){var r=e.getAttribute("style"),a=[];return r&&(a=r.split(";").reduce(function(c,d){var _=d.split(":"),x=_[0],l=_.slice(1);return x&&l.length>0&&(c[x]=l.join(":").trim()),c},{})),a}function PT(e){var r=e.getAttribute("data-prefix"),a=e.getAttribute("data-icon"),c=e.innerText!==void 0?e.innerText.trim():"",d=Td(ny(e));return d.prefix||(d.prefix=bs()),r&&a&&(d.prefix=r,d.iconName=a),d.iconName&&d.prefix||d.prefix&&c.length>0&&(d.iconName=sT(d.prefix,e.innerText)||oy(d.prefix,Vm(e.innerText))),d}function MT(e){var r=$u(e.attributes).reduce(function(d,_){return d.name!=="class"&&d.name!=="style"&&(d[_.name]=_.value),d},{}),a=e.getAttribute("title"),c=e.getAttribute("data-fa-title-id");return Vt.autoA11y&&(a?r["aria-labelledby"]="".concat(Vt.replacementClass,"-title-").concat(c||ph()):(r["aria-hidden"]="true",r.focusable="false")),r}function zT(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ho,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function dv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},a=PT(e),c=a.iconName,d=a.prefix,_=a.rest,x=MT(e),l=jm("parseNodeAttributes",{},e),S=r.styleParser?IT(e):[];return kt({iconName:c,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:d,transform:Ho,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:_,styles:S,attributes:x}},l)}var LT=Po.styles;function tw(e){var r=Vt.autoReplaceSvg==="nest"?dv(e,{styleParser:!1}):dv(e);return~r.extra.classes.indexOf(F1)?Pa("generateLayersText",e,r):Pa("generateSvgReplacementMutation",e,r)}function pv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!za)return Promise.resolve();var a=nr.documentElement.classList,c=function(C){return a.add("".concat(rv,"-").concat(C))},d=function(C){return a.remove("".concat(rv,"-").concat(C))},_=Vt.autoFetchSvg?Object.keys(ty):Object.keys(LT),x=[".".concat(F1,":not([").concat(_l,"])")].concat(_.map(function(z){return".".concat(z,":not([").concat(_l,"])")})).join(", ");if(x.length===0)return Promise.resolve();var l=[];try{l=$u(e.querySelectorAll(x))}catch{}if(l.length>0)c("pending"),d("complete");else return Promise.resolve();var S=ly.begin("onTree"),A=l.reduce(function(z,C){try{var P=tw(C);P&&z.push(P)}catch(q){R1||q.name==="MissingIcon"&&console.error(q)}return z},[]);return new Promise(function(z,C){Promise.all(A).then(function(P){Q1(P,function(){c("active"),c("complete"),d("pending"),typeof r=="function"&&r(),S(),z()})}).catch(function(P){S(),C(P)})})}function OT(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;tw(e).then(function(a){a&&Q1([a],r)})}function RT(e){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=(r||{}).icon?r:Gm(r||{}),d=a.mask;return d&&(d=(d||{}).icon?d:Gm(d||{})),e(c,kt(kt({},a),{},{mask:d}))}}var DT=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,d=c===void 0?Ho:c,_=a.symbol,x=_===void 0?!1:_,l=a.mask,S=l===void 0?null:l,A=a.maskId,z=A===void 0?null:A,C=a.title,P=C===void 0?null:C,q=a.titleId,te=q===void 0?null:q,Z=a.classes,j=Z===void 0?[]:Z,N=a.attributes,$=N===void 0?{}:N,G=a.styles,J=G===void 0?{}:G;if(!!r){var me=r.prefix,H=r.iconName,se=r.icon;return Ad(kt({type:"icon"},r),function(){return vl("beforeDOMElementCreation",{iconDefinition:r,params:a}),Vt.autoA11y&&(P?$["aria-labelledby"]="".concat(Vt.replacementClass,"-title-").concat(te||ph()):($["aria-hidden"]="true",$.focusable="false")),sy({icons:{main:Zm(se),mask:S?Zm(S.icon):{found:!1,width:null,height:null,icon:{}}},prefix:me,iconName:H,transform:kt(kt({},Ho),d),symbol:x,title:P,maskId:z,titleId:te,extra:{attributes:$,styles:J,classes:j}})})}},FT={mixout:function(){return{icon:RT(DT)}},hooks:function(){return{mutationObserverCallbacks:function(a){return a.treeCallback=pv,a.nodeCallback=OT,a}}},provides:function(r){r.i2svg=function(a){var c=a.node,d=c===void 0?nr:c,_=a.callback,x=_===void 0?function(){}:_;return pv(d,x)},r.generateSvgReplacementMutation=function(a,c){var d=c.iconName,_=c.title,x=c.titleId,l=c.prefix,S=c.transform,A=c.symbol,z=c.mask,C=c.maskId,P=c.extra;return new Promise(function(q,te){Promise.all([qm(d,l),z.iconName?qm(z.iconName,z.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Z){var j=Kg(Z,2),N=j[0],$=j[1];q([a,sy({icons:{main:N,mask:$},prefix:l,iconName:d,transform:S,symbol:A,maskId:C,title:_,titleId:x,extra:P,watchable:!0})])}).catch(te)})},r.generateAbstractIcon=function(a){var c=a.children,d=a.attributes,_=a.main,x=a.transform,l=a.styles,S=Ed(l);S.length>0&&(d.style=S);var A;return ry(x)&&(A=Pa("generateAbstractTransformGrouping",{main:_,transform:x,containerWidth:_.width,iconWidth:_.width})),c.push(A||_.icon),{children:c,attributes:d}}}},BT={mixout:function(){return{layer:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c.classes,_=d===void 0?[]:d;return Ad({type:"layer"},function(){vl("beforeDOMElementCreation",{assembler:a,params:c});var x=[];return a(function(l){Array.isArray(l)?l.map(function(S){x=x.concat(S.abstract)}):x=x.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(Vt.familyPrefix,"-layers")].concat(bd(_)).join(" ")},children:x}]})}}}},NT={mixout:function(){return{counter:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c.title,_=d===void 0?null:d,x=c.classes,l=x===void 0?[]:x,S=c.attributes,A=S===void 0?{}:S,z=c.styles,C=z===void 0?{}:z;return Ad({type:"counter",content:a},function(){return vl("beforeDOMElementCreation",{content:a,params:c}),_T({content:a.toString(),title:_,extra:{attributes:A,styles:C,classes:["".concat(Vt.familyPrefix,"-layers-counter")].concat(bd(l))}})})}}}},UT={mixout:function(){return{text:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c.transform,_=d===void 0?Ho:d,x=c.title,l=x===void 0?null:x,S=c.classes,A=S===void 0?[]:S,z=c.attributes,C=z===void 0?{}:z,P=c.styles,q=P===void 0?{}:P;return Ad({type:"text",content:a},function(){return vl("beforeDOMElementCreation",{content:a,params:c}),lv({content:a,transform:kt(kt({},Ho),_),title:l,extra:{attributes:C,styles:q,classes:["".concat(Vt.familyPrefix,"-layers-text")].concat(bd(A))}})})}}},provides:function(r){r.generateLayersText=function(a,c){var d=c.title,_=c.transform,x=c.extra,l=null,S=null;if(z1){var A=parseInt(getComputedStyle(a).fontSize,10),z=a.getBoundingClientRect();l=z.width/A,S=z.height/A}return Vt.autoA11y&&!d&&(x.attributes["aria-hidden"]="true"),Promise.resolve([a,lv({content:a.innerHTML,width:l,height:S,transform:_,title:d,extra:x,watchable:!0})])}}},VT=new RegExp('"',"ug"),mv=[1105920,1112319];function $T(e){var r=e.replace(VT,""),a=tT(r,0),c=a>=mv[0]&&a<=mv[1],d=r.length===2?r[0]===r[1]:!1;return{value:Vm(d?r[0]:r),isSecondary:c||d}}function gv(e,r){var a="".concat(IS).concat(r.replace(":","-"));return new Promise(function(c,d){if(e.getAttribute(a)!==null)return c();var _=$u(e.children),x=_.filter(function(H){return H.getAttribute(Um)===r})[0],l=ws.getComputedStyle(e,r),S=l.getPropertyValue("font-family").match(OS),A=l.getPropertyValue("font-weight"),z=l.getPropertyValue("content");if(x&&!S)return e.removeChild(x),c();if(S&&z!=="none"&&z!==""){var C=l.getPropertyValue("content"),P=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(S[2])?td[S[2].toLowerCase()]:RS[A],q=$T(C),te=q.value,Z=q.isSecondary,j=S[0].startsWith("FontAwesome"),N=oy(P,te),$=N;if(j){var G=lT(te);G.iconName&&G.prefix&&(N=G.iconName,P=G.prefix)}if(N&&!Z&&(!x||x.getAttribute(Qg)!==P||x.getAttribute(ey)!==$)){e.setAttribute(a,$),x&&e.removeChild(x);var J=zT(),me=J.extra;me.attributes[Um]=r,qm(N,P).then(function(H){var se=sy(kt(kt({},J),{},{icons:{main:H,mask:ay()},prefix:P,iconName:$,extra:me,watchable:!0})),ne=nr.createElement("svg");r==="::before"?e.insertBefore(ne,e.firstChild):e.appendChild(ne),ne.outerHTML=se.map(function(Te){return wh(Te)}).join(`
`),e.removeAttribute(a),c()}).catch(d)}else c()}else c()})}function jT(e){return Promise.all([gv(e,"::before"),gv(e,"::after")])}function GT(e){return e.parentNode!==document.head&&!~MS.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Um)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function yv(e){if(!!za)return new Promise(function(r,a){var c=$u(e.querySelectorAll("*")).filter(GT).map(jT),d=ly.begin("searchPseudoElements");ew(),Promise.all(c).then(function(){d(),Xm(),r()}).catch(function(){d(),Xm(),a()})})}var ZT={hooks:function(){return{mutationObserverCallbacks:function(a){return a.pseudoElementsCallback=yv,a}}},provides:function(r){r.pseudoElements2svg=function(a){var c=a.node,d=c===void 0?nr:c;Vt.searchPseudoElements&&yv(d)}}},_v=!1,qT={mixout:function(){return{dom:{unwatch:function(){ew(),_v=!0}}}},hooks:function(){return{bootstrap:function(){fv(jm("mutationObserverCallbacks",{}))},noAuto:function(){kT()},watch:function(a){var c=a.observeMutationsRoot;_v?Xm():fv(jm("mutationObserverCallbacks",{observeMutationsRoot:c}))}}}},vv=function(r){var a={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return r.toLowerCase().split(" ").reduce(function(c,d){var _=d.toLowerCase().split("-"),x=_[0],l=_.slice(1).join("-");if(x&&l==="h")return c.flipX=!0,c;if(x&&l==="v")return c.flipY=!0,c;if(l=parseFloat(l),isNaN(l))return c;switch(x){case"grow":c.size=c.size+l;break;case"shrink":c.size=c.size-l;break;case"left":c.x=c.x-l;break;case"right":c.x=c.x+l;break;case"up":c.y=c.y-l;break;case"down":c.y=c.y+l;break;case"rotate":c.rotate=c.rotate+l;break}return c},a)},WT={mixout:function(){return{parse:{transform:function(a){return vv(a)}}}},hooks:function(){return{parseNodeAttributes:function(a,c){var d=c.getAttribute("data-fa-transform");return d&&(a.transform=vv(d)),a}}},provides:function(r){r.generateAbstractTransformGrouping=function(a){var c=a.main,d=a.transform,_=a.containerWidth,x=a.iconWidth,l={transform:"translate(".concat(_/2," 256)")},S="translate(".concat(d.x*32,", ").concat(d.y*32,") "),A="scale(".concat(d.size/16*(d.flipX?-1:1),", ").concat(d.size/16*(d.flipY?-1:1),") "),z="rotate(".concat(d.rotate," 0 0)"),C={transform:"".concat(S," ").concat(A," ").concat(z)},P={transform:"translate(".concat(x/2*-1," -256)")},q={outer:l,inner:C,path:P};return{tag:"g",attributes:kt({},q.outer),children:[{tag:"g",attributes:kt({},q.inner),children:[{tag:c.icon.tag,children:c.icon.children,attributes:kt(kt({},c.icon.attributes),q.path)}]}]}}}},qp={x:0,y:0,width:"100%",height:"100%"};function xv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||r)&&(e.attributes.fill="black"),e}function XT(e){return e.tag==="g"?e.children:[e]}var HT={hooks:function(){return{parseNodeAttributes:function(a,c){var d=c.getAttribute("data-fa-mask"),_=d?Td(d.split(" ").map(function(x){return x.trim()})):ay();return _.prefix||(_.prefix=bs()),a.mask=_,a.maskId=c.getAttribute("data-fa-mask-id"),a}}},provides:function(r){r.generateAbstractMask=function(a){var c=a.children,d=a.attributes,_=a.main,x=a.mask,l=a.maskId,S=a.transform,A=_.width,z=_.icon,C=x.width,P=x.icon,q=WS({transform:S,containerWidth:C,iconWidth:A}),te={tag:"rect",attributes:kt(kt({},qp),{},{fill:"white"})},Z=z.children?{children:z.children.map(xv)}:{},j={tag:"g",attributes:kt({},q.inner),children:[xv(kt({tag:z.tag,attributes:kt(kt({},z.attributes),q.path)},Z))]},N={tag:"g",attributes:kt({},q.outer),children:[j]},$="mask-".concat(l||ph()),G="clip-".concat(l||ph()),J={tag:"mask",attributes:kt(kt({},qp),{},{id:$,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[te,N]},me={tag:"defs",children:[{tag:"clipPath",attributes:{id:G},children:XT(P)},J]};return c.push(me,{tag:"rect",attributes:kt({fill:"currentColor","clip-path":"url(#".concat(G,")"),mask:"url(#".concat($,")")},qp)}),{children:c,attributes:d}}}},YT={provides:function(r){var a=!1;ws.matchMedia&&(a=ws.matchMedia("(prefers-reduced-motion: reduce)").matches),r.missingIconAbstract=function(){var c=[],d={fill:"currentColor"},_={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};c.push({tag:"path",attributes:kt(kt({},d),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var x=kt(kt({},_),{},{attributeName:"opacity"}),l={tag:"circle",attributes:kt(kt({},d),{},{cx:"256",cy:"364",r:"28"}),children:[]};return a||l.children.push({tag:"animate",attributes:kt(kt({},_),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:kt(kt({},x),{},{values:"1;0;1;1;0;1;"})}),c.push(l),c.push({tag:"path",attributes:kt(kt({},d),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:a?[]:[{tag:"animate",attributes:kt(kt({},x),{},{values:"1;0;0;0;0;1;"})}]}),a||c.push({tag:"path",attributes:kt(kt({},d),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:kt(kt({},x),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:c}}}},KT={hooks:function(){return{parseNodeAttributes:function(a,c){var d=c.getAttribute("data-fa-symbol"),_=d===null?!1:d===""?!0:d;return a.symbol=_,a}}}},JT=[YS,FT,BT,NT,UT,ZT,qT,WT,HT,YT,KT];hT(JT,{mixoutsTo:Ui});Ui.noAuto;Ui.config;Ui.library;Ui.dom;var Hm=Ui.parse;Ui.findIconDefinition;Ui.toHtml;var QT=Ui.icon;Ui.layer;Ui.text;Ui.counter;var nw={exports:{}},eA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tA=eA,nA=tA;function rw(){}function iw(){}iw.resetWarningCache=rw;var rA=function(){function e(c,d,_,x,l,S){if(S!==nA){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}e.isRequired=e;function r(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:iw,resetWarningCache:rw};return a.PropTypes=a,a};nw.exports=rA();var En=nw.exports;function wv(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);r&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,c)}return a}function ss(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?wv(Object(a),!0).forEach(function(c){_u(e,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wv(Object(a)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(a,c))})}return e}function id(e){return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},id(e)}function _u(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function iA(e,r){if(e==null)return{};var a={},c=Object.keys(e),d,_;for(_=0;_<c.length;_++)d=c[_],!(r.indexOf(d)>=0)&&(a[d]=e[d]);return a}function ow(e,r){if(e==null)return{};var a=iA(e,r),c,d;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(e);for(d=0;d<_.length;d++)c=_[d],!(r.indexOf(c)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,c)||(a[c]=e[c]))}return a}function Ym(e){return oA(e)||aA(e)||sA(e)||lA()}function oA(e){if(Array.isArray(e))return Km(e)}function aA(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sA(e,r){if(!!e){if(typeof e=="string")return Km(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Km(e,r)}}function Km(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,c=new Array(r);a<r;a++)c[a]=e[a];return c}function lA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uA(e){var r,a=e.beat,c=e.fade,d=e.flash,_=e.spin,x=e.spinPulse,l=e.spinReverse,S=e.pulse,A=e.fixedWidth,z=e.inverse,C=e.border,P=e.listItem,q=e.flip,te=e.size,Z=e.rotation,j=e.pull,N=(r={"fa-beat":a,"fa-fade":c,"fa-flash":d,"fa-spin":_,"fa-spin-reverse":l,"fa-spin-pulse":x,"fa-pulse":S,"fa-fw":A,"fa-inverse":z,"fa-border":C,"fa-li":P,"fa-flip-horizontal":q==="horizontal"||q==="both","fa-flip-vertical":q==="vertical"||q==="both"},_u(r,"fa-".concat(te),typeof te!="undefined"&&te!==null),_u(r,"fa-rotate-".concat(Z),typeof Z!="undefined"&&Z!==null&&Z!==0),_u(r,"fa-pull-".concat(j),typeof j!="undefined"&&j!==null),_u(r,"fa-swap-opacity",e.swapOpacity),r);return Object.keys(N).map(function($){return N[$]?$:null}).filter(function($){return $})}function cA(e){return e=e-0,e===e}function aw(e){return cA(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(r,a){return a?a.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var hA=["style"];function fA(e){return e.charAt(0).toUpperCase()+e.slice(1)}function dA(e){return e.split(";").map(function(r){return r.trim()}).filter(function(r){return r}).reduce(function(r,a){var c=a.indexOf(":"),d=aw(a.slice(0,c)),_=a.slice(c+1).trim();return d.startsWith("webkit")?r[fA(d)]=_:r[d]=_,r},{})}function sw(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof r=="string")return r;var c=(r.children||[]).map(function(S){return sw(e,S)}),d=Object.keys(r.attributes||{}).reduce(function(S,A){var z=r.attributes[A];switch(A){case"class":S.attrs.className=z,delete r.attributes.class;break;case"style":S.attrs.style=dA(z);break;default:A.indexOf("aria-")===0||A.indexOf("data-")===0?S.attrs[A.toLowerCase()]=z:S.attrs[aw(A)]=z}return S},{attrs:{}}),_=a.style,x=_===void 0?{}:_,l=ow(a,hA);return d.attrs.style=ss(ss({},d.attrs.style),x),e.apply(void 0,[r.tag,ss(ss({},d.attrs),l)].concat(Ym(c)))}var lw=!1;try{lw=!0}catch{}function pA(){if(!lw&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function bv(e){if(e&&id(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Hm.icon)return Hm.icon(e);if(e===null)return null;if(e&&id(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Wp(e,r){return Array.isArray(r)&&r.length>0||!Array.isArray(r)&&r?_u({},e,r):{}}var mA=["forwardedRef"];function Cd(e){var r=e.forwardedRef,a=ow(e,mA),c=a.icon,d=a.mask,_=a.symbol,x=a.className,l=a.title,S=a.titleId,A=bv(c),z=Wp("classes",[].concat(Ym(uA(a)),Ym(x.split(" ")))),C=Wp("transform",typeof a.transform=="string"?Hm.transform(a.transform):a.transform),P=Wp("mask",bv(d)),q=QT(A,ss(ss(ss(ss({},z),C),P),{},{symbol:_,title:l,titleId:S}));if(!q)return pA("Could not find icon",A),null;var te=q.abstract,Z={ref:r};return Object.keys(a).forEach(function(j){Cd.defaultProps.hasOwnProperty(j)||(Z[j]=a[j])}),gA(te[0],Z)}Cd.displayName="FontAwesomeIcon";Cd.propTypes={beat:En.bool,border:En.bool,className:En.string,fade:En.bool,flash:En.bool,mask:En.oneOfType([En.object,En.array,En.string]),fixedWidth:En.bool,inverse:En.bool,flip:En.oneOf(["horizontal","vertical","both"]),icon:En.oneOfType([En.object,En.array,En.string]),listItem:En.bool,pull:En.oneOf(["right","left"]),pulse:En.bool,rotation:En.oneOf([0,90,180,270]),size:En.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:En.bool,spinPulse:En.bool,spinReverse:En.bool,symbol:En.oneOfType([En.bool,En.string]),title:En.string,transform:En.oneOfType([En.string,En.object]),swapOpacity:En.bool};Cd.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var gA=sw.bind(null,S2.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var EC={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},SC={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};const yA=Lt.exports.createContext(null);function Ev(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Sv(e,r){const a=r.viewState||r;let c=!1;if("longitude"in a&&"latitude"in a){const d=e.center;e.center=new d.constructor(a.longitude,a.latitude),c=c||d!==e.center}if("zoom"in a){const d=e.zoom;e.zoom=a.zoom,c=c||d!==e.zoom}if("bearing"in a){const d=e.bearing;e.bearing=a.bearing,c=c||d!==e.bearing}if("pitch"in a){const d=e.pitch;e.pitch=a.pitch,c=c||d!==e.pitch}return a.padding&&!e.isPaddingEqual(a.padding)&&(c=!0,e.padding=a.padding),c}const _A=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Tv(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const r={};for(const c of e.layers)r[c.id]=c;const a=e.layers.map(c=>{const d=r[c.ref];let _=null;if("interactive"in c&&(_=Ei({},c),delete _.interactive),d){_=_||Ei({},c),delete _.ref;for(const x of _A)x in d&&(_[x]=d[x])}return _||c});return iu(Ei({},e),{layers:a})}function vA(e,r){const a=Array.isArray(e)?e[0]:e?e.x:0,c=Array.isArray(e)?e[1]:e?e.y:0,d=Array.isArray(r)?r[0]:r?r.x:0,_=Array.isArray(r)?r[1]:r?r.y:0;return a===d&&c===_}function io(e,r){if(e===r)return!0;if(!e||!r)return!1;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(!io(e[a],r[a]))return!1;return!0}else if(Array.isArray(r))return!1;if(typeof e=="object"&&typeof r=="object"){const a=Object.keys(e),c=Object.keys(r);if(a.length!==c.length)return!1;for(const d of a)if(!r.hasOwnProperty(d)||!io(e[d],r[d]))return!1;return!0}return!1}const Av={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Xp={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Cv={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},xA=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],wA=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ou{constructor(r,a,c){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=d=>{const _=this.props[Cv[d.type]];_&&_(d)},this._onPointerEvent=d=>{(d.type==="mousemove"||d.type==="mouseout")&&this._updateHover(d);const _=this.props[Av[d.type]];if(_){if(this.props.interactiveLayerIds&&d.type!=="mouseover"&&d.type!=="mouseout"){const x=this._hoveredFeatures||this._map.queryRenderedFeatures(d.point,{layers:this.props.interactiveLayerIds});if(!x.length)return;d.features=x}_(d),delete d.features}},this._onCameraEvent=d=>{if(!this._internalUpdate){const _=this.props[Xp[d.type]];_&&_(d)}d.type in this._deferredEvents&&(this._deferredEvents[d.type]=!1)},this._MapClass=r,this.props=a,this._initialize(c)}get map(){return this._map}get transform(){return this._renderTransform}setProps(r){const a=this.props;this.props=r;const c=this._updateSettings(r,a);c&&(this._renderTransform=this._map.transform.clone());const d=this._updateSize(r),_=this._updateViewState(r,!0);this._updateStyle(r,a),this._updateStyleComponents(r,a),this._updateHandlers(r,a),(c||d||_&&!this._map.isMoving())&&this.redraw()}static reuse(r,a){const c=Ou.savedMaps.pop();if(!c)return null;const d=c.map,_=d.getContainer();for(a.className=_.className;_.childNodes.length>0;)a.appendChild(_.childNodes[0]);return d._container=a,r.initialViewState&&c._updateViewState(r.initialViewState,!1),d.resize(),c.setProps(iu(Ei({},r),{styleDiffing:!1})),d.isStyleLoaded()?d.fire("load"):d.once("styledata",()=>d.fire("load")),c}_initialize(r){const{props:a}=this,c=iu(Ei(Ei({},a),a.initialViewState),{accessToken:a.mapboxAccessToken||bA()||null,container:r,style:Tv(a.mapStyle)}),d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),a.gl){const A=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=A,a.gl)}const _=new this._MapClass(c);d.padding&&_.setPadding(d.padding),a.cursor&&(_.getCanvas().style.cursor=a.cursor),this._renderTransform=_.transform.clone();const x=_._render;_._render=A=>{this._inRender=!0,x.call(_,A),this._inRender=!1};const l=_._renderTaskQueue.run;_._renderTaskQueue.run=A=>{l.call(_._renderTaskQueue,A),this._onBeforeRepaint()},_.on("render",()=>this._onAfterRepaint());const S=_.fire;_.fire=this._fireEvent.bind(this,S),_.on("resize",()=>{this._renderTransform.resize(_.transform.width,_.transform.height)}),_.on("styledata",()=>this._updateStyleComponents(this.props,{})),_.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const A in Av)_.on(A,this._onPointerEvent);for(const A in Xp)_.on(A,this._onCameraEvent);for(const A in Cv)_.on(A,this._onEvent);this._map=_}recycle(){Ou.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const r=this._map;!this._inRender&&r.style&&(r._frame&&(r._frame.cancel(),r._frame=null),r._render())}_updateSize(r){const{viewState:a}=r;if(a){const c=this._map;if(a.width!==c.transform.width||a.height!==c.transform.height)return c.resize(),!0}return!1}_updateViewState(r,a){if(this._internalUpdate)return!1;const c=this._map,d=this._renderTransform,{zoom:_,pitch:x,bearing:l}=d,S=Sv(d,Ei(Ei({},Ev(c.transform)),r));if(S&&a){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=_!==d.zoom),A.rotate||(A.rotate=l!==d.bearing),A.pitch||(A.pitch=x!==d.pitch)}return c.isMoving()||Sv(c.transform,r),S}_updateSettings(r,a){const c=this._map;let d=!1;for(const _ of xA)_ in r&&!io(r[_],a[_])&&(d=!0,c[`set${_[0].toUpperCase()}${_.slice(1)}`](r[_]));return d}_updateStyle(r,a){if(r.cursor!==a.cursor&&(this._map.getCanvas().style.cursor=r.cursor),r.mapStyle!==a.mapStyle){const c={diff:r.styleDiffing};return"localIdeographFontFamily"in r&&(c.localIdeographFontFamily=r.localIdeographFontFamily),this._map.setStyle(Tv(r.mapStyle),c),!0}return!1}_updateStyleComponents(r,a){const c=this._map;let d=!1;return c.style.loaded()&&("light"in r&&!io(r.light,a.light)&&(d=!0,c.setLight(r.light)),"fog"in r&&!io(r.fog,a.fog)&&(d=!0,c.setFog(r.fog)),"terrain"in r&&!io(r.terrain,a.terrain)&&(!r.terrain||c.getSource(r.terrain.source))&&(d=!0,c.setTerrain(r.terrain))),d}_updateHandlers(r,a){const c=this._map;let d=!1;for(const _ of wA){const x=r[_];io(x,a[_])||(d=!0,x?c[_].enable(x):c[_].disable())}return d}_updateHover(r){var d;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const _=r.type,x=((d=this._hoveredFeatures)==null?void 0:d.length)>0;let l;if(_==="mousemove")try{l=this._map.queryRenderedFeatures(r.point,{layers:a.interactiveLayerIds})}catch{l=[]}else l=[];const S=l.length>0;!S&&x&&(r.type="mouseleave",this._onPointerEvent(r)),this._hoveredFeatures=l,S&&!x&&(r.type="mouseenter",this._onPointerEvent(r)),r.type=_}else this._hoveredFeatures=null}_fireEvent(r,a,c){const d=this._map,_=d.transform,x=typeof a=="string"?a:a.type;return x==="move"&&this._updateViewState(this.props,!1),x in Xp&&(typeof a=="object"&&(a.viewState=Ev(_)),this._map.isMoving())?(d.transform=this._renderTransform,r.call(d,a,c),d.transform=_,d):(r.call(d,a,c),d)}_onBeforeRepaint(){const r=this._map;this._internalUpdate=!0;for(const c in this._deferredEvents)this._deferredEvents[c]&&r.fire(c);this._internalUpdate=!1;const a=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=a}}}Ou.savedMaps=[];function bA(){let e=null;if(typeof location!="undefined"){const r=/access_token=([^&\/]*)/.exec(location.search);e=r&&r[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const EA=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function kv(e,r){if(!e)return null;const a=e.map,c={getMap:()=>a,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:d=>e.transform.locationPoint(r.LngLat.convert(d)),unproject:d=>e.transform.pointLocation(r.Point.convert(d))};for(const d of SA(a))!(d in c)&&!EA.includes(d)&&(c[d]=a[d].bind(a));return c}function SA(e){const r=new Set;let a=e;for(;a;){for(const c of Object.getOwnPropertyNames(a))c[0]!=="_"&&typeof e[c]=="function"&&c!=="fire"&&c!=="setEventedParent"&&r.add(c);a=Object.getPrototypeOf(a)}return Array.from(r)}const TA=typeof document!="undefined"?Lt.exports.useLayoutEffect:Lt.exports.useEffect,AA=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function CA(e,r){for(const a of AA)a in r&&(e[a]=r[a]);r.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r.RTLTextPlugin,a=>{a&&console.error(a)},!1)}const ju=Lt.exports.createContext(null),kA={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},uw=Lt.exports.forwardRef((e,r)=>{const a=Lt.exports.useContext(yA),[c,d]=Lt.exports.useState(null),_=Lt.exports.useRef(),{current:x}=Lt.exports.useRef({mapLib:null,map:null});Lt.exports.useEffect(()=>{const S=e.mapLib;let A=!0,z;return Promise.resolve(S||Promise.resolve().then(function(){return jA})).then(C=>{if(!!A){if(C.Map||(C=C.default),!C||!C.Map)throw new Error("Invalid mapLib");if(C.supported(e))CA(C,e),e.reuseMaps&&(z=Ou.reuse(e,_.current)),z||(z=new Ou(C.Map,e,_.current)),x.map=z.map,x.mapLib=C,d(z),a==null||a.onMapMount(kv(z,C),e.id);else throw new Error("Map is not supported by this browser")}}).catch(C=>{e.onError({type:"error",target:null,originalEvent:null,error:C})}),()=>{A=!1,z&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?z.recycle():z.destroy())}},[]),TA(()=>{c&&c.setProps(e)}),Lt.exports.useImperativeHandle(r,()=>kv(c,x.mapLib),[c]);const l=Lt.exports.useMemo(()=>Ei({position:"relative",width:"100%",height:"100%"},e.style),[e.style]);return Lt.exports.createElement("div",{id:e.id,ref:_,style:l},c&&Lt.exports.createElement(ju.Provider,{value:x},e.children))});uw.displayName="Map";uw.defaultProps=kA;const IA=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Sl(e,r){if(!e||!r)return;const a=e.style;for(const c in r){const d=r[c];Number.isFinite(d)&&!IA.test(c)?a[c]=`${d}px`:a[c]=d}}const PA={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function cw(e){const{map:r,mapLib:a}=Lt.exports.useContext(ju),c=Lt.exports.useRef({props:e});c.current.props=e;const d=Lt.exports.useMemo(()=>{let _=!1;Lt.exports.Children.forEach(e.children,S=>{S&&(_=!0)});const x=iu(Ei({},e),{element:_?document.createElement("div"):null}),l=new a.Marker(x).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",S=>{var A,z;(z=(A=c.current.props).onClick)==null||z.call(A,{type:"click",target:l,originalEvent:S})}),l.on("dragstart",S=>{var z,C;const A=S;A.lngLat=d.getLngLat(),(C=(z=c.current.props).onDragStart)==null||C.call(z,A)}),l.on("drag",S=>{var z,C;const A=S;A.lngLat=d.getLngLat(),(C=(z=c.current.props).onDrag)==null||C.call(z,A)}),l.on("dragend",S=>{var z,C;const A=S;A.lngLat=d.getLngLat(),(C=(z=c.current.props).onDragEnd)==null||C.call(z,A)}),l},[]);return Lt.exports.useEffect(()=>(d.addTo(r),()=>{d.remove()}),[]),Lt.exports.useEffect(()=>{Sl(d.getElement(),e.style)},[e.style]),(d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!vA(d.getOffset(),e.offset)&&d.setOffset(e.offset),d.isDraggable()!==e.draggable&&d.setDraggable(e.draggable),d.getRotation()!==e.rotation&&d.setRotation(e.rotation),d.getRotationAlignment()!==e.rotationAlignment&&d.setRotationAlignment(e.rotationAlignment),d.getPitchAlignment()!==e.pitchAlignment&&d.setPitchAlignment(e.pitchAlignment),d.getPopup()!==e.popup&&d.setPopup(e.popup),sd.exports.createPortal(e.children,d.getElement())}cw.defaultProps=PA;var TC=Lt.exports.memo(cw);function Iv(e){return new Set(e?e.trim().split(/\s+/):[])}function MA(e){const{map:r,mapLib:a}=Lt.exports.useContext(ju),c=Lt.exports.useMemo(()=>document.createElement("div"),[]),d=Lt.exports.useRef({props:e});d.current.props=e;const _=Lt.exports.useMemo(()=>{const x=Ei({},e),l=new a.Popup(x).setLngLat([e.longitude,e.latitude]);return l.on("open",S=>{var A,z;(z=(A=d.current.props).onOpen)==null||z.call(A,S)}),l.on("close",S=>{var A,z;(z=(A=d.current.props).onClose)==null||z.call(A,S)}),l},[]);if(Lt.exports.useEffect(()=>(_.setDOMContent(c).addTo(r),()=>{_.isOpen()&&_.remove()}),[]),Lt.exports.useEffect(()=>{Sl(_.getElement(),e.style)},[e.style]),_.isOpen()&&((_.getLngLat().lng!==e.longitude||_.getLngLat().lat!==e.latitude)&&_.setLngLat([e.longitude,e.latitude]),e.offset&&!io(_.options.offset,e.offset)&&_.setOffset(e.offset),(_.options.anchor!==e.anchor||_.options.maxWidth!==e.maxWidth)&&(_.options.anchor=e.anchor,_.setMaxWidth(e.maxWidth)),_.options.className!==e.className)){const x=Iv(_.options.className),l=Iv(e.className);for(const S of x)l.has(S)||_.removeClassName(S);for(const S of l)x.has(S)||_.addClassName(S);_.options.className=e.className}return sd.exports.createPortal(e.children,c)}Lt.exports.memo(MA);function bh(e,r,a){const c=Lt.exports.useContext(ju),d=Lt.exports.useMemo(()=>e(c),[]);return Lt.exports.useEffect(()=>{var x;const{map:_}=c;return _.hasControl(d)||_.addControl(d,(x=a||r)==null?void 0:x.position),()=>{typeof r=="function"&&r(c),_.hasControl(d)&&_.removeControl(d)}},[]),d}function zA(e){const r=bh(({mapLib:a})=>new a.AttributionControl(e),{position:e.position});return Lt.exports.useEffect(()=>{Sl(r._container,e.style)},[e.style]),null}Lt.exports.memo(zA);function LA(e){const r=bh(({mapLib:a})=>new a.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return Lt.exports.useEffect(()=>{Sl(r._controlContainer,e.style)},[e.style]),null}Lt.exports.memo(LA);const hw=Lt.exports.forwardRef((e,r)=>{const a=Lt.exports.useRef({props:e}),c=bh(({mapLib:d})=>{const _=new d.GeolocateControl(e);return _.on("geolocate",x=>{var l,S;(S=(l=a.current.props).onGeolocate)==null||S.call(l,x)}),_.on("error",x=>{var l,S;(S=(l=a.current.props).onError)==null||S.call(l,x)}),_.on("outofmaxbounds",x=>{var l,S;(S=(l=a.current.props).onOutOfMaxBounds)==null||S.call(l,x)}),_.on("trackuserlocationstart",x=>{var l,S;(S=(l=a.current.props).onTrackUserLocationStart)==null||S.call(l,x)}),_.on("trackuserlocationend",x=>{var l,S;(S=(l=a.current.props).onTrackUserLocationEnd)==null||S.call(l,x)}),_},{position:e.position});return a.current.props=e,Lt.exports.useImperativeHandle(r,()=>({trigger:()=>c.trigger()}),[]),Lt.exports.useEffect(()=>{Sl(c._container,e.style)},[e.style]),null});hw.displayName="GeolocateControl";var AC=Lt.exports.memo(hw);function OA(e){const r=bh(({mapLib:a})=>new a.NavigationControl(e),{position:e.position});return Lt.exports.useEffect(()=>{Sl(r._container,e.style)},[e.style]),null}Lt.exports.memo(OA);const RA={unit:"metric",maxWidth:100};function fw(e){const r=bh(({mapLib:a})=>new a.ScaleControl(e),{position:e.position});return(r.options.unit!==e.unit||r.options.maxWidth!==e.maxWidth)&&(r.options.maxWidth=e.maxWidth,r.setUnit(e.unit)),Lt.exports.useEffect(()=>{Sl(r._container,e.style)},[e.style]),null}fw.defaultProps=RA;Lt.exports.memo(fw);function od(e,r){if(!e)throw new Error(r)}let DA=0;function FA(e,r,a){if(e.style&&e.style._loaded){const c=Ei({},a);return delete c.id,delete c.children,e.addSource(r,c),e.getSource(r)}return null}function BA(e,r,a){od(r.id===a.id,"source id changed"),od(r.type===a.type,"source type changed");let c="",d=0;for(const x in r)x!=="children"&&x!=="id"&&!io(a[x],r[x])&&(c=x,d++);if(!d)return;const _=r.type;if(_==="geojson")e.setData(r.data);else if(_==="image")e.updateImage({url:r.url,coordinates:r.coordinates});else if((_==="canvas"||_==="video")&&d===1&&c==="coordinates")e.setCoordinates(r.coordinates);else if(_==="vector"&&"setUrl"in e)switch(c){case"url":e.setUrl(r.url);break;case"tiles":e.setTiles(r.tiles);break}else console.warn(`Unable to update <Source> prop: ${c}`)}function CC(e){const{map:r}=Lt.exports.useContext(ju),a=Lt.exports.useRef(e),[,c]=Lt.exports.useState(0),d=Lt.exports.useMemo(()=>e.id||`jsx-source-${DA++}`,[]);Lt.exports.useEffect(()=>{if(r){const x=()=>c(l=>l+1);return r.on("styledata",x),x(),()=>{r.off("styledata",x),setTimeout(()=>{r.style&&r.style._loaded&&r.getSource(d)&&r.removeSource(d)},0)}}},[r]);let _=r&&r.style&&r.getSource(d);return _?BA(_,e,a.current):_=FA(r,d,e),a.current=e,_&&Lt.exports.Children.map(e.children,x=>x&&Lt.exports.cloneElement(x,{source:d}))||null}function NA(e,r,a,c){if(od(a.id===c.id,"layer id changed"),od(a.type===c.type,"layer type changed"),a.type==="custom"||c.type==="custom")return;const{layout:d={},paint:_={},filter:x,minzoom:l,maxzoom:S,beforeId:A}=a;if(A!==c.beforeId&&e.moveLayer(r,A),d!==c.layout){const z=c.layout||{};for(const C in d)io(d[C],z[C])||e.setLayoutProperty(r,C,d[C]);for(const C in z)d.hasOwnProperty(C)||e.setLayoutProperty(r,C,void 0)}if(_!==c.paint){const z=c.paint||{};for(const C in _)io(_[C],z[C])||e.setPaintProperty(r,C,_[C]);for(const C in z)_.hasOwnProperty(C)||e.setPaintProperty(r,C,void 0)}io(x,c.filter)||e.setFilter(r,x),(l!==c.minzoom||S!==c.maxzoom)&&e.setLayerZoomRange(r,l,S)}function UA(e,r,a){if(e.style&&e.style._loaded&&e.getSource(a.source)){const c=iu(Ei({},a),{id:r});delete c.beforeId,e.addLayer(c,a.beforeId)}}let VA=0;function kC(e){const{map:r}=Lt.exports.useContext(ju),a=Lt.exports.useRef(e),[,c]=Lt.exports.useState(0),d=Lt.exports.useMemo(()=>e.id||`jsx-layer-${VA++}`,[]);if(Lt.exports.useEffect(()=>{if(r){const x=()=>c(l=>l+1);return r.on("styledata",x),x(),()=>{r.off("styledata",x),r.style&&r.style._loaded&&r.removeLayer(d)}}},[r]),r&&r.style&&r.getLayer(d))try{NA(r,d,e,a.current)}catch(x){console.warn(x)}else UA(r,d,e);return a.current=e,null}var cy={exports:{}};(function(e,r){(function(a,c){e.exports=c()})(su,function(){var a,c,d;function _(l,S){if(!a)a=S;else if(!c)c=S;else{var A="var sharedChunk = {}; ("+a+")(sharedChunk); ("+c+")(sharedChunk);",z={};a(z),d=S(z),typeof window!="undefined"&&(d.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}_(["exports"],function(l){var S=A;function A(i,t,o,u){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=o,this.p2y=u}function z(i,t,o,u){const f=new S(i,t,o,u);return function(g){return f.solve(g)}}A.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,u=0;u<8;u++){var f=this.sampleCurveX(o)-i;if(Math.abs(f)<t)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=f/g}var y=0,w=1;for(o=i,u=0;u<20&&(f=this.sampleCurveX(o),!(Math.abs(f-i)<t));u++)i>f?y=o:w=o,o=.5*(w-y)+y;return o},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};const C=z(.25,.1,.25,1);function P(i,t,o){return Math.min(o,Math.max(t,i))}function q(i,t,o){const u=o-t,f=((i-t)%u+u)%u+t;return f===t?o:f}function te(i,...t){for(const o of t)for(const u in o)i[u]=o[u];return i}let Z=1;function j(i,t){i.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function N(i,t,o){const u={};for(const f in i)u[f]=t.call(o||this,i[f],f,i);return u}function $(i,t,o){const u={};for(const f in i)t.call(o||this,i[f],f,i)&&(u[f]=i[f]);return u}function G(i){return Array.isArray(i)?i.map(G):typeof i=="object"&&i?N(i,G):i}const J={};function me(i){J[i]||(typeof console!="undefined"&&console.warn(i),J[i]=!0)}function H(i,t,o){return(o.y-i.y)*(t.x-i.x)>(t.y-i.y)*(o.x-i.x)}function se(i){let t=0;for(let o,u,f=0,g=i.length,y=g-1;f<g;y=f++)o=i[f],u=i[y],t+=(u.x-o.x)*(o.y+u.y);return t}function ne(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Te(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,f,g)=>{const y=f||g;return t[u]=!y||y.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let Ce,Pe,Ze=null;function rt(i){if(Ze==null){const t=i.navigator?i.navigator.userAgent:null;Ze=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ze}function ft(i){return typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap}const dt={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const t=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(i,t=0){const o=window.document.createElement("canvas"),u=o.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return o.width=i.width,o.height=i.height,u.drawImage(i,0,0,i.width,i.height),u.getImageData(-t,-t,i.width+2*t,i.height+2*t)},resolveURL:i=>(Ce||(Ce=document.createElement("a")),Ce.href=i,Ce.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Pe==null&&(Pe=matchMedia("(prefers-reduced-motion: reduce)")),Pe.matches)}};var Ue=yt;function yt(i,t){this.x=i,this.y=t}yt.prototype={clone:function(){return new yt(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,o=i.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),o=Math.sin(i),u=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=u,this},_rotateAround:function(i,t){var o=Math.cos(i),u=Math.sin(i),f=t.y+u*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-u*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},yt.convert=function(i){return i instanceof yt?i:Array.isArray(i)?new yt(i[0],i[1]):i};const rn={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},vn="mapbox-tiles";let Sn,Ye,mt=500,At=50;function xt(){typeof caches=="undefined"||Sn||(Sn=caches.open(vn))}let wt=1/0;const Xt={supported:!1,testSupport:function(i){!xn&&un&&(Tn?Gt(i):yn=i)}};let yn,un,xn=!1,Tn=!1;function Gt(i){const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,un),i.isContextLost())return;Xt.supported=!0}catch{}i.deleteTexture(t),xn=!0}typeof document!="undefined"&&(un=document.createElement("img"),un.onload=function(){yn&&Gt(yn),yn=null,Tn=!0},un.onerror=function(){xn=!0,yn=null},un.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Qt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qt);class hr extends Error{constructor(t,o,u,f){super(`AJAXError: ${o} (${t}): ${u}`),this.status=t,this.statusText=o,this.url=u,this.body=f}}const rr=ne()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ir(i,t){const o=new AbortController,u=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:rr(),signal:o.signal});let f=!1,g=!1;return i.type==="json"&&u.headers.set("Accept","application/json"),((y,w,E)=>{if(g)return;const M=Date.now();fetch(u).then(B=>B.ok?((U,W,K)=>{(i.type==="arrayBuffer"?U.arrayBuffer():i.type==="json"?U.json():U.text()).then(ee=>{g||(W&&K&&function(de,ge,Se){if(xt(),!Sn)return;const Le={status:ge.status,statusText:ge.statusText,headers:new Headers};ge.headers.forEach((Fe,We)=>Le.headers.set(We,Fe));const Me=Te(ge.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&Le.headers.set("Expires",new Date(Se+1e3*Me["max-age"]).toUTCString()),new Date(Le.headers.get("Expires")).getTime()-Se<42e4||function(Fe,We){if(Ye===void 0)try{new Response(new ReadableStream),Ye=!0}catch{Ye=!1}Ye?We(Fe.body):Fe.blob().then(We)}(ge,Fe=>{const We=new Response(Fe,Le);xt(),Sn&&Sn.then(Ve=>Ve.put(function(pt){const It=pt.indexOf("?");return It<0?pt:pt.slice(0,It)}(de.url),We)).catch(Ve=>me(Ve.message))}))}(u,W,K),f=!0,t(null,ee,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(ee=>{g||t(new Error(ee.message))})})(B,null,M):B.blob().then(U=>t(new hr(B.status,B.statusText,i.url,U)))).catch(B=>{B.code!==20&&t(new Error(B.message))})})(),{cancel:()=>{g=!0,f||o.abort()}}}const Mr=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t);if(!ne()){const u=i.url.substring(0,i.url.indexOf("://"));return(rn.REGISTERED_PROTOCOLS[u]||ir)(i,t)}}if(!(/^file:/.test(o=i.url)||/^file:/.test(rr())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ir(i,t);if(ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t,void 0,!0)}var o;return function(u,f){const g=new XMLHttpRequest;g.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const y in u.headers)g.setRequestHeader(y,u.headers[y]);return u.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=u.credentials==="include",g.onerror=()=>{f(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let y=g.response;if(u.type==="json")try{y=JSON.parse(g.response)}catch(w){return f(w)}f(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else{const y=new Blob([g.response],{type:g.getResponseHeader("Content-Type")});f(new hr(g.status,g.statusText,u.url,y))}},g.send(u.body),{cancel:()=>g.abort()}}(i,t)},Vn=function(i,t){return Mr(te(i,{type:"arrayBuffer"}),t)};function Hn(i){const t=window.document.createElement("a");return t.href=i,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const Br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ie,O;ie=[],O=0;const D=function(i,t){if(Xt.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),O>=rn.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:i,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ie.push(g),g}O++;let o=!1;const u=()=>{if(!o)for(o=!0,O--;ie.length&&O<rn.MAX_PARALLEL_IMAGE_REQUESTS;){const g=ie.shift(),{requestParameters:y,callback:w,cancelled:E}=g;E||(g.cancel=D(y,w).cancel)}},f=Vn(i,(g,y,w,E)=>{u(),g?t(g):y&&function(M,B,U,W){typeof createImageBitmap=="function"?function(K,ee){const de=new Blob([new Uint8Array(K)],{type:"image/png"});createImageBitmap(de).then(ge=>{ee(null,ge)}).catch(ge=>{ee(new Error(`Could not load image because of ${ge.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(M,B):function(K,ee,de,ge){const Se=new Image;Se.onload=()=>{ee(null,Se),URL.revokeObjectURL(Se.src),Se.onload=null,window.requestAnimationFrame(()=>{Se.src=Br})},Se.onerror=()=>ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Le=new Blob([new Uint8Array(K)],{type:"image/png"});Se.cacheControl=de,Se.expires=ge,Se.src=K.byteLength?URL.createObjectURL(Le):Br}(M,B,U,W)}(y,t,w,E)});return{cancel:()=>{f.cancel(),u()}}};function ue(i,t,o){o[i]&&o[i].indexOf(t)!==-1||(o[i]=o[i]||[],o[i].push(t))}function Ee(i,t,o){if(o&&o[i]){const u=o[i].indexOf(t);u!==-1&&o[i].splice(u,1)}}class qe{constructor(t,o={}){te(this,o),this.type=t}}class Xe extends qe{constructor(t,o={}){super("error",te({error:t},o))}}class Dt{on(t,o){return this._listeners=this._listeners||{},ue(t,o,this._listeners),this}off(t,o){return Ee(t,o,this._listeners),Ee(t,o,this._oneTimeListeners),this}once(t,o){return this._oneTimeListeners=this._oneTimeListeners||{},ue(t,o,this._oneTimeListeners),this}fire(t,o){typeof t=="string"&&(t=new qe(t,o||{}));const u=t.type;if(this.listens(u)){t.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const w of f)w.call(this,t);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const w of g)Ee(u,w,this._oneTimeListeners),w.call(this,t);const y=this._eventedParent;y&&(te(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(t))}else t instanceof Xe&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ge{constructor(t,o,u,f){this.message=(t?`${t}: `:"")+u,f&&(this.identifier=f),o!=null&&o.__line__&&(this.line=o.__line__)}}function wn(i){const t=i.value;return t?[new Ge(i.key,t,"constants have been deprecated as of v8")]:[]}function en(i,...t){for(const o of t)for(const u in o)i[u]=o[u];return i}function ln(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Mn(i){if(Array.isArray(i))return i.map(Mn);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const o in i)t[o]=Mn(i[o]);return t}return ln(i)}class Ln extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class Wr{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[u,f]of o)this.bindings[u]=f}concat(t){return new Wr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Yn={kind:"null"},et={kind:"number"},Zt={kind:"string"},Nt={kind:"boolean"},Sr={kind:"color"},Xr={kind:"object"},Ut={kind:"value"},or={kind:"collator"},ki={kind:"formatted"},fr={kind:"resolvedImage"};function Cr(i,t){return{kind:"array",itemType:i,N:t}}function cn(i){if(i.kind==="array"){const t=cn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const Qo=[Yn,et,Zt,Nt,Sr,ki,Xr,Cr(Ut),fr];function lr(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!lr(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const o of Qo)if(!lr(o,t))return null}}return`Expected ${cn(i)} but found ${cn(t)} instead.`}function Vi(i,t){return t.some(o=>o.kind===i.kind)}function $n(i,t){return t.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var Ii,$i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ji(i){return(i=Math.round(i))<0?0:i>255?255:i}function Mo(i){return ji(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function ae(i){return(t=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:t>1?1:t;var t}function L(i,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(t-i)*o*6:2*o<1?t:3*o<2?i+(t-i)*(2/3-o)*6:i}try{Ii={}.parseCSSColor=function(i){var t,o=i.replace(/ /g,"").toLowerCase();if(o in $i)return $i[o].slice();if(o[0]==="#")return o.length===4?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:o.length===7&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=o.indexOf("("),f=o.indexOf(")");if(u!==-1&&f+1===o.length){var g=o.substr(0,u),y=o.substr(u+1,f-(u+1)).split(","),w=1;switch(g){case"rgba":if(y.length!==4)return null;w=ae(y.pop());case"rgb":return y.length!==3?null:[Mo(y[0]),Mo(y[1]),Mo(y[2]),w];case"hsla":if(y.length!==4)return null;w=ae(y.pop());case"hsl":if(y.length!==3)return null;var E=(parseFloat(y[0])%360+360)%360/360,M=ae(y[1]),B=ae(y[2]),U=B<=.5?B*(M+1):B+M-B*M,W=2*B-U;return[ji(255*L(W,U,E+1/3)),ji(255*L(W,U,E)),ji(255*L(W,U,E-1/3)),w];default:return null}}return null}}catch{}class F{constructor(t,o,u,f=1){this.r=t,this.g=o,this.b=u,this.a=f}static parse(t){if(!t)return;if(t instanceof F)return t;if(typeof t!="string")return;const o=Ii(t);return o?new F(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,u,f]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(u)},${f})`}toArray(){const{r:t,g:o,b:u,a:f}=this;return f===0?[0,0,0,0]:[255*t/f,255*o/f,255*u/f,f]}}F.black=new F(0,0,0,1),F.white=new F(1,1,1,1),F.transparent=new F(0,0,0,0),F.red=new F(1,0,0,1);class Q{constructor(t,o,u){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class le{constructor(t,o,u,f,g){this.text=t,this.image=o,this.scale=u,this.fontStack=f,this.textColor=g}}class ce{constructor(t){this.sections=t}static fromString(t){return new ce([new le(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ce?t:ce.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const o of this.sections){if(o.image){t.push(["image",o.image.name]);continue}t.push(o.text);const u={};o.fontStack&&(u["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(u["font-scale"]=o.scale),o.textColor&&(u["text-color"]=["rgba"].concat(o.textColor.toArray())),t.push(u)}return t}}class xe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new xe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function ye(i,t,o,u){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,t,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,t,o,u]:[i,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _e(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof F||i instanceof Q||i instanceof ce||i instanceof xe)return!0;if(Array.isArray(i)){for(const t of i)if(!_e(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!_e(i[t]))return!1;return!0}return!1}function we(i){if(i===null)return Yn;if(typeof i=="string")return Zt;if(typeof i=="boolean")return Nt;if(typeof i=="number")return et;if(i instanceof F)return Sr;if(i instanceof Q)return or;if(i instanceof ce)return ki;if(i instanceof xe)return fr;if(Array.isArray(i)){const t=i.length;let o;for(const u of i){const f=we(u);if(o){if(o===f)continue;o=Ut;break}o=f}return Cr(o||Ut,t)}return Xr}function De(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof F||i instanceof ce||i instanceof xe?i.toString():JSON.stringify(i)}class $e{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!_e(t[1]))return o.error("invalid value");const u=t[1];let f=we(u);const g=o.expectedType;return f.kind!=="array"||f.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(f=g),new $e(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof F?["rgba"].concat(this.value.toArray()):this.value instanceof ce?this.value.serialize():this.value}}class Re{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const bt={string:Zt,number:et,boolean:Nt,object:Xr};class ot{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let u,f=1;const g=t[0];if(g==="array"){let w,E;if(t.length>2){const M=t[1];if(typeof M!="string"||!(M in bt)||M==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);w=bt[M],f++}else w=Ut;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=t[2],f++}u=Cr(w,E)}else u=bt[g];const y=[];for(;f<t.length;f++){const w=o.parse(t[f],f,Ut);if(!w)return null;y.push(w)}return new ot(u,y)}evaluate(t){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(t);if(!lr(this.type,we(u)))return u;if(o===this.args.length-1)throw new Re(`Expected value to be of type ${cn(this.type)}, but found ${cn(we(u))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,o=[t.kind];if(t.kind==="array"){const u=t.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){o.push(u.kind);const f=t.N;(typeof f=="number"||this.args.length>1)&&o.push(f)}}return o.concat(this.args.map(u=>u.serialize()))}}class _t{constructor(t){this.type=ki,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const f=[];let g=!1;for(let y=1;y<=t.length-1;++y){const w=t[y];if(g&&typeof w=="object"&&!Array.isArray(w)){g=!1;let E=null;if(w["font-scale"]&&(E=o.parse(w["font-scale"],1,et),!E))return null;let M=null;if(w["text-font"]&&(M=o.parse(w["text-font"],1,Cr(Zt)),!M))return null;let B=null;if(w["text-color"]&&(B=o.parse(w["text-color"],1,Sr),!B))return null;const U=f[f.length-1];U.scale=E,U.font=M,U.textColor=B}else{const E=o.parse(t[y],1,Ut);if(!E)return null;const M=E.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new _t(f)}evaluate(t){return new ce(this.sections.map(o=>{const u=o.content.evaluate(t);return we(u)===fr?new le("",u,null,null,null):new le(De(u),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const o of this.sections){t.push(o.content.serialize());const u={};o.scale&&(u["font-scale"]=o.scale.serialize()),o.font&&(u["text-font"]=o.font.serialize()),o.textColor&&(u["text-color"]=o.textColor.serialize()),t.push(u)}return t}}class zt{constructor(t){this.type=fr,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const u=o.parse(t[1],1,Zt);return u?new zt(u):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),u=xe.fromString(o);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(o)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const vt={"to-boolean":Nt,"to-color":Sr,"to-number":et,"to-string":Zt};class jt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[0];if((u==="to-boolean"||u==="to-string")&&t.length!==2)return o.error("Expected one argument.");const f=vt[u],g=[];for(let y=1;y<t.length;y++){const w=o.parse(t[y],y,Ut);if(!w)return null;g.push(w)}return new jt(f,g)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let o,u;for(const f of this.args){if(o=f.evaluate(t),u=null,o instanceof F)return o;if(typeof o=="string"){const g=t.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:ye(o[0],o[1],o[2],o[3]),!u))return new F(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Re(u||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const u of this.args){if(o=u.evaluate(t),o===null)return 0;const f=Number(o);if(!isNaN(f))return f}throw new Re(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?ce.fromString(De(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?xe.fromString(De(this.args[0].evaluate(t))):De(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new _t([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new zt(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Yt=["Unknown","Point","LineString","Polygon"];class qt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=F.parse(t)),o}}class Wt{constructor(t,o,u,f){this.name=t,this.type=o,this._evaluate=u,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,o){const u=t[0],f=Wt.definitions[u];if(!f)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(f)?f[0]:f.type,y=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=y.filter(([M])=>!Array.isArray(M)||M.length===t.length-1);let E=null;for(const[M,B]of w){E=new Ra(o.registry,o.path,null,o.scope);const U=[];let W=!1;for(let K=1;K<t.length;K++){const ee=t[K],de=Array.isArray(M)?M[K-1]:M.type,ge=E.parse(ee,1+U.length,de);if(!ge){W=!0;break}U.push(ge)}if(!W)if(Array.isArray(M)&&M.length!==U.length)E.error(`Expected ${M.length} arguments, but found ${U.length} instead.`);else{for(let K=0;K<U.length;K++){const ee=Array.isArray(M)?M[K]:M.type,de=U[K];E.concat(K+1).checkSubtype(ee,de.type)}if(E.errors.length===0)return new Wt(u,g,B,U)}}if(w.length===1)o.errors.push(...E.errors);else{const M=(w.length?w:y).map(([U])=>{return W=U,Array.isArray(W)?`(${W.map(cn).join(", ")})`:`(${cn(W.type)}...)`;var W}).join(" | "),B=[];for(let U=1;U<t.length;U++){const W=o.parse(t[U],1+B.length);if(!W)return null;B.push(cn(W.type))}o.error(`Expected arguments of type ${M}, but found (${B.join(", ")}) instead.`)}return null}static register(t,o){Wt.definitions=o;for(const u in o)t[u]=Wt}}class zn{constructor(t,o,u){this.type=or,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const f=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Nt);if(!f)return null;const g=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Nt);if(!g)return null;let y=null;return u.locale&&(y=o.parse(u.locale,1,Zt),!y)?null:new zn(f,g,y)}evaluate(t){return new Q(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const jn=8192;function kn(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function Gi(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function xi(i,t){const o=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(o*f*jn),Math.round(u*f*jn)]}function Ts(i,t,o){const u=i[0]-t[0],f=i[1]-t[1],g=i[0]-o[0],y=i[1]-o[1];return u*y-g*f==0&&u*g<=0&&f*y<=0}function ea(i,t){let o=!1;for(let y=0,w=t.length;y<w;y++){const E=t[y];for(let M=0,B=E.length;M<B-1;M++){if(Ts(i,E[M],E[M+1]))return!1;(f=E[M])[1]>(u=i)[1]!=(g=E[M+1])[1]>u[1]&&u[0]<(g[0]-f[0])*(u[1]-f[1])/(g[1]-f[1])+f[0]&&(o=!o)}}var u,f,g;return o}function In(i,t){for(let o=0;o<t.length;o++)if(ea(i,t[o]))return!0;return!1}function wi(i,t,o,u){const f=u[0]-o[0],g=u[1]-o[1],y=(i[0]-o[0])*g-f*(i[1]-o[1]),w=(t[0]-o[0])*g-f*(t[1]-o[1]);return y>0&&w<0||y<0&&w>0}function Tl(i,t,o){for(const M of o)for(let B=0;B<M.length-1;++B)if((w=[(y=M[B+1])[0]-(g=M[B])[0],y[1]-g[1]])[0]*(E=[(f=t)[0]-(u=i)[0],f[1]-u[1]])[1]-w[1]*E[0]!=0&&wi(u,f,g,y)&&wi(g,y,u,f))return!0;var u,f,g,y,w,E;return!1}function Al(i,t){for(let o=0;o<i.length;++o)if(!ea(i[o],t))return!1;for(let o=0;o<i.length-1;++o)if(Tl(i[o],i[o+1],t))return!1;return!0}function Cl(i,t){for(let o=0;o<t.length;o++)if(Al(i,t[o]))return!0;return!1}function La(i,t,o){const u=[];for(let f=0;f<i.length;f++){const g=[];for(let y=0;y<i[f].length;y++){const w=xi(i[f][y],o);kn(t,w),g.push(w)}u.push(g)}return u}function kl(i,t,o){const u=[];for(let f=0;f<i.length;f++){const g=La(i[f],t,o);u.push(g)}return u}function zo(i,t,o,u){if(i[0]<o[0]||i[0]>o[2]){const f=.5*u;let g=i[0]-o[0]>f?-u:o[0]-i[0]>f?u:0;g===0&&(g=i[0]-o[2]>f?-u:o[2]-i[0]>f?u:0),i[0]+=g}kn(t,i)}function As(i,t,o,u){const f=Math.pow(2,u.z)*jn,g=[u.x*jn,u.y*jn],y=[];for(const w of i)for(const E of w){const M=[E.x+g[0],E.y+g[1]];zo(M,t,o,f),y.push(M)}return y}function Il(i,t,o,u){const f=Math.pow(2,u.z)*jn,g=[u.x*jn,u.y*jn],y=[];for(const E of i){const M=[];for(const B of E){const U=[B.x+g[0],B.y+g[1]];kn(t,U),M.push(U)}y.push(M)}if(t[2]-t[0]<=f/2){(w=t)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const E of y)for(const M of E)zo(M,t,o,f)}var w;return y}class vr{constructor(t,o){this.type=Nt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(_e(t[1])){const u=t[1];if(u.type==="FeatureCollection")for(let f=0;f<u.features.length;++f){const g=u.features[f].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new vr(u,u.features[f].geometry)}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new vr(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new vr(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,u){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(u.type==="Polygon"){const w=La(u.coordinates,g,y),E=As(o.geometry(),f,g,y);if(!Gi(f,g))return!1;for(const M of E)if(!ea(M,w))return!1}if(u.type==="MultiPolygon"){const w=kl(u.coordinates,g,y),E=As(o.geometry(),f,g,y);if(!Gi(f,g))return!1;for(const M of E)if(!In(M,w))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,u){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(u.type==="Polygon"){const w=La(u.coordinates,g,y),E=Il(o.geometry(),f,g,y);if(!Gi(f,g))return!1;for(const M of E)if(!Al(M,w))return!1}if(u.type==="MultiPolygon"){const w=kl(u.coordinates,g,y),E=Il(o.geometry(),f,g,y);if(!Gi(f,g))return!1;for(const M of E)if(!Cl(M,w))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Oa(i){if(i instanceof Wt&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof vr)return!1;let t=!0;return i.eachChild(o=>{t&&!Oa(o)&&(t=!1)}),t}function ta(i){if(i instanceof Wt&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(o=>{t&&!ta(o)&&(t=!1)}),t}function na(i,t){if(i instanceof Wt&&t.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(u=>{o&&!na(u,t)&&(o=!1)}),o}class ra{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=t[1];return o.scope.has(u)?new ra(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ra{constructor(t,o=[],u,f=new Wr,g=[]){this.registry=t,this.path=o,this.key=o.map(y=>`[${y}]`).join(""),this.scope=f,this.errors=g,this.expectedType=u}parse(t,o,u,f,g={}){return o?this.concat(o,u,f)._parse(t,g):this._parse(t,g)}_parse(t,o){function u(f,g,y){return y==="assert"?new ot(g,[f]):y==="coerce"?new jt(g,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[f];if(g){let y=g.parse(t,this);if(!y)return null;if(this.expectedType){const w=this.expectedType,E=y.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||E.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(w,E))return null}else y=u(y,w,o.typeAnnotation||"coerce");else y=u(y,w,o.typeAnnotation||"assert")}if(!(y instanceof $e)&&y.type.kind!=="resolvedImage"&&Da(y)){const w=new qt;try{y=new $e(y.type,y.evaluate(w))}catch(E){return this.error(E.message),null}}return y}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,u){const f=typeof t=="number"?this.path.concat(t):this.path,g=u?this.scope.concat(u):this.scope;return new Ra(this.registry,f,o||null,g,this.errors)}error(t,...o){const u=`${this.key}${o.map(f=>`[${f}]`).join("")}`;this.errors.push(new Ln(u,t))}checkSubtype(t,o){const u=lr(t,o);return u&&this.error(u),u}}function Da(i){if(i instanceof ra)return Da(i.boundExpression);if(i instanceof Wt&&i.name==="error"||i instanceof zn||i instanceof vr)return!1;const t=i instanceof jt||i instanceof ot;let o=!0;return i.eachChild(u=>{o=t?o&&Da(u):o&&u instanceof $e}),!!o&&Oa(i)&&na(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Zi(i,t){const o=i.length-1;let u,f,g=0,y=o,w=0;for(;g<=y;)if(w=Math.floor((g+y)/2),u=i[w],f=i[w+1],u<=t){if(w===o||t<f)return w;g=w+1}else{if(!(u>t))throw new Re("Input is not a number.");y=w-1}return 0}class Lo{constructor(t,o,u){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[f,g]of u)this.labels.push(f),this.outputs.push(g)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(t[1],1,et);if(!u)return null;const f=[];let g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let y=1;y<t.length;y+=2){const w=y===1?-1/0:t[y],E=t[y+1],M=y,B=y+1;if(typeof w!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(f.length&&f[f.length-1][0]>=w)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const U=o.parse(E,B,g);if(!U)return null;g=g||U.type,f.push([w,U])}return new Lo(g,u,f)}evaluate(t){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(t);const f=this.input.evaluate(t);if(f<=o[0])return u[0].evaluate(t);const g=o.length;return f>=o[g-1]?u[g-1].evaluate(t):u[Zi(o,f)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&t.push(this.labels[o]),t.push(this.outputs[o].serialize());return t}}function On(i,t,o){return i*(1-o)+t*o}var Fa=Object.freeze({__proto__:null,number:On,color:function(i,t,o){return new F(On(i.r,t.r,o),On(i.g,t.g,o),On(i.b,t.b,o),On(i.a,t.a,o))},array:function(i,t,o){return i.map((u,f)=>On(u,t[f],o))}});const qi=.95047,Cs=1.08883,Pl=4/29,ks=6/29,Is=3*ks*ks,Ps=Math.PI/180,Gu=180/Math.PI;function Ms(i){return i>.008856451679035631?Math.pow(i,1/3):i/Is+Pl}function zs(i){return i>ks?i*i*i:Is*(i-Pl)}function ia(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Ls(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Ml(i){const t=Ls(i.r),o=Ls(i.g),u=Ls(i.b),f=Ms((.4124564*t+.3575761*o+.1804375*u)/qi),g=Ms((.2126729*t+.7151522*o+.072175*u)/1);return{l:116*g-16,a:500*(f-g),b:200*(g-Ms((.0193339*t+.119192*o+.9503041*u)/Cs)),alpha:i.a}}function zl(i){let t=(i.l+16)/116,o=isNaN(i.a)?t:t+i.a/500,u=isNaN(i.b)?t:t-i.b/200;return t=1*zs(t),o=qi*zs(o),u=Cs*zs(u),new F(ia(3.2404542*o-1.5371385*t-.4985314*u),ia(-.969266*o+1.8760108*t+.041556*u),ia(.0556434*o-.2040259*t+1.0572252*u),i.alpha)}function hn(i,t,o){const u=t-i;return i+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const Oo={forward:Ml,reverse:zl,interpolate:function(i,t,o){return{l:On(i.l,t.l,o),a:On(i.a,t.a,o),b:On(i.b,t.b,o),alpha:On(i.alpha,t.alpha,o)}}},oa={forward:function(i){const{l:t,a:o,b:u}=Ml(i),f=Math.atan2(u,o)*Gu;return{h:f<0?f+360:f,c:Math.sqrt(o*o+u*u),l:t,alpha:i.a}},reverse:function(i){const t=i.h*Ps,o=i.c;return zl({l:i.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:i.alpha})},interpolate:function(i,t,o){return{h:hn(i.h,t.h,o),c:On(i.c,t.c,o),l:On(i.l,t.l,o),alpha:On(i.alpha,t.alpha,o)}}};var Os=Object.freeze({__proto__:null,lab:Oo,hcl:oa});class Nr{constructor(t,o,u,f,g){this.type=t,this.operator=o,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[y,w]of g)this.labels.push(y),this.outputs.push(w)}static interpolationFactor(t,o,u,f){let g=0;if(t.name==="exponential")g=Rs(o,t.base,u,f);else if(t.name==="linear")g=Rs(o,1,u,f);else if(t.name==="cubic-bezier"){const y=t.controlPoints;g=new S(y[0],y[1],y[2],y[3]).solve(Rs(o,1,u,f))}return g}static parse(t,o){let[u,f,g,...y]=t;if(!Array.isArray(f)||f.length===0)return o.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const M=f[1];if(typeof M!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:M}}else{if(f[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const M=f.slice(1);if(M.length!==4||M.some(B=>typeof B!="number"||B<0||B>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:M}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,et),!g)return null;const w=[];let E=null;u==="interpolate-hcl"||u==="interpolate-lab"?E=Sr:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let M=0;M<y.length;M+=2){const B=y[M],U=y[M+1],W=M+3,K=M+4;if(typeof B!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(w.length&&w[w.length-1][0]>=B)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const ee=o.parse(U,K,E);if(!ee)return null;E=E||ee.type,w.push([B,ee])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Nr(E,u,f,g,w):o.error(`Type ${cn(E)} is not interpolatable.`)}evaluate(t){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(t);const f=this.input.evaluate(t);if(f<=o[0])return u[0].evaluate(t);const g=o.length;if(f>=o[g-1])return u[g-1].evaluate(t);const y=Zi(o,f),w=Nr.interpolationFactor(this.interpolation,f,o[y],o[y+1]),E=u[y].evaluate(t),M=u[y+1].evaluate(t);return this.operator==="interpolate"?Fa[this.type.kind.toLowerCase()](E,M,w):this.operator==="interpolate-hcl"?oa.reverse(oa.interpolate(oa.forward(E),oa.forward(M),w)):Oo.reverse(Oo.interpolate(Oo.forward(E),Oo.forward(M),w))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,t,this.input.serialize()];for(let u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o}}function Rs(i,t,o,u){const f=u-o,g=i-o;return f===0?0:t===1?g/f:(Math.pow(t,g)-1)/(Math.pow(t,f)-1)}class aa{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let u=null;const f=o.expectedType;f&&f.kind!=="value"&&(u=f);const g=[];for(const w of t.slice(1)){const E=o.parse(w,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!E)return null;u=u||E.type,g.push(E)}const y=f&&g.some(w=>lr(f,w.type));return new aa(y?Ut:u,g)}evaluate(t){let o,u=null,f=0;for(const g of this.args)if(f++,u=g.evaluate(t),u&&u instanceof xe&&!u.available&&(o||(o=u.name),u=null,f===this.args.length&&(u=o)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class Ba{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let g=1;g<t.length-1;g+=2){const y=t[g];if(typeof y!="string")return o.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);const w=o.parse(t[g+1],g+1);if(!w)return null;u.push([y,w])}const f=o.parse(t[t.length-1],t.length-1,o.expectedType,u);return f?new Ba(u,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[o,u]of this.bindings)t.push(o,u.serialize());return t.push(this.result.serialize()),t}}class Ds{constructor(t,o,u){this.type=t,this.index=o,this.input=u}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,et),f=o.parse(t[2],2,Cr(o.expectedType||Ut));return u&&f?new Ds(f.type.itemType,u,f):null}evaluate(t){const o=this.index.evaluate(t),u=this.input.evaluate(t);if(o<0)throw new Re(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new Re(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new Re(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Fs{constructor(t,o){this.type=Nt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Ut),f=o.parse(t[2],2,Ut);return u&&f?Vi(u.type,[Nt,Zt,et,Yn,Ut])?new Fs(u,f):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${cn(u.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!$n(o,["boolean","string","number","null"]))throw new Re(`Expected first argument to be of type boolean, string, number or null, but found ${cn(we(o))} instead.`);if(!$n(u,["string","array"]))throw new Re(`Expected second argument to be of type array or string, but found ${cn(we(u))} instead.`);return u.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Na{constructor(t,o,u){this.type=et,this.needle=t,this.haystack=o,this.fromIndex=u}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Ut),f=o.parse(t[2],2,Ut);if(!u||!f)return null;if(!Vi(u.type,[Nt,Zt,et,Yn,Ut]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${cn(u.type)} instead`);if(t.length===4){const g=o.parse(t[3],3,et);return g?new Na(u,f,g):null}return new Na(u,f)}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!$n(o,["boolean","string","number","null"]))throw new Re(`Expected first argument to be of type boolean, string, number or null, but found ${cn(we(o))} instead.`);if(!$n(u,["string","array"]))throw new Re(`Expected second argument to be of type array or string, but found ${cn(we(u))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(t);return u.indexOf(o,f)}return u.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ua{constructor(t,o,u,f,g,y){this.inputType=t,this.type=o,this.input=u,this.cases=f,this.outputs=g,this.otherwise=y}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let u,f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);const g={},y=[];for(let M=2;M<t.length-1;M+=2){let B=t[M];const U=t[M+1];Array.isArray(B)||(B=[B]);const W=o.concat(M);if(B.length===0)return W.error("Expected at least one branch label.");for(const ee of B){if(typeof ee!="number"&&typeof ee!="string")return W.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return W.error("Numeric branch labels must be integer values.");if(u){if(W.checkSubtype(u,we(ee)))return null}else u=we(ee);if(g[String(ee)]!==void 0)return W.error("Branch labels must be unique.");g[String(ee)]=y.length}const K=o.parse(U,M,f);if(!K)return null;f=f||K.type,y.push(K)}const w=o.parse(t[1],1,Ut);if(!w)return null;const E=o.parse(t[t.length-1],t.length-1,f);return E?w.type.kind!=="value"&&o.concat(1).checkSubtype(u,w.type)?null:new Ua(u,f,w,g,y,E):null}evaluate(t){const o=this.input.evaluate(t);return(we(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),u=[],f={};for(const y of o){const w=f[this.cases[y]];w===void 0?(f[this.cases[y]]=u.length,u.push([this.cases[y],[y]])):u[w][1].push(y)}const g=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,w]of u)t.push(w.length===1?g(w[0]):w.map(g)),t.push(this.outputs[y].serialize());return t.push(this.otherwise.serialize()),t}}class Bs{constructor(t,o,u){this.type=t,this.branches=o,this.otherwise=u}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const f=[];for(let y=1;y<t.length-1;y+=2){const w=o.parse(t[y],y,Nt);if(!w)return null;const E=o.parse(t[y+1],y+1,u);if(!E)return null;f.push([w,E]),u=u||E.type}const g=o.parse(t[t.length-1],t.length-1,u);return g?new Bs(u,f,g):null}evaluate(t){for(const[o,u]of this.branches)if(o.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,u]of this.branches)t(o),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class Ro{constructor(t,o,u,f){this.type=t,this.input=o,this.beginIndex=u,this.endIndex=f}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Ut),f=o.parse(t[2],2,et);if(!u||!f)return null;if(!Vi(u.type,[Cr(Ut),Zt,Ut]))return o.error(`Expected first argument to be of type array or string, but found ${cn(u.type)} instead`);if(t.length===4){const g=o.parse(t[3],3,et);return g?new Ro(u.type,u,f,g):null}return new Ro(u.type,u,f)}evaluate(t){const o=this.input.evaluate(t),u=this.beginIndex.evaluate(t);if(!$n(o,["string","array"]))throw new Re(`Expected first argument to be of type array or string, but found ${cn(we(o))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(t);return o.slice(u,f)}return o.slice(u)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ll(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Ol(i,t,o,u){return u.compare(t,o)===0}function Do(i,t,o){const u=i!=="=="&&i!=="!=";return class dw{constructor(g,y,w){this.type=Nt,this.lhs=g,this.rhs=y,this.collator=w,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");const w=g[0];let E=y.parse(g[1],1,Ut);if(!E)return null;if(!Ll(w,E.type))return y.concat(1).error(`"${w}" comparisons are not supported for type '${cn(E.type)}'.`);let M=y.parse(g[2],2,Ut);if(!M)return null;if(!Ll(w,M.type))return y.concat(2).error(`"${w}" comparisons are not supported for type '${cn(M.type)}'.`);if(E.type.kind!==M.type.kind&&E.type.kind!=="value"&&M.type.kind!=="value")return y.error(`Cannot compare types '${cn(E.type)}' and '${cn(M.type)}'.`);u&&(E.type.kind==="value"&&M.type.kind!=="value"?E=new ot(M.type,[E]):E.type.kind!=="value"&&M.type.kind==="value"&&(M=new ot(E.type,[M])));let B=null;if(g.length===4){if(E.type.kind!=="string"&&M.type.kind!=="string"&&E.type.kind!=="value"&&M.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(B=y.parse(g[3],3,or),!B)return null}return new dw(E,M,B)}evaluate(g){const y=this.lhs.evaluate(g),w=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const E=we(y),M=we(w);if(E.kind!==M.kind||E.kind!=="string"&&E.kind!=="number")throw new Re(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${E.kind}, ${M.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const E=we(y),M=we(w);if(E.kind!=="string"||M.kind!=="string")return t(g,y,w)}return this.collator?o(g,y,w,this.collator.evaluate(g)):t(g,y,w)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[i];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const Zu=Do("==",function(i,t,o){return t===o},Ol),qu=Do("!=",function(i,t,o){return t!==o},function(i,t,o,u){return!Ol(0,t,o,u)}),Wu=Do("<",function(i,t,o){return t<o},function(i,t,o,u){return u.compare(t,o)<0}),Rl=Do(">",function(i,t,o){return t>o},function(i,t,o,u){return u.compare(t,o)>0}),Ns=Do("<=",function(i,t,o){return t<=o},function(i,t,o,u){return u.compare(t,o)<=0}),Xu=Do(">=",function(i,t,o){return t>=o},function(i,t,o,u){return u.compare(t,o)>=0});class Us{constructor(t,o,u,f,g){this.type=Zt,this.number=t,this.locale=o,this.currency=u,this.minFractionDigits=f,this.maxFractionDigits=g}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const u=o.parse(t[1],1,et);if(!u)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return o.error("NumberFormat options argument must be an object.");let g=null;if(f.locale&&(g=o.parse(f.locale,1,Zt),!g))return null;let y=null;if(f.currency&&(y=o.parse(f.currency,1,Zt),!y))return null;let w=null;if(f["min-fraction-digits"]&&(w=o.parse(f["min-fraction-digits"],1,et),!w))return null;let E=null;return f["max-fraction-digits"]&&(E=o.parse(f["max-fraction-digits"],1,et),!E)?null:new Us(u,g,y,w,E)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Vs{constructor(t){this.type=et,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=o.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${cn(u.type)} instead.`):new Vs(u):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Re(`Expected value to be of type string or array, but found ${cn(we(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Fo={"==":Zu,"!=":qu,">":Rl,"<":Wu,">=":Xu,"<=":Ns,array:ot,at:Ds,boolean:ot,case:Bs,coalesce:aa,collator:zn,format:_t,image:zt,in:Fs,"index-of":Na,interpolate:Nr,"interpolate-hcl":Nr,"interpolate-lab":Nr,length:Vs,let:Ba,literal:$e,match:Ua,number:ot,"number-format":Us,object:ot,slice:Ro,step:Lo,string:ot,"to-boolean":jt,"to-color":jt,"to-number":jt,"to-string":jt,var:ra,within:vr};function $s(i,[t,o,u,f]){t=t.evaluate(i),o=o.evaluate(i),u=u.evaluate(i);const g=f?f.evaluate(i):1,y=ye(t,o,u,g);if(y)throw new Re(y);return new F(t/255*g,o/255*g,u/255*g,g)}function Dl(i,t){return i in t}function js(i,t){const o=t[i];return o===void 0?null:o}function uo(i){return{type:i}}function Fl(i){return{result:"success",value:i}}function Pi(i){return{result:"error",value:i}}function co(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function ho(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Va(i){return!!i.expression&&i.expression.interpolated}function tn(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Gn(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Hu(i){return i}function fn(i,t){const o=t.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",f=u||!(u||i.property!==void 0),g=i.type||(Va(t)?"exponential":"interval");if(o&&((i=en({},i)).stops&&(i.stops=i.stops.map(M=>[M[0],F.parse(M[1])])),i.default=F.parse(i.default?i.default:t.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Os[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let y,w,E;if(g==="exponential")y=Wi;else if(g==="interval")y=Zn;else if(g==="categorical"){y=Rn,w=Object.create(null);for(const M of i.stops)w[M[0]]=M[1];E=typeof i.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);y=Bl}if(u){const M={},B=[];for(let K=0;K<i.stops.length;K++){const ee=i.stops[K],de=ee[0].zoom;M[de]===void 0&&(M[de]={zoom:de,type:i.type,property:i.property,default:i.default,stops:[]},B.push(de)),M[de].stops.push([ee[0].value,ee[1]])}const U=[];for(const K of B)U.push([M[K].zoom,fn(M[K],t)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:Nr.interpolationFactor.bind(void 0,W),zoomStops:U.map(K=>K[0]),evaluate:({zoom:K},ee)=>Wi({stops:U,base:i.base},t,K).evaluate(K,ee)}}if(f){const M=g==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Nr.interpolationFactor.bind(void 0,M),zoomStops:i.stops.map(B=>B[0]),evaluate:({zoom:B})=>y(i,t,B,w,E)}}return{kind:"source",evaluate(M,B){const U=B&&B.properties?B.properties[i.property]:void 0;return U===void 0?fo(i.default,t.default):y(i,t,U,w,E)}}}function fo(i,t,o){return i!==void 0?i:t!==void 0?t:o!==void 0?o:void 0}function Rn(i,t,o,u,f){return fo(typeof o===f?u[o]:void 0,i.default,t.default)}function Zn(i,t,o){if(tn(o)!=="number")return fo(i.default,t.default);const u=i.stops.length;if(u===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[u-1][0])return i.stops[u-1][1];const f=Zi(i.stops.map(g=>g[0]),o);return i.stops[f][1]}function Wi(i,t,o){const u=i.base!==void 0?i.base:1;if(tn(o)!=="number")return fo(i.default,t.default);const f=i.stops.length;if(f===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[f-1][0])return i.stops[f-1][1];const g=Zi(i.stops.map(B=>B[0]),o),y=function(B,U,W,K){const ee=K-W,de=B-W;return ee===0?0:U===1?de/ee:(Math.pow(U,de)-1)/(Math.pow(U,ee)-1)}(o,u,i.stops[g][0],i.stops[g+1][0]),w=i.stops[g][1],E=i.stops[g+1][1];let M=Fa[t.type]||Hu;if(i.colorSpace&&i.colorSpace!=="rgb"){const B=Os[i.colorSpace];M=(U,W)=>B.reverse(B.interpolate(B.forward(U),B.forward(W),y))}return typeof w.evaluate=="function"?{evaluate(...B){const U=w.evaluate.apply(void 0,B),W=E.evaluate.apply(void 0,B);if(U!==void 0&&W!==void 0)return M(U,W,y)}}:M(w,E,y)}function Bl(i,t,o){return t.type==="color"?o=F.parse(o):t.type==="formatted"?o=ce.fromString(o.toString()):t.type==="resolvedImage"?o=xe.fromString(o.toString()):tn(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0),fo(o,i.default,t.default)}Wt.register(Fo,{error:[{kind:"error"},[Zt],(i,[t])=>{throw new Re(t.evaluate(i))}],typeof:[Zt,[Ut],(i,[t])=>cn(we(t.evaluate(i)))],"to-rgba":[Cr(et,4),[Sr],(i,[t])=>t.evaluate(i).toArray()],rgb:[Sr,[et,et,et],$s],rgba:[Sr,[et,et,et,et],$s],has:{type:Nt,overloads:[[[Zt],(i,[t])=>Dl(t.evaluate(i),i.properties())],[[Zt,Xr],(i,[t,o])=>Dl(t.evaluate(i),o.evaluate(i))]]},get:{type:Ut,overloads:[[[Zt],(i,[t])=>js(t.evaluate(i),i.properties())],[[Zt,Xr],(i,[t,o])=>js(t.evaluate(i),o.evaluate(i))]]},"feature-state":[Ut,[Zt],(i,[t])=>js(t.evaluate(i),i.featureState||{})],properties:[Xr,[],i=>i.properties()],"geometry-type":[Zt,[],i=>i.geometryType()],id:[Ut,[],i=>i.id()],zoom:[et,[],i=>i.globals.zoom],"heatmap-density":[et,[],i=>i.globals.heatmapDensity||0],"line-progress":[et,[],i=>i.globals.lineProgress||0],accumulated:[Ut,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[et,uo(et),(i,t)=>{let o=0;for(const u of t)o+=u.evaluate(i);return o}],"*":[et,uo(et),(i,t)=>{let o=1;for(const u of t)o*=u.evaluate(i);return o}],"-":{type:et,overloads:[[[et,et],(i,[t,o])=>t.evaluate(i)-o.evaluate(i)],[[et],(i,[t])=>-t.evaluate(i)]]},"/":[et,[et,et],(i,[t,o])=>t.evaluate(i)/o.evaluate(i)],"%":[et,[et,et],(i,[t,o])=>t.evaluate(i)%o.evaluate(i)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(i,[t,o])=>Math.pow(t.evaluate(i),o.evaluate(i))],sqrt:[et,[et],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[et,[et],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[et,[et],(i,[t])=>Math.log(t.evaluate(i))],log2:[et,[et],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[et,[et],(i,[t])=>Math.sin(t.evaluate(i))],cos:[et,[et],(i,[t])=>Math.cos(t.evaluate(i))],tan:[et,[et],(i,[t])=>Math.tan(t.evaluate(i))],asin:[et,[et],(i,[t])=>Math.asin(t.evaluate(i))],acos:[et,[et],(i,[t])=>Math.acos(t.evaluate(i))],atan:[et,[et],(i,[t])=>Math.atan(t.evaluate(i))],min:[et,uo(et),(i,t)=>Math.min(...t.map(o=>o.evaluate(i)))],max:[et,uo(et),(i,t)=>Math.max(...t.map(o=>o.evaluate(i)))],abs:[et,[et],(i,[t])=>Math.abs(t.evaluate(i))],round:[et,[et],(i,[t])=>{const o=t.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[et,[et],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[et,[et],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[Nt,[Zt,Ut],(i,[t,o])=>i.properties()[t.value]===o.value],"filter-id-==":[Nt,[Ut],(i,[t])=>i.id()===t.value],"filter-type-==":[Nt,[Zt],(i,[t])=>i.geometryType()===t.value],"filter-<":[Nt,[Zt,Ut],(i,[t,o])=>{const u=i.properties()[t.value],f=o.value;return typeof u==typeof f&&u<f}],"filter-id-<":[Nt,[Ut],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o<u}],"filter->":[Nt,[Zt,Ut],(i,[t,o])=>{const u=i.properties()[t.value],f=o.value;return typeof u==typeof f&&u>f}],"filter-id->":[Nt,[Ut],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o>u}],"filter-<=":[Nt,[Zt,Ut],(i,[t,o])=>{const u=i.properties()[t.value],f=o.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[Nt,[Ut],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o<=u}],"filter->=":[Nt,[Zt,Ut],(i,[t,o])=>{const u=i.properties()[t.value],f=o.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[Nt,[Ut],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o>=u}],"filter-has":[Nt,[Ut],(i,[t])=>t.value in i.properties()],"filter-has-id":[Nt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Nt,[Cr(Zt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[Nt,[Cr(Ut)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[Nt,[Zt,Cr(Ut)],(i,[t,o])=>o.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[Nt,[Zt,Cr(Ut)],(i,[t,o])=>function(u,f,g,y){for(;g<=y;){const w=g+y>>1;if(f[w]===u)return!0;f[w]>u?y=w-1:g=w+1}return!1}(i.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Nt,overloads:[[[Nt,Nt],(i,[t,o])=>t.evaluate(i)&&o.evaluate(i)],[uo(Nt),(i,t)=>{for(const o of t)if(!o.evaluate(i))return!1;return!0}]]},any:{type:Nt,overloads:[[[Nt,Nt],(i,[t,o])=>t.evaluate(i)||o.evaluate(i)],[uo(Nt),(i,t)=>{for(const o of t)if(o.evaluate(i))return!0;return!1}]]},"!":[Nt,[Nt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[Nt,[Zt],(i,[t])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(t.evaluate(i))}],upcase:[Zt,[Zt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Zt,[Zt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Zt,uo(Ut),(i,t)=>t.map(o=>De(o.evaluate(i))).join("")],"resolved-locale":[Zt,[or],(i,[t])=>t.evaluate(i).resolvedLocale()]});class Gs{constructor(t,o){this.expression=t,this._warningHistory={},this._evaluator=new qt,this._defaultValue=o?function(u){return u.type==="color"&&Gn(u.default)?new F(0,0,0,0):u.type==="color"?F.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,u,f,g,y){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=f,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(t,o,u,f,g,y){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Re(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}}}function po(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Fo}function sa(i,t){const o=new Ra(Fo,[],t?function(f){const g={color:Sr,string:Zt,number:et,enum:Zt,boolean:Nt,formatted:ki,resolvedImage:fr};return f.type==="array"?Cr(g[f.value]||Ut,f.length):g[f.type]}(t):void 0),u=o.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Fl(new Gs(u,t)):Pi(o.errors)}class $a{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!ta(o.expression)}evaluateWithoutErrorHandling(t,o,u,f,g,y){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,f,g,y)}evaluate(t,o,u,f,g,y){return this._styleExpression.evaluate(t,o,u,f,g,y)}}class ja{constructor(t,o,u,f){this.kind=t,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!ta(o.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,o,u,f,g,y){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,f,g,y)}evaluate(t,o,u,f,g,y){return this._styleExpression.evaluate(t,o,u,f,g,y)}interpolationFactor(t,o,u){return this.interpolationType?Nr.interpolationFactor(this.interpolationType,t,o,u):0}}function Zs(i,t){const o=sa(i,t);if(o.result==="error")return o;const u=o.value.expression,f=Oa(u);if(!f&&!co(t))return Pi([new Ln("","data expressions not supported")]);const g=na(u,["zoom"]);if(!g&&!ho(t))return Pi([new Ln("","zoom expressions not supported")]);const y=Hr(u);return y||g?y instanceof Ln?Pi([y]):y instanceof Nr&&!Va(t)?Pi([new Ln("",'"interpolate" expressions cannot be used with this property')]):Fl(y?new ja(f?"camera":"composite",o.value,y.labels,y instanceof Nr?y.interpolation:void 0):new $a(f?"constant":"source",o.value)):Pi([new Ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xi{constructor(t,o){this._parameters=t,this._specification=o,en(this,fn(this._parameters,this._specification))}static deserialize(t){return new Xi(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Hr(i){let t=null;if(i instanceof Ba)t=Hr(i.result);else if(i instanceof aa){for(const o of i.args)if(t=Hr(o),t)break}else(i instanceof Lo||i instanceof Nr)&&i.input instanceof Wt&&i.input.name==="zoom"&&(t=i);return t instanceof Ln||i.eachChild(o=>{const u=Hr(o);u instanceof Ln?t=u:!t&&u?t=new Ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new Ln("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function oi(i){const t=i.key,o=i.value,u=i.valueSpec||{},f=i.objectElementValidators||{},g=i.style,y=i.styleSpec;let w=[];const E=tn(o);if(E!=="object")return[new Ge(t,o,`object expected, ${E} found`)];for(const M in o){const B=M.split(".")[0],U=u[B]||u["*"];let W;if(f[B])W=f[B];else if(u[B])W=Dn;else if(f["*"])W=f["*"];else{if(!u["*"]){w.push(new Ge(t,o[M],`unknown property "${M}"`));continue}W=Dn}w=w.concat(W({key:(t&&`${t}.`)+M,value:o[M],valueSpec:U,style:g,styleSpec:y,object:o,objectKey:M},o))}for(const M in u)f[M]||u[M].required&&u[M].default===void 0&&o[M]===void 0&&w.push(new Ge(t,o,`missing required property "${M}"`));return w}function qs(i){const t=i.value,o=i.valueSpec,u=i.style,f=i.styleSpec,g=i.key,y=i.arrayElementValidator||Dn;if(tn(t)!=="array")return[new Ge(g,t,`array expected, ${tn(t)} found`)];if(o.length&&t.length!==o.length)return[new Ge(g,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Ge(g,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let w={type:o.value,values:o.values};f.$version<7&&(w.function=o.function),tn(o.value)==="object"&&(w=o.value);let E=[];for(let M=0;M<t.length;M++)E=E.concat(y({array:t,arrayIndex:M,value:t[M],valueSpec:w,style:u,styleSpec:f,key:`${g}[${M}]`}));return E}function la(i){const t=i.key,o=i.value,u=i.valueSpec;let f=tn(o);return f==="number"&&o!=o&&(f="NaN"),f!=="number"?[new Ge(t,o,`number expected, ${f} found`)]:"minimum"in u&&o<u.minimum?[new Ge(t,o,`${o} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&o>u.maximum?[new Ge(t,o,`${o} is greater than the maximum value ${u.maximum}`)]:[]}function Nl(i){const t=i.valueSpec,o=ln(i.value.type);let u,f,g,y={};const w=o!=="categorical"&&i.value.property===void 0,E=!w,M=tn(i.value.stops)==="array"&&tn(i.value.stops[0])==="array"&&tn(i.value.stops[0][0])==="object",B=oi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(K){if(o==="identity")return[new Ge(K.key,K.value,'identity function may not have a "stops" property')];let ee=[];const de=K.value;return ee=ee.concat(qs({key:K.key,value:de,valueSpec:K.valueSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:U})),tn(de)==="array"&&de.length===0&&ee.push(new Ge(K.key,de,"array must have at least one stop")),ee},default:function(K){return Dn({key:K.key,value:K.value,valueSpec:t,style:K.style,styleSpec:K.styleSpec})}}});return o==="identity"&&w&&B.push(new Ge(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||B.push(new Ge(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Va(i.valueSpec)&&B.push(new Ge(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(E&&!co(i.valueSpec)?B.push(new Ge(i.key,i.value,"property functions not supported")):w&&!ho(i.valueSpec)&&B.push(new Ge(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!M||i.value.property!==void 0||B.push(new Ge(i.key,i.value,'"property" property is required')),B;function U(K){let ee=[];const de=K.value,ge=K.key;if(tn(de)!=="array")return[new Ge(ge,de,`array expected, ${tn(de)} found`)];if(de.length!==2)return[new Ge(ge,de,`array length 2 expected, length ${de.length} found`)];if(M){if(tn(de[0])!=="object")return[new Ge(ge,de,`object expected, ${tn(de[0])} found`)];if(de[0].zoom===void 0)return[new Ge(ge,de,"object stop key must have zoom")];if(de[0].value===void 0)return[new Ge(ge,de,"object stop key must have value")];if(g&&g>ln(de[0].zoom))return[new Ge(ge,de[0].zoom,"stop zoom values must appear in ascending order")];ln(de[0].zoom)!==g&&(g=ln(de[0].zoom),f=void 0,y={}),ee=ee.concat(oi({key:`${ge}[0]`,value:de[0],valueSpec:{zoom:{}},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:la,value:W}}))}else ee=ee.concat(W({key:`${ge}[0]`,value:de[0],valueSpec:{},style:K.style,styleSpec:K.styleSpec},de));return po(Mn(de[1]))?ee.concat([new Ge(`${ge}[1]`,de[1],"expressions are not allowed in function stops.")]):ee.concat(Dn({key:`${ge}[1]`,value:de[1],valueSpec:t,style:K.style,styleSpec:K.styleSpec}))}function W(K,ee){const de=tn(K.value),ge=ln(K.value),Se=K.value!==null?K.value:ee;if(u){if(de!==u)return[new Ge(K.key,Se,`${de} stop domain type must match previous stop domain type ${u}`)]}else u=de;if(de!=="number"&&de!=="string"&&de!=="boolean")return[new Ge(K.key,Se,"stop domain value must be a number, string, or boolean")];if(de!=="number"&&o!=="categorical"){let Le=`number expected, ${de} found`;return co(t)&&o===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(K.key,Se,Le)]}return o!=="categorical"||de!=="number"||isFinite(ge)&&Math.floor(ge)===ge?o!=="categorical"&&de==="number"&&f!==void 0&&ge<f?[new Ge(K.key,Se,"stop domain values must appear in ascending order")]:(f=ge,o==="categorical"&&ge in y?[new Ge(K.key,Se,"stop domain values must be unique")]:(y[ge]=!0,[])):[new Ge(K.key,Se,`integer expected, found ${ge}`)]}}function ai(i){const t=(i.expressionContext==="property"?Zs:sa)(Mn(i.value),i.valueSpec);if(t.result==="error")return t.value.map(u=>new Ge(`${i.key}${u.key}`,i.value,u.message));const o=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Ge(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!ta(o))return[new Ge(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!ta(o))return[new Ge(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!na(o,["zoom","feature-state"]))return[new Ge(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Oa(o))return[new Ge(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mi(i){const t=i.key,o=i.value,u=i.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(ln(o))===-1&&f.push(new Ge(t,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(u.values).indexOf(ln(o))===-1&&f.push(new Ge(t,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),f}function xr(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!xr(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const mo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bo(i){if(i==null)return{filter:()=>!0,needGeometry:!1};xr(i)||(i=go(i));const t=sa(i,mo);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,u,f)=>t.value.evaluate(o,u,{},f),needGeometry:ua(i)}}function Ga(i,t){return i<t?-1:i>t?1:0}function ua(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(ua(i[t]))return!0;return!1}function go(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?yo(i[1],i[2],"=="):t==="!="?_o(yo(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?yo(i[1],i[2],t):t==="any"?(o=i.slice(1),["any"].concat(o.map(go))):t==="all"?["all"].concat(i.slice(1).map(go)):t==="none"?["all"].concat(i.slice(1).map(go).map(_o)):t==="in"?Yr(i[1],i.slice(2)):t==="!in"?_o(Yr(i[1],i.slice(2))):t==="has"?zi(i[1]):t==="!has"?_o(zi(i[1])):t!=="within"||i;var o}function yo(i,t,o){switch(i){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,i,t]}}function Yr(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",i,["literal",t.sort(Ga)]]:["filter-in-small",i,["literal",t]]}}function zi(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function _o(i){return["!",i]}function Hi(i){return xr(Mn(i.value))?ai(en({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):vo(i)}function vo(i){const t=i.value,o=i.key;if(tn(t)!=="array")return[new Ge(o,t,`array expected, ${tn(t)} found`)];const u=i.styleSpec;let f,g=[];if(t.length<1)return[new Ge(o,t,"filter array must have at least 1 element")];switch(g=g.concat(Mi({key:`${o}[0]`,value:t[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),ln(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ln(t[1])==="$type"&&g.push(new Ge(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&g.push(new Ge(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=tn(t[1]),f!=="string"&&g.push(new Ge(`${o}[1]`,t[1],`string expected, ${f} found`)));for(let y=2;y<t.length;y++)f=tn(t[y]),ln(t[1])==="$type"?g=g.concat(Mi({key:`${o}[${y}]`,value:t[y],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&g.push(new Ge(`${o}[${y}]`,t[y],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let y=1;y<t.length;y++)g=g.concat(vo({key:`${o}[${y}]`,value:t[y],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=tn(t[1]),t.length!==2?g.push(new Ge(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&g.push(new Ge(`${o}[1]`,t[1],`string expected, ${f} found`));break;case"within":f=tn(t[1]),t.length!==2?g.push(new Ge(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="object"&&g.push(new Ge(`${o}[1]`,t[1],`object expected, ${f} found`))}return g}function Ws(i,t){const o=i.key,u=i.style,f=i.styleSpec,g=i.value,y=i.objectKey,w=f[`${t}_${i.layerType}`];if(!w)return[];const E=y.match(/^(.*)-transition$/);if(t==="paint"&&E&&w[E[1]]&&w[E[1]].transition)return Dn({key:o,value:g,valueSpec:f.transition,style:u,styleSpec:f});const M=i.valueSpec||w[y];if(!M)return[new Ge(o,g,`unknown property "${y}"`)];let B;if(tn(g)==="string"&&co(M)&&!M.tokens&&(B=/^{([^}]+)}$/.exec(g)))return[new Ge(o,g,`"${y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const U=[];return i.layerType==="symbol"&&(y==="text-field"&&u&&!u.glyphs&&U.push(new Ge(o,g,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Gn(Mn(g))&&ln(g.type)==="identity"&&U.push(new Ge(o,g,'"text-font" does not support identity functions'))),U.concat(Dn({key:i.key,value:g,valueSpec:M,style:u,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:y}))}function No(i){return Ws(i,"paint")}function Xs(i){return Ws(i,"layout")}function Hs(i){let t=[];const o=i.value,u=i.key,f=i.style,g=i.styleSpec;o.type||o.ref||t.push(new Ge(u,o,'either "type" or "ref" is required'));let y=ln(o.type);const w=ln(o.ref);if(o.id){const E=ln(o.id);for(let M=0;M<i.arrayIndex;M++){const B=f.layers[M];ln(B.id)===E&&t.push(new Ge(u,o.id,`duplicate layer id "${o.id}", previously used at line ${B.id.__line__}`))}}if("ref"in o){let E;["type","source","source-layer","filter","layout"].forEach(M=>{M in o&&t.push(new Ge(u,o[M],`"${M}" is prohibited for ref layers`))}),f.layers.forEach(M=>{ln(M.id)===w&&(E=M)}),E?E.ref?t.push(new Ge(u,o.ref,"ref cannot reference another ref layer")):y=ln(E.type):t.push(new Ge(u,o.ref,`ref layer "${w}" not found`))}else if(y!=="background")if(o.source){const E=f.sources&&f.sources[o.source],M=E&&ln(E.type);E?M==="vector"&&y==="raster"?t.push(new Ge(u,o.source,`layer "${o.id}" requires a raster source`)):M==="raster"&&y!=="raster"?t.push(new Ge(u,o.source,`layer "${o.id}" requires a vector source`)):M!=="vector"||o["source-layer"]?M==="raster-dem"&&y!=="hillshade"?t.push(new Ge(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!o.paint||!o.paint["line-gradient"]||M==="geojson"&&E.lineMetrics||t.push(new Ge(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ge(u,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Ge(u,o.source,`source "${o.source}" not found`))}else t.push(new Ge(u,o,'missing required property "source"'));return t=t.concat(oi({key:u,value:o,valueSpec:g.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Dn({key:`${u}.type`,value:o.type,valueSpec:g.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:Hi,layout:E=>oi({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":M=>Xs(en({layerType:y},M))}}),paint:E=>oi({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":M=>No(en({layerType:y},M))}})}})),t}function Ur(i){const t=i.value,o=i.key,u=tn(t);return u!=="string"?[new Ge(o,t,`string expected, ${u} found`)]:[]}const Ys={promoteId:function({key:i,value:t}){if(tn(t)==="string")return Ur({key:i,value:t});{const o=[];for(const u in t)o.push(...Ur({key:`${i}.${u}`,value:t[u]}));return o}}};function Ul(i){const t=i.value,o=i.key,u=i.styleSpec,f=i.style;if(!t.type)return[new Ge(o,t,'"type" is required')];const g=ln(t.type);let y;switch(g){case"vector":case"raster":case"raster-dem":return y=oi({key:o,value:t,valueSpec:u[`source_${g.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:Ys}),y;case"geojson":if(y=oi({key:o,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u,objectElementValidators:Ys}),t.cluster)for(const w in t.clusterProperties){const[E,M]=t.clusterProperties[w],B=typeof E=="string"?[E,["accumulated"],["get",w]]:E;y.push(...ai({key:`${o}.${w}.map`,value:M,expressionContext:"cluster-map"})),y.push(...ai({key:`${o}.${w}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return y;case"video":return oi({key:o,value:t,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return oi({key:o,value:t,valueSpec:u.source_image,style:f,styleSpec:u});case"canvas":return[new Ge(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mi({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,styleSpec:u})}}function Uo(i){const t=i.value,o=i.styleSpec,u=o.light,f=i.style;let g=[];const y=tn(t);if(t===void 0)return g;if(y!=="object")return g=g.concat([new Ge("light",t,`object expected, ${y} found`)]),g;for(const w in t){const E=w.match(/^(.*)-transition$/);g=g.concat(E&&u[E[1]]&&u[E[1]].transition?Dn({key:w,value:t[w],valueSpec:o.transition,style:f,styleSpec:o}):u[w]?Dn({key:w,value:t[w],valueSpec:u[w],style:f,styleSpec:o}):[new Ge(w,t[w],`unknown property "${w}"`)])}return g}const xo={"*":()=>[],array:qs,boolean:function(i){const t=i.value,o=i.key,u=tn(t);return u!=="boolean"?[new Ge(o,t,`boolean expected, ${u} found`)]:[]},number:la,color:function(i){const t=i.key,o=i.value,u=tn(o);return u!=="string"?[new Ge(t,o,`color expected, ${u} found`)]:Ii(o)===null?[new Ge(t,o,`color expected, "${o}" found`)]:[]},constants:wn,enum:Mi,filter:Hi,function:Nl,layer:Hs,object:oi,source:Ul,light:Uo,string:Ur,formatted:function(i){return Ur(i).length===0?[]:ai(i)},resolvedImage:function(i){return Ur(i).length===0?[]:ai(i)}};function Dn(i){const t=i.value,o=i.valueSpec,u=i.styleSpec;return o.expression&&Gn(ln(t))?Nl(i):o.expression&&po(Mn(t))?ai(i):o.type&&xo[o.type]?xo[o.type](i):oi(en({},i,{valueSpec:o.type?u[o.type]:o}))}function ca(i){const t=i.value,o=i.key,u=Ur(i);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new Ge(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new Ge(o,t,'"glyphs" url must include a "{range}" token'))),u}function Yi(i,t=ke){let o=[];return o=o.concat(Dn({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:ca,"*":()=>[]}})),i.constants&&(o=o.concat(wn({key:"constants",value:i.constants,style:i,styleSpec:t}))),I(o)}function I(i){return[].concat(i).sort((t,o)=>t.line-o.line)}function Y(i){return function(...t){return I(i.apply(this,t))}}Yi.source=Y(Ul),Yi.light=Y(Uo),Yi.layer=Y(Hs),Yi.filter=Y(Hi),Yi.paintProperty=Y(No),Yi.layoutProperty=Y(Xs);const fe=Yi,ze=fe.light,st=fe.paintProperty,nt=fe.layoutProperty;function Et(i,t){let o=!1;if(t&&t.length)for(const u of t)i.fire(new Xe(new Error(u.message))),o=!0;return o}class St{constructor(t,o,u){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const y=new Int32Array(this.arrayBuffer);t=y[0],this.d=(o=y[1])+2*(u=y[2]);for(let E=0;E<this.d*this.d;E++){const M=y[3+E],B=y[3+E+1];f.push(M===B?null:y.subarray(M,B))}const w=y[3+f.length+1];this.keys=y.subarray(y[3+f.length],w),this.bboxes=y.subarray(w),this.insert=this._insertReadonly}else{this.d=o+2*u;for(let y=0;y<this.d*this.d;y++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=u,this.scale=o/t,this.uid=0;const g=u/o*t;this.min=-g,this.max=t+g}insert(t,o,u,f,g){this._forEachCell(o,u,f,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,u,f,g,y){this.cells[g].push(y)}query(t,o,u,f,g){const y=this.min,w=this.max;if(t<=y&&o<=y&&w<=u&&w<=f&&!g)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(t,o,u,f,this._queryCell,E,{},g),E}}_queryCell(t,o,u,f,g,y,w,E){const M=this.cells[g];if(M!==null){const B=this.keys,U=this.bboxes;for(let W=0;W<M.length;W++){const K=M[W];if(w[K]===void 0){const ee=4*K;(E?E(U[ee+0],U[ee+1],U[ee+2],U[ee+3]):t<=U[ee+2]&&o<=U[ee+3]&&u>=U[ee+0]&&f>=U[ee+1])?(w[K]=!0,y.push(B[K])):w[K]=!1}}}}_forEachCell(t,o,u,f,g,y,w,E){const M=this._convertToCellCoord(t),B=this._convertToCellCoord(o),U=this._convertToCellCoord(u),W=this._convertToCellCoord(f);for(let K=M;K<=U;K++)for(let ee=B;ee<=W;ee++){const de=this.d*ee+K;if((!E||E(this._convertFromCellCoord(K),this._convertFromCellCoord(ee),this._convertFromCellCoord(K+1),this._convertFromCellCoord(ee+1)))&&g.call(this,t,o,u,f,de,y,w,E))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let u=0;for(let y=0;y<this.cells.length;y++)u+=this.cells[y].length;const f=new Int32Array(o+u+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let g=o;for(let y=0;y<t.length;y++){const w=t[y];f[3+y]=g,f.set(w,g),g+=w.length}return f[3+t.length]=g,f.set(this.keys,g),g+=this.keys.length,f[3+t.length+1]=g,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer}static serialize(t,o){const u=t.toArrayBuffer();return o&&o.push(u),{buffer:u}}static deserialize(t){return new St(t.buffer)}}const Ft={};function Ke(i,t,o={}){Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),Ft[i]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}Ke("Object",Object),Ke("TransferableGridIndex",St),Ke("Color",F),Ke("Error",Error),Ke("AJAXError",hr),Ke("ResolvedImage",xe),Ke("StylePropertyFunction",Xi),Ke("StyleExpression",Gs,{omit:["_evaluator"]}),Ke("ZoomDependentExpression",ja),Ke("ZoomConstantExpression",$a),Ke("CompoundExpression",Wt,{omit:["_evaluate"]});for(const i in Fo)Fo[i]._classRegistryKey||Ke(`Expression_${i}`,Fo[i]);function dn(i){return i&&typeof ArrayBuffer!="undefined"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function bn(i,t){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(dn(i)||ft(i))return t&&t.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return t&&t.push(o.buffer),o}if(i instanceof ImageData)return t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const u of i)o.push(bn(u,t));return o}if(typeof i=="object"){const o=i.constructor,u=o._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");const f=o.serialize?o.serialize(i,t):{};if(!o.serialize){for(const g in i){if(!i.hasOwnProperty(g)||Ft[u].omit.indexOf(g)>=0)continue;const y=i[g];f[g]=Ft[u].shallow.indexOf(g)>=0?y:bn(y,t)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(f.$name=u),f}throw new Error("can't serialize object of type "+typeof i)}function Pn(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||dn(i)||ft(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(Pn);if(typeof i=="object"){const t=i.$name||"Object";if(!Ft[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=Ft[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(i);const u=Object.create(o.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const g=i[f];u[f]=Ft[t].shallow.indexOf(f)>=0?g:Pn(g)}return u}throw new Error("can't deserialize object of type "+typeof i)}class ur{constructor(){this.first=!0}update(t,o){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const Je={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function si(i){for(const t of i)if(Za(t.charCodeAt(0)))return!0;return!1}function Li(i){for(const t of i)if(!Ki(t.charCodeAt(0)))return!1;return!0}function Ki(i){return!(Je.Arabic(i)||Je["Arabic Supplement"](i)||Je["Arabic Extended-A"](i)||Je["Arabic Presentation Forms-A"](i)||Je["Arabic Presentation Forms-B"](i))}function Za(i){return!(i!==746&&i!==747&&(i<4352||!(Je["Bopomofo Extended"](i)||Je.Bopomofo(i)||Je["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Je["CJK Compatibility Ideographs"](i)||Je["CJK Compatibility"](i)||Je["CJK Radicals Supplement"](i)||Je["CJK Strokes"](i)||!(!Je["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Je["CJK Unified Ideographs Extension A"](i)||Je["CJK Unified Ideographs"](i)||Je["Enclosed CJK Letters and Months"](i)||Je["Hangul Compatibility Jamo"](i)||Je["Hangul Jamo Extended-A"](i)||Je["Hangul Jamo Extended-B"](i)||Je["Hangul Jamo"](i)||Je["Hangul Syllables"](i)||Je.Hiragana(i)||Je["Ideographic Description Characters"](i)||Je.Kanbun(i)||Je["Kangxi Radicals"](i)||Je["Katakana Phonetic Extensions"](i)||Je.Katakana(i)&&i!==12540||!(!Je["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Je["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Je["Unified Canadian Aboriginal Syllabics"](i)||Je["Unified Canadian Aboriginal Syllabics Extended"](i)||Je["Vertical Forms"](i)||Je["Yijing Hexagram Symbols"](i)||Je["Yi Syllables"](i)||Je["Yi Radicals"](i))))}function wo(i){return!(Za(i)||function(t){return!!(Je["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Je["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Je["Letterlike Symbols"](t)||Je["Number Forms"](t)||Je["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Je["Control Pictures"](t)&&t!==9251||Je["Optical Character Recognition"](t)||Je["Enclosed Alphanumerics"](t)||Je["Geometric Shapes"](t)||Je["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Je["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Je["CJK Symbols and Punctuation"](t)||Je.Katakana(t)||Je["Private Use Area"](t)||Je["CJK Compatibility Forms"](t)||Je["Small Form Variants"](t)||Je["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}function ha(i){return i>=1424&&i<=2303||Je["Arabic Presentation Forms-A"](i)||Je["Arabic Presentation Forms-B"](i)}function Id(i,t){return!(!t&&ha(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Je.Khmer(i))}function Pd(i){for(const t of i)if(ha(t.charCodeAt(0)))return!0;return!1}const Yu="deferred",Vl="loading",Ku="loaded";let Ju=null,Kr="unavailable",Vo=null;const Sh=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(Kr="error"),Ju&&Ju(i)};function Qu(){ec.fire(new qe("pluginStateChange",{pluginStatus:Kr,pluginURL:Vo}))}const ec=new Dt,qa=function(){return Kr},Th=function(){if(Kr!==Yu||!Vo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Kr=Vl,Qu(),Vo&&Vn({url:Vo},i=>{i?Sh(i):(Kr=Ku,Qu())})},Jr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Kr===Ku||Jr.applyArabicShaping!=null,isLoading:()=>Kr===Vl,setState(i){Kr=i.pluginStatus,Vo=i.pluginURL},isParsed:()=>Jr.applyArabicShaping!=null&&Jr.processBidirectionalText!=null&&Jr.processStyledBidirectionalText!=null,getPluginURL:()=>Vo};class Fn{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ur,this.transition={})}isSupportedScript(t){return function(o,u){for(const f of o)if(!Id(f.charCodeAt(0),u))return!1;return!0}(t,Jr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*o}}}class $l{constructor(t,o){this.property=t,this.value=o,this.expression=function(u,f){if(Gn(u))return new Xi(u,f);if(po(u)){const g=Zs(u,f);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=u;return typeof u=="string"&&f.type==="color"&&(g=F.parse(u)),{kind:"constant",evaluate:()=>g}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,u){return this.property.possiblyEvaluate(this,t,o,u)}}class tc{constructor(t){this.property=t,this.value=new $l(t,void 0)}transitioned(t,o){return new Ah(this.property,this.value,o,te({},t.transition,this.transition),t.now)}untransitioned(){return new Ah(this.property,this.value,null,{},0)}}class nc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return G(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new tc(this._values[t].property)),this._values[t].value=new $l(this._values[t].property,o===null?void 0:G(o))}getTransition(t){return G(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new tc(this._values[t].property)),this._values[t].transition=G(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(t[o]=u);const f=this.getTransition(o);f!==void 0&&(t[`${o}-transition`]=f)}return t}transitioned(t,o){const u=new Ch(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(t,o._values[f]);return u}untransitioned(){const t=new Ch(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class Ah{constructor(t,o,u,f,g){this.property=t,this.value=o,this.begin=g+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(t,o,u){const f=t.now||0,g=this.value.possiblyEvaluate(t,o,u),y=this.prior;if(y){if(f>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(f<this.begin)return y.possiblyEvaluate(t,o,u);{const w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(t,o,u),g,function(E){if(E<=0)return 0;if(E>=1)return 1;const M=E*E,B=M*E;return 4*(E<.5?B:3*(E-M)+B-.75)}(w))}}return g}}class Ch{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,u){const f=new jl(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(t,o,u);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Md{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return G(this._values[t].value)}setValue(t,o){this._values[t]=new $l(this._values[t].property,o===null?void 0:G(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(t[o]=u)}return t}possiblyEvaluate(t,o,u){const f=new jl(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(t,o,u);return f}}class Ji{constructor(t,o,u){this.property=t,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,u,f){return this.property.evaluate(this.value,this.parameters,t,o,u,f)}}class jl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Ct{constructor(t){this.specification=t}possiblyEvaluate(t,o){return t.expression.evaluate(o)}interpolate(t,o,u){const f=Fa[this.specification.type];return f?f(t,o,u):t}}class Rt{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,u,f){return new Ji(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},u,f)}:t.expression,o)}interpolate(t,o,u){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new Ji(this,{kind:"constant",value:void 0},t.parameters);const f=Fa[this.specification.type];return f?new Ji(this,{kind:"constant",value:f(t.value.value,o.value.value,u)},t.parameters):t}evaluate(t,o,u,f,g,y){return t.kind==="constant"?t.value:t.evaluate(o,u,f,g,y)}}class Wa extends Rt{possiblyEvaluate(t,o,u,f){if(t.value===void 0)return new Ji(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const g=t.expression.evaluate(o,null,{},u,f),y=t.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,w=this._calculate(y,y,y,o);return new Ji(this,{kind:"constant",value:w},o)}if(t.expression.kind==="camera"){const g=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new Ji(this,{kind:"constant",value:g},o)}return new Ji(this,t.expression,o)}evaluate(t,o,u,f,g,y){if(t.kind==="source"){const w=t.evaluate(o,u,f,g,y);return this._calculate(w,w,w,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},u,f),t.evaluate({zoom:Math.floor(o.zoom)},u,f),t.evaluate({zoom:Math.floor(o.zoom)+1},u,f),o):t.value}_calculate(t,o,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:u,to:o}}interpolate(t){return t}}class Gl{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const g=t.expression.evaluate(o,null,{},u,f);return this._calculate(g,g,g,o)}return this._calculate(t.expression.evaluate(new Fn(Math.floor(o.zoom-1),o)),t.expression.evaluate(new Fn(Math.floor(o.zoom),o)),t.expression.evaluate(new Fn(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:u,to:o}}interpolate(t){return t}}class Ks{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,f){return!!t.expression.evaluate(o,null,{},u,f)}interpolate(){return!1}}class Qr{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const u=t[o];u.specification.overridable&&this.overridableProperties.push(o);const f=this.defaultPropertyValues[o]=new $l(u,void 0),g=this.defaultTransitionablePropertyValues[o]=new tc(u);this.defaultTransitioningPropertyValues[o]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=f.possiblyEvaluate({})}}}Ke("DataDrivenProperty",Rt),Ke("DataConstantProperty",Ct),Ke("CrossFadedDataDrivenProperty",Wa),Ke("CrossFadedProperty",Gl),Ke("ColorRampProperty",Ks);const bo="-transition";class li extends Dt{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new Md(o.layout)),o.paint)){this._transitionablePaint=new nc(o.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jl(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,u={}){o!=null&&this._validate(nt,`layers.${this.id}.layout.${t}`,t,o,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(bo)?this._transitionablePaint.getTransition(t.slice(0,-bo.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,u={}){if(o!=null&&this._validate(st,`layers.${this.id}.paint.${t}`,t,o,u))return!1;if(t.endsWith(bo))return this._transitionablePaint.setTransition(t.slice(0,-bo.length),o||void 0),!1;{const f=this._transitionablePaint._values[t],g=f.property.specification["property-type"]==="cross-faded-data-driven",y=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const E=this._transitionablePaint._values[t].value;return E.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(t,w,E)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),$(t,(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}_validate(t,o,u,f,g={}){return(!g||g.validate!==!1)&&Et(this,t.call(fe,{key:o,layerType:this.type,objectKey:u,value:f,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Ji&&co(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Js={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zl{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Kn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Jn(i,t=1){let o=0,u=0;return{members:i.map(f=>{const g=Js[f.type].BYTES_PER_ELEMENT,y=o=kh(o,Math.max(t,g)),w=f.components||1;return u=Math.max(u,g),o+=g*w,{name:f.name,type:f.type,components:w,offset:y}}),size:kh(o,Math.max(u,t)),alignment:t}}function kh(i,t){return Math.ceil(i/t)*t}class Qs extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const f=2*t;return this.int16[f+0]=o,this.int16[f+1]=u,t}}Qs.prototype.bytesPerElement=4,Ke("StructArrayLayout2i4",Qs);class ql extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u,f)}emplace(t,o,u,f,g){const y=4*t;return this.int16[y+0]=o,this.int16[y+1]=u,this.int16[y+2]=f,this.int16[y+3]=g,t}}ql.prototype.bytesPerElement=8,Ke("StructArrayLayout4i8",ql);class el extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,f,g,y)}emplace(t,o,u,f,g,y,w){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=u,this.int16[E+2]=f,this.int16[E+3]=g,this.int16[E+4]=y,this.int16[E+5]=w,t}}el.prototype.bytesPerElement=12,Ke("StructArrayLayout2i4i12",el);class p extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,f,g,y)}emplace(t,o,u,f,g,y,w){const E=4*t,M=8*t;return this.int16[E+0]=o,this.int16[E+1]=u,this.uint8[M+4]=f,this.uint8[M+5]=g,this.uint8[M+6]=y,this.uint8[M+7]=w,t}}p.prototype.bytesPerElement=8,Ke("StructArrayLayout2i4ub8",p);class n extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const f=2*t;return this.float32[f+0]=o,this.float32[f+1]=u,t}}n.prototype.bytesPerElement=8,Ke("StructArrayLayout2f8",n);class s extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y,w,E,M,B){const U=this.length;return this.resize(U+1),this.emplace(U,t,o,u,f,g,y,w,E,M,B)}emplace(t,o,u,f,g,y,w,E,M,B,U){const W=10*t;return this.uint16[W+0]=o,this.uint16[W+1]=u,this.uint16[W+2]=f,this.uint16[W+3]=g,this.uint16[W+4]=y,this.uint16[W+5]=w,this.uint16[W+6]=E,this.uint16[W+7]=M,this.uint16[W+8]=B,this.uint16[W+9]=U,t}}s.prototype.bytesPerElement=20,Ke("StructArrayLayout10ui20",s);class h extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y,w,E,M,B,U,W){const K=this.length;return this.resize(K+1),this.emplace(K,t,o,u,f,g,y,w,E,M,B,U,W)}emplace(t,o,u,f,g,y,w,E,M,B,U,W,K){const ee=12*t;return this.int16[ee+0]=o,this.int16[ee+1]=u,this.int16[ee+2]=f,this.int16[ee+3]=g,this.uint16[ee+4]=y,this.uint16[ee+5]=w,this.uint16[ee+6]=E,this.uint16[ee+7]=M,this.int16[ee+8]=B,this.int16[ee+9]=U,this.int16[ee+10]=W,this.int16[ee+11]=K,t}}h.prototype.bytesPerElement=24,Ke("StructArrayLayout4i4ui4i24",h);class m extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,u)}emplace(t,o,u,f){const g=3*t;return this.float32[g+0]=o,this.float32[g+1]=u,this.float32[g+2]=f,t}}m.prototype.bytesPerElement=12,Ke("StructArrayLayout3f12",m);class v extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}v.prototype.bytesPerElement=4,Ke("StructArrayLayout1ul4",v);class b extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y,w,E,M){const B=this.length;return this.resize(B+1),this.emplace(B,t,o,u,f,g,y,w,E,M)}emplace(t,o,u,f,g,y,w,E,M,B){const U=10*t,W=5*t;return this.int16[U+0]=o,this.int16[U+1]=u,this.int16[U+2]=f,this.int16[U+3]=g,this.int16[U+4]=y,this.int16[U+5]=w,this.uint32[W+3]=E,this.uint16[U+8]=M,this.uint16[U+9]=B,t}}b.prototype.bytesPerElement=20,Ke("StructArrayLayout6i1ul2ui20",b);class T extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,f,g,y)}emplace(t,o,u,f,g,y,w){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=u,this.int16[E+2]=f,this.int16[E+3]=g,this.int16[E+4]=y,this.int16[E+5]=w,t}}T.prototype.bytesPerElement=12,Ke("StructArrayLayout2i2i2i12",T);class k extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,u,f,g)}emplace(t,o,u,f,g,y){const w=4*t,E=8*t;return this.float32[w+0]=o,this.float32[w+1]=u,this.float32[w+2]=f,this.int16[E+6]=g,this.int16[E+7]=y,t}}k.prototype.bytesPerElement=16,Ke("StructArrayLayout2f1f2i16",k);class R extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u,f)}emplace(t,o,u,f,g){const y=12*t,w=3*t;return this.uint8[y+0]=o,this.uint8[y+1]=u,this.float32[w+1]=f,this.float32[w+2]=g,t}}R.prototype.bytesPerElement=12,Ke("StructArrayLayout2ub2f12",R);class V extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,u)}emplace(t,o,u,f){const g=3*t;return this.uint16[g+0]=o,this.uint16[g+1]=u,this.uint16[g+2]=f,t}}V.prototype.bytesPerElement=6,Ke("StructArrayLayout3ui6",V);class X extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de,ge,Se){const Le=this.length;return this.resize(Le+1),this.emplace(Le,t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de,ge,Se)}emplace(t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de,ge,Se,Le){const Me=24*t,Fe=12*t,We=48*t;return this.int16[Me+0]=o,this.int16[Me+1]=u,this.uint16[Me+2]=f,this.uint16[Me+3]=g,this.uint32[Fe+2]=y,this.uint32[Fe+3]=w,this.uint32[Fe+4]=E,this.uint16[Me+10]=M,this.uint16[Me+11]=B,this.uint16[Me+12]=U,this.float32[Fe+7]=W,this.float32[Fe+8]=K,this.uint8[We+36]=ee,this.uint8[We+37]=de,this.uint8[We+38]=ge,this.uint32[Fe+10]=Se,this.int16[Me+22]=Le,t}}X.prototype.bytesPerElement=48,Ke("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",X);class re extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de,ge,Se,Le,Me,Fe,We,Ve,pt,It,lt,ut,it,gt){const ct=this.length;return this.resize(ct+1),this.emplace(ct,t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de,ge,Se,Le,Me,Fe,We,Ve,pt,It,lt,ut,it,gt)}emplace(t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de,ge,Se,Le,Me,Fe,We,Ve,pt,It,lt,ut,it,gt,ct){const Qe=34*t,Ot=17*t;return this.int16[Qe+0]=o,this.int16[Qe+1]=u,this.int16[Qe+2]=f,this.int16[Qe+3]=g,this.int16[Qe+4]=y,this.int16[Qe+5]=w,this.int16[Qe+6]=E,this.int16[Qe+7]=M,this.uint16[Qe+8]=B,this.uint16[Qe+9]=U,this.uint16[Qe+10]=W,this.uint16[Qe+11]=K,this.uint16[Qe+12]=ee,this.uint16[Qe+13]=de,this.uint16[Qe+14]=ge,this.uint16[Qe+15]=Se,this.uint16[Qe+16]=Le,this.uint16[Qe+17]=Me,this.uint16[Qe+18]=Fe,this.uint16[Qe+19]=We,this.uint16[Qe+20]=Ve,this.uint16[Qe+21]=pt,this.uint16[Qe+22]=It,this.uint32[Ot+12]=lt,this.float32[Ot+13]=ut,this.float32[Ot+14]=it,this.float32[Ot+15]=gt,this.float32[Ot+16]=ct,t}}re.prototype.bytesPerElement=68,Ke("StructArrayLayout8i15ui1ul4f68",re);class he extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}he.prototype.bytesPerElement=4,Ke("StructArrayLayout1f4",he);class oe extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,u)}emplace(t,o,u,f){const g=3*t;return this.int16[g+0]=o,this.int16[g+1]=u,this.int16[g+2]=f,t}}oe.prototype.bytesPerElement=6,Ke("StructArrayLayout3i6",oe);class pe extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,u)}emplace(t,o,u,f){const g=4*t;return this.uint32[2*t+0]=o,this.uint16[g+2]=u,this.uint16[g+3]=f,t}}pe.prototype.bytesPerElement=8,Ke("StructArrayLayout1ul2ui8",pe);class ve extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const f=2*t;return this.uint16[f+0]=o,this.uint16[f+1]=u,t}}ve.prototype.bytesPerElement=4,Ke("StructArrayLayout2ui4",ve);class be extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}be.prototype.bytesPerElement=2,Ke("StructArrayLayout1ui2",be);class Ie extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u,f)}emplace(t,o,u,f,g){const y=4*t;return this.float32[y+0]=o,this.float32[y+1]=u,this.float32[y+2]=f,this.float32[y+3]=g,t}}Ie.prototype.bytesPerElement=16,Ke("StructArrayLayout4f16",Ie);class Ae extends Zl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ue(this.anchorPointX,this.anchorPointY)}}Ae.prototype.size=20;class Ne extends b{get(t){return new Ae(this,t)}}Ke("CollisionBoxArray",Ne);class Oe extends Zl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Oe.prototype.size=48;class Be extends X{get(t){return new Oe(this,t)}}Ke("PlacedSymbolArray",Be);class He extends Zl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}He.prototype.size=68;class tt extends re{get(t){return new He(this,t)}}Ke("SymbolInstanceArray",tt);class je extends he{getoffsetX(t){return this.float32[1*t+0]}}Ke("GlyphOffsetArray",je);class Tt extends oe{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ke("SymbolLineVertexArray",Tt);class ht extends Zl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ht.prototype.size=8;class Bt extends pe{get(t){return new ht(this,t)}}Ke("FeatureIndexArray",Bt);class mn extends Qs{}class Kt extends Qs{}class Jt extends el{}class Qn extends p{}class $t extends n{}class on extends s{}class qn extends h{}class kr extends m{}class ui extends v{}class ci extends T{}class Oi extends R{}class hi extends V{}class Ri extends ve{}const $o=Jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:fa}=$o;class An{constructor(t=[]){this.segments=t}prepareSegment(t,o,u,f){let g=this.segments[this.segments.length-1];return t>An.MAX_VERTEX_ARRAY_LENGTH&&me(`Max vertices per segment is ${An.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!g||g.vertexLength+t>An.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==f)&&(g={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},f!==void 0&&(g.sortKey=f),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,u,f){return new An([{vertexOffset:t,primitiveOffset:o,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}function wr(i,t){return 256*(i=P(Math.floor(i),0,255))+P(Math.floor(t),0,255)}An.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ke("SegmentVector",An);const pn=Jn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var dr={exports:{}},fi={exports:{}};fi.exports=function(i,t){var o,u,f,g,y,w,E,M;for(u=i.length-(o=3&i.length),f=t,y=3432918353,w=461845907,M=0;M<u;)E=255&i.charCodeAt(M)|(255&i.charCodeAt(++M))<<8|(255&i.charCodeAt(++M))<<16|(255&i.charCodeAt(++M))<<24,++M,f=27492+(65535&(g=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*y+(((E>>>16)*y&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,o){case 3:E^=(255&i.charCodeAt(M+2))<<16;case 2:E^=(255&i.charCodeAt(M+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&i.charCodeAt(M)))*y+(((E>>>16)*y&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295}return f^=i.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Bn={exports:{}};Bn.exports=function(i,t){for(var o,u=i.length,f=t^u,g=0;u>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(g)|(255&i.charCodeAt(++g))<<8|(255&i.charCodeAt(++g))<<16|(255&i.charCodeAt(++g))<<24))+((1540483477*(o>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:f^=(255&i.charCodeAt(g+2))<<16;case 2:f^=(255&i.charCodeAt(g+1))<<8;case 1:f=1540483477*(65535&(f^=255&i.charCodeAt(g)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var da=fi.exports,pa=Bn.exports;dr.exports=da,dr.exports.murmur3=da,dr.exports.murmur2=pa;var Xa=dr.exports;class Wl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,u,f){this.ids.push(Ih(t)),this.positions.push(o,u,f)}getPositions(t){const o=Ih(t);let u=0,f=this.ids.length-1;for(;u<f;){const y=u+f>>1;this.ids[y]>=o?f=y:u=y+1}const g=[];for(;this.ids[u]===o;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(t,o){const u=new Float64Array(t.ids),f=new Uint32Array(t.positions);return rc(u,f,0,u.length-1),o&&o.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(t){const o=new Wl;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function Ih(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Xa(String(i))}function rc(i,t,o,u){for(;o<u;){const f=i[o+u>>1];let g=o-1,y=u+1;for(;;){do g++;while(i[g]<f);do y--;while(i[y]>f);if(g>=y)break;jo(i,g,y),jo(t,3*g,3*y),jo(t,3*g+1,3*y+1),jo(t,3*g+2,3*y+2)}y-o<u-y?(rc(i,t,o,y),o=y+1):(rc(i,t,y+1,u),u=y)}}function jo(i,t,o){const u=i[t];i[t]=i[o],i[o]=u}Ke("FeaturePositionMap",Wl);class ma{constructor(t,o){this.gl=t.gl,this.location=o}}class ga extends ma{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Xl extends ma{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class fy extends ma{constructor(t,o){super(t,o),this.current=F.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ww=new Float32Array(16);function zd(i){return[wr(255*i.r,255*i.g),wr(255*i.b,255*i.a)]}class ic{constructor(t,o,u){this.value=t,this.uniformNames=o.map(f=>`u_${f}`),this.type=u}setUniform(t,o,u){t.set(u.constantOr(this.value))}getBinding(t,o,u){return this.type==="color"?new fy(t,o):new ga(t,o)}}class Hl{constructor(t,o){this.uniformNames=o.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,u,f){const g=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&t.set(g)}getBinding(t,o,u){return u.substr(0,9)==="u_pattern"?new Xl(t,o):new ga(t,o)}}class ya{constructor(t,o,u,f){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,o,u,f,g){const y=this.paintVertexArray.length,w=this.expression.evaluate(new Fn(0),o,{},f,[],g);this.paintVertexArray.resize(t),this._setPaintValue(y,t,w)}updatePaintArray(t,o,u,f){const g=this.expression.evaluate({zoom:0},u,f);this._setPaintValue(t,o,g)}_setPaintValue(t,o,u){if(this.type==="color"){const f=zd(u);for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,f[0],f[1])}else{for(let f=t;f<o;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Eo{constructor(t,o,u,f,g,y){this.expression=t,this.uniformNames=o.map(w=>`u_${w}_t`),this.type=u,this.useIntegerZoom=f,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(t,o,u,f,g){const y=this.expression.evaluate(new Fn(this.zoom),o,{},f,[],g),w=this.expression.evaluate(new Fn(this.zoom+1),o,{},f,[],g),E=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(E,t,y,w)}updatePaintArray(t,o,u,f){const g=this.expression.evaluate({zoom:this.zoom},u,f),y=this.expression.evaluate({zoom:this.zoom+1},u,f);this._setPaintValue(t,o,g,y)}_setPaintValue(t,o,u,f){if(this.type==="color"){const g=zd(u),y=zd(f);for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,g[0],g[1],y[0],y[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,f=P(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,o,u){return new ga(t,o)}}class Ha{constructor(t,o,u,f,g,y){this.expression=t,this.type=o,this.useIntegerZoom=u,this.zoom=f,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(t,o,u){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(t,o,u,f,g){this._setPaintValues(t,o,u.patterns&&u.patterns[this.layerId],g)}_setPaintValues(t,o,u,f){if(!f||!u)return;const{min:g,mid:y,max:w}=u,E=f[g],M=f[y],B=f[w];if(E&&M&&B)for(let U=t;U<o;U++)this.zoomInPaintVertexArray.emplace(U,M.tl[0],M.tl[1],M.br[0],M.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],M.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,M.tl[0],M.tl[1],M.br[0],M.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],M.pixelRatio,B.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,pn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,pn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class dy{constructor(t,o,u){this.binders={},this._buffers=[];const f=[];for(const g in t.paint._values){if(!u(g))continue;const y=t.paint.get(g);if(!(y instanceof Ji&&co(y.property.specification)))continue;const w=bw(g,t.type),E=y.value,M=y.property.specification.type,B=y.property.useIntegerZoom,U=y.property.specification["property-type"],W=U==="cross-faded"||U==="cross-faded-data-driven";if(E.kind==="constant")this.binders[g]=W?new Hl(E.value,w):new ic(E.value,w,M),f.push(`/u_${g}`);else if(E.kind==="source"||W){const K=py(g,M,"source");this.binders[g]=W?new Ha(E,M,B,o,K,t.id):new ya(E,w,M,K),f.push(`/a_${g}`)}else{const K=py(g,M,"composite");this.binders[g]=new Eo(E,w,M,B,o,K),f.push(`/z_${g}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof ya||o instanceof Eo?o.maxValue:0}populatePaintArrays(t,o,u,f,g){for(const y in this.binders){const w=this.binders[y];(w instanceof ya||w instanceof Eo||w instanceof Ha)&&w.populatePaintArray(t,o,u,f,g)}}setConstantPatternPositions(t,o){for(const u in this.binders){const f=this.binders[u];f instanceof Hl&&f.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,u,f,g){let y=!1;for(const w in t){const E=o.getPositions(w);for(const M of E){const B=u.feature(M.index);for(const U in this.binders){const W=this.binders[U];if((W instanceof ya||W instanceof Eo||W instanceof Ha)&&W.expression.isStateDependent===!0){const K=f.paint.get(U);W.expression=K.value,W.updatePaintArray(M.start,M.end,B,t[w],g),y=!0}}}}return y}defines(){const t=[];for(const o in this.binders){const u=this.binders[o];(u instanceof ic||u instanceof Hl)&&t.push(...u.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof ya||u instanceof Eo)for(let f=0;f<u.paintVertexAttributes.length;f++)t.push(u.paintVertexAttributes[f].name);else if(u instanceof Ha)for(let f=0;f<pn.members.length;f++)t.push(pn.members[f].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof ic||u instanceof Hl||u instanceof Eo)for(const f of u.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const u=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof ic||g instanceof Hl||g instanceof Eo){for(const y of g.uniformNames)if(o[y]){const w=g.getBinding(t,o[y],y);u.push({name:y,property:f,binding:w})}}}return u}setUniforms(t,o,u,f){for(const{name:g,property:y,binding:w}of o)this.binders[y].setUniform(w,f,u.get(y),g)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const u=this.binders[o];if(t&&u instanceof Ha){const f=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(u instanceof ya||u instanceof Eo)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const o in this.binders){const u=this.binders[o];(u instanceof ya||u instanceof Eo||u instanceof Ha)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof ya||o instanceof Eo||o instanceof Ha)&&o.destroy()}}}class tl{constructor(t,o,u=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new dy(f,o,u);this.needsUpload=!1,this._featureMap=new Wl,this._bufferOffset=0}populatePaintArrays(t,o,u,f,g,y){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(t,o,f,g,y);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,u,f){for(const g of u)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,o,g,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function bw(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function py(i,t,o){const u={color:{source:n,composite:Ie},number:{source:he,composite:n}},f=function(g){return{"line-pattern":{source:on,composite:on},"fill-pattern":{source:on,composite:on},"fill-extrusion-pattern":{source:on,composite:on}}[g]}(i);return f&&f[o]||u[t][o]}Ke("ConstantBinder",ic),Ke("CrossFadedConstantBinder",Hl),Ke("SourceExpressionBinder",ya),Ke("CrossFadedCompositeBinder",Ha),Ke("CompositeExpressionBinder",Eo),Ke("ProgramConfiguration",dy,{omit:["_buffers"]}),Ke("ProgramConfigurationSet",tl);var br=8192;const Ld=Math.pow(2,14)-1,my=-Ld-1;function nl(i){const t=br/i.extent,o=i.loadGeometry();for(let u=0;u<o.length;u++){const f=o[u];for(let g=0;g<f.length;g++){const y=f[g],w=Math.round(y.x*t),E=Math.round(y.y*t);y.x=P(w,my,Ld),y.y=P(E,my,Ld),(w<y.x||w>y.x+1||E<y.y||E>y.y+1)&&me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function rl(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?nl(i):[]}}function Ph(i,t,o,u,f){i.emplaceBack(2*t+(u+1)/2,2*o+(f+1)/2)}class Od{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new mn,this.indexArray=new hi,this.segments=new An,this.programConfigurations=new tl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){const f=this.layers[0],g=[];let y=null,w=!1;f.type==="circle"&&(y=f.layout.get("circle-sort-key"),w=!y.isConstant());for(const{feature:E,id:M,index:B,sourceLayerIndex:U}of t){const W=this.layers[0]._featureFilter.needGeometry,K=rl(E,W);if(!this.layers[0]._featureFilter.filter(new Fn(this.zoom),K,u))continue;const ee=w?y.evaluate(K,{},u):void 0,de={id:M,properties:E.properties,type:E.type,sourceLayerIndex:U,index:B,geometry:W?K.geometry:nl(E),patterns:{},sortKey:ee};g.push(de)}w&&g.sort((E,M)=>E.sortKey-M.sortKey);for(const E of g){const{geometry:M,index:B,sourceLayerIndex:U}=E,W=t[B].feature;this.addFeature(E,M,B,u),o.featureIndex.insert(W,M,B,U,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,u,f){for(const g of o)for(const y of g){const w=y.x,E=y.y;if(w<0||w>=br||E<0||E>=br)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),B=M.vertexLength;Ph(this.layoutVertexArray,w,E,-1,-1),Ph(this.layoutVertexArray,w,E,1,-1),Ph(this.layoutVertexArray,w,E,1,1),Ph(this.layoutVertexArray,w,E,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},f)}}function gy(i,t){for(let o=0;o<i.length;o++)if(Yl(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(Yl(i,t[o]))return!0;return!!Rd(i,t)}function Ew(i,t,o){return!!Yl(i,t)||!!Dd(t,i,o)}function yy(i,t){if(i.length===1)return vy(t,i[0]);for(let o=0;o<t.length;o++){const u=t[o];for(let f=0;f<u.length;f++)if(Yl(i,u[f]))return!0}for(let o=0;o<i.length;o++)if(vy(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(Rd(i,t[o]))return!0;return!1}function Sw(i,t,o){if(i.length>1){if(Rd(i,t))return!0;for(let u=0;u<t.length;u++)if(Dd(t[u],i,o))return!0}for(let u=0;u<i.length;u++)if(Dd(i[u],t,o))return!0;return!1}function Rd(i,t){if(i.length===0||t.length===0)return!1;for(let o=0;o<i.length-1;o++){const u=i[o],f=i[o+1];for(let g=0;g<t.length-1;g++)if(Tw(u,f,t[g],t[g+1]))return!0}return!1}function Tw(i,t,o,u){return H(i,o,u)!==H(t,o,u)&&H(i,t,o)!==H(i,t,u)}function Dd(i,t,o){const u=o*o;if(t.length===1)return i.distSqr(t[0])<u;for(let f=1;f<t.length;f++)if(_y(i,t[f-1],t[f])<u)return!0;return!1}function _y(i,t,o){const u=t.distSqr(o);if(u===0)return i.distSqr(t);const f=((i.x-t.x)*(o.x-t.x)+(i.y-t.y)*(o.y-t.y))/u;return i.distSqr(f<0?t:f>1?o:o.sub(t)._mult(f)._add(t))}function vy(i,t){let o,u,f,g=!1;for(let y=0;y<i.length;y++){o=i[y];for(let w=0,E=o.length-1;w<o.length;E=w++)u=o[w],f=o[E],u.y>t.y!=f.y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(g=!g)}return g}function Yl(i,t){let o=!1;for(let u=0,f=i.length-1;u<i.length;f=u++){const g=i[u],y=i[f];g.y>t.y!=y.y>t.y&&t.x<(y.x-g.x)*(t.y-g.y)/(y.y-g.y)+g.x&&(o=!o)}return o}function Aw(i,t,o){const u=o[0],f=o[2];if(i.x<u.x&&t.x<u.x||i.x>f.x&&t.x>f.x||i.y<u.y&&t.y<u.y||i.y>f.y&&t.y>f.y)return!1;const g=H(i,t,o[0]);return g!==H(i,t,o[1])||g!==H(i,t,o[2])||g!==H(i,t,o[3])}function oc(i,t,o){const u=t.paint.get(i).value;return u.kind==="constant"?u.value:o.programConfigurations.get(t.id).getMaxValue(i)}function Mh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function zh(i,t,o,u,f){if(!t[0]&&!t[1])return i;const g=Ue.convert(t)._mult(f);o==="viewport"&&g._rotate(-u);const y=[];for(let w=0;w<i.length;w++)y.push(i[w].sub(g));return y}Ke("CircleBucket",Od,{omit:["layers"]});const Cw=new Qr({"circle-sort-key":new Rt(ke.layout_circle["circle-sort-key"])});var kw={paint:new Qr({"circle-radius":new Rt(ke.paint_circle["circle-radius"]),"circle-color":new Rt(ke.paint_circle["circle-color"]),"circle-blur":new Rt(ke.paint_circle["circle-blur"]),"circle-opacity":new Rt(ke.paint_circle["circle-opacity"]),"circle-translate":new Ct(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Ct(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ct(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ct(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Rt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Rt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Rt(ke.paint_circle["circle-stroke-opacity"])}),layout:Cw},il=typeof Float32Array!="undefined"?Float32Array:Array;function Fd(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xy(i,t,o){var u=t[0],f=t[1],g=t[2],y=t[3],w=t[4],E=t[5],M=t[6],B=t[7],U=t[8],W=t[9],K=t[10],ee=t[11],de=t[12],ge=t[13],Se=t[14],Le=t[15],Me=o[0],Fe=o[1],We=o[2],Ve=o[3];return i[0]=Me*u+Fe*w+We*U+Ve*de,i[1]=Me*f+Fe*E+We*W+Ve*ge,i[2]=Me*g+Fe*M+We*K+Ve*Se,i[3]=Me*y+Fe*B+We*ee+Ve*Le,i[4]=(Me=o[4])*u+(Fe=o[5])*w+(We=o[6])*U+(Ve=o[7])*de,i[5]=Me*f+Fe*E+We*W+Ve*ge,i[6]=Me*g+Fe*M+We*K+Ve*Se,i[7]=Me*y+Fe*B+We*ee+Ve*Le,i[8]=(Me=o[8])*u+(Fe=o[9])*w+(We=o[10])*U+(Ve=o[11])*de,i[9]=Me*f+Fe*E+We*W+Ve*ge,i[10]=Me*g+Fe*M+We*K+Ve*Se,i[11]=Me*y+Fe*B+We*ee+Ve*Le,i[12]=(Me=o[12])*u+(Fe=o[13])*w+(We=o[14])*U+(Ve=o[15])*de,i[13]=Me*f+Fe*E+We*W+Ve*ge,i[14]=Me*g+Fe*M+We*K+Ve*Se,i[15]=Me*y+Fe*B+We*ee+Ve*Le,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var Iw=xy;function Bd(){var i=new il(4);return il!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),i}function Lh(i,t,o,u){var f=new il(4);return f[0]=i,f[1]=t,f[2]=o,f[3]=u,f}function Oh(i,t,o){var u=t[0],f=t[1],g=t[2],y=t[3];return i[0]=o[0]*u+o[4]*f+o[8]*g+o[12]*y,i[1]=o[1]*u+o[5]*f+o[9]*g+o[13]*y,i[2]=o[2]*u+o[6]*f+o[10]*g+o[14]*y,i[3]=o[3]*u+o[7]*f+o[11]*g+o[15]*y,i}function wy(i,t){const o=Oh(Bd(),Lh(i.x,i.y,0,1),t);return new Ue(o[0]/o[3],o[1]/o[3])}Bd();class by extends Od{}Ke("HeatmapBucket",by,{omit:["layers"]});var Pw={paint:new Qr({"heatmap-radius":new Rt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Rt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ct(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ks(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ct(ke.paint_heatmap["heatmap-opacity"])})};function Nd(i,{width:t,height:o},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*o*u)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*o*u}`)}else f=new Uint8Array(t*o*u);return i.width=t,i.height=o,i.data=f,i}function Ey(i,{width:t,height:o},u){if(t===i.width&&o===i.height)return;const f=Nd({},{width:t,height:o},u);Ud(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,o)},u),i.width=t,i.height=o,i.data=f.data}function Ud(i,t,o,u,f,g){if(f.width===0||f.height===0)return t;if(f.width>i.width||f.height>i.height||o.x>i.width-f.width||o.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||u.x>t.width-f.width||u.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const y=i.data,w=t.data;for(let E=0;E<f.height;E++){const M=((o.y+E)*i.width+o.x)*g,B=((u.y+E)*t.width+u.x)*g;for(let U=0;U<f.width*g;U++)w[B+U]=y[M+U]}return t}class ac{constructor(t,o){Nd(this,t,1,o)}resize(t){Ey(this,t,1)}clone(){return new ac({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,f,g){Ud(t,o,u,f,g,1)}}class Di{constructor(t,o){Nd(this,t,4,o)}resize(t){Ey(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Di({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,f,g){Ud(t,o,u,f,g,4)}}function Sy(i){const t={},o=i.resolution||256,u=i.clips?i.clips.length:1,f=i.image||new Di({width:o,height:u}),g=(y,w,E)=>{t[i.evaluationKey]=E;const M=i.expression.evaluate(t);f.data[y+w+0]=Math.floor(255*M.r/M.a),f.data[y+w+1]=Math.floor(255*M.g/M.a),f.data[y+w+2]=Math.floor(255*M.b/M.a),f.data[y+w+3]=Math.floor(255*M.a)};if(i.clips)for(let y=0,w=0;y<u;++y,w+=4*o)for(let E=0,M=0;E<o;E++,M+=4){const B=E/(o-1),{start:U,end:W}=i.clips[y];g(w,M,U*(1-B)+W*B)}else for(let y=0,w=0;y<o;y++,w+=4)g(0,w,y/(o-1));return f}Ke("AlphaImage",ac),Ke("RGBAImage",Di);var Mw={paint:new Qr({"hillshade-illumination-direction":new Ct(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ct(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ct(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ct(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ct(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ct(ke.paint_hillshade["hillshade-accent-color"])})};const zw=Jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Lw}=zw;var Vd={exports:{}};function Rh(i,t,o){o=o||2;var u,f,g,y,w,E,M,B=t&&t.length,U=B?t[0]*o:i.length,W=Ty(i,0,U,o,!0),K=[];if(!W||W.next===W.prev)return K;if(B&&(W=function(de,ge,Se,Le){var Me,Fe,We,Ve=[];for(Me=0,Fe=ge.length;Me<Fe;Me++)(We=Ty(de,ge[Me]*Le,Me<Fe-1?ge[Me+1]*Le:de.length,Le,!1))===We.next&&(We.steiner=!0),Ve.push(Vw(We));for(Ve.sort(Bw),Me=0;Me<Ve.length;Me++)Se=Ya(Se=Nw(Ve[Me],Se),Se.next);return Se}(i,t,W,o)),i.length>80*o){u=g=i[0],f=y=i[1];for(var ee=o;ee<U;ee+=o)(w=i[ee])<u&&(u=w),(E=i[ee+1])<f&&(f=E),w>g&&(g=w),E>y&&(y=E);M=(M=Math.max(g-u,y-f))!==0?1/M:0}return sc(W,K,o,u,f,M),K}function Ty(i,t,o,u,f){var g,y;if(f===Gd(i,t,o,u)>0)for(g=t;g<o;g+=u)y=ky(g,i[g],i[g+1],y);else for(g=o-u;g>=t;g-=u)y=ky(g,i[g],i[g+1],y);return y&&Dh(y,y.next)&&(uc(y),y=y.next),y}function Ya(i,t){if(!i)return i;t||(t=i);var o,u=i;do if(o=!1,u.steiner||!Dh(u,u.next)&&cr(u.prev,u,u.next)!==0)u=u.next;else{if(uc(u),(u=t=u.prev)===u.next)break;o=!0}while(o||u!==t);return t}function sc(i,t,o,u,f,g,y){if(i){!y&&g&&function(B,U,W,K){var ee=B;do ee.z===null&&(ee.z=$d(ee.x,ee.y,U,W,K)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==B);ee.prevZ.nextZ=null,ee.prevZ=null,function(de){var ge,Se,Le,Me,Fe,We,Ve,pt,It=1;do{for(Se=de,de=null,Fe=null,We=0;Se;){for(We++,Le=Se,Ve=0,ge=0;ge<It&&(Ve++,Le=Le.nextZ);ge++);for(pt=It;Ve>0||pt>0&&Le;)Ve!==0&&(pt===0||!Le||Se.z<=Le.z)?(Me=Se,Se=Se.nextZ,Ve--):(Me=Le,Le=Le.nextZ,pt--),Fe?Fe.nextZ=Me:de=Me,Me.prevZ=Fe,Fe=Me;Se=Le}Fe.nextZ=null,It*=2}while(We>1)}(ee)}(i,u,f,g);for(var w,E,M=i;i.prev!==i.next;)if(w=i.prev,E=i.next,g?Rw(i,u,f,g):Ow(i))t.push(w.i/o),t.push(i.i/o),t.push(E.i/o),uc(i),i=E.next,M=E.next;else if((i=E)===M){y?y===1?sc(i=Dw(Ya(i),t,o),t,o,u,f,g,2):y===2&&Fw(i,t,o,u,f,g):sc(Ya(i),t,o,u,f,g,1);break}}}function Ow(i){var t=i.prev,o=i,u=i.next;if(cr(t,o,u)>=0)return!1;for(var f=i.next.next;f!==i.prev;){if(Kl(t.x,t.y,o.x,o.y,u.x,u.y,f.x,f.y)&&cr(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Rw(i,t,o,u){var f=i.prev,g=i,y=i.next;if(cr(f,g,y)>=0)return!1;for(var w=f.x>g.x?f.x>y.x?f.x:y.x:g.x>y.x?g.x:y.x,E=f.y>g.y?f.y>y.y?f.y:y.y:g.y>y.y?g.y:y.y,M=$d(f.x<g.x?f.x<y.x?f.x:y.x:g.x<y.x?g.x:y.x,f.y<g.y?f.y<y.y?f.y:y.y:g.y<y.y?g.y:y.y,t,o,u),B=$d(w,E,t,o,u),U=i.prevZ,W=i.nextZ;U&&U.z>=M&&W&&W.z<=B;){if(U!==i.prev&&U!==i.next&&Kl(f.x,f.y,g.x,g.y,y.x,y.y,U.x,U.y)&&cr(U.prev,U,U.next)>=0||(U=U.prevZ,W!==i.prev&&W!==i.next&&Kl(f.x,f.y,g.x,g.y,y.x,y.y,W.x,W.y)&&cr(W.prev,W,W.next)>=0))return!1;W=W.nextZ}for(;U&&U.z>=M;){if(U!==i.prev&&U!==i.next&&Kl(f.x,f.y,g.x,g.y,y.x,y.y,U.x,U.y)&&cr(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;W&&W.z<=B;){if(W!==i.prev&&W!==i.next&&Kl(f.x,f.y,g.x,g.y,y.x,y.y,W.x,W.y)&&cr(W.prev,W,W.next)>=0)return!1;W=W.nextZ}return!0}function Dw(i,t,o){var u=i;do{var f=u.prev,g=u.next.next;!Dh(f,g)&&Ay(f,u,u.next,g)&&lc(f,g)&&lc(g,f)&&(t.push(f.i/o),t.push(u.i/o),t.push(g.i/o),uc(u),uc(u.next),u=i=g),u=u.next}while(u!==i);return Ya(u)}function Fw(i,t,o,u,f,g){var y=i;do{for(var w=y.next.next;w!==y.prev;){if(y.i!==w.i&&$w(y,w)){var E=Cy(y,w);return y=Ya(y,y.next),E=Ya(E,E.next),sc(y,t,o,u,f,g),void sc(E,t,o,u,f,g)}w=w.next}y=y.next}while(y!==i)}function Bw(i,t){return i.x-t.x}function Nw(i,t){var o=function(g,y){var w,E=y,M=g.x,B=g.y,U=-1/0;do{if(B<=E.y&&B>=E.next.y&&E.next.y!==E.y){var W=E.x+(B-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(W<=M&&W>U){if(U=W,W===M){if(B===E.y)return E;if(B===E.next.y)return E.next}w=E.x<E.next.x?E:E.next}}E=E.next}while(E!==y);if(!w)return null;if(M===U)return w;var K,ee=w,de=w.x,ge=w.y,Se=1/0;E=w;do M>=E.x&&E.x>=de&&M!==E.x&&Kl(B<ge?M:U,B,de,ge,B<ge?U:M,B,E.x,E.y)&&(K=Math.abs(B-E.y)/(M-E.x),lc(E,g)&&(K<Se||K===Se&&(E.x>w.x||E.x===w.x&&Uw(w,E)))&&(w=E,Se=K)),E=E.next;while(E!==ee);return w}(i,t);if(!o)return t;var u=Cy(o,i),f=Ya(o,o.next);return Ya(u,u.next),t===o?f:t}function Uw(i,t){return cr(i.prev,i,t.prev)<0&&cr(t.next,i,i.next)<0}function $d(i,t,o,u,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-o)*f)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*f)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Vw(i){var t=i,o=i;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==i);return o}function Kl(i,t,o,u,f,g,y,w){return(f-y)*(t-w)-(i-y)*(g-w)>=0&&(i-y)*(u-w)-(o-y)*(t-w)>=0&&(o-y)*(g-w)-(f-y)*(u-w)>=0}function $w(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(o,u){var f=o;do{if(f.i!==o.i&&f.next.i!==o.i&&f.i!==u.i&&f.next.i!==u.i&&Ay(f,f.next,o,u))return!0;f=f.next}while(f!==o);return!1}(i,t)&&(lc(i,t)&&lc(t,i)&&function(o,u){var f=o,g=!1,y=(o.x+u.x)/2,w=(o.y+u.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&y<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(g=!g),f=f.next;while(f!==o);return g}(i,t)&&(cr(i.prev,i,t.prev)||cr(i,t.prev,t))||Dh(i,t)&&cr(i.prev,i,i.next)>0&&cr(t.prev,t,t.next)>0)}function cr(i,t,o){return(t.y-i.y)*(o.x-t.x)-(t.x-i.x)*(o.y-t.y)}function Dh(i,t){return i.x===t.x&&i.y===t.y}function Ay(i,t,o,u){var f=Bh(cr(i,t,o)),g=Bh(cr(i,t,u)),y=Bh(cr(o,u,i)),w=Bh(cr(o,u,t));return f!==g&&y!==w||!(f!==0||!Fh(i,o,t))||!(g!==0||!Fh(i,u,t))||!(y!==0||!Fh(o,i,u))||!(w!==0||!Fh(o,t,u))}function Fh(i,t,o){return t.x<=Math.max(i.x,o.x)&&t.x>=Math.min(i.x,o.x)&&t.y<=Math.max(i.y,o.y)&&t.y>=Math.min(i.y,o.y)}function Bh(i){return i>0?1:i<0?-1:0}function lc(i,t){return cr(i.prev,i,i.next)<0?cr(i,t,i.next)>=0&&cr(i,i.prev,t)>=0:cr(i,t,i.prev)<0||cr(i,i.next,t)<0}function Cy(i,t){var o=new jd(i.i,i.x,i.y),u=new jd(t.i,t.x,t.y),f=i.next,g=t.prev;return i.next=t,t.prev=i,o.next=f,f.prev=o,u.next=o,o.prev=u,g.next=u,u.prev=g,u}function ky(i,t,o,u){var f=new jd(i,t,o);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function uc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function jd(i,t,o){this.i=i,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Gd(i,t,o,u){for(var f=0,g=t,y=o-u;g<o;g+=u)f+=(i[y]-i[g])*(i[g+1]+i[y+1]),y=g;return f}Vd.exports=Rh,Vd.exports.default=Rh,Rh.deviation=function(i,t,o,u){var f=t&&t.length,g=Math.abs(Gd(i,0,f?t[0]*o:i.length,o));if(f)for(var y=0,w=t.length;y<w;y++)g-=Math.abs(Gd(i,t[y]*o,y<w-1?t[y+1]*o:i.length,o));var E=0;for(y=0;y<u.length;y+=3){var M=u[y]*o,B=u[y+1]*o,U=u[y+2]*o;E+=Math.abs((i[M]-i[U])*(i[B+1]-i[M+1])-(i[M]-i[B])*(i[U+1]-i[M+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},Rh.flatten=function(i){for(var t=i[0][0].length,o={vertices:[],holes:[],dimensions:t},u=0,f=0;f<i.length;f++){for(var g=0;g<i[f].length;g++)for(var y=0;y<t;y++)o.vertices.push(i[f][g][y]);f>0&&o.holes.push(u+=i[f-1].length)}return o};var Iy=Vd.exports;function jw(i,t,o,u,f){Py(i,t,o||0,u||i.length-1,f||Gw)}function Py(i,t,o,u,f){for(;u>o;){if(u-o>600){var g=u-o+1,y=t-o+1,w=Math.log(g),E=.5*Math.exp(2*w/3),M=.5*Math.sqrt(w*E*(g-E)/g)*(y-g/2<0?-1:1);Py(i,t,Math.max(o,Math.floor(t-y*E/g+M)),Math.min(u,Math.floor(t+(g-y)*E/g+M)),f)}var B=i[t],U=o,W=u;for(cc(i,o,t),f(i[u],B)>0&&cc(i,o,u);U<W;){for(cc(i,U,W),U++,W--;f(i[U],B)<0;)U++;for(;f(i[W],B)>0;)W--}f(i[o],B)===0?cc(i,o,W):cc(i,++W,u),W<=t&&(o=W+1),t<=W&&(u=W-1)}}function cc(i,t,o){var u=i[t];i[t]=i[o],i[o]=u}function Gw(i,t){return i<t?-1:i>t?1:0}function Zd(i,t){const o=i.length;if(o<=1)return[i];const u=[];let f,g;for(let y=0;y<o;y++){const w=se(i[y]);w!==0&&(i[y].area=Math.abs(w),g===void 0&&(g=w<0),g===w<0?(f&&u.push(f),f=[i[y]]):f.push(i[y]))}if(f&&u.push(f),t>1)for(let y=0;y<u.length;y++)u[y].length<=t||(jw(u[y],t,1,u[y].length-1,Zw),u[y]=u[y].slice(0,t));return u}function Zw(i,t){return t.area-i.area}function qd(i,t,o){const u=o.patternDependencies;let f=!1;for(const g of t){const y=g.paint.get(`${i}-pattern`);y.isConstant()||(f=!0);const w=y.constantOr(null);w&&(f=!0,u[w.to]=!0,u[w.from]=!0)}return f}function Wd(i,t,o,u,f){const g=f.patternDependencies;for(const y of t){const w=y.paint.get(`${i}-pattern`).value;if(w.kind!=="constant"){let E=w.evaluate({zoom:u-1},o,{},f.availableImages),M=w.evaluate({zoom:u},o,{},f.availableImages),B=w.evaluate({zoom:u+1},o,{},f.availableImages);E=E&&E.name?E.name:E,M=M&&M.name?M.name:M,B=B&&B.name?B.name:B,g[E]=!0,g[M]=!0,g[B]=!0,o.patterns[y.id]={min:E,mid:M,max:B}}}return o}class Xd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kt,this.indexArray=new hi,this.indexArray2=new Ri,this.programConfigurations=new tl(t.layers,t.zoom),this.segments=new An,this.segments2=new An,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.hasPattern=qd("fill",this.layers,o);const f=this.layers[0].layout.get("fill-sort-key"),g=!f.isConstant(),y=[];for(const{feature:w,id:E,index:M,sourceLayerIndex:B}of t){const U=this.layers[0]._featureFilter.needGeometry,W=rl(w,U);if(!this.layers[0]._featureFilter.filter(new Fn(this.zoom),W,u))continue;const K=g?f.evaluate(W,{},u,o.availableImages):void 0,ee={id:E,properties:w.properties,type:w.type,sourceLayerIndex:B,index:M,geometry:U?W.geometry:nl(w),patterns:{},sortKey:K};y.push(ee)}g&&y.sort((w,E)=>w.sortKey-E.sortKey);for(const w of y){const{geometry:E,index:M,sourceLayerIndex:B}=w;if(this.hasPattern){const U=Wd("fill",this.layers,w,this.zoom,o);this.patternFeatures.push(U)}else this.addFeature(w,E,M,u,{});o.featureIndex.insert(t[M].feature,E,M,B,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}addFeatures(t,o,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Lw),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,u,f,g){for(const y of Zd(o,500)){let w=0;for(const K of y)w+=K.length;const E=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),M=E.vertexLength,B=[],U=[];for(const K of y){if(K.length===0)continue;K!==y[0]&&U.push(B.length/2);const ee=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),de=ee.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(de+K.length-1,de),B.push(K[0].x),B.push(K[0].y);for(let ge=1;ge<K.length;ge++)this.layoutVertexArray.emplaceBack(K[ge].x,K[ge].y),this.indexArray2.emplaceBack(de+ge-1,de+ge),B.push(K[ge].x),B.push(K[ge].y);ee.vertexLength+=K.length,ee.primitiveLength+=K.length}const W=Iy(B,U);for(let K=0;K<W.length;K+=3)this.indexArray.emplaceBack(M+W[K],M+W[K+1],M+W[K+2]);E.vertexLength+=w,E.primitiveLength+=W.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,g,f)}}Ke("FillBucket",Xd,{omit:["layers","patternFeatures"]});const qw=new Qr({"fill-sort-key":new Rt(ke.layout_fill["fill-sort-key"])});var Ww={paint:new Qr({"fill-antialias":new Ct(ke.paint_fill["fill-antialias"]),"fill-opacity":new Rt(ke.paint_fill["fill-opacity"]),"fill-color":new Rt(ke.paint_fill["fill-color"]),"fill-outline-color":new Rt(ke.paint_fill["fill-outline-color"]),"fill-translate":new Ct(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Ct(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wa(ke.paint_fill["fill-pattern"])}),layout:qw};const Xw=Jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:Hw}=Xw;var Ka={},Yw=Ue,My=Jl;function Jl(i,t,o,u,f){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=f,i.readFields(Kw,this,t)}function Kw(i,t,o){i==1?t.id=o.readVarint():i==2?function(u,f){for(var g=u.readVarint()+u.pos;u.pos<g;){var y=f._keys[u.readVarint()],w=f._values[u.readVarint()];f.properties[y]=w}}(o,t):i==3?t.type=o.readVarint():i==4&&(t._geometry=o.pos)}function Jw(i){for(var t,o,u=0,f=0,g=i.length,y=g-1;f<g;y=f++)u+=((o=i[y]).x-(t=i[f]).x)*(t.y+o.y);return u}Jl.types=["Unknown","Point","LineString","Polygon"],Jl.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,o=i.readVarint()+i.pos,u=1,f=0,g=0,y=0,w=[];i.pos<o;){if(f<=0){var E=i.readVarint();u=7&E,f=E>>3}if(f--,u===1||u===2)g+=i.readSVarint(),y+=i.readSVarint(),u===1&&(t&&w.push(t),t=[]),t.push(new Yw(g,y));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&w.push(t),w},Jl.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,o=1,u=0,f=0,g=0,y=1/0,w=-1/0,E=1/0,M=-1/0;i.pos<t;){if(u<=0){var B=i.readVarint();o=7&B,u=B>>3}if(u--,o===1||o===2)(f+=i.readSVarint())<y&&(y=f),f>w&&(w=f),(g+=i.readSVarint())<E&&(E=g),g>M&&(M=g);else if(o!==7)throw new Error("unknown command "+o)}return[y,E,w,M]},Jl.prototype.toGeoJSON=function(i,t,o){var u,f,g=this.extent*Math.pow(2,o),y=this.extent*i,w=this.extent*t,E=this.loadGeometry(),M=Jl.types[this.type];function B(K){for(var ee=0;ee<K.length;ee++){var de=K[ee];K[ee]=[360*(de.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+w)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(u=0;u<E.length;u++)U[u]=E[u][0];B(E=U);break;case 2:for(u=0;u<E.length;u++)B(E[u]);break;case 3:for(E=function(K){var ee=K.length;if(ee<=1)return[K];for(var de,ge,Se=[],Le=0;Le<ee;Le++){var Me=Jw(K[Le]);Me!==0&&(ge===void 0&&(ge=Me<0),ge===Me<0?(de&&Se.push(de),de=[K[Le]]):de.push(K[Le]))}return de&&Se.push(de),Se}(E),u=0;u<E.length;u++)for(f=0;f<E[u].length;f++)B(E[u][f])}E.length===1?E=E[0]:M="Multi"+M;var W={type:"Feature",geometry:{type:M,coordinates:E},properties:this.properties};return"id"in this&&(W.id=this.id),W};var Qw=My,zy=Ly;function Ly(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(eb,this,t),this.length=this._features.length}function eb(i,t,o){i===15?t.version=o.readVarint():i===1?t.name=o.readString():i===5?t.extent=o.readVarint():i===2?t._features.push(o.pos):i===3?t._keys.push(o.readString()):i===4&&t._values.push(function(u){for(var f=null,g=u.readVarint()+u.pos;u.pos<g;){var y=u.readVarint()>>3;f=y===1?u.readString():y===2?u.readFloat():y===3?u.readDouble():y===4?u.readVarint64():y===5?u.readVarint():y===6?u.readSVarint():y===7?u.readBoolean():null}return f}(o))}Ly.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new Qw(this._pbf,t,this.extent,this._keys,this._values)};var tb=zy;function nb(i,t,o){if(i===3){var u=new tb(o,o.readVarint()+o.pos);u.length&&(t[u.name]=u)}}Ka.VectorTile=function(i,t){this.layers=i.readFields(nb,{},t)},Ka.VectorTileFeature=My,Ka.VectorTileLayer=zy;const rb=Ka.VectorTileFeature.types,Hd=Math.pow(2,13);function hc(i,t,o,u,f,g,y,w){i.emplaceBack(t,o,2*Math.floor(u*Hd)+y,f*Hd*2,g*Hd*2,Math.round(w))}class Yd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new hi,this.programConfigurations=new tl(t.layers,t.zoom),this.segments=new An,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.features=[],this.hasPattern=qd("fill-extrusion",this.layers,o);for(const{feature:f,id:g,index:y,sourceLayerIndex:w}of t){const E=this.layers[0]._featureFilter.needGeometry,M=rl(f,E);if(!this.layers[0]._featureFilter.filter(new Fn(this.zoom),M,u))continue;const B={id:g,sourceLayerIndex:w,index:y,geometry:E?M.geometry:nl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Wd("fill-extrusion",this.layers,B,this.zoom,o)):this.addFeature(B,B.geometry,y,u,{}),o.featureIndex.insert(f,B.geometry,y,w,this.index,!0)}}addFeatures(t,o,u){for(const f of this.features){const{geometry:g}=f;this.addFeature(f,g,f.index,o,u)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Hw),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,u,f,g){for(const y of Zd(o,500)){let w=0;for(const K of y)w+=K.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const K of y){if(K.length===0||ob(K))continue;let ee=0;for(let de=0;de<K.length;de++){const ge=K[de];if(de>=1){const Se=K[de-1];if(!ib(ge,Se)){E.vertexLength+4>An.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Le=ge.sub(Se)._perp()._unit(),Me=Se.dist(ge);ee+Me>32768&&(ee=0),hc(this.layoutVertexArray,ge.x,ge.y,Le.x,Le.y,0,0,ee),hc(this.layoutVertexArray,ge.x,ge.y,Le.x,Le.y,0,1,ee),ee+=Me,hc(this.layoutVertexArray,Se.x,Se.y,Le.x,Le.y,0,0,ee),hc(this.layoutVertexArray,Se.x,Se.y,Le.x,Le.y,0,1,ee);const Fe=E.vertexLength;this.indexArray.emplaceBack(Fe,Fe+2,Fe+1),this.indexArray.emplaceBack(Fe+1,Fe+2,Fe+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+w>An.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray)),rb[t.type]!=="Polygon")continue;const M=[],B=[],U=E.vertexLength;for(const K of y)if(K.length!==0){K!==y[0]&&B.push(M.length/2);for(let ee=0;ee<K.length;ee++){const de=K[ee];hc(this.layoutVertexArray,de.x,de.y,0,0,1,1,0),M.push(de.x),M.push(de.y)}}const W=Iy(M,B);for(let K=0;K<W.length;K+=3)this.indexArray.emplaceBack(U+W[K],U+W[K+2],U+W[K+1]);E.primitiveLength+=W.length/3,E.vertexLength+=w}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,g,f)}}function ib(i,t){return i.x===t.x&&(i.x<0||i.x>br)||i.y===t.y&&(i.y<0||i.y>br)}function ob(i){return i.every(t=>t.x<0)||i.every(t=>t.x>br)||i.every(t=>t.y<0)||i.every(t=>t.y>br)}Ke("FillExtrusionBucket",Yd,{omit:["layers","features"]});var ab={paint:new Qr({"fill-extrusion-opacity":new Ct(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Rt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ct(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ct(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wa(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Rt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Rt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ct(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function fc(i,t){return i.x*t.x+i.y*t.y}function Oy(i,t){if(i.length===1){let o=0;const u=t[o++];let f;for(;!f||u.equals(f);)if(f=t[o++],!f)return 1/0;for(;o<t.length;o++){const g=t[o],y=i[0],w=f.sub(u),E=g.sub(u),M=y.sub(u),B=fc(w,w),U=fc(w,E),W=fc(E,E),K=fc(M,w),ee=fc(M,E),de=B*W-U*U,ge=(W*K-U*ee)/de,Se=(B*ee-U*K)/de,Le=u.z*(1-ge-Se)+f.z*ge+g.z*Se;if(isFinite(Le))return Le}return 1/0}{let o=1/0;for(const u of t)o=Math.min(o,u.z);return o}}const sb=Jn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:lb}=sb,ub=Jn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:cb}=ub,hb=Ka.VectorTileFeature.types,fb=Math.cos(Math.PI/180*37.5),Ry=Math.pow(2,14)/.5;class Kd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Qn,this.layoutVertexArray2=new $t,this.indexArray=new hi,this.programConfigurations=new tl(t.layers,t.zoom),this.segments=new An,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.hasPattern=qd("line",this.layers,o);const f=this.layers[0].layout.get("line-sort-key"),g=!f.isConstant(),y=[];for(const{feature:w,id:E,index:M,sourceLayerIndex:B}of t){const U=this.layers[0]._featureFilter.needGeometry,W=rl(w,U);if(!this.layers[0]._featureFilter.filter(new Fn(this.zoom),W,u))continue;const K=g?f.evaluate(W,{},u):void 0,ee={id:E,properties:w.properties,type:w.type,sourceLayerIndex:B,index:M,geometry:U?W.geometry:nl(w),patterns:{},sortKey:K};y.push(ee)}g&&y.sort((w,E)=>w.sortKey-E.sortKey);for(const w of y){const{geometry:E,index:M,sourceLayerIndex:B}=w;if(this.hasPattern){const U=Wd("line",this.layers,w,this.zoom,o);this.patternFeatures.push(U)}else this.addFeature(w,E,M,u,{});o.featureIndex.insert(t[M].feature,E,M,B,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}addFeatures(t,o,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,cb)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,lb),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,u,f,g){const y=this.layers[0].layout,w=y.get("line-join").evaluate(t,{}),E=y.get("line-cap"),M=y.get("line-miter-limit"),B=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const U of o)this.addLine(U,t,w,E,M,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,g,f)}addLine(t,o,u,f,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<t.length-1;Se++)this.totalDistance+=t[Se].dist(t[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=hb[o.type]==="Polygon";let E=t.length;for(;E>=2&&t[E-1].equals(t[E-2]);)E--;let M=0;for(;M<E-1&&t[M].equals(t[M+1]);)M++;if(E<(w?3:2))return;u==="bevel"&&(g=1.05);const B=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let W,K,ee,de,ge;this.e1=this.e2=-1,w&&(W=t[E-2],ge=t[M].sub(W)._unit()._perp());for(let Se=M;Se<E;Se++){if(ee=Se===E-1?w?t[M+1]:void 0:t[Se+1],ee&&t[Se].equals(ee))continue;ge&&(de=ge),W&&(K=W),W=t[Se],ge=ee?ee.sub(W)._unit()._perp():de,de=de||ge;let Le=de.add(ge);Le.x===0&&Le.y===0||Le._unit();const Me=de.x*ge.x+de.y*ge.y,Fe=Le.x*ge.x+Le.y*ge.y,We=Fe!==0?1/Fe:1/0,Ve=2*Math.sqrt(2-2*Fe),pt=Fe<fb&&K&&ee,It=de.x*ge.y-de.y*ge.x>0;if(pt&&Se>M){const it=W.dist(K);if(it>2*B){const gt=W.sub(W.sub(K)._mult(B/it)._round());this.updateDistance(K,gt),this.addCurrentVertex(gt,de,0,0,U),K=gt}}const lt=K&&ee;let ut=lt?u:w?"butt":f;if(lt&&ut==="round"&&(We<y?ut="miter":We<=2&&(ut="fakeround")),ut==="miter"&&We>g&&(ut="bevel"),ut==="bevel"&&(We>2&&(ut="flipbevel"),We<g&&(ut="miter")),K&&this.updateDistance(K,W),ut==="miter")Le._mult(We),this.addCurrentVertex(W,Le,0,0,U);else if(ut==="flipbevel"){if(We>100)Le=ge.mult(-1);else{const it=We*de.add(ge).mag()/de.sub(ge).mag();Le._perp()._mult(it*(It?-1:1))}this.addCurrentVertex(W,Le,0,0,U),this.addCurrentVertex(W,Le.mult(-1),0,0,U)}else if(ut==="bevel"||ut==="fakeround"){const it=-Math.sqrt(We*We-1),gt=It?it:0,ct=It?0:it;if(K&&this.addCurrentVertex(W,de,gt,ct,U),ut==="fakeround"){const Qe=Math.round(180*Ve/Math.PI/20);for(let Ot=1;Ot<Qe;Ot++){let Mt=Ot/Qe;if(Mt!==.5){const gn=Mt-.5;Mt+=Mt*gn*(Mt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*gn*gn+(.848013+Me*(.215638*Me-1.06021)))}const sn=ge.sub(de)._mult(Mt)._add(de)._unit()._mult(It?-1:1);this.addHalfVertex(W,sn.x,sn.y,!1,It,0,U)}}ee&&this.addCurrentVertex(W,ge,-gt,-ct,U)}else if(ut==="butt")this.addCurrentVertex(W,Le,0,0,U);else if(ut==="square"){const it=K?1:-1;this.addCurrentVertex(W,Le,it,it,U)}else ut==="round"&&(K&&(this.addCurrentVertex(W,de,0,0,U),this.addCurrentVertex(W,de,1,1,U,!0)),ee&&(this.addCurrentVertex(W,ge,-1,-1,U,!0),this.addCurrentVertex(W,ge,0,0,U)));if(pt&&Se<E-1){const it=W.dist(ee);if(it>2*B){const gt=W.add(ee.sub(W)._mult(B/it)._round());this.updateDistance(W,gt),this.addCurrentVertex(gt,ge,0,0,U),W=gt}}}}addCurrentVertex(t,o,u,f,g,y=!1){const w=o.y*f-o.x,E=-o.y-o.x*f;this.addHalfVertex(t,o.x+o.y*u,o.y-o.x*u,y,!1,u,g),this.addHalfVertex(t,w,E,y,!0,-f,g),this.distance>Ry/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,o,u,f,g,y))}addHalfVertex({x:t,y:o},u,f,g,y,w,E){const M=.5*(this.lineClips?this.scaledDistance*(Ry-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(g?1:0),(o<<1)+(y?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),E.primitiveLength++),y?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}Ke("LineBucket",Kd,{omit:["layers","patternFeatures"]});const db=new Qr({"line-cap":new Ct(ke.layout_line["line-cap"]),"line-join":new Rt(ke.layout_line["line-join"]),"line-miter-limit":new Ct(ke.layout_line["line-miter-limit"]),"line-round-limit":new Ct(ke.layout_line["line-round-limit"]),"line-sort-key":new Rt(ke.layout_line["line-sort-key"])});var Dy={paint:new Qr({"line-opacity":new Rt(ke.paint_line["line-opacity"]),"line-color":new Rt(ke.paint_line["line-color"]),"line-translate":new Ct(ke.paint_line["line-translate"]),"line-translate-anchor":new Ct(ke.paint_line["line-translate-anchor"]),"line-width":new Rt(ke.paint_line["line-width"]),"line-gap-width":new Rt(ke.paint_line["line-gap-width"]),"line-offset":new Rt(ke.paint_line["line-offset"]),"line-blur":new Rt(ke.paint_line["line-blur"]),"line-dasharray":new Gl(ke.paint_line["line-dasharray"]),"line-pattern":new Wa(ke.paint_line["line-pattern"]),"line-gradient":new Ks(ke.paint_line["line-gradient"])}),layout:db};const Fy=new class extends Rt{possiblyEvaluate(i,t){return t=new Fn(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(i,t)}evaluate(i,t,o,u){return t=te({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(i,t,o,u)}}(Dy.paint.properties["line-width"].specification);function By(i,t){return t>0?t+2*i:i}Fy.useIntegerZoom=!0;const pb=Jn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mb=Jn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Jn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const gb=Jn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Jn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ny=Jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),yb=Jn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function _b(i,t,o){return i.sections.forEach(u=>{u.text=function(f,g,y){const w=g.layout.get("text-transform").evaluate(y,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),Jr.applyArabicShaping&&(f=Jr.applyArabicShaping(f)),f}(u.text,t,o)}),i}Jn([{name:"triangle",components:3,type:"Uint16"}]),Jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Jn([{type:"Float32",name:"offsetX"}]),Jn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const dc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ir=24,Jd=Cn,Uy=function(i,t,o,u,f){var g,y,w=8*f-u-1,E=(1<<w)-1,M=E>>1,B=-7,U=o?f-1:0,W=o?-1:1,K=i[t+U];for(U+=W,g=K&(1<<-B)-1,K>>=-B,B+=w;B>0;g=256*g+i[t+U],U+=W,B-=8);for(y=g&(1<<-B)-1,g>>=-B,B+=u;B>0;y=256*y+i[t+U],U+=W,B-=8);if(g===0)g=1-M;else{if(g===E)return y?NaN:1/0*(K?-1:1);y+=Math.pow(2,u),g-=M}return(K?-1:1)*y*Math.pow(2,g-u)},Vy=function(i,t,o,u,f,g){var y,w,E,M=8*g-f-1,B=(1<<M)-1,U=B>>1,W=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=u?0:g-1,ee=u?1:-1,de=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(w=isNaN(t)?1:0,y=B):(y=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-y))<1&&(y--,E*=2),(t+=y+U>=1?W/E:W*Math.pow(2,1-U))*E>=2&&(y++,E/=2),y+U>=B?(w=0,y=B):y+U>=1?(w=(t*E-1)*Math.pow(2,f),y+=U):(w=t*Math.pow(2,U-1)*Math.pow(2,f),y=0));f>=8;i[o+K]=255&w,K+=ee,w/=256,f-=8);for(y=y<<f|w,M+=f;M>0;i[o+K]=255&y,K+=ee,y/=256,M-=8);i[o+K-ee]|=128*de};function Cn(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Cn.Varint=0,Cn.Fixed64=1,Cn.Bytes=2,Cn.Fixed32=5;var Ja,Qd=4294967296,$y=1/Qd,jy=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function _a(i){return i.type===Cn.Bytes?i.readVarint()+i.pos:i.pos+1}function Ql(i,t,o){return o?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function Gy(i,t,o){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(u);for(var f=o.pos-1;f>=i;f--)o.buf[f+u]=o.buf[f]}function vb(i,t){for(var o=0;o<i.length;o++)t.writeVarint(i[o])}function xb(i,t){for(var o=0;o<i.length;o++)t.writeSVarint(i[o])}function wb(i,t){for(var o=0;o<i.length;o++)t.writeFloat(i[o])}function bb(i,t){for(var o=0;o<i.length;o++)t.writeDouble(i[o])}function Eb(i,t){for(var o=0;o<i.length;o++)t.writeBoolean(i[o])}function Sb(i,t){for(var o=0;o<i.length;o++)t.writeFixed32(i[o])}function Tb(i,t){for(var o=0;o<i.length;o++)t.writeSFixed32(i[o])}function Ab(i,t){for(var o=0;o<i.length;o++)t.writeFixed64(i[o])}function Cb(i,t){for(var o=0;o<i.length;o++)t.writeSFixed64(i[o])}function Nh(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function eu(i,t,o){i[o]=t,i[o+1]=t>>>8,i[o+2]=t>>>16,i[o+3]=t>>>24}function Zy(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function kb(i,t,o){i===1&&o.readMessage(Ib,t)}function Ib(i,t,o){if(i===3){const{id:u,bitmap:f,width:g,height:y,left:w,top:E,advance:M}=o.readMessage(Pb,{});t.push({id:u,bitmap:new ac({width:g+6,height:y+6},f),metrics:{width:g,height:y,left:w,top:E,advance:M}})}}function Pb(i,t,o){i===1?t.id=o.readVarint():i===2?t.bitmap=o.readBytes():i===3?t.width=o.readVarint():i===4?t.height=o.readVarint():i===5?t.left=o.readSVarint():i===6?t.top=o.readSVarint():i===7&&(t.advance=o.readVarint())}function qy(i){let t=0,o=0;for(const y of i)t+=y.w*y.h,o=Math.max(o,y.w);i.sort((y,w)=>w.h-y.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let f=0,g=0;for(const y of i)for(let w=u.length-1;w>=0;w--){const E=u[w];if(!(y.w>E.w||y.h>E.h)){if(y.x=E.x,y.y=E.y,g=Math.max(g,y.y+y.h),f=Math.max(f,y.x+y.w),y.w===E.w&&y.h===E.h){const M=u.pop();w<u.length&&(u[w]=M)}else y.h===E.h?(E.x+=y.w,E.w-=y.w):y.w===E.w?(E.y+=y.h,E.h-=y.h):(u.push({x:E.x+y.w,y:E.y,w:E.w-y.w,h:y.h}),E.y+=y.h,E.h-=y.h);break}}return{w:f,h:g,fill:t/(f*g)||0}}Cn.prototype={destroy:function(){this.buf=null},readFields:function(i,t,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),f=u>>3,g=this.pos;this.type=7&u,i(f,t,this),this.pos===g&&this.skip(u)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=Nh(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Zy(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Nh(this.buf,this.pos)+Nh(this.buf,this.pos+4)*Qd;return this.pos+=8,i},readSFixed64:function(){var i=Nh(this.buf,this.pos)+Zy(this.buf,this.pos+4)*Qd;return this.pos+=8,i},readFloat:function(){var i=Uy(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Uy(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,o,u=this.buf;return t=127&(o=u[this.pos++]),o<128?t:(t|=(127&(o=u[this.pos++]))<<7,o<128?t:(t|=(127&(o=u[this.pos++]))<<14,o<128?t:(t|=(127&(o=u[this.pos++]))<<21,o<128?t:function(f,g,y){var w,E,M=y.buf;if(w=(112&(E=M[y.pos++]))>>4,E<128||(w|=(127&(E=M[y.pos++]))<<3,E<128)||(w|=(127&(E=M[y.pos++]))<<10,E<128)||(w|=(127&(E=M[y.pos++]))<<17,E<128)||(w|=(127&(E=M[y.pos++]))<<24,E<128)||(w|=(1&(E=M[y.pos++]))<<31,E<128))return Ql(f,w,g);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&jy?function(o,u,f){return jy.decode(o.subarray(u,f))}(this.buf,t,i):function(o,u,f){for(var g="",y=u;y<f;){var w,E,M,B=o[y],U=null,W=B>239?4:B>223?3:B>191?2:1;if(y+W>f)break;W===1?B<128&&(U=B):W===2?(192&(w=o[y+1]))==128&&(U=(31&B)<<6|63&w)<=127&&(U=null):W===3?(E=o[y+2],(192&(w=o[y+1]))==128&&(192&E)==128&&((U=(15&B)<<12|(63&w)<<6|63&E)<=2047||U>=55296&&U<=57343)&&(U=null)):W===4&&(E=o[y+2],M=o[y+3],(192&(w=o[y+1]))==128&&(192&E)==128&&(192&M)==128&&((U=(15&B)<<18|(63&w)<<12|(63&E)<<6|63&M)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,W=1):U>65535&&(U-=65536,g+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),g+=String.fromCharCode(U),y+=W}return g}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Cn.Bytes)return i.push(this.readVarint(t));var o=_a(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Cn.Bytes)return i.push(this.readSVarint());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Cn.Bytes)return i.push(this.readBoolean());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Cn.Bytes)return i.push(this.readFloat());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Cn.Bytes)return i.push(this.readDouble());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Cn.Bytes)return i.push(this.readFixed32());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Cn.Bytes)return i.push(this.readSFixed32());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Cn.Bytes)return i.push(this.readFixed64());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Cn.Bytes)return i.push(this.readSFixed64());var t=_a(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Cn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Cn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Cn.Fixed32)this.pos+=4;else{if(t!==Cn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),eu(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),eu(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),eu(this.buf,-1&i,this.pos),eu(this.buf,Math.floor(i*$y),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),eu(this.buf,-1&i,this.pos),eu(this.buf,Math.floor(i*$y),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,o){var u,f;if(t>=0?(u=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(g,y,w){w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,w.buf[w.pos]=127&(g>>>=7)}(u,0,o),function(g,y){var w=(7&g)<<4;y.buf[y.pos++]|=w|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(f,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(u,f,g){for(var y,w,E=0;E<f.length;E++){if((y=f.charCodeAt(E))>55295&&y<57344){if(!w){y>56319||E+1===f.length?(u[g++]=239,u[g++]=191,u[g++]=189):w=y;continue}if(y<56320){u[g++]=239,u[g++]=191,u[g++]=189,w=y;continue}y=w-55296<<10|y-56320|65536,w=null}else w&&(u[g++]=239,u[g++]=191,u[g++]=189,w=null);y<128?u[g++]=y:(y<2048?u[g++]=y>>6|192:(y<65536?u[g++]=y>>12|224:(u[g++]=y>>18|240,u[g++]=y>>12&63|128),u[g++]=y>>6&63|128),u[g++]=63&y|128)}return g}(this.buf,i,this.pos);var o=this.pos-t;o>=128&&Gy(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),Vy(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Vy(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,t){this.pos++;var o=this.pos;i(t,this);var u=this.pos-o;u>=128&&Gy(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,t,o){this.writeTag(i,Cn.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,vb,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,xb,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,Eb,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,wb,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,bb,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,Sb,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,Tb,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,Ab,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,Cb,t)},writeBytesField:function(i,t){this.writeTag(i,Cn.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Cn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Cn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Cn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Cn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Cn.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Cn.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Cn.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Cn.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Cn.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,Boolean(t))}};class ep{constructor(t,{pixelRatio:o,version:u,stretchX:f,stretchY:g,content:y}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=f,this.stretchY=g,this.content=y,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Wy{constructor(t,o){const u={},f={};this.haveRenderCallbacks=[];const g=[];this.addImages(t,u,g),this.addImages(o,f,g);const{w:y,h:w}=qy(g),E=new Di({width:y||1,height:w||1});for(const M in t){const B=t[M],U=u[M].paddedRect;Di.copy(B.data,E,{x:0,y:0},{x:U.x+1,y:U.y+1},B.data)}for(const M in o){const B=o[M],U=f[M].paddedRect,W=U.x+1,K=U.y+1,ee=B.data.width,de=B.data.height;Di.copy(B.data,E,{x:0,y:0},{x:W,y:K},B.data),Di.copy(B.data,E,{x:0,y:de-1},{x:W,y:K-1},{width:ee,height:1}),Di.copy(B.data,E,{x:0,y:0},{x:W,y:K+de},{width:ee,height:1}),Di.copy(B.data,E,{x:ee-1,y:0},{x:W-1,y:K},{width:1,height:de}),Di.copy(B.data,E,{x:0,y:0},{x:W+ee,y:K},{width:1,height:de})}this.image=E,this.iconPositions=u,this.patternPositions=f}addImages(t,o,u){for(const f in t){const g=t[f],y={x:0,y:0,w:g.data.width+2,h:g.data.height+2};u.push(y),o[f]=new ep(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),o)}patchUpdatedImage(t,o,u){if(!t||!o||t.version===o.version)return;t.version=o.version;const[f,g]=t.tl;u.update(o.data,void 0,{x:f,y:g})}}Ke("ImagePosition",ep),Ke("ImageAtlas",Wy),l.WritingMode=void 0,(Ja=l.WritingMode||(l.WritingMode={}))[Ja.none=0]="none",Ja[Ja.horizontal=1]="horizontal",Ja[Ja.vertical=2]="vertical",Ja[Ja.horizontalOnly=3]="horizontalOnly";const Uh=-17;class pc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const u=new pc;return u.scale=t||1,u.fontStack=o,u}static forImage(t){const o=new pc;return o.imageName=t,o}}class tu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const u=new tu;for(let f=0;f<t.sections.length;f++){const g=t.sections[f];g.image?u.addImageSection(g):u.addTextSection(g,o)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let u=0;u<t.length;u++){const f=t.charCodeAt(u+1)||null,g=t.charCodeAt(u-1)||null;o+=f&&wo(f)&&!dc[t[u+1]]||g&&wo(g)&&!dc[t[u-1]]||!dc[t[u]]?t[u]:dc[t[u]]}return o}(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&$h[this.text.charCodeAt(u)];u++)t++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&$h[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const u=new tu;return u.text=this.text.substring(t,o),u.sectionIndex=this.sectionIndex.slice(t,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(pc.forText(t.scale,t.fontStack||o));const u=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(u)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void me("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(pc.forImage(o)),this.sectionIndex.push(this.sections.length-1)):me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vh(i,t,o,u,f,g,y,w,E,M,B,U,W,K,ee,de){const ge=tu.fromFeature(i,f);let Se;U===l.WritingMode.vertical&&ge.verticalizePunctuation();const{processBidirectionalText:Le,processStyledBidirectionalText:Me}=Jr;if(Le&&ge.sections.length===1){Se=[];const Ve=Le(ge.toString(),tp(ge,M,g,t,u,K,ee));for(const pt of Ve){const It=new tu;It.text=pt,It.sections=ge.sections;for(let lt=0;lt<pt.length;lt++)It.sectionIndex.push(0);Se.push(It)}}else if(Me){Se=[];const Ve=Me(ge.text,ge.sectionIndex,tp(ge,M,g,t,u,K,ee));for(const pt of Ve){const It=new tu;It.text=pt[0],It.sectionIndex=pt[1],It.sections=ge.sections,Se.push(It)}}else Se=function(Ve,pt){const It=[],lt=Ve.text;let ut=0;for(const it of pt)It.push(Ve.substring(ut,it)),ut=it;return ut<lt.length&&It.push(Ve.substring(ut,lt.length)),It}(ge,tp(ge,M,g,t,u,K,ee));const Fe=[],We={positionedLines:Fe,text:ge.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(Ve,pt,It,lt,ut,it,gt,ct,Qe,Ot,Mt,sn){let gn=0,Nn=Uh,Un=0,zr=0;const pr=ct==="right"?1:ct==="left"?0:.5;let mr=0;for(const gr of ut){gr.trim();const Or=gr.getMaxScale(),$r=(Or-1)*Ir,ei={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[mr]=ei;const pi=ei.positionedGlyphs;let mi=0;if(!gr.length()){Nn+=it,++mr;continue}for(let Ar=0;Ar<gr.length();Ar++){const nn=gr.getSection(Ar),bi=gr.getSectionIndex(Ar),Rr=gr.getCharCode(Ar);let jr=0,eo=null,So=null,To=null,va=Ir;const to=!(Qe===l.WritingMode.horizontal||!Mt&&!Za(Rr)||Mt&&($h[Rr]||(Tr=Rr,Je.Arabic(Tr)||Je["Arabic Supplement"](Tr)||Je["Arabic Extended-A"](Tr)||Je["Arabic Presentation Forms-A"](Tr)||Je["Arabic Presentation Forms-B"](Tr))));if(nn.imageName){const Fi=lt[nn.imageName];if(!Fi)continue;To=nn.imageName,Ve.iconsInText=Ve.iconsInText||!0,So=Fi.paddedRect;const gi=Fi.displaySize;nn.scale=nn.scale*Ir/sn,eo={width:gi[0],height:gi[1],left:1,top:-3,advance:to?gi[1]:gi[0]},jr=$r+(Ir-gi[1]*nn.scale),va=eo.advance;const xa=to?gi[0]*nn.scale-Ir*Or:gi[1]*nn.scale-Ir*Or;xa>0&&xa>mi&&(mi=xa)}else{const Fi=It[nn.fontStack],gi=Fi&&Fi[Rr];if(gi&&gi.rect)So=gi.rect,eo=gi.metrics;else{const xa=pt[nn.fontStack],yc=xa&&xa[Rr];if(!yc)continue;eo=yc.metrics}jr=(Or-nn.scale)*Ir}to?(Ve.verticalizable=!0,pi.push({glyph:Rr,imageName:To,x:gn,y:Nn+jr,vertical:to,scale:nn.scale,fontStack:nn.fontStack,sectionIndex:bi,metrics:eo,rect:So}),gn+=va*nn.scale+Ot):(pi.push({glyph:Rr,imageName:To,x:gn,y:Nn+jr,vertical:to,scale:nn.scale,fontStack:nn.fontStack,sectionIndex:bi,metrics:eo,rect:So}),gn+=eo.advance*nn.scale+Ot)}pi.length!==0&&(Un=Math.max(gn-Ot,Un),Lb(pi,0,pi.length-1,pr,mi)),gn=0;const Wn=it*Or+mi;ei.lineOffset=Math.max(mi,$r),Nn+=Wn,zr=Math.max(Wn,zr),++mr}var Tr;const Lr=Nn-Uh,{horizontalAlign:Vr,verticalAlign:di}=np(gt);(function(gr,Or,$r,ei,pi,mi,Wn,Ar,nn){const bi=(Or-$r)*pi;let Rr=0;Rr=mi!==Wn?-Ar*ei-Uh:(-ei*nn+.5)*Wn;for(const jr of gr)for(const eo of jr.positionedGlyphs)eo.x+=bi,eo.y+=Rr})(Ve.positionedLines,pr,Vr,di,Un,zr,it,Lr,ut.length),Ve.top+=-di*Lr,Ve.bottom=Ve.top+Lr,Ve.left+=-Vr*Un,Ve.right=Ve.left+Un}(We,t,o,u,Se,y,w,E,U,M,W,de),!function(Ve){for(const pt of Ve)if(pt.positionedGlyphs.length!==0)return!1;return!0}(Fe)&&We}const $h={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Mb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Xy(i,t,o,u,f,g){if(t.imageName){const y=u[t.imageName];return y?y.displaySize[0]*t.scale*Ir/g+f:0}{const y=o[t.fontStack],w=y&&y[i];return w?w.metrics.advance*t.scale+f:0}}function Hy(i,t,o,u){const f=Math.pow(i-t,2);return u?i<t?f/2:2*f:f+Math.abs(o)*o}function zb(i,t,o){let u=0;return i===10&&(u-=1e4),o&&(u+=150),i!==40&&i!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function Yy(i,t,o,u,f,g){let y=null,w=Hy(t,o,f,g);for(const E of u){const M=Hy(t-E.x,o,f,g)+E.badness;M<=w&&(y=E,w=M)}return{index:i,x:t,priorBreak:y,badness:w}}function Ky(i){return i?Ky(i.priorBreak).concat(i.index):[]}function tp(i,t,o,u,f,g,y){if(g!=="point")return[];if(!i)return[];const w=[],E=function(W,K,ee,de,ge,Se){let Le=0;for(let Me=0;Me<W.length();Me++){const Fe=W.getSection(Me);Le+=Xy(W.getCharCode(Me),Fe,de,ge,K,Se)}return Le/Math.max(1,Math.ceil(Le/ee))}(i,t,o,u,f,y),M=i.text.indexOf("\u200B")>=0;let B=0;for(let W=0;W<i.length();W++){const K=i.getSection(W),ee=i.getCharCode(W);if($h[ee]||(B+=Xy(ee,K,u,f,t,y)),W<i.length()-1){const de=!((U=ee)<11904||!(Je["Bopomofo Extended"](U)||Je.Bopomofo(U)||Je["CJK Compatibility Forms"](U)||Je["CJK Compatibility Ideographs"](U)||Je["CJK Compatibility"](U)||Je["CJK Radicals Supplement"](U)||Je["CJK Strokes"](U)||Je["CJK Symbols and Punctuation"](U)||Je["CJK Unified Ideographs Extension A"](U)||Je["CJK Unified Ideographs"](U)||Je["Enclosed CJK Letters and Months"](U)||Je["Halfwidth and Fullwidth Forms"](U)||Je.Hiragana(U)||Je["Ideographic Description Characters"](U)||Je["Kangxi Radicals"](U)||Je["Katakana Phonetic Extensions"](U)||Je.Katakana(U)||Je["Vertical Forms"](U)||Je["Yi Radicals"](U)||Je["Yi Syllables"](U)));(Mb[ee]||de||K.imageName)&&w.push(Yy(W+1,B,E,w,zb(ee,i.getCharCode(W+1),de&&M),!1))}}var U;return Ky(Yy(i.length(),B,E,w,0,!0))}function np(i){let t=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function Lb(i,t,o,u,f){if(!u&&!f)return;const g=i[o],y=(i[o].x+g.metrics.advance*g.scale)*u;for(let w=t;w<=o;w++)i[w].x-=y,i[w].y+=f}function Ob(i,t,o){const{horizontalAlign:u,verticalAlign:f}=np(o),g=t[0]-i.displaySize[0]*u,y=t[1]-i.displaySize[1]*f;return{image:i,top:y,bottom:y+i.displaySize[1],left:g,right:g+i.displaySize[0]}}function Jy(i,t,o,u,f,g){const y=i.image;let w;if(y.content){const ge=y.content,Se=y.pixelRatio||1;w=[ge[0]/Se,ge[1]/Se,y.displaySize[0]-ge[2]/Se,y.displaySize[1]-ge[3]/Se]}const E=t.left*g,M=t.right*g;let B,U,W,K;o==="width"||o==="both"?(K=f[0]+E-u[3],U=f[0]+M+u[1]):(K=f[0]+(E+M-y.displaySize[0])/2,U=K+y.displaySize[0]);const ee=t.top*g,de=t.bottom*g;return o==="height"||o==="both"?(B=f[1]+ee-u[0],W=f[1]+de+u[2]):(B=f[1]+(ee+de-y.displaySize[1])/2,W=B+y.displaySize[1]),{image:y,top:B,right:U,bottom:W,left:K,collisionPadding:w}}const Go=128;function rp(i,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Fn(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=o;let g=0;for(;g<u.length&&u[g]<=i;)g++;g=Math.max(0,g-1);let y=g;for(;y<u.length&&u[y]<i+1;)y++;y=Math.min(u.length-1,y);const w=u[g],E=u[y];return o.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:E,minSize:o.evaluate(new Fn(w)),maxSize:o.evaluate(new Fn(E)),interpolationType:f}}}function Qy(i,{uSize:t,uSizeT:o},{lowerSize:u,upperSize:f}){return i.kind==="source"?u/Go:i.kind==="composite"?On(u/Go,f/Go,o):t}function e_(i,t){let o=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:g,maxZoom:y}=i,w=f?P(Nr.interpolationFactor(f,t,g,y),0,1):0;i.kind==="camera"?u=On(i.minSize,i.maxSize,w):o=w}return{uSizeT:o,uSize:u}}var Rb=Object.freeze({__proto__:null,getSizeData:rp,evaluateSizeForFeature:Qy,evaluateSizeForZoom:e_,SIZE_PACK_FACTOR:Go});class Qa extends Ue{constructor(t,o,u,f){super(t,o),this.angle=u,f!==void 0&&(this.segment=f)}clone(){return new Qa(this.x,this.y,this.angle,this.segment)}}function t_(i,t,o,u,f){if(t.segment===void 0)return!0;let g=t,y=t.segment+1,w=0;for(;w>-o/2;){if(y--,y<0)return!1;w-=i[y].dist(g),g=i[y]}w+=i[y].dist(i[y+1]),y++;const E=[];let M=0;for(;w<o/2;){const B=i[y],U=i[y+1];if(!U)return!1;let W=i[y-1].angleTo(B)-B.angleTo(U);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:w,angleDelta:W}),M+=W;w-E[0].distance>u;)M-=E.shift().angleDelta;if(M>f)return!1;y++,w+=B.dist(U)}return!0}function n_(i){let t=0;for(let o=0;o<i.length-1;o++)t+=i[o].dist(i[o+1]);return t}function r_(i,t,o){return i?.6*t*o:0}function i_(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Db(i,t,o,u,f,g){const y=r_(o,f,g),w=i_(o,u)*g;let E=0;const M=n_(i)/2;for(let B=0;B<i.length-1;B++){const U=i[B],W=i[B+1],K=U.dist(W);if(E+K>M){const ee=(M-E)/K,de=On(U.x,W.x,ee),ge=On(U.y,W.y,ee),Se=new Qa(de,ge,W.angleTo(U),B);return Se._round(),!y||t_(i,Se,w,y,t)?Se:void 0}E+=K}}function Fb(i,t,o,u,f,g,y,w,E){const M=r_(u,g,y),B=i_(u,f),U=B*y,W=i[0].x===0||i[0].x===E||i[0].y===0||i[0].y===E;return t-U<t/4&&(t=U+t/4),o_(i,W?t/2*w%t:(B/2+2*g)*y*w%t,t,M,o,U,W,!1,E)}function o_(i,t,o,u,f,g,y,w,E){const M=g/2,B=n_(i);let U=0,W=t-o,K=[];for(let ee=0;ee<i.length-1;ee++){const de=i[ee],ge=i[ee+1],Se=de.dist(ge),Le=ge.angleTo(de);for(;W+o<U+Se;){W+=o;const Me=(W-U)/Se,Fe=On(de.x,ge.x,Me),We=On(de.y,ge.y,Me);if(Fe>=0&&Fe<E&&We>=0&&We<E&&W-M>=0&&W+M<=B){const Ve=new Qa(Fe,We,Le,ee);Ve._round(),u&&!t_(i,Ve,g,u,f)||K.push(Ve)}}U+=Se}return w||K.length||y||(K=o_(i,U/2,o,u,f,g,y,!0,E)),K}function a_(i,t,o,u,f){const g=[];for(let y=0;y<i.length;y++){const w=i[y];let E;for(let M=0;M<w.length-1;M++){let B=w[M],U=w[M+1];B.x<t&&U.x<t||(B.x<t?B=new Ue(t,B.y+(t-B.x)/(U.x-B.x)*(U.y-B.y))._round():U.x<t&&(U=new Ue(t,B.y+(t-B.x)/(U.x-B.x)*(U.y-B.y))._round()),B.y<o&&U.y<o||(B.y<o?B=new Ue(B.x+(o-B.y)/(U.y-B.y)*(U.x-B.x),o)._round():U.y<o&&(U=new Ue(B.x+(o-B.y)/(U.y-B.y)*(U.x-B.x),o)._round()),B.x>=u&&U.x>=u||(B.x>=u?B=new Ue(u,B.y+(u-B.x)/(U.x-B.x)*(U.y-B.y))._round():U.x>=u&&(U=new Ue(u,B.y+(u-B.x)/(U.x-B.x)*(U.y-B.y))._round()),B.y>=f&&U.y>=f||(B.y>=f?B=new Ue(B.x+(f-B.y)/(U.y-B.y)*(U.x-B.x),f)._round():U.y>=f&&(U=new Ue(B.x+(f-B.y)/(U.y-B.y)*(U.x-B.x),f)._round()),E&&B.equals(E[E.length-1])||(E=[B],g.push(E)),E.push(U)))))}}return g}function s_(i,t,o,u){const f=[],g=i.image,y=g.pixelRatio,w=g.paddedRect.w-2,E=g.paddedRect.h-2,M=i.right-i.left,B=i.bottom-i.top,U=g.stretchX||[[0,w]],W=g.stretchY||[[0,E]],K=(it,gt)=>it+gt[1]-gt[0],ee=U.reduce(K,0),de=W.reduce(K,0),ge=w-ee,Se=E-de;let Le=0,Me=ee,Fe=0,We=de,Ve=0,pt=ge,It=0,lt=Se;if(g.content&&u){const it=g.content;Le=jh(U,0,it[0]),Fe=jh(W,0,it[1]),Me=jh(U,it[0],it[2]),We=jh(W,it[1],it[3]),Ve=it[0]-Le,It=it[1]-Fe,pt=it[2]-it[0]-Me,lt=it[3]-it[1]-We}const ut=(it,gt,ct,Qe)=>{const Ot=Gh(it.stretch-Le,Me,M,i.left),Mt=Zh(it.fixed-Ve,pt,it.stretch,ee),sn=Gh(gt.stretch-Fe,We,B,i.top),gn=Zh(gt.fixed-It,lt,gt.stretch,de),Nn=Gh(ct.stretch-Le,Me,M,i.left),Un=Zh(ct.fixed-Ve,pt,ct.stretch,ee),zr=Gh(Qe.stretch-Fe,We,B,i.top),pr=Zh(Qe.fixed-It,lt,Qe.stretch,de),mr=new Ue(Ot,sn),Tr=new Ue(Nn,sn),Lr=new Ue(Nn,zr),Vr=new Ue(Ot,zr),di=new Ue(Mt/y,gn/y),gr=new Ue(Un/y,pr/y),Or=t*Math.PI/180;if(Or){const pi=Math.sin(Or),mi=Math.cos(Or),Wn=[mi,-pi,pi,mi];mr._matMult(Wn),Tr._matMult(Wn),Vr._matMult(Wn),Lr._matMult(Wn)}const $r=it.stretch+it.fixed,ei=gt.stretch+gt.fixed;return{tl:mr,tr:Tr,bl:Vr,br:Lr,tex:{x:g.paddedRect.x+1+$r,y:g.paddedRect.y+1+ei,w:ct.stretch+ct.fixed-$r,h:Qe.stretch+Qe.fixed-ei},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:di,pixelOffsetBR:gr,minFontScaleX:pt/y/M,minFontScaleY:lt/y/B,isSDF:o}};if(u&&(g.stretchX||g.stretchY)){const it=l_(U,ge,ee),gt=l_(W,Se,de);for(let ct=0;ct<it.length-1;ct++){const Qe=it[ct],Ot=it[ct+1];for(let Mt=0;Mt<gt.length-1;Mt++)f.push(ut(Qe,gt[Mt],Ot,gt[Mt+1]))}}else f.push(ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:E+1}));return f}function jh(i,t,o){let u=0;for(const f of i)u+=Math.max(t,Math.min(o,f[1]))-Math.max(t,Math.min(o,f[0]));return u}function l_(i,t,o){const u=[{fixed:-1,stretch:0}];for(const[f,g]of i){const y=u[u.length-1];u.push({fixed:f-y.stretch,stretch:y.stretch}),u.push({fixed:f-y.stretch,stretch:y.stretch+(g-f)})}return u.push({fixed:t+1,stretch:o}),u}function Gh(i,t,o,u){return i/t*o+u}function Zh(i,t,o,u){return i-t*o/u}Ke("Anchor",Qa);class qh{constructor(t,o,u,f,g,y,w,E,M,B){if(this.boxStartIndex=t.length,M){let U=y.top,W=y.bottom;const K=y.collisionPadding;K&&(U-=K[1],W+=K[3]);let ee=W-U;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let U=y.top*w-E,W=y.bottom*w+E,K=y.left*w-E,ee=y.right*w+E;const de=y.collisionPadding;if(de&&(K-=de[0]*w,U-=de[1]*w,ee+=de[2]*w,W+=de[3]*w),B){const ge=new Ue(K,U),Se=new Ue(ee,U),Le=new Ue(K,W),Me=new Ue(ee,W),Fe=B*Math.PI/180;ge._rotate(Fe),Se._rotate(Fe),Le._rotate(Fe),Me._rotate(Fe),K=Math.min(ge.x,Se.x,Le.x,Me.x),ee=Math.max(ge.x,Se.x,Le.x,Me.x),U=Math.min(ge.y,Se.y,Le.y,Me.y),W=Math.max(ge.y,Se.y,Le.y,Me.y)}t.emplaceBack(o.x,o.y,K,U,ee,W,u,f,g)}this.boxEndIndex=t.length}}class Bb{constructor(t=[],o=Nb){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:u}=this,f=o[t];for(;t>0;){const g=t-1>>1,y=o[g];if(u(f,y)>=0)break;o[t]=y,t=g}o[t]=f}_down(t){const{data:o,compare:u}=this,f=this.length>>1,g=o[t];for(;t<f;){let y=1+(t<<1),w=o[y];const E=y+1;if(E<this.length&&u(o[E],w)<0&&(y=E,w=o[E]),u(w,g)>=0)break;o[t]=w,t=y}o[t]=g}}function Nb(i,t){return i<t?-1:i>t?1:0}function Ub(i,t=1,o=!1){let u=1/0,f=1/0,g=-1/0,y=-1/0;const w=i[0];for(let K=0;K<w.length;K++){const ee=w[K];(!K||ee.x<u)&&(u=ee.x),(!K||ee.y<f)&&(f=ee.y),(!K||ee.x>g)&&(g=ee.x),(!K||ee.y>y)&&(y=ee.y)}const E=Math.min(g-u,y-f);let M=E/2;const B=new Bb([],Vb);if(E===0)return new Ue(u,f);for(let K=u;K<g;K+=E)for(let ee=f;ee<y;ee+=E)B.push(new nu(K+M,ee+M,M,i));let U=function(K){let ee=0,de=0,ge=0;const Se=K[0];for(let Le=0,Me=Se.length,Fe=Me-1;Le<Me;Fe=Le++){const We=Se[Le],Ve=Se[Fe],pt=We.x*Ve.y-Ve.x*We.y;de+=(We.x+Ve.x)*pt,ge+=(We.y+Ve.y)*pt,ee+=3*pt}return new nu(de/ee,ge/ee,0,K)}(i),W=B.length;for(;B.length;){const K=B.pop();(K.d>U.d||!U.d)&&(U=K,o&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,W)),K.max-U.d<=t||(M=K.h/2,B.push(new nu(K.p.x-M,K.p.y-M,M,i)),B.push(new nu(K.p.x+M,K.p.y-M,M,i)),B.push(new nu(K.p.x-M,K.p.y+M,M,i)),B.push(new nu(K.p.x+M,K.p.y+M,M,i)),W+=4)}return o&&(console.log(`num probes: ${W}`),console.log(`best distance: ${U.d}`)),U.p}function Vb(i,t){return t.max-i.max}function nu(i,t,o,u){this.p=new Ue(i,t),this.h=o,this.d=function(f,g){let y=!1,w=1/0;for(let E=0;E<g.length;E++){const M=g[E];for(let B=0,U=M.length,W=U-1;B<U;W=B++){const K=M[B],ee=M[W];K.y>f.y!=ee.y>f.y&&f.x<(ee.x-K.x)*(f.y-K.y)/(ee.y-K.y)+K.x&&(y=!y),w=Math.min(w,_y(f,K,ee))}}return(y?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const ip=Number.POSITIVE_INFINITY;function u_(i,t){return t[1]!==ip?function(o,u,f){let g=0,y=0;switch(u=Math.abs(u),f=Math.abs(f),o){case"top-right":case"top-left":case"top":y=f-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-f}switch(o){case"top-right":case"bottom-right":case"right":g=-u;break;case"top-left":case"bottom-left":case"left":g=u}return[g,y]}(i,t[0],t[1]):function(o,u){let f=0,g=0;u<0&&(u=0);const y=u/Math.sqrt(2);switch(o){case"top-right":case"top-left":g=y-7;break;case"bottom-right":case"bottom-left":g=7-y;break;case"bottom":g=7-u;break;case"top":g=u-7}switch(o){case"top-right":case"bottom-right":f=-y;break;case"top-left":case"bottom-left":f=y;break;case"left":f=u;break;case"right":f=-u}return[f,g]}(i,t[0])}function op(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $b(i,t,o,u,f,g,y,w,E,M,B){let U=g.textMaxSize.evaluate(t,{});U===void 0&&(U=y);const W=i.layers[0].layout,K=W.get("icon-offset").evaluate(t,{},B),ee=h_(o.horizontal),de=y/24,ge=i.tilePixelRatio*de,Se=i.tilePixelRatio*U/24,Le=i.tilePixelRatio*w,Me=i.tilePixelRatio*W.get("symbol-spacing"),Fe=W.get("text-padding")*i.tilePixelRatio,We=W.get("icon-padding")*i.tilePixelRatio,Ve=W.get("text-max-angle")/180*Math.PI,pt=W.get("text-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",It=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",lt=W.get("symbol-placement"),ut=Me/2,it=W.get("icon-text-fit");let gt;u&&it!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(gt=Jy(u,o.vertical,it,W.get("icon-text-fit-padding"),K,de)),ee&&(u=Jy(u,ee,it,W.get("icon-text-fit-padding"),K,de)));const ct=(Qe,Ot)=>{Ot.x<0||Ot.x>=br||Ot.y<0||Ot.y>=br||function(Mt,sn,gn,Nn,Un,zr,pr,mr,Tr,Lr,Vr,di,gr,Or,$r,ei,pi,mi,Wn,Ar,nn,bi,Rr,jr,eo){const So=Mt.addToLineVertexArray(sn,gn);let To,va,to,Fi,gi=0,xa=0,yc=0,C_=0,mp=-1,gp=-1;const wa={};let k_=Xa(""),yp=0,_p=0;if(mr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[yp,_p]=mr.layout.get("text-offset").evaluate(nn,{},jr).map(yi=>yi*Ir):(yp=mr.layout.get("text-radial-offset").evaluate(nn,{},jr)*Ir,_p=ip),Mt.allowVerticalPlacement&&Nn.vertical){const yi=mr.layout.get("text-rotate").evaluate(nn,{},jr)+90;to=new qh(Tr,sn,Lr,Vr,di,Nn.vertical,gr,Or,$r,yi),pr&&(Fi=new qh(Tr,sn,Lr,Vr,di,pr,pi,mi,$r,yi))}if(Un){const yi=mr.layout.get("icon-rotate").evaluate(nn,{}),Zo=mr.layout.get("icon-text-fit")!=="none",_c=s_(Un,yi,Rr,Zo),vc=pr?s_(pr,yi,Rr,Zo):void 0;va=new qh(Tr,sn,Lr,Vr,di,Un,pi,mi,!1,yi),gi=4*_c.length;const M_=Mt.iconSizeData;let al=null;M_.kind==="source"?(al=[Go*mr.layout.get("icon-size").evaluate(nn,{})],al[0]>es&&me(`${Mt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):M_.kind==="composite"&&(al=[Go*bi.compositeIconSizes[0].evaluate(nn,{},jr),Go*bi.compositeIconSizes[1].evaluate(nn,{},jr)],(al[0]>es||al[1]>es)&&me(`${Mt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Mt.addSymbols(Mt.icon,_c,al,Ar,Wn,nn,l.WritingMode.none,sn,So.lineStartIndex,So.lineLength,-1,jr),mp=Mt.icon.placedSymbolArray.length-1,vc&&(xa=4*vc.length,Mt.addSymbols(Mt.icon,vc,al,Ar,Wn,nn,l.WritingMode.vertical,sn,So.lineStartIndex,So.lineLength,-1,jr),gp=Mt.icon.placedSymbolArray.length-1)}const I_=Object.keys(Nn.horizontal);for(const yi of I_){const Zo=Nn.horizontal[yi];if(!To){k_=Xa(Zo.text);const vc=mr.layout.get("text-rotate").evaluate(nn,{},jr);To=new qh(Tr,sn,Lr,Vr,di,Zo,gr,Or,$r,vc)}const _c=Zo.positionedLines.length===1;if(yc+=c_(Mt,sn,Zo,zr,mr,$r,nn,ei,So,Nn.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,_c?I_:[yi],wa,mp,bi,jr),_c)break}Nn.vertical&&(C_+=c_(Mt,sn,Nn.vertical,zr,mr,$r,nn,ei,So,l.WritingMode.vertical,["vertical"],wa,gp,bi,jr));const t2=To?To.boxStartIndex:Mt.collisionBoxArray.length,n2=To?To.boxEndIndex:Mt.collisionBoxArray.length,r2=to?to.boxStartIndex:Mt.collisionBoxArray.length,i2=to?to.boxEndIndex:Mt.collisionBoxArray.length,o2=va?va.boxStartIndex:Mt.collisionBoxArray.length,a2=va?va.boxEndIndex:Mt.collisionBoxArray.length,s2=Fi?Fi.boxStartIndex:Mt.collisionBoxArray.length,l2=Fi?Fi.boxEndIndex:Mt.collisionBoxArray.length;let Ao=-1;const Kh=(yi,Zo)=>yi&&yi.circleDiameter?Math.max(yi.circleDiameter,Zo):Zo;Ao=Kh(To,Ao),Ao=Kh(to,Ao),Ao=Kh(va,Ao),Ao=Kh(Fi,Ao);const P_=Ao>-1?1:0;P_&&(Ao*=eo/Ir),Mt.glyphOffsetArray.length>=ru.MAX_GLYPHS&&me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),nn.sortKey!==void 0&&Mt.addToSortKeyRanges(Mt.symbolInstances.length,nn.sortKey),Mt.symbolInstances.emplaceBack(sn.x,sn.y,wa.right>=0?wa.right:-1,wa.center>=0?wa.center:-1,wa.left>=0?wa.left:-1,wa.vertical||-1,mp,gp,k_,t2,n2,r2,i2,o2,a2,s2,l2,Lr,yc,C_,gi,xa,P_,0,gr,yp,_p,Ao)}(i,Ot,Qe,o,u,f,gt,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,ge,Fe,pt,E,Le,We,It,K,t,g,M,B,y)};if(lt==="line")for(const Qe of a_(t.geometry,0,0,br,br)){const Ot=Fb(Qe,Me,Ve,o.vertical||ee,u,24,Se,i.overscaling,br);for(const Mt of Ot){const sn=ee;sn&&jb(i,sn.text,ut,Mt)||ct(Qe,Mt)}}else if(lt==="line-center"){for(const Qe of t.geometry)if(Qe.length>1){const Ot=Db(Qe,Ve,o.vertical||ee,u,24,Se);Ot&&ct(Qe,Ot)}}else if(t.type==="Polygon")for(const Qe of Zd(t.geometry,0)){const Ot=Ub(Qe,16);ct(Qe[0],new Qa(Ot.x,Ot.y,0))}else if(t.type==="LineString")for(const Qe of t.geometry)ct(Qe,new Qa(Qe[0].x,Qe[0].y,0));else if(t.type==="Point")for(const Qe of t.geometry)for(const Ot of Qe)ct([Ot],new Qa(Ot.x,Ot.y,0))}const es=32640;function c_(i,t,o,u,f,g,y,w,E,M,B,U,W,K,ee){const de=function(Le,Me,Fe,We,Ve,pt,It,lt){const ut=We.layout.get("text-rotate").evaluate(pt,{})*Math.PI/180,it=[];for(const gt of Me.positionedLines)for(const ct of gt.positionedGlyphs){if(!ct.rect)continue;const Qe=ct.rect||{};let Ot=4,Mt=!0,sn=1,gn=0;const Nn=(Ve||lt)&&ct.vertical,Un=ct.metrics.advance*ct.scale/2;if(lt&&Me.verticalizable){const Wn=(ct.scale-1)*Ir,Ar=(Ir-ct.metrics.width*ct.scale)/2;gn=gt.lineOffset/2-(ct.imageName?-Ar:Wn)}if(ct.imageName){const Wn=It[ct.imageName];Mt=Wn.sdf,sn=Wn.pixelRatio,Ot=1/sn}const zr=Ve?[ct.x+Un,ct.y]:[0,0];let pr=Ve?[0,0]:[ct.x+Un+Fe[0],ct.y+Fe[1]-gn],mr=[0,0];Nn&&(mr=pr,pr=[0,0]);const Tr=(ct.metrics.left-Ot)*ct.scale-Un+pr[0],Lr=(-ct.metrics.top-Ot)*ct.scale+pr[1],Vr=Tr+Qe.w*ct.scale/sn,di=Lr+Qe.h*ct.scale/sn,gr=new Ue(Tr,Lr),Or=new Ue(Vr,Lr),$r=new Ue(Tr,di),ei=new Ue(Vr,di);if(Nn){const Wn=new Ue(-Un,Un-Uh),Ar=-Math.PI/2,nn=12-Un,bi=new Ue(22-nn,-(ct.imageName?nn:0)),Rr=new Ue(...mr);gr._rotateAround(Ar,Wn)._add(bi)._add(Rr),Or._rotateAround(Ar,Wn)._add(bi)._add(Rr),$r._rotateAround(Ar,Wn)._add(bi)._add(Rr),ei._rotateAround(Ar,Wn)._add(bi)._add(Rr)}if(ut){const Wn=Math.sin(ut),Ar=Math.cos(ut),nn=[Ar,-Wn,Wn,Ar];gr._matMult(nn),Or._matMult(nn),$r._matMult(nn),ei._matMult(nn)}const pi=new Ue(0,0),mi=new Ue(0,0);it.push({tl:gr,tr:Or,bl:$r,br:ei,tex:Qe,writingMode:Me.writingMode,glyphOffset:zr,sectionIndex:ct.sectionIndex,isSDF:Mt,pixelOffsetTL:pi,pixelOffsetBR:mi,minFontScaleX:0,minFontScaleY:0})}return it}(0,o,w,f,g,y,u,i.allowVerticalPlacement),ge=i.textSizeData;let Se=null;ge.kind==="source"?(Se=[Go*f.layout.get("text-size").evaluate(y,{})],Se[0]>es&&me(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ge.kind==="composite"&&(Se=[Go*K.compositeTextSizes[0].evaluate(y,{},ee),Go*K.compositeTextSizes[1].evaluate(y,{},ee)],(Se[0]>es||Se[1]>es)&&me(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,de,Se,w,g,y,M,t,E.lineStartIndex,E.lineLength,W,ee);for(const Le of B)U[Le]=i.text.placedSymbolArray.length-1;return 4*de.length}function h_(i){for(const t in i)return i[t];return null}function jb(i,t,o,u){const f=i.compareText;if(t in f){const g=f[t];for(let y=g.length-1;y>=0;y--)if(u.dist(g[y])<o)return!0}else f[t]=[];return f[t].push(u),!1}const Gb=Ka.VectorTileFeature.types,Zb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wh(i,t,o,u,f,g,y,w,E,M,B,U,W){const K=w?Math.min(es,Math.round(w[0])):0,ee=w?Math.min(es,Math.round(w[1])):0;i.emplaceBack(t,o,Math.round(32*u),Math.round(32*f),g,y,(K<<1)+(E?1:0),ee,16*M,16*B,256*U,256*W)}function ap(i,t,o){i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o)}function qb(i){for(const t of i.sections)if(Pd(t.text))return!0;return!1}class sp{constructor(t){this.layoutVertexArray=new qn,this.indexArray=new hi,this.programConfigurations=t,this.segments=new An,this.dynamicLayoutVertexArray=new kr,this.opacityVertexArray=new ui,this.placedSymbolArray=new Be}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,pb.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,mb.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Zb,!0),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ke("SymbolBuffers",sp);class lp{constructor(t,o,u){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new u,this.segments=new An,this.collisionVertexArray=new Oi}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,gb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ke("CollisionBuffers",lp);class ru{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(y=>y.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fd([]),this.placementViewportMatrix=Fd([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=rp(this.zoom,o["text-size"]),this.iconSizeData=rp(this.zoom,o["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=cp(u,"text-overlap","text-allow-overlap")!=="never"||cp(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(y=>l.WritingMode[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=t.sourceID}createArrays(){this.text=new sp(new tl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new sp(new tl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new je,this.lineVertexArray=new Tt,this.symbolInstances=new tt}calculateGlyphDependencies(t,o,u,f,g){for(let y=0;y<t.length;y++)if(o[t.charCodeAt(y)]=!0,(u||f)&&g){const w=dc[t.charAt(y)];w&&(o[w.charCodeAt(0)]=!0)}}populate(t,o,u){const f=this.layers[0],g=f.layout,y=g.get("text-font"),w=g.get("text-field"),E=g.get("icon-image"),M=(w.value.kind!=="constant"||w.value.value instanceof ce&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),B=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,U=g.get("symbol-sort-key");if(this.features=[],!M&&!B)return;const W=o.iconDependencies,K=o.glyphDependencies,ee=o.availableImages,de=new Fn(this.zoom);for(const{feature:ge,id:Se,index:Le,sourceLayerIndex:Me}of t){const Fe=f._featureFilter.needGeometry,We=rl(ge,Fe);if(!f._featureFilter.filter(de,We,u))continue;let Ve,pt;if(Fe||(We.geometry=nl(ge)),M){const lt=f.getValueAndResolveTokens("text-field",We,u,ee),ut=ce.factory(lt);qb(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||qa()==="unavailable"||this.hasRTLText&&Jr.isParsed())&&(Ve=_b(ut,f,We))}if(B){const lt=f.getValueAndResolveTokens("icon-image",We,u,ee);pt=lt instanceof xe?lt:xe.fromString(lt)}if(!Ve&&!pt)continue;const It=this.sortFeaturesByKey?U.evaluate(We,{},u):void 0;if(this.features.push({id:Se,text:Ve,icon:pt,index:Le,sourceLayerIndex:Me,geometry:We.geometry,properties:ge.properties,type:Gb[ge.type],sortKey:It}),pt&&(W[pt.name]=!0),Ve){const lt=y.evaluate(We,{},u).join(","),ut=g.get("text-rotation-alignment")==="map"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const it of Ve.sections)if(it.image)W[it.image.name]=!0;else{const gt=si(Ve.toString()),ct=it.fontStack||lt,Qe=K[ct]=K[ct]||{};this.calculateGlyphDependencies(it.text,Qe,ut,this.allowVerticalPlacement,gt)}}}g.get("symbol-placement")==="line"&&(this.features=function(ge){const Se={},Le={},Me=[];let Fe=0;function We(lt){Me.push(ge[lt]),Fe++}function Ve(lt,ut,it){const gt=Le[lt];return delete Le[lt],Le[ut]=gt,Me[gt].geometry[0].pop(),Me[gt].geometry[0]=Me[gt].geometry[0].concat(it[0]),gt}function pt(lt,ut,it){const gt=Se[ut];return delete Se[ut],Se[lt]=gt,Me[gt].geometry[0].shift(),Me[gt].geometry[0]=it[0].concat(Me[gt].geometry[0]),gt}function It(lt,ut,it){const gt=it?ut[0][ut[0].length-1]:ut[0][0];return`${lt}:${gt.x}:${gt.y}`}for(let lt=0;lt<ge.length;lt++){const ut=ge[lt],it=ut.geometry,gt=ut.text?ut.text.toString():null;if(!gt){We(lt);continue}const ct=It(gt,it),Qe=It(gt,it,!0);if(ct in Le&&Qe in Se&&Le[ct]!==Se[Qe]){const Ot=pt(ct,Qe,it),Mt=Ve(ct,Qe,Me[Ot].geometry);delete Se[ct],delete Le[Qe],Le[It(gt,Me[Mt].geometry,!0)]=Mt,Me[Ot].geometry=null}else ct in Le?Ve(ct,Qe,it):Qe in Se?pt(ct,Qe,it):(We(lt),Se[ct]=Fe-1,Le[Qe]=Fe-1)}return Me.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ge,Se)=>ge.sortKey-Se.sortKey)}update(t,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const u=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(o[t.segment+1]),g=t.dist(o[t.segment]);const y={};for(let w=t.segment+1;w<o.length;w++)y[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:f},w<o.length-1&&(f+=o[w+1].dist(o[w]));for(let w=t.segment||0;w>=0;w--)y[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:g},w>0&&(g+=o[w-1].dist(o[w]));for(let w=0;w<o.length;w++){const E=y[w];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,o,u,f,g,y,w,E,M,B,U,W){const K=t.indexArray,ee=t.layoutVertexArray,de=t.segments.prepareSegment(4*o.length,ee,K,this.canOverlap?y.sortKey:void 0),ge=this.glyphOffsetArray.length,Se=de.vertexLength,Le=this.allowVerticalPlacement&&w===l.WritingMode.vertical?Math.PI/2:0,Me=y.text&&y.text.sections;for(let Fe=0;Fe<o.length;Fe++){const{tl:We,tr:Ve,bl:pt,br:It,tex:lt,pixelOffsetTL:ut,pixelOffsetBR:it,minFontScaleX:gt,minFontScaleY:ct,glyphOffset:Qe,isSDF:Ot,sectionIndex:Mt}=o[Fe],sn=de.vertexLength,gn=Qe[1];Wh(ee,E.x,E.y,We.x,gn+We.y,lt.x,lt.y,u,Ot,ut.x,ut.y,gt,ct),Wh(ee,E.x,E.y,Ve.x,gn+Ve.y,lt.x+lt.w,lt.y,u,Ot,it.x,ut.y,gt,ct),Wh(ee,E.x,E.y,pt.x,gn+pt.y,lt.x,lt.y+lt.h,u,Ot,ut.x,it.y,gt,ct),Wh(ee,E.x,E.y,It.x,gn+It.y,lt.x+lt.w,lt.y+lt.h,u,Ot,it.x,it.y,gt,ct),ap(t.dynamicLayoutVertexArray,E,Le),K.emplaceBack(sn,sn+1,sn+2),K.emplaceBack(sn+1,sn+2,sn+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qe[0]),Fe!==o.length-1&&Mt===o[Fe+1].sectionIndex||t.programConfigurations.populatePaintArrays(ee.length,y,y.index,{},W,Me&&Me[Mt])}t.placedSymbolArray.emplaceBack(E.x,E.y,ge,this.glyphOffsetArray.length-ge,Se,M,B,E.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],w,0,!1,0,U)}_addCollisionDebugVertex(t,o,u,f,g,y){return o.emplaceBack(0,0),t.emplaceBack(u.x,u.y,f,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(t,o,u,f,g,y,w){const E=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),M=E.vertexLength,B=g.layoutVertexArray,U=g.collisionVertexArray,W=w.anchorX,K=w.anchorY;this._addCollisionDebugVertex(B,U,y,W,K,new Ue(t,o)),this._addCollisionDebugVertex(B,U,y,W,K,new Ue(u,o)),this._addCollisionDebugVertex(B,U,y,W,K,new Ue(u,f)),this._addCollisionDebugVertex(B,U,y,W,K,new Ue(t,f)),E.vertexLength+=4;const ee=g.indexArray;ee.emplaceBack(M,M+1),ee.emplaceBack(M+1,M+2),ee.emplaceBack(M+2,M+3),ee.emplaceBack(M+3,M),E.primitiveLength+=4}addDebugCollisionBoxes(t,o,u,f){for(let g=t;g<o;g++){const y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,f?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lp(ci,Ny.members,Ri),this.iconCollisionBox=new lp(ci,Ny.members,Ri);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,u,f,g,y,w,E,M){const B={};for(let U=o;U<u;U++){const W=t.get(U);B.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.textFeatureIndex=W.featureIndex;break}for(let U=f;U<g;U++){const W=t.get(U);B.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.verticalTextFeatureIndex=W.featureIndex;break}for(let U=y;U<w;U++){const W=t.get(U);B.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.iconFeatureIndex=W.featureIndex;break}for(let U=E;U<M;U++){const W=t.get(U);B.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},B.verticalIconFeatureIndex=W.featureIndex;break}return B}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const u=t.placedSymbolArray.get(o),f=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<f;g+=4)t.indexArray.emplaceBack(g,g+1,g+2),t.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),u=Math.cos(t),f=[],g=[],y=[];for(let w=0;w<this.symbolInstances.length;++w){y.push(w);const E=this.symbolInstances.get(w);f.push(0|Math.round(o*E.anchorX+u*E.anchorY)),g.push(E.featureIndex)}return y.sort((w,E)=>f[w]-f[E]||g[E]-g[w]),y}addToSortKeyRanges(t,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((f,g,y)=>{f>=0&&y.indexOf(f)===g&&this.addIndicesForPlacedSymbol(this.text,f)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ke("SymbolBucket",ru,{omit:["layers","collisionBoxArray","features","compareText"]}),ru.MAX_GLYPHS=65535,ru.addDynamicAttributes=ap;const Wb=new Qr({"symbol-placement":new Ct(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Ct(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ct(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Rt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ct(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ct(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ct(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ct(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ct(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ct(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Rt(ke.layout_symbol["icon-size"]),"icon-text-fit":new Ct(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ct(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Rt(ke.layout_symbol["icon-image"]),"icon-rotate":new Rt(ke.layout_symbol["icon-rotate"]),"icon-padding":new Ct(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Ct(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Rt(ke.layout_symbol["icon-offset"]),"icon-anchor":new Rt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ct(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ct(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ct(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Rt(ke.layout_symbol["text-field"]),"text-font":new Rt(ke.layout_symbol["text-font"]),"text-size":new Rt(ke.layout_symbol["text-size"]),"text-max-width":new Rt(ke.layout_symbol["text-max-width"]),"text-line-height":new Ct(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Rt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Rt(ke.layout_symbol["text-justify"]),"text-radial-offset":new Rt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ct(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new Rt(ke.layout_symbol["text-anchor"]),"text-max-angle":new Ct(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Ct(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Rt(ke.layout_symbol["text-rotate"]),"text-padding":new Ct(ke.layout_symbol["text-padding"]),"text-keep-upright":new Ct(ke.layout_symbol["text-keep-upright"]),"text-transform":new Rt(ke.layout_symbol["text-transform"]),"text-offset":new Rt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Ct(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new Ct(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new Ct(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Ct(ke.layout_symbol["text-optional"])});var up={paint:new Qr({"icon-opacity":new Rt(ke.paint_symbol["icon-opacity"]),"icon-color":new Rt(ke.paint_symbol["icon-color"]),"icon-halo-color":new Rt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Rt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Rt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Ct(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ct(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Rt(ke.paint_symbol["text-opacity"]),"text-color":new Rt(ke.paint_symbol["text-color"],{runtimeType:Sr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Rt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Rt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Rt(ke.paint_symbol["text-halo-blur"]),"text-translate":new Ct(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Ct(ke.paint_symbol["text-translate-anchor"])}),layout:Wb};class f_{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Yn,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ke("FormatSectionOverride",f_,{omit:["defaultValue"]});class Xh extends li{constructor(t){super(t,up)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const g of u)f.indexOf(g)<0&&f.push(g);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,u,f){const g=this.layout.get(t).evaluate(o,{},u,f),y=this._unevaluatedLayout._values[t];return y.isDataDriven()||po(y.value)||!g?g:function(w,E){return E.replace(/{([^{}]+)}/g,(M,B)=>B in w?String(w[B]):"")}(o.properties,g)}createBucket(t){return new ru(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of up.paint.overridableProperties){if(!Xh.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),u=new f_(o),f=new Gs(u,o.property.specification);let g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new $a("source",f):new ja("composite",f,o.value.zoomStops,o.value._interpolationType),this.paint._values[t]=new Ji(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&Xh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const u=t.get("text-field"),f=up.paint.properties[o];let g=!1;const y=w=>{for(const E of w)if(f.overrides&&f.overrides.hasOverride(E))return void(g=!0)};if(u.value.kind==="constant"&&u.value.value instanceof ce)y(u.value.value.sections);else if(u.value.kind==="source"){const w=M=>{g||(M instanceof $e&&we(M.value)===ki?y(M.value.sections):M instanceof _t?y(M.sections):M.eachChild(w))},E=u.value;E._styleExpression&&w(E._styleExpression.expression)}return g}}function cp(i,t,o){let u="never";const f=i.get(t);return f?u=f:i.get(o)&&(u="always"),u}var Xb={paint:new Qr({"background-color":new Ct(ke.paint_background["background-color"]),"background-pattern":new Gl(ke.paint_background["background-pattern"]),"background-opacity":new Ct(ke.paint_background["background-opacity"])})},Hb={paint:new Qr({"raster-opacity":new Ct(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ct(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ct(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ct(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Ct(ke.paint_raster["raster-saturation"]),"raster-contrast":new Ct(ke.paint_raster["raster-contrast"]),"raster-resampling":new Ct(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Ct(ke.paint_raster["raster-fade-duration"])})};class Yb extends li{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Kb={circle:class extends li{constructor(i){super(i,kw)}createBucket(i){return new Od(i)}queryRadius(i){const t=i;return oc("circle-radius",this,t)+oc("circle-stroke-width",this,t)+Mh(this.paint.get("circle-translate"))}queryIntersectsFeature(i,t,o,u,f,g,y,w){const E=zh(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,y),M=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o),B=this.paint.get("circle-pitch-alignment")==="map",U=B?E:function(K,ee){return K.map(de=>wy(de,ee))}(E,w),W=B?M*y:M;for(const K of u)for(const ee of K){const de=B?ee:wy(ee,w);let ge=W;const Se=Oh(Bd(),Lh(ee.x,ee.y,0,1),w);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ge*=Se[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ge*=g.cameraToCenterDistance/Se[3]),Ew(U,de,ge))return!0}return!1}},heatmap:class extends li{constructor(i){super(i,Pw),this._updateColorRamp()}createBucket(i){return new by(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends li{constructor(i){super(i,Mw)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends li{constructor(i){super(i,Ww)}recalculate(i,t){super.recalculate(i,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Xd(i)}queryRadius(){return Mh(this.paint.get("fill-translate"))}queryIntersectsFeature(i,t,o,u,f,g,y){return yy(zh(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,y),u)}isTileClipped(){return!0}},"fill-extrusion":class extends li{constructor(i){super(i,ab)}createBucket(i){return new Yd(i)}queryRadius(){return Mh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,t,o,u,f,g,y,w){const E=zh(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,y),M=this.paint.get("fill-extrusion-height").evaluate(t,o),B=this.paint.get("fill-extrusion-base").evaluate(t,o),U=function(K,ee,de,ge){const Se=[];for(const Le of K){const Me=Lh(Le.x,Le.y,0,1);Oh(Me,Me,ee),Se.push(new Ue(Me[0]/Me[3],Me[1]/Me[3]))}return Se}(E,w),W=function(K,ee,de,ge){const Se=[],Le=[],Me=ge[8]*ee,Fe=ge[9]*ee,We=ge[10]*ee,Ve=ge[11]*ee,pt=ge[8]*de,It=ge[9]*de,lt=ge[10]*de,ut=ge[11]*de;for(const it of K){const gt=[],ct=[];for(const Qe of it){const Ot=Qe.x,Mt=Qe.y,sn=ge[0]*Ot+ge[4]*Mt+ge[12],gn=ge[1]*Ot+ge[5]*Mt+ge[13],Nn=ge[2]*Ot+ge[6]*Mt+ge[14],Un=ge[3]*Ot+ge[7]*Mt+ge[15],zr=Nn+We,pr=Un+Ve,mr=sn+pt,Tr=gn+It,Lr=Nn+lt,Vr=Un+ut,di=new Ue((sn+Me)/pr,(gn+Fe)/pr);di.z=zr/pr,gt.push(di);const gr=new Ue(mr/Vr,Tr/Vr);gr.z=Lr/Vr,ct.push(gr)}Se.push(gt),Le.push(ct)}return[Se,Le]}(u,B,M,w);return function(K,ee,de){let ge=1/0;yy(de,ee)&&(ge=Oy(de,ee[0]));for(let Se=0;Se<ee.length;Se++){const Le=ee[Se],Me=K[Se];for(let Fe=0;Fe<Le.length-1;Fe++){const We=Le[Fe],Ve=[We,Le[Fe+1],Me[Fe+1],Me[Fe],We];gy(de,Ve)&&(ge=Math.min(ge,Oy(de,Ve)))}}return ge!==1/0&&ge}(W[0],W[1],U)}},line:class extends li{constructor(i){super(i,Dy),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Lo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,t){super.recalculate(i,t),this.paint._values["line-floorwidth"]=Fy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Kd(i)}queryRadius(i){const t=i,o=By(oc("line-width",this,t),oc("line-gap-width",this,t)),u=oc("line-offset",this,t);return o/2+Math.abs(u)+Mh(this.paint.get("line-translate"))}queryIntersectsFeature(i,t,o,u,f,g,y){const w=zh(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,y),E=y/2*By(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),M=this.paint.get("line-offset").evaluate(t,o);return M&&(u=function(B,U){const W=[],K=new Ue(0,0);for(let ee=0;ee<B.length;ee++){const de=B[ee],ge=[];for(let Se=0;Se<de.length;Se++){const Le=de[Se-1],Me=de[Se],Fe=de[Se+1],We=Se===0?K:Me.sub(Le)._unit()._perp(),Ve=Se===de.length-1?K:Fe.sub(Me)._unit()._perp(),pt=We._add(Ve)._unit();pt._mult(1/(pt.x*Ve.x+pt.y*Ve.y)),ge.push(pt._mult(U)._add(Me))}W.push(ge)}return W}(u,M*y)),function(B,U,W){for(let K=0;K<U.length;K++){const ee=U[K];if(B.length>=3){for(let de=0;de<ee.length;de++)if(Yl(B,ee[de]))return!0}if(Sw(B,ee,W))return!0}return!1}(w,u,E)}isTileClipped(){return!0}},symbol:Xh,background:class extends li{constructor(i){super(i,Xb)}},raster:class extends li{constructor(i){super(i,Hb)}}};class Jb{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const d_=63710088e-1;class ar{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ar(q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,u=this.lat*o,f=t.lat*o,g=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((t.lng-this.lng)*o);return d_*Math.acos(Math.min(g,1))}toBounds(t=0){const o=360*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new ol(new ar(this.lng-u,this.lat-o),new ar(this.lng+u,this.lat+o))}static convert(t){if(t instanceof ar)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new ar(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new ar(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ol{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ar?new ar(t.lng,t.lat):ar.convert(t),this}setSouthWest(t){return this._sw=t instanceof ar?new ar(t.lng,t.lat):ar.convert(t),this}extend(t){const o=this._sw,u=this._ne;let f,g;if(t instanceof ar)f=t,g=t;else{if(!(t instanceof ol))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(ol.convert(t)):this.extend(ar.convert(t)):this;if(f=t._sw,g=t._ne,!f||!g)return this}return o||u?(o.lng=Math.min(f.lng,o.lng),o.lat=Math.min(f.lat,o.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new ar(f.lng,f.lat),this._ne=new ar(g.lng,g.lat)),this}getCenter(){return new ar((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ar(this.getWest(),this.getNorth())}getSouthEast(){return new ar(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:u}=ar.convert(t);let f=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&f}static convert(t){return t instanceof ol?t:t&&new ol(t)}}const p_=2*Math.PI*d_;function m_(i){return p_*Math.cos(i*Math.PI/180)}function g_(i){return(180+i)/360}function y_(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function __(i,t){return i/m_(t)}function hp(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Hh{constructor(t,o,u=0){this.x=+t,this.y=+o,this.z=+u}static fromLngLat(t,o=0){const u=ar.convert(t);return new Hh(g_(u.lng),y_(u.lat),__(o,u.lat))}toLngLat(){return new ar(360*this.x-180,hp(this.y))}toAltitude(){return this.z*m_(hp(this.y))}meterInMercatorCoordinateUnits(){return 1/p_*(t=hp(this.y),1/Math.cos(t*Math.PI/180));var t}}function v_(i,t,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[i*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class fp{constructor(t,o,u){this.z=t,this.x=o,this.y=u,this.key=mc(0,t,t,o,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,u){const f=(y=this.y,w=this.z,E=v_(256*(g=this.x),256*(y=Math.pow(2,w)-y-1),w),M=v_(256*(g+1),256*(y+1),w),E[0]+","+E[1]+","+M[0]+","+M[1]);var g,y,w,E,M;const B=function(U,W,K){let ee,de="";for(let ge=U;ge>0;ge--)ee=1<<ge-1,de+=(W&ee?1:0)+(K&ee?2:0);return de}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,f)}getTilePoint(t){const o=Math.pow(2,this.z);return new Ue((t.x*o-this.x)*br,(t.y*o-this.y)*br)}toString(){return`${this.z}/${this.x}/${this.y}`}}class x_{constructor(t,o){this.wrap=t,this.canonical=o,this.key=mc(t,o.z,o.z,o.x,o.y)}}class Qi{constructor(t,o,u,f,g){this.overscaledZ=t,this.wrap=o,this.canonical=new fp(u,+f,+g),this.key=mc(o,t,u,f,g)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const o=this.canonical.z-t;return t>this.canonical.z?new Qi(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qi(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){const u=this.canonical.z-t;return t>this.canonical.z?mc(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):mc(this.wrap*+o,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Qi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new Qi(o,this.wrap,o,u,f),new Qi(o,this.wrap,o,u+1,f),new Qi(o,this.wrap,o,u,f+1),new Qi(o,this.wrap,o,u+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Qi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Qi(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new x_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Hh(t.x-this.wrap,t.y))}}function mc(i,t,o,u,f){(i*=2)<0&&(i=-1*i-1);const g=1<<o;return(g*g*i+g*f+u).toString(36)+o.toString(36)+t.toString(36)}Ke("CanonicalTileID",fp),Ke("OverscaledTileID",Qi,{omit:["posMatrix"]});class w_{constructor(t,o,u){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void me(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const f=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=u||"mapbox";for(let g=0;g<f;g++)this.data[this._idx(-1,g)]=this.data[this._idx(0,g)],this.data[this._idx(f,g)]=this.data[this._idx(f-1,g)],this.data[this._idx(g,-1)]=this.data[this._idx(g,0)],this.data[this._idx(g,f)]=this.data[this._idx(g,f-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(f,-1)]=this.data[this._idx(f-1,0)],this.data[this._idx(-1,f)]=this.data[this._idx(0,f-1)],this.data[this._idx(f,f)]=this.data[this._idx(f-1,f-1)]}get(t,o){const u=new Uint8Array(this.data.buffer),f=4*this._idx(t,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(u[f],u[f+1],u[f+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}_unpackMapbox(t,o,u){return(256*t*256+256*o+u)/10-1e4}_unpackTerrarium(t,o,u){return 256*t+o+u/256-32768}getPixels(){return new Di({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=o*this.dim,g=o*this.dim+this.dim,y=u*this.dim,w=u*this.dim+this.dim;switch(o){case-1:f=g-1;break;case 1:g=f+1}switch(u){case-1:y=w-1;break;case 1:w=y+1}const E=-o*this.dim,M=-u*this.dim;for(let B=y;B<w;B++)for(let U=f;U<g;U++)this.data[this._idx(U,B)]=t.data[this._idx(U+E,B+M)]}}Ke("DEMData",w_);class b_{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const u=t[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class E_{constructor(t,o,u,f,g){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=u,t._y=f,this.properties=t.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t=function(o,u){var f={};for(var g in o)Object.prototype.hasOwnProperty.call(o,g)&&u.indexOf(g)<0&&(f[g]=o[g]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var y=0;for(g=Object.getOwnPropertySymbols(o);y<g.length;y++)u.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(o,g[y])&&(f[g[y]]=o[g[y]])}return f}(this,["_geometry","_vectorTileFeature"]);return t.geometry=this.geometry,t}}class S_{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new St(br,16,0),this.grid3D=new St(br,16,0),this.featureIndexArray=new Bt,this.promoteId=o}insert(t,o,u,f,g,y){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,g);const E=y?this.grid3D:this.grid;for(let M=0;M<o.length;M++){const B=o[M],U=[1/0,1/0,-1/0,-1/0];for(let W=0;W<B.length;W++){const K=B[W];U[0]=Math.min(U[0],K.x),U[1]=Math.min(U[1],K.y),U[2]=Math.max(U[2],K.x),U[3]=Math.max(U[3],K.y)}U[0]<br&&U[1]<br&&U[2]>=0&&U[3]>=0&&E.insert(w,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ka.VectorTile(new Jd(this.rawTileData)).layers,this.sourceLayerCoder=new b_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,u,f){this.loadVTLayers();const g=t.params||{},y=br/t.tileSize/t.scale,w=Bo(g.filter),E=t.queryGeometry,M=t.queryPadding*y,B=A_(E),U=this.grid.query(B.minX-M,B.minY-M,B.maxX+M,B.maxY+M),W=A_(t.cameraQueryGeometry),K=this.grid3D.query(W.minX-M,W.minY-M,W.maxX+M,W.maxY+M,(ge,Se,Le,Me)=>function(Fe,We,Ve,pt,It){for(const ut of Fe)if(We<=ut.x&&Ve<=ut.y&&pt>=ut.x&&It>=ut.y)return!0;const lt=[new Ue(We,Ve),new Ue(We,It),new Ue(pt,It),new Ue(pt,Ve)];if(Fe.length>2){for(const ut of lt)if(Yl(Fe,ut))return!0}for(let ut=0;ut<Fe.length-1;ut++)if(Aw(Fe[ut],Fe[ut+1],lt))return!0;return!1}(t.cameraQueryGeometry,ge-M,Se-M,Le+M,Me+M));for(const ge of K)U.push(ge);U.sort(Qb);const ee={};let de;for(let ge=0;ge<U.length;ge++){const Se=U[ge];if(Se===de)continue;de=Se;const Le=this.featureIndexArray.get(Se);let Me=null;this.loadMatchingFeature(ee,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,w,g.layers,g.availableImages,o,u,f,(Fe,We,Ve)=>(Me||(Me=nl(Fe)),We.queryIntersectsFeature(E,Fe,Ve,Me,this.z,t.transform,y,t.pixelPosMatrix)))}return ee}loadMatchingFeature(t,o,u,f,g,y,w,E,M,B,U){const W=this.bucketLayerIDs[o];if(y&&!function(ge,Se){for(let Le=0;Le<ge.length;Le++)if(Se.indexOf(ge[Le])>=0)return!0;return!1}(y,W))return;const K=this.sourceLayerCoder.decode(u),ee=this.vtLayers[K].feature(f);if(g.needGeometry){const ge=rl(ee,!0);if(!g.filter(new Fn(this.tileID.overscaledZ),ge,this.tileID.canonical))return}else if(!g.filter(new Fn(this.tileID.overscaledZ),ee))return;const de=this.getId(ee,K);for(let ge=0;ge<W.length;ge++){const Se=W[ge];if(y&&y.indexOf(Se)<0)continue;const Le=E[Se];if(!Le)continue;let Me={};de&&B&&(Me=B.getState(Le.sourceLayer||"_geojsonTileLayer",de));const Fe=te({},M[Se]);Fe.paint=T_(Fe.paint,Le.paint,ee,Me,w),Fe.layout=T_(Fe.layout,Le.layout,ee,Me,w);const We=!U||U(ee,Le,Me);if(!We)continue;const Ve=new E_(ee,this.z,this.x,this.y,de);Ve.layer=Fe;let pt=t[Se];pt===void 0&&(pt=t[Se]=[]),pt.push({featureIndex:f,feature:Ve,intersectionZ:We})}}lookupSymbolFeatures(t,o,u,f,g,y,w,E){const M={};this.loadVTLayers();const B=Bo(g);for(const U of t)this.loadMatchingFeature(M,u,f,U,B,y,w,E,o);return M}hasLayer(t){for(const o of this.bucketLayerIDs)for(const u of o)if(t===u)return!0;return!1}getId(t,o){let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof u=="boolean"&&(u=Number(u))),u}}function T_(i,t,o,u,f){return N(i,(g,y)=>{const w=t instanceof jl?t.get(y):null;return w&&w.evaluate?w.evaluate(o,u,f):w})}function A_(i){let t=1/0,o=1/0,u=-1/0,f=-1/0;for(const g of i)t=Math.min(t,g.x),o=Math.min(o,g.y),u=Math.max(u,g.x),f=Math.max(f,g.y);return{minX:t,minY:o,maxX:u,maxY:f}}function Qb(i,t){return t-i}var dp;Ke("FeatureIndex",S_,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(dp=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",dp.load="load",dp.fullLoad="fullLoad";let Yh=null,gc=[];const pp=1e3/30,e2={mark(i){performance.mark(i)},frame(i){const t=i;Yh!=null&&gc.push(t-Yh),Yh=t},clearMetrics(){Yh=null,gc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,o=gc.length,u=1/(gc.reduce((g,y)=>g+y,0)/o/1e3),f=gc.filter(g=>g>pp).reduce((g,y)=>g+(y-pp)/pp,0);return{loadTime:i,fullLoadTime:t,fps:u,percentDroppedFrames:f/(o+f)*100}}};l.AJAXError=hr,l.ARRAY_TYPE=il,l.Actor=class{constructor(i,t,o){this.target=i,this.parent=t,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},j(["receive","process"],this),this.invoker=new Jb(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ne()?i:window}send(i,t,o,u,f=!1){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[g]=o);const y=rt(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:i,hasCallback:!!o,targetMapId:u,mustQueue:f,sourceMapId:this.mapId,data:bn(t,y)},y),{cancel:()=>{o&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const t=i.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[o];const u=this.cancelCallbacks[o];delete this.cancelCallbacks[o],u&&u()}else ne()||t.mustQueue?(this.tasks[o]=t,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,t)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){if(t.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(t.error?o(Pn(t.error)):o(null,Pn(t.data)))}else{let o=!1;const u=rt(this.globalScope)?void 0:[],f=t.hasCallback?(w,E)=>{o=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:w?bn(w):null,data:bn(E,u)},u)}:w=>{o=!0};let g=null;const y=Pn(t.data);if(this.parent[t.type])g=this.parent[t.type](t.sourceMapId,y,f);else if(this.parent.getWorkerSource){const w=t.type.split(".");g=this.parent.getWorkerSource(t.sourceMapId,w[0],y.source)[w[1]](y,f)}else f(new Error(`Could not find function ${t.type}`));!o&&g&&g.cancel&&(this.cancelCallbacks[i]=g.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=ac,l.CanonicalTileID=fp,l.CollisionBoxArray=Ne,l.CollisionCircleLayoutArray=class extends k{},l.Color=F,l.DEMData=w_,l.DataConstantProperty=Ct,l.DictionaryCoder=b_,l.EXTENT=br,l.ErrorEvent=Xe,l.EvaluationParameters=Fn,l.Event=qe,l.Evented=Dt,l.FeatureIndex=S_,l.FillBucket=Xd,l.FillExtrusionBucket=Yd,l.GeoJSONFeature=E_,l.ImageAtlas=Wy,l.ImagePosition=ep,l.LineBucket=Kd,l.LineStripIndexArray=class extends be{},l.LngLat=ar,l.LngLatBounds=ol,l.MercatorCoordinate=Hh,l.ONE_EM=Ir,l.OverscaledTileID=Qi,l.PerformanceUtils=e2,l.PosArray=class extends Qs{},l.Properties=Qr,l.QuadTriangleArray=class extends V{},l.RGBAImage=Di,l.RasterBoundsArray=class extends ql{},l.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},l.ResourceType=Qt,l.SegmentVector=An,l.SymbolBucket=ru,l.Transitionable=nc,l.TriangleIndexArray=hi,l.Uniform1f=ga,l.Uniform1i=class extends ma{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},l.Uniform2f=class extends ma{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},l.Uniform3f=class extends ma{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},l.Uniform4f=Xl,l.UniformColor=fy,l.UniformMatrix4f=class extends ma{constructor(i,t){super(i,t),this.current=ww}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},l.UnwrappedTileID=x_,l.ValidationError=Ge,l.ZoomHistory=ur,l.addDynamicAttributes=ap,l.asyncAll=function(i,t,o){if(!i.length)return o(null,[]);let u=i.length;const f=new Array(i.length);let g=null;i.forEach((y,w)=>{t(y,(E,M)=>{E&&(g=E),f[w]=M,--u==0&&o(g,f)})})},l.bezier=z,l.bindAll=j,l.cacheEntryPossiblyAdded=function(i){wt++,wt>At&&(i.getActor().send("enforceCacheSizeLimit",mt),wt=0)},l.clamp=P,l.clearTileCache=function(i){const t=caches.delete(vn);i&&t.catch(i).then(()=>i())},l.clipLine=a_,l.clone=function(i){var t=new il(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},l.clone$1=G,l.collisionCircleLayout=yb,l.config=rn,l.create=function(){var i=new il(16);return il!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.createExpression=sa,l.createFilter=Bo,l.createLayout=Jn,l.createStyleLayer=function(i){return i.type==="custom"?new Yb(i):new Kb[i.type](i)},l.dot=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},l.ease=C,l.emitValidationErrors=Et,l.enforceCacheSizeLimit=function(i){xt(),Sn&&Sn.then(t=>{t.keys().then(o=>{for(let u=0;u<o.length-i;u++)t.delete(o[u])})})},l.evaluateSizeForFeature=Qy,l.evaluateSizeForZoom=e_,l.evaluateVariableOffset=u_,l.evented=ec,l.exported=dt,l.exported$1=Xt,l.extend=te,l.filterObject=$,l.fromValues=Lh,l.getAnchorAlignment=np,l.getAnchorJustification=op,l.getArrayBuffer=Vn,l.getImage=D,l.getJSON=function(i,t){return Mr(te(i,{type:"json"}),t)},l.getOverlapMode=cp,l.getRTLTextPluginStatus=qa,l.getReferrer=rr,l.getVideo=function(i,t){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let u=0;u<i.length;u++){const f=window.document.createElement("source");Hn(i[u])||(o.crossOrigin="Anonymous"),f.src=i[u],o.appendChild(f)}return{cancel:()=>{}}},l.identity=Fd,l.invert=function(i,t){var o=t[0],u=t[1],f=t[2],g=t[3],y=t[4],w=t[5],E=t[6],M=t[7],B=t[8],U=t[9],W=t[10],K=t[11],ee=t[12],de=t[13],ge=t[14],Se=t[15],Le=o*w-u*y,Me=o*E-f*y,Fe=o*M-g*y,We=u*E-f*w,Ve=u*M-g*w,pt=f*M-g*E,It=B*de-U*ee,lt=B*ge-W*ee,ut=B*Se-K*ee,it=U*ge-W*de,gt=U*Se-K*de,ct=W*Se-K*ge,Qe=Le*ct-Me*gt+Fe*it+We*ut-Ve*lt+pt*It;return Qe?(i[0]=(w*ct-E*gt+M*it)*(Qe=1/Qe),i[1]=(f*gt-u*ct-g*it)*Qe,i[2]=(de*pt-ge*Ve+Se*We)*Qe,i[3]=(W*Ve-U*pt-K*We)*Qe,i[4]=(E*ut-y*ct-M*lt)*Qe,i[5]=(o*ct-f*ut+g*lt)*Qe,i[6]=(ge*Fe-ee*pt-Se*Me)*Qe,i[7]=(B*pt-W*Fe+K*Me)*Qe,i[8]=(y*gt-w*ut+M*It)*Qe,i[9]=(u*ut-o*gt-g*It)*Qe,i[10]=(ee*Ve-de*Fe+Se*Le)*Qe,i[11]=(U*Fe-B*Ve-K*Le)*Qe,i[12]=(w*lt-y*it-E*It)*Qe,i[13]=(o*it-u*lt+f*It)*Qe,i[14]=(de*Me-ee*We-ge*Le)*Qe,i[15]=(B*We-U*Me+W*Le)*Qe,i):null},l.isImageBitmap=ft,l.isSafari=rt,l.keysDifference=function(i,t){const o=[];for(const u in i)u in t||o.push(u);return o},l.lazyLoadRTLTextPlugin=function(){Jr.isLoading()||Jr.isLoaded()||qa()!=="deferred"||Th()},l.makeRequest=Mr,l.mapObject=N,l.mercatorXfromLng=g_,l.mercatorYfromLat=y_,l.mercatorZfromAltitude=__,l.mul=Iw,l.multiply=xy,l.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},l.number=On,l.ortho=function(i,t,o,u,f,g,y){var w=1/(t-o),E=1/(u-f),M=1/(g-y);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*E,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*M,i[11]=0,i[12]=(t+o)*w,i[13]=(f+u)*E,i[14]=(y+g)*M,i[15]=1,i},l.parseCacheControl=Te,l.parseGlyphPBF=function(i){return new Jd(i).readFields(kb,[])},l.pbf=Jd,l.performSymbolLayout=function(i,t,o,u,f,g,y){i.createArrays(),i.tilePixelRatio=br/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const w=i.layers[0].layout,E=i.layers[0]._unevaluatedLayout._values,M={layoutIconSize:E["icon-size"].possiblyEvaluate(new Fn(i.zoom+1),y),layoutTextSize:E["text-size"].possiblyEvaluate(new Fn(i.zoom+1),y),textMaxSize:E["text-size"].possiblyEvaluate(new Fn(18))};if(i.textSizeData.kind==="composite"){const{minZoom:ee,maxZoom:de}=i.textSizeData;M.compositeTextSizes=[E["text-size"].possiblyEvaluate(new Fn(ee),y),E["text-size"].possiblyEvaluate(new Fn(de),y)]}if(i.iconSizeData.kind==="composite"){const{minZoom:ee,maxZoom:de}=i.iconSizeData;M.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new Fn(ee),y),E["icon-size"].possiblyEvaluate(new Fn(de),y)]}const B=w.get("text-line-height")*Ir,U=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",W=w.get("text-keep-upright"),K=w.get("text-size");for(const ee of i.features){const de=w.get("text-font").evaluate(ee,{},y).join(","),ge=K.evaluate(ee,{},y),Se=M.layoutTextSize.evaluate(ee,{},y),Le=M.layoutIconSize.evaluate(ee,{},y),Me={horizontal:{},vertical:void 0},Fe=ee.text;let We,Ve=[0,0];if(Fe){const lt=Fe.toString(),ut=w.get("text-letter-spacing").evaluate(ee,{},y)*Ir,it=Li(lt)?ut:0,gt=w.get("text-anchor").evaluate(ee,{},y),ct=w.get("text-variable-anchor");if(!ct){const gn=w.get("text-radial-offset").evaluate(ee,{},y);Ve=gn?u_(gt,[gn*Ir,ip]):w.get("text-offset").evaluate(ee,{},y).map(Nn=>Nn*Ir)}let Qe=U?"center":w.get("text-justify").evaluate(ee,{},y);const Ot=w.get("symbol-placement"),Mt=Ot==="point"?w.get("text-max-width").evaluate(ee,{},y)*Ir:0,sn=()=>{i.allowVerticalPlacement&&si(lt)&&(Me.vertical=Vh(Fe,t,o,f,de,Mt,B,gt,"left",it,Ve,l.WritingMode.vertical,!0,Ot,Se,ge))};if(!U&&ct){const gn=Qe==="auto"?ct.map(Un=>op(Un)):[Qe];let Nn=!1;for(let Un=0;Un<gn.length;Un++){const zr=gn[Un];if(!Me.horizontal[zr])if(Nn)Me.horizontal[zr]=Me.horizontal[0];else{const pr=Vh(Fe,t,o,f,de,Mt,B,"center",zr,it,Ve,l.WritingMode.horizontal,!1,Ot,Se,ge);pr&&(Me.horizontal[zr]=pr,Nn=pr.positionedLines.length===1)}}sn()}else{Qe==="auto"&&(Qe=op(gt));const gn=Vh(Fe,t,o,f,de,Mt,B,gt,Qe,it,Ve,l.WritingMode.horizontal,!1,Ot,Se,ge);gn&&(Me.horizontal[Qe]=gn),sn(),si(lt)&&U&&W&&(Me.vertical=Vh(Fe,t,o,f,de,Mt,B,gt,Qe,it,Ve,l.WritingMode.vertical,!1,Ot,Se,ge))}}let pt=!1;if(ee.icon&&ee.icon.name){const lt=u[ee.icon.name];lt&&(We=Ob(f[ee.icon.name],w.get("icon-offset").evaluate(ee,{},y),w.get("icon-anchor").evaluate(ee,{},y)),pt=!!lt.sdf,i.sdfIcons===void 0?i.sdfIcons=pt:i.sdfIcons!==pt&&me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lt.pixelRatio!==i.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const It=h_(Me.horizontal)||Me.vertical;i.iconsInText=!!It&&It.iconsInText,(It||We)&&$b(i,ee,Me,We,u,M,Se,Le,Ve,pt,y)}g&&i.generateCollisionDebugBuffers()},l.perspective=function(i,t,o,u,f){var g,y=1/Math.tan(t/2);return i[0]=y/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+u)*(g=1/(u-f)),i[14]=2*f*u*g):(i[10]=-1,i[14]=-2*u),i},l.pick=function(i,t){const o={};for(let u=0;u<t.length;u++){const f=t[u];f in i&&(o[f]=i[f])}return o},l.plugin=Jr,l.pointGeometry=Ue,l.polygonIntersectsPolygon=gy,l.potpack=qy,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=Ke,l.registerForPluginStateChange=function(i){return i({pluginStatus:Kr,pluginURL:Vo}),ec.on("pluginStateChange",i),i},l.renderColorRamp=Sy,l.rotateX=function(i,t,o){var u=Math.sin(o),f=Math.cos(o),g=t[4],y=t[5],w=t[6],E=t[7],M=t[8],B=t[9],U=t[10],W=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=g*f+M*u,i[5]=y*f+B*u,i[6]=w*f+U*u,i[7]=E*f+W*u,i[8]=M*f-g*u,i[9]=B*f-y*u,i[10]=U*f-w*u,i[11]=W*f-E*u,i},l.rotateZ=function(i,t,o){var u=Math.sin(o),f=Math.cos(o),g=t[0],y=t[1],w=t[2],E=t[3],M=t[4],B=t[5],U=t[6],W=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=g*f+M*u,i[1]=y*f+B*u,i[2]=w*f+U*u,i[3]=E*f+W*u,i[4]=M*f-g*u,i[5]=B*f-y*u,i[6]=U*f-w*u,i[7]=W*f-E*u,i},l.scale=function(i,t,o){var u=o[0],f=o[1],g=o[2];return i[0]=t[0]*u,i[1]=t[1]*u,i[2]=t[2]*u,i[3]=t[3]*u,i[4]=t[4]*f,i[5]=t[5]*f,i[6]=t[6]*f,i[7]=t[7]*f,i[8]=t[8]*g,i[9]=t[9]*g,i[10]=t[10]*g,i[11]=t[11]*g,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},l.scale$1=function(i,t,o){return i[0]=t[0]*o,i[1]=t[1]*o,i[2]=t[2]*o,i[3]=t[3]*o,i},l.setCacheLimits=function(i,t){mt=i,At=t},l.setRTLTextPlugin=function(i,t,o=!1){if(Kr===Yu||Kr===Vl||Kr===Ku)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vo=dt.resolveURL(i),Kr=Yu,Ju=t,Qu(),o||Th()},l.spec=ke,l.sphericalToCartesian=function([i,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(o),y:i*Math.sin(t)*Math.sin(o),z:i*Math.cos(o)}},l.symbolSize=Rb,l.toEvaluationFeature=rl,l.transformMat4=Oh,l.translate=function(i,t,o){var u,f,g,y,w,E,M,B,U,W,K,ee,de=o[0],ge=o[1],Se=o[2];return t===i?(i[12]=t[0]*de+t[4]*ge+t[8]*Se+t[12],i[13]=t[1]*de+t[5]*ge+t[9]*Se+t[13],i[14]=t[2]*de+t[6]*ge+t[10]*Se+t[14],i[15]=t[3]*de+t[7]*ge+t[11]*Se+t[15]):(f=t[1],g=t[2],y=t[3],w=t[4],E=t[5],M=t[6],B=t[7],U=t[8],W=t[9],K=t[10],ee=t[11],i[0]=u=t[0],i[1]=f,i[2]=g,i[3]=y,i[4]=w,i[5]=E,i[6]=M,i[7]=B,i[8]=U,i[9]=W,i[10]=K,i[11]=ee,i[12]=u*de+w*ge+U*Se+t[12],i[13]=f*de+E*ge+W*Se+t[13],i[14]=g*de+M*ge+K*Se+t[14],i[15]=y*de+B*ge+ee*Se+t[15]),i},l.triggerPluginCompletionEvent=Sh,l.unicodeBlockLookup=Je,l.uniqueId=function(){return Z++},l.validateCustomStyleLayer=function(i){const t=[],o=i.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},l.validateLight=ze,l.validateStyle=fe,l.vectorTile=Ka,l.warnOnce=me,l.wrap=q}),_(["./shared"],function(l){function S(ae){const L=typeof ae;if(L==="number"||L==="boolean"||L==="string"||ae==null)return JSON.stringify(ae);if(Array.isArray(ae)){let le="[";for(const ce of ae)le+=`${S(ce)},`;return`${le}]`}const F=Object.keys(ae).sort();let Q="{";for(let le=0;le<F.length;le++)Q+=`${JSON.stringify(F[le])}:${S(ae[F[le]])},`;return`${Q}}`}function A(ae){let L="";for(const F of l.refProperties)L+=`/${S(ae[F])}`;return L}class z{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,F){for(const le of L){this._layerConfigs[le.id]=le;const ce=this._layers[le.id]=l.createStyleLayer(le);ce._featureFilter=l.createFilter(ce.filter),this.keyCache[le.id]&&delete this.keyCache[le.id]}for(const le of F)delete this.keyCache[le],delete this._layerConfigs[le],delete this._layers[le];this.familiesBySource={};const Q=function(le,ce){const xe={};for(let _e=0;_e<le.length;_e++){const we=ce&&ce[le[_e].id]||A(le[_e]);ce&&(ce[le[_e].id]=we);let De=xe[we];De||(De=xe[we]=[]),De.push(le[_e])}const ye=[];for(const _e in xe)ye.push(xe[_e]);return ye}(Object.values(this._layerConfigs),this.keyCache);for(const le of Q){const ce=le.map($e=>this._layers[$e.id]),xe=ce[0];if(xe.visibility==="none")continue;const ye=xe.source||"";let _e=this.familiesBySource[ye];_e||(_e=this.familiesBySource[ye]={});const we=xe.sourceLayer||"_geojsonTileLayer";let De=_e[we];De||(De=_e[we]=[]),De.push(ce)}}}class C{constructor(L){const F={},Q=[];for(const ye in L){const _e=L[ye],we=F[ye]={};for(const De in _e){const $e=_e[+De];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;const Re={x:0,y:0,w:$e.bitmap.width+2,h:$e.bitmap.height+2};Q.push(Re),we[De]={rect:Re,metrics:$e.metrics}}}const{w:le,h:ce}=l.potpack(Q),xe=new l.AlphaImage({width:le||1,height:ce||1});for(const ye in L){const _e=L[ye];for(const we in _e){const De=_e[+we];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const $e=F[ye][we].rect;l.AlphaImage.copy(De.bitmap,xe,{x:0,y:0},{x:$e.x+1,y:$e.y+1},De.bitmap)}}this.image=xe,this.positions=F}}l.register("GlyphAtlas",C);class P{constructor(L){this.tileID=new l.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId}parse(L,F,Q,le,ce){this.status="parsing",this.data=L,this.collisionBoxArray=new l.CollisionBoxArray;const xe=new l.DictionaryCoder(Object.keys(L.layers).sort()),ye=new l.FeatureIndex(this.tileID,this.promoteId);ye.bucketLayerIDs=[];const _e={},we={featureIndex:ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},De=F.familiesBySource[this.source];for(const Yt in De){const qt=L.layers[Yt];if(!qt)continue;qt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Yt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wt=xe.encode(Yt),zn=[];for(let jn=0;jn<qt.length;jn++){const kn=qt.feature(jn),Gi=ye.getId(kn,Yt);zn.push({feature:kn,id:Gi,index:jn,sourceLayerIndex:Wt})}for(const jn of De[Yt]){const kn=jn[0];kn.minzoom&&this.zoom<Math.floor(kn.minzoom)||kn.maxzoom&&this.zoom>=kn.maxzoom||kn.visibility!=="none"&&(q(jn,this.zoom,Q),(_e[kn.id]=kn.createBucket({index:ye.bucketLayerIDs.length,layers:jn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wt,sourceID:this.source})).populate(zn,we,this.tileID.canonical),ye.bucketLayerIDs.push(jn.map(Gi=>Gi.id)))}}let $e,Re,bt,ot;const _t=l.mapObject(we.glyphDependencies,Yt=>Object.keys(Yt).map(Number));Object.keys(_t).length?le.send("getGlyphs",{uid:this.uid,stacks:_t},(Yt,qt)=>{$e||($e=Yt,Re=qt,jt.call(this))}):Re={};const zt=Object.keys(we.iconDependencies);zt.length?le.send("getImages",{icons:zt,source:this.source,tileID:this.tileID,type:"icons"},(Yt,qt)=>{$e||($e=Yt,bt=qt,jt.call(this))}):bt={};const vt=Object.keys(we.patternDependencies);function jt(){if($e)return ce($e);if(Re&&bt&&ot){const Yt=new C(Re),qt=new l.ImageAtlas(bt,ot);for(const Wt in _e){const zn=_e[Wt];zn instanceof l.SymbolBucket?(q(zn.layers,this.zoom,Q),l.performSymbolLayout(zn,Re,Yt.positions,bt,qt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):zn.hasPattern&&(zn instanceof l.LineBucket||zn instanceof l.FillBucket||zn instanceof l.FillExtrusionBucket)&&(q(zn.layers,this.zoom,Q),zn.addFeatures(we,this.tileID.canonical,qt.patternPositions))}this.status="done",ce(null,{buckets:Object.values(_e).filter(Wt=>!Wt.isEmpty()),featureIndex:ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yt.image,imageAtlas:qt,glyphMap:this.returnDependencies?Re:null,iconMap:this.returnDependencies?bt:null,glyphPositions:this.returnDependencies?Yt.positions:null})}}vt.length?le.send("getImages",{icons:vt,source:this.source,tileID:this.tileID,type:"patterns"},(Yt,qt)=>{$e||($e=Yt,ot=qt,jt.call(this))}):ot={},jt.call(this)}}function q(ae,L,F){const Q=new l.EvaluationParameters(L);for(const le of ae)le.recalculate(Q,F)}function te(ae,L){const F=l.getArrayBuffer(ae.request,(Q,le,ce,xe)=>{Q?L(Q):le&&L(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(le)),rawData:le,cacheControl:ce,expires:xe})});return()=>{F.cancel(),L()}}class Z{constructor(L,F,Q,le){this.actor=L,this.layerIndex=F,this.availableImages=Q,this.loadVectorData=le||te,this.loading={},this.loaded={}}loadTile(L,F){const Q=L.uid;this.loading||(this.loading={});const le=!!(L&&L.request&&L.request.collectResourceTiming)&&new l.RequestPerformance(L.request),ce=this.loading[Q]=new P(L);ce.abort=this.loadVectorData(L,(xe,ye)=>{if(delete this.loading[Q],xe||!ye)return ce.status="done",this.loaded[Q]=ce,F(xe);const _e=ye.rawData,we={};ye.expires&&(we.expires=ye.expires),ye.cacheControl&&(we.cacheControl=ye.cacheControl);const De={};if(le){const $e=le.finish();$e&&(De.resourceTiming=JSON.parse(JSON.stringify($e)))}ce.vectorTile=ye.vectorTile,ce.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,($e,Re)=>{if($e||!Re)return F($e);F(null,l.extend({rawTileData:_e.slice(0)},Re,we,De))}),this.loaded=this.loaded||{},this.loaded[Q]=ce})}reloadTile(L,F){const Q=this.loaded,le=L.uid,ce=this;if(Q&&Q[le]){const xe=Q[le];xe.showCollisionBoxes=L.showCollisionBoxes;const ye=(_e,we)=>{const De=xe.reloadCallback;De&&(delete xe.reloadCallback,xe.parse(xe.vectorTile,ce.layerIndex,this.availableImages,ce.actor,De)),F(_e,we)};xe.status==="parsing"?xe.reloadCallback=ye:xe.status==="done"&&(xe.vectorTile?xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,ye):ye())}}abortTile(L,F){const Q=this.loading,le=L.uid;Q&&Q[le]&&Q[le].abort&&(Q[le].abort(),delete Q[le]),F()}removeTile(L,F){const Q=this.loaded,le=L.uid;Q&&Q[le]&&delete Q[le],F()}}class j{constructor(){this.loaded={}}loadTile(L,F){const{uid:Q,encoding:le,rawImageData:ce}=L,xe=l.isImageBitmap(ce)?this.getImageData(ce):ce,ye=new l.DEMData(Q,xe,le);this.loaded=this.loaded||{},this.loaded[Q]=ye,F(null,ye)}getImageData(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);const F=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:F.width,height:F.height},F.data)}removeTile(L){const F=this.loaded,Q=L.uid;F&&F[Q]&&delete F[Q]}}var N=function ae(L,F){var Q,le=L&&L.type;if(le==="FeatureCollection")for(Q=0;Q<L.features.length;Q++)ae(L.features[Q],F);else if(le==="GeometryCollection")for(Q=0;Q<L.geometries.length;Q++)ae(L.geometries[Q],F);else if(le==="Feature")ae(L.geometry,F);else if(le==="Polygon")$(L.coordinates,F);else if(le==="MultiPolygon")for(Q=0;Q<L.coordinates.length;Q++)$(L.coordinates[Q],F);return L};function $(ae,L){if(ae.length!==0){G(ae[0],L);for(var F=1;F<ae.length;F++)G(ae[F],!L)}}function G(ae,L){for(var F=0,Q=0,le=0,ce=ae.length,xe=ce-1;le<ce;xe=le++){var ye=(ae[le][0]-ae[xe][0])*(ae[xe][1]+ae[le][1]),_e=F+ye;Q+=Math.abs(F)>=Math.abs(ye)?F-_e+ye:ye-_e+F,F=_e}F+Q>=0!=!!L&&ae.reverse()}const J=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class me{constructor(L){this._feature=L,this.extent=l.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))}loadGeometry(){if(this._feature.type===1){const L=[];for(const F of this._feature.geometry)L.push([new l.pointGeometry(F[0],F[1])]);return L}{const L=[];for(const F of this._feature.geometry){const Q=[];for(const le of F)Q.push(new l.pointGeometry(le[0],le[1]));L.push(Q)}return L}}toGeoJSON(L,F,Q){return J.call(this,L,F,Q)}}class H{constructor(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=L.length,this._features=L}feature(L){return new me(this._features[L])}}var se={exports:{}},ne=l.pointGeometry,Te=l.vectorTile.VectorTileFeature,Ce=Pe;function Pe(ae,L){this.options=L||{},this.features=ae,this.length=ae.length}function Ze(ae,L){this.id=typeof ae.id=="number"?ae.id:void 0,this.type=ae.type,this.rawGeometry=ae.type===1?[ae.geometry]:ae.geometry,this.properties=ae.tags,this.extent=L||4096}Pe.prototype.feature=function(ae){return new Ze(this.features[ae],this.options.extent)},Ze.prototype.loadGeometry=function(){var ae=this.rawGeometry;this.geometry=[];for(var L=0;L<ae.length;L++){for(var F=ae[L],Q=[],le=0;le<F.length;le++)Q.push(new ne(F[le][0],F[le][1]));this.geometry.push(Q)}return this.geometry},Ze.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ae=this.geometry,L=1/0,F=-1/0,Q=1/0,le=-1/0,ce=0;ce<ae.length;ce++)for(var xe=ae[ce],ye=0;ye<xe.length;ye++){var _e=xe[ye];L=Math.min(L,_e.x),F=Math.max(F,_e.x),Q=Math.min(Q,_e.y),le=Math.max(le,_e.y)}return[L,Q,F,le]},Ze.prototype.toGeoJSON=Te.prototype.toGeoJSON;var rt=l.pbf,ft=Ce;function dt(ae){var L=new rt;return function(F,Q){for(var le in F.layers)Q.writeMessage(3,Ue,F.layers[le])}(ae,L),L.finish()}function Ue(ae,L){var F;L.writeVarintField(15,ae.version||1),L.writeStringField(1,ae.name||""),L.writeVarintField(5,ae.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(F=0;F<ae.length;F++)Q.feature=ae.feature(F),L.writeMessage(2,yt,Q);var le=Q.keys;for(F=0;F<le.length;F++)L.writeStringField(3,le[F]);var ce=Q.values;for(F=0;F<ce.length;F++)L.writeMessage(4,mt,ce[F])}function yt(ae,L){var F=ae.feature;F.id!==void 0&&L.writeVarintField(1,F.id),L.writeMessage(2,rn,ae),L.writeVarintField(3,F.type),L.writeMessage(4,Ye,F)}function rn(ae,L){var F=ae.feature,Q=ae.keys,le=ae.values,ce=ae.keycache,xe=ae.valuecache;for(var ye in F.properties){var _e=F.properties[ye],we=ce[ye];if(_e!==null){we===void 0&&(Q.push(ye),ce[ye]=we=Q.length-1),L.writeVarint(we);var De=typeof _e;De!=="string"&&De!=="boolean"&&De!=="number"&&(_e=JSON.stringify(_e));var $e=De+":"+_e,Re=xe[$e];Re===void 0&&(le.push(_e),xe[$e]=Re=le.length-1),L.writeVarint(Re)}}}function vn(ae,L){return(L<<3)+(7&ae)}function Sn(ae){return ae<<1^ae>>31}function Ye(ae,L){for(var F=ae.loadGeometry(),Q=ae.type,le=0,ce=0,xe=F.length,ye=0;ye<xe;ye++){var _e=F[ye],we=1;Q===1&&(we=_e.length),L.writeVarint(vn(1,we));for(var De=Q===3?_e.length-1:_e.length,$e=0;$e<De;$e++){$e===1&&Q!==1&&L.writeVarint(vn(2,De-1));var Re=_e[$e].x-le,bt=_e[$e].y-ce;L.writeVarint(Sn(Re)),L.writeVarint(Sn(bt)),le+=Re,ce+=bt}Q===3&&L.writeVarint(vn(7,1))}}function mt(ae,L){var F=typeof ae;F==="string"?L.writeStringField(1,ae):F==="boolean"?L.writeBooleanField(7,ae):F==="number"&&(ae%1!=0?L.writeDoubleField(3,ae):ae<0?L.writeSVarintField(6,ae):L.writeVarintField(5,ae))}se.exports=dt,se.exports.fromVectorTileJs=dt,se.exports.fromGeojsonVt=function(ae,L){L=L||{};var F={};for(var Q in ae)F[Q]=new ft(ae[Q].features,L),F[Q].name=Q,F[Q].version=L.version,F[Q].extent=L.extent;return dt({layers:F})},se.exports.GeoJSONWrapper=ft;var At=se.exports;function xt(ae,L,F,Q,le,ce){if(le-Q<=F)return;const xe=Q+le>>1;wt(ae,L,xe,Q,le,ce%2),xt(ae,L,F,Q,xe-1,ce+1),xt(ae,L,F,xe+1,le,ce+1)}function wt(ae,L,F,Q,le,ce){for(;le>Q;){if(le-Q>600){const we=le-Q+1,De=F-Q+1,$e=Math.log(we),Re=.5*Math.exp(2*$e/3),bt=.5*Math.sqrt($e*Re*(we-Re)/we)*(De-we/2<0?-1:1);wt(ae,L,F,Math.max(Q,Math.floor(F-De*Re/we+bt)),Math.min(le,Math.floor(F+(we-De)*Re/we+bt)),ce)}const xe=L[2*F+ce];let ye=Q,_e=le;for(Xt(ae,L,Q,F),L[2*le+ce]>xe&&Xt(ae,L,Q,le);ye<_e;){for(Xt(ae,L,ye,_e),ye++,_e--;L[2*ye+ce]<xe;)ye++;for(;L[2*_e+ce]>xe;)_e--}L[2*Q+ce]===xe?Xt(ae,L,Q,_e):(_e++,Xt(ae,L,_e,le)),_e<=F&&(Q=_e+1),F<=_e&&(le=_e-1)}}function Xt(ae,L,F,Q){yn(ae,F,Q),yn(L,2*F,2*Q),yn(L,2*F+1,2*Q+1)}function yn(ae,L,F){const Q=ae[L];ae[L]=ae[F],ae[F]=Q}function un(ae,L,F,Q){const le=ae-F,ce=L-Q;return le*le+ce*ce}const xn=ae=>ae[0],Tn=ae=>ae[1];class Gt{constructor(L,F=xn,Q=Tn,le=64,ce=Float64Array){this.nodeSize=le,this.points=L;const xe=L.length<65536?Uint16Array:Uint32Array,ye=this.ids=new xe(L.length),_e=this.coords=new ce(2*L.length);for(let we=0;we<L.length;we++)ye[we]=we,_e[2*we]=F(L[we]),_e[2*we+1]=Q(L[we]);xt(ye,_e,le,0,ye.length-1,0)}range(L,F,Q,le){return function(ce,xe,ye,_e,we,De,$e){const Re=[0,ce.length-1,0],bt=[];let ot,_t;for(;Re.length;){const zt=Re.pop(),vt=Re.pop(),jt=Re.pop();if(vt-jt<=$e){for(let Wt=jt;Wt<=vt;Wt++)ot=xe[2*Wt],_t=xe[2*Wt+1],ot>=ye&&ot<=we&&_t>=_e&&_t<=De&&bt.push(ce[Wt]);continue}const Yt=Math.floor((jt+vt)/2);ot=xe[2*Yt],_t=xe[2*Yt+1],ot>=ye&&ot<=we&&_t>=_e&&_t<=De&&bt.push(ce[Yt]);const qt=(zt+1)%2;(zt===0?ye<=ot:_e<=_t)&&(Re.push(jt),Re.push(Yt-1),Re.push(qt)),(zt===0?we>=ot:De>=_t)&&(Re.push(Yt+1),Re.push(vt),Re.push(qt))}return bt}(this.ids,this.coords,L,F,Q,le,this.nodeSize)}within(L,F,Q){return function(le,ce,xe,ye,_e,we){const De=[0,le.length-1,0],$e=[],Re=_e*_e;for(;De.length;){const bt=De.pop(),ot=De.pop(),_t=De.pop();if(ot-_t<=we){for(let qt=_t;qt<=ot;qt++)un(ce[2*qt],ce[2*qt+1],xe,ye)<=Re&&$e.push(le[qt]);continue}const zt=Math.floor((_t+ot)/2),vt=ce[2*zt],jt=ce[2*zt+1];un(vt,jt,xe,ye)<=Re&&$e.push(le[zt]);const Yt=(bt+1)%2;(bt===0?xe-_e<=vt:ye-_e<=jt)&&(De.push(_t),De.push(zt-1),De.push(Yt)),(bt===0?xe+_e>=vt:ye+_e>=jt)&&(De.push(zt+1),De.push(ot),De.push(Yt))}return $e}(this.ids,this.coords,L,F,Q,this.nodeSize)}}const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ae=>ae},hr=Math.fround||(rr=new Float32Array(1),ae=>(rr[0]=+ae,rr[0]));var rr;class ir{constructor(L){this.options=ue(Object.create(Qt),L),this.trees=new Array(this.options.maxZoom+1)}load(L){const{log:F,minZoom:Q,maxZoom:le,nodeSize:ce}=this.options;F&&console.time("total time");const xe=`prepare ${L.length} points`;F&&console.time(xe),this.points=L;let ye=[];for(let _e=0;_e<L.length;_e++)L[_e].geometry&&ye.push(Vn(L[_e],_e));this.trees[le+1]=new Gt(ye,Ee,qe,ce,Float32Array),F&&console.timeEnd(xe);for(let _e=le;_e>=Q;_e--){const we=+Date.now();ye=this._cluster(ye,_e),this.trees[_e]=new Gt(ye,Ee,qe,ce,Float32Array),F&&console.log("z%d: %d clusters in %dms",_e,ye.length,+Date.now()-we)}return F&&console.timeEnd("total time"),this}getClusters(L,F){let Q=((L[0]+180)%360+360)%360-180;const le=Math.max(-90,Math.min(90,L[1]));let ce=L[2]===180?180:((L[2]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)Q=-180,ce=180;else if(Q>ce){const De=this.getClusters([Q,le,180,xe],F),$e=this.getClusters([-180,le,ce,xe],F);return De.concat($e)}const ye=this.trees[this._limitZoom(F)],_e=ye.range(ie(Q),O(xe),ie(ce),O(le)),we=[];for(const De of _e){const $e=ye.points[De];we.push($e.numPoints?Hn($e):this.points[$e.index])}return we}getChildren(L){const F=this._getOriginId(L),Q=this._getOriginZoom(L),le="No cluster with the specified id.",ce=this.trees[Q];if(!ce)throw new Error(le);const xe=ce.points[F];if(!xe)throw new Error(le);const ye=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),_e=ce.within(xe.x,xe.y,ye),we=[];for(const De of _e){const $e=ce.points[De];$e.parentId===L&&we.push($e.numPoints?Hn($e):this.points[$e.index])}if(we.length===0)throw new Error(le);return we}getLeaves(L,F,Q){const le=[];return this._appendLeaves(le,L,F=F||10,Q=Q||0,0),le}getTile(L,F,Q){const le=this.trees[this._limitZoom(L)],ce=Math.pow(2,L),{extent:xe,radius:ye}=this.options,_e=ye/xe,we=(Q-_e)/ce,De=(Q+1+_e)/ce,$e={features:[]};return this._addTileFeatures(le.range((F-_e)/ce,we,(F+1+_e)/ce,De),le.points,F,Q,ce,$e),F===0&&this._addTileFeatures(le.range(1-_e/ce,we,1,De),le.points,ce,Q,ce,$e),F===ce-1&&this._addTileFeatures(le.range(0,we,_e/ce,De),le.points,-1,Q,ce,$e),$e.features.length?$e:null}getClusterExpansionZoom(L){let F=this._getOriginZoom(L)-1;for(;F<=this.options.maxZoom;){const Q=this.getChildren(L);if(F++,Q.length!==1)break;L=Q[0].properties.cluster_id}return F}_appendLeaves(L,F,Q,le,ce){const xe=this.getChildren(F);for(const ye of xe){const _e=ye.properties;if(_e&&_e.cluster?ce+_e.point_count<=le?ce+=_e.point_count:ce=this._appendLeaves(L,_e.cluster_id,Q,le,ce):ce<le?ce++:L.push(ye),L.length===Q)break}return ce}_addTileFeatures(L,F,Q,le,ce,xe){for(const ye of L){const _e=F[ye],we=_e.numPoints;let De,$e,Re;if(we)De=Br(_e),$e=_e.x,Re=_e.y;else{const _t=this.points[_e.index];De=_t.properties,$e=ie(_t.geometry.coordinates[0]),Re=O(_t.geometry.coordinates[1])}const bt={type:1,geometry:[[Math.round(this.options.extent*($e*ce-Q)),Math.round(this.options.extent*(Re*ce-le))]],tags:De};let ot;we?ot=_e.id:this.options.generateId?ot=_e.index:this.points[_e.index].id&&(ot=this.points[_e.index].id),ot!==void 0&&(bt.id=ot),xe.features.push(bt)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))}_cluster(L,F){const Q=[],{radius:le,extent:ce,reduce:xe,minPoints:ye}=this.options,_e=le/(ce*Math.pow(2,F));for(let we=0;we<L.length;we++){const De=L[we];if(De.zoom<=F)continue;De.zoom=F;const $e=this.trees[F+1],Re=$e.within(De.x,De.y,_e),bt=De.numPoints||1;let ot=bt;for(const _t of Re){const zt=$e.points[_t];zt.zoom>F&&(ot+=zt.numPoints||1)}if(ot>bt&&ot>=ye){let _t=De.x*bt,zt=De.y*bt,vt=xe&&bt>1?this._map(De,!0):null;const jt=(we<<5)+(F+1)+this.points.length;for(const Yt of Re){const qt=$e.points[Yt];if(qt.zoom<=F)continue;qt.zoom=F;const Wt=qt.numPoints||1;_t+=qt.x*Wt,zt+=qt.y*Wt,qt.parentId=jt,xe&&(vt||(vt=this._map(De,!0)),xe(vt,this._map(qt)))}De.parentId=jt,Q.push(Mr(_t/ot,zt/ot,jt,ot,vt))}else if(Q.push(De),ot>1)for(const _t of Re){const zt=$e.points[_t];zt.zoom<=F||(zt.zoom=F,Q.push(zt))}}return Q}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,F){if(L.numPoints)return F?ue({},L.properties):L.properties;const Q=this.points[L.index].properties,le=this.options.map(Q);return F&&le===Q?ue({},le):le}}function Mr(ae,L,F,Q,le){return{x:hr(ae),y:hr(L),zoom:1/0,id:F,parentId:-1,numPoints:Q,properties:le}}function Vn(ae,L){const[F,Q]=ae.geometry.coordinates;return{x:hr(ie(F)),y:hr(O(Q)),zoom:1/0,index:L,parentId:-1}}function Hn(ae){return{type:"Feature",id:ae.id,properties:Br(ae),geometry:{type:"Point",coordinates:[(L=ae.x,360*(L-.5)),D(ae.y)]}};var L}function Br(ae){const L=ae.numPoints,F=L>=1e4?`${Math.round(L/1e3)}k`:L>=1e3?Math.round(L/100)/10+"k":L;return ue(ue({},ae.properties),{cluster:!0,cluster_id:ae.id,point_count:L,point_count_abbreviated:F})}function ie(ae){return ae/360+.5}function O(ae){const L=Math.sin(ae*Math.PI/180),F=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return F<0?0:F>1?1:F}function D(ae){const L=(180-360*ae)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function ue(ae,L){for(const F in L)ae[F]=L[F];return ae}function Ee(ae){return ae.x}function qe(ae){return ae.y}function Xe(ae,L,F,Q){for(var le,ce=Q,xe=F-L>>1,ye=F-L,_e=ae[L],we=ae[L+1],De=ae[F],$e=ae[F+1],Re=L+3;Re<F;Re+=3){var bt=Dt(ae[Re],ae[Re+1],_e,we,De,$e);if(bt>ce)le=Re,ce=bt;else if(bt===ce){var ot=Math.abs(Re-xe);ot<ye&&(le=Re,ye=ot)}}ce>Q&&(le-L>3&&Xe(ae,L,le,Q),ae[le+2]=ce,F-le>3&&Xe(ae,le,F,Q))}function Dt(ae,L,F,Q,le,ce){var xe=le-F,ye=ce-Q;if(xe!==0||ye!==0){var _e=((ae-F)*xe+(L-Q)*ye)/(xe*xe+ye*ye);_e>1?(F=le,Q=ce):_e>0&&(F+=xe*_e,Q+=ye*_e)}return(xe=ae-F)*xe+(ye=L-Q)*ye}function ke(ae,L,F,Q){var le={id:ae===void 0?null:ae,type:L,geometry:F,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ce){var xe=ce.geometry,ye=ce.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Ge(ce,xe);else if(ye==="Polygon"||ye==="MultiLineString")for(var _e=0;_e<xe.length;_e++)Ge(ce,xe[_e]);else if(ye==="MultiPolygon")for(_e=0;_e<xe.length;_e++)for(var we=0;we<xe[_e].length;we++)Ge(ce,xe[_e][we])}(le),le}function Ge(ae,L){for(var F=0;F<L.length;F+=3)ae.minX=Math.min(ae.minX,L[F]),ae.minY=Math.min(ae.minY,L[F+1]),ae.maxX=Math.max(ae.maxX,L[F]),ae.maxY=Math.max(ae.maxY,L[F+1])}function wn(ae,L,F,Q){if(L.geometry){var le=L.geometry.coordinates,ce=L.geometry.type,xe=Math.pow(F.tolerance/((1<<F.maxZoom)*F.extent),2),ye=[],_e=L.id;if(F.promoteId?_e=L.properties[F.promoteId]:F.generateId&&(_e=Q||0),ce==="Point")en(le,ye);else if(ce==="MultiPoint")for(var we=0;we<le.length;we++)en(le[we],ye);else if(ce==="LineString")ln(le,ye,xe,!1);else if(ce==="MultiLineString"){if(F.lineMetrics){for(we=0;we<le.length;we++)ln(le[we],ye=[],xe,!1),ae.push(ke(_e,"LineString",ye,L.properties));return}Mn(le,ye,xe,!1)}else if(ce==="Polygon")Mn(le,ye,xe,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(we=0;we<L.geometry.geometries.length;we++)wn(ae,{id:_e,geometry:L.geometry.geometries[we],properties:L.properties},F,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<le.length;we++){var De=[];Mn(le[we],De,xe,!0),ye.push(De)}}ae.push(ke(_e,ce,ye,L.properties))}}function en(ae,L){L.push(Ln(ae[0])),L.push(Wr(ae[1])),L.push(0)}function ln(ae,L,F,Q){for(var le,ce,xe=0,ye=0;ye<ae.length;ye++){var _e=Ln(ae[ye][0]),we=Wr(ae[ye][1]);L.push(_e),L.push(we),L.push(0),ye>0&&(xe+=Q?(le*we-_e*ce)/2:Math.sqrt(Math.pow(_e-le,2)+Math.pow(we-ce,2))),le=_e,ce=we}var De=L.length-3;L[2]=1,Xe(L,0,De,F),L[De+2]=1,L.size=Math.abs(xe),L.start=0,L.end=L.size}function Mn(ae,L,F,Q){for(var le=0;le<ae.length;le++){var ce=[];ln(ae[le],ce,F,Q),L.push(ce)}}function Ln(ae){return ae/360+.5}function Wr(ae){var L=Math.sin(ae*Math.PI/180),F=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return F<0?0:F>1?1:F}function Yn(ae,L,F,Q,le,ce,xe,ye){if(Q/=L,ce>=(F/=L)&&xe<Q)return ae;if(xe<F||ce>=Q)return null;for(var _e=[],we=0;we<ae.length;we++){var De=ae[we],$e=De.geometry,Re=De.type,bt=le===0?De.minX:De.minY,ot=le===0?De.maxX:De.maxY;if(bt>=F&&ot<Q)_e.push(De);else if(!(ot<F||bt>=Q)){var _t=[];if(Re==="Point"||Re==="MultiPoint")et($e,_t,F,Q,le);else if(Re==="LineString")Zt($e,_t,F,Q,le,!1,ye.lineMetrics);else if(Re==="MultiLineString")Sr($e,_t,F,Q,le,!1);else if(Re==="Polygon")Sr($e,_t,F,Q,le,!0);else if(Re==="MultiPolygon")for(var zt=0;zt<$e.length;zt++){var vt=[];Sr($e[zt],vt,F,Q,le,!0),vt.length&&_t.push(vt)}if(_t.length){if(ye.lineMetrics&&Re==="LineString"){for(zt=0;zt<_t.length;zt++)_e.push(ke(De.id,Re,_t[zt],De.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(_t.length===1?(Re="LineString",_t=_t[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=_t.length===3?"Point":"MultiPoint"),_e.push(ke(De.id,Re,_t,De.tags))}}}return _e.length?_e:null}function et(ae,L,F,Q,le){for(var ce=0;ce<ae.length;ce+=3){var xe=ae[ce+le];xe>=F&&xe<=Q&&(L.push(ae[ce]),L.push(ae[ce+1]),L.push(ae[ce+2]))}}function Zt(ae,L,F,Q,le,ce,xe){for(var ye,_e,we=Nt(ae),De=le===0?Ut:or,$e=ae.start,Re=0;Re<ae.length-3;Re+=3){var bt=ae[Re],ot=ae[Re+1],_t=ae[Re+2],zt=ae[Re+3],vt=ae[Re+4],jt=le===0?bt:ot,Yt=le===0?zt:vt,qt=!1;xe&&(ye=Math.sqrt(Math.pow(bt-zt,2)+Math.pow(ot-vt,2))),jt<F?Yt>F&&(_e=De(we,bt,ot,zt,vt,F),xe&&(we.start=$e+ye*_e)):jt>Q?Yt<Q&&(_e=De(we,bt,ot,zt,vt,Q),xe&&(we.start=$e+ye*_e)):Xr(we,bt,ot,_t),Yt<F&&jt>=F&&(_e=De(we,bt,ot,zt,vt,F),qt=!0),Yt>Q&&jt<=Q&&(_e=De(we,bt,ot,zt,vt,Q),qt=!0),!ce&&qt&&(xe&&(we.end=$e+ye*_e),L.push(we),we=Nt(ae)),xe&&($e+=ye)}var Wt=ae.length-3;bt=ae[Wt],ot=ae[Wt+1],_t=ae[Wt+2],(jt=le===0?bt:ot)>=F&&jt<=Q&&Xr(we,bt,ot,_t),Wt=we.length-3,ce&&Wt>=3&&(we[Wt]!==we[0]||we[Wt+1]!==we[1])&&Xr(we,we[0],we[1],we[2]),we.length&&L.push(we)}function Nt(ae){var L=[];return L.size=ae.size,L.start=ae.start,L.end=ae.end,L}function Sr(ae,L,F,Q,le,ce){for(var xe=0;xe<ae.length;xe++)Zt(ae[xe],L,F,Q,le,ce,!1)}function Xr(ae,L,F,Q){ae.push(L),ae.push(F),ae.push(Q)}function Ut(ae,L,F,Q,le,ce){var xe=(ce-L)/(Q-L);return ae.push(ce),ae.push(F+(le-F)*xe),ae.push(1),xe}function or(ae,L,F,Q,le,ce){var xe=(ce-F)/(le-F);return ae.push(L+(Q-L)*xe),ae.push(ce),ae.push(1),xe}function ki(ae,L){for(var F=[],Q=0;Q<ae.length;Q++){var le,ce=ae[Q],xe=ce.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")le=fr(ce.geometry,L);else if(xe==="MultiLineString"||xe==="Polygon"){le=[];for(var ye=0;ye<ce.geometry.length;ye++)le.push(fr(ce.geometry[ye],L))}else if(xe==="MultiPolygon")for(le=[],ye=0;ye<ce.geometry.length;ye++){for(var _e=[],we=0;we<ce.geometry[ye].length;we++)_e.push(fr(ce.geometry[ye][we],L));le.push(_e)}F.push(ke(ce.id,xe,le,ce.tags))}return F}function fr(ae,L){var F=[];F.size=ae.size,ae.start!==void 0&&(F.start=ae.start,F.end=ae.end);for(var Q=0;Q<ae.length;Q+=3)F.push(ae[Q]+L,ae[Q+1],ae[Q+2]);return F}function Cr(ae,L){if(ae.transformed)return ae;var F,Q,le,ce=1<<ae.z,xe=ae.x,ye=ae.y;for(F=0;F<ae.features.length;F++){var _e=ae.features[F],we=_e.geometry,De=_e.type;if(_e.geometry=[],De===1)for(Q=0;Q<we.length;Q+=2)_e.geometry.push(cn(we[Q],we[Q+1],L,ce,xe,ye));else for(Q=0;Q<we.length;Q++){var $e=[];for(le=0;le<we[Q].length;le+=2)$e.push(cn(we[Q][le],we[Q][le+1],L,ce,xe,ye));_e.geometry.push($e)}}return ae.transformed=!0,ae}function cn(ae,L,F,Q,le,ce){return[Math.round(F*(ae*Q-le)),Math.round(F*(L*Q-ce))]}function Qo(ae,L,F,Q,le){for(var ce=L===le.maxZoom?0:le.tolerance/((1<<L)*le.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:F,y:Q,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ye=0;ye<ae.length;ye++){xe.numFeatures++,lr(xe,ae[ye],ce,le);var _e=ae[ye].minX,we=ae[ye].minY,De=ae[ye].maxX,$e=ae[ye].maxY;_e<xe.minX&&(xe.minX=_e),we<xe.minY&&(xe.minY=we),De>xe.maxX&&(xe.maxX=De),$e>xe.maxY&&(xe.maxY=$e)}return xe}function lr(ae,L,F,Q){var le=L.geometry,ce=L.type,xe=[];if(ce==="Point"||ce==="MultiPoint")for(var ye=0;ye<le.length;ye+=3)xe.push(le[ye]),xe.push(le[ye+1]),ae.numPoints++,ae.numSimplified++;else if(ce==="LineString")Vi(xe,le,ae,F,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(ye=0;ye<le.length;ye++)Vi(xe,le[ye],ae,F,ce==="Polygon",ye===0);else if(ce==="MultiPolygon")for(var _e=0;_e<le.length;_e++){var we=le[_e];for(ye=0;ye<we.length;ye++)Vi(xe,we[ye],ae,F,!0,ye===0)}if(xe.length){var De=L.tags||null;if(ce==="LineString"&&Q.lineMetrics){for(var $e in De={},L.tags)De[$e]=L.tags[$e];De.mapbox_clip_start=le.start/le.size,De.mapbox_clip_end=le.end/le.size}var Re={geometry:xe,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:De};L.id!==null&&(Re.id=L.id),ae.features.push(Re)}}function Vi(ae,L,F,Q,le,ce){var xe=Q*Q;if(Q>0&&L.size<(le?xe:Q))F.numPoints+=L.length/3;else{for(var ye=[],_e=0;_e<L.length;_e+=3)(Q===0||L[_e+2]>xe)&&(F.numSimplified++,ye.push(L[_e]),ye.push(L[_e+1])),F.numPoints++;le&&function(we,De){for(var $e=0,Re=0,bt=we.length,ot=bt-2;Re<bt;ot=Re,Re+=2)$e+=(we[Re]-we[ot])*(we[Re+1]+we[ot+1]);if($e>0===De)for(Re=0,bt=we.length;Re<bt/2;Re+=2){var _t=we[Re],zt=we[Re+1];we[Re]=we[bt-2-Re],we[Re+1]=we[bt-1-Re],we[bt-2-Re]=_t,we[bt-1-Re]=zt}}(ye,ce),ae.push(ye)}}function $n(ae,L){var F=(L=this.options=function(le,ce){for(var xe in ce)le[xe]=ce[xe];return le}(Object.create(this.options),L)).debug;if(F&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var Q=function(le,ce){var xe=[];if(le.type==="FeatureCollection")for(var ye=0;ye<le.features.length;ye++)wn(xe,le.features[ye],ce,ye);else wn(xe,le.type==="Feature"?le:{geometry:le},ce);return xe}(ae,L);this.tiles={},this.tileCoords=[],F&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Q=function(le,ce){var xe=ce.buffer/ce.extent,ye=le,_e=Yn(le,1,-1-xe,xe,0,-1,2,ce),we=Yn(le,1,1-xe,2+xe,0,-1,2,ce);return(_e||we)&&(ye=Yn(le,1,-xe,1+xe,0,-1,2,ce)||[],_e&&(ye=ki(_e,1).concat(ye)),we&&(ye=ye.concat(ki(we,-1)))),ye}(Q,L),Q.length&&this.splitTile(Q,0,0,0),F&&(Q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ii(ae,L,F){return 32*((1<<ae)*F+L)+ae}function $i(ae,L){const F=ae.tileID.canonical;if(!this._geoJSONIndex)return L(null,null);const Q=this._geoJSONIndex.getTile(F.z,F.x,F.y);if(!Q)return L(null,null);const le=new H(Q.features);let ce=At(le);ce.byteOffset===0&&ce.byteLength===ce.buffer.byteLength||(ce=new Uint8Array(ce)),L(null,{vectorTile:le,rawData:ce.buffer})}$n.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$n.prototype.splitTile=function(ae,L,F,Q,le,ce,xe){for(var ye=[ae,L,F,Q],_e=this.options,we=_e.debug;ye.length;){Q=ye.pop(),F=ye.pop(),L=ye.pop(),ae=ye.pop();var De=1<<L,$e=Ii(L,F,Q),Re=this.tiles[$e];if(!Re&&(we>1&&console.time("creation"),Re=this.tiles[$e]=Qo(ae,L,F,Q,_e),this.tileCoords.push({z:L,x:F,y:Q}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,F,Q,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));var bt="z"+L;this.stats[bt]=(this.stats[bt]||0)+1,this.total++}if(Re.source=ae,le){if(L===_e.maxZoom||L===le)continue;var ot=1<<le-L;if(F!==Math.floor(ce/ot)||Q!==Math.floor(xe/ot))continue}else if(L===_e.indexMaxZoom||Re.numPoints<=_e.indexMaxPoints)continue;if(Re.source=null,ae.length!==0){we>1&&console.time("clipping");var _t,zt,vt,jt,Yt,qt,Wt=.5*_e.buffer/_e.extent,zn=.5-Wt,jn=.5+Wt,kn=1+Wt;_t=zt=vt=jt=null,Yt=Yn(ae,De,F-Wt,F+jn,0,Re.minX,Re.maxX,_e),qt=Yn(ae,De,F+zn,F+kn,0,Re.minX,Re.maxX,_e),ae=null,Yt&&(_t=Yn(Yt,De,Q-Wt,Q+jn,1,Re.minY,Re.maxY,_e),zt=Yn(Yt,De,Q+zn,Q+kn,1,Re.minY,Re.maxY,_e),Yt=null),qt&&(vt=Yn(qt,De,Q-Wt,Q+jn,1,Re.minY,Re.maxY,_e),jt=Yn(qt,De,Q+zn,Q+kn,1,Re.minY,Re.maxY,_e),qt=null),we>1&&console.timeEnd("clipping"),ye.push(_t||[],L+1,2*F,2*Q),ye.push(zt||[],L+1,2*F,2*Q+1),ye.push(vt||[],L+1,2*F+1,2*Q),ye.push(jt||[],L+1,2*F+1,2*Q+1)}}},$n.prototype.getTile=function(ae,L,F){var Q=this.options,le=Q.extent,ce=Q.debug;if(ae<0||ae>24)return null;var xe=1<<ae,ye=Ii(ae,L=(L%xe+xe)%xe,F);if(this.tiles[ye])return Cr(this.tiles[ye],le);ce>1&&console.log("drilling down to z%d-%d-%d",ae,L,F);for(var _e,we=ae,De=L,$e=F;!_e&&we>0;)we--,De=Math.floor(De/2),$e=Math.floor($e/2),_e=this.tiles[Ii(we,De,$e)];return _e&&_e.source?(ce>1&&console.log("found parent tile z%d-%d-%d",we,De,$e),ce>1&&console.time("drilling down"),this.splitTile(_e.source,we,De,$e,ae,L,F),ce>1&&console.timeEnd("drilling down"),this.tiles[ye]?Cr(this.tiles[ye],le):null):null};class ji extends Z{constructor(L,F,Q,le){super(L,F,Q,$i),le&&(this.loadGeoJSON=le)}loadData(L,F){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=F,this._pendingLoadDataParams=L,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const L=this._pendingCallback,F=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const Q=!!(F&&F.request&&F.request.collectResourceTiming)&&new l.RequestPerformance(F.request);this.loadGeoJSON(F,(le,ce)=>{if(le||!ce)return L(le);if(typeof ce!="object")return L(new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`));{N(ce,!0);try{if(F.filter){const ye=l.createExpression(F.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(we=>`${we.key}: ${we.message}`).join(", "));const _e=ce.features.filter(we=>ye.value.evaluate({zoom:0},we));ce={type:"FeatureCollection",features:_e}}this._geoJSONIndex=F.cluster?new ir(function({superclusterOptions:ye,clusterProperties:_e}){if(!_e||!ye)return ye;const we={},De={},$e={accumulated:null,zoom:0},Re={properties:null},bt=Object.keys(_e);for(const ot of bt){const[_t,zt]=_e[ot],vt=l.createExpression(zt),jt=l.createExpression(typeof _t=="string"?[_t,["accumulated"],["get",ot]]:_t);we[ot]=vt.value,De[ot]=jt.value}return ye.map=ot=>{Re.properties=ot;const _t={};for(const zt of bt)_t[zt]=we[zt].evaluate($e,Re);return _t},ye.reduce=(ot,_t)=>{Re.properties=_t;for(const zt of bt)$e.accumulated=ot[zt],ot[zt]=De[zt].evaluate($e,Re)},ye}(F)).load(ce.features):function(ye,_e){return new $n(ye,_e)}(ce,F.geojsonVtOptions)}catch(ye){return L(ye)}this.loaded={};const xe={};if(Q){const ye=Q.finish();ye&&(xe.resourceTiming={},xe.resourceTiming[F.source]=JSON.parse(JSON.stringify(ye)))}L(null,xe)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(L,F){const Q=this.loaded;return Q&&Q[L.uid]?super.reloadTile(L,F):this.loadTile(L,F)}loadGeoJSON(L,F){if(L.request)l.getJSON(L.request,F);else{if(typeof L.data!="string")return F(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));try{return F(null,JSON.parse(L.data))}catch{return F(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`))}}}removeSource(L,F){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),F()}getClusterExpansionZoom(L,F){try{F(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(Q){F(Q)}}getClusterChildren(L,F){try{F(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(Q){F(Q)}}getClusterLeaves(L,F){try{F(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(Q){F(Q)}}}class Mo{constructor(L){this.self=L,this.actor=new l.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Z,geojson:ji},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(F,Q)=>{if(this.workerSourceTypes[F])throw new Error(`Worker source with name "${F}" already registered.`);this.workerSourceTypes[F]=Q},this.self.registerRTLTextPlugin=F=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=F.applyArabicShaping,l.plugin.processBidirectionalText=F.processBidirectionalText,l.plugin.processStyledBidirectionalText=F.processStyledBidirectionalText}}setReferrer(L,F){this.referrer=F}setImages(L,F,Q){this.availableImages[L]=F;for(const le in this.workerSources[L]){const ce=this.workerSources[L][le];for(const xe in ce)ce[xe].availableImages=F}Q()}setLayers(L,F,Q){this.getLayerIndex(L).replace(F),Q()}updateLayers(L,F,Q){this.getLayerIndex(L).update(F.layers,F.removedIds),Q()}loadTile(L,F,Q){this.getWorkerSource(L,F.type,F.source).loadTile(F,Q)}loadDEMTile(L,F,Q){this.getDEMWorkerSource(L,F.source).loadTile(F,Q)}reloadTile(L,F,Q){this.getWorkerSource(L,F.type,F.source).reloadTile(F,Q)}abortTile(L,F,Q){this.getWorkerSource(L,F.type,F.source).abortTile(F,Q)}removeTile(L,F,Q){this.getWorkerSource(L,F.type,F.source).removeTile(F,Q)}removeDEMTile(L,F){this.getDEMWorkerSource(L,F.source).removeTile(F)}removeSource(L,F,Q){if(!this.workerSources[L]||!this.workerSources[L][F.type]||!this.workerSources[L][F.type][F.source])return;const le=this.workerSources[L][F.type][F.source];delete this.workerSources[L][F.type][F.source],le.removeSource!==void 0?le.removeSource(F,Q):Q()}loadWorkerSource(L,F,Q){try{this.self.importScripts(F.url),Q()}catch(le){Q(le.toString())}}syncRTLPluginState(L,F,Q){try{l.plugin.setState(F);const le=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&le!=null){this.self.importScripts(le);const ce=l.plugin.isParsed();Q(ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${le}`),ce)}}catch(le){Q(le.toString())}}getAvailableImages(L){let F=this.availableImages[L];return F||(F=[]),F}getLayerIndex(L){let F=this.layerIndexes[L];return F||(F=this.layerIndexes[L]=new z),F}getWorkerSource(L,F,Q){if(this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][F]||(this.workerSources[L][F]={}),!this.workerSources[L][F][Q]){const le={send:(ce,xe,ye)=>{this.actor.send(ce,xe,ye,L)}};this.workerSources[L][F][Q]=new this.workerSourceTypes[F](le,this.getLayerIndex(L),this.getAvailableImages(L))}return this.workerSources[L][F][Q]}getDEMWorkerSource(L,F){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][F]||(this.demWorkerSources[L][F]=new j),this.demWorkerSources[L][F]}enforceCacheSizeLimit(L,F){l.enforceCacheSizeLimit(F)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Mo(self)),Mo}),_(["./shared"],function(l){var S=A;function A(p){return!function(n){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,m,v=new Blob([""],{type:"text/javascript"}),b=URL.createObjectURL(v);try{m=new Worker(b),h=!0}catch{h=!1}return m&&m.terminate(),URL.revokeObjectURL(b),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var m=h.getContext("2d");if(!m)return!1;var v=m.getImageData(0,0,1,1);return v&&v.width===h.width}()?(z[s=n&&n.failIfMajorPerformanceCaveat]===void 0&&(z[s]=function(h){var m,v=function(b){var T=document.createElement("canvas"),k=Object.create(A.webGLContextAttributes);return k.failIfMajorPerformanceCaveat=b,T.getContext("webgl",k)||T.getContext("experimental-webgl",k)}(h);if(!v)return!1;try{m=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!m||v.isContextLost())&&(v.shaderSource(m,"void main() {}"),v.compileShader(m),v.getShaderParameter(m,v.COMPILE_STATUS)===!0)}(s)),z[s]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var s}(p)}var z={};function C(p,n){if(Array.isArray(p)){if(!Array.isArray(n)||p.length!==n.length)return!1;for(let s=0;s<p.length;s++)if(!C(p[s],n[s]))return!1;return!0}if(typeof p=="object"&&p!==null&&n!==null){if(typeof n!="object"||Object.keys(p).length!==Object.keys(n).length)return!1;for(const s in p)if(!C(p[s],n[s]))return!1;return!0}return p===n}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class P{static testProp(n){if(!P.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in P.docStyle)return n[s];return n[0]}static create(n,s,h){const m=window.document.createElement(n);return s!==void 0&&(m.className=s),h&&h.appendChild(m),m}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(n,s){n.style[P.transformProp]=s}static addEventListener(n,s,h,m={}){n.addEventListener(s,h,"passive"in m?m:m.capture)}static removeEventListener(n,s,h,m={}){n.removeEventListener(s,h,"passive"in m?m:m.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static mousePos(n,s){const h=n.getBoundingClientRect();return new l.pointGeometry(s.clientX-h.left-n.clientLeft,s.clientY-h.top-n.clientTop)}static touchPos(n,s){const h=n.getBoundingClientRect(),m=[];for(let v=0;v<s.length;v++)m.push(new l.pointGeometry(s[v].clientX-h.left-n.clientLeft,s[v].clientY-h.top-n.clientTop));return m}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}P.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);class q{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}normalizeSpriteURL(n,s,h){const m=function(v){const b=v.match(te);if(!b)throw new Error(`Unable to parse URL "${v}"`);return{protocol:b[1],authority:b[2],path:b[3]||"/",params:b[4]?b[4].split("&"):[]}}(n);return m.path+=`${s}${h}`,function(v){const b=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${b}`}(m)}setTransformRequest(n){this._transformRequestFn=n}}const te=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Z(p){var n=new l.ARRAY_TYPE(3);return n[0]=p[0],n[1]=p[1],n[2]=p[2],n}function j(p,n,s){var h=new l.ARRAY_TYPE(3);return h[0]=p,h[1]=n,h[2]=s,h}var N,$=function(p,n,s){return p[0]=n[0]-s[0],p[1]=n[1]-s[1],p[2]=n[2]-s[2],p};N=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0);var G=function(p){var n=p[0],s=p[1];return n*n+s*s};(function(){var p=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class J{constructor(n,s,h,m){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(s,m)}update(n,s,h){const{width:m,height:v}=n,b=!(this.size&&this.size[0]===m&&this.size[1]===v||h),{context:T}=this,{gl:k}=T;if(this.useMipmap=Boolean(s&&s.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[m,v],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.isImageBitmap(n)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,n):k.texImage2D(k.TEXTURE_2D,0,this.format,m,v,0,this.format,k.UNSIGNED_BYTE,n.data);else{const{x:R,y:V}=h||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.isImageBitmap(n)?k.texSubImage2D(k.TEXTURE_2D,0,R,V,k.RGBA,k.UNSIGNED_BYTE,n):k.texSubImage2D(k.TEXTURE_2D,0,R,V,m,v,k.RGBA,k.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(n,s,h){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),h!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=v.LINEAR),n!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,n),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,h||n),this.filter=n),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function me(p){const{userImage:n}=p;return!!(n&&n.render&&n.render())&&(p.data.replace(new Uint8Array(n.data.buffer)),!0)}class H extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,callback:h}of this.requestors)this._notify(s,h);this.requestors=[]}}getImage(n){return this.images[n]}addImage(n,s){this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let h=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),h=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),h=!1),this._validateContent(s.content,s)||(this.fire(new l.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),h=!1),h}_validateStretch(n,s){if(!n)return!0;let h=0;for(const m of n){if(m[0]<h||m[1]<m[0]||s<m[1])return!1;h=m[1]}return!0}_validateContent(n,s){return!(n&&(n.length!==4||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,s){s.version=this.images[n].version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,s){let h=!0;if(!this.isLoaded())for(const m of n)this.images[m]||(h=!1);this.isLoaded()||h?this._notify(n,s):this.requestors.push({ids:n,callback:s})}_notify(n,s){const h={};for(const m of n){this.images[m]||this.fire(new l.Event("styleimagemissing",{id:m}));const v=this.images[m];v?h[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:Boolean(v.userImage&&v.userImage.render)}:l.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}s(null,h)}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],h=this.getImage(n);if(!h)return null;if(s&&s.position.version===h.version)return s.position;if(s)s.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},v=new l.ImagePosition(m,h);this.patterns[n]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new J(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const v in this.patterns)n.push(this.patterns[v].bin);const{w:s,h}=l.potpack(n),m=this.atlasImage;m.resize({width:s||1,height:h||1});for(const v in this.patterns){const{bin:b}=this.patterns[v],T=b.x+1,k=b.y+1,R=this.images[v].data,V=R.width,X=R.height;l.RGBAImage.copy(R,m,{x:0,y:0},{x:T,y:k},{width:V,height:X}),l.RGBAImage.copy(R,m,{x:0,y:X-1},{x:T,y:k-1},{width:V,height:1}),l.RGBAImage.copy(R,m,{x:0,y:0},{x:T,y:k+X},{width:V,height:1}),l.RGBAImage.copy(R,m,{x:V-1,y:0},{x:T-1,y:k},{width:1,height:X}),l.RGBAImage.copy(R,m,{x:0,y:0},{x:T+V,y:k},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const h=this.images[s];me(h)&&this.updateImage(s,h)}}}const se=1e20;function ne(p,n,s,h,m,v,b,T,k){for(let R=n;R<n+h;R++)Te(p,s*v+R,v,m,b,T,k);for(let R=s;R<s+m;R++)Te(p,R*v+n,1,h,b,T,k)}function Te(p,n,s,h,m,v,b){v[0]=0,b[0]=-se,b[1]=se,m[0]=p[n];for(let T=1,k=0,R=0;T<h;T++){m[T]=p[n+T*s];const V=T*T;do{const X=v[k];R=(m[T]-m[X]+V-X*X)/(T-X)/2}while(R<=b[k]&&--k>-1);k++,v[k]=T,b[k]=R,b[k+1]=se}for(let T=0,k=0;T<h;T++){for(;b[k+1]<T;)k++;const R=v[k],V=T-R;p[n+T*s]=m[R]+V*V}}class Ce{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n,s){const h=[];for(const m in n)for(const v of n[m])h.push({stack:m,id:v});l.asyncAll(h,({stack:m,id:v},b)=>{let T=this.entries[m];T||(T=this.entries[m]={glyphs:{},requests:{},ranges:{}});let k=T.glyphs[v];if(k!==void 0)return void b(null,{stack:m,id:v,glyph:k});if(k=this._tinySDF(T,m,v),k)return T.glyphs[v]=k,void b(null,{stack:m,id:v,glyph:k});const R=Math.floor(v/256);if(256*R>65535)return void b(new Error("glyphs > 65535 not supported"));if(T.ranges[R])return void b(null,{stack:m,id:v,glyph:k});let V=T.requests[R];V||(V=T.requests[R]=[],Ce.loadGlyphRange(m,R,this.url,this.requestManager,(X,re)=>{if(re){for(const he in re)this._doesCharSupportLocalGlyph(+he)||(T.glyphs[+he]=re[+he]);T.ranges[R]=!0}for(const he of V)he(X,re);delete T.requests[R]})),V.push((X,re)=>{X?b(X):re&&b(null,{stack:m,id:v,glyph:re[v]||null})})},(m,v)=>{if(m)s(m);else if(v){const b={};for(const{stack:T,id:k,glyph:R}of v)(b[T]||(b[T]={}))[k]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};s(null,b)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](n)||l.unicodeBlockLookup["Hangul Syllables"](n)||l.unicodeBlockLookup.Hiragana(n)||l.unicodeBlockLookup.Katakana(n))}_tinySDF(n,s,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let v=n.tinySDF;if(!v){let T="400";/bold/i.test(s)?T="900":/medium/i.test(s)?T="500":/light/i.test(s)&&(T="200"),v=n.tinySDF=new Ce.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:T})}const b=v.draw(String.fromCharCode(h));return{id:h,bitmap:new l.AlphaImage({width:b.width||30,height:b.height||30},b.data),metrics:{width:b.glyphWidth||24,height:b.glyphHeight||24,left:b.glyphLeft||0,top:b.glyphTop||-8,advance:b.glyphAdvance||24}}}}Ce.loadGlyphRange=function(p,n,s,h,m){const v=256*n,b=v+255,T=h.transformRequest(s.replace("{fontstack}",p).replace("{range}",`${v}-${b}`),l.ResourceType.Glyphs);l.getArrayBuffer(T,(k,R)=>{if(k)m(k);else if(R){const V={};for(const X of l.parseGlyphPBF(R))V[X.id]=X;m(null,V)}})},Ce.TinySDF=class{constructor({fontSize:p=24,buffer:n=3,radius:s=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:b="normal"}){this.buffer=n,this.cutoff=h,this.radius=s;const T=this.size=p+4*n,k=this._createCanvas(T),R=this.ctx=k.getContext("2d",{willReadFrequently:!0});R.font=`${b} ${v} ${p}px ${m}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(p){const n=document.createElement("canvas");return n.width=n.height=p,n}draw(p){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(p),b=Math.floor(s),T=Math.min(this.size-this.buffer,Math.ceil(v-m)),k=Math.min(this.size-this.buffer,Math.ceil(s)+Math.ceil(h)),R=T+2*this.buffer,V=k+2*this.buffer,X=R*V,re=new Uint8ClampedArray(X),he={data:re,width:R,height:V,glyphWidth:T,glyphHeight:k,glyphTop:b,glyphLeft:0,glyphAdvance:n};if(T===0||k===0)return he;const{ctx:oe,buffer:pe,gridInner:ve,gridOuter:be}=this;oe.clearRect(pe,pe,T,k),oe.fillText(p,pe,pe+b+1);const Ie=oe.getImageData(pe,pe,T,k);be.fill(se,0,X),ve.fill(0,0,X);for(let Ae=0;Ae<k;Ae++)for(let Ne=0;Ne<T;Ne++){const Oe=Ie.data[4*(Ae*T+Ne)+3]/255;if(Oe===0)continue;const Be=(Ae+pe)*R+Ne+pe;if(Oe===1)be[Be]=0,ve[Be]=se;else{const He=.5-Oe;be[Be]=He>0?He*He:0,ve[Be]=He<0?He*He:0}}ne(be,0,0,R,V,R,this.f,this.v,this.z),ne(ve,pe,pe,T,k,R,this.f,this.v,this.z);for(let Ae=0;Ae<X;Ae++){const Ne=Math.sqrt(be[Ae])-Math.sqrt(ve[Ae]);re[Ae]=Math.round(255-255*(Ne/this.radius+this.cutoff))}return he}};const Pe=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,n){return l.sphericalToCartesian(p.expression.evaluate(n))}interpolate(p,n,s){return{x:l.number(p.x,n.x,s),y:l.number(p.y,n.y,s),z:l.number(p.z,n.z,s)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),Ze="-transition";class rt extends l.Evented{constructor(n){super(),this._transitionable=new l.Transitionable(Pe),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(l.validateLight,n,s))for(const h in n){const m=n[h];h.endsWith(Ze)?this._transitionable.setTransition(h.slice(0,-Ze.length),m):this._transitionable.setValue(h,m)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,h){return(!h||h.validate!==!1)&&l.emitValidationErrors(this,n.call(l.validateStyle,l.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class ft{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const h=n.join(",")+String(s);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(n,s)),this.dashEntry[h]}getDashRanges(n,s,h){const m=[];let v=n.length%2==1?-n[n.length-1]*h:0,b=n[0]*h,T=!0;m.push({left:v,right:b,isDash:T,zeroLength:n[0]===0});let k=n[0];for(let R=1;R<n.length;R++){T=!T;const V=n[R];v=k*h,k+=V,b=k*h,m.push({left:v,right:b,isDash:T,zeroLength:V===0})}return m}addRoundDash(n,s,h){const m=s/2;for(let v=-h;v<=h;v++){const b=this.width*(this.nextRow+h+v);let T=0,k=n[T];for(let R=0;R<this.width;R++){R/k.right>1&&(k=n[++T]);const V=Math.abs(R-k.left),X=Math.abs(R-k.right),re=Math.min(V,X);let he;const oe=v/h*(m+1);if(k.isDash){const pe=m-Math.abs(oe);he=Math.sqrt(re*re+pe*pe)}else he=m-Math.sqrt(re*re+oe*oe);this.data[b+R]=Math.max(0,Math.min(255,he+128))}}}addRegularDash(n){for(let T=n.length-1;T>=0;--T){const k=n[T],R=n[T+1];k.zeroLength?n.splice(T,1):R&&R.isDash===k.isDash&&(R.left=k.left,n.splice(T,1))}const s=n[0],h=n[n.length-1];s.isDash===h.isDash&&(s.left=h.left-this.width,h.right=s.right+this.width);const m=this.width*this.nextRow;let v=0,b=n[v];for(let T=0;T<this.width;T++){T/b.right>1&&(b=n[++v]);const k=Math.abs(T-b.left),R=Math.abs(T-b.right),V=Math.min(k,R);this.data[m+T]=Math.max(0,Math.min(255,(b.isDash?V:-V)+128))}}addDash(n,s){const h=s?7:0,m=2*h+1;if(this.nextRow+m>this.height)return l.warnOnce("LineAtlas out of space"),null;let v=0;for(let T=0;T<n.length;T++)v+=n[T];if(v!==0){const T=this.width/v,k=this.getDashRanges(n,this.width,T);s?this.addRoundDash(k,T,h):this.addRegularDash(k)}const b={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:v};return this.nextRow+=m,this.dirty=!0,b}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}class dt{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const h=this.workerPool.acquire(this.id);for(let m=0;m<h.length;m++){const v=new dt.Actor(h[m],s,this.id);v.name=`Worker ${m}`,this.actors.push(v)}}broadcast(n,s,h){l.asyncAll(this.actors,(m,v)=>{m.send(n,s,v)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ue(p,n,s){const h=function(m,v){if(m)return s(m);if(v){const b=l.pick(l.extend(v,p),["tiles","minzoom","maxzoom","attribution","maplibreLogo","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(b.vectorLayers=v.vector_layers,b.vectorLayerIds=b.vectorLayers.map(T=>T.id)),s(null,b)}};return p.url?l.getJSON(n.transformRequest(p.url,l.ResourceType.Source),h):l.exported.frame(()=>h(null,p))}dt.Actor=l.Actor;class yt{constructor(n,s,h){this.bounds=l.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=h||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),h=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*s),m=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*s),v=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*s),b=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=h&&n.x<v&&n.y>=m&&n.y<b}}class rn extends l.Evented{constructor(n,s,h,m){if(super(),this.id=n,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(s,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new l.ErrorEvent(n)):s&&(l.extend(this,s),s.bounds&&(this.tileBounds=new yt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(h,l.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(b,T){return delete n.request,n.aborted?s(null):b&&b.status!==404?s(b):(T&&T.resourceTiming&&(n.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&n.setExpiryData(T),n.loadVectorData(T,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=s:n.request=n.actor.send("reloadTile",m,v.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",m,v.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class vn extends l.Evented{constructor(n,s,h,m){super(),this.id=n,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},s),l.extend(this,l.pick(s,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new l.ErrorEvent(n)):s&&(l.extend(this,s),s.bounds&&(this.tileBounds=new yt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),(m,v)=>{if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(m)n.state="errored",s(m);else if(v){this.map._refreshExpiredTiles&&n.setExpiryData(v),delete v.cacheControl,delete v.expires;const b=this.map.painter.context,T=b.gl;n.texture=this.map.painter.getTileTexture(v.width),n.texture?n.texture.update(v,{useMipmap:!0}):(n.texture=new J(b,v,T.RGBA,{useMipmap:!0}),n.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),b.extTextureFilterAnisotropic&&T.texParameterf(T.TEXTURE_2D,b.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,b.extTextureFilterAnisotropicMax)),n.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),s(null)}})}abortTile(n,s){n.request&&(n.request.cancel(),delete n.request),s()}unloadTile(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()}hasTransition(){return!1}}let Sn;class Ye extends vn{constructor(n,s,h,m){super(n,s,h,m),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(v,b){v&&(n.state="errored",s(v)),b&&(n.dem=b,n.needsHillshadePrepare=!0,n.state="loaded",s(null))}n.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),function(v,b){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(v)n.state="errored",s(v);else if(b){this.map._refreshExpiredTiles&&n.setExpiryData(b),delete b.cacheControl,delete b.expires;const T=l.isImageBitmap(b)&&(Sn==null&&(Sn=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Sn)?b:l.exported.getImageData(b,1),k={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:T,encoding:this.encoding};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",k,m.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const s=n.canonical,h=Math.pow(2,s.z),m=(s.x-1+h)%h,v=s.x===0?n.wrap-1:n.wrap,b=(s.x+1+h)%h,T=s.x+1===h?n.wrap+1:n.wrap,k={};return k[new l.OverscaledTileID(n.overscaledZ,v,s.z,m,s.y).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,T,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(k[new l.OverscaledTileID(n.overscaledZ,v,s.z,m,s.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,T,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<h&&(k[new l.OverscaledTileID(n.overscaledZ,v,s.z,m,s.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,T,s.z,b,s.y+1).key]={backfilled:!1}),k}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class mt extends l.Evented{constructor(n,s,h,m){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const v=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*v,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*v,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:l.EXTENT,radius:(s.clusterRadius||50)*v,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData("content"),this}getClusterExpansionZoom(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this}getClusterChildren(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this}getClusterLeaves(n,s,h,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:h},m),this}_updateWorkerData(n){const s=l.extend({},this.workerOptions),h=this._data;typeof h=="string"?(s.request=this.map._requestManager.transformRequest(l.exported.resolveURL(h),l.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(h),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,s,(m,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return;let b=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b=v.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:s.source},null),m)return void this.fire(new l.ErrorEvent(m));const T={dataType:"source",sourceDataType:n};this._collectResourceTiming&&b&&b.length>0&&l.extend(T,{resourceTiming:b}),this.fire(new l.Event("data",T))})}loaded(){return this._pendingLoads===0}loadTile(n,s){const h=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const m={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(h,m,(v,b)=>(delete n.request,n.unloadVectorData(),n.aborted?s(null):v?s(v):(n.loadVectorData(b,this.map.painter,h==="reloadTile"),s(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var At=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class xt extends l.Evented{constructor(n,s,h,m){super(),this.id=n,this.dispatcher=h,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=s}load(n,s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(h,m)=>{this._loaded=!0,h?this.fire(new l.ErrorEvent(h)):m&&(this.image=m,n&&(this.coordinates=n),s&&s(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}setCoordinates(n){this.coordinates=n;const s=n.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(m){let v=1/0,b=1/0,T=-1/0,k=-1/0;for(const re of m)v=Math.min(v,re.x),b=Math.min(b,re.y),T=Math.max(T,re.x),k=Math.max(k,re.y);const R=Math.max(T-v,k-b),V=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),X=Math.pow(2,V);return new l.CanonicalTileID(V,Math.floor((v+T)/2*X),Math.floor((b+k)/2*X))}(s),this.minzoom=this.maxzoom=this.tileID.z;const h=s.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new J(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}loadTile(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class wt extends xt{constructor(n,s,h,m){super(n,s,h,m),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,l.ResourceType.Source).url);l.getVideo(this.urls,(s,h)=>{this._loaded=!0,s?this.fire(new l.ErrorEvent(s)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new J(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Xt extends xt{constructor(n,s,h,m){super(n,s,h,m),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,h=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new J(s,this.canvas,h.RGBA,{premultiply:!0});for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const yn={vector:rn,raster:vn,"raster-dem":Ye,geojson:mt,video:wt,image:xt,canvas:Xt};function un(p,n){const s=l.create();return l.translate(s,s,[1,1,0]),l.scale(s,s,[.5*p.width,.5*p.height,1]),l.multiply(s,s,p.calculatePosMatrix(n.toUnwrapped()))}function xn(p,n,s,h,m,v){const b=function(X,re,he){if(X)for(const oe of X){const pe=re[oe];if(pe&&pe.source===he&&pe.type==="fill-extrusion")return!0}else for(const oe in re){const pe=re[oe];if(pe.source===he&&pe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,n,p.id),T=v.maxPitchScaleFactor(),k=p.tilesIn(h,T,b);k.sort(Tn);const R=[];for(const X of k)R.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(n,s,p._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,m,v,T,un(p.transform,X.tileID))});const V=function(X){const re={},he={};for(const oe of X){const pe=oe.queryResults,ve=oe.wrappedTileID,be=he[ve]=he[ve]||{};for(const Ie in pe){const Ae=pe[Ie],Ne=be[Ie]=be[Ie]||{},Oe=re[Ie]=re[Ie]||[];for(const Be of Ae)Ne[Be.featureIndex]||(Ne[Be.featureIndex]=!0,Oe.push(Be))}}return re}(R);for(const X in V)V[X].forEach(re=>{const he=re.feature,oe=p.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=oe});return V}function Tn(p,n){const s=p.tileID,h=n.tileID;return s.overscaledZ-h.overscaledZ||s.canonical.y-h.canonical.y||s.wrap-h.wrap||s.canonical.x-h.canonical.x}class Gt{constructor(n,s){this.tileID=n,this.uid=l.uniqueId(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<l.exported.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(n,s,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(m,v){const b={};if(!v)return b;for(const T of m){const k=T.layerIds.map(R=>v.getLayer(R)).filter(Boolean);if(k.length!==0){T.layers=k,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(R=>k.filter(V=>V.id===R)[0]));for(const R of k)b[R.id]=T}}return b}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof l.SymbolBucket&&v.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(m).queryRadius(v))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new J(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new J(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,h,m,v,b,T,k,R,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:b,tileSize:this.tileSize,pixelPosMatrix:V,transform:k,params:T,queryPadding:this.queryPadding*R},n,s,h):{}}querySourceFeatures(n,s){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),v=s?s.sourceLayer:"",b=m._geojsonTileLayer||m[v];if(!b)return;const T=l.createFilter(s&&s.filter),{z:k,x:R,y:V}=this.tileID.canonical,X={z:k,x:R,y:V};for(let re=0;re<b.length;re++){const he=b.feature(re);if(T.needGeometry){const ve=l.toEvaluationFeature(he,!0);if(!T.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!T.filter(new l.EvaluationParameters(this.tileID.overscaledZ),he))continue;const oe=h.getId(he,v),pe=new l.GeoJSONFeature(he,k,R,V,oe);pe.tile=X,n.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const h=l.parseCacheControl(n.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(s)if(this.expirationTime<s)m=!0;else{const v=this.expirationTime-s;v?this.expirationTime=h+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!s.style.hasLayer(m))continue;const v=this.buckets[m],b=v.layers[0].sourceLayer||"_geojsonTileLayer",T=h[b],k=n[b];if(!T||!k||Object.keys(k).length===0)continue;v.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=s&&s.style&&s.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=l.exported.now()+n}setDependencies(n,s){const h={};for(const m of s)h[m]=!0;this.dependencies[n]=h}hasDependency(n,s){for(const h of n){const m=this.dependencies[h];if(m){for(const v of s)if(m[v])return!0}}return!1}}class Qt{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,h){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:s,timeout:void 0};if(h!==void 0&&(v.timeout=setTimeout(()=>{this.remove(n,v)},h)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const h=n.wrapped().key,m=s===void 0?0:this.data[h].indexOf(s),v=this.data[h][m];return this.data[h].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(v.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const h in this.data)for(const m of this.data[h])n(m.value)||s.push(m);for(const h of s)this.remove(h.value.tileID,h)}}class hr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,h){const m=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},l.extend(this.stateChanges[n][m],h),this.deletedStates[n]===null){this.deletedStates[n]={};for(const v in this.state[n])v!==m&&(this.deletedStates[n][v]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const v in this.state[n][m])h[v]||(this.deletedStates[n][m][v]=null)}else for(const v in h)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][v]===null&&delete this.deletedStates[n][m][v]}removeFeatureState(n,s,h){if(this.deletedStates[n]===null)return;const m=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},h&&s!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][h]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(h in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][h]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,s){const h=String(s),m=l.extend({},(this.state[n]||{})[h],(this.stateChanges[n]||{})[h]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const v=this.deletedStates[n][s];if(v===null)return{};for(const b in v)delete m[b]}return m}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const b in this.stateChanges[m])this.state[m][b]||(this.state[m][b]={}),l.extend(this.state[m][b],this.stateChanges[m][b]),v[b]=this.state[m][b];h[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const b in this.state[m])v[b]={},this.state[m][b]={};else for(const b in this.deletedStates[m]){if(this.deletedStates[m][b]===null)this.state[m][b]={};else for(const T of Object.keys(this.deletedStates[m][b]))delete this.state[m][b][T];v[b]=this.state[m][b]}h[m]=h[m]||{},l.extend(h[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in n)n[m].setFeatureState(h,s)}}class rr extends l.Evented{constructor(n,s,h){super(),this.id=n,this.dispatcher=h,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",()=>{this._sourceErrored=!0}),this._source=function(m,v,b,T){const k=new yn[v.type](m,v,b,T);if(k.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${k.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],k),k}(n,s,h,this),this._tiles={},this._cache=new Qt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new hr}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,s){return this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new l.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const h=this._tiles[s];h.upload(n),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(ir).map(n=>n.key)}getRenderableIds(n){const s=[];for(const h in this._tiles)this._isIdRenderable(h,n)&&s.push(this._tiles[h]);return n?s.sort((h,m)=>{const v=h.tileID,b=m.tileID,T=new l.pointGeometry(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),k=new l.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-b.overscaledZ||k.y-T.y||k.x-T.x}).map(h=>h.tileID.key):s.map(h=>h.tileID).sort(ir).map(h=>h.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){const h=this._tiles[n];h&&(h.state!=="loading"&&(h.state=s),this._loadTile(h,this._tileLoaded.bind(this,h,n,s)))}_tileLoaded(n,s,h,m){if(m)return n.state="errored",void(m.status!==404?this._source.fire(new l.ErrorEvent(m,{tile:n})):this.update(this.transform));n.timeAdded=l.exported.now(),h==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let m=0;m<s.length;m++){const v=s[m];if(n.neighboringTiles&&n.neighboringTiles[v]){const b=this.getTileByID(v);h(n,b),h(b,n)}}function h(m,v){m.needsHillshadePrepare=!0;let b=v.tileID.canonical.x-m.tileID.canonical.x;const T=v.tileID.canonical.y-m.tileID.canonical.y,k=Math.pow(2,m.tileID.canonical.z),R=v.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+k)===1?b+=k:Math.abs(b-k)===1&&(b-=k)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,b,T),m.neighboringTiles&&m.neighboringTiles[R]&&(m.neighboringTiles[R].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,h,m){for(const v in this._tiles){let b=this._tiles[v];if(m[v]||!b.hasData()||b.tileID.overscaledZ<=s||b.tileID.overscaledZ>h)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>s+1;){const R=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[R.key],b&&b.hasData()&&(T=R)}let k=T;for(;k.overscaledZ>s;)if(k=k.scaledTo(k.overscaledZ-1),n[k.key]){m[T.key]=T;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const h=this._loadedParentTiles[n.key];return h&&h.tileID.overscaledZ>=s?h:null}for(let h=n.overscaledZ-1;h>=s;h--){const m=n.scaledTo(h),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,h=Math.ceil(n.height/this._source.tileSize)+1,m=Math.floor(s*h*5),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const h={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+s),h[v.tileID.key]=v}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(n){if(this.transform=n,!this._sourceLoaded||this._paused)return;let s;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?s=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new l.OverscaledTileID(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(s=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(s=s.filter(k=>this._source.hasTile(k)))):s=[];const h=n.coveringZoomLevel(this._source),m=Math.max(h-rr.maxOverzooming,this._source.minzoom),v=Math.max(h+rr.maxUnderzooming,this._source.minzoom),b=this._updateRetainedTiles(s,h);if(Mr(this._source.type)){const k={},R={},V=Object.keys(b);for(const X of V){const re=b[X],he=this._tiles[X];if(!he||he.fadeEndTime&&he.fadeEndTime<=l.exported.now())continue;const oe=this.findLoadedParent(re,m);oe&&(this._addTile(oe.tileID),k[oe.tileID.key]=oe.tileID),R[X]=re}this._retainLoadedChildren(R,h,v,b);for(const X in k)b[X]||(this._coveredTiles[X]=!0,b[X]=k[X])}for(const k in b)this._tiles[k].clearFadeHold();const T=l.keysDifference(this._tiles,b);for(const k of T){const R=this._tiles[k];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){const h={},m={},v=Math.max(s-rr.maxOverzooming,this._source.minzoom),b=Math.max(s+rr.maxUnderzooming,this._source.minzoom),T={};for(const k of n){const R=this._addTile(k);h[k.key]=k,R.hasData()||s<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,s,b,h);for(const k of n){let R=this._tiles[k.key];if(R.hasData())continue;if(s+1>this._source.maxzoom){const X=k.children(this._source.maxzoom)[0],re=this.getTile(X);if(re&&re.hasData()){h[X.key]=X;continue}}else{const X=k.children(this._source.maxzoom);if(h[X[0].key]&&h[X[1].key]&&h[X[2].key]&&h[X[3].key])continue}let V=R.wasRequested();for(let X=k.overscaledZ-1;X>=v;--X){const re=k.scaledTo(X);if(m[re.key]||(m[re.key]=!0,R=this.getTile(re),!R&&V&&(R=this._addTile(re)),R&&(h[re.key]=re,V=R.wasRequested(),R.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let h,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}s.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(v),h)break;m=v}for(const v of s)this._loadedParentTiles[v]=h}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const h=s;return s||(s=new Gt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s.uses++,this._tiles[n.key]=s,h||this._source.fire(new l.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const h=s.getExpiryTimeout();h&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},h))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,h){const m=[],v=this.transform;if(!v)return m;const b=h?v.getCameraQueryGeometry(n):n,T=n.map(oe=>v.pointCoordinate(oe)),k=b.map(oe=>v.pointCoordinate(oe)),R=this.getIds();let V=1/0,X=1/0,re=-1/0,he=-1/0;for(const oe of k)V=Math.min(V,oe.x),X=Math.min(X,oe.y),re=Math.max(re,oe.x),he=Math.max(he,oe.y);for(let oe=0;oe<R.length;oe++){const pe=this._tiles[R[oe]];if(pe.holdingForFade())continue;const ve=pe.tileID,be=Math.pow(2,v.zoom-pe.tileID.overscaledZ),Ie=s*pe.queryPadding*l.EXTENT/pe.tileSize/be,Ae=[ve.getTilePoint(new l.MercatorCoordinate(V,X)),ve.getTilePoint(new l.MercatorCoordinate(re,he))];if(Ae[0].x-Ie<l.EXTENT&&Ae[0].y-Ie<l.EXTENT&&Ae[1].x+Ie>=0&&Ae[1].y+Ie>=0){const Ne=T.map(Be=>ve.getTilePoint(Be)),Oe=k.map(Be=>ve.getTilePoint(Be));m.push({tile:pe,tileID:ve,queryGeometry:Ne,cameraQueryGeometry:Oe,scale:be})}}return m}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(h=>this._tiles[h].tileID);for(const h of s)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(Mr(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(n,s,h){this._state.updateState(n=n||"_geojsonTileLayer",s,h)}removeFeatureState(n,s,h){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,h)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,h){const m=this._tiles[n];m&&m.setDependencies(s,h)}reloadTilesForDependencies(n,s){for(const h in this._tiles)this._tiles[h].hasDependency(n,s)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(n,s))}}function ir(p,n){const s=Math.abs(2*p.wrap)-+(p.wrap<0),h=Math.abs(2*n.wrap)-+(n.wrap<0);return p.overscaledZ-n.overscaledZ||h-s||n.canonical.y-p.canonical.y||n.canonical.x-p.canonical.x}function Mr(p){return p==="raster"||p==="image"||p==="video"}rr.maxOverzooming=10,rr.maxUnderzooming=3;const Vn="mapboxgl_preloaded_worker_pool";class Hn{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Hn.workerCount;)this.workers.push(new Worker(el.workerUrl));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Vn]}numActive(){return Object.keys(this.active).length}}const Br=Math.floor(l.exported.hardwareConcurrency/2);let ie;function O(){return ie||(ie=new Hn),ie}function D(p,n){const s={};for(const h in p)h!=="ref"&&(s[h]=p[h]);return l.refProperties.forEach(h=>{h in n&&(s[h]=n[h])}),s}function ue(p){p=p.slice();const n=Object.create(null);for(let s=0;s<p.length;s++)n[p[s].id]=p[s];for(let s=0;s<p.length;s++)"ref"in p[s]&&(p[s]=D(p[s],n[p[s].ref]));return p}Hn.workerCount=Math.max(Math.min(Br,6),1);const Ee={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function qe(p,n,s){s.push({command:Ee.addSource,args:[p,n[p]]})}function Xe(p,n,s){n.push({command:Ee.removeSource,args:[p]}),s[p]=!0}function Dt(p,n,s,h){Xe(p,s,h),qe(p,n,s)}function ke(p,n,s){let h;for(h in p[s])if(Object.prototype.hasOwnProperty.call(p[s],h)&&h!=="data"&&!C(p[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!C(p[s][h],n[s][h]))return!1;return!0}function Ge(p,n,s,h,m,v){let b;for(b in n=n||{},p=p||{})Object.prototype.hasOwnProperty.call(p,b)&&(C(p[b],n[b])||s.push({command:v,args:[h,b,n[b],m]}));for(b in n)Object.prototype.hasOwnProperty.call(n,b)&&!Object.prototype.hasOwnProperty.call(p,b)&&(C(p[b],n[b])||s.push({command:v,args:[h,b,n[b],m]}))}function wn(p){return p.id}function en(p,n){return p[n.id]=n,p}class ln{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=l.clamp(n,0,1);let s=1,h=this._distances[s];const m=n*this.paddedLength+this.padding;for(;h<m&&s<this._distances.length;)h=this._distances[++s];const v=s-1,b=this._distances[v],T=h-b,k=T>0?(m-b)/T:0;return this.points[v].mult(1-k).add(this.points[s].mult(k))}}function Mn(p,n){let s=!0;return p==="always"||p!=="never"&&n!=="never"||(s=!1),s}class Ln{constructor(n,s,h){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(n/h),this.yCellCount=Math.ceil(s/h);for(let b=0;b<this.xCellCount*this.yCellCount;b++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,h,m,v){this._forEachCell(s,h,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(n,s,h,m){this._forEachCell(s-m,h-m,s+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(h),this.circles.push(m)}_insertBoxCell(n,s,h,m,v,b){this.boxCells[v].push(b)}_insertCircleCell(n,s,h,m,v,b){this.circleCells[v].push(b)}_query(n,s,h,m,v,b,T){if(h<0||n>this.width||m<0||s>this.height)return[];const k=[];if(n<=0&&s<=0&&this.width<=h&&this.height<=m){if(v)return[{key:null,x1:n,y1:s,x2:h,y2:m}];for(let R=0;R<this.boxKeys.length;R++)k.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const V=this.circles[3*R],X=this.circles[3*R+1],re=this.circles[3*R+2];k.push({key:this.circleKeys[R],x1:V-re,y1:X-re,x2:V+re,y2:X+re})}}else this._forEachCell(n,s,h,m,this._queryCell,k,{hitTest:v,overlapMode:b,seenUids:{box:{},circle:{}}},T);return k}query(n,s,h,m){return this._query(n,s,h,m,!1,null)}hitTest(n,s,h,m,v,b){return this._query(n,s,h,m,!0,v,b).length>0}hitTestCircle(n,s,h,m,v){const b=n-h,T=n+h,k=s-h,R=s+h;if(T<0||b>this.width||R<0||k>this.height)return!1;const V=[];return this._forEachCell(b,k,T,R,this._queryCellCircle,V,{hitTest:!0,overlapMode:m,circle:{x:n,y:s,radius:h},seenUids:{box:{},circle:{}}},v),V.length>0}_queryCell(n,s,h,m,v,b,T,k){const{seenUids:R,hitTest:V,overlapMode:X}=T,re=this.boxCells[v];if(re!==null){const oe=this.bboxes;for(const pe of re)if(!R.box[pe]){R.box[pe]=!0;const ve=4*pe,be=this.boxKeys[pe];if(n<=oe[ve+2]&&s<=oe[ve+3]&&h>=oe[ve+0]&&m>=oe[ve+1]&&(!k||k(be))&&(!V||!Mn(X,be.overlapMode))&&(b.push({key:be,x1:oe[ve],y1:oe[ve+1],x2:oe[ve+2],y2:oe[ve+3]}),V))return!0}}const he=this.circleCells[v];if(he!==null){const oe=this.circles;for(const pe of he)if(!R.circle[pe]){R.circle[pe]=!0;const ve=3*pe,be=this.circleKeys[pe];if(this._circleAndRectCollide(oe[ve],oe[ve+1],oe[ve+2],n,s,h,m)&&(!k||k(be))&&(!V||!Mn(X,be.overlapMode))){const Ie=oe[ve],Ae=oe[ve+1],Ne=oe[ve+2];if(b.push({key:be,x1:Ie-Ne,y1:Ae-Ne,x2:Ie+Ne,y2:Ae+Ne}),V)return!0}}}return!1}_queryCellCircle(n,s,h,m,v,b,T,k){const{circle:R,seenUids:V,overlapMode:X}=T,re=this.boxCells[v];if(re!==null){const oe=this.bboxes;for(const pe of re)if(!V.box[pe]){V.box[pe]=!0;const ve=4*pe,be=this.boxKeys[pe];if(this._circleAndRectCollide(R.x,R.y,R.radius,oe[ve+0],oe[ve+1],oe[ve+2],oe[ve+3])&&(!k||k(be))&&!Mn(X,be.overlapMode))return b.push(!0),!0}}const he=this.circleCells[v];if(he!==null){const oe=this.circles;for(const pe of he)if(!V.circle[pe]){V.circle[pe]=!0;const ve=3*pe,be=this.circleKeys[pe];if(this._circlesCollide(oe[ve],oe[ve+1],oe[ve+2],R.x,R.y,R.radius)&&(!k||k(be))&&!Mn(X,be.overlapMode))return b.push(!0),!0}}}_forEachCell(n,s,h,m,v,b,T,k){const R=this._convertToXCellCoord(n),V=this._convertToYCellCoord(s),X=this._convertToXCellCoord(h),re=this._convertToYCellCoord(m);for(let he=R;he<=X;he++)for(let oe=V;oe<=re;oe++)if(v.call(this,n,s,h,m,this.xCellCount*oe+he,b,T,k))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,h,m,v,b){const T=m-n,k=v-s,R=h+b;return R*R>T*T+k*k}_circleAndRectCollide(n,s,h,m,v,b,T){const k=(b-m)/2,R=Math.abs(n-(m+k));if(R>k+h)return!1;const V=(T-v)/2,X=Math.abs(s-(v+V));if(X>V+h)return!1;if(R<=k||X<=V)return!0;const re=R-k,he=X-V;return re*re+he*he<=h*h}}function Wr(p,n,s,h,m){const v=l.create();return n?(l.scale(v,v,[1/m,1/m,1]),s||l.rotateZ(v,v,h.angle)):l.multiply(v,h.labelPlaneMatrix,p),v}function Yn(p,n,s,h,m){if(n){const v=l.clone(p);return l.scale(v,v,[m,m,1]),s||l.rotateZ(v,v,-h.angle),v}return h.glCoordMatrix}function et(p,n){const s=l.fromValues(p.x,p.y,0,1);Qo(s,s,n);const h=s[3];return{point:new l.pointGeometry(s[0]/h,s[1]/h),signedDistanceFromCamera:h}}function Zt(p,n){return .5+p/n*.5}function Nt(p,n){const s=p[0]/p[3],h=p[1]/p[3];return s>=-n[0]&&s<=n[0]&&h>=-n[1]&&h<=n[1]}function Sr(p,n,s,h,m,v,b,T){const k=h?p.textSizeData:p.iconSizeData,R=l.evaluateSizeForZoom(k,s.transform.zoom),V=[256/s.width*2+1,256/s.height*2+1],X=h?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;X.clear();const re=p.lineVertexArray,he=h?p.text.placedSymbolArray:p.icon.placedSymbolArray,oe=s.transform.width/s.transform.height;let pe=!1;for(let ve=0;ve<he.length;ve++){const be=he.get(ve);if(be.hidden||be.writingMode===l.WritingMode.vertical&&!pe){cn(be.numGlyphs,X);continue}pe=!1;const Ie=l.fromValues(be.anchorX,be.anchorY,0,1);if(l.transformMat4(Ie,Ie,n),!Nt(Ie,V)){cn(be.numGlyphs,X);continue}const Ae=Zt(s.transform.cameraToCenterDistance,Ie[3]),Ne=l.evaluateSizeForFeature(k,R,be),Oe=b?Ne/Ae:Ne*Ae,Be=new l.pointGeometry(be.anchorX,be.anchorY),He=et(Be,m).point,tt={},je=or(be,Oe,!1,T,n,m,v,p.glyphOffsetArray,re,X,He,Be,tt,oe);pe=je.useVertical,(je.notEnoughRoom||pe||je.needsFlipping&&or(be,Oe,!0,T,n,m,v,p.glyphOffsetArray,re,X,He,Be,tt,oe).notEnoughRoom)&&cn(be.numGlyphs,X)}h?p.text.dynamicLayoutVertexBuffer.updateData(X):p.icon.dynamicLayoutVertexBuffer.updateData(X)}function Xr(p,n,s,h,m,v,b,T,k,R,V){const X=T.glyphStartIndex+T.numGlyphs,re=T.lineStartIndex,he=T.lineStartIndex+T.lineLength,oe=n.getoffsetX(T.glyphStartIndex),pe=n.getoffsetX(X-1),ve=fr(p*oe,s,h,m,v,b,T.segment,re,he,k,R,V);if(!ve)return null;const be=fr(p*pe,s,h,m,v,b,T.segment,re,he,k,R,V);return be?{first:ve,last:be}:null}function Ut(p,n,s,h){return p===l.WritingMode.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*h?{useVertical:!0}:(p===l.WritingMode.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function or(p,n,s,h,m,v,b,T,k,R,V,X,re,he){const oe=n/24,pe=p.lineOffsetX*oe,ve=p.lineOffsetY*oe;let be;if(p.numGlyphs>1){const Ie=p.glyphStartIndex+p.numGlyphs,Ae=p.lineStartIndex,Ne=p.lineStartIndex+p.lineLength,Oe=Xr(oe,T,pe,ve,s,V,X,p,k,v,re);if(!Oe)return{notEnoughRoom:!0};const Be=et(Oe.first.point,b).point,He=et(Oe.last.point,b).point;if(h&&!s){const tt=Ut(p.writingMode,Be,He,he);if(tt)return tt}be=[Oe.first];for(let tt=p.glyphStartIndex+1;tt<Ie-1;tt++)be.push(fr(oe*T.getoffsetX(tt),pe,ve,s,V,X,p.segment,Ae,Ne,k,v,re));be.push(Oe.last)}else{if(h&&!s){const Ae=et(X,m).point,Ne=p.lineStartIndex+p.segment+1,Oe=new l.pointGeometry(k.getx(Ne),k.gety(Ne)),Be=et(Oe,m),He=Be.signedDistanceFromCamera>0?Be.point:ki(X,Oe,Ae,1,m),tt=Ut(p.writingMode,Ae,He,he);if(tt)return tt}const Ie=fr(oe*T.getoffsetX(p.glyphStartIndex),pe,ve,s,V,X,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,k,v,re);if(!Ie)return{notEnoughRoom:!0};be=[Ie]}for(const Ie of be)l.addDynamicAttributes(R,Ie.point,Ie.angle);return{}}function ki(p,n,s,h,m){const v=et(p.add(p.sub(n)._unit()),m).point,b=s.sub(v);return s.add(b._mult(h/b.mag()))}function fr(p,n,s,h,m,v,b,T,k,R,V,X){const re=h?p-n:p+n;let he=re>0?1:-1,oe=0;h&&(he*=-1,oe=Math.PI),he<0&&(oe+=Math.PI);let pe=he>0?T+b:T+b+1,ve=m,be=m,Ie=0,Ae=0;const Ne=Math.abs(re),Oe=[];for(;Ie+Ae<=Ne;){if(pe+=he,pe<T||pe>=k)return null;if(be=ve,Oe.push(ve),ve=X[pe],ve===void 0){const Tt=new l.pointGeometry(R.getx(pe),R.gety(pe)),ht=et(Tt,V);if(ht.signedDistanceFromCamera>0)ve=X[pe]=ht.point;else{const Bt=pe-he;ve=ki(Ie===0?v:new l.pointGeometry(R.getx(Bt),R.gety(Bt)),Tt,be,Ne-Ie+1,V)}}Ie+=Ae,Ae=be.dist(ve)}const Be=(Ne-Ie)/Ae,He=ve.sub(be),tt=He.mult(Be)._add(be);tt._add(He._unit()._perp()._mult(s*he));const je=oe+Math.atan2(ve.y-be.y,ve.x-be.x);return Oe.push(tt),{point:tt,angle:je,path:Oe}}const Cr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function cn(p,n){for(let s=0;s<p;s++){const h=n.length;n.resize(h+4),n.float32.set(Cr,3*h)}}function Qo(p,n,s){const h=n[0],m=n[1];return p[0]=s[0]*h+s[4]*m+s[12],p[1]=s[1]*h+s[5]*m+s[13],p[3]=s[3]*h+s[7]*m+s[15],p}const lr=100;class Vi{constructor(n,s=new Ln(n.width+200,n.height+200,25),h=new Ln(n.width+200,n.height+200,25)){this.transform=n,this.grid=s,this.ignoredGrid=h,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+lr,this.screenBottomBoundary=n.height+lr,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200}placeCollisionBox(n,s,h,m,v){const b=this.projectAndGetPerspectiveRatio(m,n.anchorPointX,n.anchorPointY),T=h*b.perspectiveRatio,k=n.x1*T+b.point.x,R=n.y1*T+b.point.y,V=n.x2*T+b.point.x,X=n.y2*T+b.point.y;return!this.isInsideGrid(k,R,V,X)||s!=="always"&&this.grid.hitTest(k,R,V,X,s,v)?{box:[],offscreen:!1}:{box:[k,R,V,X],offscreen:this.isOffscreen(k,R,V,X)}}placeCollisionCircles(n,s,h,m,v,b,T,k,R,V,X,re,he){const oe=[],pe=new l.pointGeometry(s.anchorX,s.anchorY),ve=et(pe,b),be=Zt(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),Ie=(V?v/be:v*be)/l.ONE_EM,Ae=et(pe,T).point,Ne=Xr(Ie,m,s.lineOffsetX*Ie,s.lineOffsetY*Ie,!1,Ae,pe,s,h,T,{});let Oe=!1,Be=!1,He=!0;if(Ne){const tt=.5*re*be+he,je=new l.pointGeometry(-100,-100),Tt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ht=new ln,Bt=Ne.first,mn=Ne.last;let Kt=[];for(let $t=Bt.path.length-1;$t>=1;$t--)Kt.push(Bt.path[$t]);for(let $t=1;$t<mn.path.length;$t++)Kt.push(mn.path[$t]);const Jt=2.5*tt;if(k){const $t=Kt.map(on=>et(on,k));Kt=$t.some(on=>on.signedDistanceFromCamera<=0)?[]:$t.map(on=>on.point)}let Qn=[];if(Kt.length>0){const $t=Kt[0].clone(),on=Kt[0].clone();for(let qn=1;qn<Kt.length;qn++)$t.x=Math.min($t.x,Kt[qn].x),$t.y=Math.min($t.y,Kt[qn].y),on.x=Math.max(on.x,Kt[qn].x),on.y=Math.max(on.y,Kt[qn].y);Qn=$t.x>=je.x&&on.x<=Tt.x&&$t.y>=je.y&&on.y<=Tt.y?[Kt]:on.x<je.x||$t.x>Tt.x||on.y<je.y||$t.y>Tt.y?[]:l.clipLine([Kt],je.x,je.y,Tt.x,Tt.y)}for(const $t of Qn){ht.reset($t,.25*tt);let on=0;on=ht.length<=.5*tt?1:Math.ceil(ht.paddedLength/Jt)+1;for(let qn=0;qn<on;qn++){const kr=qn/Math.max(on-1,1),ui=ht.lerp(kr),ci=ui.x+lr,Oi=ui.y+lr;oe.push(ci,Oi,tt,0);const hi=ci-tt,Ri=Oi-tt,$o=ci+tt,fa=Oi+tt;if(He=He&&this.isOffscreen(hi,Ri,$o,fa),Be=Be||this.isInsideGrid(hi,Ri,$o,fa),n!=="always"&&this.grid.hitTestCircle(ci,Oi,tt,n,X)&&(Oe=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Oe}}}}return{circles:!R&&Oe||!Be?[]:oe,offscreen:He,collisionDetected:Oe}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let h=1/0,m=1/0,v=-1/0,b=-1/0;for(const V of n){const X=new l.pointGeometry(V.x+lr,V.y+lr);h=Math.min(h,X.x),m=Math.min(m,X.y),v=Math.max(v,X.x),b=Math.max(b,X.y),s.push(X)}const T=this.grid.query(h,m,v,b).concat(this.ignoredGrid.query(h,m,v,b)),k={},R={};for(const V of T){const X=V.key;if(k[X.bucketInstanceId]===void 0&&(k[X.bucketInstanceId]={}),k[X.bucketInstanceId][X.featureIndex])continue;const re=[new l.pointGeometry(V.x1,V.y1),new l.pointGeometry(V.x2,V.y1),new l.pointGeometry(V.x2,V.y2),new l.pointGeometry(V.x1,V.y2)];l.polygonIntersectsPolygon(s,re)&&(k[X.bucketInstanceId][X.featureIndex]=!0,R[X.bucketInstanceId]===void 0&&(R[X.bucketInstanceId]=[]),R[X.bucketInstanceId].push(X.featureIndex))}return R}insertCollisionBox(n,s,h,m,v,b){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:b,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,h,m,v,b){const T=h?this.ignoredGrid:this.grid,k={bucketInstanceId:m,featureIndex:v,collisionGroupID:b,overlapMode:s};for(let R=0;R<n.length;R+=4)T.insertCircle(k,n[R],n[R+1],n[R+2])}projectAndGetPerspectiveRatio(n,s,h){const m=l.fromValues(s,h,0,1);return Qo(m,m,n),{point:new l.pointGeometry((m[0]/m[3]+1)/2*this.transform.width+lr,(-m[1]/m[3]+1)/2*this.transform.height+lr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m[3]*.5}}isOffscreen(n,s,h,m){return h<lr||n>=this.screenRightBoundary||m<lr||s>this.screenBottomBoundary}isInsideGrid(n,s,h,m){return h>=0&&n<this.gridRightBoundary&&m>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=l.identity([]);return l.translate(n,n,[-100,-100,0]),n}}function $n(p,n,s){return n*(l.EXTENT/(p.tileSize*Math.pow(2,s-p.tileID.overscaledZ)))}class Ii{constructor(n,s,h,m){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class $i{constructor(n,s,h,m,v){this.text=new Ii(n?n.text:null,s,h,v),this.icon=new Ii(n?n.icon:null,s,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ji{constructor(n,s,h){this.text=n,this.icon=s,this.skipFade=h}}class Mo{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class ae{constructor(n,s,h,m,v){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=v}}class L{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:h=>h.collisionGroupID===s}}return this.collisionGroups[n]}}function F(p,n,s,h,m){const{horizontalAlign:v,verticalAlign:b}=l.getAnchorAlignment(p),T=-(v-.5)*n,k=-(b-.5)*s,R=l.evaluateVariableOffset(p,h);return new l.pointGeometry(T+R[0]*m,k+R[1]*m)}function Q(p,n,s,h,m,v){const{x1:b,x2:T,y1:k,y2:R,anchorPointX:V,anchorPointY:X}=p,re=new l.pointGeometry(n,s);return h&&re._rotate(m?v:-v),{x1:b+re.x,y1:k+re.y,x2:T+re.x,y2:R+re.y,anchorPointX:V,anchorPointY:X}}class le{constructor(n,s,h,m){this.transform=n.clone(),this.collisionIndex=new Vi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new L(h),this.collisionCircleArrays={},this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,s,h,m){const v=h.getBucket(s),b=h.latestFeatureIndex;if(!v||!b||s.id!==v.layerIds[0])return;const T=h.collisionBoxArray,k=v.layers[0].layout,R=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),V=h.tileSize/l.EXTENT,X=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),re=k.get("text-pitch-alignment")==="map",he=k.get("text-rotation-alignment")==="map",oe=$n(h,1,this.transform.zoom),pe=Wr(X,re,he,this.transform,oe);let ve=null;if(re){const Ie=Yn(X,re,he,this.transform,oe);ve=l.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[v.bucketInstanceId]=new ae(v.bucketInstanceId,b,v.sourceLayerIndex,v.index,h.tileID);const be={bucket:v,layout:k,posMatrix:X,textLabelPlaneMatrix:pe,labelToScreenMatrix:ve,scale:R,textPixelRatio:V,holdingForFade:h.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const Ie of v.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:Ne,symbolInstanceEnd:Oe}=Ie;n.push({sortKey:Ae,symbolInstanceStart:Ne,symbolInstanceEnd:Oe,parameters:be})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:be})}attemptAnchorPlacement(n,s,h,m,v,b,T,k,R,V,X,re,he,oe,pe){const ve=[re.textOffset0,re.textOffset1],be=F(n,h,m,ve,v),Ie=this.collisionIndex.placeCollisionBox(Q(s,be.x,be.y,b,T,this.transform.angle),X,k,R,V.predicate);if((!pe||this.collisionIndex.placeCollisionBox(Q(pe,be.x,be.y,b,T,this.transform.angle),X,k,R,V.predicate).box.length!==0)&&Ie.box.length>0){let Ae;return this.prevPlacement&&this.prevPlacement.variableOffsets[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[re.crossTileID].anchor),this.variableOffsets[re.crossTileID]={textOffset:ve,width:h,height:m,anchor:n,textBoxScale:v,prevAnchor:Ae},this.markUsedJustification(he,n,re,oe),he.allowVerticalPlacement&&(this.markUsedOrientation(he,oe,re),this.placedOrientations[re.crossTileID]=oe),{shift:be,placedGlyphBoxes:Ie}}}placeLayerBucketPart(n,s,h){const{bucket:m,layout:v,posMatrix:b,textLabelPlaneMatrix:T,labelToScreenMatrix:k,textPixelRatio:R,holdingForFade:V,collisionBoxArray:X,partiallyEvaluatedTextSize:re,collisionGroup:he}=n.parameters,oe=v.get("text-optional"),pe=v.get("icon-optional"),ve=l.getOverlapMode(v,"text-overlap","text-allow-overlap"),be=ve==="always",Ie=l.getOverlapMode(v,"icon-overlap","icon-allow-overlap"),Ae=Ie==="always",Ne=v.get("text-rotation-alignment")==="map",Oe=v.get("text-pitch-alignment")==="map",Be=v.get("icon-text-fit")!=="none",He=v.get("symbol-z-order")==="viewport-y",tt=be&&(Ae||!m.hasIconData()||pe),je=Ae&&(be||!m.hasTextData()||oe);!m.collisionArrays&&X&&m.deserializeCollisionBoxes(X);const Tt=(ht,Bt)=>{if(s[ht.crossTileID])return;if(V)return void(this.placements[ht.crossTileID]=new ji(!1,!1,!1));let mn=!1,Kt=!1,Jt=!0,Qn=null,$t={box:null,offscreen:null},on={box:null,offscreen:null},qn=null,kr=null,ui=null,ci=0,Oi=0,hi=0;Bt.textFeatureIndex?ci=Bt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(ci=ht.featureIndex),Bt.verticalTextFeatureIndex&&(Oi=Bt.verticalTextFeatureIndex);const Ri=Bt.textBox;if(Ri){const An=pn=>{let dr=l.WritingMode.horizontal;if(m.allowVerticalPlacement&&!pn&&this.prevPlacement){const fi=this.prevPlacement.placedOrientations[ht.crossTileID];fi&&(this.placedOrientations[ht.crossTileID]=fi,dr=fi,this.markUsedOrientation(m,dr,ht))}return dr},wr=(pn,dr)=>{if(m.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Bt.verticalTextBox){for(const fi of m.writingModes)if(fi===l.WritingMode.vertical?($t=dr(),on=$t):$t=pn(),$t&&$t.box&&$t.box.length)break}else $t=pn()};if(v.get("text-variable-anchor")){let pn=v.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ht.crossTileID]){const Bn=this.prevPlacement.variableOffsets[ht.crossTileID];pn.indexOf(Bn.anchor)>0&&(pn=pn.filter(da=>da!==Bn.anchor),pn.unshift(Bn.anchor))}const dr=(Bn,da,pa)=>{const Xa=Bn.x2-Bn.x1,Wl=Bn.y2-Bn.y1,Ih=ht.textBoxScale,rc=Be&&Ie==="never"?da:null;let jo={box:[],offscreen:!1};const ma=ve!=="never"?2*pn.length:pn.length;for(let ga=0;ga<ma;++ga){const Xl=this.attemptAnchorPlacement(pn[ga%pn.length],Bn,Xa,Wl,Ih,Ne,Oe,R,b,he,ga>=pn.length?ve:"never",ht,m,pa,rc);if(Xl&&(jo=Xl.placedGlyphBoxes,jo&&jo.box&&jo.box.length)){mn=!0,Qn=Xl.shift;break}}return jo};wr(()=>dr(Ri,Bt.iconBox,l.WritingMode.horizontal),()=>{const Bn=Bt.verticalTextBox;return m.allowVerticalPlacement&&!($t&&$t.box&&$t.box.length)&&ht.numVerticalGlyphVertices>0&&Bn?dr(Bn,Bt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),$t&&(mn=$t.box,Jt=$t.offscreen);const fi=An($t&&$t.box);if(!mn&&this.prevPlacement){const Bn=this.prevPlacement.variableOffsets[ht.crossTileID];Bn&&(this.variableOffsets[ht.crossTileID]=Bn,this.markUsedJustification(m,Bn.anchor,ht,fi))}}else{const pn=(dr,fi)=>{const Bn=this.collisionIndex.placeCollisionBox(dr,ve,R,b,he.predicate);return Bn&&Bn.box&&Bn.box.length&&(this.markUsedOrientation(m,fi,ht),this.placedOrientations[ht.crossTileID]=fi),Bn};wr(()=>pn(Ri,l.WritingMode.horizontal),()=>{const dr=Bt.verticalTextBox;return m.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&dr?pn(dr,l.WritingMode.vertical):{box:null,offscreen:null}}),An($t&&$t.box&&$t.box.length)}}if(qn=$t,mn=qn&&qn.box&&qn.box.length>0,Jt=qn&&qn.offscreen,ht.useRuntimeCollisionCircles){const An=m.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),wr=l.evaluateSizeForFeature(m.textSizeData,re,An),pn=v.get("text-padding");kr=this.collisionIndex.placeCollisionCircles(ve,An,m.lineVertexArray,m.glyphOffsetArray,wr,b,T,k,h,Oe,he.predicate,ht.collisionCircleDiameter,pn),mn=be||kr.circles.length>0&&!kr.collisionDetected,Jt=Jt&&kr.offscreen}if(Bt.iconFeatureIndex&&(hi=Bt.iconFeatureIndex),Bt.iconBox){const An=wr=>{const pn=Be&&Qn?Q(wr,Qn.x,Qn.y,Ne,Oe,this.transform.angle):wr;return this.collisionIndex.placeCollisionBox(pn,Ie,R,b,he.predicate)};on&&on.box&&on.box.length&&Bt.verticalIconBox?(ui=An(Bt.verticalIconBox),Kt=ui.box.length>0):(ui=An(Bt.iconBox),Kt=ui.box.length>0),Jt=Jt&&ui.offscreen}const $o=oe||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,fa=pe||ht.numIconVertices===0;if($o||fa?fa?$o||(Kt=Kt&&mn):mn=Kt&&mn:Kt=mn=Kt&&mn,mn&&qn&&qn.box&&this.collisionIndex.insertCollisionBox(qn.box,ve,v.get("text-ignore-placement"),m.bucketInstanceId,on&&on.box&&Oi?Oi:ci,he.ID),Kt&&ui&&this.collisionIndex.insertCollisionBox(ui.box,Ie,v.get("icon-ignore-placement"),m.bucketInstanceId,hi,he.ID),kr&&(mn&&this.collisionIndex.insertCollisionCircles(kr.circles,ve,v.get("text-ignore-placement"),m.bucketInstanceId,ci,he.ID),h)){const An=m.bucketInstanceId;let wr=this.collisionCircleArrays[An];wr===void 0&&(wr=this.collisionCircleArrays[An]=new Mo);for(let pn=0;pn<kr.circles.length;pn+=4)wr.circles.push(kr.circles[pn+0]),wr.circles.push(kr.circles[pn+1]),wr.circles.push(kr.circles[pn+2]),wr.circles.push(kr.collisionDetected?1:0)}this.placements[ht.crossTileID]=new ji(mn||tt,Kt||je,Jt||m.justReloaded),s[ht.crossTileID]=!0};if(He){const ht=m.getSortedSymbolIndexes(this.transform.angle);for(let Bt=ht.length-1;Bt>=0;--Bt){const mn=ht[Bt];Tt(m.symbolInstances.get(mn),m.collisionArrays[mn])}}else for(let ht=n.symbolInstanceStart;ht<n.symbolInstanceEnd;ht++)Tt(m.symbolInstances.get(ht),m.collisionArrays[ht]);if(h&&m.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[m.bucketInstanceId];l.invert(ht.invProjMatrix,b),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(n,s,h,m){let v;v=m===l.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(s)];const b=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(n.text.placedSymbolArray.get(T).crossTileID=v>=0&&T!==v?0:h.crossTileID)}markUsedOrientation(n,s,h){const m=s===l.WritingMode.horizontal||s===l.WritingMode.horizontalOnly?s:0,v=s===l.WritingMode.vertical?s:0,b=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const T of b)n.text.placedSymbolArray.get(T).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let h=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const m=s?s.symbolFadeChange(n):1,v=s?s.opacities:{},b=s?s.variableOffsets:{},T=s?s.placedOrientations:{};for(const k in this.placements){const R=this.placements[k],V=v[k];V?(this.opacities[k]=new $i(V,m,R.text,R.icon),h=h||R.text!==V.text.placed||R.icon!==V.icon.placed):(this.opacities[k]=new $i(null,m,R.text,R.icon,R.skipFade),h=h||R.text||R.icon)}for(const k in v){const R=v[k];if(!this.opacities[k]){const V=new $i(R,m,!1,!1);V.isHidden()||(this.opacities[k]=V,h=h||R.text.placed||R.icon.placed)}}for(const k in b)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=b[k]);for(const k in T)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=T[k]);h?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const h={};for(const m of s){const v=m.getBucket(n);v&&m.latestFeatureIndex&&n.id===v.layerIds[0]&&this.updateBucketOpacities(v,h,m.collisionBoxArray)}}updateBucketOpacities(n,s,h){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const m=n.layers[0].layout,v=new $i(null,0,!1,!1,!0),b=m.get("text-allow-overlap"),T=m.get("icon-allow-overlap"),k=m.get("text-variable-anchor"),R=m.get("text-rotation-alignment")==="map",V=m.get("text-pitch-alignment")==="map",X=m.get("icon-text-fit")!=="none",re=new $i(null,0,b&&(T||!n.hasIconData()||m.get("icon-optional")),T&&(b||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&h&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(h);const he=(oe,pe,ve)=>{for(let be=0;be<pe/4;be++)oe.opacityVertexArray.emplaceBack(ve)};for(let oe=0;oe<n.symbolInstances.length;oe++){const pe=n.symbolInstances.get(oe),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:be,crossTileID:Ie}=pe;let Ae=this.opacities[Ie];s[Ie]?Ae=v:Ae||(Ae=re,this.opacities[Ie]=Ae),s[Ie]=!0;const Ne=pe.numIconVertices>0,Oe=this.placedOrientations[pe.crossTileID],Be=Oe===l.WritingMode.vertical,He=Oe===l.WritingMode.horizontal||Oe===l.WritingMode.horizontalOnly;if(ve>0||be>0){const tt=bt(Ae.text);he(n.text,ve,Be?ot:tt),he(n.text,be,He?ot:tt);const je=Ae.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach(Bt=>{Bt>=0&&(n.text.placedSymbolArray.get(Bt).hidden=je||Be?1:0)}),pe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=je||He?1:0);const Tt=this.variableOffsets[pe.crossTileID];Tt&&this.markUsedJustification(n,Tt.anchor,pe,Oe);const ht=this.placedOrientations[pe.crossTileID];ht&&(this.markUsedJustification(n,"left",pe,ht),this.markUsedOrientation(n,ht,pe))}if(Ne){const tt=bt(Ae.icon),je=!(X&&pe.verticalPlacedIconSymbolIndex&&Be);pe.placedIconSymbolIndex>=0&&(he(n.icon,pe.numIconVertices,je?tt:ot),n.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=Ae.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(he(n.icon,pe.numVerticalIconVertices,je?ot:tt),n.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=Ae.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const tt=n.collisionArrays[oe];if(tt){let je=new l.pointGeometry(0,0);if(tt.textBox||tt.verticalTextBox){let ht=!0;if(k){const Bt=this.variableOffsets[Ie];Bt?(je=F(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),R&&je._rotate(V?this.transform.angle:-this.transform.angle)):ht=!1}tt.textBox&&ce(n.textCollisionBox.collisionVertexArray,Ae.text.placed,!ht||Be,je.x,je.y),tt.verticalTextBox&&ce(n.textCollisionBox.collisionVertexArray,Ae.text.placed,!ht||He,je.x,je.y)}const Tt=Boolean(!He&&tt.verticalIconBox);tt.iconBox&&ce(n.iconCollisionBox.collisionVertexArray,Ae.icon.placed,Tt,X?je.x:0,X?je.y:0),tt.verticalIconBox&&ce(n.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!Tt,X?je.x:0,X?je.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){const oe=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=oe.invProjMatrix,n.placementViewportMatrix=oe.viewportMatrix,n.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const h=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*h>n}setStale(){this.stale=!0}}function ce(p,n,s,h,m){p.emplaceBack(n?1:0,s?1:0,h||0,m||0),p.emplaceBack(n?1:0,s?1:0,h||0,m||0),p.emplaceBack(n?1:0,s?1:0,h||0,m||0),p.emplaceBack(n?1:0,s?1:0,h||0,m||0)}const xe=Math.pow(2,25),ye=Math.pow(2,24),_e=Math.pow(2,17),we=Math.pow(2,16),De=Math.pow(2,9),$e=Math.pow(2,8),Re=Math.pow(2,1);function bt(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const n=p.placed?1:0,s=Math.floor(127*p.opacity);return s*xe+n*ye+s*_e+n*we+s*De+n*$e+s*Re+n}const ot=0;class _t{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,h,m,v){const b=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(b,m,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,k)=>T.sortKey-k.sortKey));this._currentPartIndex<b.length;)if(s.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,v())return!0;return!1}}class zt{constructor(n,s,h,m,v,b,T){this.placement=new le(n,v,b,T),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=m,this._done=!1}isDone(){return this._done}continuePlacement(n,s,h){const m=l.exported.now(),v=()=>{const b=l.exported.now()-m;return!this._forceFullPlacement&&b>2};for(;this._currentPlacementIndex>=0;){const b=s[n[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new _t(b)),this._inProgressLayer.continuePlacement(h[b.source],this.placement,this._showCollisionBoxes,b,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const vt=512/l.EXTENT/2;class jt{constructor(n,s,h){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let m=0;m<s.length;m++){const v=s.get(m),b=v.key;this.indexedSymbolInstances[b]||(this.indexedSymbolInstances[b]=[]),this.indexedSymbolInstances[b].push({crossTileID:v.crossTileID,coord:this.getScaledCoordinates(v,n)})}}getScaledCoordinates(n,s){const h=vt/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*l.EXTENT+n.anchorX)*h),y:Math.floor((s.canonical.y*l.EXTENT+n.anchorY)*h)}}findMatches(n,s,h){const m=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let v=0;v<n.length;v++){const b=n.get(v);if(b.crossTileID)continue;const T=this.indexedSymbolInstances[b.key];if(!T)continue;const k=this.getScaledCoordinates(b,s);for(const R of T)if(Math.abs(R.coord.x-k.x)<=m&&Math.abs(R.coord.y-k.y)<=m&&!h[R.crossTileID]){h[R.crossTileID]=!0,b.crossTileID=R.crossTileID;break}}}}class Yt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const h in this.indexes){const m=this.indexes[h],v={};for(const b in m){const T=m[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+s),v[T.tileID.key]=T}this.indexes[h]=v}this.lng=n}addBucket(n,s,h){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let v=0;v<s.symbolInstances.length;v++)s.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const m=this.usedCrossTileIDs[n.overscaledZ];for(const v in this.indexes){const b=this.indexes[v];if(Number(v)>n.overscaledZ)for(const T in b){const k=b[T];k.tileID.isChildOf(n)&&k.findMatches(s.symbolInstances,n,m)}else{const T=b[n.scaledTo(Number(v)).key];T&&T.findMatches(s.symbolInstances,n,m)}}for(let v=0;v<s.symbolInstances.length;v++){const b=s.symbolInstances.get(v);b.crossTileID||(b.crossTileID=h.generate(),m[b.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new jt(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const h in s.indexedSymbolInstances)for(const m of s.indexedSymbolInstances[h])delete this.usedCrossTileIDs[n][m.crossTileID]}removeStaleBuckets(n){let s=!1;for(const h in this.indexes){const m=this.indexes[h];for(const v in m)n[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[v]),delete m[v],s=!0)}return s}}class Wt{constructor(){this.layerIndexes={},this.crossTileIDs=new Yt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,h){let m=this.layerIndexes[n.id];m===void 0&&(m=this.layerIndexes[n.id]=new qt);let v=!1;const b={};m.handleWrapJump(h);for(const T of s){const k=T.getBucket(n);k&&n.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(T.tileID,k,this.crossTileIDs)&&(v=!0),b[k.bucketInstanceId]=!0)}return m.removeStaleBuckets(b)&&(v=!0),v}pruneUnusedLayers(n){const s={};n.forEach(h=>{s[h]=!0});for(const h in this.layerIndexes)s[h]||delete this.layerIndexes[h]}}const zn=(p,n)=>l.emitValidationErrors(p,n&&n.filter(s=>s.identifier!=="source.canvas")),jn=l.pick(Ee,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),kn=l.pick(Ee,["setCenter","setZoom","setBearing","setPitch"]),Gi=function(){const p={},n=l.spec.$version;for(const s in l.spec.$root){const h=l.spec.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(p[s]=m)}}return p}();class xi extends l.Evented{constructor(n,s={}){super(),this.map=n,this.dispatcher=new dt(O(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new Ce(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new ft(256,512),this.crossTileSymbolIndex=new Wt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const h=this;this._rtlTextPluginCallback=xi.registerForPluginStateChange(m=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(v,b)=>{if(l.triggerPluginCompletionEvent(v),b&&b.every(T=>T))for(const T in h.sourceCaches)h.sourceCaches[T].reload()})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const v=this.sourceCaches[m.sourceId];if(!v)return;const b=v.getSource();if(b&&b.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===b.id&&this._validateLayer(k)}})}loadURL(n,s={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const h=typeof s.validate!="boolean"||s.validate,m=this.map._requestManager.transformRequest(n,l.ResourceType.Style);this._request=l.getJSON(m,(v,b)=>{this._request=null,v?this.fire(new l.ErrorEvent(v)):b&&this._load(b,h)})}loadJSON(n,s={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(n,s.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Gi,!1)}_load(n,s){if(s&&zn(this,l.validateStyle(n)))return;this._loaded=!0,this.stylesheet=n;for(const m in n.sources)this.addSource(m,n.sources[m],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);const h=ue(this.stylesheet.layers);this._order=h.map(m=>m.id),this._layers={},this._serializedLayers={};for(let m of h)m=l.createStyleLayer(m),m.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=m,this._serializedLayers[m.id]=m.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new rt(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(n){this._spriteRequest=function(s,h,m,v){let b,T,k;const R=m>1?"@2x":"";let V=l.getJSON(h.transformRequest(h.normalizeSpriteURL(s,R,".json"),l.ResourceType.SpriteJSON),(he,oe)=>{V=null,k||(k=he,b=oe,re())}),X=l.getImage(h.transformRequest(h.normalizeSpriteURL(s,R,".png"),l.ResourceType.SpriteImage),(he,oe)=>{X=null,k||(k=he,T=oe,re())});function re(){if(k)v(k);else if(b&&T){const he=l.exported.getImageData(T),oe={};for(const pe in b){const{width:ve,height:be,x:Ie,y:Ae,sdf:Ne,pixelRatio:Oe,stretchX:Be,stretchY:He,content:tt}=b[pe],je=new l.RGBAImage({width:ve,height:be});l.RGBAImage.copy(he,je,{x:Ie,y:Ae},{x:0,y:0},{width:ve,height:be}),oe[pe]={data:je,pixelRatio:Oe,sdf:Ne,stretchX:Be,stretchY:He,content:tt}}v(null,oe)}}return{cancel(){V&&(V.cancel(),V=null),X&&(X.cancel(),X=null)}}}(n,this.map._requestManager,this.map.getPixelRatio(),(s,h)=>{if(this._spriteRequest=null,s)this.fire(new l.ErrorEvent(s));else if(h)for(const m in h)this.imageManager.addImage(m,h[m]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const h=n.sourceLayer;if(!h)return;const m=s.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const s=[];for(const h of n){const m=this._layers[h];m.type!=="custom"&&s.push(m.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const b in this._updatedSources){const T=this._updatedSources[b];T==="reload"?this._reloadSource(b):T==="clear"&&this._clearSource(b)}this._updateTilesForChangedImages();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];h[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(n,this._availableImages),!v.isHidden(n.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in h){const v=this.sourceCaches[m];h[m]!==v.used&&v.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),zn(this,l.validateStyle(n)))return!1;(n=l.clone$1(n)).layers=ue(n.layers);const s=function(m,v){if(!m)return[{command:Ee.setStyle,args:[v]}];let b=[];try{if(!C(m.version,v.version))return[{command:Ee.setStyle,args:[v]}];C(m.center,v.center)||b.push({command:Ee.setCenter,args:[v.center]}),C(m.zoom,v.zoom)||b.push({command:Ee.setZoom,args:[v.zoom]}),C(m.bearing,v.bearing)||b.push({command:Ee.setBearing,args:[v.bearing]}),C(m.pitch,v.pitch)||b.push({command:Ee.setPitch,args:[v.pitch]}),C(m.sprite,v.sprite)||b.push({command:Ee.setSprite,args:[v.sprite]}),C(m.glyphs,v.glyphs)||b.push({command:Ee.setGlyphs,args:[v.glyphs]}),C(m.transition,v.transition)||b.push({command:Ee.setTransition,args:[v.transition]}),C(m.light,v.light)||b.push({command:Ee.setLight,args:[v.light]});const T={},k=[];(function(V,X,re,he){let oe;for(oe in X=X||{},V=V||{})Object.prototype.hasOwnProperty.call(V,oe)&&(Object.prototype.hasOwnProperty.call(X,oe)||Xe(oe,re,he));for(oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(Object.prototype.hasOwnProperty.call(V,oe)?C(V[oe],X[oe])||(V[oe].type==="geojson"&&X[oe].type==="geojson"&&ke(V,X,oe)?re.push({command:Ee.setGeoJSONSourceData,args:[oe,X[oe].data]}):Dt(oe,X,re,he)):qe(oe,X,re))})(m.sources,v.sources,k,T);const R=[];m.layers&&m.layers.forEach(V=>{T[V.source]?b.push({command:Ee.removeLayer,args:[V.id]}):R.push(V)}),b=b.concat(k),function(V,X,re){X=X||[];const he=(V=V||[]).map(wn),oe=X.map(wn),pe=V.reduce(en,{}),ve=X.reduce(en,{}),be=he.slice(),Ie=Object.create(null);let Ae,Ne,Oe,Be,He,tt,je;for(Ae=0,Ne=0;Ae<he.length;Ae++)Oe=he[Ae],Object.prototype.hasOwnProperty.call(ve,Oe)?Ne++:(re.push({command:Ee.removeLayer,args:[Oe]}),be.splice(be.indexOf(Oe,Ne),1));for(Ae=0,Ne=0;Ae<oe.length;Ae++)Oe=oe[oe.length-1-Ae],be[be.length-1-Ae]!==Oe&&(Object.prototype.hasOwnProperty.call(pe,Oe)?(re.push({command:Ee.removeLayer,args:[Oe]}),be.splice(be.lastIndexOf(Oe,be.length-Ne),1)):Ne++,tt=be[be.length-Ae],re.push({command:Ee.addLayer,args:[ve[Oe],tt]}),be.splice(be.length-Ae,0,Oe),Ie[Oe]=!0);for(Ae=0;Ae<oe.length;Ae++)if(Oe=oe[Ae],Be=pe[Oe],He=ve[Oe],!Ie[Oe]&&!C(Be,He))if(C(Be.source,He.source)&&C(Be["source-layer"],He["source-layer"])&&C(Be.type,He.type)){for(je in Ge(Be.layout,He.layout,re,Oe,null,Ee.setLayoutProperty),Ge(Be.paint,He.paint,re,Oe,null,Ee.setPaintProperty),C(Be.filter,He.filter)||re.push({command:Ee.setFilter,args:[Oe,He.filter]}),C(Be.minzoom,He.minzoom)&&C(Be.maxzoom,He.maxzoom)||re.push({command:Ee.setLayerZoomRange,args:[Oe,He.minzoom,He.maxzoom]}),Be)Object.prototype.hasOwnProperty.call(Be,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?Ge(Be[je],He[je],re,Oe,je.slice(6),Ee.setPaintProperty):C(Be[je],He[je])||re.push({command:Ee.setLayerProperty,args:[Oe,je,He[je]]}));for(je in He)Object.prototype.hasOwnProperty.call(He,je)&&!Object.prototype.hasOwnProperty.call(Be,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?Ge(Be[je],He[je],re,Oe,je.slice(6),Ee.setPaintProperty):C(Be[je],He[je])||re.push({command:Ee.setLayerProperty,args:[Oe,je,He[je]]}))}else re.push({command:Ee.removeLayer,args:[Oe]}),tt=be[be.lastIndexOf(Oe)+1],re.push({command:Ee.addLayer,args:[He,tt]})}(R,v.layers,b)}catch(T){console.warn("Unable to compute style diff:",T),b=[{command:Ee.setStyle,args:[v]}]}return b}(this.serialize(),n).filter(m=>!(m.command in kn));if(s.length===0)return!1;const h=s.filter(m=>!(m.command in jn));if(h.length>0)throw new Error(`Unimplemented: ${h.map(m=>m.command).join(", ")}.`);return s.forEach(m=>{m.command!=="setTransition"&&this[m.command].apply(this,m.args)}),this.stylesheet=n,!0}addImage(n,s){if(this.getImage(n))return this.fire(new l.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new l.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,h={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(l.validateStyle.source,`sources.${n}`,s,null,h))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const m=this.sourceCaches[n]=new rr(n,s,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:m.serialize(),sourceId:n})),m.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===n)return this.fire(new l.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${h}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.clearTiles(),s.onRemove&&s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){this._checkLoaded(),this.sourceCaches[n].getSource().setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,h={}){this._checkLoaded();const m=n.id;if(this.getLayer(m))return void this.fire(new l.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let v;if(n.type==="custom"){if(zn(this,l.validateCustomStyleLayer(n)))return;v=l.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(m,n.source),n=l.clone$1(n),n=l.extend(n,{source:m})),this._validate(l.validateStyle.layer,`layers.${m}`,n,{arrayIndex:-1},h))return;v=l.createStyleLayer(n),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}}),this._serializedLayers[v.id]=v.serialize()}const b=s?this._order.indexOf(s):this._order.length;if(s&&b===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${s}".`)));else{if(this._order.splice(b,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const T=this._removedLayers[m];delete this._removedLayers[m],T.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new l.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const h=this._order.indexOf(n);this._order.splice(h,1);const m=s?this._order.indexOf(s):this._order.length;s&&m===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(m,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const h=this._order.indexOf(n);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,h){this._checkLoaded();const m=this.getLayer(n);m?m.minzoom===s&&m.maxzoom===h||(s!=null&&(m.minzoom=s),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,h={}){this._checkLoaded();const m=this.getLayer(n);if(m){if(!C(m.filter,s))return s==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.validateStyle.filter,`layers.${m.id}.filter`,s,null,h)||(m.filter=l.clone$1(s),this._updateLayer(m)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return l.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,s,h,m={}){this._checkLoaded();const v=this.getLayer(n);v?C(v.getLayoutProperty(s),h)||(v.setLayoutProperty(s,h,m),this._updateLayer(v)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const h=this.getLayer(n);if(h)return h.getLayoutProperty(s);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,h,m={}){this._checkLoaded();const v=this.getLayer(n);v?C(v.getPaintProperty(s),h)||(v.setPaintProperty(s,h,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const h=n.source,m=n.sourceLayer,v=this.sourceCaches[h];if(v===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const b=v.getSource().type;b==="geojson"&&m?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||m?(n.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,n.id,s)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const h=n.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const v=m.getSource().type,b=v==="vector"?n.sourceLayer:void 0;v!=="vector"||b?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(b,n.id,s):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,h=n.sourceLayer,m=this.sourceCaches[s];if(m!==void 0)return m.getSource().type!=="vector"||h?(n.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,n.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,n=>n.serialize()),layers:this._serializeLayers(this._order)},n=>n!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=b=>this._layers[b].type==="fill-extrusion",h={},m=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T)){h[T]=b;for(const k of n){const R=k[T];if(R)for(const V of R)m.push(V)}}}m.sort((b,T)=>T.intersectionZ-b.intersectionZ);const v=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T))for(let k=m.length-1;k>=0;k--){const R=m[k].feature;if(h[R.layer.id]<b)break;v.push(R),m.pop()}else for(const k of n){const R=k[T];if(R)for(const V of R)v.push(V.feature)}}return v}queryRenderedFeatures(n,s,h){s&&s.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);const m={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const b of s.layers){const T=this._layers[b];if(!T)return this.fire(new l.ErrorEvent(new Error(`The layer '${b}' does not exist in the map's style and cannot be queried for features.`))),[];m[T.source]=!0}}const v=[];s.availableImages=this._availableImages;for(const b in this.sourceCaches)s.layers&&!m[b]||v.push(xn(this.sourceCaches[b],this._layers,this._serializedLayers,n,s,h));return this.placement&&v.push(function(b,T,k,R,V,X,re){const he={},oe=X.queryRenderedSymbols(R),pe=[];for(const ve of Object.keys(oe).map(Number))pe.push(re[ve]);pe.sort(Tn);for(const ve of pe){const be=ve.featureIndex.lookupSymbolFeatures(oe[ve.bucketInstanceId],T,ve.bucketIndex,ve.sourceLayerIndex,V.filter,V.layers,V.availableImages,b);for(const Ie in be){const Ae=he[Ie]=he[Ie]||[],Ne=be[Ie];Ne.sort((Oe,Be)=>{const He=ve.featureSortOrder;if(He){const tt=He.indexOf(Oe.featureIndex);return He.indexOf(Be.featureIndex)-tt}return Be.featureIndex-Oe.featureIndex});for(const Oe of Ne)Ae.push(Oe)}}for(const ve in he)he[ve].forEach(be=>{const Ie=be.feature,Ae=k[b[ve].source].getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Ae});return he}(this._layers,this._serializedLayers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(n,s){s&&s.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);const h=this.sourceCaches[n];return h?function(m,v){const b=m.getRenderableIds().map(R=>m.getTileByID(R)),T=[],k={};for(let R=0;R<b.length;R++){const V=b[R],X=V.tileID.canonical.key;k[X]||(k[X]=!0,V.querySourceFeatures(T,v))}return T}(h,s):[]}addSourceType(n,s,h){return xi.getSourceType(n)?h(new Error(`A source type called "${n}" already exists.`)):(xi.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const b in n)if(!C(n[b],h[b])){m=!0;break}if(!m)return;const v={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(v)}_validate(n,s,h,m,v={}){return(!v||v.validate!==!1)&&zn(this,n.call(l.validateStyle,l.extend({key:s,style:this.serialize(),value:h,styleSpec:l.spec},m)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,h,m,v=!1){let b=!1,T=!1;const k={};for(const R of this._order){const V=this._layers[R];if(V.type!=="symbol")continue;if(!k[V.source]){const re=this.sourceCaches[V.source];k[V.source]=re.getRenderableIds(!0).map(he=>re.getTileByID(he)).sort((he,oe)=>oe.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(oe.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(V,k[V.source],n.center.lng);b=b||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),n.zoom))&&(this.pauseablePlacement=new zt(n,this._order,v,s,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const R of this._order){const V=this._layers[R];V.type==="symbol"&&this.placement.updateLayerOpacities(V,k[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s,h){this.imageManager.getImages(s.icons,h),this._updateTilesForChangedImages();const m=this.sourceCaches[s.source];m&&m.setDependencies(s.tileID.key,s.type,s.icons)}getGlyphs(n,s,h){this.glyphManager.getGlyphs(s.stacks,h)}getResource(n,s,h){return l.makeRequest(s,h)}}xi.getSourceType=function(p){return yn[p]},xi.setSourceType=function(p,n){yn[p]=n},xi.registerForPluginStateChange=l.registerForPluginStateChange;var Ts=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ea={prelude:In(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:In(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:In(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:In(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:In("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:In(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:In(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:In("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:In("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:In("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:In(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:In(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:In(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:In(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:In(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:In(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:In(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:In(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:In(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:In(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:In(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:In(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:In(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:In(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:In(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:In(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function In(p,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=n.match(/attribute ([\w]+) ([\w]+)/g),m=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=v?v.concat(m):m,T={};return{fragmentSource:p=p.replace(s,(k,R,V,X,re)=>(T[re]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${re}
varying ${V} ${X} ${re};
#else
uniform ${V} ${X} u_${re};
#endif
`:`
#ifdef HAS_UNIFORM_u_${re}
    ${V} ${X} ${re} = u_${re};
#endif
`)),vertexSource:n=n.replace(s,(k,R,V,X,re)=>{const he=X==="float"?"vec2":"vec4",oe=re.match(/color/)?"color":he;return T[re]?R==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
attribute ${V} ${he} a_${re};
varying ${V} ${X} ${re};
#else
uniform ${V} ${X} u_${re};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = a_${re};
#else
    ${V} ${X} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = unpack_mix_${oe}(a_${re}, u_${re}_t);
#else
    ${V} ${X} ${re} = u_${re};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
attribute ${V} ${he} a_${re};
#else
uniform ${V} ${X} u_${re};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${V} ${X} ${re} = a_${re};
#else
    ${V} ${X} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${V} ${X} ${re} = unpack_mix_${oe}(a_${re}, u_${re}_t);
#else
    ${V} ${X} ${re} = u_${re};
#endif
`}),staticAttributes:h,staticUniforms:b}}class wi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,h,m,v,b,T,k){this.context=n;let R=this.boundPaintVertexBuffers.length!==m.length;for(let V=0;!R&&V<m.length;V++)this.boundPaintVertexBuffers[V]!==m[V]&&(R=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===h&&!R&&this.boundIndexBuffer===v&&this.boundVertexOffset===b&&this.boundDynamicVertexBuffer===T&&this.boundDynamicVertexBuffer2===k?(n.bindVertexArrayOES.set(this.vao),T&&T.bind(),v&&v.dynamicDraw&&v.bind(),k&&k.bind()):this.freshBind(s,h,m,v,b,T,k)}freshBind(n,s,h,m,v,b,T){let k;const R=n.numAttributes,V=this.context,X=V.gl;if(V.extVertexArrayObject)this.vao&&this.destroy(),this.vao=V.extVertexArrayObject.createVertexArrayOES(),V.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T;else{k=V.currentNumAttributes||0;for(let re=R;re<k;re++)X.disableVertexAttribArray(re)}s.enableAttributes(X,n);for(const re of h)re.enableAttributes(X,n);b&&b.enableAttributes(X,n),T&&T.enableAttributes(X,n),s.bind(),s.setVertexAttribPointers(X,n,v);for(const re of h)re.bind(),re.setVertexAttribPointers(X,n,v);b&&(b.bind(),b.setVertexAttribPointers(X,n,v)),m&&m.bind(),T&&(T.bind(),T.setVertexAttribPointers(X,n,v)),V.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Tl(p){const n=[];for(let s=0;s<p.length;s++){if(p[s]===null)continue;const h=p[s].split(" ");n.push(h.pop())}return n}class Al{constructor(n,s,h,m,v,b){const T=n.gl;this.program=T.createProgram();const k=Tl(h.staticAttributes),R=m?m.getBinderAttributes():[],V=k.concat(R),X=h.staticUniforms?Tl(h.staticUniforms):[],re=m?m.getBinderUniforms():[],he=X.concat(re),oe=[];for(const Oe of he)oe.indexOf(Oe)<0&&oe.push(Oe);const pe=m?m.defines():[];b&&pe.push("#define OVERDRAW_INSPECTOR;");const ve=pe.concat(ea.prelude.fragmentSource,h.fragmentSource).join(`
`),be=pe.concat(ea.prelude.vertexSource,h.vertexSource).join(`
`),Ie=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(Ie,ve),T.compileShader(Ie),T.attachShader(this.program,Ie);const Ae=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(Ae,be),T.compileShader(Ae),T.attachShader(this.program,Ae),this.attributes={};const Ne={};this.numAttributes=V.length;for(let Oe=0;Oe<this.numAttributes;Oe++)V[Oe]&&(T.bindAttribLocation(this.program,Oe,V[Oe]),this.attributes[V[Oe]]=Oe);T.linkProgram(this.program),T.deleteShader(Ae),T.deleteShader(Ie);for(let Oe=0;Oe<oe.length;Oe++){const Be=oe[Oe];if(Be&&!Ne[Be]){const He=T.getUniformLocation(this.program,Be);He&&(Ne[Be]=He)}}this.fixedUniforms=v(n,Ne),this.binderUniforms=m?m.getUniforms(n,Ne):[]}draw(n,s,h,m,v,b,T,k,R,V,X,re,he,oe,pe,ve){const be=n.gl;if(this.failedToCreate)return;n.program.set(this.program),n.setDepthMode(h),n.setStencilMode(m),n.setColorMode(v),n.setCullFace(b);for(const Ae in this.fixedUniforms)this.fixedUniforms[Ae].set(T[Ae]);oe&&oe.setUniforms(n,this.binderUniforms,re,{zoom:he});const Ie={[be.LINES]:2,[be.TRIANGLES]:3,[be.LINE_STRIP]:1}[s];for(const Ae of X.get()){const Ne=Ae.vaos||(Ae.vaos={});(Ne[k]||(Ne[k]=new wi)).bind(n,this,R,oe?oe.getPaintVertexBuffers():[],V,Ae.vertexOffset,pe,ve),be.drawElements(s,Ae.primitiveLength*Ie,be.UNSIGNED_SHORT,Ae.primitiveOffset*Ie*2)}}}function Cl(p,n,s){const h=1/$n(s,1,n.transform.tileZoom),m=Math.pow(2,s.tileID.overscaledZ),v=s.tileSize*Math.pow(2,n.transform.tileZoom)/m,b=v*(s.tileID.canonical.x+s.tileID.wrap*m),T=v*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[h,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const La=(p,n,s,h)=>{const m=n.style.light,v=m.properties.get("position"),b=j(v.x,v.y,v.z),T=function(){var R=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();m.properties.get("anchor")==="viewport"&&function(R,V){var X=Math.sin(V),re=Math.cos(V);R[0]=re,R[1]=X,R[2]=0,R[3]=-X,R[4]=re,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(T,-n.transform.angle),function(R,V,X){var re=V[0],he=V[1],oe=V[2];R[0]=re*X[0]+he*X[3]+oe*X[6],R[1]=re*X[1]+he*X[4]+oe*X[7],R[2]=re*X[2]+he*X[5]+oe*X[8]}(b,b,T);const k=m.properties.get("color");return{u_matrix:p,u_lightpos:b,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+s,u_opacity:h}},kl=(p,n,s,h,m,v,b)=>l.extend(La(p,n,s,h),Cl(v,n,b),{u_height_factor:-Math.pow(2,m.overscaledZ)/b.tileSize/8}),zo=p=>({u_matrix:p}),As=(p,n,s,h)=>l.extend(zo(p),Cl(s,n,h)),Il=(p,n)=>({u_matrix:p,u_world:n}),vr=(p,n,s,h,m)=>l.extend(As(p,n,s,h),{u_world:m}),Oa=(p,n,s,h)=>{const m=p.transform;let v,b;if(h.paint.get("circle-pitch-alignment")==="map"){const T=$n(s,1,m.zoom);v=!0,b=[T,T]}else v=!1,b=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(n.posMatrix,s,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:b}},ta=(p,n,s)=>{const h=$n(s,1,n.zoom),m=Math.pow(2,n.zoom-s.tileID.overscaledZ),v=s.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[n.pixelsToGLUnits[0]/(h*m),n.pixelsToGLUnits[1]/(h*m)],u_overscale_factor:v}},na=(p,n,s=1)=>({u_matrix:p,u_color:n,u_overlay:0,u_overlay_scale:s}),ra=p=>({u_matrix:p}),Ra=(p,n,s,h)=>({u_matrix:p,u_extrude_scale:$n(n,1,s),u_intensity:h});function Da(p,n){const s=Math.pow(2,n.canonical.z),h=n.canonical.y;return[new l.MercatorCoordinate(0,h/s).toLngLat().lat,new l.MercatorCoordinate(0,(h+1)/s).toLngLat().lat]}const Zi=(p,n,s)=>{const h=p.transform;return{u_matrix:Cs(p,n,s),u_ratio:1/$n(n,1,h.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Lo=(p,n,s,h)=>l.extend(Zi(p,n,s),{u_image:0,u_image_height:h}),On=(p,n,s,h)=>{const m=p.transform,v=qi(n,m);return{u_matrix:Cs(p,n,s),u_texsize:n.imageAtlasTexture.size,u_ratio:1/$n(n,1,m.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[v,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Fa=(p,n,s,h,m)=>{const v=p.lineAtlas,b=qi(n,p.transform),T=s.layout.get("line-cap")==="round",k=v.getDash(h.from,T),R=v.getDash(h.to,T),V=k.width*m.fromScale,X=R.width*m.toScale;return l.extend(Zi(p,n,s),{u_patternscale_a:[b/V,-k.height/2],u_patternscale_b:[b/X,-R.height/2],u_sdfgamma:v.width/(256*Math.min(V,X)*p.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:R.y,u_mix:m.t})};function qi(p,n){return 1/$n(p,1,n.tileZoom)}function Cs(p,n,s){return p.translatePosMatrix(n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const Pl=(p,n,s,h,m)=>{return{u_matrix:p,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(b=m.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:ks(m.paint.get("raster-hue-rotate"))};var v,b};function ks(p){p*=Math.PI/180;const n=Math.sin(p),s=Math.cos(p);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const Is=(p,n,s,h,m,v,b,T,k,R)=>{const V=m.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:V.cameraToCenterDistance,u_pitch:V.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:V.width/V.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:b,u_coord_matrix:T,u_is_text:+k,u_pitch_with_map:+h,u_texsize:R,u_texture:0}},Ps=(p,n,s,h,m,v,b,T,k,R,V)=>{const X=m.transform;return l.extend(Is(p,n,s,h,m,v,b,T,k,R),{u_gamma_scale:h?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+V})},Gu=(p,n,s,h,m,v,b,T,k,R)=>l.extend(Ps(p,n,s,h,m,v,b,T,!0,k,!0),{u_texsize_icon:R,u_texture_icon:1}),Ms=(p,n,s)=>({u_matrix:p,u_opacity:n,u_color:s}),zs=(p,n,s,h,m,v)=>l.extend(function(b,T,k,R){const V=k.imageManager.getPattern(b.from.toString()),X=k.imageManager.getPattern(b.to.toString()),{width:re,height:he}=k.imageManager.getPixelSize(),oe=Math.pow(2,R.tileID.overscaledZ),pe=R.tileSize*Math.pow(2,k.transform.tileZoom)/oe,ve=pe*(R.tileID.canonical.x+R.tileID.wrap*oe),be=pe*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[re,he],u_mix:T.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/$n(R,1,k.transform.tileZoom),u_pixel_coord_upper:[ve>>16,be>>16],u_pixel_coord_lower:[65535&ve,65535&be]}}(h,v,s,m),{u_matrix:p,u_opacity:n}),ia={fillExtrusion:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_lightpos:new l.Uniform3f(p,n.u_lightpos),u_lightintensity:new l.Uniform1f(p,n.u_lightintensity),u_lightcolor:new l.Uniform3f(p,n.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,n.u_vertical_gradient),u_opacity:new l.Uniform1f(p,n.u_opacity)}),fillExtrusionPattern:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_lightpos:new l.Uniform3f(p,n.u_lightpos),u_lightintensity:new l.Uniform1f(p,n.u_lightintensity),u_lightcolor:new l.Uniform3f(p,n.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,n.u_vertical_gradient),u_height_factor:new l.Uniform1f(p,n.u_height_factor),u_image:new l.Uniform1i(p,n.u_image),u_texsize:new l.Uniform2f(p,n.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,n.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,n.u_scale),u_fade:new l.Uniform1f(p,n.u_fade),u_opacity:new l.Uniform1f(p,n.u_opacity)}),fill:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix)}),fillPattern:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_image:new l.Uniform1i(p,n.u_image),u_texsize:new l.Uniform2f(p,n.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,n.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,n.u_scale),u_fade:new l.Uniform1f(p,n.u_fade)}),fillOutline:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_world:new l.Uniform2f(p,n.u_world)}),fillOutlinePattern:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_world:new l.Uniform2f(p,n.u_world),u_image:new l.Uniform1i(p,n.u_image),u_texsize:new l.Uniform2f(p,n.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,n.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,n.u_scale),u_fade:new l.Uniform1f(p,n.u_fade)}),circle:(p,n)=>({u_camera_to_center_distance:new l.Uniform1f(p,n.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(p,n.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(p,n.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(p,n.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(p,n.u_matrix)}),collisionBox:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_camera_to_center_distance:new l.Uniform1f(p,n.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(p,n.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(p,n.u_extrude_scale),u_overscale_factor:new l.Uniform1f(p,n.u_overscale_factor)}),collisionCircle:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_inv_matrix:new l.UniformMatrix4f(p,n.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(p,n.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(p,n.u_viewport_size)}),debug:(p,n)=>({u_color:new l.UniformColor(p,n.u_color),u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_overlay:new l.Uniform1i(p,n.u_overlay),u_overlay_scale:new l.Uniform1f(p,n.u_overlay_scale)}),clippingMask:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix)}),heatmap:(p,n)=>({u_extrude_scale:new l.Uniform1f(p,n.u_extrude_scale),u_intensity:new l.Uniform1f(p,n.u_intensity),u_matrix:new l.UniformMatrix4f(p,n.u_matrix)}),heatmapTexture:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_world:new l.Uniform2f(p,n.u_world),u_image:new l.Uniform1i(p,n.u_image),u_color_ramp:new l.Uniform1i(p,n.u_color_ramp),u_opacity:new l.Uniform1f(p,n.u_opacity)}),hillshade:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_image:new l.Uniform1i(p,n.u_image),u_latrange:new l.Uniform2f(p,n.u_latrange),u_light:new l.Uniform2f(p,n.u_light),u_shadow:new l.UniformColor(p,n.u_shadow),u_highlight:new l.UniformColor(p,n.u_highlight),u_accent:new l.UniformColor(p,n.u_accent)}),hillshadePrepare:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_image:new l.Uniform1i(p,n.u_image),u_dimension:new l.Uniform2f(p,n.u_dimension),u_zoom:new l.Uniform1f(p,n.u_zoom),u_unpack:new l.Uniform4f(p,n.u_unpack)}),line:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_ratio:new l.Uniform1f(p,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,n.u_units_to_pixels)}),lineGradient:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_ratio:new l.Uniform1f(p,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,n.u_units_to_pixels),u_image:new l.Uniform1i(p,n.u_image),u_image_height:new l.Uniform1f(p,n.u_image_height)}),linePattern:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_texsize:new l.Uniform2f(p,n.u_texsize),u_ratio:new l.Uniform1f(p,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_image:new l.Uniform1i(p,n.u_image),u_units_to_pixels:new l.Uniform2f(p,n.u_units_to_pixels),u_scale:new l.Uniform3f(p,n.u_scale),u_fade:new l.Uniform1f(p,n.u_fade)}),lineSDF:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_ratio:new l.Uniform1f(p,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,n.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(p,n.u_patternscale_a),u_patternscale_b:new l.Uniform2f(p,n.u_patternscale_b),u_sdfgamma:new l.Uniform1f(p,n.u_sdfgamma),u_image:new l.Uniform1i(p,n.u_image),u_tex_y_a:new l.Uniform1f(p,n.u_tex_y_a),u_tex_y_b:new l.Uniform1f(p,n.u_tex_y_b),u_mix:new l.Uniform1f(p,n.u_mix)}),raster:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_tl_parent:new l.Uniform2f(p,n.u_tl_parent),u_scale_parent:new l.Uniform1f(p,n.u_scale_parent),u_buffer_scale:new l.Uniform1f(p,n.u_buffer_scale),u_fade_t:new l.Uniform1f(p,n.u_fade_t),u_opacity:new l.Uniform1f(p,n.u_opacity),u_image0:new l.Uniform1i(p,n.u_image0),u_image1:new l.Uniform1i(p,n.u_image1),u_brightness_low:new l.Uniform1f(p,n.u_brightness_low),u_brightness_high:new l.Uniform1f(p,n.u_brightness_high),u_saturation_factor:new l.Uniform1f(p,n.u_saturation_factor),u_contrast_factor:new l.Uniform1f(p,n.u_contrast_factor),u_spin_weights:new l.Uniform3f(p,n.u_spin_weights)}),symbolIcon:(p,n)=>({u_is_size_zoom_constant:new l.Uniform1i(p,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,n.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,n.u_size_t),u_size:new l.Uniform1f(p,n.u_size),u_camera_to_center_distance:new l.Uniform1f(p,n.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,n.u_pitch),u_rotate_symbol:new l.Uniform1i(p,n.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,n.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,n.u_fade_change),u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,n.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,n.u_coord_matrix),u_is_text:new l.Uniform1i(p,n.u_is_text),u_pitch_with_map:new l.Uniform1i(p,n.u_pitch_with_map),u_texsize:new l.Uniform2f(p,n.u_texsize),u_texture:new l.Uniform1i(p,n.u_texture)}),symbolSDF:(p,n)=>({u_is_size_zoom_constant:new l.Uniform1i(p,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,n.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,n.u_size_t),u_size:new l.Uniform1f(p,n.u_size),u_camera_to_center_distance:new l.Uniform1f(p,n.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,n.u_pitch),u_rotate_symbol:new l.Uniform1i(p,n.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,n.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,n.u_fade_change),u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,n.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,n.u_coord_matrix),u_is_text:new l.Uniform1i(p,n.u_is_text),u_pitch_with_map:new l.Uniform1i(p,n.u_pitch_with_map),u_texsize:new l.Uniform2f(p,n.u_texsize),u_texture:new l.Uniform1i(p,n.u_texture),u_gamma_scale:new l.Uniform1f(p,n.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,n.u_is_halo)}),symbolTextAndIcon:(p,n)=>({u_is_size_zoom_constant:new l.Uniform1i(p,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,n.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,n.u_size_t),u_size:new l.Uniform1f(p,n.u_size),u_camera_to_center_distance:new l.Uniform1f(p,n.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,n.u_pitch),u_rotate_symbol:new l.Uniform1i(p,n.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,n.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,n.u_fade_change),u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,n.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,n.u_coord_matrix),u_is_text:new l.Uniform1i(p,n.u_is_text),u_pitch_with_map:new l.Uniform1i(p,n.u_pitch_with_map),u_texsize:new l.Uniform2f(p,n.u_texsize),u_texsize_icon:new l.Uniform2f(p,n.u_texsize_icon),u_texture:new l.Uniform1i(p,n.u_texture),u_texture_icon:new l.Uniform1i(p,n.u_texture_icon),u_gamma_scale:new l.Uniform1f(p,n.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,n.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,n.u_is_halo)}),background:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_opacity:new l.Uniform1f(p,n.u_opacity),u_color:new l.UniformColor(p,n.u_color)}),backgroundPattern:(p,n)=>({u_matrix:new l.UniformMatrix4f(p,n.u_matrix),u_opacity:new l.Uniform1f(p,n.u_opacity),u_image:new l.Uniform1i(p,n.u_image),u_pattern_tl_a:new l.Uniform2f(p,n.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(p,n.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(p,n.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(p,n.u_pattern_br_b),u_texsize:new l.Uniform2f(p,n.u_texsize),u_mix:new l.Uniform1f(p,n.u_mix),u_pattern_size_a:new l.Uniform2f(p,n.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(p,n.u_pattern_size_b),u_scale_a:new l.Uniform1f(p,n.u_scale_a),u_scale_b:new l.Uniform1f(p,n.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(p,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,n.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(p,n.u_tile_units_to_pixels)})};class Ls{constructor(n,s,h){this.context=n;const m=n.gl;this.buffer=m.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ml={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zl{constructor(n,s,h,m){this.length=s.length,this.attributes=h,this.itemSize=s.bytesPerElement,this.dynamicDraw=m,this.context=n;const v=n.gl;this.buffer=v.createBuffer(),n.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let h=0;h<this.attributes.length;h++){const m=s.attributes[this.attributes[h].name];m!==void 0&&n.enableVertexAttribArray(m)}}setVertexAttribPointers(n,s,h){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],b=s.attributes[v.name];b!==void 0&&n.vertexAttribPointer(b,v.components,n[Ml[v.type]],!1,this.itemSize,v.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class hn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oo extends hn{getDefault(){return l.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class oa extends hn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Os extends hn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Nr extends hn{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Rs extends hn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class aa extends hn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Ba extends hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Ds extends hn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Fs extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class Na extends hn{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ua extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class Bs extends hn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Ro extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class Ll extends hn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ol extends hn{getDefault(){return l.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Do extends hn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Zu extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class qu extends hn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Wu extends hn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Rl extends hn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Ns extends hn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Xu extends hn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Us extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Vs extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Fo extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class $s extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Dl extends hn{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class js extends hn{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class uo extends hn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Fl extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Pi extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class co extends hn{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class ho extends co{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Va extends co{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class tn{constructor(n,s,h,m){this.context=n,this.width=s,this.height=h;const v=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new ho(n,v),m&&(this.depthAttachment=new Va(n,v))}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const h=this.depthAttachment.get();h&&n.deleteRenderbuffer(h)}n.deleteFramebuffer(this.framebuffer)}}class Gn{constructor(n,s,h){this.blendFunction=n,this.blendColor=s,this.mask=h}}Gn.Replace=[1,0],Gn.disabled=new Gn(Gn.Replace,l.Color.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,l.Color.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Hu{constructor(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Oo(this),this.clearDepth=new oa(this),this.clearStencil=new Os(this),this.colorMask=new Nr(this),this.depthMask=new Rs(this),this.stencilMask=new aa(this),this.stencilFunc=new Ba(this),this.stencilOp=new Ds(this),this.stencilTest=new Fs(this),this.depthRange=new Na(this),this.depthTest=new Ua(this),this.depthFunc=new Bs(this),this.blend=new Ro(this),this.blendFunc=new Ll(this),this.blendColor=new Ol(this),this.blendEquation=new Do(this),this.cullFace=new Zu(this),this.cullFaceSide=new qu(this),this.frontFace=new Wu(this),this.program=new Rl(this),this.activeTexture=new Ns(this),this.viewport=new Xu(this),this.bindFramebuffer=new Us(this),this.bindRenderbuffer=new Vs(this),this.bindTexture=new Fo(this),this.bindVertexBuffer=new $s(this),this.bindElementBuffer=new Dl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new js(this),this.pixelStoreUnpack=new uo(this),this.pixelStoreUnpackPremultiplyAlpha=new Fl(this),this.pixelStoreUnpackFlipY=new Pi(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new Ls(this,n,s)}createVertexBuffer(n,s,h){return new zl(this,n,s,h)}createRenderbuffer(n,s,h){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,n,s,h),this.bindRenderbuffer.set(null),v}createFramebuffer(n,s,h){return new tn(this,n,s,h)}clear({color:n,depth:s}){const h=this.gl;let m=0;n&&(m|=h.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(m|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),h.clear(m)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){C(n.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class fn{constructor(n,s,h){this.func=n,this.mask=s,this.range=h}}fn.ReadOnly=!1,fn.ReadWrite=!0,fn.disabled=new fn(519,fn.ReadOnly,[0,1]);const fo=7680;class Rn{constructor(n,s,h,m,v,b){this.test=n,this.ref=s,this.mask=h,this.fail=m,this.depthFail=v,this.pass=b}}Rn.disabled=new Rn({func:519,mask:0},0,0,fo,fo,fo);class Zn{constructor(n,s,h){this.enable=n,this.mode=s,this.frontFace=h}}let Wi;function Bl(p,n,s,h,m,v,b){const T=p.context,k=T.gl,R=p.useProgram("collisionBox"),V=[];let X=0,re=0;for(let Ae=0;Ae<h.length;Ae++){const Ne=h[Ae],Oe=n.getTile(Ne),Be=Oe.getBucket(s);if(!Be)continue;let He=Ne.posMatrix;m[0]===0&&m[1]===0||(He=p.translatePosMatrix(Ne.posMatrix,Oe,m,v));const tt=b?Be.textCollisionBox:Be.iconCollisionBox,je=Be.collisionCircleArray;if(je.length>0){const Tt=l.create(),ht=He;l.mul(Tt,Be.placementInvProjMatrix,p.transform.glCoordMatrix),l.mul(Tt,Tt,Be.placementViewportMatrix),V.push({circleArray:je,circleOffset:re,transform:ht,invTransform:Tt}),X+=je.length/4,re=X}tt&&R.draw(T,k.LINES,fn.disabled,Rn.disabled,p.colorModeForRenderPass(),Zn.disabled,ta(He,p.transform,Oe),s.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,null,p.transform.zoom,null,null,tt.collisionVertexBuffer)}if(!b||!V.length)return;const he=p.useProgram("collisionCircle"),oe=new l.CollisionCircleLayoutArray;oe.resize(4*X),oe._trim();let pe=0;for(const Ae of V)for(let Ne=0;Ne<Ae.circleArray.length/4;Ne++){const Oe=4*Ne,Be=Ae.circleArray[Oe+0],He=Ae.circleArray[Oe+1],tt=Ae.circleArray[Oe+2],je=Ae.circleArray[Oe+3];oe.emplace(pe++,Be,He,tt,je,0),oe.emplace(pe++,Be,He,tt,je,1),oe.emplace(pe++,Be,He,tt,je,2),oe.emplace(pe++,Be,He,tt,je,3)}(!Wi||Wi.length<2*X)&&(Wi=function(Ae){const Ne=2*Ae,Oe=new l.QuadTriangleArray;Oe.resize(Ne),Oe._trim();for(let Be=0;Be<Ne;Be++){const He=6*Be;Oe.uint16[He+0]=4*Be+0,Oe.uint16[He+1]=4*Be+1,Oe.uint16[He+2]=4*Be+2,Oe.uint16[He+3]=4*Be+2,Oe.uint16[He+4]=4*Be+3,Oe.uint16[He+5]=4*Be+0}return Oe}(X));const ve=T.createIndexBuffer(Wi,!0),be=T.createVertexBuffer(oe,l.collisionCircleLayout.members,!0);for(const Ae of V){const Ne={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(Ie=p.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};he.draw(T,k.TRIANGLES,fn.disabled,Rn.disabled,p.colorModeForRenderPass(),Zn.disabled,Ne,s.id,be,ve,l.SegmentVector.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,p.transform.zoom,null,null,null)}var Ie;be.destroy(),ve.destroy()}Zn.disabled=new Zn(!1,1029,2305),Zn.backCCW=new Zn(!0,1029,2305);const Gs=l.identity(new Float32Array(16));function po(p,n,s,h,m,v){const{horizontalAlign:b,verticalAlign:T}=l.getAnchorAlignment(p),k=-(b-.5)*n,R=-(T-.5)*s,V=l.evaluateVariableOffset(p,h);return new l.pointGeometry((k/m+V[0])*v,(R/m+V[1])*v)}function sa(p,n,s,h,m,v,b,T,k,R,V){const X=p.text.placedSymbolArray,re=p.text.dynamicLayoutVertexArray,he=p.icon.dynamicLayoutVertexArray,oe={};re.clear();for(let pe=0;pe<X.length;pe++){const ve=X.get(pe),be=p.allowVerticalPlacement&&!ve.placedOrientation,Ie=ve.hidden||!ve.crossTileID||be?null:h[ve.crossTileID];if(Ie){const Ae=new l.pointGeometry(ve.anchorX,ve.anchorY),Ne=et(Ae,s?T:b),Oe=Zt(v.cameraToCenterDistance,Ne.signedDistanceFromCamera);let Be=m.evaluateSizeForFeature(p.textSizeData,R,ve)*Oe/l.ONE_EM;s&&(Be*=p.tilePixelRatio/k);const{width:He,height:tt,anchor:je,textOffset:Tt,textBoxScale:ht}=Ie,Bt=po(je,He,tt,Tt,ht,Be),mn=s?et(Ae.add(Bt),b).point:Ne.point.add(n?Bt.rotate(-v.angle):Bt),Kt=p.allowVerticalPlacement&&ve.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Jt=0;Jt<ve.numGlyphs;Jt++)l.addDynamicAttributes(re,mn,Kt);V&&ve.associatedIconIndex>=0&&(oe[ve.associatedIconIndex]={shiftedAnchor:mn,angle:Kt})}else cn(ve.numGlyphs,re)}if(V){he.clear();const pe=p.icon.placedSymbolArray;for(let ve=0;ve<pe.length;ve++){const be=pe.get(ve);if(be.hidden)cn(be.numGlyphs,he);else{const Ie=oe[ve];if(Ie)for(let Ae=0;Ae<be.numGlyphs;Ae++)l.addDynamicAttributes(he,Ie.shiftedAnchor,Ie.angle);else cn(be.numGlyphs,he)}}p.icon.dynamicLayoutVertexBuffer.updateData(he)}p.text.dynamicLayoutVertexBuffer.updateData(re)}function $a(p,n,s){return s.iconsInText&&n?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function ja(p,n,s,h,m,v,b,T,k,R,V,X){const re=p.context,he=re.gl,oe=p.transform,pe=T==="map",ve=k==="map",be=pe&&s.layout.get("symbol-placement")!=="point",Ie=pe&&!ve&&!be,Ae=!s.layout.get("symbol-sort-key").isConstant();let Ne=!1;const Oe=p.depthModeForSublayer(0,fn.ReadOnly),Be=s.layout.get("text-variable-anchor"),He=[];for(const tt of h){const je=n.getTile(tt),Tt=je.getBucket(s);if(!Tt)continue;const ht=m?Tt.text:Tt.icon;if(!ht||!ht.segments.get().length)continue;const Bt=ht.programConfigurations.get(s.id),mn=m||Tt.sdfIcons,Kt=m?Tt.textSizeData:Tt.iconSizeData,Jt=ve||oe.pitch!==0,Qn=p.useProgram($a(mn,m,Tt),Bt),$t=l.evaluateSizeForZoom(Kt,oe.zoom);let on,qn,kr,ui,ci=[0,0],Oi=null;if(m){if(qn=je.glyphAtlasTexture,kr=he.LINEAR,on=je.glyphAtlasTexture.size,Tt.iconsInText){ci=je.imageAtlasTexture.size,Oi=je.imageAtlasTexture;const pa=Kt.kind==="composite"||Kt.kind==="camera";ui=Jt||p.options.rotating||p.options.zooming||pa?he.LINEAR:he.NEAREST}}else{const pa=s.layout.get("icon-size").constantOr(0)!==1||Tt.iconsNeedLinear;qn=je.imageAtlasTexture,kr=mn||p.options.rotating||p.options.zooming||pa||Jt?he.LINEAR:he.NEAREST,on=je.imageAtlasTexture.size}const hi=$n(je,1,p.transform.zoom),Ri=Wr(tt.posMatrix,ve,pe,p.transform,hi),$o=Yn(tt.posMatrix,ve,pe,p.transform,hi),fa=Be&&Tt.hasTextData(),An=s.layout.get("icon-text-fit")!=="none"&&fa&&Tt.hasIconData();be&&Sr(Tt,tt.posMatrix,p,m,Ri,$o,ve,R);const wr=p.translatePosMatrix(tt.posMatrix,je,v,b),pn=be||m&&Be||An?Gs:Ri,dr=p.translatePosMatrix($o,je,v,b,!0),fi=mn&&s.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Bn;Bn=mn?Tt.iconsInText?Gu(Kt.kind,$t,Ie,ve,p,wr,pn,dr,on,ci):Ps(Kt.kind,$t,Ie,ve,p,wr,pn,dr,m,on,!0):Is(Kt.kind,$t,Ie,ve,p,wr,pn,dr,m,on);const da={program:Qn,buffers:ht,uniformValues:Bn,atlasTexture:qn,atlasTextureIcon:Oi,atlasInterpolation:kr,atlasInterpolationIcon:ui,isSDF:mn,hasHalo:fi};if(Ae&&Tt.canOverlap){Ne=!0;const pa=ht.segments.get();for(const Xa of pa)He.push({segments:new l.SegmentVector([Xa]),sortKey:Xa.sortKey,state:da})}else He.push({segments:ht.segments,sortKey:0,state:da})}Ne&&He.sort((tt,je)=>tt.sortKey-je.sortKey);for(const tt of He){const je=tt.state;if(re.activeTexture.set(he.TEXTURE0),je.atlasTexture.bind(je.atlasInterpolation,he.CLAMP_TO_EDGE),je.atlasTextureIcon&&(re.activeTexture.set(he.TEXTURE1),je.atlasTextureIcon&&je.atlasTextureIcon.bind(je.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),je.isSDF){const Tt=je.uniformValues;je.hasHalo&&(Tt.u_is_halo=1,Zs(je.buffers,tt.segments,s,p,je.program,Oe,V,X,Tt)),Tt.u_is_halo=0}Zs(je.buffers,tt.segments,s,p,je.program,Oe,V,X,je.uniformValues)}}function Zs(p,n,s,h,m,v,b,T,k){const R=h.context;m.draw(R,R.gl.TRIANGLES,v,b,T,Zn.disabled,k,s.id,p.layoutVertexBuffer,p.indexBuffer,n,s.paint,h.transform.zoom,p.programConfigurations.get(s.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Xi(p,n,s,h,m,v,b){const T=p.context.gl,k=s.paint.get("fill-pattern"),R=k&&k.constantOr(1),V=s.getCrossfadeParameters();let X,re,he,oe,pe;b?(re=R&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=T.LINES):(re=R?"fillPattern":"fill",X=T.TRIANGLES);for(const ve of h){const be=n.getTile(ve);if(R&&!be.patternsLoaded())continue;const Ie=be.getBucket(s);if(!Ie)continue;const Ae=Ie.programConfigurations.get(s.id),Ne=p.useProgram(re,Ae);R&&(p.context.activeTexture.set(T.TEXTURE0),be.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ae.updatePaintBuffers(V));const Oe=k.constantOr(null);if(Oe&&be.imageAtlas){const He=be.imageAtlas,tt=He.patternPositions[Oe.to.toString()],je=He.patternPositions[Oe.from.toString()];tt&&je&&Ae.setConstantPatternPositions(tt,je)}const Be=p.translatePosMatrix(ve.posMatrix,be,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(b){oe=Ie.indexBuffer2,pe=Ie.segments2;const He=[T.drawingBufferWidth,T.drawingBufferHeight];he=re==="fillOutlinePattern"&&R?vr(Be,p,V,be,He):Il(Be,He)}else oe=Ie.indexBuffer,pe=Ie.segments,he=R?As(Be,p,V,be):zo(Be);Ne.draw(p.context,X,m,p.stencilModeForClipping(ve),v,Zn.disabled,he,s.id,Ie.layoutVertexBuffer,oe,pe,s.paint,p.transform.zoom,Ae)}}function Hr(p,n,s,h,m,v,b){const T=p.context,k=T.gl,R=s.paint.get("fill-extrusion-pattern"),V=R.constantOr(1),X=s.getCrossfadeParameters(),re=s.paint.get("fill-extrusion-opacity");for(const he of h){const oe=n.getTile(he),pe=oe.getBucket(s);if(!pe)continue;const ve=pe.programConfigurations.get(s.id),be=p.useProgram(V?"fillExtrusionPattern":"fillExtrusion",ve);V&&(p.context.activeTexture.set(k.TEXTURE0),oe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ve.updatePaintBuffers(X));const Ie=R.constantOr(null);if(Ie&&oe.imageAtlas){const Be=oe.imageAtlas,He=Be.patternPositions[Ie.to.toString()],tt=Be.patternPositions[Ie.from.toString()];He&&tt&&ve.setConstantPatternPositions(He,tt)}const Ae=p.translatePosMatrix(he.posMatrix,oe,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Ne=s.paint.get("fill-extrusion-vertical-gradient"),Oe=V?kl(Ae,p,Ne,re,he,X,oe):La(Ae,p,Ne,re);be.draw(T,T.gl.TRIANGLES,m,v,b,Zn.backCCW,Oe,s.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,s.paint,p.transform.zoom,ve)}}function oi(p,n,s,h,m,v){const b=p.context,T=b.gl,k=n.fbo;if(!k)return;const R=p.useProgram("hillshade");b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,k.colorAttachment.get());const V=((X,re,he)=>{const oe=he.paint.get("hillshade-shadow-color"),pe=he.paint.get("hillshade-highlight-color"),ve=he.paint.get("hillshade-accent-color");let be=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(be-=X.transform.angle);const Ie=!X.options.moving;return{u_matrix:X.transform.calculatePosMatrix(re.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:Da(0,re.tileID),u_light:[he.paint.get("hillshade-exaggeration"),be],u_shadow:oe,u_highlight:pe,u_accent:ve}})(p,n,s);R.draw(b,T.TRIANGLES,h,m,v,Zn.disabled,V,s.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function qs(p,n,s,h,m,v){const b=p.context,T=b.gl,k=n.dem;if(k&&k.data){const R=k.dim,V=k.stride,X=k.getPixels();if(b.activeTexture.set(T.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||p.getTileTexture(V),n.demTexture){const he=n.demTexture;he.update(X,{premultiply:!1}),he.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else n.demTexture=new J(b,X,T.RGBA,{premultiply:!1}),n.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);b.activeTexture.set(T.TEXTURE0);let re=n.fbo;if(!re){const he=new J(b,{width:R,height:R,data:null},T.RGBA);he.bind(T.LINEAR,T.CLAMP_TO_EDGE),re=n.fbo=b.createFramebuffer(R,R,!0),re.colorAttachment.set(he.texture)}b.bindFramebuffer.set(re.framebuffer),b.viewport.set([0,0,R,R]),p.useProgram("hillshadePrepare").draw(b,T.TRIANGLES,h,m,v,Zn.disabled,((he,oe)=>{const pe=oe.stride,ve=l.create();return l.ortho(ve,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ve,ve,[0,-l.EXTENT,0]),{u_matrix:ve,u_image:1,u_dimension:[pe,pe],u_zoom:he.overscaledZ,u_unpack:oe.getUnpackVector()}})(n.tileID,k),s.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function la(p,n,s,h,m){const v=h.paint.get("raster-fade-duration");if(v>0){const b=l.exported.now(),T=(b-p.timeAdded)/v,k=n?(b-n.timeAdded)/v:-1,R=s.getSource(),V=m.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),X=!n||Math.abs(n.tileID.overscaledZ-V)>Math.abs(p.tileID.overscaledZ-V),re=X&&p.refreshedUponExpiration?1:l.clamp(X?T:1-k,0,1);return p.refreshedUponExpiration&&T>=1&&(p.refreshedUponExpiration=!1),n?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}const Nl=new l.Color(1,0,0,1),ai=new l.Color(0,1,0,1),Mi=new l.Color(0,0,1,1),xr=new l.Color(1,0,1,1),mo=new l.Color(0,1,1,1);function Bo(p,n,s,h){ua(p,0,n+s/2,p.transform.width,s,h)}function Ga(p,n,s,h){ua(p,n-s/2,0,s,p.transform.height,h)}function ua(p,n,s,h,m,v){const b=p.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(n*p.pixelRatio,s*p.pixelRatio,h*p.pixelRatio,m*p.pixelRatio),b.clear({color:v}),T.disable(T.SCISSOR_TEST)}function go(p,n,s){const h=p.context,m=h.gl,v=s.posMatrix,b=p.useProgram("debug"),T=fn.disabled,k=Rn.disabled,R=p.colorModeForRenderPass(),V="$debug";h.activeTexture.set(m.TEXTURE0),p.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),b.draw(h,m.LINE_STRIP,T,k,R,Zn.disabled,na(v,l.Color.red),V,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);const X=n.getTileByID(s.key).latestRawTileData,re=Math.floor((X&&X.byteLength||0)/1024),he=n.getTile(s).tileSize,oe=512/Math.min(he,512)*(s.overscaledZ/p.transform.zoom)*.5;let pe=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(pe+=` => ${s.overscaledZ}`),function(ve,be){ve.initDebugOverlayCanvas();const Ie=ve.debugOverlayCanvas,Ae=ve.context.gl,Ne=ve.debugOverlayCanvas.getContext("2d");Ne.clearRect(0,0,Ie.width,Ie.height),Ne.shadowColor="white",Ne.shadowBlur=2,Ne.lineWidth=1.5,Ne.strokeStyle="white",Ne.textBaseline="top",Ne.font="bold 36px Open Sans, sans-serif",Ne.fillText(be,5,5),Ne.strokeText(be,5,5),ve.debugOverlayTexture.update(Ie),ve.debugOverlayTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}(p,`${pe} ${re}kb`),b.draw(h,m.TRIANGLES,T,k,Gn.alphaBlended,Zn.disabled,na(v,l.Color.transparent,oe),V,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}const yo={symbol:function(p,n,s,h,m){if(p.renderPass!=="translucent")return;const v=Rn.disabled,b=p.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(T,k,R,V,X,re,he){const oe=k.transform,pe=X==="map",ve=re==="map";for(const be of T){const Ie=V.getTile(be),Ae=Ie.getBucket(R);if(!Ae||!Ae.text||!Ae.text.segments.get().length)continue;const Ne=l.evaluateSizeForZoom(Ae.textSizeData,oe.zoom),Oe=$n(Ie,1,k.transform.zoom),Be=Wr(be.posMatrix,ve,pe,k.transform,Oe),He=R.layout.get("icon-text-fit")!=="none"&&Ae.hasIconData();if(Ne){const tt=Math.pow(2,oe.zoom-Ie.tileID.overscaledZ);sa(Ae,pe,ve,he,l.symbolSize,oe,Be,be.posMatrix,tt,Ne,He)}}}(h,p,s,n,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),m),s.paint.get("icon-opacity").constantOr(1)!==0&&ja(p,n,s,h,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),v,b),s.paint.get("text-opacity").constantOr(1)!==0&&ja(p,n,s,h,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),v,b),n.map.showCollisionBoxes&&(Bl(p,n,s,h,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),Bl(p,n,s,h,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))},circle:function(p,n,s,h){if(p.renderPass!=="translucent")return;const m=s.paint.get("circle-opacity"),v=s.paint.get("circle-stroke-width"),b=s.paint.get("circle-stroke-opacity"),T=!s.layout.get("circle-sort-key").isConstant();if(m.constantOr(1)===0&&(v.constantOr(1)===0||b.constantOr(1)===0))return;const k=p.context,R=k.gl,V=p.depthModeForSublayer(0,fn.ReadOnly),X=Rn.disabled,re=p.colorModeForRenderPass(),he=[];for(let oe=0;oe<h.length;oe++){const pe=h[oe],ve=n.getTile(pe),be=ve.getBucket(s);if(!be)continue;const Ie=be.programConfigurations.get(s.id),Ae={programConfiguration:Ie,program:p.useProgram("circle",Ie),layoutVertexBuffer:be.layoutVertexBuffer,indexBuffer:be.indexBuffer,uniformValues:Oa(p,pe,ve,s)};if(T){const Ne=be.segments.get();for(const Oe of Ne)he.push({segments:new l.SegmentVector([Oe]),sortKey:Oe.sortKey,state:Ae})}else he.push({segments:be.segments,sortKey:0,state:Ae})}T&&he.sort((oe,pe)=>oe.sortKey-pe.sortKey);for(const oe of he){const{programConfiguration:pe,program:ve,layoutVertexBuffer:be,indexBuffer:Ie,uniformValues:Ae}=oe.state;ve.draw(k,R.TRIANGLES,V,X,re,Zn.disabled,Ae,s.id,be,Ie,oe.segments,s.paint,p.transform.zoom,pe)}},heatmap:function(p,n,s,h){if(s.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const m=p.context,v=m.gl,b=Rn.disabled,T=new Gn([v.ONE,v.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(k,R,V){const X=k.gl;k.activeTexture.set(X.TEXTURE1),k.viewport.set([0,0,R.width/4,R.height/4]);let re=V.heatmapFbo;if(re)X.bindTexture(X.TEXTURE_2D,re.colorAttachment.get()),k.bindFramebuffer.set(re.framebuffer);else{const he=X.createTexture();X.bindTexture(X.TEXTURE_2D,he),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.LINEAR),re=V.heatmapFbo=k.createFramebuffer(R.width/4,R.height/4,!1),function(oe,pe,ve,be){const Ie=oe.gl;Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,pe.width/4,pe.height/4,0,Ie.RGBA,oe.extRenderToTextureHalfFloat?oe.extTextureHalfFloat.HALF_FLOAT_OES:Ie.UNSIGNED_BYTE,null),be.colorAttachment.set(ve)}(k,R,he,re)}})(m,p,s),m.clear({color:l.Color.transparent});for(let k=0;k<h.length;k++){const R=h[k];if(n.hasRenderableParent(R))continue;const V=n.getTile(R),X=V.getBucket(s);if(!X)continue;const re=X.programConfigurations.get(s.id),he=p.useProgram("heatmap",re),{zoom:oe}=p.transform;he.draw(m,v.TRIANGLES,fn.disabled,b,T,Zn.disabled,Ra(R.posMatrix,V,oe,s.paint.get("heatmap-intensity")),s.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,s.paint,p.transform.zoom,re)}m.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(m,v){const b=m.context,T=b.gl,k=v.heatmapFbo;if(!k)return;b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,k.colorAttachment.get()),b.activeTexture.set(T.TEXTURE1);let R=v.colorRampTexture;R||(R=v.colorRampTexture=new J(b,v.colorRamp,T.RGBA)),R.bind(T.LINEAR,T.CLAMP_TO_EDGE),m.useProgram("heatmapTexture").draw(b,T.TRIANGLES,fn.disabled,Rn.disabled,m.colorModeForRenderPass(),Zn.disabled,((V,X,re,he)=>{const oe=l.create();l.ortho(oe,0,V.width,V.height,0,0,1);const pe=V.context.gl;return{u_matrix:oe,u_world:[pe.drawingBufferWidth,pe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:X.paint.get("heatmap-opacity")}})(m,v),v.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments,v.paint,m.transform.zoom)}(p,s))},line:function(p,n,s,h){if(p.renderPass!=="translucent")return;const m=s.paint.get("line-opacity"),v=s.paint.get("line-width");if(m.constantOr(1)===0||v.constantOr(1)===0)return;const b=p.depthModeForSublayer(0,fn.ReadOnly),T=p.colorModeForRenderPass(),k=s.paint.get("line-dasharray"),R=s.paint.get("line-pattern"),V=R.constantOr(1),X=s.paint.get("line-gradient"),re=s.getCrossfadeParameters(),he=V?"linePattern":k?"lineSDF":X?"lineGradient":"line",oe=p.context,pe=oe.gl;let ve=!0;for(const be of h){const Ie=n.getTile(be);if(V&&!Ie.patternsLoaded())continue;const Ae=Ie.getBucket(s);if(!Ae)continue;const Ne=Ae.programConfigurations.get(s.id),Oe=p.context.program.get(),Be=p.useProgram(he,Ne),He=ve||Be.program!==Oe,tt=R.constantOr(null);if(tt&&Ie.imageAtlas){const Tt=Ie.imageAtlas,ht=Tt.patternPositions[tt.to.toString()],Bt=Tt.patternPositions[tt.from.toString()];ht&&Bt&&Ne.setConstantPatternPositions(ht,Bt)}const je=V?On(p,Ie,s,re):k?Fa(p,Ie,s,k,re):X?Lo(p,Ie,s,Ae.lineClipsArray.length):Zi(p,Ie,s);if(V)oe.activeTexture.set(pe.TEXTURE0),Ie.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ne.updatePaintBuffers(re);else if(k&&(He||p.lineAtlas.dirty))oe.activeTexture.set(pe.TEXTURE0),p.lineAtlas.bind(oe);else if(X){const Tt=Ae.gradients[s.id];let ht=Tt.texture;if(s.gradientVersion!==Tt.version){let Bt=256;if(s.stepInterpolant){const mn=n.getSource().maxzoom,Kt=be.canonical.z===mn?Math.ceil(1<<p.transform.maxZoom-be.canonical.z):1;Bt=l.clamp(l.nextPowerOfTwo(Ae.maxLineLength/l.EXTENT*1024*Kt),256,oe.maxTextureSize)}Tt.gradient=l.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:Bt,image:Tt.gradient||void 0,clips:Ae.lineClipsArray}),Tt.texture?Tt.texture.update(Tt.gradient):Tt.texture=new J(oe,Tt.gradient,pe.RGBA),Tt.version=s.gradientVersion,ht=Tt.texture}oe.activeTexture.set(pe.TEXTURE0),ht.bind(s.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}Be.draw(oe,pe.TRIANGLES,b,p.stencilModeForClipping(be),T,Zn.disabled,je,s.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,s.paint,p.transform.zoom,Ne,Ae.layoutVertexBuffer2),ve=!1}},fill:function(p,n,s,h){const m=s.paint.get("fill-color"),v=s.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const b=p.colorModeForRenderPass(),T=s.paint.get("fill-pattern"),k=p.opaquePassEnabledForLayer()&&!T.constantOr(1)&&m.constantOr(l.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===k){const R=p.depthModeForSublayer(1,p.renderPass==="opaque"?fn.ReadWrite:fn.ReadOnly);Xi(p,n,s,h,R,b,!1)}if(p.renderPass==="translucent"&&s.paint.get("fill-antialias")){const R=p.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,fn.ReadOnly);Xi(p,n,s,h,R,b,!0)}},"fill-extrusion":function(p,n,s,h){const m=s.paint.get("fill-extrusion-opacity");if(m!==0&&p.renderPass==="translucent"){const v=new fn(p.context.gl.LEQUAL,fn.ReadWrite,p.depthRangeFor3D);if(m!==1||s.paint.get("fill-extrusion-pattern").constantOr(1))Hr(p,n,s,h,v,Rn.disabled,Gn.disabled),Hr(p,n,s,h,v,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const b=p.colorModeForRenderPass();Hr(p,n,s,h,v,Rn.disabled,b)}}},hillshade:function(p,n,s,h){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const m=p.context,v=p.depthModeForSublayer(0,fn.ReadOnly),b=p.colorModeForRenderPass(),[T,k]=p.renderPass==="translucent"?p.stencilConfigForOverlap(h):[{},h];for(const R of k){const V=n.getTile(R);V.needsHillshadePrepare&&p.renderPass==="offscreen"?qs(p,V,s,v,Rn.disabled,b):p.renderPass==="translucent"&&oi(p,V,s,v,T[R.overscaledZ],b)}m.viewport.set([0,0,p.width,p.height])},raster:function(p,n,s,h){if(p.renderPass!=="translucent"||s.paint.get("raster-opacity")===0||!h.length)return;const m=p.context,v=m.gl,b=n.getSource(),T=p.useProgram("raster"),k=p.colorModeForRenderPass(),[R,V]=b instanceof xt?[{},h]:p.stencilConfigForOverlap(h),X=V[V.length-1].overscaledZ,re=!p.options.moving;for(const he of V){const oe=p.depthModeForSublayer(he.overscaledZ-X,s.paint.get("raster-opacity")===1?fn.ReadWrite:fn.ReadOnly,v.LESS),pe=n.getTile(he),ve=p.transform.calculatePosMatrix(he.toUnwrapped(),re);pe.registerFadeDuration(s.paint.get("raster-fade-duration"));const be=n.findLoadedParent(he,0),Ie=la(pe,be,n,s,p.transform);let Ae,Ne;const Oe=s.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;m.activeTexture.set(v.TEXTURE0),pe.texture.bind(Oe,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(v.TEXTURE1),be?(be.texture.bind(Oe,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,be.tileID.overscaledZ-pe.tileID.overscaledZ),Ne=[pe.tileID.canonical.x*Ae%1,pe.tileID.canonical.y*Ae%1]):pe.texture.bind(Oe,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);const Be=Pl(ve,Ne||[0,0],Ae||1,Ie,s);b instanceof xt?T.draw(m,v.TRIANGLES,oe,Rn.disabled,k,Zn.disabled,Be,s.id,b.boundsBuffer,p.quadTriangleIndexBuffer,b.boundsSegments):T.draw(m,v.TRIANGLES,oe,R[he.overscaledZ],k,Zn.disabled,Be,s.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,n,s){const h=s.paint.get("background-color"),m=s.paint.get("background-opacity");if(m===0)return;const v=p.context,b=v.gl,T=p.transform,k=T.tileSize,R=s.paint.get("background-pattern");if(p.isPatternMissing(R))return;const V=!R&&h.a===1&&m===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==V)return;const X=Rn.disabled,re=p.depthModeForSublayer(0,V==="opaque"?fn.ReadWrite:fn.ReadOnly),he=p.colorModeForRenderPass(),oe=p.useProgram(R?"backgroundPattern":"background"),pe=T.coveringTiles({tileSize:k});R&&(v.activeTexture.set(b.TEXTURE0),p.imageManager.bind(p.context));const ve=s.getCrossfadeParameters();for(const be of pe){const Ie=p.transform.calculatePosMatrix(be.toUnwrapped()),Ae=R?zs(Ie,m,p,R,{tileID:be,tileSize:k},ve):Ms(Ie,m,h);oe.draw(v,b.TRIANGLES,re,X,he,Zn.disabled,Ae,s.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,n,s){for(let h=0;h<s.length;h++)go(p,n,s[h])},custom:function(p,n,s){const h=p.context,m=s.implementation;if(p.renderPass==="offscreen"){const v=m.prerender;v&&(p.setCustomLayerDefaults(),h.setColorMode(p.colorModeForRenderPass()),v.call(m,h.gl,p.transform.customLayerMatrix()),h.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),h.setColorMode(p.colorModeForRenderPass()),h.setStencilMode(Rn.disabled);const v=m.renderingMode==="3d"?new fn(p.context.gl.LEQUAL,fn.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,fn.ReadOnly);h.setDepthMode(v),m.render(h.gl,p.transform.customLayerMatrix()),h.setDirty(),p.setBaseState(),h.bindFramebuffer.set(null)}}};class Yr{constructor(n,s){this.context=new Hu(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=rr.maxUnderzooming+rr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wt,this.gpuTimers={}}resize(n,s,h){if(this.width=n*h,this.height=s*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const n=this.context,s=new l.PosArray;s.emplaceBack(0,0),s.emplaceBack(l.EXTENT,0),s.emplaceBack(0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Ts.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const h=new l.PosArray;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=n.createVertexBuffer(h,Ts.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const m=new l.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(l.EXTENT,0,l.EXTENT,0),m.emplaceBack(0,l.EXTENT,0,l.EXTENT),m.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(m,At.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const v=new l.PosArray;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(v,Ts.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const b=new l.LineStripIndexArray;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(b);const T=new l.TriangleIndexArray;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(T),this.emptyTexture=new J(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);const k=this.context.gl;this.stencilClearMode=new Rn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=l.create();l.ortho(h,0,this.width,this.height,0,0,1),l.scale(h,h,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,fn.disabled,this.stencilClearMode,Gn.disabled,Zn.disabled,ra(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const h=this.context,m=h.gl;this.nextStencilID+s.length>256&&this.clearStencil(),h.setColorMode(Gn.disabled),h.setDepthMode(fn.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of s){const T=this._tileClippingMaskIDs[b.key]=this.nextStencilID++;v.draw(h,m.TRIANGLES,fn.disabled,new Rn({func:m.ALWAYS,mask:0},T,255,m.KEEP,m.KEEP,m.REPLACE),Gn.disabled,Zn.disabled,ra(b.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new Rn({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new Rn({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,h=n.sort((b,T)=>T.overscaledZ-b.overscaledZ),m=h[h.length-1].overscaledZ,v=h[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const b={};for(let T=0;T<v;T++)b[T+m]=new Rn({func:s.GEQUAL,mask:255},T+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=v,[b,h]}return[{[m]:Rn.disabled},h]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Gn([n.CONSTANT_COLOR,n.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}depthModeForSublayer(n,s,h){if(!this.opaquePassEnabledForLayer())return fn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new fn(h||this.context.gl.LEQUAL,s,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const h=this.style._order,m=this.style.sourceCaches;for(const k in m){const R=m[k];R.used&&R.prepare(this.context)}const v={},b={},T={};for(const k in m){const R=m[k];v[k]=R.getVisibleCoordinates(),b[k]=v[k].slice().reverse(),T[k]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<h.length;k++)if(this.style._layers[h[k]].is3D()){this.opaquePassCutoff=k;break}this.renderPass="offscreen";for(const k of h){const R=this.style._layers[k];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const V=b[R.source];(R.type==="custom"||V.length)&&this.renderLayer(this,m[R.source],R,V)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[h[this.currentLayer]],R=m[k.source],V=v[k.source];this._renderTileClippingMasks(k,V),this.renderLayer(this,R,k,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const k=this.style._layers[h[this.currentLayer]],R=m[k.source],V=(k.type==="symbol"?T:b)[k.source];this._renderTileClippingMasks(k,v[k.source]),this.renderLayer(this,R,k,V)}if(this.options.showTileBoundaries){let k,R;Object.values(this.style._layers).forEach(V=>{V.source&&!V.isHidden(this.transform.zoom)&&(V.source!==(R&&R.id)&&(R=this.style.sourceCaches[V.source]),(!k||k.getSource().maxzoom<R.getSource().maxzoom)&&(k=R))}),k&&yo.debug(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const R=k.transform.padding;Bo(k,k.transform.height-(R.top||0),3,Nl),Bo(k,R.bottom||0,3,ai),Ga(k,R.left||0,3,Mi),Ga(k,k.transform.width-(R.right||0),3,xr);const V=k.transform.centerPoint;(function(X,re,he,oe){ua(X,re-1,he-10,2,20,oe),ua(X,re-10,he-1,20,2,oe)})(k,V.x,k.transform.height-V.y,mo)}(this),this.context.setDefault()}renderLayer(n,s,h,m){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||m.length)&&(this.id=h.id,this.gpuTimingStart(h),yo[h.type](n,s,h,m,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;let h=this.gpuTimers[n.id];h||(h=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),h.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}queryGpuTimers(n){const s={};for(const h in n){const m=n[h],v=this.context.extTimerQuery,b=v.getQueryObjectEXT(m.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(m.query),s[h]=b}return s}translatePosMatrix(n,s,h,m,v){if(!h[0]&&!h[1])return n;const b=v?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(b){const R=Math.sin(b),V=Math.cos(b);h=[h[0]*V-h[1]*R,h[0]*R+h[1]*V]}const T=j(v?h[0]:$n(s,h[0],this.transform.zoom),v?h[1]:$n(s,h[1],this.transform.zoom),0),k=new Float32Array(16);return l.translate(k,n,T),k}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),h=this.imageManager.getPattern(n.to.toString());return!s||!h}useProgram(n,s){this.cache=this.cache||{};const h=`${n}${s?s.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[h]||(this.cache[h]=new Al(this.context,n,ea[n],s,ia[n],this._showOverdrawInspector)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new J(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class zi{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,h){const m=Math.pow(2,h),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>l.transformMat4([],T,n)).map(T=>l.scale$1([],T,1/T[3]/s*m)),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=function(re,he){var oe=he[0],pe=he[1],ve=he[2],be=oe*oe+pe*pe+ve*ve;return be>0&&(be=1/Math.sqrt(be)),re[0]=he[0]*be,re[1]=he[1]*be,re[2]=he[2]*be,re}([],function(re,he,oe){var pe=he[0],ve=he[1],be=he[2],Ie=oe[0],Ae=oe[1],Ne=oe[2];return re[0]=ve*Ne-be*Ae,re[1]=be*Ie-pe*Ne,re[2]=pe*Ae-ve*Ie,re}([],$([],v[T[0]],v[T[1]]),$([],v[T[2]],v[T[1]]))),R=-((V=k)[0]*(X=v[T[1]])[0]+V[1]*X[1]+V[2]*X[2]);var V,X;return k.concat(R)});return new zi(v,b)}}class _o{constructor(n,s){this.min=n,this.max=s,this.center=function(h,m,v){return h[0]=.5*m[0],h[1]=.5*m[1],h[2]=.5*m[2],h}([],function(h,m,v){return h[0]=m[0]+v[0],h[1]=m[1]+v[1],h[2]=m[2]+v[2],h}([],this.min,this.max))}quadrant(n){const s=[n%2==0,n<2],h=Z(this.min),m=Z(this.max);for(let v=0;v<s.length;v++)h[v]=s[v]?this.min[v]:this.center[v],m[v]=s[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new _o(h,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let h=!0;for(let m=0;m<n.planes.length;m++){const v=n.planes[m];let b=0;for(let T=0;T<s.length;T++)l.dot(v,s[T])>=0&&b++;if(b===0)return 0;b!==s.length&&(h=!1)}if(h)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let T=0;T<n.points.length;T++){const k=n.points[T][m]-this.min[m];v=Math.min(v,k),b=Math.max(b,k)}if(b<0||v>this.max[m]-this.min[m])return 0}return 1}}class Hi{constructor(n=0,s=0,h=0,m=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=h,this.right=m}interpolate(n,s,h){return s.top!=null&&n.top!=null&&(this.top=l.number(n.top,s.top,h)),s.bottom!=null&&n.bottom!=null&&(this.bottom=l.number(n.bottom,s.bottom,h)),s.left!=null&&n.left!=null&&(this.left=l.number(n.left,s.left,h)),s.right!=null&&n.right!=null&&(this.right=l.number(n.right,s.right,h)),this}getCenter(n,s){const h=l.clamp((this.left+n-this.right)/2,0,n),m=l.clamp((this.top+s-this.bottom)/2,0,s);return new l.pointGeometry(h,m)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Hi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class vo{constructor(n,s,h,m,v){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=v===void 0||!!v,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=h==null?0:h,this._maxPitch=m==null?60:m,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hi,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new vo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-l.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=function(){var h=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,m,v){var b=m[0],T=m[1],k=m[2],R=m[3],V=Math.sin(v),X=Math.cos(v);h[0]=b*X+k*V,h[1]=T*X+R*V,h[2]=b*-V+k*X,h[3]=T*-V+R*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=l.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,h){this._unmodified=!1,this._edgeInsets.interpolate(n,s,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new l.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const h=this.pointCoordinate(new l.pointGeometry(0,0)),m=this.pointCoordinate(new l.pointGeometry(this.width,0)),v=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),b=this.pointCoordinate(new l.pointGeometry(0,this.height)),T=Math.floor(Math.min(h.x,m.x,v.x,b.x)),k=Math.floor(Math.max(h.x,m.x,v.x,b.x)),R=1;for(let V=T-R;V<=k+R;V++)V!==0&&s.push(new l.UnwrappedTileID(V,n))}return s}coveringTiles(n){let s=this.coveringZoomLevel(n);const h=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);const m=l.MercatorCoordinate.fromLngLat(this.center),v=Math.pow(2,s),b=[v*m.x,v*m.y,0],T=zi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s);let k=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(k=s);const R=oe=>({aabb:new _o([oe*v,0,0],[(oe+1)*v,v,0]),zoom:0,x:0,y:0,wrap:oe,fullyVisible:!1}),V=[],X=[],re=s,he=n.reparseOverscaled?h:s;if(this._renderWorldCopies)for(let oe=1;oe<=3;oe++)V.push(R(-oe)),V.push(R(oe));for(V.push(R(0));V.length>0;){const oe=V.pop(),pe=oe.x,ve=oe.y;let be=oe.fullyVisible;if(!be){const Be=oe.aabb.intersects(T);if(Be===0)continue;be=Be===2}const Ie=oe.aabb.distanceX(b),Ae=oe.aabb.distanceY(b),Ne=Math.max(Math.abs(Ie),Math.abs(Ae)),Oe=3+(1<<re-oe.zoom)-2;if(oe.zoom===re||Ne>Oe&&oe.zoom>=k)X.push({tileID:new l.OverscaledTileID(oe.zoom===re?he:oe.zoom,oe.wrap,oe.zoom,pe,ve),distanceSq:G([b[0]-.5-pe,b[1]-.5-ve])});else for(let Be=0;Be<4;Be++){const He=(pe<<1)+Be%2,tt=(ve<<1)+(Be>>1);V.push({aabb:oe.aabb.quadrant(Be),zoom:oe.zoom+1,x:He,y:tt,wrap:oe.wrap,fullyVisible:be})}}return X.sort((oe,pe)=>oe.distanceSq-pe.distanceSq).map(oe=>oe.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=l.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(n.lng)*this.worldSize,l.mercatorYfromLat(s)*this.worldSize)}unproject(n){return new l.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(n,s){const h=this.pointCoordinate(s),m=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(n),b=new l.MercatorCoordinate(v.x-(h.x-m.x),v.y-(h.y-m.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n){return this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n){return this.coordinateLocation(this.pointCoordinate(n))}locationCoordinate(n){return l.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n.toLngLat()}pointCoordinate(n){const s=[n.x,n.y,0,1],h=[n.x,n.y,1,1];l.transformMat4(s,s,this.pixelMatrixInverse),l.transformMat4(h,h,this.pixelMatrixInverse);const m=s[3],v=h[3],b=s[1]/m,T=h[1]/v,k=s[2]/m,R=h[2]/v,V=k===R?0:(0-k)/(R-k);return new l.MercatorCoordinate(l.number(s[0]/m,h[0]/v,V)/this.worldSize,l.number(b,T,V)/this.worldSize)}coordinatePoint(n){const s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix),new l.pointGeometry(s[0]/s[3],s[1]/s[3])}getBounds(){return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,0))).extend(this.pointLocation(new l.pointGeometry(this.width,0))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,s=!1){const h=n.key,m=s?this._alignedPosMatrixCache:this._posMatrixCache;if(m[h])return m[h];const v=n.canonical,b=this.worldSize/this.zoomScale(v.z),T=v.x+Math.pow(2,v.z)*n.wrap,k=l.identity(new Float64Array(16));return l.translate(k,k,[T*b,v.y*b,0]),l.scale(k,k,[b/l.EXTENT,b/l.EXTENT,1]),l.multiply(k,s?this.alignedProjMatrix:this.projMatrix,k),m[h]=new Float32Array(k),m[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,s,h,m,v=-90,b=90,T=-180,k=180;const R=this.size,V=this._unmodified;if(this.latRange){const he=this.latRange;v=l.mercatorYfromLat(he[1])*this.worldSize,b=l.mercatorYfromLat(he[0])*this.worldSize,n=b-v<R.y?R.y/(b-v):0}if(this.lngRange){const he=this.lngRange;T=l.mercatorXfromLng(he[0])*this.worldSize,k=l.mercatorXfromLng(he[1])*this.worldSize,s=k-T<R.x?R.x/(k-T):0}const X=this.point,re=Math.max(s||0,n||0);if(re)return this.center=this.unproject(new l.pointGeometry(s?(k+T)/2:X.x,n?(b+v)/2:X.y)),this.zoom+=this.scaleZoom(re),this._unmodified=V,void(this._constraining=!1);if(this.latRange){const he=X.y,oe=R.y/2;he-oe<v&&(m=v+oe),he+oe>b&&(m=b-oe)}if(this.lngRange){const he=X.x,oe=R.x/2;he-oe<T&&(h=T+oe),he+oe>k&&(h=k-oe)}h===void 0&&m===void 0||(this.center=this.unproject(new l.pointGeometry(h!==void 0?h:X.x,m!==void 0?m:X.y))),this._unmodified=V,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const s=Math.PI/2+this._pitch,h=this._fov*(.5+n.y/this.height),m=Math.sin(h)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-s-h,.01,Math.PI-.01)),v=this.point,b=v.x,T=v.y,k=1.01*(Math.cos(Math.PI/2-this._pitch)*m+this.cameraToCenterDistance),R=this.height/50;let V=new Float64Array(16);l.perspective(V,this._fov,this.width/this.height,R,k),V[8]=2*-n.x/this.width,V[9]=2*n.y/this.height,l.scale(V,V,[1,-1,1]),l.translate(V,V,[0,0,-this.cameraToCenterDistance]),l.rotateX(V,V,this._pitch),l.rotateZ(V,V,this.angle),l.translate(V,V,[-b,-T,0]),this.mercatorMatrix=l.scale([],V,j(this.worldSize,this.worldSize,this.worldSize)),l.scale(V,V,j(1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize)),this.projMatrix=V,this.invProjMatrix=l.invert([],this.projMatrix);const X=this.width%2/2,re=this.height%2/2,he=Math.cos(this.angle),oe=Math.sin(this.angle),pe=b-Math.round(b)+he*X+oe*re,ve=T-Math.round(T)+he*re+oe*X,be=new Float64Array(V);if(l.translate(be,be,[pe>.5?pe-1:pe,ve>.5?ve-1:ve,0]),this.alignedProjMatrix=be,V=l.create(),l.scale(V,V,[this.width/2,-this.height/2,1]),l.translate(V,V,[1,-1,0]),this.labelPlaneMatrix=V,V=l.create(),l.scale(V,V,[1,-1,1]),l.translate(V,V,[-1,-1,0]),l.scale(V,V,[2/this.width,2/this.height,1]),this.glCoordMatrix=V,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),V=l.invert(new Float64Array(16),this.pixelMatrix),!V)throw new Error("failed to invert matrix");this.pixelMatrixInverse=V,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new l.pointGeometry(0,0)),s=l.fromValues(n.x*this.worldSize,n.y*this.worldSize,0,1);return l.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let h=s.x,m=s.y,v=s.x,b=s.y;for(const T of n)h=Math.min(h,T.x),m=Math.min(m,T.y),v=Math.max(v,T.x),b=Math.max(b,T.y);return[new l.pointGeometry(h,m),new l.pointGeometry(v,m),new l.pointGeometry(v,b),new l.pointGeometry(h,b),new l.pointGeometry(h,m)]}}}class Ws{constructor(n){this._hashName=n&&encodeURIComponent(n),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(s,h){let m=!1,v=null;const b=()=>{v=null,m&&(s(),v=setTimeout(b,300),m=!1)};return()=>(m=!0,v||b(),v)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),b=Math.round(s.lng*v)/v,T=Math.round(s.lat*v)/v,k=this._map.getBearing(),R=this._map.getPitch();let V="";if(V+=n?`/${b}/${T}/${h}`:`${h}/${T}/${b}`,(k||R)&&(V+="/"+Math.round(10*k)/10),R&&(V+=`/${Math.round(R)}`),this._hashName){const X=this._hashName;let re=!1;const he=window.location.hash.slice(1).split("&").map(oe=>{const pe=oe.split("=")[0];return pe===X?(re=!0,`${pe}=${V}`):oe}).filter(oe=>oe);return re||he.push(`${X}=${V}`),`#${he.join("&")}`}return`#${V}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let s;return n.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(s=h)}),(s&&s[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(s=>isNaN(s))){const s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const No={linearity:.3,easing:l.bezier(0,0,.3,1)},Xs=l.extend({deceleration:2500,maxSpeed:1400},No),Hs=l.extend({deceleration:20,maxSpeed:1400},No),Ur=l.extend({deceleration:1e3,maxSpeed:360},No),Ys=l.extend({deceleration:1e3,maxSpeed:90},No);class Ul{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=l.exported.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)s.zoom+=v.zoomDelta||0,s.bearing+=v.bearingDelta||0,s.pitch+=v.pitchDelta||0,v.panDelta&&s.pan._add(v.panDelta),v.around&&(s.around=v.around),v.pinchAround&&(s.pinchAround=v.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(s.pan.mag()){const v=xo(s.pan.mag(),h,l.extend({},Xs,n||{}));m.offset=s.pan.mult(v.amount/s.pan.mag()),m.center=this._map.transform.center,Uo(m,v)}if(s.zoom){const v=xo(s.zoom,h,Hs);m.zoom=this._map.transform.zoom+v.amount,Uo(m,v)}if(s.bearing){const v=xo(s.bearing,h,Ur);m.bearing=this._map.transform.bearing+l.clamp(v.amount,-179,179),Uo(m,v)}if(s.pitch){const v=xo(s.pitch,h,Ys);m.pitch=this._map.transform.pitch+v.amount,Uo(m,v)}if(m.zoom||m.bearing){const v=s.pinchAround===void 0?s.around:s.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),l.extend(m,{noMoveStart:!0})}}function Uo(p,n){(!p.duration||p.duration<n.duration)&&(p.duration=n.duration,p.easing=n.easing)}function xo(p,n,s){const{maxSpeed:h,linearity:m,deceleration:v}=s,b=l.clamp(p*m/(n/1e3),-h,h),T=Math.abs(b)/(v*m);return{easing:s.easing,duration:1e3*T,amount:b*(T/2)}}class Dn extends l.Event{constructor(n,s,h,m={}){const v=P.mousePos(s.getCanvasContainer(),h),b=s.unproject(v);super(n,l.extend({point:v,lngLat:b,originalEvent:h},m)),this._defaultPrevented=!1,this.target=s}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ca extends l.Event{constructor(n,s,h){const m=n==="touchend"?h.changedTouches:h.touches,v=P.touchPos(s.getCanvasContainer(),m),b=v.map(k=>s.unproject(k)),T=v.reduce((k,R,V,X)=>k.add(R.div(X.length)),new l.pointGeometry(0,0));super(n,{points:v,point:T,lngLats:b,lngLat:s.unproject(T),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Yi extends l.Event{constructor(n,s,h){super(n,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class I{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Yi(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new Dn(n.type,this._map,n))}mouseup(n){this._map.fire(new Dn(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Dn(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Dn(n.type,this._map,n))}mouseover(n){this._map.fire(new Dn(n.type,this._map,n))}mouseout(n){this._map.fire(new Dn(n.type,this._map,n))}touchstart(n){return this._firePreventable(new ca(n.type,this._map,n))}touchmove(n){this._map.fire(new ca(n.type,this._map,n))}touchend(n){this._map.fire(new ca(n.type,this._map,n))}touchcancel(n){this._map.fire(new ca(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Y{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Dn(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Dn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fe{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(P.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const h=s;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=P.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const v=Math.min(m.x,h.x),b=Math.max(m.x,h.x),T=Math.min(m.y,h.y),k=Math.max(m.y,h.y);P.setTransform(this._box,`translate(${v}px,${T}px)`),this._box.style.width=b-v+"px",this._box.style.height=k-T+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const h=this._startPos,m=s;if(this.reset(),P.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:v=>v.fitScreenCoordinates(h,m,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new l.Event(n,{originalEvent:s}))}}function ze(p,n){const s={};for(let h=0;h<p.length;h++)s[p[h].identifier]=n[h];return s}class st{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const v=new l.pointGeometry(0,0);for(const b of m)v._add(b);return v.div(m.length)}(s),this.touches=ze(h,s)))}touchmove(n,s,h){if(this.aborted||!this.centroid)return;const m=ze(h,s);for(const v in this.touches){const b=this.touches[v],T=m[v];(!T||T.dist(b)>30)&&(this.aborted=!0)}}touchend(n,s,h){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class nt{constructor(n){this.singleTap=new st(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,h){this.singleTap.touchstart(n,s,h)}touchmove(n,s,h){this.singleTap.touchmove(n,s,h)}touchend(n,s,h){const m=this.singleTap.touchend(n,s,h);if(m){const v=n.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(m)<30;if(v&&b||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Et{constructor(){this._zoomIn=new nt({numTouches:1,numTaps:2}),this._zoomOut=new nt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,h){this._zoomIn.touchstart(n,s,h),this._zoomOut.touchstart(n,s,h)}touchmove(n,s,h){this._zoomIn.touchmove(n,s,h),this._zoomOut.touchmove(n,s,h)}touchend(n,s,h){const m=this._zoomIn.touchend(n,s,h),v=this._zoomOut.touchend(n,s,h);return m?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:b=>b.easeTo({duration:300,zoom:b.getZoom()+1,around:b.unproject(m)},{originalEvent:n})}):v?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:b=>b.easeTo({duration:300,zoom:b.getZoom()-1,around:b.unproject(v)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const St={0:1,2:2};class Ft{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(n,s){return!1}_move(n,s){return{}}mousedown(n,s){if(this._lastPoint)return;const h=P.mouseButton(n);this._correctButton(n,h)&&(this._lastPoint=s,this._eventButton=h)}mousemoveWindow(n,s){const h=this._lastPoint;if(h){if(n.preventDefault(),function(m,v){const b=St[v];return m.buttons===void 0||(m.buttons&b)!==b}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(h,s)}}mouseupWindow(n){this._lastPoint&&P.mouseButton(n)===this._eventButton&&(this._moved&&P.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ke extends Ft{mousedown(n,s){super.mousedown(n,s),this._lastPoint&&(this._active=!0)}_correctButton(n,s){return s===0&&!n.ctrlKey}_move(n,s){return{around:s,panDelta:s.sub(n)}}}class dn extends Ft{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=.8*(s.x-n.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(n){n.preventDefault()}}class bn extends Ft{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=-.5*(s.y-n.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(n){n.preventDefault()}}class Pn{constructor(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0)}touchstart(n,s,h){return this._calculateTransform(n,s,h)}touchmove(n,s,h){if(this._active&&!(h.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,h)}touchend(n,s,h){this._calculateTransform(n,s,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,h){h.length>0&&(this._active=!0);const m=ze(h,s),v=new l.pointGeometry(0,0),b=new l.pointGeometry(0,0);let T=0;for(const R in m){const V=m[R],X=this._touches[R];X&&(v._add(V),b._add(V.sub(X)),T++,m[R]=V)}if(this._touches=m,T<this._minTouches||!b.mag())return;const k=b.div(T);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(T),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ur{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,s,h){return{}}touchstart(n,s,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,h){if(!this._firstTwoTouches)return;n.preventDefault();const[m,v]=this._firstTwoTouches,b=Je(h,s,m),T=Je(h,s,v);if(!b||!T)return;const k=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],k,n)}touchend(n,s,h){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,b=Je(h,s,m),T=Je(h,s,v);b&&T||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Je(p,n,s){for(let h=0;h<p.length;h++)if(p[h].identifier===s)return n[h]}function si(p,n){return Math.log(p/n)/Math.LN2}class Li extends ur{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const h=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(si(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:si(this._distance,h),pinchAround:s}}}function Ki(p,n){return 180*p.angleWith(n)/Math.PI}class Za extends ur{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s){const h=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ki(this._vector,h),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,h=Ki(n,this._startVector);return Math.abs(h)<s}}function wo(p){return Math.abs(p.y)>Math.abs(p.x)}class ha extends ur{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(n){this._lastPoints=n,wo(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,h){const m=n[0].sub(this._lastPoints[0]),v=n[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(m,v,h.timeStamp),this._valid)return this._lastPoints=n,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}}gestureBeginsVertically(n,s,h){if(this._valid!==void 0)return this._valid;const m=n.mag()>=2,v=s.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const b=n.y>0==s.y>0;return wo(n)&&wo(s)&&b}}const Id={panStep:100,bearingStep:15,pitchStep:10};class Pd{constructor(){const n=Id;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,h=0,m=0,v=0,b=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?h=-1:(n.preventDefault(),v=-1);break;case 39:n.shiftKey?h=1:(n.preventDefault(),v=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),b=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:T=>{const k=T.getZoom();T.easeTo({duration:300,easeId:"keyboardHandler",easing:Yu,zoom:s?Math.round(k)+s*(n.shiftKey?2:1):k,bearing:T.getBearing()+h*this._bearingStep,pitch:T.getPitch()+m*this._pitchStep,offset:[-v*this._panStep,-b*this._panStep],center:T.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yu(p){return p*(2-p)}const Vl=4.000244140625;class Ku{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const h=l.exported.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,s!==0&&s%Vl==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(m*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=P.mousePos(this._el,n);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Vl?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);const R=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,h=this._startZoom,m=this._easing;let v,b=!1;if(this._type==="wheel"&&h&&m){const T=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),k=m(T);v=l.number(h,s,k),T<1?this._frameId||(this._frameId=!0):b=!0}else v=s,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:v-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=l.ease;if(this._prevEase){const h=this._prevEase,m=(l.exported.now()-h.start)/h.duration,v=h.easing(m+.01)-h.easing(m),b=.27/Math.sqrt(v*v+1e-4)*.01,T=Math.sqrt(.0729-b*b);s=l.bezier(b,T,.25,1)}return this._prevEase={start:l.exported.now(),duration:n,easing:s},s}reset(){this._active=!1}}class Ju{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Kr{constructor(){this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(n.shiftKey?-1:1),around:h.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vo{constructor(){this._tap=new nt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,s,h){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=s[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(n,s,h))}touchmove(n,s,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=s[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,n.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(n,s,h)}touchend(n,s,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(n,s,h)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sh{constructor(n,s,h){this._el=n,this._mousePan=s,this._touchPan=h}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Qu{constructor(n,s,h){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ec{constructor(n,s,h,m){this._el=n,this._touchZoom=s,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qa=p=>p.zoom||p.drag||p.pitch||p.rotate;class Th extends l.Event{}function Jr(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Fn{constructor(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ul(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),l.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,b]of this._listeners)P.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[n,s,h]of this._listeners)P.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(n){const s=this._map,h=s.getCanvasContainer();this._add("mapEvent",new I(s,n));const m=s.boxZoom=new fe(s,n);this._add("boxZoom",m);const v=new Et,b=new Kr;s.doubleClickZoom=new Ju(b,v),this._add("tapZoom",v),this._add("clickZoom",b);const T=new Vo;this._add("tapDragZoom",T);const k=s.touchPitch=new ha;this._add("touchPitch",k);const R=new dn(n),V=new bn(n);s.dragRotate=new Qu(n,R,V),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",V,["mouseRotate"]);const X=new Ke(n),re=new Pn(n);s.dragPan=new Sh(h,X,re),this._add("mousePan",X),this._add("touchPan",re,["touchZoom","touchRotate"]);const he=new Za,oe=new Li;s.touchZoomRotate=new ec(h,oe,he,T),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]);const pe=s.scrollZoom=new Ku(s,this);this._add("scrollZoom",pe,["mousePan"]);const ve=s.keyboard=new Pd;this._add("keyboard",ve),this._add("blockableMapEvent",new Y(s));for(const be of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[be]&&s[be].enable(n[be])}_add(n,s,h){this._handlers.push({handlerName:n,handler:s,allowed:h}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(qa(this._eventsInProgress))||this.isZooming()}_blockedByActive(n,s,h){for(const m in n)if(m!==h&&(!s||s.indexOf(m)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const s=[];for(const h of n)this._el.contains(h.target)&&s.push(h);return s}handleEvent(n,s){if(n.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=n.type==="renderFrame"?void 0:n,m={needsRenderFrame:!1},v={},b={},T=n.touches,k=T?this._getMapTouches(T):void 0,R=k?P.touchPos(this._el,k):P.mousePos(this._el,n);for(const{handlerName:re,handler:he,allowed:oe}of this._handlers){if(!he.isEnabled())continue;let pe;this._blockedByActive(b,oe,re)?he.reset():he[s||n.type]&&(pe=he[s||n.type](n,R,k),this.mergeHandlerResult(m,v,pe,re,h),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()),(pe||he.isActive())&&(b[re]=he)}const V={};for(const re in this._previousActiveHandlers)b[re]||(V[re]=h);this._previousActiveHandlers=b,(Object.keys(V).length||Jr(m))&&(this._changes.push([m,v,V]),this._triggerRenderFrame()),(Object.keys(b).length||Jr(m))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=m;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))}mergeHandlerResult(n,s,h,m,v){if(!h)return;l.extend(n,h);const b={handlerName:m,originalEvent:h.originalEvent||v};h.zoomDelta!==void 0&&(s.zoom=b),h.panDelta!==void 0&&(s.drag=b),h.pitchDelta!==void 0&&(s.pitch=b),h.bearingDelta!==void 0&&(s.rotate=b)}_applyChanges(){const n={},s={},h={};for(const[m,v,b]of this._changes)m.panDelta&&(n.panDelta=(n.panDelta||new l.pointGeometry(0,0))._add(m.panDelta)),m.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(n.around=m.around),m.pinchAround!==void 0&&(n.pinchAround=m.pinchAround),m.noInertia&&(n.noInertia=m.noInertia),l.extend(s,v),l.extend(h,b);this._updateMapTransform(n,s,h),this._changes=[]}_updateMapTransform(n,s,h){const m=this._map,v=m.transform;if(!Jr(n))return this._fireEvents(s,h,!0);let{panDelta:b,zoomDelta:T,bearingDelta:k,pitchDelta:R,around:V,pinchAround:X}=n;X!==void 0&&(V=X),m._stop(!0),V=V||m.transform.centerPoint;const re=v.pointLocation(b?V.sub(b):V);k&&(v.bearing+=k),R&&(v.pitch+=R),T&&(v.zoom+=T),v.setLocationAtPoint(re,V),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,h,!0)}_fireEvents(n,s,h){const m=qa(this._eventsInProgress),v=qa(n),b={};for(const V in n){const{originalEvent:X}=n[V];this._eventsInProgress[V]||(b[`${V}start`]=X),this._eventsInProgress[V]=n[V]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const V in b)this._fireEvent(V,b[V]);v&&this._fireEvent("move",v.originalEvent);for(const V in n){const{originalEvent:X}=n[V];this._fireEvent(V,X)}const T={};let k;for(const V in this._eventsInProgress){const{handlerName:X,originalEvent:re}=this._eventsInProgress[V];this._handlersById[X].isActive()||(delete this._eventsInProgress[V],k=s[X]||re,T[`${V}end`]=k)}for(const V in T)this._fireEvent(V,T[V]);const R=qa(this._eventsInProgress);if(h&&(m||v)&&!R){this._updatingCamera=!0;const V=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;V?(X(V.bearing||this._map.getBearing())&&(V.bearing=0),this._map.easeTo(V,{originalEvent:k})):(this._map.fire(new l.Event("moveend",{originalEvent:k})),X(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new l.Event(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Th("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const $l={extend:(p,...n)=>l.extend(p,...n),run(p){p()},logToElement(p,n=!1,s="log"){const h=window.document.getElementById(s);h&&(n&&(h.innerHTML=""),h.innerHTML+=`<br>${p}`)}};class tc extends l.Evented{constructor(n,s){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,h){return n=l.pointGeometry.convert(n).mult(-1),this.panTo(this.transform.center,l.extend({offset:n},s),h)}panTo(n,s,h){return this.easeTo(l.extend({center:n},s),h)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,h){return this.easeTo(l.extend({zoom:n},s),h)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,h){return this.easeTo(l.extend({bearing:n},s),h)}resetNorth(n,s){return this.rotateTo(0,l.extend({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=l.LngLatBounds.convert(n);const h=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),h,s)}_cameraForBoxAndBearing(n,s,h,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=l.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Oe=m.padding;m.padding={top:Oe,bottom:Oe,right:Oe,left:Oe}}m.padding=l.extend(v,m.padding);const b=this.transform,T=b.padding,k=b.project(l.LngLat.convert(n)),R=b.project(l.LngLat.convert(s)),V=k.rotate(-h*Math.PI/180),X=R.rotate(-h*Math.PI/180),re=new l.pointGeometry(Math.max(V.x,X.x),Math.max(V.y,X.y)),he=new l.pointGeometry(Math.min(V.x,X.x),Math.min(V.y,X.y)),oe=re.sub(he),pe=(b.width-(T.left+T.right+m.padding.left+m.padding.right))/oe.x,ve=(b.height-(T.top+T.bottom+m.padding.top+m.padding.bottom))/oe.y;if(ve<0||pe<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const be=Math.min(b.scaleZoom(b.scale*Math.min(pe,ve)),m.maxZoom),Ie=l.pointGeometry.convert(m.offset),Ae=new l.pointGeometry((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(h*Math.PI/180),Ne=Ie.add(Ae).mult(b.scale/b.zoomScale(be));return{center:b.unproject(k.add(R).div(2).sub(Ne)),zoom:be,bearing:h}}fitBounds(n,s,h){return this._fitInternal(this.cameraForBounds(n,s),s,h)}fitScreenCoordinates(n,s,h,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(n)),this.transform.pointLocation(l.pointGeometry.convert(s)),h,m),m,v)}_fitInternal(n,s,h){return n?(delete(s=l.extend(n,s)).padding,s.linear?this.easeTo(s,h):this.flyTo(s,h)):this}jumpTo(n,s){this.stop();const h=this.transform;let m=!1,v=!1,b=!1;return"zoom"in n&&h.zoom!==+n.zoom&&(m=!0,h.zoom=+n.zoom),n.center!==void 0&&(h.center=l.LngLat.convert(n.center)),"bearing"in n&&h.bearing!==+n.bearing&&(v=!0,h.bearing=+n.bearing),"pitch"in n&&h.pitch!==+n.pitch&&(b=!0,h.pitch=+n.pitch),n.padding==null||h.isPaddingEqual(n.padding)||(h.padding=n.padding),this.fire(new l.Event("movestart",s)).fire(new l.Event("move",s)),m&&this.fire(new l.Event("zoomstart",s)).fire(new l.Event("zoom",s)).fire(new l.Event("zoomend",s)),v&&this.fire(new l.Event("rotatestart",s)).fire(new l.Event("rotate",s)).fire(new l.Event("rotateend",s)),b&&this.fire(new l.Event("pitchstart",s)).fire(new l.Event("pitch",s)).fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))}easeTo(n,s){this._stop(!1,n.easeId),((n=l.extend({offset:[0,0],duration:500,easing:l.ease},n)).animate===!1||!n.essential&&l.exported.prefersReducedMotion)&&(n.duration=0);const h=this.transform,m=this.getZoom(),v=this.getBearing(),b=this.getPitch(),T=this.getPadding(),k="zoom"in n?+n.zoom:m,R="bearing"in n?this._normalizeBearing(n.bearing,v):v,V="pitch"in n?+n.pitch:b,X="padding"in n?n.padding:h.padding,re=l.pointGeometry.convert(n.offset);let he=h.centerPoint.add(re);const oe=h.pointLocation(he),pe=l.LngLat.convert(n.center||oe);this._normalizeCenter(pe);const ve=h.project(oe),be=h.project(pe).sub(ve),Ie=h.zoomScale(k-m);let Ae,Ne;n.around&&(Ae=l.LngLat.convert(n.around),Ne=h.locationPoint(Ae));const Oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==m,this._rotating=this._rotating||v!==R,this._pitching=this._pitching||V!==b,this._padding=!h.isPaddingEqual(X),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,Oe),this._ease(Be=>{if(this._zooming&&(h.zoom=l.number(m,k,Be)),this._rotating&&(h.bearing=l.number(v,R,Be)),this._pitching&&(h.pitch=l.number(b,V,Be)),this._padding&&(h.interpolatePadding(T,X,Be),he=h.centerPoint.add(re)),Ae)h.setLocationAtPoint(Ae,Ne);else{const He=h.zoomScale(h.zoom-m),tt=k>m?Math.min(2,Ie):Math.max(.5,Ie),je=Math.pow(tt,1-Be),Tt=h.unproject(ve.add(be.mult(Be*je)).mult(He));h.setLocationAtPoint(h.renderWorldCopies?Tt.wrap():Tt,he)}this._fireMoveEvents(s)},Be=>{this._afterEase(s,Be)},n),this}_prepareEase(n,s,h={}){this._moving=!0,s||h.moving||this.fire(new l.Event("movestart",n)),this._zooming&&!h.zooming&&this.fire(new l.Event("zoomstart",n)),this._rotating&&!h.rotating&&this.fire(new l.Event("rotatestart",n)),this._pitching&&!h.pitching&&this.fire(new l.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new l.Event("move",n)),this._zooming&&this.fire(new l.Event("zoom",n)),this._rotating&&this.fire(new l.Event("rotate",n)),this._pitching&&this.fire(new l.Event("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const h=this._zooming,m=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new l.Event("zoomend",n)),m&&this.fire(new l.Event("rotateend",n)),v&&this.fire(new l.Event("pitchend",n)),this.fire(new l.Event("moveend",n))}flyTo(n,s){if(!n.essential&&l.exported.prefersReducedMotion){const Jt=l.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Jt,s)}this.stop(),n=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},n);const h=this.transform,m=this.getZoom(),v=this.getBearing(),b=this.getPitch(),T=this.getPadding(),k="zoom"in n?l.clamp(+n.zoom,h.minZoom,h.maxZoom):m,R="bearing"in n?this._normalizeBearing(n.bearing,v):v,V="pitch"in n?+n.pitch:b,X="padding"in n?n.padding:h.padding,re=h.zoomScale(k-m),he=l.pointGeometry.convert(n.offset);let oe=h.centerPoint.add(he);const pe=h.pointLocation(oe),ve=l.LngLat.convert(n.center||pe);this._normalizeCenter(ve);const be=h.project(pe),Ie=h.project(ve).sub(be);let Ae=n.curve;const Ne=Math.max(h.width,h.height),Oe=Ne/re,Be=Ie.mag();if("minZoom"in n){const Jt=l.clamp(Math.min(n.minZoom,m,k),h.minZoom,h.maxZoom),Qn=Ne/h.zoomScale(Jt-m);Ae=Math.sqrt(Qn/Be*2)}const He=Ae*Ae;function tt(Jt){const Qn=(Oe*Oe-Ne*Ne+(Jt?-1:1)*He*He*Be*Be)/(2*(Jt?Oe:Ne)*He*Be);return Math.log(Math.sqrt(Qn*Qn+1)-Qn)}function je(Jt){return(Math.exp(Jt)-Math.exp(-Jt))/2}function Tt(Jt){return(Math.exp(Jt)+Math.exp(-Jt))/2}const ht=tt(0);let Bt=function(Jt){return Tt(ht)/Tt(ht+Ae*Jt)},mn=function(Jt){return Ne*((Tt(ht)*(je(Qn=ht+Ae*Jt)/Tt(Qn))-je(ht))/He)/Be;var Qn},Kt=(tt(1)-ht)/Ae;if(Math.abs(Be)<1e-6||!isFinite(Kt)){if(Math.abs(Ne-Oe)<1e-6)return this.easeTo(n,s);const Jt=Oe<Ne?-1:1;Kt=Math.abs(Math.log(Oe/Ne))/Ae,mn=function(){return 0},Bt=function(Qn){return Math.exp(Jt*Ae*Qn)}}return n.duration="duration"in n?+n.duration:1e3*Kt/("screenSpeed"in n?+n.screenSpeed/Ae:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=v!==R,this._pitching=V!==b,this._padding=!h.isPaddingEqual(X),this._prepareEase(s,!1),this._ease(Jt=>{const Qn=Jt*Kt,$t=1/Bt(Qn);h.zoom=Jt===1?k:m+h.scaleZoom($t),this._rotating&&(h.bearing=l.number(v,R,Jt)),this._pitching&&(h.pitch=l.number(b,V,Jt)),this._padding&&(h.interpolatePadding(T,X,Jt),oe=h.centerPoint.add(he));const on=Jt===1?ve:h.unproject(be.add(Ie.mult(mn(Qn))).mult($t));h.setLocationAtPoint(h.renderWorldCopies?on.wrap():on,oe),this._fireMoveEvents(s)},()=>this._afterEase(s),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,s)}if(!n){const h=this.handlers;h&&h.stop(!1)}return this}_ease(n,s,h){h.animate===!1||h.duration===0?(n(1),s()):(this._easeStart=l.exported.now(),this._easeOptions=h,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,s){n=l.wrap(n,-180,180);const h=Math.abs(n-s);return Math.abs(n-360-s)<h&&(n-=360),Math.abs(n+360-s)<h&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const h=n.lng-s.center.lng;n.lng+=h>180?-360:h<-180?360:0}}class nc{constructor(n={}){this.options=n,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const h=this._map._getUIString(`AttributionControl.${s}`);n.title=h,n.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const s=this._map.style.sourceCaches;for(const m in s){const v=s[m];if(v.used){const b=v.getSource();b.attribution&&n.indexOf(b.attribution)<0&&n.push(b.attribution)}}n=n.filter(m=>String(m).trim()),n.sort((m,v)=>m.length-v.length),n=n.filter((m,v)=>{for(let b=v+1;b<n.length;b++)if(n[b].indexOf(m)>=0)return!1;return!0});const h=n.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,n.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ah{constructor(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)}onAdd(n){this._map=n,this._container=P.create("div","maplibregl-ctrl mapboxgl-ctrl");const s=P.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(void 0),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const n=this._map.style.sourceCaches;for(const s in n)if(n[s].getSource().maplibreLogo)return!0;return!1}_updateCompact(){const n=this._container.children;if(n.length){const s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("maplibregl-compact","mapboxgl-compact"):s.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Ch{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,h=s?this._queue.concat(s):this._queue;for(const m of h)if(m.id===n)return void(m.cancelled=!0)}run(n=0){const s=this._currentlyRunning=this._queue;this._queue=[];for(const h of s)if(!h.cancelled&&(h.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Md={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ji={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},jl={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ct{constructor(n,s,h=!1){this._clickTolerance=10,this.element=s,this.mouseRotate=new dn({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,h&&(this.mousePitch=new bn({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),P.addEventListener(s,"mousedown",this.mousedown),P.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(s,"touchmove",this.touchmove),P.addEventListener(s,"touchend",this.touchend),P.addEventListener(s,"touchcancel",this.reset)}down(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),P.disableDrag()}move(n,s){const h=this.map,m=this.mouseRotate.mousemoveWindow(n,s);if(m&&m.bearingDelta&&h.setBearing(h.getBearing()+m.bearingDelta),this.mousePitch){const v=this.mousePitch.mousemoveWindow(n,s);v&&v.pitchDelta&&h.setPitch(h.getPitch()+v.pitchDelta)}}off(){const n=this.element;P.removeEventListener(n,"mousedown",this.mousedown),P.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(n,"touchmove",this.touchmove),P.removeEventListener(n,"touchend",this.touchend),P.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup)}mousedown(n){this.down(l.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),P.mousePos(this.element,n)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.move(n,P.mousePos(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Rt(p,n,s){if(p=new l.LngLat(p.lng,p.lat),n){const h=new l.LngLat(p.lng-360,p.lat),m=new l.LngLat(p.lng+360,p.lat),v=s.locationPoint(p).distSqr(n);s.locationPoint(h).distSqr(n)<v?p=h:s.locationPoint(m).distSqr(n)<v&&(p=m)}for(;Math.abs(p.lng-s.center.lng)>180;){const h=s.locationPoint(p);if(h.x>=0&&h.y>=0&&h.x<=s.width&&h.y<=s.height)break;p.lng>s.center.lng?p.lng-=360:p.lng+=360}return p}const Wa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gl(p,n,s){const h=p.classList;for(const m in Wa)h.remove(`maplibregl-${s}-anchor-${m}`,`mapboxgl-${s}-anchor-${m}`);h.add(`maplibregl-${s}-anchor-${n}`,`mapboxgl-${s}-anchor-${n}`)}class Ks extends l.Evented{constructor(n,s){if(super(),(n instanceof HTMLElement||s)&&(n=l.extend({element:n},s)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=l.pointGeometry.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div"),this._element.setAttribute("aria-label","Map marker");const h=P.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${m}px`),h.setAttributeNS(null,"width",`${v}px`),h.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const b=P.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const T=P.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const k=P.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of R){const Ae=P.createNS("http://www.w3.org/2000/svg","ellipse");Ae.setAttributeNS(null,"opacity","0.04"),Ae.setAttributeNS(null,"cx","10.5"),Ae.setAttributeNS(null,"cy","5.80029008"),Ae.setAttributeNS(null,"rx",Ie.rx),Ae.setAttributeNS(null,"ry",Ie.ry),k.appendChild(Ae)}const V=P.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const X=P.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(X);const re=P.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"fill","#000000");const he=P.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),re.appendChild(he);const oe=P.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const pe=P.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ve=P.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#000000"),ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962");const be=P.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#FFFFFF"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962"),pe.appendChild(ve),pe.appendChild(be),T.appendChild(k),T.appendChild(V),T.appendChild(re),T.appendChild(oe),T.appendChild(pe),h.appendChild(T),h.setAttributeNS(null,"height",m*this._scale+"px"),h.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(h),this._offset=l.pointGeometry.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Gl(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=l.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const m=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const s=n.code,h=n.charCode||n.keyCode;s!=="Space"&&s!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(n){const s=n.originalEvent.target,h=this._element;this._popup&&(s===h||h.contains(s))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Rt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let s="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?s=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(s=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),n&&n.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Wa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${s}`)}getOffset(){return this._offset}setOffset(n){return this._offset=l.pointGeometry.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const s=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=s}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Qr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bo,li=0,Js=!1;const Zl={maxWidth:100,unit:"metric"};function Kn(p,n,s){const h=s&&s.maxWidth||100,m=p._container.clientHeight/2,v=p.unproject([0,m]),b=p.unproject([h,m]),T=v.distanceTo(b);if(s&&s.unit==="imperial"){const k=3.2808*T;k>5280?Jn(n,h,k/5280,p._getUIString("ScaleControl.Miles")):Jn(n,h,k,p._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?Jn(n,h,T/1852,p._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Jn(n,h,T/1e3,p._getUIString("ScaleControl.Kilometers")):Jn(n,h,T,p._getUIString("ScaleControl.Meters"))}function Jn(p,n,s,h){const m=function(v){const b=Math.pow(10,`${Math.floor(v)}`.length-1);let T=v/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(k){const R=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*R)/R}(T),b*T}(s);p.style.width=n*(m/s)+"px",p.innerHTML=`${m}&nbsp;${h}`}const kh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Qs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ql(p){if(p){if(typeof p=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,p),"top-left":new l.pointGeometry(n,n),"top-right":new l.pointGeometry(-n,n),bottom:new l.pointGeometry(0,-p),"bottom-left":new l.pointGeometry(n,-n),"bottom-right":new l.pointGeometry(-n,-n),left:new l.pointGeometry(p,0),right:new l.pointGeometry(-p,0)}}if(p instanceof l.pointGeometry||Array.isArray(p)){const n=l.pointGeometry.convert(p);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:l.pointGeometry.convert(p.center||[0,0]),top:l.pointGeometry.convert(p.top||[0,0]),"top-left":l.pointGeometry.convert(p["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(p["top-right"]||[0,0]),bottom:l.pointGeometry.convert(p.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(p["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(p["bottom-right"]||[0,0]),left:l.pointGeometry.convert(p.left||[0,0]),right:l.pointGeometry.convert(p.right||[0,0])}}return ql(new l.pointGeometry(0,0))}const el={supported:S,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends tc{constructor(p){var n;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},Ji,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vo(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new Ch,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Md,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(n=p.pixelRatio)!==null&&n!==void 0?n:devicePixelRatio,this._requestManager=new q(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Fn(this,p),this._hash=p.hash&&new Ws(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new nc({customAttribution:p.customAttribution})),this.addControl(new Ah,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new l.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new l.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new l.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(p,n){if(n===void 0&&(n=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=p.onAdd(this);this._controls.push(p);const h=this._controlPositions[n];return n.indexOf("bottom")!==-1?h.insertBefore(s,h.firstChild):h.appendChild(s),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(p);return n>-1&&this._controls.splice(n,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}resize(p){const n=this._containerDimensions(),s=n[0],h=n[1];this._resizeCanvas(s,h,this.getPixelRatio()),this.transform.resize(s,h),this.painter.resize(s,h,this.getPixelRatio());const m=!this._moving;return m&&(this.stop(),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p))),this.fire(new l.Event("resize",p)),m&&this.fire(new l.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[n,s]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(n,s,p),this.painter.resize(n,s,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?60:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}project(p){return this.transform.locationPoint(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation(l.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(p,n,s){if(p==="mouseenter"||p==="mouseover"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:v=>{const b=this.getLayer(n)?this.queryRenderedFeatures(v.point,{layers:[n]}):[];b.length?h||(h=!0,s.call(this,new Dn(p,this,v.originalEvent,{features:b}))):h=!1},mouseout:()=>{h=!1}}}}if(p==="mouseleave"||p==="mouseout"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:b=>{(this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[]).length?h=!0:h&&(h=!1,s.call(this,new Dn(p,this,b.originalEvent)))},mouseout:b=>{h&&(h=!1,s.call(this,new Dn(p,this,b.originalEvent)))}}}}{const h=m=>{const v=this.getLayer(n)?this.queryRenderedFeatures(m.point,{layers:[n]}):[];v.length&&(m.features=v,s.call(this,m),delete m.features)};return{layer:n,listener:s,delegates:{[p]:h}}}}on(p,n,s){if(s===void 0)return super.on(p,n);const h=this._createDelegatedListener(p,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(h);for(const m in h.delegates)this.on(m,h.delegates[m]);return this}once(p,n,s){if(s===void 0)return super.once(p,n);const h=this._createDelegatedListener(p,n,s);for(const m in h.delegates)this.once(m,h.delegates[m]);return this}off(p,n,s){return s===void 0?super.off(p,n):(this._delegatedListeners&&this._delegatedListeners[p]&&(h=>{const m=this._delegatedListeners[p];for(let v=0;v<m.length;v++){const b=m[v];if(b.layer===n&&b.listener===s){for(const T in b.delegates)this.off(T,b.delegates[T]);return m.splice(v,1),this}}})(),this)}queryRenderedFeatures(p,n){if(!this.style)return[];let s;if(n!==void 0||p===void 0||p instanceof l.pointGeometry||Array.isArray(p)||(n=p,p=void 0),n=n||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof p[0]=="number")s=[l.pointGeometry.convert(p)];else{const h=l.pointGeometry.convert(p[0]),m=l.pointGeometry.convert(p[1]);s=[h,new l.pointGeometry(m.x,h.y),m,new l.pointGeometry(h.x,m.y),h]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(p,n){return this.style.querySourceFeatures(p,n)}setStyle(p,n){return(n=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(p,n))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const n=this._locale[p];if(n==null)throw new Error(`Missing UI string '${p}'`);return n}_updateStyle(p,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new xi(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,n){if(typeof p=="string"){const s=this._requestManager.transformRequest(p,l.ResourceType.Style);l.getJSON(s,(h,m)=>{h?this.fire(new l.ErrorEvent(h)):m&&this._updateDiff(m,n)})}else typeof p=="object"&&this._updateDiff(p,n)}_updateDiff(p,n){try{this.style.setState(p)&&this._update(!0)}catch(s){l.warnOnce(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(p,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(p,n){return this._lazyInitEmptyStyle(),this.style.addSource(p,n),this._update(!0)}isSourceLoaded(p){const n=this.style&&this.style.sourceCaches[p];if(n!==void 0)return n.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const n in p){const s=p[n]._tiles;for(const h in s){const m=s[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(p,n,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,n,s)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,n,{pixelRatio:s=1,sdf:h=!1,stretchX:m,stretchY:v,content:b}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||l.isImageBitmap(n)){const{width:T,height:k,data:R}=l.exported.getImageData(n);this.style.addImage(p,{data:new l.RGBAImage({width:T,height:k},R),pixelRatio:s,stretchX:m,stretchY:v,content:b,sdf:h,version:0})}else{if(n.width===void 0||n.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:T,height:k,data:R}=n,V=n;this.style.addImage(p,{data:new l.RGBAImage({width:T,height:k},new Uint8Array(R)),pixelRatio:s,stretchX:m,stretchY:v,content:b,sdf:h,version:0,userImage:V}),V.onAdd&&V.onAdd(this,p)}}}updateImage(p,n){const s=this.style.getImage(p);if(!s)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=n instanceof HTMLImageElement||l.isImageBitmap(n)?l.exported.getImageData(n):n,{width:m,height:v,data:b}=h;if(m===void 0||v===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==s.data.width||v!==s.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(n instanceof HTMLImageElement||l.isImageBitmap(n));s.data.replace(b,T),this.style.updateImage(p,s)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,n){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(p,n){return this._lazyInitEmptyStyle(),this.style.addLayer(p,n),this._update(!0)}moveLayer(p,n){return this.style.moveLayer(p,n),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,n,s){return this.style.setLayerZoomRange(p,n,s),this._update(!0)}setFilter(p,n,s={}){return this.style.setFilter(p,n,s),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,n,s,h={}){return this.style.setPaintProperty(p,n,s,h),this._update(!0)}getPaintProperty(p,n){return this.style.getPaintProperty(p,n)}setLayoutProperty(p,n,s,h={}){return this.style.setLayoutProperty(p,n,s,h),this._update(!0)}getLayoutProperty(p,n){return this.style.getLayoutProperty(p,n)}setLight(p,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,n){return this.style.setFeatureState(p,n),this._update()}removeFeatureState(p,n){return this.style.removeFeatureState(p,n),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,n=0;return this._container&&(p=this._container.clientWidth||400,n=this._container.clientHeight||300),[p,n]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map","mapboxgl-map");const n=this._canvasContainer=P.create("div","maplibregl-canvas-container mapboxgl-canvas-container",p);this._interactive&&n.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const s=this._containerDimensions();this._resizeCanvas(s[0],s[1],this.getPixelRatio());const h=this._controlContainer=P.create("div","maplibregl-control-container mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{m[v]=P.create("div",`maplibregl-ctrl-${v} mapboxgl-ctrl-${v}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,n,s){this._canvas.width=s*p,this._canvas.height=s*n,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const p=l.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);n?(this.painter=new Yr(n,this.transform),l.exported$1.testSupport(n)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){let n,s=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,n),s=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,T=l.exported.now();this.style.zoomHistory.update(b,T);const k=new l.EvaluationParameters(b,{now:T,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),R=k.crossFadingFactor();R===1&&R===this._crossFadingFactor||(m=!0,this._crossFadingFactor=R),this.style.update(k)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const b=l.exported.now()-s;h.endQueryEXT(h.TIME_ELAPSED_EXT,n),setTimeout(()=>{const T=h.getQueryObjectEXT(n,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(n),this.fire(new l.Event("gpu-timing-frame",{cpuTime:b,gpuTime:T}))},50)}if(this.listens("gpu-timing-layer")){const b=this.painter.collectGpuTimers();setTimeout(()=>{const T=this.painter.queryGpuTimers(b);this.fire(new l.Event("gpu-timing-layer",{layerTimes:T}))},50)}const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(p=>{l.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,n){l.setCacheLimits(p,n)}},NavigationControl:class{constructor(p){this.options=l.extend({},jl,p),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),n=p===this._map.getMaxZoom(),s=p===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ct(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,n){const s=P.create("button",p,this._container);return s.type="button",s.addEventListener("click",n),s}_setButtonTitle(p,n){const s=this._map._getUIString(`NavigationControl.${n}`);p.title=s,p.setAttribute("aria-label",s)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({},Qr,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){var n;return this._map=p,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,bo!==void 0?n(bo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(s=>{bo=s.state!=="denied",n(bo)}):(bo=!!window.navigator.geolocation,n(bo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,li=0,Js=!1}_isOutOfMapMaxBounds(p){const n=this._map.getMaxBounds(),s=p.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const n=new l.LngLat(p.coords.longitude,p.coords.latitude),s=p.coords.accuracy,h=this._map.getBearing(),m=l.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(s),m,{geolocateSource:!0})}_updateMarker(p){if(p){const n=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map._container.clientHeight/2,n=this._map.unproject([0,p]),s=this._map.unproject([1,p]),h=n.distanceTo(s),m=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ks(this._dotElement),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ks({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":li--,Js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),li++,li>1?(p={maximumAge:6e5,timeout:0},Js=!0):(p=this.options.positionOptions,Js=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:nc,ScaleControl:class{constructor(p){this.options=l.extend({},Zl,p),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Kn(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,Kn(this._map,this._container,this.options)}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(kh),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const n=document.createDocumentFragment(),s=document.createElement("body");let h;for(s.innerHTML=p;h=s.firstChild,h;)n.appendChild(h);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=P.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(v=>this._container.classList.add(v)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rt(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const n=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let s=this.options.anchor;const h=ql(this.options.offset);if(!s){const v=this._container.offsetWidth,b=this._container.offsetHeight;let T;T=n.y+h.bottom.y<b?["top"]:n.y>this._map.transform.height-b?["bottom"]:[],n.x<v/2?T.push("left"):n.x>this._map.transform.width-v/2&&T.push("right"),s=T.length===0?"bottom":T.join("-")}const m=n.add(h[s]).round();P.setTransform(this._container,`${Wa[s]} translate(${m.x}px,${m.y}px)`),Gl(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Qs);p&&p.focus()}_onClose(){this.remove()}},Marker:Ks,Style:xi,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Xt,GeoJSONSource:mt,ImageSource:xt,RasterDEMTileSource:Ye,RasterTileSource:vn,VectorTileSource:rn,VideoSource:wt,prewarm:function(){O().acquire(Vn)},clearPrewarmedResources:function(){const p=ie;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Vn),ie=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return Hn.workerCount},set workerCount(p){Hn.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",addProtocol(p,n){l.config.REGISTERED_PROTOCOLS[p]=n},removeProtocol(p){delete l.config.REGISTERED_PROTOCOLS[p]}};return $l.extend(el,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),el});var x=d;return x})})(cy);var $A=cy.exports,jA=Object.freeze(p2({__proto__:null,[Symbol.toStringTag]:"Module",default:$A},[cy.exports])),GA={exports:{}};(function(e,r){(function(a){e.exports=a()})(function(){return function(){function a(c,d,_){function x(A,z){if(!d[A]){if(!c[A]){var C=typeof Jh=="function"&&Jh;if(!z&&C)return C(A,!0);if(l)return l(A,!0);var P=new Error("Cannot find module '"+A+"'");throw P.code="MODULE_NOT_FOUND",P}var q=d[A]={exports:{}};c[A][0].call(q.exports,function(te){var Z=c[A][1][te];return x(Z||te)},q,q.exports,a,c,d,_)}return d[A].exports}for(var l=typeof Jh=="function"&&Jh,S=0;S<_.length;S++)x(_[S]);return x}return a}()({1:[function(a,c,d){d.byteLength=P,d.toByteArray=te,d.fromByteArray=N;for(var _=[],x=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,z=S.length;A<z;++A)_[A]=S[A],x[S.charCodeAt(A)]=A;x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63;function C($){var G=$.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var J=$.indexOf("=");J===-1&&(J=G);var me=J===G?0:4-J%4;return[J,me]}function P($){var G=C($),J=G[0],me=G[1];return(J+me)*3/4-me}function q($,G,J){return(G+J)*3/4-J}function te($){var G,J=C($),me=J[0],H=J[1],se=new l(q($,me,H)),ne=0,Te=H>0?me-4:me,Ce;for(Ce=0;Ce<Te;Ce+=4)G=x[$.charCodeAt(Ce)]<<18|x[$.charCodeAt(Ce+1)]<<12|x[$.charCodeAt(Ce+2)]<<6|x[$.charCodeAt(Ce+3)],se[ne++]=G>>16&255,se[ne++]=G>>8&255,se[ne++]=G&255;return H===2&&(G=x[$.charCodeAt(Ce)]<<2|x[$.charCodeAt(Ce+1)]>>4,se[ne++]=G&255),H===1&&(G=x[$.charCodeAt(Ce)]<<10|x[$.charCodeAt(Ce+1)]<<4|x[$.charCodeAt(Ce+2)]>>2,se[ne++]=G>>8&255,se[ne++]=G&255),se}function Z($){return _[$>>18&63]+_[$>>12&63]+_[$>>6&63]+_[$&63]}function j($,G,J){for(var me,H=[],se=G;se<J;se+=3)me=($[se]<<16&16711680)+($[se+1]<<8&65280)+($[se+2]&255),H.push(Z(me));return H.join("")}function N($){for(var G,J=$.length,me=J%3,H=[],se=16383,ne=0,Te=J-me;ne<Te;ne+=se)H.push(j($,ne,ne+se>Te?Te:ne+se));return me===1?(G=$[J-1],H.push(_[G>>2]+_[G<<4&63]+"==")):me===2&&(G=($[J-2]<<8)+$[J-1],H.push(_[G>>10]+_[G>>4&63]+_[G<<2&63]+"=")),H.join("")}},{}],2:[function(a,c,d){(function(_){(function(){var x=a("base64-js"),l=a("ieee754");d.Buffer=C,d.SlowBuffer=me,d.INSPECT_MAX_BYTES=50;var S=2147483647;d.kMaxLength=S,C.TYPED_ARRAY_SUPPORT=A(),!C.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function A(){try{var ie=new Uint8Array(1);return ie.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ie.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.byteOffset}});function z(ie){if(ie>S)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var O=new Uint8Array(ie);return O.__proto__=C.prototype,O}function C(ie,O,D){if(typeof ie=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Z(ie)}return P(ie,O,D)}typeof Symbol!="undefined"&&Symbol.species!=null&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192;function P(ie,O,D){if(typeof ie=="string")return j(ie,O);if(ArrayBuffer.isView(ie))return N(ie);if(ie==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Hn(ie,ArrayBuffer)||ie&&Hn(ie.buffer,ArrayBuffer))return $(ie,O,D);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=ie.valueOf&&ie.valueOf();if(ue!=null&&ue!==ie)return C.from(ue,O,D);var Ee=G(ie);if(Ee)return Ee;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return C.from(ie[Symbol.toPrimitive]("string"),O,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}C.from=function(ie,O,D){return P(ie,O,D)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array;function q(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function te(ie,O,D){return q(ie),ie<=0?z(ie):O!==void 0?typeof D=="string"?z(ie).fill(O,D):z(ie).fill(O):z(ie)}C.alloc=function(ie,O,D){return te(ie,O,D)};function Z(ie){return q(ie),z(ie<0?0:J(ie)|0)}C.allocUnsafe=function(ie){return Z(ie)},C.allocUnsafeSlow=function(ie){return Z(ie)};function j(ie,O){if((typeof O!="string"||O==="")&&(O="utf8"),!C.isEncoding(O))throw new TypeError("Unknown encoding: "+O);var D=H(ie,O)|0,ue=z(D),Ee=ue.write(ie,O);return Ee!==D&&(ue=ue.slice(0,Ee)),ue}function N(ie){for(var O=ie.length<0?0:J(ie.length)|0,D=z(O),ue=0;ue<O;ue+=1)D[ue]=ie[ue]&255;return D}function $(ie,O,D){if(O<0||ie.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<O+(D||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return O===void 0&&D===void 0?ue=new Uint8Array(ie):D===void 0?ue=new Uint8Array(ie,O):ue=new Uint8Array(ie,O,D),ue.__proto__=C.prototype,ue}function G(ie){if(C.isBuffer(ie)){var O=J(ie.length)|0,D=z(O);return D.length===0||ie.copy(D,0,0,O),D}if(ie.length!==void 0)return typeof ie.length!="number"||Br(ie.length)?z(0):N(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return N(ie.data)}function J(ie){if(ie>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return ie|0}function me(ie){return+ie!=ie&&(ie=0),C.alloc(+ie)}C.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==C.prototype},C.compare=function(O,D){if(Hn(O,Uint8Array)&&(O=C.from(O,O.offset,O.byteLength)),Hn(D,Uint8Array)&&(D=C.from(D,D.offset,D.byteLength)),!C.isBuffer(O)||!C.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===D)return 0;for(var ue=O.length,Ee=D.length,qe=0,Xe=Math.min(ue,Ee);qe<Xe;++qe)if(O[qe]!==D[qe]){ue=O[qe],Ee=D[qe];break}return ue<Ee?-1:Ee<ue?1:0},C.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(O,D){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return C.alloc(0);var ue;if(D===void 0)for(D=0,ue=0;ue<O.length;++ue)D+=O[ue].length;var Ee=C.allocUnsafe(D),qe=0;for(ue=0;ue<O.length;++ue){var Xe=O[ue];if(Hn(Xe,Uint8Array)&&(Xe=C.from(Xe)),!C.isBuffer(Xe))throw new TypeError('"list" argument must be an Array of Buffers');Xe.copy(Ee,qe),qe+=Xe.length}return Ee};function H(ie,O){if(C.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||Hn(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var D=ie.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&D===0)return 0;for(var Ee=!1;;)switch(O){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return hr(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return Mr(ie).length;default:if(Ee)return ue?-1:hr(ie).length;O=(""+O).toLowerCase(),Ee=!0}}C.byteLength=H;function se(ie,O,D){var ue=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,O>>>=0,D<=O))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return At(this,O,D);case"utf8":case"utf-8":return rn(this,O,D);case"ascii":return Ye(this,O,D);case"latin1":case"binary":return mt(this,O,D);case"base64":return yt(this,O,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,O,D);default:if(ue)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ue=!0}}C.prototype._isBuffer=!0;function ne(ie,O,D){var ue=ie[O];ie[O]=ie[D],ie[D]=ue}C.prototype.swap16=function(){var O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<O;D+=2)ne(this,D,D+1);return this},C.prototype.swap32=function(){var O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<O;D+=4)ne(this,D,D+3),ne(this,D+1,D+2);return this},C.prototype.swap64=function(){var O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<O;D+=8)ne(this,D,D+7),ne(this,D+1,D+6),ne(this,D+2,D+5),ne(this,D+3,D+4);return this},C.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?rn(this,0,O):se.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(O){if(!C.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:C.compare(this,O)===0},C.prototype.inspect=function(){var O="",D=d.INSPECT_MAX_BYTES;return O=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(O+=" ... "),"<Buffer "+O+">"},C.prototype.compare=function(O,D,ue,Ee,qe){if(Hn(O,Uint8Array)&&(O=C.from(O,O.offset,O.byteLength)),!C.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(D===void 0&&(D=0),ue===void 0&&(ue=O?O.length:0),Ee===void 0&&(Ee=0),qe===void 0&&(qe=this.length),D<0||ue>O.length||Ee<0||qe>this.length)throw new RangeError("out of range index");if(Ee>=qe&&D>=ue)return 0;if(Ee>=qe)return-1;if(D>=ue)return 1;if(D>>>=0,ue>>>=0,Ee>>>=0,qe>>>=0,this===O)return 0;for(var Xe=qe-Ee,Dt=ue-D,ke=Math.min(Xe,Dt),Ge=this.slice(Ee,qe),wn=O.slice(D,ue),en=0;en<ke;++en)if(Ge[en]!==wn[en]){Xe=Ge[en],Dt=wn[en];break}return Xe<Dt?-1:Dt<Xe?1:0};function Te(ie,O,D,ue,Ee){if(ie.length===0)return-1;if(typeof D=="string"?(ue=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Br(D)&&(D=Ee?0:ie.length-1),D<0&&(D=ie.length+D),D>=ie.length){if(Ee)return-1;D=ie.length-1}else if(D<0)if(Ee)D=0;else return-1;if(typeof O=="string"&&(O=C.from(O,ue)),C.isBuffer(O))return O.length===0?-1:Ce(ie,O,D,ue,Ee);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(ie,O,D):Uint8Array.prototype.lastIndexOf.call(ie,O,D):Ce(ie,[O],D,ue,Ee);throw new TypeError("val must be string, number or Buffer")}function Ce(ie,O,D,ue,Ee){var qe=1,Xe=ie.length,Dt=O.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(ie.length<2||O.length<2)return-1;qe=2,Xe/=2,Dt/=2,D/=2}function ke(Mn,Ln){return qe===1?Mn[Ln]:Mn.readUInt16BE(Ln*qe)}var Ge;if(Ee){var wn=-1;for(Ge=D;Ge<Xe;Ge++)if(ke(ie,Ge)===ke(O,wn===-1?0:Ge-wn)){if(wn===-1&&(wn=Ge),Ge-wn+1===Dt)return wn*qe}else wn!==-1&&(Ge-=Ge-wn),wn=-1}else for(D+Dt>Xe&&(D=Xe-Dt),Ge=D;Ge>=0;Ge--){for(var en=!0,ln=0;ln<Dt;ln++)if(ke(ie,Ge+ln)!==ke(O,ln)){en=!1;break}if(en)return Ge}return-1}C.prototype.includes=function(O,D,ue){return this.indexOf(O,D,ue)!==-1},C.prototype.indexOf=function(O,D,ue){return Te(this,O,D,ue,!0)},C.prototype.lastIndexOf=function(O,D,ue){return Te(this,O,D,ue,!1)};function Pe(ie,O,D,ue){D=Number(D)||0;var Ee=ie.length-D;ue?(ue=Number(ue),ue>Ee&&(ue=Ee)):ue=Ee;var qe=O.length;ue>qe/2&&(ue=qe/2);for(var Xe=0;Xe<ue;++Xe){var Dt=parseInt(O.substr(Xe*2,2),16);if(Br(Dt))return Xe;ie[D+Xe]=Dt}return Xe}function Ze(ie,O,D,ue){return Vn(hr(O,ie.length-D),ie,D,ue)}function rt(ie,O,D,ue){return Vn(rr(O),ie,D,ue)}function ft(ie,O,D,ue){return rt(ie,O,D,ue)}function dt(ie,O,D,ue){return Vn(Mr(O),ie,D,ue)}function Ue(ie,O,D,ue){return Vn(ir(O,ie.length-D),ie,D,ue)}C.prototype.write=function(O,D,ue,Ee){if(D===void 0)Ee="utf8",ue=this.length,D=0;else if(ue===void 0&&typeof D=="string")Ee=D,ue=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(ue)?(ue=ue>>>0,Ee===void 0&&(Ee="utf8")):(Ee=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var qe=this.length-D;if((ue===void 0||ue>qe)&&(ue=qe),O.length>0&&(ue<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var Xe=!1;;)switch(Ee){case"hex":return Pe(this,O,D,ue);case"utf8":case"utf-8":return Ze(this,O,D,ue);case"ascii":return rt(this,O,D,ue);case"latin1":case"binary":return ft(this,O,D,ue);case"base64":return dt(this,O,D,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,O,D,ue);default:if(Xe)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),Xe=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function yt(ie,O,D){return O===0&&D===ie.length?x.fromByteArray(ie):x.fromByteArray(ie.slice(O,D))}function rn(ie,O,D){D=Math.min(ie.length,D);for(var ue=[],Ee=O;Ee<D;){var qe=ie[Ee],Xe=null,Dt=qe>239?4:qe>223?3:qe>191?2:1;if(Ee+Dt<=D){var ke,Ge,wn,en;switch(Dt){case 1:qe<128&&(Xe=qe);break;case 2:ke=ie[Ee+1],(ke&192)===128&&(en=(qe&31)<<6|ke&63,en>127&&(Xe=en));break;case 3:ke=ie[Ee+1],Ge=ie[Ee+2],(ke&192)===128&&(Ge&192)===128&&(en=(qe&15)<<12|(ke&63)<<6|Ge&63,en>2047&&(en<55296||en>57343)&&(Xe=en));break;case 4:ke=ie[Ee+1],Ge=ie[Ee+2],wn=ie[Ee+3],(ke&192)===128&&(Ge&192)===128&&(wn&192)===128&&(en=(qe&15)<<18|(ke&63)<<12|(Ge&63)<<6|wn&63,en>65535&&en<1114112&&(Xe=en))}}Xe===null?(Xe=65533,Dt=1):Xe>65535&&(Xe-=65536,ue.push(Xe>>>10&1023|55296),Xe=56320|Xe&1023),ue.push(Xe),Ee+=Dt}return Sn(ue)}var vn=4096;function Sn(ie){var O=ie.length;if(O<=vn)return String.fromCharCode.apply(String,ie);for(var D="",ue=0;ue<O;)D+=String.fromCharCode.apply(String,ie.slice(ue,ue+=vn));return D}function Ye(ie,O,D){var ue="";D=Math.min(ie.length,D);for(var Ee=O;Ee<D;++Ee)ue+=String.fromCharCode(ie[Ee]&127);return ue}function mt(ie,O,D){var ue="";D=Math.min(ie.length,D);for(var Ee=O;Ee<D;++Ee)ue+=String.fromCharCode(ie[Ee]);return ue}function At(ie,O,D){var ue=ie.length;(!O||O<0)&&(O=0),(!D||D<0||D>ue)&&(D=ue);for(var Ee="",qe=O;qe<D;++qe)Ee+=Qt(ie[qe]);return Ee}function xt(ie,O,D){for(var ue=ie.slice(O,D),Ee="",qe=0;qe<ue.length;qe+=2)Ee+=String.fromCharCode(ue[qe]+ue[qe+1]*256);return Ee}C.prototype.slice=function(O,D){var ue=this.length;O=~~O,D=D===void 0?ue:~~D,O<0?(O+=ue,O<0&&(O=0)):O>ue&&(O=ue),D<0?(D+=ue,D<0&&(D=0)):D>ue&&(D=ue),D<O&&(D=O);var Ee=this.subarray(O,D);return Ee.__proto__=C.prototype,Ee};function wt(ie,O,D){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+O>D)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(O,D,ue){O=O>>>0,D=D>>>0,ue||wt(O,D,this.length);for(var Ee=this[O],qe=1,Xe=0;++Xe<D&&(qe*=256);)Ee+=this[O+Xe]*qe;return Ee},C.prototype.readUIntBE=function(O,D,ue){O=O>>>0,D=D>>>0,ue||wt(O,D,this.length);for(var Ee=this[O+--D],qe=1;D>0&&(qe*=256);)Ee+=this[O+--D]*qe;return Ee},C.prototype.readUInt8=function(O,D){return O=O>>>0,D||wt(O,1,this.length),this[O]},C.prototype.readUInt16LE=function(O,D){return O=O>>>0,D||wt(O,2,this.length),this[O]|this[O+1]<<8},C.prototype.readUInt16BE=function(O,D){return O=O>>>0,D||wt(O,2,this.length),this[O]<<8|this[O+1]},C.prototype.readUInt32LE=function(O,D){return O=O>>>0,D||wt(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},C.prototype.readUInt32BE=function(O,D){return O=O>>>0,D||wt(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},C.prototype.readIntLE=function(O,D,ue){O=O>>>0,D=D>>>0,ue||wt(O,D,this.length);for(var Ee=this[O],qe=1,Xe=0;++Xe<D&&(qe*=256);)Ee+=this[O+Xe]*qe;return qe*=128,Ee>=qe&&(Ee-=Math.pow(2,8*D)),Ee},C.prototype.readIntBE=function(O,D,ue){O=O>>>0,D=D>>>0,ue||wt(O,D,this.length);for(var Ee=D,qe=1,Xe=this[O+--Ee];Ee>0&&(qe*=256);)Xe+=this[O+--Ee]*qe;return qe*=128,Xe>=qe&&(Xe-=Math.pow(2,8*D)),Xe},C.prototype.readInt8=function(O,D){return O=O>>>0,D||wt(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},C.prototype.readInt16LE=function(O,D){O=O>>>0,D||wt(O,2,this.length);var ue=this[O]|this[O+1]<<8;return ue&32768?ue|4294901760:ue},C.prototype.readInt16BE=function(O,D){O=O>>>0,D||wt(O,2,this.length);var ue=this[O+1]|this[O]<<8;return ue&32768?ue|4294901760:ue},C.prototype.readInt32LE=function(O,D){return O=O>>>0,D||wt(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},C.prototype.readInt32BE=function(O,D){return O=O>>>0,D||wt(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},C.prototype.readFloatLE=function(O,D){return O=O>>>0,D||wt(O,4,this.length),l.read(this,O,!0,23,4)},C.prototype.readFloatBE=function(O,D){return O=O>>>0,D||wt(O,4,this.length),l.read(this,O,!1,23,4)},C.prototype.readDoubleLE=function(O,D){return O=O>>>0,D||wt(O,8,this.length),l.read(this,O,!0,52,8)},C.prototype.readDoubleBE=function(O,D){return O=O>>>0,D||wt(O,8,this.length),l.read(this,O,!1,52,8)};function Xt(ie,O,D,ue,Ee,qe){if(!C.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>Ee||O<qe)throw new RangeError('"value" argument is out of bounds');if(D+ue>ie.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(O,D,ue,Ee){if(O=+O,D=D>>>0,ue=ue>>>0,!Ee){var qe=Math.pow(2,8*ue)-1;Xt(this,O,D,ue,qe,0)}var Xe=1,Dt=0;for(this[D]=O&255;++Dt<ue&&(Xe*=256);)this[D+Dt]=O/Xe&255;return D+ue},C.prototype.writeUIntBE=function(O,D,ue,Ee){if(O=+O,D=D>>>0,ue=ue>>>0,!Ee){var qe=Math.pow(2,8*ue)-1;Xt(this,O,D,ue,qe,0)}var Xe=ue-1,Dt=1;for(this[D+Xe]=O&255;--Xe>=0&&(Dt*=256);)this[D+Xe]=O/Dt&255;return D+ue},C.prototype.writeUInt8=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,1,255,0),this[D]=O&255,D+1},C.prototype.writeUInt16LE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,2,65535,0),this[D]=O&255,this[D+1]=O>>>8,D+2},C.prototype.writeUInt16BE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,2,65535,0),this[D]=O>>>8,this[D+1]=O&255,D+2},C.prototype.writeUInt32LE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,4,4294967295,0),this[D+3]=O>>>24,this[D+2]=O>>>16,this[D+1]=O>>>8,this[D]=O&255,D+4},C.prototype.writeUInt32BE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,4,4294967295,0),this[D]=O>>>24,this[D+1]=O>>>16,this[D+2]=O>>>8,this[D+3]=O&255,D+4},C.prototype.writeIntLE=function(O,D,ue,Ee){if(O=+O,D=D>>>0,!Ee){var qe=Math.pow(2,8*ue-1);Xt(this,O,D,ue,qe-1,-qe)}var Xe=0,Dt=1,ke=0;for(this[D]=O&255;++Xe<ue&&(Dt*=256);)O<0&&ke===0&&this[D+Xe-1]!==0&&(ke=1),this[D+Xe]=(O/Dt>>0)-ke&255;return D+ue},C.prototype.writeIntBE=function(O,D,ue,Ee){if(O=+O,D=D>>>0,!Ee){var qe=Math.pow(2,8*ue-1);Xt(this,O,D,ue,qe-1,-qe)}var Xe=ue-1,Dt=1,ke=0;for(this[D+Xe]=O&255;--Xe>=0&&(Dt*=256);)O<0&&ke===0&&this[D+Xe+1]!==0&&(ke=1),this[D+Xe]=(O/Dt>>0)-ke&255;return D+ue},C.prototype.writeInt8=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,1,127,-128),O<0&&(O=255+O+1),this[D]=O&255,D+1},C.prototype.writeInt16LE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,2,32767,-32768),this[D]=O&255,this[D+1]=O>>>8,D+2},C.prototype.writeInt16BE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,2,32767,-32768),this[D]=O>>>8,this[D+1]=O&255,D+2},C.prototype.writeInt32LE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,4,2147483647,-2147483648),this[D]=O&255,this[D+1]=O>>>8,this[D+2]=O>>>16,this[D+3]=O>>>24,D+4},C.prototype.writeInt32BE=function(O,D,ue){return O=+O,D=D>>>0,ue||Xt(this,O,D,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[D]=O>>>24,this[D+1]=O>>>16,this[D+2]=O>>>8,this[D+3]=O&255,D+4};function yn(ie,O,D,ue,Ee,qe){if(D+ue>ie.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function un(ie,O,D,ue,Ee){return O=+O,D=D>>>0,Ee||yn(ie,O,D,4),l.write(ie,O,D,ue,23,4),D+4}C.prototype.writeFloatLE=function(O,D,ue){return un(this,O,D,!0,ue)},C.prototype.writeFloatBE=function(O,D,ue){return un(this,O,D,!1,ue)};function xn(ie,O,D,ue,Ee){return O=+O,D=D>>>0,Ee||yn(ie,O,D,8),l.write(ie,O,D,ue,52,8),D+8}C.prototype.writeDoubleLE=function(O,D,ue){return xn(this,O,D,!0,ue)},C.prototype.writeDoubleBE=function(O,D,ue){return xn(this,O,D,!1,ue)},C.prototype.copy=function(O,D,ue,Ee){if(!C.isBuffer(O))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Ee&&Ee!==0&&(Ee=this.length),D>=O.length&&(D=O.length),D||(D=0),Ee>0&&Ee<ue&&(Ee=ue),Ee===ue||O.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),O.length-D<Ee-ue&&(Ee=O.length-D+ue);var qe=Ee-ue;if(this===O&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,ue,Ee);else if(this===O&&ue<D&&D<Ee)for(var Xe=qe-1;Xe>=0;--Xe)O[Xe+D]=this[Xe+ue];else Uint8Array.prototype.set.call(O,this.subarray(ue,Ee),D);return qe},C.prototype.fill=function(O,D,ue,Ee){if(typeof O=="string"){if(typeof D=="string"?(Ee=D,D=0,ue=this.length):typeof ue=="string"&&(Ee=ue,ue=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!C.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(O.length===1){var qe=O.charCodeAt(0);(Ee==="utf8"&&qe<128||Ee==="latin1")&&(O=qe)}}else typeof O=="number"&&(O=O&255);if(D<0||this.length<D||this.length<ue)throw new RangeError("Out of range index");if(ue<=D)return this;D=D>>>0,ue=ue===void 0?this.length:ue>>>0,O||(O=0);var Xe;if(typeof O=="number")for(Xe=D;Xe<ue;++Xe)this[Xe]=O;else{var Dt=C.isBuffer(O)?O:C.from(O,Ee),ke=Dt.length;if(ke===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(Xe=0;Xe<ue-D;++Xe)this[Xe+D]=Dt[Xe%ke]}return this};var Tn=/[^+/0-9A-Za-z-_]/g;function Gt(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(Tn,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function Qt(ie){return ie<16?"0"+ie.toString(16):ie.toString(16)}function hr(ie,O){O=O||1/0;for(var D,ue=ie.length,Ee=null,qe=[],Xe=0;Xe<ue;++Xe){if(D=ie.charCodeAt(Xe),D>55295&&D<57344){if(!Ee){if(D>56319){(O-=3)>-1&&qe.push(239,191,189);continue}else if(Xe+1===ue){(O-=3)>-1&&qe.push(239,191,189);continue}Ee=D;continue}if(D<56320){(O-=3)>-1&&qe.push(239,191,189),Ee=D;continue}D=(Ee-55296<<10|D-56320)+65536}else Ee&&(O-=3)>-1&&qe.push(239,191,189);if(Ee=null,D<128){if((O-=1)<0)break;qe.push(D)}else if(D<2048){if((O-=2)<0)break;qe.push(D>>6|192,D&63|128)}else if(D<65536){if((O-=3)<0)break;qe.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((O-=4)<0)break;qe.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return qe}function rr(ie){for(var O=[],D=0;D<ie.length;++D)O.push(ie.charCodeAt(D)&255);return O}function ir(ie,O){for(var D,ue,Ee,qe=[],Xe=0;Xe<ie.length&&!((O-=2)<0);++Xe)D=ie.charCodeAt(Xe),ue=D>>8,Ee=D%256,qe.push(Ee),qe.push(ue);return qe}function Mr(ie){return x.toByteArray(Gt(ie))}function Vn(ie,O,D,ue){for(var Ee=0;Ee<ue&&!(Ee+D>=O.length||Ee>=ie.length);++Ee)O[Ee+D]=ie[Ee];return Ee}function Hn(ie,O){return ie instanceof O||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===O.name}function Br(ie){return ie!==ie}}).call(this)}).call(this,a("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(a,c,d){const _=a("./validator"),x=a("./xmlparser/XMLParser"),l=a("./xmlbuilder/json2xml");c.exports={XMLParser:x,XMLValidator:_,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(a,c,d){const _=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",x=_+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+_+"]["+x+"]*",S=new RegExp("^"+l+"$"),A=function(C,P){const q=[];let te=P.exec(C);for(;te;){const Z=[];Z.startIndex=P.lastIndex-te[0].length;const j=te.length;for(let N=0;N<j;N++)Z.push(te[N]);q.push(Z),te=P.exec(C)}return q},z=function(C){const P=S.exec(C);return!(P===null||typeof P=="undefined")};d.isExist=function(C){return typeof C!="undefined"},d.isEmptyObject=function(C){return Object.keys(C).length===0},d.merge=function(C,P,q){if(P){const te=Object.keys(P),Z=te.length;for(let j=0;j<Z;j++)q==="strict"?C[te[j]]=[P[te[j]]]:C[te[j]]=P[te[j]]}},d.getValue=function(C){return d.isExist(C)?C:""},d.isName=z,d.getAllMatches=A,d.nameRegexp=l},{}],5:[function(a,c,d){const _=a("./util"),x={allowBooleanAttributes:!1,unpairedTags:[]};d.validate=function(H,se){se=Object.assign({},x,se);const ne=[];let Te=!1,Ce=!1;H[0]==="\uFEFF"&&(H=H.substr(1));for(let Pe=0;Pe<H.length;Pe++)if(H[Pe]==="<"&&H[Pe+1]==="?"){if(Pe+=2,Pe=S(H,Pe),Pe.err)return Pe}else if(H[Pe]==="<"){let Ze=Pe;if(Pe++,H[Pe]==="!"){Pe=A(H,Pe);continue}else{let rt=!1;H[Pe]==="/"&&(rt=!0,Pe++);let ft="";for(;Pe<H.length&&H[Pe]!==">"&&H[Pe]!==" "&&H[Pe]!=="	"&&H[Pe]!==`
`&&H[Pe]!=="\r";Pe++)ft+=H[Pe];if(ft=ft.trim(),ft[ft.length-1]==="/"&&(ft=ft.substring(0,ft.length-1),Pe--),!G(ft)){let yt;return ft.trim().length===0?yt="Invalid space after '<'.":yt="Tag '"+ft+"' is an invalid name.",N("InvalidTag",yt,J(H,Pe))}const dt=P(H,Pe);if(dt===!1)return N("InvalidAttr","Attributes for '"+ft+"' have open quote.",J(H,Pe));let Ue=dt.value;if(Pe=dt.index,Ue[Ue.length-1]==="/"){const yt=Pe-Ue.length;Ue=Ue.substring(0,Ue.length-1);const rn=te(Ue,se);if(rn===!0)Te=!0;else return N(rn.err.code,rn.err.msg,J(H,yt+rn.err.line))}else if(rt)if(dt.tagClosed){if(Ue.trim().length>0)return N("InvalidTag","Closing tag '"+ft+"' can't have attributes or invalid starting.",J(H,Ze));{const yt=ne.pop();if(ft!==yt.tagName){let rn=J(H,yt.tagStartPos);return N("InvalidTag","Expected closing tag '"+yt.tagName+"' (opened in line "+rn.line+", col "+rn.col+") instead of closing tag '"+ft+"'.",J(H,Ze))}ne.length==0&&(Ce=!0)}}else return N("InvalidTag","Closing tag '"+ft+"' doesn't have proper closing.",J(H,Pe));else{const yt=te(Ue,se);if(yt!==!0)return N(yt.err.code,yt.err.msg,J(H,Pe-Ue.length+yt.err.line));if(Ce===!0)return N("InvalidXml","Multiple possible root nodes found.",J(H,Pe));se.unpairedTags.indexOf(ft)!==-1||ne.push({tagName:ft,tagStartPos:Ze}),Te=!0}for(Pe++;Pe<H.length;Pe++)if(H[Pe]==="<")if(H[Pe+1]==="!"){Pe++,Pe=A(H,Pe);continue}else if(H[Pe+1]==="?"){if(Pe=S(H,++Pe),Pe.err)return Pe}else break;else if(H[Pe]==="&"){const yt=j(H,Pe);if(yt==-1)return N("InvalidChar","char '&' is not expected.",J(H,Pe));Pe=yt}else if(Ce===!0&&!l(H[Pe]))return N("InvalidXml","Extra text at the end",J(H,Pe));H[Pe]==="<"&&Pe--}}else{if(l(H[Pe]))continue;return N("InvalidChar","char '"+H[Pe]+"' is not expected.",J(H,Pe))}if(Te){if(ne.length==1)return N("InvalidTag","Unclosed tag '"+ne[0].tagName+"'.",J(H,ne[0].tagStartPos));if(ne.length>0)return N("InvalidXml","Invalid '"+JSON.stringify(ne.map(Pe=>Pe.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return N("InvalidXml","Start tag expected.",1);return!0};function l(H){return H===" "||H==="	"||H===`
`||H==="\r"}function S(H,se){const ne=se;for(;se<H.length;se++)if(H[se]=="?"||H[se]==" "){const Te=H.substr(ne,se-ne);if(se>5&&Te==="xml")return N("InvalidXml","XML declaration allowed only at the start of the document.",J(H,se));if(H[se]=="?"&&H[se+1]==">"){se++;break}else continue}return se}function A(H,se){if(H.length>se+5&&H[se+1]==="-"&&H[se+2]==="-"){for(se+=3;se<H.length;se++)if(H[se]==="-"&&H[se+1]==="-"&&H[se+2]===">"){se+=2;break}}else if(H.length>se+8&&H[se+1]==="D"&&H[se+2]==="O"&&H[se+3]==="C"&&H[se+4]==="T"&&H[se+5]==="Y"&&H[se+6]==="P"&&H[se+7]==="E"){let ne=1;for(se+=8;se<H.length;se++)if(H[se]==="<")ne++;else if(H[se]===">"&&(ne--,ne===0))break}else if(H.length>se+9&&H[se+1]==="["&&H[se+2]==="C"&&H[se+3]==="D"&&H[se+4]==="A"&&H[se+5]==="T"&&H[se+6]==="A"&&H[se+7]==="["){for(se+=8;se<H.length;se++)if(H[se]==="]"&&H[se+1]==="]"&&H[se+2]===">"){se+=2;break}}return se}const z='"',C="'";function P(H,se){let ne="",Te="",Ce=!1;for(;se<H.length;se++){if(H[se]===z||H[se]===C)Te===""?Te=H[se]:Te!==H[se]||(Te="");else if(H[se]===">"&&Te===""){Ce=!0;break}ne+=H[se]}return Te!==""?!1:{value:ne,index:se,tagClosed:Ce}}const q=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function te(H,se){const ne=_.getAllMatches(H,q),Te={};for(let Ce=0;Ce<ne.length;Ce++){if(ne[Ce][1].length===0)return N("InvalidAttr","Attribute '"+ne[Ce][2]+"' has no space in starting.",me(ne[Ce]));if(ne[Ce][3]!==void 0&&ne[Ce][4]===void 0)return N("InvalidAttr","Attribute '"+ne[Ce][2]+"' is without value.",me(ne[Ce]));if(ne[Ce][3]===void 0&&!se.allowBooleanAttributes)return N("InvalidAttr","boolean attribute '"+ne[Ce][2]+"' is not allowed.",me(ne[Ce]));const Pe=ne[Ce][2];if(!$(Pe))return N("InvalidAttr","Attribute '"+Pe+"' is an invalid name.",me(ne[Ce]));if(!Te.hasOwnProperty(Pe))Te[Pe]=1;else return N("InvalidAttr","Attribute '"+Pe+"' is repeated.",me(ne[Ce]))}return!0}function Z(H,se){let ne=/\d/;for(H[se]==="x"&&(se++,ne=/[\da-fA-F]/);se<H.length;se++){if(H[se]===";")return se;if(!H[se].match(ne))break}return-1}function j(H,se){if(se++,H[se]===";")return-1;if(H[se]==="#")return se++,Z(H,se);let ne=0;for(;se<H.length;se++,ne++)if(!(H[se].match(/\w/)&&ne<20)){if(H[se]===";")break;return-1}return se}function N(H,se,ne){return{err:{code:H,msg:se,line:ne.line||ne,col:ne.col}}}function $(H){return _.isName(H)}function G(H){return _.isName(H)}function J(H,se){const ne=H.substring(0,se).split(/\r?\n/);return{line:ne.length,col:ne[ne.length-1].length+1}}function me(H){return H.startIndex+H[1].length}},{"./util":4}],6:[function(a,c,d){const _=a("./orderedJs2Xml"),x={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressBooleanAttributes:!0,tagValueProcessor:function(j,N){return N},attributeValueProcessor:function(j,N){return N},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:{">":{regex:new RegExp(">","g"),val:"&gt;"},"<":{regex:new RegExp("<","g"),val:"&lt;"},sQuot:{regex:new RegExp("'","g"),val:"&apos;"},dQuot:{regex:new RegExp('"',"g"),val:"&quot;"}},processEntities:!0,stopNodes:[]};function l(j){this.options=Object.assign({},x,j),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Z),this.processTextOrObjNode=S,this.options.format?(this.indentate=te,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=q,this.buildObjNode=z):(this.buildTextNode=C,this.buildObjNode=A),this.buildTextValNode=C,this.buildObjectNode=A,this.replaceEntitiesValue=P}l.prototype.build=function(j){return this.options.preserveOrder?_(j,this.options):(Array.isArray(j)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(j={[this.options.arrayNodeName]:j}),this.j2x(j,0).val)},l.prototype.j2x=function(j,N){let $="",G="";for(let J in j)if(typeof j[J]!="undefined")if(j[J]===null)G+=this.indentate(N)+"<"+J+"/"+this.tagEndChar;else if(j[J]instanceof Date)G+=this.buildTextNode(j[J],J,"",N);else if(typeof j[J]!="object"){const me=this.isAttribute(J);if(me){let H=this.options.attributeValueProcessor(me,""+j[J]);H=this.replaceEntitiesValue(H),$+=" "+me+'="'+H+'"'}else if(J===this.options.textNodeName){let H=this.options.tagValueProcessor(J,""+j[J]);G+=this.replaceEntitiesValue(H)}else G+=this.buildTextNode(j[J],J,"",N)}else if(Array.isArray(j[J])){const me=j[J].length;for(let H=0;H<me;H++){const se=j[J][H];typeof se=="undefined"||(se===null?G+=this.indentate(N)+"<"+J+"/"+this.tagEndChar:typeof se=="object"?G+=this.processTextOrObjNode(se,J,N):G+=this.buildTextNode(se,J,"",N))}}else if(this.options.attributesGroupName&&J===this.options.attributesGroupName){const me=Object.keys(j[J]),H=me.length;for(let se=0;se<H;se++){let ne=this.options.attributeValueProcessor(me[se],""+j[J][me[se]]);ne=this.replaceEntitiesValue(ne),$+=" "+me[se]+'="'+ne+'"'}}else G+=this.processTextOrObjNode(j[J],J,N);return{attrStr:$,val:G}};function S(j,N,$){const G=this.j2x(j,$+1);return j[this.options.textNodeName]!==void 0&&Object.keys(j).length===1?this.buildTextNode(G.val,N,G.attrStr,$):this.buildObjNode(G.val,N,G.attrStr,$)}function A(j,N,$,G){return $&&j.indexOf("<")===-1?this.indentate(G)+"<"+N+$+">"+j+"</"+N+this.tagEndChar:this.indentate(G)+"<"+N+$+this.tagEndChar+j+this.indentate(G)+"</"+N+this.tagEndChar}function z(j,N,$,G){return j!==""?this.buildObjectNode(j,N,$,G):this.indentate(G)+"<"+N+$+"/"+this.tagEndChar}function C(j,N,$,G){let J=this.options.tagValueProcessor(N,j);return J=this.replaceEntitiesValue(J),this.indentate(G)+"<"+N+$+">"+J+"</"+N+this.tagEndChar}function P(j){if(j&&j.length>0&&this.options.processEntities)for(const N in this.options.entities){const $=this.options.entities[N];j=j.replace($.regex,$.val)}return j}function q(j,N,$,G){return j===""&&this.options.unpairedTags.indexOf(N)!==-1?this.indentate(G)+"<"+N+$+this.tagEndChar:j!==""?this.buildTextValNode(j,N,$,G):this.indentate(G)+"<"+N+$+"/"+this.tagEndChar}function te(j){return this.options.indentBy.repeat(j)}function Z(j){return j.startsWith(this.options.attributeNamePrefix)?j.substr(this.attrPrefixLen):!1}c.exports=l},{"./orderedJs2Xml":7}],7:[function(a,c,d){const{EOL:_}=a("os");function x(P,q){return l(P,q,"",0)}function l(P,q,te,Z){let j="",N="";q.format&&q.indentBy.length>0&&(N=_+""+q.indentBy.repeat(Z));for(let $=0;$<P.length;$++){const G=P[$],J=S(G);let me="";if(te.length===0?me=J:me=`${te}.${J}`,J===q.textNodeName){let Te=G[J];z(me,q)||(Te=q.tagValueProcessor(J,Te),Te=C(Te,q)),j+=N+Te;continue}else if(J===q.cdataPropName){j+=N+`<![CDATA[${G[J][0][q.textNodeName]}]]>`;continue}else if(J===q.commentPropName){j+=N+`<!--${G[J][0][q.textNodeName]}-->`;continue}else if(J[0]==="?"){const Te=A(G[":@"],q);j+=N+`<${J} ${G[J][0][q.textNodeName]} ${Te}?>`;continue}const H=A(G[":@"],q);let se=N+`<${J}${H}`,ne=l(G[J],q,me,Z+1);q.unpairedTags.indexOf(J)!==-1?j+=se+">":(!ne||ne.length===0)&&q.suppressEmptyNode?j+=se+"/>":j+=se+`>${ne}${N}</${J}>`}return j}function S(P){const q=Object.keys(P);for(let te=0;te<q.length;te++){const Z=q[te];if(Z!==":@")return Z}}function A(P,q){let te="";if(P&&!q.ignoreAttributes)for(attr in P){let Z=q.attributeValueProcessor(attr,P[attr]);Z=C(Z,q),Z===!0&&q.suppressBooleanAttributes?te+=` ${attr.substr(q.attributeNamePrefix.length)}`:te+=` ${attr.substr(q.attributeNamePrefix.length)}="${Z}"`}return te}function z(P,q){P=P.substr(0,P.length-q.textNodeName.length-1);let te=P.substr(P.lastIndexOf(".")+1);for(let Z in q.stopNodes)if(q.stopNodes[Z]===P||q.stopNodes[Z]==="*."+te)return!0;return!1}function C(P,q){if(P&&P.length>0&&q.processEntities)for(const te in q.entities){const Z=q.entities[te];P=P.replace(Z.regex,Z.val)}return P}c.exports=x},{os:15}],8:[function(a,c,d){function _(S,A){const z={};if(S[A+3]==="O"&&S[A+4]==="C"&&S[A+5]==="T"&&S[A+6]==="Y"&&S[A+7]==="P"&&S[A+8]==="E"){A=A+9;let C=1,P=!1,q=!1,te=!1,Z="";for(;A<S.length;A++)if(S[A]==="<"){if(P&&S[A+1]==="!"&&S[A+2]==="E"&&S[A+3]==="N"&&S[A+4]==="T"&&S[A+5]==="I"&&S[A+6]==="T"&&S[A+7]==="Y")A+=7,q=!0;else if(P&&S[A+1]==="!"&&S[A+2]==="E"&&S[A+3]==="L"&&S[A+4]==="E"&&S[A+5]==="M"&&S[A+6]==="E"&&S[A+7]==="N"&&S[A+8]==="T")A+=8;else if(S[A+1]==="!"&&S[A+2]==="-"&&S[A+3]==="-")te=!0;else throw new Error("Invalid DOCTYPE");C++,Z=""}else if(S[A]===">"){if(te)if(S[A-1]==="-"&&S[A-2]==="-")te=!1;else throw new Error("Invalid XML comment in DOCTYPE");else q&&(l(Z,z),q=!1);if(C--,C===0)break}else S[A]==="["?P=!0:Z+=S[A];if(C!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:z,i:A}}const x=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(S,A){const z=x.exec(S);z&&(A[z[1]]={regx:RegExp(`&${z[1]};`,"g"),val:z[3]})}c.exports=_},{}],9:[function(a,c,d){const _={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,S){return S},attributeValueProcessor:function(l,S){return S},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1},x=function(l){return Object.assign({},_,l)};d.buildOptions=x,d.defaultOptions=_},{}],10:[function(a,c,d){const _=a("../util"),x=a("./xmlNode"),l=a("./DocTypeReader"),S=a("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,_.nameRegexp);class A{constructor(Te){this.options=Te,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=z,this.parseXml=Z,this.parseTextData=C,this.resolveNameSpace=P,this.buildAttributesMap=te,this.isItStopNode=$,this.replaceEntitiesValue=j,this.readStopNodeData=H,this.saveTextToParentTag=N}}function z(ne){const Te=Object.keys(ne);for(let Ce=0;Ce<Te.length;Ce++){const Pe=Te[Ce];this.lastEntities[Pe]={regex:new RegExp("&"+Pe+";","g"),val:ne[Pe]}}}function C(ne,Te,Ce,Pe,Ze,rt,ft){if(ne!==void 0&&(this.options.trimValues&&!Pe&&(ne=ne.trim()),ne.length>0)){ft||(ne=this.replaceEntitiesValue(ne));const dt=this.options.tagValueProcessor(Te,ne,Ce,Ze,rt);return dt==null?ne:typeof dt!=typeof ne||dt!==ne?dt:this.options.trimValues?se(ne,this.options.parseTagValue,this.options.numberParseOptions):ne.trim()===ne?se(ne,this.options.parseTagValue,this.options.numberParseOptions):ne}}function P(ne){if(this.options.removeNSPrefix){const Te=ne.split(":"),Ce=ne.charAt(0)==="/"?"/":"";if(Te[0]==="xmlns")return"";Te.length===2&&(ne=Ce+Te[1])}return ne}const q=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function te(ne,Te){if(!this.options.ignoreAttributes&&typeof ne=="string"){const Ce=_.getAllMatches(ne,q),Pe=Ce.length,Ze={};for(let rt=0;rt<Pe;rt++){const ft=this.resolveNameSpace(Ce[rt][1]);let dt=Ce[rt][4];const Ue=this.options.attributeNamePrefix+ft;if(ft.length)if(dt!==void 0){this.options.trimValues&&(dt=dt.trim()),dt=this.replaceEntitiesValue(dt);const yt=this.options.attributeValueProcessor(ft,dt,Te);yt==null?Ze[Ue]=dt:typeof yt!=typeof dt||yt!==dt?Ze[Ue]=yt:Ze[Ue]=se(dt,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(Ze[Ue]=!0)}if(!Object.keys(Ze).length)return;if(this.options.attributesGroupName){const rt={};return rt[this.options.attributesGroupName]=Ze,rt}return Ze}}const Z=function(ne){ne=ne.replace(/\r\n?/g,`
`);const Te=new x("!xml");let Ce=Te,Pe="",Ze="";for(let rt=0;rt<ne.length;rt++)if(ne[rt]==="<")if(ne[rt+1]==="/"){const dt=J(ne,">",rt,"Closing Tag is not closed.");let Ue=ne.substring(rt+2,dt).trim();if(this.options.removeNSPrefix){const yt=Ue.indexOf(":");yt!==-1&&(Ue=Ue.substr(yt+1))}Ce&&(Pe=this.saveTextToParentTag(Pe,Ce,Ze)),Ze=Ze.substr(0,Ze.lastIndexOf(".")),Ce=this.tagsNodeStack.pop(),Pe="",rt=dt}else if(ne[rt+1]==="?"){let dt=me(ne,rt,!1,"?>");if(!dt)throw new Error("Pi Tag is not closed.");Pe=this.saveTextToParentTag(Pe,Ce,Ze);const Ue=new x(dt.tagName);Ue.add(this.options.textNodeName,""),dt.tagName!==dt.tagExp&&dt.attrExpPresent&&(Ue[":@"]=this.buildAttributesMap(dt.tagExp,Ze)),Ce.addChild(Ue),rt=dt.closeIndex+1}else if(ne.substr(rt+1,3)==="!--"){const dt=J(ne,"-->",rt,"Comment is not closed.");if(this.options.commentPropName){const Ue=ne.substring(rt+4,dt-2);Pe=this.saveTextToParentTag(Pe,Ce,Ze),Ce.add(this.options.commentPropName,[{[this.options.textNodeName]:Ue}])}rt=dt}else if(ne.substr(rt+1,2)==="!D"){const dt=l(ne,rt);this.docTypeEntities=dt.entities,rt=dt.i}else if(ne.substr(rt+1,2)==="!["){const dt=J(ne,"]]>",rt,"CDATA is not closed.")-2,Ue=ne.substring(rt+9,dt);if(Pe=this.saveTextToParentTag(Pe,Ce,Ze),this.options.cdataPropName)Ce.add(this.options.cdataPropName,[{[this.options.textNodeName]:Ue}]);else{let yt=this.parseTextData(Ue,Ce.tagname,Ze,!0,!1,!0);yt||(yt=""),Ce.add(this.options.textNodeName,yt)}rt=dt+2}else{let dt=me(ne,rt,this.options.removeNSPrefix),Ue=dt.tagName,yt=dt.tagExp,rn=dt.attrExpPresent,vn=dt.closeIndex;Ce&&Pe&&Ce.tagname!=="!xml"&&(Pe=this.saveTextToParentTag(Pe,Ce,Ze,!1)),Ue!==Te.tagname&&(Ze+=Ze?"."+Ue:Ue);const Sn=Ce;if(Sn&&this.options.unpairedTags.indexOf(Sn.tagname)!==-1&&(Ce=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,Ze,Ue)){let Ye="";if(!(yt.length>0&&yt.lastIndexOf("/")===yt.length-1)){if(this.options.unpairedTags.indexOf(Ue)===-1){const At=this.readStopNodeData(ne,Ue,vn+1);if(!At)throw new Error(`Unexpected end of ${Ue}`);rt=At.i,Ye=At.tagContent}}const mt=new x(Ue);Ue!==yt&&rn&&(mt[":@"]=this.buildAttributesMap(yt,Ze)),Ye&&(Ye=this.parseTextData(Ye,Ue,Ze,!0,rn,!0,!0)),Ze=Ze.substr(0,Ze.lastIndexOf(".")),mt.add(this.options.textNodeName,Ye),Ce.addChild(mt)}else{if(yt.length>0&&yt.lastIndexOf("/")===yt.length-1){Ue[Ue.length-1]==="/"?(Ue=Ue.substr(0,Ue.length-1),yt=Ue):yt=yt.substr(0,yt.length-1);const Ye=new x(Ue);Ue!==yt&&rn&&(Ye[":@"]=this.buildAttributesMap(yt,Ze)),Ze=Ze.substr(0,Ze.lastIndexOf(".")),Ce.addChild(Ye)}else{const Ye=new x(Ue);this.tagsNodeStack.push(Ce),Ue!==yt&&rn&&(Ye[":@"]=this.buildAttributesMap(yt,Ze)),Ce.addChild(Ye),Ce=Ye}Pe="",rt=vn}}else Pe+=ne[rt];return Te.child},j=function(ne){if(this.options.processEntities){for(let Te in this.docTypeEntities){const Ce=this.docTypeEntities[Te];ne=ne.replace(Ce.regx,Ce.val)}for(let Te in this.lastEntities){const Ce=this.lastEntities[Te];ne=ne.replace(Ce.regex,Ce.val)}if(this.options.htmlEntities)for(let Te in this.htmlEntities){const Ce=this.htmlEntities[Te];ne=ne.replace(Ce.regex,Ce.val)}}return ne};function N(ne,Te,Ce,Pe){return ne&&(Pe===void 0&&(Pe=Object.keys(Te.child).length===0),ne=this.parseTextData(ne,Te.tagname,Ce,!1,Te[":@"]?Object.keys(Te[":@"]).length!==0:!1,Pe),ne!==void 0&&ne!==""&&Te.add(this.options.textNodeName,ne),ne=""),ne}function $(ne,Te,Ce){const Pe="*."+Ce;for(const Ze in ne){const rt=ne[Ze];if(Pe===rt||Te===rt)return!0}return!1}function G(ne,Te,Ce=">"){let Pe,Ze="";for(let rt=Te;rt<ne.length;rt++){let ft=ne[rt];if(Pe)ft===Pe&&(Pe="");else if(ft==='"'||ft==="'")Pe=ft;else if(ft===Ce[0])if(Ce[1]){if(ne[rt+1]===Ce[1])return{data:Ze,index:rt}}else return{data:Ze,index:rt};else ft==="	"&&(ft=" ");Ze+=ft}}function J(ne,Te,Ce,Pe){const Ze=ne.indexOf(Te,Ce);if(Ze===-1)throw new Error(Pe);return Ze+Te.length-1}function me(ne,Te,Ce,Pe=">"){const Ze=G(ne,Te+1,Pe);if(!Ze)return;let rt=Ze.data;const ft=Ze.index,dt=rt.search(/\s/);let Ue=rt,yt=!0;if(dt!==-1&&(Ue=rt.substr(0,dt).replace(/\s\s*$/,""),rt=rt.substr(dt+1)),Ce){const rn=Ue.indexOf(":");rn!==-1&&(Ue=Ue.substr(rn+1),yt=Ue!==Ze.data.substr(rn+1))}return{tagName:Ue,tagExp:rt,closeIndex:ft,attrExpPresent:yt}}function H(ne,Te,Ce){const Pe=Ce;for(;Ce<ne.length;Ce++)if(ne[Ce]==="<"&&ne[Ce+1]==="/"){const Ze=J(ne,">",Ce,`${Te} is not closed`);if(ne.substring(Ce+2,Ze).trim()===Te)return{tagContent:ne.substring(Pe,Ce),i:Ze};Ce=Ze}}function se(ne,Te,Ce){if(Te&&typeof ne=="string"){const Pe=ne.trim();return Pe==="true"?!0:Pe==="false"?!1:S(ne,Ce)}else return _.isExist(ne)?ne:""}c.exports=A},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:16}],11:[function(a,c,d){const{buildOptions:_}=a("./OptionsBuilder"),x=a("./OrderedObjParser"),{prettify:l}=a("./node2json"),S=a("../validator");class A{constructor(C){this.externalEntities={},this.options=_(C)}parse(C,P){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(P){P===!0&&(P={});const Z=S.validate(C,P);if(Z!==!0)throw Error(`${Z.err.msg}:${Z.err.line}:${Z.err.col}`)}const q=new x(this.options);q.addExternalEntities(this.externalEntities);const te=q.parseXml(C);return this.options.preserveOrder||te===void 0?te:l(te,this.options)}addEntity(C,P){if(P.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[C]=P}}c.exports=A},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(a,c,d){function _(z,C){return x(z,C)}function x(z,C,P){let q;const te={};for(let Z=0;Z<z.length;Z++){const j=z[Z],N=l(j);let $="";if(P===void 0?$=N:$=P+"."+N,N===C.textNodeName)q===void 0?q=j[N]:q+=""+j[N];else{if(N===void 0)continue;if(j[N]){let G=x(j[N],C,$);const J=A(G,C);j[":@"]?S(G,j[":@"],$,C):Object.keys(G).length===1&&G[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?G=G[C.textNodeName]:Object.keys(G).length===0&&(C.alwaysCreateTextNode?G[C.textNodeName]="":G=""),te[N]!==void 0?(Array.isArray(te[N])||(te[N]=[te[N]]),te[N].push(G)):C.isArray(N,$,J)?te[N]=[G]:te[N]=G}}}return typeof q=="string"?q.length>0&&(te[C.textNodeName]=q):q!==void 0&&(te[C.textNodeName]=q),te}function l(z){const C=Object.keys(z);for(let P=0;P<C.length;P++){const q=C[P];if(q!==":@")return q}}function S(z,C,P,q){if(C){const te=Object.keys(C),Z=te.length;for(let j=0;j<Z;j++){const N=te[j];q.isArray(N,P+"."+N,!0,!0)?z[N]=[C[N]]:z[N]=C[N]}}}function A(z,C){const P=Object.keys(z).length;return!!(P===0||P===1&&z[C.textNodeName])}d.prettify=_},{}],13:[function(a,c,d){class _{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,S){this.child.push({[l]:S})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,[":@"]:l[":@"]}):this.child.push({[l.tagname]:l.child})}}c.exports=_},{}],14:[function(a,c,d){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(_,x,l,S,A){var z,C,P=A*8-S-1,q=(1<<P)-1,te=q>>1,Z=-7,j=l?A-1:0,N=l?-1:1,$=_[x+j];for(j+=N,z=$&(1<<-Z)-1,$>>=-Z,Z+=P;Z>0;z=z*256+_[x+j],j+=N,Z-=8);for(C=z&(1<<-Z)-1,z>>=-Z,Z+=S;Z>0;C=C*256+_[x+j],j+=N,Z-=8);if(z===0)z=1-te;else{if(z===q)return C?NaN:($?-1:1)*(1/0);C=C+Math.pow(2,S),z=z-te}return($?-1:1)*C*Math.pow(2,z-S)},d.write=function(_,x,l,S,A,z){var C,P,q,te=z*8-A-1,Z=(1<<te)-1,j=Z>>1,N=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=S?0:z-1,G=S?1:-1,J=x<0||x===0&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(P=isNaN(x)?1:0,C=Z):(C=Math.floor(Math.log(x)/Math.LN2),x*(q=Math.pow(2,-C))<1&&(C--,q*=2),C+j>=1?x+=N/q:x+=N*Math.pow(2,1-j),x*q>=2&&(C++,q/=2),C+j>=Z?(P=0,C=Z):C+j>=1?(P=(x*q-1)*Math.pow(2,A),C=C+j):(P=x*Math.pow(2,j-1)*Math.pow(2,A),C=0));A>=8;_[l+$]=P&255,$+=G,P/=256,A-=8);for(C=C<<A|P,te+=A;te>0;_[l+$]=C&255,$+=G,C/=256,te-=8);_[l+$-G]|=J*128}},{}],15:[function(a,c,d){d.endianness=function(){return"LE"},d.hostname=function(){return typeof location!="undefined"?location.hostname:""},d.loadavg=function(){return[]},d.uptime=function(){return 0},d.freemem=function(){return Number.MAX_VALUE},d.totalmem=function(){return Number.MAX_VALUE},d.cpus=function(){return[]},d.type=function(){return"Browser"},d.release=function(){return typeof navigator!="undefined"?navigator.appVersion:""},d.networkInterfaces=d.getNetworkInterfaces=function(){return{}},d.arch=function(){return"javascript"},d.platform=function(){return"browser"},d.tmpdir=d.tmpDir=function(){return"/tmp"},d.EOL=`
`,d.homedir=function(){return"/"}},{}],16:[function(a,c,d){const _=/^[-+]?0x[a-fA-F0-9]+$/,x=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function S(z,C={}){if(C=Object.assign({},l,C),!z||typeof z!="string")return z;let P=z.trim();if(C.skipLike!==void 0&&C.skipLike.test(P))return z;if(C.hex&&_.test(P))return Number.parseInt(P,16);{const q=x.exec(P);if(q){const te=q[1],Z=q[2];let j=A(q[3]);const N=q[4]||q[6];if(!C.leadingZeros&&Z.length>0&&te&&P[2]!==".")return z;if(!C.leadingZeros&&Z.length>0&&!te&&P[1]!==".")return z;{const $=Number(P),G=""+$;return G.search(/[eE]/)!==-1||N?C.eNotation?$:z:P.indexOf(".")!==-1?G==="0"&&j===""||G===j||te&&G==="-"+j?$:z:Z?j===G||te+j===G?$:z:P===G||P===te+G?$:z}}else return z}}function A(z){return z&&z.indexOf(".")!==-1&&(z=z.replace(/0+$/,""),z==="."?z="0":z[0]==="."?z="0"+z:z[z.length-1]==="."&&(z=z.substr(0,z.length-1))),z}c.exports=S},{}],17:[function(a,c,d){(function(_){(function(){var x=this&&this.__awaiter||function(P,q,te,Z){function j(N){return N instanceof te?N:new te(function($){$(N)})}return new(te||(te=Promise))(function(N,$){function G(H){try{me(Z.next(H))}catch(se){$(se)}}function J(H){try{me(Z.throw(H))}catch(se){$(se)}}function me(H){H.done?N(H.value):j(H.value).then(G,J)}me((Z=Z.apply(P,q||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.osmFetch=void 0;const l=a("../auth"),S=a("../config"),A=a("./_xml"),z=P=>typeof btoa=="undefined"?_.from(P,"binary").toString("base64"):btoa(P);function C(P,q,te){return x(this,void 0,void 0,function*(){const{apiUrl:Z,authHeader:j,basicAuth:N,userAgent:$}=(0,S.getConfig)(),G=N&&`Basic ${z(`${N.username}:${N.password}`)}`,J=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let me=new URLSearchParams(q).toString();me&&(me=`?${me}`);const H=yield fetch(`${Z}/api${P}${me}`,Object.assign(Object.assign({},te),{headers:Object.assign({Authorization:j||G||J||"","User-Agent":$},te==null?void 0:te.headers)})),se=H.headers.get("Content-Type");if(se==null?void 0:se.startsWith("application/xml")){const ne=yield H.text();return yield A.xmlParser.parse(ne)}if(se==null?void 0:se.startsWith("application/json"))return H.json();if(H.ok)return yield H.text();throw new Error(`OSM API: ${yield H.text()}`)})}d.osmFetch=C}).call(this)}).call(this,a("buffer").Buffer)},{"../auth":38,"../config":40,"./_xml":18,buffer:2}],18:[function(a,c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.xmlParser=void 0;const _=a("fast-xml-parser");d.xmlParser=new _.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:x=>x!=="$"})},{"fast-xml-parser":3}],19:[function(a,c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.createOsmChangeXml=d.createChangesetMetaXml=void 0;const _=a("fast-xml-parser"),x=new _.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,attributeValueProcessor:(z,C)=>C.replace(/&/g,"&amp;")});function l(z){return x.build({osm:{changeset:{tag:Object.entries(z).map(([C,P])=>({$k:C,$v:P}))}}})}d.createChangesetMetaXml=l;const S=(z,C,P)=>C.reduce((q,te)=>{const Z={$id:te.id,$version:P?0:te.version,$changeset:z,tag:Object.entries(te.tags||{}).map(([j,N])=>({$k:j,$v:N}))};switch(te.type){case"node":{const j=Object.assign(Object.assign({},Z),{$lat:te.lat,$lon:te.lon});return Object.assign(Object.assign({},q),{node:[...q.node,j]})}case"way":{if(!te.nodes)throw new Error("Way has no nodes");const j=Object.assign(Object.assign({},Z),{nd:te.nodes.map(N=>({$ref:N}))});return Object.assign(Object.assign({},q),{way:[...q.way,j]})}case"relation":{if(!te.members)throw new Error("Relation has no members");const j=Object.assign(Object.assign({},Z),{member:te.members.map(N=>({$type:N.type,$ref:N.ref,$role:N.role}))});return Object.assign(Object.assign({},q),{relation:[...q.relation,j]})}default:return q}},{node:[],way:[],relation:[]});function A(z,C,P){return x.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},P),{create:[S(z,C.create,!0)],modify:[S(z,C.modify)],delete:[Object.assign({"$if-unused":!0},S(z,C.delete))]})})}d.createOsmChangeXml=A},{"fast-xml-parser":3}],20:[function(a,c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.parseOsmChangeXml=d.parseOsmChangeJson=void 0;const _=a("../_xml");function x(z){return{changeset:+z.$.changeset,id:+z.$.id,timestamp:z.$.timestamp,uid:+z.$.uid,user:z.$.user,version:+z.$.version,tags:z.tag?Object.fromEntries(z.tag.map(C=>[C.$.k,C.$.v])):void 0}}const l=z=>{const C=[];if(z.node){const P=z.node.map(q=>Object.assign(Object.assign({type:"node"},x(q)),{lat:+q.$.lat,lon:+q.$.lon}));C.push(...P)}if(z.way){const P=z.way.map(q=>{var te;return Object.assign(Object.assign({type:"way"},x(q)),{nodes:((te=q.nd)===null||te===void 0?void 0:te.map(Z=>+Z.$.ref))||[]})});C.push(...P)}if(z.relation){const P=z.relation.map(q=>{var te;return Object.assign(Object.assign({type:"relation"},x(q)),{members:((te=q.member)===null||te===void 0?void 0:te.map(Z=>({ref:+Z.$.ref,role:Z.$.role,type:Z.$.type})))||[]})});C.push(...P)}return C};function S(z){var C,P,q;return{create:((C=z.osmChange[0].create)===null||C===void 0?void 0:C.flatMap(l))||[],modify:((P=z.osmChange[0].modify)===null||P===void 0?void 0:P.flatMap(l))||[],delete:((q=z.osmChange[0].delete)===null||q===void 0?void 0:q.flatMap(l))||[]}}d.parseOsmChangeJson=S;function A(z){const C=_.xmlParser.parse(z);return console.log(C),S(C)}d.parseOsmChangeXml=A},{"../_xml":18}],21:[function(a,c,d){var _=this&&this.__awaiter||function(S,A,z,C){function P(q){return q instanceof z?q:new z(function(te){te(q)})}return new(z||(z=Promise))(function(q,te){function Z($){try{N(C.next($))}catch(G){te(G)}}function j($){try{N(C.throw($))}catch(G){te(G)}}function N($){$.done?q($.value):P($.value).then(Z,j)}N((C=C.apply(S,A||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.createChangesetComment=void 0;const x=a("../_osmFetch");function l(S,A){return _(this,void 0,void 0,function*(){yield(0,x.osmFetch)(`/0.6/changeset/${S}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(A)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}d.createChangesetComment=l},{"../_osmFetch":17}],22:[function(a,c,d){var _=this&&this.__awaiter||function(A,z,C,P){function q(te){return te instanceof C?te:new C(function(Z){Z(te)})}return new(C||(C=Promise))(function(te,Z){function j(G){try{$(P.next(G))}catch(J){Z(J)}}function N(G){try{$(P.throw(G))}catch(J){Z(J)}}function $(G){G.done?te(G.value):q(G.value).then(j,N)}$((P=P.apply(A,z||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getChangesetDiff=void 0;const x=a("../_osmFetch"),l=a("./_parseOsmChangeXml");function S(A){return _(this,void 0,void 0,function*(){const z=yield(0,x.osmFetch)(`/0.6/changeset/${A}/download`);return(0,l.parseOsmChangeJson)(z)})}d.getChangesetDiff=S},{"../_osmFetch":17,"./_parseOsmChangeXml":20}],23:[function(a,c,d){var _=this&&this.__awaiter||function(C,P,q,te){function Z(j){return j instanceof q?j:new q(function(N){N(j)})}return new(q||(q=Promise))(function(j,N){function $(me){try{J(te.next(me))}catch(H){N(H)}}function G(me){try{J(te.throw(me))}catch(H){N(H)}}function J(me){me.done?j(me.value):Z(me.value).then($,G)}J((te=te.apply(C,P||[])).next())})},x=this&&this.__rest||function(C,P){var q={};for(var te in C)Object.prototype.hasOwnProperty.call(C,te)&&P.indexOf(te)<0&&(q[te]=C[te]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,te=Object.getOwnPropertySymbols(C);Z<te.length;Z++)P.indexOf(te[Z])<0&&Object.prototype.propertyIsEnumerable.call(C,te[Z])&&(q[te[Z]]=C[te[Z]]);return q};Object.defineProperty(d,"__esModule",{value:!0}),d.getChangeset=d.listChangesets=void 0;const l=a("../_osmFetch"),S=C=>{var P;return{id:+C.$.id,created_at:new Date(C.$.created_at),closed_at:new Date(C.$.closed_at),open:C.$.open==="true",comments_count:+C.$.comments_count,changes_count:+C.$.changes_count,min_lat:+C.$.min_lat,min_lon:+C.$.min_lon,max_lat:+C.$.max_lat,max_lon:+C.$.max_lon,uid:+C.$.uid,user:C.$.user,tags:Object.fromEntries(C.tag.map(q=>[q.$.k,q.$.v])),discussion:(P=C.discussion)===null||P===void 0?void 0:P[0].comment.map(q=>({date:new Date(q.$.date),user:q.$.user,uid:q.$.uid,text:q.text[0]}))}};function A(C){var P;return _(this,void 0,void 0,function*(){const{only:q}=C,te=x(C,["only"]);return((P=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},q&&{[q]:!0}),te))).osm[0].changeset)===null||P===void 0?void 0:P.map(S))||[]})}d.listChangesets=A;function z(C,P=!0){return _(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${C}`,{include_discussion:P})).osm[0].changeset.map(S)[0]})}d.getChangeset=z},{"../_osmFetch":17}],24:[function(a,c,d){var _=this&&this.__createBinding||(Object.create?function(A,z,C,P){P===void 0&&(P=C),Object.defineProperty(A,P,{enumerable:!0,get:function(){return z[C]}})}:function(A,z,C,P){P===void 0&&(P=C),A[P]=z[C]}),x=this&&this.__exportStar||function(A,z){for(var C in A)C!=="default"&&!Object.prototype.hasOwnProperty.call(z,C)&&_(z,A,C)};Object.defineProperty(d,"__esModule",{value:!0}),d.createOsmChangeXml=d.parseOsmChangeXml=void 0,x(a("./createChangesetComment"),d),x(a("./getChangesetDiff"),d),x(a("./getChangesets"),d),x(a("./uploadChangeset"),d);var l=a("./_parseOsmChangeXml");Object.defineProperty(d,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var S=a("./_createOsmChangeXml");Object.defineProperty(d,"createOsmChangeXml",{enumerable:!0,get:function(){return S.createOsmChangeXml}})},{"./_createOsmChangeXml":19,"./_parseOsmChangeXml":20,"./createChangesetComment":21,"./getChangesetDiff":22,"./getChangesets":23,"./uploadChangeset":25}],25:[function(a,c,d){var _=this&&this.__awaiter||function(A,z,C,P){function q(te){return te instanceof C?te:new C(function(Z){Z(te)})}return new(C||(C=Promise))(function(te,Z){function j(G){try{$(P.next(G))}catch(J){Z(J)}}function N(G){try{$(P.throw(G))}catch(J){Z(J)}}function $(G){G.done?te(G.value):q(G.value).then(j,N)}$((P=P.apply(A,z||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.uploadChangeset=void 0;const x=a("../_osmFetch"),l=a("./_createOsmChangeXml");function S(A,z){return _(this,void 0,void 0,function*(){const C=(0,l.createChangesetMetaXml)(A),P=+(yield(0,x.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:C,headers:{"content-type":"application/xml; charset=utf-8"}})),q=(0,l.createOsmChangeXml)(P,z);return yield(0,x.osmFetch)(`/0.6/changeset/${P}/upload`,void 0,{method:"POST",body:q,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,x.osmFetch)(`/0.6/changeset/${P}/close`,void 0,{method:"PUT"}),+P})}d.uploadChangeset=S},{"../_osmFetch":17,"./_createOsmChangeXml":19}],26:[function(a,c,d){var _=this&&this.__awaiter||function(S,A,z,C){function P(q){return q instanceof z?q:new z(function(te){te(q)})}return new(z||(z=Promise))(function(q,te){function Z($){try{N(C.next($))}catch(G){te(G)}}function j($){try{N(C.throw($))}catch(G){te(G)}}function N($){$.done?q($.value):P($.value).then(Z,j)}N((C=C.apply(S,A||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getCapabilities=void 0;const x=a("./_osmFetch");function l(){return _(this,void 0,void 0,function*(){const S=yield(0,x.osmFetch)("/capabilities");return{limits:{maxArea:+S.osm[0].api[0].area[0].$.maximum,maxNoteArea:+S.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+S.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+S.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+S.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+S.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:S.osm[0].policy[0].imagery[0].blacklist.map(z=>z.$.regex)}}})}d.getCapabilities=l},{"./_osmFetch":17}],27:[function(a,c,d){var _=this&&this.__awaiter||function(q,te,Z,j){function N($){return $ instanceof Z?$:new Z(function(G){G($)})}return new(Z||(Z=Promise))(function($,G){function J(se){try{H(j.next(se))}catch(ne){G(ne)}}function me(se){try{H(j.throw(se))}catch(ne){G(ne)}}function H(se){se.done?$(se.value):N(se.value).then(J,me)}H((j=j.apply(q,te||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getRelationsForElement=d.getWaysForNode=d.getFeatureHistory=d.getFeatureAtVersion=d.getFeatures=d.getFeature=void 0;const x=a("./_osmFetch");function l(q,te,Z){return _(this,void 0,void 0,function*(){const j=Z&&q!=="node"?"/full":"";return(yield(0,x.osmFetch)(`/0.6/${q}/${te}${j}.json`)).elements})}d.getFeature=l;function S(q,te){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)(`/0.6/${q}s.json?${q}s=${te.join(",")}`)).elements})}d.getFeatures=S;function A(q,te,Z){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)(`/0.6/${q}/${te}/${Z}.json`)).elements[0]})}d.getFeatureAtVersion=A;function z(q,te){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)(`/0.6/${q}/${te}/history.json`)).elements})}d.getFeatureHistory=z;function C(q){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)(`/0.6/node/${q}/ways.json`)).elements})}d.getWaysForNode=C;function P(q,te){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)(`/0.6/${q}/${te}/relation.json`)).elements})}d.getRelationsForElement=P},{"./_osmFetch":17}],28:[function(a,c,d){var _=this&&this.__awaiter||function(S,A,z,C){function P(q){return q instanceof z?q:new z(function(te){te(q)})}return new(z||(z=Promise))(function(q,te){function Z($){try{N(C.next($))}catch(G){te(G)}}function j($){try{N(C.throw($))}catch(G){te(G)}}function N($){$.done?q($.value):P($.value).then(Z,j)}N((C=C.apply(S,A||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getMapData=void 0;const x=a("./_osmFetch");function l(S){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)("/0.6/map.json",{bbox:S})).elements})}d.getMapData=l},{"./_osmFetch":17}],29:[function(a,c,d){var _=this&&this.__awaiter||function(S,A,z,C){function P(q){return q instanceof z?q:new z(function(te){te(q)})}return new(z||(z=Promise))(function(q,te){function Z($){try{N(C.next($))}catch(G){te(G)}}function j($){try{N(C.throw($))}catch(G){te(G)}}function N($){$.done?q($.value):P($.value).then(Z,j)}N((C=C.apply(S,A||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getUIdFromDisplayName=void 0;const x=a("./changesets");function l(S){return _(this,void 0,void 0,function*(){const A=yield(0,x.listChangesets)({display_name:S});if(!A.length)throw new Error("Could not get uid because the user has never edited the map");return A[0].uid})}d.getUIdFromDisplayName=l},{"./changesets":24}],30:[function(a,c,d){var _=this&&this.__awaiter||function(A,z,C,P){function q(te){return te instanceof C?te:new C(function(Z){Z(te)})}return new(C||(C=Promise))(function(te,Z){function j(G){try{$(P.next(G))}catch(J){Z(J)}}function N(G){try{$(P.throw(G))}catch(J){Z(J)}}function $(G){G.done?te(G.value):q(G.value).then(j,N)}$((P=P.apply(A,z||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getUsers=d.getUser=void 0;const x=a("./_osmFetch");function l(A){return _(this,void 0,void 0,function*(){const z=yield(0,x.osmFetch)(`/0.6/user/${A==="me"?"details":A}.json`);return Object.assign(Object.assign({},z.user),{account_created:new Date(z.user.account_created)})})}d.getUser=l;function S(A){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)("/0.6/users",{users:A})).users.map(C=>Object.assign(Object.assign({},C),{account_created:new Date(C.account_created)}))})}d.getUsers=S},{"./_osmFetch":17}],31:[function(a,c,d){var _=this&&this.__createBinding||(Object.create?function(l,S,A,z){z===void 0&&(z=A),Object.defineProperty(l,z,{enumerable:!0,get:function(){return S[A]}})}:function(l,S,A,z){z===void 0&&(z=A),l[z]=S[A]}),x=this&&this.__exportStar||function(l,S){for(var A in l)A!=="default"&&!Object.prototype.hasOwnProperty.call(S,A)&&_(S,l,A)};Object.defineProperty(d,"__esModule",{value:!0}),x(a("./changesets"),d),x(a("./notes"),d),x(a("./getCapabilities"),d),x(a("./getFeature"),d),x(a("./getMapData"),d),x(a("./getUIdFromDisplayName"),d),x(a("./getUser"),d)},{"./changesets":24,"./getCapabilities":26,"./getFeature":27,"./getMapData":28,"./getUIdFromDisplayName":29,"./getUser":30,"./notes":33}],32:[function(a,c,d){var _=this&&this.__awaiter||function(P,q,te,Z){function j(N){return N instanceof te?N:new te(function($){$(N)})}return new(te||(te=Promise))(function(N,$){function G(H){try{me(Z.next(H))}catch(se){$(se)}}function J(H){try{me(Z.throw(H))}catch(se){$(se)}}function me(H){H.done?N(H.value):j(H.value).then(G,J)}me((Z=Z.apply(P,q||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getNote=d.getNotesForArea=d.getNotesForQuery=void 0;const x=a("../_osmFetch"),l=P=>{const[q,te]=P.geometry.coordinates;return Object.assign(Object.assign({},P.properties),{location:{lat:te,lng:q}})};function S(P,q){return _(this,void 0,void 0,function*(){return(yield(0,x.osmFetch)(`/0.6/notes${q?"/search":""}.json`,P)).features.map(l)})}function A(P){return S(P,!0)}d.getNotesForQuery=A;function z(P){return S({bbox:P},!1)}d.getNotesForArea=z;function C(P){return _(this,void 0,void 0,function*(){const q=yield(0,x.osmFetch)(`/0.6/notes/${P}.json`);return l(q)})}d.getNote=C},{"../_osmFetch":17}],33:[function(a,c,d){var _=this&&this.__createBinding||(Object.create?function(l,S,A,z){z===void 0&&(z=A),Object.defineProperty(l,z,{enumerable:!0,get:function(){return S[A]}})}:function(l,S,A,z){z===void 0&&(z=A),l[z]=S[A]}),x=this&&this.__exportStar||function(l,S){for(var A in l)A!=="default"&&!Object.prototype.hasOwnProperty.call(S,A)&&_(S,l,A)};Object.defineProperty(d,"__esModule",{value:!0}),x(a("./getNotes"),d),x(a("./noteActions"),d)},{"./getNotes":32,"./noteActions":34}],34:[function(a,c,d){var _=this&&this.__awaiter||function(z,C,P,q){function te(Z){return Z instanceof P?Z:new P(function(j){j(Z)})}return new(P||(P=Promise))(function(Z,j){function N(J){try{G(q.next(J))}catch(me){j(me)}}function $(J){try{G(q.throw(J))}catch(me){j(me)}}function G(J){J.done?Z(J.value):te(J.value).then(N,$)}G((q=q.apply(z,C||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.reopenNote=d.commentOnNote=d.createNote=void 0;const x=a("../_osmFetch");function l(z,C,P){return _(this,void 0,void 0,function*(){yield(0,x.osmFetch)("/0.6/notes",{lat:z,lon:C,text:P})})}d.createNote=l;function S(z,C){return _(this,void 0,void 0,function*(){yield(0,x.osmFetch)(`/0.6/notes/${z}/comment`,{text:C})})}d.commentOnNote=S;function A(z,C){return _(this,void 0,void 0,function*(){yield(0,x.osmFetch)(`/0.6/notes/${z}/reopen`,{text:C})})}d.reopenNote=A},{"../_osmFetch":17}],35:[function(a,c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.createPopup=void 0;function _(x){let l=!1;return new Promise((S,A)=>{const[z,C]=[600,550],P=Object.entries({width:z,height:C,left:window.screen.width/2-z/2,top:window.screen.height/2-C/2}).map(([Z,j])=>`${Z}=${j}`).join(","),q=window.open("about:blank","oauth_window",P);if(!q)throw new Error("Popup was blocked");q.location=x,window.authComplete=Z=>{S(Z),l=!0};const te=setInterval(()=>{q.closed&&(l||A(new Error("Cancelled")),clearInterval(te))},500)})}d.createPopup=_},{}],36:[function(a,c,d){var _=this&&this.__awaiter||function(S,A,z,C){function P(q){return q instanceof z?q:new z(function(te){te(q)})}return new(z||(z=Promise))(function(q,te){function Z($){try{N(C.next($))}catch(G){te(G)}}function j($){try{N(C.throw($))}catch(G){te(G)}}function N($){$.done?q($.value):P($.value).then(Z,j)}N((C=C.apply(S,A||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.exchangeCode=void 0;const x=a("./helpers");function l(S,{options:A,pkceVerifier:z,state:C}){return _(this,void 0,void 0,function*(){const P=new URL(S).searchParams,q=P.get("error_description"),te=P.get("code"),Z=P.get("state");if(q)throw new Error(q);if(!te)throw new Error("No code in OAuth response");if(!z||!C)throw new Error("No login in progress");if(C!==Z)throw new Error("State Mismatch");const j={grant_type:"authorization_code",code:te,redirect_uri:A.redirectUrl,client_id:A.clientId,code_verifier:z},N=`${(0,x.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(j).toString()}`,G=yield(yield fetch(N,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const J={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(J)),delete window.authComplete,J})}d.exchangeCode=l},{"./helpers":37}],37:[function(a,c,d){var _=this&&this.__awaiter||function(z,C,P,q){function te(Z){return Z instanceof P?Z:new P(function(j){j(Z)})}return new(P||(P=Promise))(function(Z,j){function N(J){try{G(q.next(J))}catch(me){j(me)}}function $(J){try{G(q.throw(J))}catch(me){j(me)}}function G(J){J.done?Z(J.value):te(J.value).then(N,$)}G((q=q.apply(z,C||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.getOAuthBaseUrl=d.getRandomString=d.sha256=void 0;const x=a("../config");function l(z){return _(this,void 0,void 0,function*(){const C=new TextEncoder().encode(z),P=yield window.crypto.subtle.digest("SHA-256",C);return btoa(String.fromCharCode(...new Uint8Array(P))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}d.sha256=l;function S(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(z=>`0${z.toString(16)}`.slice(-2)).join("")}d.getRandomString=S;function A(){let z=(0,x.getConfig)().apiUrl;return z==="https://api.openstreetmap.org"&&(z="https://www.openstreetmap.org"),z}d.getOAuthBaseUrl=A},{"../config":40}],38:[function(a,c,d){var _=this&&this.__createBinding||(Object.create?function(l,S,A,z){z===void 0&&(z=A),Object.defineProperty(l,z,{enumerable:!0,get:function(){return S[A]}})}:function(l,S,A,z){z===void 0&&(z=A),l[z]=S[A]}),x=this&&this.__exportStar||function(l,S){for(var A in l)A!=="default"&&!Object.prototype.hasOwnProperty.call(S,A)&&_(S,l,A)};Object.defineProperty(d,"__esModule",{value:!0}),x(a("./oauth2"),d)},{"./oauth2":39}],39:[function(a,c,d){var _=this&&this.__awaiter||function(q,te,Z,j){function N($){return $ instanceof Z?$:new Z(function(G){G($)})}return new(Z||(Z=Promise))(function($,G){function J(se){try{H(j.next(se))}catch(ne){G(ne)}}function me(se){try{H(j.throw(se))}catch(ne){G(ne)}}function H(se){se.done?$(se.value):N(se.value).then(J,me)}H((j=j.apply(q,te||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0}),d.logout=d.isLoggedIn=d.getAuthToken=d.authReady=d.login=void 0;const x=a("./createPopup"),l=a("./exchangeCode"),S=a("./helpers");function A(q){return _(this,void 0,void 0,function*(){if(!q.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!q.clientId)throw new Error("You must include the 'clientId' option");if(!q.scopes)throw new Error("You must include the 'scopes' option");const te=(0,S.getRandomString)(),Z=(0,S.getRandomString)(),j=yield(0,S.sha256)(Z),N={scope:q.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:te,redirect_uri:q.redirectUrl,client_id:q.clientId,code_challenge_method:"S256",code_challenge:j},$=`${(0,S.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(N).toString()}`,G={state:te,pkceVerifier:Z,options:q};if(q.mode==="popup"){const J=yield(0,x.createPopup)($);return(0,l.exchangeCode)(J,G)}if(q.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace($);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}d.login=A,d.authReady=(()=>_(void 0,void 0,void 0,function*(){var q;if(typeof window=="undefined")return;const te=window.location.href,Z=localStorage.getItem("__osmAuthTemp");if(new URL(te).searchParams.get("code")){if((q=window.opener)===null||q===void 0?void 0:q.authComplete)window.opener.authComplete(te),window.close();else if(Z)try{const j=JSON.parse(Z);yield(0,l.exchangeCode)(te,j),localStorage.removeItem("__osmAuthTemp")}catch(j){console.error("OSM Auth Error",j)}}}))();const z=()=>{try{const q=localStorage.getItem("__osmAuth");return q?JSON.parse(q).accessToken:void 0}catch{return}};d.getAuthToken=z;const C=()=>!!(0,d.getAuthToken)();d.isLoggedIn=C;function P(){localStorage.removeItem("__osmAuth")}d.logout=P},{"./createPopup":35,"./exchangeCode":36,"./helpers":37}],40:[function(a,c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.configure=d.getConfig=void 0;const _={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},x=()=>_;d.getConfig=x;function l(S){Object.assign(_,S)}d.configure=l},{}],41:[function(a,c,d){var _=this&&this.__createBinding||(Object.create?function(l,S,A,z){z===void 0&&(z=A),Object.defineProperty(l,z,{enumerable:!0,get:function(){return S[A]}})}:function(l,S,A,z){z===void 0&&(z=A),l[z]=S[A]}),x=this&&this.__exportStar||function(l,S){for(var A in l)A!=="default"&&!Object.prototype.hasOwnProperty.call(S,A)&&_(S,l,A)};Object.defineProperty(d,"__esModule",{value:!0}),a("./polyfill"),x(a("./api"),d),x(a("./auth"),d),x(a("./config"),d),x(a("./types"),d)},{"./api":31,"./auth":38,"./config":40,"./polyfill":42,"./types":46}],42:[function(a,c,d){if(typeof fetch=="undefined")try{a("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],43:[function(a,c,d){Object.defineProperty(d,"__esModule",{value:!0})},{}],44:[function(a,c,d){arguments[4][43][0].apply(d,arguments)},{dup:43}],45:[function(a,c,d){arguments[4][43][0].apply(d,arguments)},{dup:43}],46:[function(a,c,d){var _=this&&this.__createBinding||(Object.create?function(l,S,A,z){z===void 0&&(z=A),Object.defineProperty(l,z,{enumerable:!0,get:function(){return S[A]}})}:function(l,S,A,z){z===void 0&&(z=A),l[z]=S[A]}),x=this&&this.__exportStar||function(l,S){for(var A in l)A!=="default"&&!Object.prototype.hasOwnProperty.call(S,A)&&_(S,l,A)};Object.defineProperty(d,"__esModule",{value:!0}),x(a("./changesets"),d),x(a("./features"),d),x(a("./general"),d),x(a("./notes"),d),x(a("./user"),d)},{"./changesets":43,"./features":44,"./general":45,"./notes":47,"./user":48}],47:[function(a,c,d){arguments[4][43][0].apply(d,arguments)},{dup:43}],48:[function(a,c,d){arguments[4][43][0].apply(d,arguments)},{dup:43}]},{},[41])(41)})})(GA);var ZA={exports:{}},Eh={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qA=Lt.exports,pw=60103;Eh.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Pv=Symbol.for;pw=Pv("react.element"),Eh.Fragment=Pv("react.fragment")}var WA=qA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XA=Object.prototype.hasOwnProperty,HA={key:!0,ref:!0,__self:!0,__source:!0};function mw(e,r,a){var c,d={},_=null,x=null;a!==void 0&&(_=""+a),r.key!==void 0&&(_=""+r.key),r.ref!==void 0&&(x=r.ref);for(c in r)XA.call(r,c)&&!HA.hasOwnProperty(c)&&(d[c]=r[c]);if(e&&e.defaultProps)for(c in r=e.defaultProps,r)d[c]===void 0&&(d[c]=r[c]);return{$$typeof:pw,type:e,key:_,ref:x,props:d,_owner:WA.current}}Eh.jsx=mw;Eh.jsxs=mw;ZA.exports=Eh;var Jm={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,r){(function(){var a,c="4.15.0",d=200,_="Expected a function",x="__lodash_hash_undefined__",l=1,S=2,A=1/0,z=9007199254740991,C="[object Arguments]",P="[object Array]",q="[object Boolean]",te="[object Date]",Z="[object Error]",j="[object Function]",N="[object GeneratorFunction]",$="[object Map]",G="[object Number]",J="[object Object]",me="[object Promise]",H="[object RegExp]",se="[object Set]",ne="[object String]",Te="[object Symbol]",Ce="[object WeakMap]",Pe="[object ArrayBuffer]",Ze="[object DataView]",rt="[object Float32Array]",ft="[object Float64Array]",dt="[object Int8Array]",Ue="[object Int16Array]",yt="[object Int32Array]",rn="[object Uint8Array]",vn="[object Uint8ClampedArray]",Sn="[object Uint16Array]",Ye="[object Uint32Array]",mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,xt=/^\./,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xt=/[\\^$.*+?()[\]{}|]/g,yn=/\\(\\)?/g,un=/\w*$/,xn=/^\[object .+?Constructor\]$/,Tn=/^(?:0|[1-9]\d*)$/,Gt={};Gt[rt]=Gt[ft]=Gt[dt]=Gt[Ue]=Gt[yt]=Gt[rn]=Gt[vn]=Gt[Sn]=Gt[Ye]=!0,Gt[C]=Gt[P]=Gt[Pe]=Gt[q]=Gt[Ze]=Gt[te]=Gt[Z]=Gt[j]=Gt[$]=Gt[G]=Gt[J]=Gt[H]=Gt[se]=Gt[ne]=Gt[Ce]=!1;var Qt={};Qt[C]=Qt[P]=Qt[Pe]=Qt[Ze]=Qt[q]=Qt[te]=Qt[rt]=Qt[ft]=Qt[dt]=Qt[Ue]=Qt[yt]=Qt[$]=Qt[G]=Qt[J]=Qt[H]=Qt[se]=Qt[ne]=Qt[Te]=Qt[rn]=Qt[vn]=Qt[Sn]=Qt[Ye]=!0,Qt[Z]=Qt[j]=Qt[Ce]=!1;var hr=typeof su=="object"&&su&&su.Object===Object&&su,rr=typeof self=="object"&&self&&self.Object===Object&&self,ir=hr||rr||Function("return this")(),Mr=r&&!r.nodeType&&r,Vn=Mr&&!0&&e&&!e.nodeType&&e,Hn=Vn&&Vn.exports===Mr,Br=Hn&&hr.process,ie=function(){try{return Br&&Br.binding("util")}catch{}}(),O=ie&&ie.isTypedArray;function D(I,Y){return I.set(Y[0],Y[1]),I}function ue(I,Y){return I.add(Y),I}function Ee(I,Y,fe){switch(fe.length){case 0:return I.call(Y);case 1:return I.call(Y,fe[0]);case 2:return I.call(Y,fe[0],fe[1]);case 3:return I.call(Y,fe[0],fe[1],fe[2])}return I.apply(Y,fe)}function qe(I,Y){for(var fe=-1,ze=I?I.length:0;++fe<ze&&Y(I[fe],fe,I)!==!1;);return I}function Xe(I,Y){for(var fe=-1,ze=Y.length,st=I.length;++fe<ze;)I[st+fe]=Y[fe];return I}function Dt(I,Y,fe,ze){var st=-1,nt=I?I.length:0;for(ze&&nt&&(fe=I[++st]);++st<nt;)fe=Y(fe,I[st],st,I);return fe}function ke(I,Y){for(var fe=-1,ze=I?I.length:0;++fe<ze;)if(Y(I[fe],fe,I))return!0;return!1}function Ge(I){return function(Y){return Y==null?a:Y[I]}}function wn(I,Y){for(var fe=-1,ze=Array(I);++fe<I;)ze[fe]=Y(fe);return ze}function en(I){return function(Y){return I(Y)}}function ln(I,Y){return I==null?a:I[Y]}function Mn(I){var Y=!1;if(I!=null&&typeof I.toString!="function")try{Y=!!(I+"")}catch{}return Y}function Ln(I){var Y=-1,fe=Array(I.size);return I.forEach(function(ze,st){fe[++Y]=[st,ze]}),fe}function Wr(I,Y){return function(fe){return I(Y(fe))}}function Yn(I){var Y=-1,fe=Array(I.size);return I.forEach(function(ze){fe[++Y]=ze}),fe}var et=Array.prototype,Zt=Function.prototype,Nt=Object.prototype,Sr=ir["__core-js_shared__"],Xr=function(){var I=/[^.]+$/.exec(Sr&&Sr.keys&&Sr.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Ut=Zt.toString,or=Nt.hasOwnProperty,ki=Ut.call(Object),fr=Nt.toString,Cr=RegExp("^"+Ut.call(or).replace(Xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cn=Hn?ir.Buffer:a,Qo=ir.Symbol,lr=ir.Uint8Array,Vi=Wr(Object.getPrototypeOf,Object),$n=Object.create,Ii=Nt.propertyIsEnumerable,$i=et.splice,ji=Object.getOwnPropertySymbols,Mo=cn?cn.isBuffer:a,ae=Wr(Object.keys,Object),L=Math.max,F=ho(ir,"DataView"),Q=ho(ir,"Map"),le=ho(ir,"Promise"),ce=ho(ir,"Set"),xe=ho(ir,"WeakMap"),ye=ho(Object,"create"),_e=!Ii.call({valueOf:1},"valueOf"),we=Hr(F),De=Hr(Q),$e=Hr(le),Re=Hr(ce),bt=Hr(xe),ot=Qo?Qo.prototype:a,_t=ot?ot.valueOf:a,zt=ot?ot.toString:a;function vt(){}function jt(I){var Y=-1,fe=I?I.length:0;for(this.clear();++Y<fe;){var ze=I[Y];this.set(ze[0],ze[1])}}function Yt(){this.__data__=ye?ye(null):{}}function qt(I){return this.has(I)&&delete this.__data__[I]}function Wt(I){var Y=this.__data__;if(ye){var fe=Y[I];return fe===x?a:fe}return or.call(Y,I)?Y[I]:a}function zn(I){var Y=this.__data__;return ye?Y[I]!==a:or.call(Y,I)}function jn(I,Y){var fe=this.__data__;return fe[I]=ye&&Y===a?x:Y,this}jt.prototype.clear=Yt,jt.prototype.delete=qt,jt.prototype.get=Wt,jt.prototype.has=zn,jt.prototype.set=jn;function kn(I){var Y=-1,fe=I?I.length:0;for(this.clear();++Y<fe;){var ze=I[Y];this.set(ze[0],ze[1])}}function Gi(){this.__data__=[]}function xi(I){var Y=this.__data__,fe=On(Y,I);if(fe<0)return!1;var ze=Y.length-1;return fe==ze?Y.pop():$i.call(Y,fe,1),!0}function Ts(I){var Y=this.__data__,fe=On(Y,I);return fe<0?a:Y[fe][1]}function ea(I){return On(this.__data__,I)>-1}function In(I,Y){var fe=this.__data__,ze=On(fe,I);return ze<0?fe.push([I,Y]):fe[ze][1]=Y,this}kn.prototype.clear=Gi,kn.prototype.delete=xi,kn.prototype.get=Ts,kn.prototype.has=ea,kn.prototype.set=In;function wi(I){var Y=-1,fe=I?I.length:0;for(this.clear();++Y<fe;){var ze=I[Y];this.set(ze[0],ze[1])}}function Tl(){this.__data__={hash:new jt,map:new(Q||kn),string:new jt}}function Al(I){return Pi(this,I).delete(I)}function Cl(I){return Pi(this,I).get(I)}function La(I){return Pi(this,I).has(I)}function kl(I,Y){return Pi(this,I).set(I,Y),this}wi.prototype.clear=Tl,wi.prototype.delete=Al,wi.prototype.get=Cl,wi.prototype.has=La,wi.prototype.set=kl;function zo(I){var Y=-1,fe=I?I.length:0;for(this.__data__=new wi;++Y<fe;)this.add(I[Y])}function As(I){return this.__data__.set(I,x),this}function Il(I){return this.__data__.has(I)}zo.prototype.add=zo.prototype.push=As,zo.prototype.has=Il;function vr(I){this.__data__=new kn(I)}function Oa(){this.__data__=new kn}function ta(I){return this.__data__.delete(I)}function na(I){return this.__data__.get(I)}function ra(I){return this.__data__.has(I)}function Ra(I,Y){var fe=this.__data__;if(fe instanceof kn){var ze=fe.__data__;if(!Q||ze.length<d-1)return ze.push([I,Y]),this;fe=this.__data__=new wi(ze)}return fe.set(I,Y),this}vr.prototype.clear=Oa,vr.prototype.delete=ta,vr.prototype.get=na,vr.prototype.has=ra,vr.prototype.set=Ra;function Da(I,Y){var fe=xr(I)||Mi(I)?wn(I.length,String):[],ze=fe.length,st=!!ze;for(var nt in I)(Y||or.call(I,nt))&&!(st&&(nt=="length"||Rn(nt,ze)))&&fe.push(nt);return fe}function Zi(I,Y,fe){(fe!==a&&!ai(I[Y],fe)||typeof Y=="number"&&fe===a&&!(Y in I))&&(I[Y]=fe)}function Lo(I,Y,fe){var ze=I[Y];(!(or.call(I,Y)&&ai(ze,fe))||fe===a&&!(Y in I))&&(I[Y]=fe)}function On(I,Y){for(var fe=I.length;fe--;)if(ai(I[fe][0],Y))return fe;return-1}function Fa(I,Y){return I&&Ns(Y,Ur(Y),I)}function qi(I,Y,fe,ze,st,nt,Et){var St;if(ze&&(St=nt?ze(I,st,nt,Et):ze(I)),St!==a)return St;if(!Yr(I))return I;var Ft=xr(I);if(Ft){if(St=Hu(I),!Y)return Rl(I,St)}else{var Ke=tn(I),dn=Ke==j||Ke==N;if(Ga(I))return Bs(I,Y);if(Ke==J||Ke==C||dn&&!nt){if(Mn(I))return nt?I:{};if(St=fn(dn?{}:I),!Y)return Xu(I,Fa(St,I))}else{if(!Qt[Ke])return nt?I:{};St=fo(I,Ke,qi,Y)}}Et||(Et=new vr);var bn=Et.get(I);if(bn)return bn;if(Et.set(I,St),!Ft)var Pn=fe?uo(I):Ur(I);return qe(Pn||I,function(ur,Je){Pn&&(Je=ur,ur=I[Je]),Lo(St,Je,qi(ur,Y,fe,ze,Je,I,Et))}),St}function Cs(I){return Yr(I)?$n(I):{}}var Pl=Vs(Is),ks=Fo();function Is(I,Y){return I&&ks(I,Y,Ur)}function Ps(I,Y){Y=Wi(Y,I)?[Y]:Ua(Y);for(var fe=0,ze=Y.length;I!=null&&fe<ze;)I=I[Xi(Y[fe++])];return fe&&fe==ze?I:a}function Gu(I,Y,fe){var ze=Y(I);return xr(I)?ze:Xe(ze,fe(I))}function Ms(I){return fr.call(I)}function zs(I,Y){return I!=null&&Y in Object(I)}function ia(I,Y,fe,ze,st){return I===Y?!0:I==null||Y==null||!Yr(I)&&!zi(Y)?I!==I&&Y!==Y:Ls(I,Y,ia,fe,ze,st)}function Ls(I,Y,fe,ze,st,nt){var Et=xr(I),St=xr(Y),Ft=P,Ke=P;Et||(Ft=tn(I),Ft=Ft==C?J:Ft),St||(Ke=tn(Y),Ke=Ke==C?J:Ke);var dn=Ft==J&&!Mn(I),bn=Ke==J&&!Mn(Y),Pn=Ft==Ke;if(Pn&&!dn)return nt||(nt=new vr),Et||vo(I)?$s(I,Y,fe,ze,st,nt):Dl(I,Y,Ft,fe,ze,st,nt);if(!(st&S)){var ur=dn&&or.call(I,"__wrapped__"),Je=bn&&or.call(Y,"__wrapped__");if(ur||Je){var si=ur?I.value():I,Li=Je?Y.value():Y;return nt||(nt=new vr),fe(si,Li,ze,st,nt)}}return Pn?(nt||(nt=new vr),js(I,Y,fe,ze,st,nt)):!1}function Ml(I,Y,fe,ze){var st=fe.length,nt=st,Et=!ze;if(I==null)return!nt;for(I=Object(I);st--;){var St=fe[st];if(Et&&St[2]?St[1]!==I[St[0]]:!(St[0]in I))return!1}for(;++st<nt;){St=fe[st];var Ft=St[0],Ke=I[Ft],dn=St[1];if(Et&&St[2]){if(Ke===a&&!(Ft in I))return!1}else{var bn=new vr;if(ze)var Pn=ze(Ke,dn,Ft,I,Y,bn);if(!(Pn===a?ia(dn,Ke,ze,l|S,bn):Pn))return!1}}return!0}function zl(I){if(!Yr(I)||Gs(I))return!1;var Y=go(I)||Mn(I)?Cr:xn;return Y.test(Hr(I))}function hn(I){return zi(I)&&yo(I.length)&&!!Gt[fr.call(I)]}function Oo(I){return typeof I=="function"?I:I==null?Uo:typeof I=="object"?xr(I)?Rs(I[0],I[1]):Nr(I):Dn(I)}function oa(I){if(!po(I))return ae(I);var Y=[];for(var fe in Object(I))or.call(I,fe)&&fe!="constructor"&&Y.push(fe);return Y}function Os(I){if(!Yr(I))return ja(I);var Y=po(I),fe=[];for(var ze in I)ze=="constructor"&&(Y||!or.call(I,ze))||fe.push(ze);return fe}function Nr(I){var Y=co(I);return Y.length==1&&Y[0][2]?$a(Y[0][0],Y[0][1]):function(fe){return fe===I||Ml(fe,I,Y)}}function Rs(I,Y){return Wi(I)&&sa(Y)?$a(Xi(I),Y):function(fe){var ze=Xs(fe,I);return ze===a&&ze===Y?Hs(fe,I):ia(Y,ze,a,l|S)}}function aa(I,Y,fe,ze,st){if(I!==Y){if(!(xr(Y)||vo(Y)))var nt=Os(Y);qe(nt||Y,function(Et,St){if(nt&&(St=Et,Et=Y[St]),Yr(Et))st||(st=new vr),Ba(I,Y,St,fe,aa,ze,st);else{var Ft=ze?ze(I[St],Et,St+"",I,Y,st):a;Ft===a&&(Ft=Et),Zi(I,St,Ft)}})}}function Ba(I,Y,fe,ze,st,nt,Et){var St=I[fe],Ft=Y[fe],Ke=Et.get(Ft);if(Ke){Zi(I,fe,Ke);return}var dn=nt?nt(St,Ft,fe+"",I,Y,Et):a,bn=dn===a;bn&&(dn=Ft,xr(Ft)||vo(Ft)?xr(St)?dn=St:Bo(St)?dn=Rl(St):(bn=!1,dn=qi(Ft,!0)):_o(Ft)||Mi(Ft)?Mi(St)?dn=Ws(St):!Yr(St)||ze&&go(St)?(bn=!1,dn=qi(Ft,!0)):dn=St:bn=!1),bn&&(Et.set(Ft,dn),st(dn,Ft,ze,nt,Et),Et.delete(Ft)),Zi(I,fe,dn)}function Ds(I){return function(Y){return Ps(Y,I)}}function Fs(I,Y){return Y=L(Y===a?I.length-1:Y,0),function(){for(var fe=arguments,ze=-1,st=L(fe.length-Y,0),nt=Array(st);++ze<st;)nt[ze]=fe[Y+ze];ze=-1;for(var Et=Array(Y+1);++ze<Y;)Et[ze]=fe[ze];return Et[Y]=nt,Ee(I,this,Et)}}function Na(I){if(typeof I=="string")return I;if(Hi(I))return zt?zt.call(I):"";var Y=I+"";return Y=="0"&&1/I==-A?"-0":Y}function Ua(I){return xr(I)?I:Zs(I)}function Bs(I,Y){if(Y)return I.slice();var fe=new I.constructor(I.length);return I.copy(fe),fe}function Ro(I){var Y=new I.constructor(I.byteLength);return new lr(Y).set(new lr(I)),Y}function Ll(I,Y){var fe=Y?Ro(I.buffer):I.buffer;return new I.constructor(fe,I.byteOffset,I.byteLength)}function Ol(I,Y,fe){var ze=Y?fe(Ln(I),!0):Ln(I);return Dt(ze,D,new I.constructor)}function Do(I){var Y=new I.constructor(I.source,un.exec(I));return Y.lastIndex=I.lastIndex,Y}function Zu(I,Y,fe){var ze=Y?fe(Yn(I),!0):Yn(I);return Dt(ze,ue,new I.constructor)}function qu(I){return _t?Object(_t.call(I)):{}}function Wu(I,Y){var fe=Y?Ro(I.buffer):I.buffer;return new I.constructor(fe,I.byteOffset,I.length)}function Rl(I,Y){var fe=-1,ze=I.length;for(Y||(Y=Array(ze));++fe<ze;)Y[fe]=I[fe];return Y}function Ns(I,Y,fe,ze){fe||(fe={});for(var st=-1,nt=Y.length;++st<nt;){var Et=Y[st],St=ze?ze(fe[Et],I[Et],Et,fe,I):a;Lo(fe,Et,St===a?I[Et]:St)}return fe}function Xu(I,Y){return Ns(I,Va(I),Y)}function Us(I){return Fs(function(Y,fe){var ze=-1,st=fe.length,nt=st>1?fe[st-1]:a,Et=st>2?fe[2]:a;for(nt=I.length>3&&typeof nt=="function"?(st--,nt):a,Et&&Zn(fe[0],fe[1],Et)&&(nt=st<3?a:nt,st=1),Y=Object(Y);++ze<st;){var St=fe[ze];St&&I(Y,St,ze,nt)}return Y})}function Vs(I,Y){return function(fe,ze){if(fe==null)return fe;if(!mo(fe))return I(fe,ze);for(var st=fe.length,nt=Y?st:-1,Et=Object(fe);(Y?nt--:++nt<st)&&ze(Et[nt],nt,Et)!==!1;);return fe}}function Fo(I){return function(Y,fe,ze){for(var st=-1,nt=Object(Y),Et=ze(Y),St=Et.length;St--;){var Ft=Et[I?St:++st];if(fe(nt[Ft],Ft,nt)===!1)break}return Y}}function $s(I,Y,fe,ze,st,nt){var Et=st&S,St=I.length,Ft=Y.length;if(St!=Ft&&!(Et&&Ft>St))return!1;var Ke=nt.get(I);if(Ke&&nt.get(Y))return Ke==Y;var dn=-1,bn=!0,Pn=st&l?new zo:a;for(nt.set(I,Y),nt.set(Y,I);++dn<St;){var ur=I[dn],Je=Y[dn];if(ze)var si=Et?ze(Je,ur,dn,Y,I,nt):ze(ur,Je,dn,I,Y,nt);if(si!==a){if(si)continue;bn=!1;break}if(Pn){if(!ke(Y,function(Li,Ki){if(!Pn.has(Ki)&&(ur===Li||fe(ur,Li,ze,st,nt)))return Pn.add(Ki)})){bn=!1;break}}else if(!(ur===Je||fe(ur,Je,ze,st,nt))){bn=!1;break}}return nt.delete(I),nt.delete(Y),bn}function Dl(I,Y,fe,ze,st,nt,Et){switch(fe){case Ze:if(I.byteLength!=Y.byteLength||I.byteOffset!=Y.byteOffset)return!1;I=I.buffer,Y=Y.buffer;case Pe:return!(I.byteLength!=Y.byteLength||!ze(new lr(I),new lr(Y)));case q:case te:case G:return ai(+I,+Y);case Z:return I.name==Y.name&&I.message==Y.message;case H:case ne:return I==Y+"";case $:var St=Ln;case se:var Ft=nt&S;if(St||(St=Yn),I.size!=Y.size&&!Ft)return!1;var Ke=Et.get(I);if(Ke)return Ke==Y;nt|=l,Et.set(I,Y);var dn=$s(St(I),St(Y),ze,st,nt,Et);return Et.delete(I),dn;case Te:if(_t)return _t.call(I)==_t.call(Y)}return!1}function js(I,Y,fe,ze,st,nt){var Et=st&S,St=Ur(I),Ft=St.length,Ke=Ur(Y),dn=Ke.length;if(Ft!=dn&&!Et)return!1;for(var bn=Ft;bn--;){var Pn=St[bn];if(!(Et?Pn in Y:or.call(Y,Pn)))return!1}var ur=nt.get(I);if(ur&&nt.get(Y))return ur==Y;var Je=!0;nt.set(I,Y),nt.set(Y,I);for(var si=Et;++bn<Ft;){Pn=St[bn];var Li=I[Pn],Ki=Y[Pn];if(ze)var Za=Et?ze(Ki,Li,Pn,Y,I,nt):ze(Li,Ki,Pn,I,Y,nt);if(!(Za===a?Li===Ki||fe(Li,Ki,ze,st,nt):Za)){Je=!1;break}si||(si=Pn=="constructor")}if(Je&&!si){var wo=I.constructor,ha=Y.constructor;wo!=ha&&"constructor"in I&&"constructor"in Y&&!(typeof wo=="function"&&wo instanceof wo&&typeof ha=="function"&&ha instanceof ha)&&(Je=!1)}return nt.delete(I),nt.delete(Y),Je}function uo(I){return Gu(I,Ur,Va)}function Fl(){var I=vt.iteratee||xo;return I=I===xo?Oo:I,arguments.length?I(arguments[0],arguments[1]):I}function Pi(I,Y){var fe=I.__data__;return Bl(Y)?fe[typeof Y=="string"?"string":"hash"]:fe.map}function co(I){for(var Y=Ur(I),fe=Y.length;fe--;){var ze=Y[fe],st=I[ze];Y[fe]=[ze,st,sa(st)]}return Y}function ho(I,Y){var fe=ln(I,Y);return zl(fe)?fe:a}var Va=ji?Wr(ji,Object):ca,tn=Ms;(F&&tn(new F(new ArrayBuffer(1)))!=Ze||Q&&tn(new Q)!=$||le&&tn(le.resolve())!=me||ce&&tn(new ce)!=se||xe&&tn(new xe)!=Ce)&&(tn=function(I){var Y=fr.call(I),fe=Y==J?I.constructor:a,ze=fe?Hr(fe):a;if(ze)switch(ze){case we:return Ze;case De:return $;case $e:return me;case Re:return se;case bt:return Ce}return Y});function Gn(I,Y,fe){Y=Wi(Y,I)?[Y]:Ua(Y);for(var ze,st=-1,Et=Y.length;++st<Et;){var nt=Xi(Y[st]);if(!(ze=I!=null&&fe(I,nt)))break;I=I[nt]}if(ze)return ze;var Et=I?I.length:0;return!!Et&&yo(Et)&&Rn(nt,Et)&&(xr(I)||Mi(I))}function Hu(I){var Y=I.length,fe=I.constructor(Y);return Y&&typeof I[0]=="string"&&or.call(I,"index")&&(fe.index=I.index,fe.input=I.input),fe}function fn(I){return typeof I.constructor=="function"&&!po(I)?Cs(Vi(I)):{}}function fo(I,Y,fe,ze){var st=I.constructor;switch(Y){case Pe:return Ro(I);case q:case te:return new st(+I);case Ze:return Ll(I,ze);case rt:case ft:case dt:case Ue:case yt:case rn:case vn:case Sn:case Ye:return Wu(I,ze);case $:return Ol(I,ze,fe);case G:case ne:return new st(I);case H:return Do(I);case se:return Zu(I,ze,fe);case Te:return qu(I)}}function Rn(I,Y){return Y=Y==null?z:Y,!!Y&&(typeof I=="number"||Tn.test(I))&&I>-1&&I%1==0&&I<Y}function Zn(I,Y,fe){if(!Yr(fe))return!1;var ze=typeof Y;return(ze=="number"?mo(fe)&&Rn(Y,fe.length):ze=="string"&&Y in fe)?ai(fe[Y],I):!1}function Wi(I,Y){if(xr(I))return!1;var fe=typeof I;return fe=="number"||fe=="symbol"||fe=="boolean"||I==null||Hi(I)?!0:At.test(I)||!mt.test(I)||Y!=null&&I in Object(Y)}function Bl(I){var Y=typeof I;return Y=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?I!=="__proto__":I===null}function Gs(I){return!!Xr&&Xr in I}function po(I){var Y=I&&I.constructor,fe=typeof Y=="function"&&Y.prototype||Nt;return I===fe}function sa(I){return I===I&&!Yr(I)}function $a(I,Y){return function(fe){return fe==null?!1:fe[I]===Y&&(Y!==a||I in Object(fe))}}function ja(I){var Y=[];if(I!=null)for(var fe in Object(I))Y.push(fe);return Y}var Zs=la(function(I){I=No(I);var Y=[];return xt.test(I)&&Y.push(""),I.replace(wt,function(fe,ze,st,nt){Y.push(st?nt.replace(yn,"$1"):ze||fe)}),Y});function Xi(I){if(typeof I=="string"||Hi(I))return I;var Y=I+"";return Y=="0"&&1/I==-A?"-0":Y}function Hr(I){if(I!=null){try{return Ut.call(I)}catch{}try{return I+""}catch{}}return""}function oi(I){for(var Y=-1,fe=I?I.length:0,ze=0,st=[];++Y<fe;){var nt=I[Y];nt&&(st[ze++]=nt)}return st}function qs(I,Y){var fe=xr(I)?qe:Pl;return fe(I,Fl(Y,3))}function la(I,Y){if(typeof I!="function"||Y&&typeof Y!="function")throw new TypeError(_);var fe=function(){var ze=arguments,st=Y?Y.apply(this,ze):ze[0],nt=fe.cache;if(nt.has(st))return nt.get(st);var Et=I.apply(this,ze);return fe.cache=nt.set(st,Et),Et};return fe.cache=new(la.Cache||wi),fe}la.Cache=wi;function Nl(I){return qi(I,!1,!0)}function ai(I,Y){return I===Y||I!==I&&Y!==Y}function Mi(I){return Bo(I)&&or.call(I,"callee")&&(!Ii.call(I,"callee")||fr.call(I)==C)}var xr=Array.isArray;function mo(I){return I!=null&&yo(I.length)&&!go(I)}function Bo(I){return zi(I)&&mo(I)}var Ga=Mo||Yi;function ua(I){if(mo(I)&&(xr(I)||typeof I=="string"||typeof I.splice=="function"||Ga(I)||Mi(I)))return!I.length;var Y=tn(I);if(Y==$||Y==se)return!I.size;if(_e||po(I))return!ae(I).length;for(var fe in I)if(or.call(I,fe))return!1;return!0}function go(I){var Y=Yr(I)?fr.call(I):"";return Y==j||Y==N}function yo(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=z}function Yr(I){var Y=typeof I;return!!I&&(Y=="object"||Y=="function")}function zi(I){return!!I&&typeof I=="object"}function _o(I){if(!zi(I)||fr.call(I)!=J||Mn(I))return!1;var Y=Vi(I);if(Y===null)return!0;var fe=or.call(Y,"constructor")&&Y.constructor;return typeof fe=="function"&&fe instanceof fe&&Ut.call(fe)==ki}function Hi(I){return typeof I=="symbol"||zi(I)&&fr.call(I)==Te}var vo=O?en(O):hn;function Ws(I){return Ns(I,Ys(I))}function No(I){return I==null?"":Na(I)}function Xs(I,Y,fe){var ze=I==null?a:Ps(I,Y);return ze===a?fe:ze}function Hs(I,Y){return I!=null&&Gn(I,Y,zs)}function Ur(I){return mo(I)?Da(I):oa(I)}function Ys(I){return mo(I)?Da(I,!0):Os(I)}var Ul=Us(function(I,Y,fe){aa(I,Y,fe)});function Uo(I){return I}function xo(I){return Oo(typeof I=="function"?I:qi(I,!0))}function Dn(I){return Wi(I)?Ge(Xi(I)):Ds(I)}function ca(){return[]}function Yi(){return!1}vt.compact=oi,vt.iteratee=xo,vt.keys=Ur,vt.keysIn=Ys,vt.memoize=la,vt.merge=Ul,vt.property=Dn,vt.toPlainObject=Ws,vt.clone=Nl,vt.eq=ai,vt.forEach=qs,vt.get=Xs,vt.hasIn=Hs,vt.identity=Uo,vt.isArguments=Mi,vt.isArray=xr,vt.isArrayLike=mo,vt.isArrayLikeObject=Bo,vt.isBuffer=Ga,vt.isEmpty=ua,vt.isFunction=go,vt.isLength=yo,vt.isObject=Yr,vt.isObjectLike=zi,vt.isPlainObject=_o,vt.isSymbol=Hi,vt.isTypedArray=vo,vt.stubArray=ca,vt.stubFalse=Yi,vt.toString=No,vt.each=qs,vt.VERSION=c,Vn&&((Vn.exports=vt)._=vt,Mr._=vt)}).call(su)})(Jm,Jm.exports);var hy={},kd={};kd.RADIUS=6378137;kd.FLATTENING=1/298.257223563;kd.POLAR_RADIUS=63567523142e-4;var Mv=kd;hy.geometry=gw;hy.ring=Qm;function gw(e){var r=0,a;switch(e.type){case"Polygon":return zv(e.coordinates);case"MultiPolygon":for(a=0;a<e.coordinates.length;a++)r+=zv(e.coordinates[a]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(a=0;a<e.geometries.length;a++)r+=gw(e.geometries[a]);return r}}function zv(e){var r=0;if(e&&e.length>0){r+=Math.abs(Qm(e[0]));for(var a=1;a<e.length;a++)r-=Math.abs(Qm(e[a]))}return r}function Qm(e){var r,a,c,d,_,x,l,S=0,A=e.length;if(A>2){for(l=0;l<A;l++)l===A-2?(d=A-2,_=A-1,x=0):l===A-1?(d=A-1,_=0,x=1):(d=l,_=l+1,x=l+2),r=e[d],a=e[_],c=e[x],S+=(Hp(c[0])-Hp(r[0]))*Math.sin(Hp(a[1]));S=S*Mv.RADIUS*Mv.RADIUS/2}return S}function Hp(e){return e*Math.PI/180}var YA=hy,KA=If;function If(e,r){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(eg(If,r)),e;case"GeometryCollection":return e.geometries=e.geometries.map(eg(If,r)),e;case"Feature":return e.geometry=If(e.geometry,r),e;case"Polygon":case"MultiPolygon":return JA(e,r);default:return e}}function eg(e,r){return function(a){return e(a,r)}}function JA(e,r){return e.type==="Polygon"?e.coordinates=Lv(e.coordinates,r):e.type==="MultiPolygon"&&(e.coordinates=e.coordinates.map(eg(Lv,r))),e}function Lv(e,r){r=!!r,e[0]=Ov(e[0],r);for(var a=1;a<e.length;a++)e[a]=Ov(e[a],!r);return e}function Ov(e,r){return QA(e)===r?e:e.reverse()}function QA(e){return YA.ring(e)>=0}var eC=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}],tC=eC,an=Jm.exports,df=KA,Pf={};tC.forEach(function(e){if(e.polygon==="all")Pf[e.key]=!0;else{var r=e.polygon==="whitelist"?"included_values":"excluded_values",a={};e.values.forEach(function(c){a[c]=!0}),Pf[e.key]={},Pf[e.key][r]=a}});function nC(e,r){return(e.version||r.version)&&e.version!==r.version?(+e.version||0)>(+r.version||0)?e:r:an.merge(e,r)}var ad={};ad=function(e,r,a){r=an.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Pf,deduplicator:nC},r);var c;return typeof XMLDocument!="undefined"&&e instanceof XMLDocument||typeof XMLDocument=="undefined"&&e.childNodes?c=_(e):c=d(e),c;function d(S){var A=new Array,z=new Array,C=new Array;function P(me){var H=an.clone(me);H.lat=me.center.lat,H.lon=me.center.lon,H.__is_center_placeholder=!0,A.push(H)}function q(me){var H=an.clone(me);H.nodes=[];function se(ne,Te,Ce){var Pe={type:"node",id:"_"+H.type+"/"+H.id+"bounds"+Ce,lat:ne,lon:Te};H.nodes.push(Pe.id),A.push(Pe)}se(H.bounds.minlat,H.bounds.minlon,1),se(H.bounds.maxlat,H.bounds.minlon,2),se(H.bounds.maxlat,H.bounds.maxlon,3),se(H.bounds.minlat,H.bounds.maxlon,4),H.nodes.push(H.nodes[0]),H.__is_bounds_placeholder=!0,z.push(H)}function te(me){function H(se,ne,Te){var Ce={type:"node",id:Te,lat:se,lon:ne};A.push(Ce)}an.isArray(me.nodes)||(me.nodes=me.geometry.map(function(se){return se!==null?"_anonymous@"+se.lat+"/"+se.lon:"_anonymous@unknown_location"})),me.geometry.forEach(function(se,ne){se&&H(se.lat,se.lon,me.nodes[ne])})}function Z(me){function H(ne,Te,Ce){var Pe={type:"node",id:Ce,lat:ne,lon:Te};A.push(Pe)}function se(ne,Te){if(z.some(function(Ze){return Ze.type=="way"&&Ze.id==Te}))return;var Ce={type:"way",id:Te,nodes:[]};function Pe(Ze,rt){var ft={type:"node",id:"_anonymous@"+Ze+"/"+rt,lat:Ze,lon:rt};Ce.nodes.push(ft.id),A.push(ft)}ne.forEach(function(Ze){Ze?Pe(Ze.lat,Ze.lon):Ce.nodes.push(void 0)}),z.push(Ce)}me.members.forEach(function(ne,Te){ne.type=="node"?ne.lat&&H(ne.lat,ne.lon,ne.ref):ne.type=="way"&&ne.geometry&&(ne.ref="_fullGeom"+ne.ref,se(ne.geometry,ne.ref))})}for(var j=0;j<S.elements.length;j++)switch(S.elements[j].type){case"node":var N=S.elements[j];A.push(N);break;case"way":var $=an.clone(S.elements[j]);$.nodes=an.clone($.nodes),z.push($),$.center&&P($),$.geometry?te($):$.bounds&&q($);break;case"relation":var G=an.clone(S.elements[j]);G.members=an.clone(G.members),C.push(G);var J=G.members&&G.members.some(function(me){return me.type=="node"&&me.lat||me.type=="way"&&me.geometry&&me.geometry.length>0});G.center&&P(G),J?Z(G):G.bounds&&q(G);break}return x(A,z,C)}function _(S){var A=new Array,z=new Array,C=new Array;function P(G,J,me){G.hasAttribute(me)&&(J[me]=G.getAttribute(me))}function q(G,J){var me=an.clone(G);P(J,me,"lat"),P(J,me,"lon"),me.__is_center_placeholder=!0,A.push(me)}function te(G,J){var me=an.clone(G);me.nodes=[];function H(se,ne,Te){var Ce={type:"node",id:"_"+me.type+"/"+me.id+"bounds"+Te,lat:se,lon:ne};me.nodes.push(Ce.id),A.push(Ce)}H(J.getAttribute("minlat"),J.getAttribute("minlon"),1),H(J.getAttribute("maxlat"),J.getAttribute("minlon"),2),H(J.getAttribute("maxlat"),J.getAttribute("maxlon"),3),H(J.getAttribute("minlat"),J.getAttribute("maxlon"),4),me.nodes.push(me.nodes[0]),me.__is_bounds_placeholder=!0,z.push(me)}function Z(G,J){function me(H,se,ne){var Te={type:"node",id:ne,lat:H,lon:se};return A.push(Te),Te.id}an.isArray(G.nodes)||(G.nodes=[],an.each(J,function(H,se){G.nodes.push("_anonymous@"+H.getAttribute("lat")+"/"+H.getAttribute("lon"))})),an.each(J,function(H,se){H.getAttribute("lat")&&me(H.getAttribute("lat"),H.getAttribute("lon"),G.nodes[se])})}function j(G,J){function me(se,ne,Te){var Ce={type:"node",id:Te,lat:se,lon:ne};A.push(Ce)}function H(se,ne){if(z.some(function(Pe){return Pe.type=="way"&&Pe.id==ne}))return;var Te={type:"way",id:ne,nodes:[]};function Ce(Pe,Ze){var rt={type:"node",id:"_anonymous@"+Pe+"/"+Ze,lat:Pe,lon:Ze};Te.nodes.push(rt.id),A.push(rt)}an.each(se,function(Pe){Pe.getAttribute("lat")?Ce(Pe.getAttribute("lat"),Pe.getAttribute("lon")):Te.nodes.push(void 0)}),z.push(Te)}an.each(J,function(se,ne){G.members[ne].type=="node"?se.getAttribute("lat")&&me(se.getAttribute("lat"),se.getAttribute("lon"),G.members[ne].ref):G.members[ne].type=="way"&&se.getElementsByTagName("nd").length>0&&(G.members[ne].ref="_fullGeom"+G.members[ne].ref,H(se.getElementsByTagName("nd"),G.members[ne].ref))})}an.each(S.getElementsByTagName("node"),function(G,J){var me={};an.each(G.getElementsByTagName("tag"),function(se){me[se.getAttribute("k")]=se.getAttribute("v")});var H={type:"node"};P(G,H,"id"),P(G,H,"lat"),P(G,H,"lon"),P(G,H,"version"),P(G,H,"timestamp"),P(G,H,"changeset"),P(G,H,"uid"),P(G,H,"user"),an.isEmpty(me)||(H.tags=me),A.push(H)});var N,$;return an.each(S.getElementsByTagName("way"),function(G,J){var me={},H=[];an.each(G.getElementsByTagName("tag"),function(Te){me[Te.getAttribute("k")]=Te.getAttribute("v")});var se=!1;an.each(G.getElementsByTagName("nd"),function(Te,Ce){var Pe;(Pe=Te.getAttribute("ref"))&&(H[Ce]=Pe),!se&&Te.getAttribute("lat")&&(se=!0)});var ne={type:"way"};P(G,ne,"id"),P(G,ne,"version"),P(G,ne,"timestamp"),P(G,ne,"changeset"),P(G,ne,"uid"),P(G,ne,"user"),H.length>0&&(ne.nodes=H),an.isEmpty(me)||(ne.tags=me),(N=G.getElementsByTagName("center")[0])&&q(ne,N),se?Z(ne,G.getElementsByTagName("nd")):($=G.getElementsByTagName("bounds")[0])&&te(ne,$),z.push(ne)}),an.each(S.getElementsByTagName("relation"),function(G,J){var me={},H=[];an.each(G.getElementsByTagName("tag"),function(Te){me[Te.getAttribute("k")]=Te.getAttribute("v")});var se=!1;an.each(G.getElementsByTagName("member"),function(Te,Ce){H[Ce]={},P(Te,H[Ce],"ref"),P(Te,H[Ce],"role"),P(Te,H[Ce],"type"),(!se&&H[Ce].type=="node"&&Te.getAttribute("lat")||H[Ce].type=="way"&&Te.getElementsByTagName("nd").length>0)&&(se=!0)});var ne={type:"relation"};P(G,ne,"id"),P(G,ne,"version"),P(G,ne,"timestamp"),P(G,ne,"changeset"),P(G,ne,"uid"),P(G,ne,"user"),H.length>0&&(ne.members=H),an.isEmpty(me)||(ne.tags=me),(N=G.getElementsByTagName("center")[0])&&q(ne,N),se?j(ne,G.getElementsByTagName("member")):($=G.getElementsByTagName("bounds")[0])&&te(ne,$),C.push(ne)}),x(A,z,C)}function x(S,A,z){function C(mt,At){if(typeof At!="object"&&(At={}),typeof r.uninterestingTags=="function")return!r.uninterestingTags(mt,At);for(var xt in mt)if(r.uninterestingTags[xt]!==!0&&!(At[xt]===!0||At[xt]===mt[xt]))return!0;return!1}function P(mt){var At={timestamp:mt.timestamp,version:mt.version,changeset:mt.changeset,user:mt.user,uid:mt.uid};for(var xt in At)At[xt]===void 0&&delete At[xt];return At}for(var q=new Object,te=new Object,Z=0;Z<S.length;Z++){var j=S[Z];q[j.id]!==void 0&&(j=r.deduplicator(j,q[j.id])),q[j.id]=j,typeof j.tags!="undefined"&&C(j.tags)&&(te[j.id]=!0)}for(var Z=0;Z<z.length;Z++)if(an.isArray(z[Z].members))for(var N=0;N<z[Z].members.length;N++)z[Z].members[N].type=="node"&&(te[z[Z].members[N].ref]=!0);for(var $=new Object,G=new Object,Z=0;Z<A.length;Z++){var J=A[Z];if($[J.id]&&(J=r.deduplicator(J,$[J.id])),$[J.id]=J,an.isArray(J.nodes))for(var N=0;N<J.nodes.length;N++)typeof J.nodes[N]!="object"&&(G[J.nodes[N]]=!0,J.nodes[N]=q[J.nodes[N]])}var me=new Array;for(var H in q){var j=q[H];(!G[H]||te[H])&&me.push(j)}for(var se=new Array,Z=0;Z<z.length;Z++){var ne=z[Z];se[ne.id]&&(ne=r.deduplicator(ne,se[ne.id])),se[ne.id]=ne}var Te={node:{},way:{},relation:{}};for(var H in se){var ne=se[H];if(!an.isArray(ne.members)){r.verbose&&console.warn("Relation",ne.type+"/"+ne.id,"ignored because it has no members");continue}for(var N=0;N<ne.members.length;N++){var Ce=ne.members[N].type,Pe=ne.members[N].ref;if(typeof Pe!="number"&&(Pe=Pe.replace("_fullGeom","")),!Te[Ce]){r.verbose&&console.warn("Relation",ne.type+"/"+ne.id,"member",Ce+"/"+Pe,"ignored because it has an invalid type");continue}typeof Te[Ce][Pe]=="undefined"&&(Te[Ce][Pe]=[]),Te[Ce][Pe].push({role:ne.members[N].role,rel:ne.id,reltags:ne.tags})}}var Ze,rt=[];for(Z=0;Z<me.length;Z++){if(typeof me[Z].lon=="undefined"||typeof me[Z].lat=="undefined"){r.verbose&&console.warn("POI",me[Z].type+"/"+me[Z].id,"ignored because it lacks coordinates");continue}var ft={type:"Feature",id:me[Z].type+"/"+me[Z].id,properties:{type:me[Z].type,id:me[Z].id,tags:me[Z].tags||{},relations:Te.node[me[Z].id]||[],meta:P(me[Z])},geometry:{type:"Point",coordinates:[+me[Z].lon,+me[Z].lat]}};me[Z].__is_center_placeholder&&(ft.properties.geometry="center"),a?a(ft):rt.push(ft)}for(var dt=[],Ue=[],Z=0;Z<z.length;Z++)if(se[z[Z].id]===z[Z]){if(typeof z[Z].tags!="undefined"&&(z[Z].tags.type=="route"||z[Z].tags.type=="waterway")){let At=function(xt){var wt=!1,Xt;Xt=xt.members.filter(function(Tn){return Tn.type==="way"}),Xt=Xt.map(function(Tn){var Gt=$[Tn.ref];if(Gt===void 0||Gt.nodes===void 0){r.verbose&&console.warn("Route "+xt.type+"/"+xt.id,"tainted by a missing or incomplete  way",Tn.type+"/"+Tn.ref),wt=!0;return}return{id:Tn.ref,role:Tn.role,way:Gt,nodes:Gt.nodes.filter(function(Qt){return Qt!==void 0?!0:(wt=!0,r.verbose&&console.warn("Route",xt.type+"/"+xt.id,"tainted by a way",Tn.type+"/"+Tn.ref,"with a missing node"),!1)})}}),Xt=an.compact(Xt);var yn;yn=Yp(Xt);var un=[];if(un=an.compact(yn.map(function(Tn){return an.compact(Tn.map(function(Gt){return[+Gt.lon,+Gt.lat]}))})),un.length==0)return r.verbose&&console.warn("Route",xt.type+"/"+xt.id,"contains no coordinates"),!1;var xn={type:"Feature",id:xt.type+"/"+xt.id,properties:{type:xt.type,id:xt.id,tags:xt.tags||{},relations:Te[xt.type][xt.id]||[],meta:P(xt)},geometry:{type:un.length===1?"LineString":"MultiLineString",coordinates:un.length===1?un[0]:un}};return wt&&(r.verbose&&console.warn("Route",xt.type+"/"+xt.id,"is tainted"),xn.properties.tainted=!0),xn};if(!an.isArray(z[Z].members)){r.verbose&&console.warn("Route",z[Z].type+"/"+z[Z].id,"ignored because it has no members");continue}if(z[Z].members.forEach(function(xt){$[xt.ref]&&!C($[xt.ref].tags)&&($[xt.ref].is_skippablerelationmember=!0)}),ft=At(z[Z]),ft===!1){r.verbose&&console.warn("Route relation",z[Z].type+"/"+z[Z].id,"ignored because it has invalid geometry");continue}a?a(df(ft)):Ue.push(ft)}if(typeof z[Z].tags!="undefined"&&(z[Z].tags.type=="multipolygon"||z[Z].tags.type=="boundary")){let xt=function(wt,Xt){var yn=!1,un=rn?"way":"relation",xn=typeof wt.id=="number"?wt.id:+wt.id.replace("_fullGeom",""),Tn;Tn=Xt.members.filter(function(ie){return ie.type==="way"}),Tn=Tn.map(function(ie){var O=$[ie.ref];if(O===void 0||O.nodes===void 0){r.verbose&&console.warn("Multipolygon",un+"/"+xn,"tainted by a missing or incomplete way",ie.type+"/"+ie.ref),yn=!0;return}return{id:ie.ref,role:ie.role||"outer",way:O,nodes:O.nodes.filter(function(D){return D!==void 0?!0:(yn=!0,r.verbose&&console.warn("Multipolygon",un+"/"+xn,"tainted by a way",ie.type+"/"+ie.ref,"with a missing node"),!1)})}}),Tn=an.compact(Tn);var Gt,Qt;Gt=Yp(Tn.filter(function(ie){return ie.role==="outer"})),Qt=Yp(Tn.filter(function(ie){return ie.role==="inner"}));var hr;function rr(ie){var O=function(Xe,Dt){for(var ke=0;ke<Dt.length;ke++)if(ue(Dt[ke],Xe))return!0;return!1},D=function(Xe){return Xe.map(function(Dt){return[+Dt.lat,+Dt.lon]})},ue=function(Xe,Dt){for(var ke=Xe[0],Ge=Xe[1],wn=!1,en=0,ln=Dt.length-1;en<Dt.length;ln=en++){var Mn=Dt[en][0],Ln=Dt[en][1],Wr=Dt[ln][0],Yn=Dt[ln][1],et=Ln>Ge!=Yn>Ge&&ke<(Wr-Mn)*(Ge-Ln)/(Yn-Ln)+Mn;et&&(wn=!wn)}return wn},Ee,qe;for(ie=D(ie),Ee=0;Ee<Gt.length;Ee++)if(qe=D(Gt[Ee]),O(qe,ie))return Ee}hr=Gt.map(function(ie){return[ie]});for(var ir=0;ir<Qt.length;ir++){var Mr=rr(Qt[ir]);Mr!==void 0?hr[Mr].push(Qt[ir]):r.verbose&&console.warn("Multipolygon",un+"/"+xn,"contains an inner ring with no containing outer")}var Vn=[];if(Vn=an.compact(hr.map(function(ie){var O=an.compact(ie.map(function(D){if(D.length<4){r.verbose&&console.warn("Multipolygon",un+"/"+xn,"contains a ring with less than four nodes");return}return an.compact(D.map(function(ue){return[+ue.lon,+ue.lat]}))}));if(O.length==0){r.verbose&&console.warn("Multipolygon",un+"/"+xn,"contains an empty ring cluster");return}return O})),Vn.length==0)return r.verbose&&console.warn("Multipolygon",un+"/"+xn,"contains no coordinates"),!1;var Hn="MultiPolygon";Vn.length===1&&(Hn="Polygon",Vn=Vn[0]);var Br={type:"Feature",id:wt.type+"/"+xn,properties:{type:wt.type,id:xn,tags:wt.tags||{},relations:Te[wt.type][wt.id]||[],meta:P(wt)},geometry:{type:Hn,coordinates:Vn}};return yn&&(r.verbose&&console.warn("Multipolygon",un+"/"+xn,"is tainted"),Br.properties.tainted=!0),Br};if(!an.isArray(z[Z].members)){r.verbose&&console.warn("Multipolygon",z[Z].type+"/"+z[Z].id,"ignored because it has no members");continue}for(var yt=0,N=0;N<z[Z].members.length;N++)z[Z].members[N].role=="outer"?yt++:r.verbose&&z[Z].members[N].role!="inner"&&console.warn("Multipolygon",z[Z].type+"/"+z[Z].id,"member",z[Z].members[N].type+"/"+z[Z].members[N].ref,'ignored because it has an invalid role: "'+z[Z].members[N].role+'"');if(z[Z].members.forEach(function(wt){$[wt.ref]&&(wt.role==="outer"&&!C($[wt.ref].tags,z[Z].tags)&&($[wt.ref].is_skippablerelationmember=!0),wt.role==="inner"&&!C($[wt.ref].tags)&&($[wt.ref].is_skippablerelationmember=!0))}),yt==0){r.verbose&&console.warn("Multipolygon relation",z[Z].type+"/"+z[Z].id,"ignored because it has no outer ways");continue}var rn=!1;yt==1&&!C(z[Z].tags,{type:!0})&&(rn=!0);var ft=null;if(!rn)ft=xt(z[Z],z[Z]);else{var vn=z[Z].members.filter(function(wt){return wt.role==="outer"})[0];if(vn=$[vn.ref],vn===void 0){r.verbose&&console.warn("Multipolygon relation",z[Z].type+"/"+z[Z].id,"ignored because outer way",vn.type+"/"+vn.ref,"is missing");continue}vn.is_skippablerelationmember=!0,ft=xt(vn,z[Z])}if(ft===!1){r.verbose&&console.warn("Multipolygon relation",z[Z].type+"/"+z[Z].id,"ignored because it has invalid geometry");continue}a?a(df(ft)):Ue.push(ft)}}for(var Z=0;Z<A.length;Z++)if($[A[Z].id]===A[Z]){if(!an.isArray(A[Z].nodes)){r.verbose&&console.warn("Way",A[Z].type+"/"+A[Z].id,"ignored because it has no nodes");continue}if(!A[Z].is_skippablerelationmember){typeof A[Z].id!="number"&&(A[Z].id=+A[Z].id.replace("_fullGeom","")),A[Z].tainted=!1,A[Z].hidden=!1;var Sn=new Array;for(N=0;N<A[Z].nodes.length;N++)typeof A[Z].nodes[N]=="object"?Sn.push([+A[Z].nodes[N].lon,+A[Z].nodes[N].lat]):(r.verbose&&console.warn("Way",A[Z].type+"/"+A[Z].id,"is tainted by an invalid node"),A[Z].tainted=!0);if(Sn.length<=1){r.verbose&&console.warn("Way",A[Z].type+"/"+A[Z].id,"ignored because it contains too few nodes");continue}var Ye="LineString";typeof A[Z].nodes[0]!="undefined"&&typeof A[Z].nodes[A[Z].nodes.length-1]!="undefined"&&A[Z].nodes[0].id===A[Z].nodes[A[Z].nodes.length-1].id&&(typeof A[Z].tags!="undefined"&&l(A[Z].tags)||A[Z].__is_bounds_placeholder)&&(Ye="Polygon",Sn=[Sn]);var ft={type:"Feature",id:A[Z].type+"/"+A[Z].id,properties:{type:A[Z].type,id:A[Z].id,tags:A[Z].tags||{},relations:Te.way[A[Z].id]||[],meta:P(A[Z])},geometry:{type:Ye,coordinates:Sn}};A[Z].tainted&&(r.verbose&&console.warn("Way",A[Z].type+"/"+A[Z].id,"is tainted"),ft.properties.tainted=!0),A[Z].__is_bounds_placeholder&&(ft.properties.geometry="bounds"),a?a(df(ft)):Ye=="LineString"?dt.push(ft):Ue.push(ft)}}return a?!0:(Ze={type:"FeatureCollection",features:[]},Ze.features=Ze.features.concat(Ue),Ze.features=Ze.features.concat(dt),Ze.features=Ze.features.concat(rt),r.flatProperties&&Ze.features.forEach(function(mt){mt.properties=an.merge(mt.properties.meta,mt.properties.tags,{id:mt.properties.type+"/"+mt.properties.id})}),Ze=df(Ze),Ze)}function l(S){var A=r.polygonFeatures;if(typeof A=="function")return A(S);if(S.area==="no")return!1;for(var z in S){var C=S[z],P=A[z];if(typeof P!="undefined"&&C!=="no"&&(P===!0||P.included_values&&P.included_values[C]===!0||P.excluded_values&&P.excluded_values[C]!==!0))return!0}return!1}};function Yp(e){for(var r=function(C){return C[0]},a=function(C){return C[C.length-1]},c=function(C,P){return C!==void 0&&P!==void 0&&C.id===P.id},d=[],_,x,l,S,A,z;e.length;)for(_=e.pop().nodes.slice(),d.push(_);e.length&&!c(r(_),a(_));){for(x=r(_),l=a(_),S=0;S<e.length;S++)if(z=e[S].nodes,c(l,r(z))){A=_.push,z=z.slice(1);break}else if(c(l,a(z))){A=_.push,z=z.slice(0,-1).reverse();break}else if(c(x,a(z))){A=_.unshift,z=z.slice(0,-1);break}else if(c(x,r(z))){A=_.unshift,z=z.slice(1).reverse();break}else z=A=null;if(!z)break;e.splice(S,1),A.apply(_,z)}return d}ad.toGeojson=ad;var IC=ad;function yw(e,r,a){a===void 0&&(a={});var c={type:"Feature"};return(a.id===0||a.id)&&(c.id=a.id),a.bbox&&(c.bbox=a.bbox),c.properties=r||{},c.geometry=e,c}function rC(e,r,a){if(a===void 0&&(a={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Rv(e[0])||!Rv(e[1]))throw new Error("coordinates must contain numbers");var c={type:"Point",coordinates:e};return yw(c,r,a)}function PC(e,r,a){a===void 0&&(a={});for(var c=0,d=e;c<d.length;c++){var _=d[c];if(_.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<_[_.length-1].length;x++)if(_[_.length-1][x]!==_[0][x])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return yw(l,r,a)}function Rv(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function _w(e,r,a){if(e!==null)for(var c,d,_,x,l,S,A,z=0,C=0,P,q=e.type,te=q==="FeatureCollection",Z=q==="Feature",j=te?e.features.length:1,N=0;N<j;N++){A=te?e.features[N].geometry:Z?e.geometry:e,P=A?A.type==="GeometryCollection":!1,l=P?A.geometries.length:1;for(var $=0;$<l;$++){var G=0,J=0;if(x=P?A.geometries[$]:A,x!==null){S=x.coordinates;var me=x.type;switch(z=a&&(me==="Polygon"||me==="MultiPolygon")?1:0,me){case null:break;case"Point":if(r(S,C,N,G,J)===!1)return!1;C++,G++;break;case"LineString":case"MultiPoint":for(c=0;c<S.length;c++){if(r(S[c],C,N,G,J)===!1)return!1;C++,me==="MultiPoint"&&G++}me==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(c=0;c<S.length;c++){for(d=0;d<S[c].length-z;d++){if(r(S[c][d],C,N,G,J)===!1)return!1;C++}me==="MultiLineString"&&G++,me==="Polygon"&&J++}me==="Polygon"&&G++;break;case"MultiPolygon":for(c=0;c<S.length;c++){for(J=0,d=0;d<S[c].length;d++){for(_=0;_<S[c][d].length-z;_++){if(r(S[c][d][_],C,N,G,J)===!1)return!1;C++}J++}G++}break;case"GeometryCollection":for(c=0;c<x.geometries.length;c++)if(_w(x.geometries[c],r,a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function MC(e,r){r===void 0&&(r={});var a=0,c=0,d=0;return _w(e,function(_){a+=_[0],c+=_[1],d++},!0),rC([a/d,c/d],r.properties)}function Nc(e,r,a){return parseInt(e.substr(r,a),16)}function vw(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Kp(e,r,a){return a=a<0?a+6:a>6?a-6:a,vw(255*(a<1?e+(r-e)*a:a<3?r:a<4?e+(r-e)*(4-a):e))}function iC(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let r;const a=e.length;if(a<6){const c=e[1],d=e[2],_=e[3],x=e[4]||"";r="#"+c+c+d+d+_+_+x+x}return(a==7||a>8)&&(r=e),r}}function oC(e,r,a){let c;if(r==0){const d=vw(a*255);c=d+d+d}else{const d=a<=.5?a*(r+1):a+r-a*r,_=a*2-d;c=Kp(_,d,e*6+2)+Kp(_,d,e*6)+Kp(_,d,e*6-2)}return"#"+c}function zc(e,r,a){const c=[.55,.5,.5,.46,.6,.55,.55],d=c[e*6+.5|0];return a=a<.5?a*d*2:d+(a-.5)*(1-d)*2,oC(e,r,a)}const aC=typeof window!="undefined"?window:typeof self!="undefined"?self:typeof global!="undefined"?global:{},Dv={V:"jdenticon_config",n:"config"};var sC={};function lC(e,r){const a=typeof e=="object"&&e||sC[Dv.n]||aC[Dv.V]||{},c=a.lightness||{},d=a.saturation||{},_="color"in d?d.color:d,x=d.grayscale,l=a.backColor,S=a.padding;function A(C,P){let q=c[C];return q&&q.length>1||(q=P),function(te){return te=q[0]+te*(q[1]-q[0]),te<0?0:te>1?1:te}}function z(C){const P=a.hues;let q;return P&&P.length>0&&(q=P[0|.999*C*P.length]),typeof q=="number"?(q/360%1+1)%1:C}return{W:z,o:typeof _=="number"?_:.5,D:typeof x=="number"?x:0,p:A("color",[.4,.8]),F:A("grayscale",[.3,.9]),G:iC(l),X:typeof e=="number"?e:typeof S=="number"?S:r}}class pf{constructor(r,a){this.x=r,this.y=a}}class xw{constructor(r,a,c,d){this.q=r,this.t=a,this.H=c,this.Y=d}I(r,a,c,d){const _=this.q+this.H,x=this.t+this.H,l=this.Y;return l===1?new pf(_-a-(d||0),this.t+r):l===2?new pf(_-r-(c||0),x-a-(d||0)):l===3?new pf(this.q+a,x-r-(c||0)):new pf(this.q+r,this.t+a)}}const uC=new xw(0,0,0,0);class cC{constructor(r){this.J=r,this.u=uC}g(r,a){const c=a?-2:2,d=[];for(let _=a?r.length-2:0;_<r.length&&_>=0;_+=c)d.push(this.u.I(r[_],r[_+1]));this.J.g(d)}h(r,a,c,d){const _=this.u.I(r,a,c,c);this.J.h(_,c,d)}i(r,a,c,d,_){this.g([r,a,r+c,a,r+c,a+d,r,a+d],_)}j(r,a,c,d,_,x){const l=[r+c,a,r+c,a+d,r,a+d,r,a];l.splice((_||0)%4*2,2),this.g(l,x)}K(r,a,c,d,_){this.g([r+c/2,a,r+c,a+d/2,r+c/2,a+d,r,a+d/2],_)}}function hC(e,r,a,c){e=e%14;let d,_,x,l,S,A;e?e==1?(x=0|a*.5,l=0|a*.8,r.j(a-x,0,x,l,2)):e==2?(x=0|a/3,r.i(x,x,a-x,a-x)):e==3?(S=a*.1,A=a<6?1:a<8?2:0|a*.25,S=S>1?0|S:S>.5?1:S,r.i(A,A,a-S-A,a-S-A)):e==4?(_=0|a*.15,x=0|a*.5,r.h(a-x-_,a-x-_,x)):e==5?(S=a*.1,A=S*4,A>3&&(A=0|A),r.i(0,0,a,a),r.g([A,A,a-S,A,A+(a-A-S)/2,a-S],!0)):e==6?r.g([0,0,a,0,a,a*.7,a*.4,a*.4,a*.7,a,0,a]):e==7?r.j(a/2,a/2,a/2,a/2,3):e==8?(r.i(0,0,a,a/2),r.i(0,a/2,a/2,a/2),r.j(a/2,a/2,a/2,a/2,1)):e==9?(S=a*.14,A=a<4?1:a<6?2:0|a*.35,S=a<8?S:0|S,r.i(0,0,a,a),r.i(A,A,a-A-S,a-A-S,!0)):e==10?(S=a*.12,A=S*3,r.i(0,0,a,a),r.h(A,A,a-S-A,!0)):e==11?r.j(a/2,a/2,a/2,a/2,3):e==12?(_=a*.25,r.i(0,0,a,a),r.K(_,_,a-_,a-_,!0)):!c&&(_=a*.4,x=a*1.2,r.h(_,_,x)):(d=a*.42,r.g([0,0,a,0,a,a-d*2,a-d,a,0,a]))}function Fv(e,r,a){e=e%4;let c;e?e==1?r.j(0,a/2,a,a/2,0):e==2?r.K(0,0,a,a):(c=a/6,r.h(c,c,a-2*c)):r.j(0,0,a,a,0)}function fC(e,r){return e=r.W(e),[zc(e,r.D,r.F(0)),zc(e,r.o,r.p(.5)),zc(e,r.D,r.F(1)),zc(e,r.o,r.p(1)),zc(e,r.o,r.p(0))]}function dC(e,r,a){const c=lC(a,.08);c.G&&e.m(c.G);let d=e.k;const _=.5+d*c.X|0;d-=_*2;const x=new cC(e),l=0|d/4,S=0|_+d/2-l*2,A=0|_+d/2-l*2;function z(j,N,$,G,J){const me=Nc(r,$,1);let H=G?Nc(r,G,1):0;e.L(P[q[j]]);for(let se=0;se<J.length;se++)x.u=new xw(S+J[se][0]*l,A+J[se][1]*l,l,H++%4),N(me,x,l,se);e.M()}const C=Nc(r,-7)/268435455,P=fC(C,c),q=[];let te;function Z(j){if(j.indexOf(te)>=0){for(let N=0;N<j.length;N++)if(q.indexOf(j[N])>=0)return!0}}for(let j=0;j<3;j++)te=Nc(r,8+j,1)%P.length,(Z([0,4])||Z([2,3]))&&(te=1),q.push(te);z(0,Fv,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),z(1,Fv,4,5,[[0,0],[3,0],[3,3],[0,3]]),z(2,hC,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function pC(e){var c=0,d=0,_=encodeURI(e)+"%80",x=[],l,S=[],A=1732584193,z=4023233417,C=~A,P=~z,q=3285377520,te=[A,z,C,P,q],Z=0,j="";function N($,G){return $<<G|$>>>32-G}for(;c<_.length;d++)x[d>>2]=x[d>>2]|(_[c]=="%"?parseInt(_.substring(c+1,c+=3),16):_.charCodeAt(c++))<<(3-(d&3))*8;for(l=((d+7>>6)+1)*16,x[l-1]=d*8-8;Z<l;Z+=16){for(c=0;c<80;c++)d=N(A,5)+q+(c<20?(z&C^~z&P)+1518500249:c<40?(z^C^P)+1859775393:c<60?(z&C^z&P^C&P)+2400959708:(z^C^P)+3395469782)+(S[c]=c<16?x[Z+c]|0:N(S[c-3]^S[c-8]^S[c-14]^S[c-16],1)),q=P,P=C,C=N(z,30),z=A,A=d;te[0]=A=te[0]+A|0,te[1]=z=te[1]+z|0,te[2]=C=te[2]+C|0,te[3]=P=te[3]+P|0,te[4]=q=te[4]+q|0}for(c=0;c<40;c++)j+=(te[c>>3]>>>(7-(c&7))*4&15).toString(16);return j}function mC(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function gC(e){return pC(e==null?"":""+e)}function au(e){return(e*10+.5|0)/10}class yC{constructor(){this.v=""}g(r){let a="";for(let c=0;c<r.length;c++)a+=(c?"L":"M")+au(r[c].x)+" "+au(r[c].y);this.v+=a+"Z"}h(r,a,c){const d=c?0:1,_=au(a/2),x=au(a),l="a"+_+","+_+" 0 1,"+d+" ";this.v+="M"+au(r.x)+" "+au(r.y+a/2)+l+x+",0"+l+-x+",0"}}class _C{constructor(r){this.A,this.B={},this.N=r,this.k=r.k}m(r){const a=/^(#......)(..)?/.exec(r),c=a[2]?Nc(a[2],0)/255:1;this.N.m(a[1],c)}L(r){this.A=this.B[r]||(this.B[r]=new yC)}M(){}g(r){this.A.g(r)}h(r,a,c){this.A.h(r,a,c)}finish(){const r=this.B;for(let a in r)r.hasOwnProperty(a)&&this.N.O(a,r[a].v)}}const vC={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class xC{constructor(r){this.k=r,this.C='<svg xmlns="'+vC.P+'" width="'+r+'" height="'+r+'" viewBox="0 0 '+r+" "+r+'">'}m(r,a){a&&(this.C+='<rect width="100%" height="100%" fill="'+r+'" opacity="'+a.toFixed(2)+'"/>')}O(r,a){this.C+='<path fill="'+r+'" d="'+a+'"/>'}toString(){return this.C+"</svg>"}}function zC(e,r,a){const c=new xC(r);return dC(new _C(c),mC(e)||gC(e),a),c.toString()}typeof document!="undefined"&&document.querySelectorAll.bind(document);export{Cd as F,AC as G,kC as L,TC as M,bC as R,CC as S,SC as a,uw as b,MC as c,GA as d,S2 as e,EC as f,ZA as j,$A as m,IC as o,PC as p,Lt as r,zC as t};
