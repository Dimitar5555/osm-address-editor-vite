var nC=Object.defineProperty,rC=Object.defineProperties;var iC=Object.getOwnPropertyDescriptors;var bx=Object.getOwnPropertySymbols;var oC=Object.prototype.hasOwnProperty,aC=Object.prototype.propertyIsEnumerable;var Ex=(e,t,r)=>t in e?nC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wi=(e,t)=>{for(var r in t||(t={}))oC.call(t,r)&&Ex(e,r,t[r]);if(bx)for(var r of bx(t))aC.call(t,r)&&Ex(e,r,t[r]);return e},Qu=(e,t)=>rC(e,iC(t));function sC(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(l){if(l!=="default"&&!(l in e)){var c=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:function(){return r[l]}})}})}),Object.freeze(e)}var Gs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dv(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var l=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:function(){return e[r]}})}),t}function Pd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rn={exports:{}},Gn={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Sx=Object.getOwnPropertySymbols,lC=Object.prototype.hasOwnProperty,uC=Object.prototype.propertyIsEnumerable;function cC(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function hC(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var l=Object.getOwnPropertyNames(t).map(function(d){return t[d]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(d){c[d]=d}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var v2=hC()?Object.assign:function(e,t){for(var r,l=cC(e),c,d=1;d<arguments.length;d++){r=Object(arguments[d]);for(var y in r)lC.call(r,y)&&(l[y]=r[y]);if(Sx){c=Sx(r);for(var s=0;s<c.length;s++)uC.call(r,c[s])&&(l[c[s]]=r[c[s]])}}return l};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv=v2,Vc=60103,_2=60106;Gn.Fragment=60107;Gn.StrictMode=60108;Gn.Profiler=60114;var x2=60109,w2=60110,b2=60112;Gn.Suspense=60113;var E2=60115,S2=60116;if(typeof Symbol=="function"&&Symbol.for){var na=Symbol.for;Vc=na("react.element"),_2=na("react.portal"),Gn.Fragment=na("react.fragment"),Gn.StrictMode=na("react.strict_mode"),Gn.Profiler=na("react.profiler"),x2=na("react.provider"),w2=na("react.context"),b2=na("react.forward_ref"),Gn.Suspense=na("react.suspense"),E2=na("react.memo"),S2=na("react.lazy")}var Tx=typeof Symbol=="function"&&Symbol.iterator;function fC(e){return e===null||typeof e!="object"?null:(e=Tx&&e[Tx]||e["@@iterator"],typeof e=="function"?e:null)}function Nf(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A2={};function Gc(e,t,r){this.props=e,this.context=t,this.refs=A2,this.updater=r||T2}Gc.prototype.isReactComponent={};Gc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Nf(85));this.updater.enqueueSetState(this,e,t,"setState")};Gc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function I2(){}I2.prototype=Gc.prototype;function mv(e,t,r){this.props=e,this.context=t,this.refs=A2,this.updater=r||T2}var gv=mv.prototype=new I2;gv.constructor=mv;pv(gv,Gc.prototype);gv.isPureReactComponent=!0;var yv={current:null},C2=Object.prototype.hasOwnProperty,P2={key:!0,ref:!0,__self:!0,__source:!0};function k2(e,t,r){var l,c={},d=null,y=null;if(t!=null)for(l in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(d=""+t.key),t)C2.call(t,l)&&!P2.hasOwnProperty(l)&&(c[l]=t[l]);var s=arguments.length-2;if(s===1)c.children=r;else if(1<s){for(var w=Array(s),E=0;E<s;E++)w[E]=arguments[E+2];c.children=w}if(e&&e.defaultProps)for(l in s=e.defaultProps,s)c[l]===void 0&&(c[l]=s[l]);return{$$typeof:Vc,type:e,key:d,ref:y,props:c,_owner:yv.current}}function dC(e,t){return{$$typeof:Vc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vc}function pC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ax=/\/+/g;function Wg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pC(""+e.key):t.toString(36)}function tp(e,t,r,l,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(d){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Vc:case _2:y=!0}}if(y)return y=e,c=c(y),e=l===""?"."+Wg(y,0):l,Array.isArray(c)?(r="",e!=null&&(r=e.replace(Ax,"$&/")+"/"),tp(c,t,r,"",function(E){return E})):c!=null&&(vv(c)&&(c=dC(c,r+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(Ax,"$&/")+"/")+e)),t.push(c)),1;if(y=0,l=l===""?".":l+":",Array.isArray(e))for(var s=0;s<e.length;s++){d=e[s];var w=l+Wg(d,s);y+=tp(d,t,r,w,c)}else if(w=fC(e),typeof w=="function")for(e=w.call(e),s=0;!(d=e.next()).done;)d=d.value,w=l+Wg(d,s++),y+=tp(d,t,r,w,c);else if(d==="object")throw t=""+e,Error(Nf(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return y}function kd(e,t,r){if(e==null)return e;var l=[],c=0;return tp(e,l,"","",function(d){return t.call(r,d,c++)}),l}function mC(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var M2={current:null};function ys(){var e=M2.current;if(e===null)throw Error(Nf(321));return e}var gC={ReactCurrentDispatcher:M2,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:yv,IsSomeRendererActing:{current:!1},assign:pv};Gn.Children={map:kd,forEach:function(e,t,r){kd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return kd(e,function(){t++}),t},toArray:function(e){return kd(e,function(t){return t})||[]},only:function(e){if(!vv(e))throw Error(Nf(143));return e}};Gn.Component=Gc;Gn.PureComponent=mv;Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC;Gn.cloneElement=function(e,t,r){if(e==null)throw Error(Nf(267,e));var l=pv({},e.props),c=e.key,d=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,y=yv.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(w in t)C2.call(t,w)&&!P2.hasOwnProperty(w)&&(l[w]=t[w]===void 0&&s!==void 0?s[w]:t[w])}var w=arguments.length-2;if(w===1)l.children=r;else if(1<w){s=Array(w);for(var E=0;E<w;E++)s[E]=arguments[E+2];l.children=s}return{$$typeof:Vc,type:e.type,key:c,ref:d,props:l,_owner:y}};Gn.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:w2,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:x2,_context:e},e.Consumer=e};Gn.createElement=k2;Gn.createFactory=function(e){var t=k2.bind(null,e);return t.type=e,t};Gn.createRef=function(){return{current:null}};Gn.forwardRef=function(e){return{$$typeof:b2,render:e}};Gn.isValidElement=vv;Gn.lazy=function(e){return{$$typeof:S2,_payload:{_status:-1,_result:e},_init:mC}};Gn.memo=function(e,t){return{$$typeof:E2,type:e,compare:t===void 0?null:t}};Gn.useCallback=function(e,t){return ys().useCallback(e,t)};Gn.useContext=function(e,t){return ys().useContext(e,t)};Gn.useDebugValue=function(){};Gn.useEffect=function(e,t){return ys().useEffect(e,t)};Gn.useImperativeHandle=function(e,t,r){return ys().useImperativeHandle(e,t,r)};Gn.useLayoutEffect=function(e,t){return ys().useLayoutEffect(e,t)};Gn.useMemo=function(e,t){return ys().useMemo(e,t)};Gn.useReducer=function(e,t,r){return ys().useReducer(e,t,r)};Gn.useRef=function(e){return ys().useRef(e)};Gn.useState=function(e){return ys().useState(e)};Gn.version="17.0.2";rn.exports=Gn;var yC=rn.exports,Sm={exports:{}},jo={},z2={exports:{}},O2={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,l,c;if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,s=y.now();e.unstable_now=function(){return y.now()-s}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var w=null,E=null,C=function(){if(w!==null)try{var ce=e.unstable_now();w(!0,ce),w=null}catch(ke){throw setTimeout(C,0),ke}};t=function(ce){w!==null?setTimeout(t,0,ce):(w=ce,setTimeout(C,0))},r=function(ce,ke){E=setTimeout(ce,ke)},l=function(){clearTimeout(E)},e.unstable_shouldYield=function(){return!1},c=e.unstable_forceFrameRate=function(){}}else{var S=window.setTimeout,P=window.clearTimeout;if(typeof console!="undefined"){var N=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof N!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var ee=!1,Y=null,W=-1,$=5,G=0;e.unstable_shouldYield=function(){return e.unstable_now()>=G},c=function(){},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<ce?Math.floor(1e3/ce):5};var V=new MessageChannel,re=V.port2;V.port1.onmessage=function(){if(Y!==null){var ce=e.unstable_now();G=ce+$;try{Y(!0,ce)?re.postMessage(null):(ee=!1,Y=null)}catch(ke){throw re.postMessage(null),ke}}else ee=!1},t=function(ce){Y=ce,ee||(ee=!0,re.postMessage(null))},r=function(ce,ke){W=S(function(){ce(e.unstable_now())},ke)},l=function(){P(W),W=-1}}function H(ce,ke){var be=ce.length;ce.push(ke);e:for(;;){var Ie=be-1>>>1,Be=ce[Ie];if(Be!==void 0&&0<M(Be,ke))ce[Ie]=ke,ce[be]=Be,be=Ie;else break e}}function F(ce){return ce=ce[0],ce===void 0?null:ce}function b(ce){var ke=ce[0];if(ke!==void 0){var be=ce.pop();if(be!==ke){ce[0]=be;e:for(var Ie=0,Be=ce.length;Ie<Be;){var Ze=2*(Ie+1)-1,et=ce[Ze],tt=Ze+1,ct=ce[tt];if(et!==void 0&&0>M(et,be))ct!==void 0&&0>M(ct,et)?(ce[Ie]=ct,ce[tt]=be,Ie=tt):(ce[Ie]=et,ce[Ze]=be,Ie=Ze);else if(ct!==void 0&&0>M(ct,be))ce[Ie]=ct,ce[tt]=be,Ie=tt;else break e}}return ke}return null}function M(ce,ke){var be=ce.sortIndex-ke.sortIndex;return be!==0?be:ce.id-ke.id}var D=[],q=[],K=1,de=null,ye=3,xe=!1,te=!1,ae=!1;function oe(ce){for(var ke=F(q);ke!==null;){if(ke.callback===null)b(q);else if(ke.startTime<=ce)b(q),ke.sortIndex=ke.expirationTime,H(D,ke);else break;ke=F(q)}}function ue(ce){if(ae=!1,oe(ce),!te)if(F(D)!==null)te=!0,t(Ee);else{var ke=F(q);ke!==null&&r(ue,ke.startTime-ce)}}function Ee(ce,ke){te=!1,ae&&(ae=!1,l()),xe=!0;var be=ye;try{for(oe(ke),de=F(D);de!==null&&(!(de.expirationTime>ke)||ce&&!e.unstable_shouldYield());){var Ie=de.callback;if(typeof Ie=="function"){de.callback=null,ye=de.priorityLevel;var Be=Ie(de.expirationTime<=ke);ke=e.unstable_now(),typeof Be=="function"?de.callback=Be:de===F(D)&&b(D),oe(ke)}else b(D);de=F(D)}if(de!==null)var Ze=!0;else{var et=F(q);et!==null&&r(ue,et.startTime-ke),Ze=!1}return Ze}finally{de=null,ye=be,xe=!1}}var Pe=c;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){te||xe||(te=!0,t(Ee))},e.unstable_getCurrentPriorityLevel=function(){return ye},e.unstable_getFirstCallbackNode=function(){return F(D)},e.unstable_next=function(ce){switch(ye){case 1:case 2:case 3:var ke=3;break;default:ke=ye}var be=ye;ye=ke;try{return ce()}finally{ye=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Pe,e.unstable_runWithPriority=function(ce,ke){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var be=ye;ye=ce;try{return ke()}finally{ye=be}},e.unstable_scheduleCallback=function(ce,ke,be){var Ie=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ie+be:Ie):be=Ie,ce){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=be+Be,ce={id:K++,callback:ke,priorityLevel:ce,startTime:be,expirationTime:Be,sortIndex:-1},be>Ie?(ce.sortIndex=be,H(q,ce),F(D)===null&&ce===F(q)&&(ae?l():ae=!0,r(ue,be-Ie))):(ce.sortIndex=Be,H(D,ce),te||xe||(te=!0,t(Ee))),ce},e.unstable_wrapCallback=function(ce){var ke=ye;return function(){var be=ye;ye=ke;try{return ce.apply(this,arguments)}finally{ye=be}}}})(O2);z2.exports=O2;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=rn.exports,Sr=v2,ni=z2.exports;function Ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Tm)throw Error(Ct(227));var L2=new Set,wf={};function du(e,t){Lc(e,t),Lc(e+"Capture",t)}function Lc(e,t){for(wf[e]=t,e=0;e<t.length;e++)L2.add(t[e])}var fs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),vC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ix=Object.prototype.hasOwnProperty,Cx={},Px={};function _C(e){return Ix.call(Px,e)?!0:Ix.call(Cx,e)?!1:vC.test(e)?Px[e]=!0:(Cx[e]=!0,!1)}function xC(e,t,r,l){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wC(e,t,r,l){if(t===null||typeof t=="undefined"||xC(e,t,r,l))return!0;if(l)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xi(e,t,r,l,c,d,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=y}var di={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){di[e]=new Xi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];di[t]=new Xi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){di[e]=new Xi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){di[e]=new Xi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){di[e]=new Xi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){di[e]=new Xi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){di[e]=new Xi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){di[e]=new Xi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){di[e]=new Xi(e,5,!1,e.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function xv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_v,xv);di[t]=new Xi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_v,xv);di[t]=new Xi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_v,xv);di[t]=new Xi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){di[e]=new Xi(e,1,!1,e.toLowerCase(),null,!1,!1)});di.xlinkHref=new Xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){di[e]=new Xi(e,1,!1,e.toLowerCase(),null,!0,!0)});function wv(e,t,r,l){var c=di.hasOwnProperty(t)?di[t]:null,d=c!==null?c.type===0:l?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");d||(wC(t,r,c,l)&&(r=null),l||c===null?_C(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,l=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,l?e.setAttributeNS(l,t,r):e.setAttribute(t,r))))}var pu=Tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$h=60103,Ql=60106,Ws=60107,bv=60108,tf=60114,Ev=60109,Sv=60110,Am=60112,nf=60113,bp=60120,Im=60115,Tv=60116,Av=60121,Iv=60128,R2=60129,Cv=60130,Ly=60131;if(typeof Symbol=="function"&&Symbol.for){var ti=Symbol.for;$h=ti("react.element"),Ql=ti("react.portal"),Ws=ti("react.fragment"),bv=ti("react.strict_mode"),tf=ti("react.profiler"),Ev=ti("react.provider"),Sv=ti("react.context"),Am=ti("react.forward_ref"),nf=ti("react.suspense"),bp=ti("react.suspense_list"),Im=ti("react.memo"),Tv=ti("react.lazy"),Av=ti("react.block"),ti("react.scope"),Iv=ti("react.opaque.id"),R2=ti("react.debug_trace_mode"),Cv=ti("react.offscreen"),Ly=ti("react.legacy_hidden")}var kx=typeof Symbol=="function"&&Symbol.iterator;function Ph(e){return e===null||typeof e!="object"?null:(e=kx&&e[kx]||e["@@iterator"],typeof e=="function"?e:null)}var Zg;function Vh(e){if(Zg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zg=t&&t[1]||""}return`
`+Zg+e}var Hg=!1;function Md(e,t){if(!e||Hg)return"";Hg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var l=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){l=w}e.call(t.prototype)}else{try{throw Error()}catch(w){l=w}e()}}catch(w){if(w&&l&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=l.stack.split(`
`),y=c.length-1,s=d.length-1;1<=y&&0<=s&&c[y]!==d[s];)s--;for(;1<=y&&0<=s;y--,s--)if(c[y]!==d[s]){if(y!==1||s!==1)do if(y--,s--,0>s||c[y]!==d[s])return`
`+c[y].replace(" at new "," at ");while(1<=y&&0<=s);break}}}finally{Hg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Vh(e):""}function bC(e){switch(e.tag){case 5:return Vh(e.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return e=Md(e.type,!1),e;case 11:return e=Md(e.type.render,!1),e;case 22:return e=Md(e.type._render,!1),e;case 1:return e=Md(e.type,!0),e;default:return""}}function wc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ws:return"Fragment";case Ql:return"Portal";case tf:return"Profiler";case bv:return"StrictMode";case nf:return"Suspense";case bp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sv:return(e.displayName||"Context")+".Consumer";case Ev:return(e._context.displayName||"Context")+".Provider";case Am:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Im:return wc(e.type);case Av:return wc(e._render);case Tv:t=e._payload,e=e._init;try{return wc(e(t))}catch{}}return null}function ol(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function F2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EC(e){var t=F2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zd(e){e._valueTracker||(e._valueTracker=EC(e))}function B2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=F2(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function Ep(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ry(e,t){var r=t.checked;return Sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Mx(e,t){var r=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;r=ol(t.value!=null?t.value:r),e._wrapperState={initialChecked:l,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function j2(e,t){t=t.checked,t!=null&&wv(e,"checked",t,!1)}function Fy(e,t){j2(e,t);var r=ol(t.value),l=t.type;if(r!=null)l==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?By(e,t.type,r):t.hasOwnProperty("defaultValue")&&By(e,t.type,ol(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function By(e,t,r){(t!=="number"||Ep(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function SC(e){var t="";return Tm.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function jy(e,t){return e=Sr({children:void 0},t),(t=SC(t.children))&&(e.children=t),e}function bc(e,t,r,l){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&l&&(e[r].defaultSelected=!0)}else{for(r=""+ol(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Dy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ct(91));return Sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ox(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ct(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Ct(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ol(r)}}function D2(e,t){var r=ol(t.value),l=ol(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),l!=null&&(e.defaultValue=""+l)}function Lx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Ny={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function N2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?N2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Od,U2=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,l,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,l,c)})}:e}(function(e,t){if(e.namespaceURI!==Ny.svg||"innerHTML"in e)e.innerHTML=t;else{for(Od=Od||document.createElement("div"),Od.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Od.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TC=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(e){TC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rf[t]=rf[e]})});function $2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rf.hasOwnProperty(e)&&rf[e]?(""+t).trim():t+"px"}function V2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var l=r.indexOf("--")===0,c=$2(r,t[r],l);r==="float"&&(r="cssFloat"),l?e.setProperty(r,c):e[r]=c}}var AC=Sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $y(e,t){if(t){if(AC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ct(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ct(62))}}function Vy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Pv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gy=null,Ec=null,Sc=null;function Rx(e){if(e=$f(e)){if(typeof Gy!="function")throw Error(Ct(280));var t=e.stateNode;t&&(t=Om(t),Gy(e.stateNode,e.type,t))}}function G2(e){Ec?Sc?Sc.push(e):Sc=[e]:Ec=e}function W2(){if(Ec){var e=Ec,t=Sc;if(Sc=Ec=null,Rx(e),t)for(e=0;e<t.length;e++)Rx(t[e])}}function kv(e,t){return e(t)}function Z2(e,t,r,l,c){return e(t,r,l,c)}function Mv(){}var H2=kv,eu=!1,Xg=!1;function zv(){(Ec!==null||Sc!==null)&&(Mv(),W2())}function IC(e,t,r){if(Xg)return e(t,r);Xg=!0;try{return H2(e,t,r)}finally{Xg=!1,zv()}}function Ef(e,t){var r=e.stateNode;if(r===null)return null;var l=Om(r);if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ct(231,t,typeof r));return r}var Wy=!1;if(fs)try{var kh={};Object.defineProperty(kh,"passive",{get:function(){Wy=!0}}),window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{Wy=!1}function CC(e,t,r,l,c,d,y,s,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(C){this.onError(C)}}var of=!1,Sp=null,Tp=!1,Zy=null,PC={onError:function(e){of=!0,Sp=e}};function kC(e,t,r,l,c,d,y,s,w){of=!1,Sp=null,CC.apply(PC,arguments)}function MC(e,t,r,l,c,d,y,s,w){if(kC.apply(this,arguments),of){if(of){var E=Sp;of=!1,Sp=null}else throw Error(Ct(198));Tp||(Tp=!0,Zy=E)}}function mu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function X2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fx(e){if(mu(e)!==e)throw Error(Ct(188))}function zC(e){var t=e.alternate;if(!t){if(t=mu(e),t===null)throw Error(Ct(188));return t!==e?null:e}for(var r=e,l=t;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){r=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return Fx(c),e;if(d===l)return Fx(c),t;d=d.sibling}throw Error(Ct(188))}if(r.return!==l.return)r=c,l=d;else{for(var y=!1,s=c.child;s;){if(s===r){y=!0,r=c,l=d;break}if(s===l){y=!0,l=c,r=d;break}s=s.sibling}if(!y){for(s=d.child;s;){if(s===r){y=!0,r=d,l=c;break}if(s===l){y=!0,l=d,r=c;break}s=s.sibling}if(!y)throw Error(Ct(189))}}if(r.alternate!==l)throw Error(Ct(190))}if(r.tag!==3)throw Error(Ct(188));return r.stateNode.current===r?e:t}function Y2(e){if(e=zC(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Bx(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var K2,Ov,q2,J2,Hy=!1,Ca=[],qs=null,Js=null,Qs=null,Sf=new Map,Tf=new Map,Mh=[],jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xy(e,t,r,l,c){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:c,targetContainers:[l]}}function Dx(e,t){switch(e){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Sf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tf.delete(t.pointerId)}}function zh(e,t,r,l,c,d){return e===null||e.nativeEvent!==d?(e=Xy(t,r,l,c,d),t!==null&&(t=$f(t),t!==null&&Ov(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function OC(e,t,r,l,c){switch(t){case"focusin":return qs=zh(qs,e,t,r,l,c),!0;case"dragenter":return Js=zh(Js,e,t,r,l,c),!0;case"mouseover":return Qs=zh(Qs,e,t,r,l,c),!0;case"pointerover":var d=c.pointerId;return Sf.set(d,zh(Sf.get(d)||null,e,t,r,l,c)),!0;case"gotpointercapture":return d=c.pointerId,Tf.set(d,zh(Tf.get(d)||null,e,t,r,l,c)),!0}return!1}function LC(e){var t=tu(e.target);if(t!==null){var r=mu(t);if(r!==null){if(t=r.tag,t===13){if(t=X2(r),t!==null){e.blockedOn=t,J2(e.lanePriority,function(){ni.unstable_runWithPriority(e.priority,function(){q2(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function np(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=$f(r),t!==null&&Ov(t),e.blockedOn=r,!1;t.shift()}return!0}function Nx(e,t,r){np(e)&&r.delete(t)}function RC(){for(Hy=!1;0<Ca.length;){var e=Ca[0];if(e.blockedOn!==null){e=$f(e.blockedOn),e!==null&&K2(e);break}for(var t=e.targetContainers;0<t.length;){var r=Bv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Ca.shift()}qs!==null&&np(qs)&&(qs=null),Js!==null&&np(Js)&&(Js=null),Qs!==null&&np(Qs)&&(Qs=null),Sf.forEach(Nx),Tf.forEach(Nx)}function Oh(e,t){e.blockedOn===t&&(e.blockedOn=null,Hy||(Hy=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,RC)))}function Q2(e){function t(c){return Oh(c,e)}if(0<Ca.length){Oh(Ca[0],e);for(var r=1;r<Ca.length;r++){var l=Ca[r];l.blockedOn===e&&(l.blockedOn=null)}}for(qs!==null&&Oh(qs,e),Js!==null&&Oh(Js,e),Qs!==null&&Oh(Qs,e),Sf.forEach(t),Tf.forEach(t),r=0;r<Mh.length;r++)l=Mh[r],l.blockedOn===e&&(l.blockedOn=null);for(;0<Mh.length&&(r=Mh[0],r.blockedOn===null);)LC(r),r.blockedOn===null&&Mh.shift()}function Ld(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cc={animationend:Ld("Animation","AnimationEnd"),animationiteration:Ld("Animation","AnimationIteration"),animationstart:Ld("Animation","AnimationStart"),transitionend:Ld("Transition","TransitionEnd")},Yg={},eE={};fs&&(eE=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function Cm(e){if(Yg[e])return Yg[e];if(!cc[e])return e;var t=cc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eE)return Yg[e]=t[r];return e}var tE=Cm("animationend"),nE=Cm("animationiteration"),rE=Cm("animationstart"),iE=Cm("transitionend"),oE=new Map,Lv=new Map,FC=["abort","abort",tE,"animationEnd",nE,"animationIteration",rE,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",iE,"transitionEnd","waiting","waiting"];function Rv(e,t){for(var r=0;r<e.length;r+=2){var l=e[r],c=e[r+1];c="on"+(c[0].toUpperCase()+c.slice(1)),Lv.set(l,t),oE.set(l,c),du(c,[l])}}var BC=ni.unstable_now;BC();var mr=8;function lc(e){if((1&e)!==0)return mr=15,1;if((2&e)!==0)return mr=14,2;if((4&e)!==0)return mr=13,4;var t=24&e;return t!==0?(mr=12,t):(e&32)!==0?(mr=11,32):(t=192&e,t!==0?(mr=10,t):(e&256)!==0?(mr=9,256):(t=3584&e,t!==0?(mr=8,t):(e&4096)!==0?(mr=7,4096):(t=4186112&e,t!==0?(mr=6,t):(t=62914560&e,t!==0?(mr=5,t):e&67108864?(mr=4,67108864):(e&134217728)!==0?(mr=3,134217728):(t=805306368&e,t!==0?(mr=2,t):(1073741824&e)!==0?(mr=1,1073741824):(mr=8,e))))))}function jC(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function DC(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ct(358,e))}}function Af(e,t){var r=e.pendingLanes;if(r===0)return mr=0;var l=0,c=0,d=e.expiredLanes,y=e.suspendedLanes,s=e.pingedLanes;if(d!==0)l=d,c=mr=15;else if(d=r&134217727,d!==0){var w=d&~y;w!==0?(l=lc(w),c=mr):(s&=d,s!==0&&(l=lc(s),c=mr))}else d=r&~y,d!==0?(l=lc(d),c=mr):s!==0&&(l=lc(s),c=mr);if(l===0)return 0;if(l=31-al(l),l=r&((0>l?0:1<<l)<<1)-1,t!==0&&t!==l&&(t&y)===0){if(lc(t),c<=mr)return t;mr=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)r=31-al(t),c=1<<r,l|=e[r],t&=~c;return l}function aE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ap(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=uc(24&~t),e===0?Ap(10,t):e;case 10:return e=uc(192&~t),e===0?Ap(8,t):e;case 8:return e=uc(3584&~t),e===0&&(e=uc(4186112&~t),e===0&&(e=512)),e;case 2:return t=uc(805306368&~t),t===0&&(t=268435456),t}throw Error(Ct(358,e))}function uc(e){return e&-e}function Kg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pm(e,t,r){e.pendingLanes|=t;var l=t-1;e.suspendedLanes&=l,e.pingedLanes&=l,e=e.eventTimes,t=31-al(t),e[t]=r}var al=Math.clz32?Math.clz32:$C,NC=Math.log,UC=Math.LN2;function $C(e){return e===0?32:31-(NC(e)/UC|0)|0}var VC=ni.unstable_UserBlockingPriority,GC=ni.unstable_runWithPriority,rp=!0;function WC(e,t,r,l){eu||Mv();var c=Fv,d=eu;eu=!0;try{Z2(c,e,t,r,l)}finally{(eu=d)||zv()}}function ZC(e,t,r,l){GC(VC,Fv.bind(null,e,t,r,l))}function Fv(e,t,r,l){if(rp){var c;if((c=(t&4)===0)&&0<Ca.length&&-1<jx.indexOf(e))e=Xy(null,e,t,r,l),Ca.push(e);else{var d=Bv(e,t,r,l);if(d===null)c&&Dx(e,l);else{if(c){if(-1<jx.indexOf(e)){e=Xy(d,e,t,r,l),Ca.push(e);return}if(OC(d,e,t,r,l))return;Dx(e,l)}_E(e,t,l,null,r)}}}}function Bv(e,t,r,l){var c=Pv(l);if(c=tu(c),c!==null){var d=mu(c);if(d===null)c=null;else{var y=d.tag;if(y===13){if(c=X2(d),c!==null)return c;c=null}else if(y===3){if(d.stateNode.hydrate)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return _E(e,t,l,c,r),null}var Hs=null,jv=null,ip=null;function sE(){if(ip)return ip;var e,t=jv,r=t.length,l,c="value"in Hs?Hs.value:Hs.textContent,d=c.length;for(e=0;e<r&&t[e]===c[e];e++);var y=r-e;for(l=1;l<=y&&t[r-l]===c[d-l];l++);return ip=c.slice(e,1<l?1-l:void 0)}function op(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rd(){return!0}function Ux(){return!1}function mo(e){function t(r,l,c,d,y){this._reactName=r,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(d):d[s]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Rd:Ux,this.isPropagationStopped=Ux,this}return Sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),t}var Wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dv=mo(Wc),Uf=Sr({},Wc,{view:0,detail:0}),HC=mo(Uf),qg,Jg,Lh,km=Sr({},Uf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lh&&(Lh&&e.type==="mousemove"?(qg=e.screenX-Lh.screenX,Jg=e.screenY-Lh.screenY):Jg=qg=0,Lh=e),qg)},movementY:function(e){return"movementY"in e?e.movementY:Jg}}),$x=mo(km),XC=Sr({},km,{dataTransfer:0}),YC=mo(XC),KC=Sr({},Uf,{relatedTarget:0}),Qg=mo(KC),qC=Sr({},Wc,{animationName:0,elapsedTime:0,pseudoElement:0}),JC=mo(qC),QC=Sr({},Wc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eP=mo(QC),tP=Sr({},Wc,{data:0}),Vx=mo(tP),nP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iP[e])?!!t[e]:!1}function Nv(){return oP}var aP=Sr({},Uf,{key:function(e){if(e.key){var t=nP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=op(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nv,charCode:function(e){return e.type==="keypress"?op(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?op(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sP=mo(aP),lP=Sr({},km,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gx=mo(lP),uP=Sr({},Uf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nv}),cP=mo(uP),hP=Sr({},Wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),fP=mo(hP),dP=Sr({},km,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pP=mo(dP),mP=[9,13,27,32],Uv=fs&&"CompositionEvent"in window,af=null;fs&&"documentMode"in document&&(af=document.documentMode);var gP=fs&&"TextEvent"in window&&!af,lE=fs&&(!Uv||af&&8<af&&11>=af),Wx=String.fromCharCode(32),Zx=!1;function uE(e,t){switch(e){case"keyup":return mP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hc=!1;function yP(e,t){switch(e){case"compositionend":return cE(t);case"keypress":return t.which!==32?null:(Zx=!0,Wx);case"textInput":return e=t.data,e===Wx&&Zx?null:e;default:return null}}function vP(e,t){if(hc)return e==="compositionend"||!Uv&&uE(e,t)?(e=sE(),ip=jv=Hs=null,hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lE&&t.locale!=="ko"?null:t.data;default:return null}}var _P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_P[e.type]:t==="textarea"}function hE(e,t,r,l){G2(l),t=Ip(t,"onChange"),0<t.length&&(r=new Dv("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var sf=null,If=null;function xP(e){gE(e,0)}function Mm(e){var t=dc(e);if(B2(t))return e}function wP(e,t){if(e==="change")return t}var fE=!1;if(fs){var ey;if(fs){var ty="oninput"in document;if(!ty){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),ty=typeof Xx.oninput=="function"}ey=ty}else ey=!1;fE=ey&&(!document.documentMode||9<document.documentMode)}function Yx(){sf&&(sf.detachEvent("onpropertychange",dE),If=sf=null)}function dE(e){if(e.propertyName==="value"&&Mm(If)){var t=[];if(hE(t,If,e,Pv(e)),e=xP,eu)e(t);else{eu=!0;try{kv(e,t)}finally{eu=!1,zv()}}}}function bP(e,t,r){e==="focusin"?(Yx(),sf=t,If=r,sf.attachEvent("onpropertychange",dE)):e==="focusout"&&Yx()}function EP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mm(If)}function SP(e,t){if(e==="click")return Mm(t)}function TP(e,t){if(e==="input"||e==="change")return Mm(t)}function AP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mo=typeof Object.is=="function"?Object.is:AP,IP=Object.prototype.hasOwnProperty;function Cf(e,t){if(Mo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++)if(!IP.call(t,r[l])||!Mo(e[r[l]],t[r[l]]))return!1;return!0}function Kx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qx(e,t){var r=Kx(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kx(r)}}function pE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jx(){for(var e=window,t=Ep();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ep(e.document)}return t}function Yy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var CP=fs&&"documentMode"in document&&11>=document.documentMode,fc=null,Ky=null,lf=null,qy=!1;function Qx(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qy||fc==null||fc!==Ep(l)||(l=fc,"selectionStart"in l&&Yy(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),lf&&Cf(lf,l)||(lf=l,l=Ip(Ky,"onSelect"),0<l.length&&(t=new Dv("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=fc)))}Rv("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Rv("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Rv(FC,2);for(var ew="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ny=0;ny<ew.length;ny++)Lv.set(ew[ny],0);Lc("onMouseEnter",["mouseout","mouseover"]);Lc("onMouseLeave",["mouseout","mouseover"]);Lc("onPointerEnter",["pointerout","pointerover"]);Lc("onPointerLeave",["pointerout","pointerover"]);du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));du("onBeforeInput",["compositionend","keypress","textInput","paste"]);du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gh));function tw(e,t,r){var l=e.type||"unknown-event";e.currentTarget=r,MC(l,t,void 0,e),e.currentTarget=null}function gE(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],c=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var y=l.length-1;0<=y;y--){var s=l[y],w=s.instance,E=s.currentTarget;if(s=s.listener,w!==d&&c.isPropagationStopped())break e;tw(c,s,E),d=w}else for(y=0;y<l.length;y++){if(s=l[y],w=s.instance,E=s.currentTarget,s=s.listener,w!==d&&c.isPropagationStopped())break e;tw(c,s,E),d=w}}}if(Tp)throw e=Zy,Tp=!1,Zy=null,e}function xr(e,t){var r=wE(t),l=e+"__bubble";r.has(l)||(vE(t,e,2,!1),r.add(l))}var nw="_reactListening"+Math.random().toString(36).slice(2);function yE(e){e[nw]||(e[nw]=!0,L2.forEach(function(t){mE.has(t)||rw(t,!1,e,null),rw(t,!0,e,null)}))}function rw(e,t,r,l){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=r;if(e==="selectionchange"&&r.nodeType!==9&&(d=r.ownerDocument),l!==null&&!t&&mE.has(e)){if(e!=="scroll")return;c|=2,d=l}var y=wE(d),s=e+"__"+(t?"capture":"bubble");y.has(s)||(t&&(c|=4),vE(d,e,c,t),y.add(s))}function vE(e,t,r,l){var c=Lv.get(t);switch(c===void 0?2:c){case 0:c=WC;break;case 1:c=ZC;break;default:c=Fv}r=c.bind(null,t,r,e),c=void 0,!Wy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function _E(e,t,r,l,c){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var s=l.stateNode.containerInfo;if(s===c||s.nodeType===8&&s.parentNode===c)break;if(y===4)for(y=l.return;y!==null;){var w=y.tag;if((w===3||w===4)&&(w=y.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;y=y.return}for(;s!==null;){if(y=tu(s),y===null)return;if(w=y.tag,w===5||w===6){l=d=y;continue e}s=s.parentNode}}l=l.return}IC(function(){var E=d,C=Pv(r),S=[];e:{var P=oE.get(e);if(P!==void 0){var N=Dv,ee=e;switch(e){case"keypress":if(op(r)===0)break e;case"keydown":case"keyup":N=sP;break;case"focusin":ee="focus",N=Qg;break;case"focusout":ee="blur",N=Qg;break;case"beforeblur":case"afterblur":N=Qg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=$x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=YC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=cP;break;case tE:case nE:case rE:N=JC;break;case iE:N=fP;break;case"scroll":N=HC;break;case"wheel":N=pP;break;case"copy":case"cut":case"paste":N=eP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Gx}var Y=(t&4)!==0,W=!Y&&e==="scroll",$=Y?P!==null?P+"Capture":null:P;Y=[];for(var G=E,V;G!==null;){V=G;var re=V.stateNode;if(V.tag===5&&re!==null&&(V=re,$!==null&&(re=Ef(G,$),re!=null&&Y.push(Pf(G,re,V)))),W)break;G=G.return}0<Y.length&&(P=new N(P,ee,null,r,C),S.push({event:P,listeners:Y}))}}if((t&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",P&&(t&16)===0&&(ee=r.relatedTarget||r.fromElement)&&(tu(ee)||ee[Zc]))break e;if((N||P)&&(P=C.window===C?C:(P=C.ownerDocument)?P.defaultView||P.parentWindow:window,N?(ee=r.relatedTarget||r.toElement,N=E,ee=ee?tu(ee):null,ee!==null&&(W=mu(ee),ee!==W||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(N=null,ee=E),N!==ee)){if(Y=$x,re="onMouseLeave",$="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(Y=Gx,re="onPointerLeave",$="onPointerEnter",G="pointer"),W=N==null?P:dc(N),V=ee==null?P:dc(ee),P=new Y(re,G+"leave",N,r,C),P.target=W,P.relatedTarget=V,re=null,tu(C)===E&&(Y=new Y($,G+"enter",ee,r,C),Y.target=V,Y.relatedTarget=W,re=Y),W=re,N&&ee)t:{for(Y=N,$=ee,G=0,V=Y;V;V=ec(V))G++;for(V=0,re=$;re;re=ec(re))V++;for(;0<G-V;)Y=ec(Y),G--;for(;0<V-G;)$=ec($),V--;for(;G--;){if(Y===$||$!==null&&Y===$.alternate)break t;Y=ec(Y),$=ec($)}Y=null}else Y=null;N!==null&&iw(S,P,N,Y,!1),ee!==null&&W!==null&&iw(S,W,ee,Y,!0)}}e:{if(P=E?dc(E):window,N=P.nodeName&&P.nodeName.toLowerCase(),N==="select"||N==="input"&&P.type==="file")var H=wP;else if(Hx(P))if(fE)H=TP;else{H=EP;var F=bP}else(N=P.nodeName)&&N.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(H=SP);if(H&&(H=H(e,E))){hE(S,H,r,C);break e}F&&F(e,P,E),e==="focusout"&&(F=P._wrapperState)&&F.controlled&&P.type==="number"&&By(P,"number",P.value)}switch(F=E?dc(E):window,e){case"focusin":(Hx(F)||F.contentEditable==="true")&&(fc=F,Ky=E,lf=null);break;case"focusout":lf=Ky=fc=null;break;case"mousedown":qy=!0;break;case"contextmenu":case"mouseup":case"dragend":qy=!1,Qx(S,r,C);break;case"selectionchange":if(CP)break;case"keydown":case"keyup":Qx(S,r,C)}var b;if(Uv)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else hc?uE(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(lE&&r.locale!=="ko"&&(hc||M!=="onCompositionStart"?M==="onCompositionEnd"&&hc&&(b=sE()):(Hs=C,jv="value"in Hs?Hs.value:Hs.textContent,hc=!0)),F=Ip(E,M),0<F.length&&(M=new Vx(M,e,null,r,C),S.push({event:M,listeners:F}),b?M.data=b:(b=cE(r),b!==null&&(M.data=b)))),(b=gP?yP(e,r):vP(e,r))&&(E=Ip(E,"onBeforeInput"),0<E.length&&(C=new Vx("onBeforeInput","beforeinput",null,r,C),S.push({event:C,listeners:E}),C.data=b))}gE(S,t)})}function Pf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ip(e,t){for(var r=t+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Ef(e,r),d!=null&&l.unshift(Pf(e,d,c)),d=Ef(e,t),d!=null&&l.push(Pf(e,d,c))),e=e.return}return l}function ec(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function iw(e,t,r,l,c){for(var d=t._reactName,y=[];r!==null&&r!==l;){var s=r,w=s.alternate,E=s.stateNode;if(w!==null&&w===l)break;s.tag===5&&E!==null&&(s=E,c?(w=Ef(r,d),w!=null&&y.unshift(Pf(r,w,s))):c||(w=Ef(r,d),w!=null&&y.push(Pf(r,w,s)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}function Cp(){}var ry=null,iy=null;function xE(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Jy(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ow=typeof setTimeout=="function"?setTimeout:void 0,PP=typeof clearTimeout=="function"?clearTimeout:void 0;function $v(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Tc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function aw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var oy=0;function kP(e){return{$$typeof:Iv,toString:e,valueOf:e}}var zm=Math.random().toString(36).slice(2),Xs="__reactFiber$"+zm,Pp="__reactProps$"+zm,Zc="__reactContainer$"+zm,sw="__reactEvents$"+zm;function tu(e){var t=e[Xs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zc]||r[Xs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=aw(e);e!==null;){if(r=e[Xs])return r;e=aw(e)}return t}e=r,r=e.parentNode}return null}function $f(e){return e=e[Xs]||e[Zc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ct(33))}function Om(e){return e[Pp]||null}function wE(e){var t=e[sw];return t===void 0&&(t=e[sw]=new Set),t}var Qy=[],pc=-1;function dl(e){return{current:e}}function wr(e){0>pc||(e.current=Qy[pc],Qy[pc]=null,pc--)}function Fr(e,t){pc++,Qy[pc]=e.current,e.current=t}var sl={},Ii=dl(sl),to=dl(!1),au=sl;function Rc(e,t){var r=e.type.contextTypes;if(!r)return sl;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=t[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function no(e){return e=e.childContextTypes,e!=null}function kp(){wr(to),wr(Ii)}function lw(e,t,r){if(Ii.current!==sl)throw Error(Ct(168));Fr(Ii,t),Fr(to,r)}function bE(e,t,r){var l=e.stateNode;if(e=t.childContextTypes,typeof l.getChildContext!="function")return r;l=l.getChildContext();for(var c in l)if(!(c in e))throw Error(Ct(108,wc(t)||"Unknown",c));return Sr({},r,l)}function ap(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sl,au=Ii.current,Fr(Ii,e),Fr(to,to.current),!0}function uw(e,t,r){var l=e.stateNode;if(!l)throw Error(Ct(169));r?(e=bE(e,t,au),l.__reactInternalMemoizedMergedChildContext=e,wr(to),wr(Ii),Fr(Ii,e)):wr(to),Fr(to,r)}var Vv=null,ou=null,MP=ni.unstable_runWithPriority,Gv=ni.unstable_scheduleCallback,e0=ni.unstable_cancelCallback,zP=ni.unstable_shouldYield,cw=ni.unstable_requestPaint,t0=ni.unstable_now,OP=ni.unstable_getCurrentPriorityLevel,Lm=ni.unstable_ImmediatePriority,EE=ni.unstable_UserBlockingPriority,SE=ni.unstable_NormalPriority,TE=ni.unstable_LowPriority,AE=ni.unstable_IdlePriority,ay={},LP=cw!==void 0?cw:function(){},as=null,sp=null,sy=!1,hw=t0(),Si=1e4>hw?t0:function(){return t0()-hw};function Fc(){switch(OP()){case Lm:return 99;case EE:return 98;case SE:return 97;case TE:return 96;case AE:return 95;default:throw Error(Ct(332))}}function IE(e){switch(e){case 99:return Lm;case 98:return EE;case 97:return SE;case 96:return TE;case 95:return AE;default:throw Error(Ct(332))}}function su(e,t){return e=IE(e),MP(e,t)}function kf(e,t,r){return e=IE(e),Gv(e,t,r)}function Ra(){if(sp!==null){var e=sp;sp=null,e0(e)}CE()}function CE(){if(!sy&&as!==null){sy=!0;var e=0;try{var t=as;su(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),as=null}catch(r){throw as!==null&&(as=as.slice(e+1)),Gv(Lm,Ra),r}finally{sy=!1}}}var RP=pu.ReactCurrentBatchConfig;function ra(e,t){if(e&&e.defaultProps){t=Sr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Mp=dl(null),zp=null,mc=null,Op=null;function Wv(){Op=mc=zp=null}function Zv(e){var t=Mp.current;wr(Mp),e.type._context._currentValue=t}function PE(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Ac(e,t){zp=e,Op=mc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(aa=!0),e.firstContext=null)}function Fo(e,t){if(Op!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Op=e,t=1073741823),t={context:e,observedBits:t,next:null},mc===null){if(zp===null)throw Error(Ct(308));mc=t,zp.dependencies={lanes:0,firstContext:t,responders:null}}else mc=mc.next=t;return e._currentValue}var $s=!1;function Hv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function kE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tl(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function fw(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=y:d=d.next=y,r=r.next}while(r!==null);d===null?c=d=t:d=d.next=t}else c=d=t;r={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mf(e,t,r,l){var c=e.updateQueue;$s=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,s=c.shared.pending;if(s!==null){c.shared.pending=null;var w=s,E=w.next;w.next=null,y===null?d=E:y.next=E,y=w;var C=e.alternate;if(C!==null){C=C.updateQueue;var S=C.lastBaseUpdate;S!==y&&(S===null?C.firstBaseUpdate=E:S.next=E,C.lastBaseUpdate=w)}}if(d!==null){S=c.baseState,y=0,C=E=w=null;do{s=d.lane;var P=d.eventTime;if((l&s)===s){C!==null&&(C=C.next={eventTime:P,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var N=e,ee=d;switch(s=t,P=r,ee.tag){case 1:if(N=ee.payload,typeof N=="function"){S=N.call(P,S,s);break e}S=N;break e;case 3:N.flags=N.flags&-4097|64;case 0:if(N=ee.payload,s=typeof N=="function"?N.call(P,S,s):N,s==null)break e;S=Sr({},S,s);break e;case 2:$s=!0}}d.callback!==null&&(e.flags|=32,s=c.effects,s===null?c.effects=[d]:s.push(d))}else P={eventTime:P,lane:s,tag:d.tag,payload:d.payload,callback:d.callback,next:null},C===null?(E=C=P,w=S):C=C.next=P,y|=s;if(d=d.next,d===null){if(s=c.shared.pending,s===null)break;d=s.next,s.next=null,c.lastBaseUpdate=s,c.shared.pending=null}}while(1);C===null&&(w=S),c.baseState=w,c.firstBaseUpdate=E,c.lastBaseUpdate=C,Gf|=y,e.lanes=y,e.memoizedState=S}}function dw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(c!==null){if(l.callback=null,l=r,typeof c!="function")throw Error(Ct(191,c));c.call(l)}}}var ME=new Tm.Component().refs;function Lp(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:Sr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Rm={isMounted:function(e){return(e=e._reactInternals)?mu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var l=po(),c=nl(e),d=el(l,c);d.payload=t,r!=null&&(d.callback=r),tl(e,d),rl(e,c,l)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=po(),c=nl(e),d=el(l,c);d.tag=1,d.payload=t,r!=null&&(d.callback=r),tl(e,d),rl(e,c,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=po(),l=nl(e),c=el(r,l);c.tag=2,t!=null&&(c.callback=t),tl(e,c),rl(e,l,r)}};function pw(e,t,r,l,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):t.prototype&&t.prototype.isPureReactComponent?!Cf(r,l)||!Cf(c,d):!0}function zE(e,t,r){var l=!1,c=sl,d=t.contextType;return typeof d=="object"&&d!==null?d=Fo(d):(c=no(t)?au:Ii.current,l=t.contextTypes,d=(l=l!=null)?Rc(e,c):sl),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rm,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function mw(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&Rm.enqueueReplaceState(t,t.state,null)}function n0(e,t,r,l){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=ME,Hv(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=Fo(d):(d=no(t)?au:Ii.current,c.context=Rc(e,d)),Mf(e,r,c,l),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Lp(e,t,d,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Rm.enqueueReplaceState(c,c.state,null),Mf(e,r,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var Fd=Array.isArray;function Rh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ct(309));var l=r.stateNode}if(!l)throw Error(Ct(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var y=l.refs;y===ME&&(y=l.refs={}),d===null?delete y[c]:y[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ct(284));if(!r._owner)throw Error(Ct(290,e))}return e}function Bd(e,t){if(e.type!=="textarea")throw Error(Ct(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function OE(e){function t(W,$){if(e){var G=W.lastEffect;G!==null?(G.nextEffect=$,W.lastEffect=$):W.firstEffect=W.lastEffect=$,$.nextEffect=null,$.flags=8}}function r(W,$){if(!e)return null;for(;$!==null;)t(W,$),$=$.sibling;return null}function l(W,$){for(W=new Map;$!==null;)$.key!==null?W.set($.key,$):W.set($.index,$),$=$.sibling;return W}function c(W,$){return W=ul(W,$),W.index=0,W.sibling=null,W}function d(W,$,G){return W.index=G,e?(G=W.alternate,G!==null?(G=G.index,G<$?(W.flags=2,$):G):(W.flags=2,$)):$}function y(W){return e&&W.alternate===null&&(W.flags=2),W}function s(W,$,G,V){return $===null||$.tag!==6?($=fy(G,W.mode,V),$.return=W,$):($=c($,G),$.return=W,$)}function w(W,$,G,V){return $!==null&&$.elementType===G.type?(V=c($,G.props),V.ref=Rh(W,$,G),V.return=W,V):(V=hp(G.type,G.key,G.props,null,W.mode,V),V.ref=Rh(W,$,G),V.return=W,V)}function E(W,$,G,V){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=dy(G,W.mode,V),$.return=W,$):($=c($,G.children||[]),$.return=W,$)}function C(W,$,G,V,re){return $===null||$.tag!==7?($=kc(G,W.mode,V,re),$.return=W,$):($=c($,G),$.return=W,$)}function S(W,$,G){if(typeof $=="string"||typeof $=="number")return $=fy(""+$,W.mode,G),$.return=W,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case $h:return G=hp($.type,$.key,$.props,null,W.mode,G),G.ref=Rh(W,null,$),G.return=W,G;case Ql:return $=dy($,W.mode,G),$.return=W,$}if(Fd($)||Ph($))return $=kc($,W.mode,G,null),$.return=W,$;Bd(W,$)}return null}function P(W,$,G,V){var re=$!==null?$.key:null;if(typeof G=="string"||typeof G=="number")return re!==null?null:s(W,$,""+G,V);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case $h:return G.key===re?G.type===Ws?C(W,$,G.props.children,V,re):w(W,$,G,V):null;case Ql:return G.key===re?E(W,$,G,V):null}if(Fd(G)||Ph(G))return re!==null?null:C(W,$,G,V,null);Bd(W,G)}return null}function N(W,$,G,V,re){if(typeof V=="string"||typeof V=="number")return W=W.get(G)||null,s($,W,""+V,re);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case $h:return W=W.get(V.key===null?G:V.key)||null,V.type===Ws?C($,W,V.props.children,re,V.key):w($,W,V,re);case Ql:return W=W.get(V.key===null?G:V.key)||null,E($,W,V,re)}if(Fd(V)||Ph(V))return W=W.get(G)||null,C($,W,V,re,null);Bd($,V)}return null}function ee(W,$,G,V){for(var re=null,H=null,F=$,b=$=0,M=null;F!==null&&b<G.length;b++){F.index>b?(M=F,F=null):M=F.sibling;var D=P(W,F,G[b],V);if(D===null){F===null&&(F=M);break}e&&F&&D.alternate===null&&t(W,F),$=d(D,$,b),H===null?re=D:H.sibling=D,H=D,F=M}if(b===G.length)return r(W,F),re;if(F===null){for(;b<G.length;b++)F=S(W,G[b],V),F!==null&&($=d(F,$,b),H===null?re=F:H.sibling=F,H=F);return re}for(F=l(W,F);b<G.length;b++)M=N(F,W,b,G[b],V),M!==null&&(e&&M.alternate!==null&&F.delete(M.key===null?b:M.key),$=d(M,$,b),H===null?re=M:H.sibling=M,H=M);return e&&F.forEach(function(q){return t(W,q)}),re}function Y(W,$,G,V){var re=Ph(G);if(typeof re!="function")throw Error(Ct(150));if(G=re.call(G),G==null)throw Error(Ct(151));for(var H=re=null,F=$,b=$=0,M=null,D=G.next();F!==null&&!D.done;b++,D=G.next()){F.index>b?(M=F,F=null):M=F.sibling;var q=P(W,F,D.value,V);if(q===null){F===null&&(F=M);break}e&&F&&q.alternate===null&&t(W,F),$=d(q,$,b),H===null?re=q:H.sibling=q,H=q,F=M}if(D.done)return r(W,F),re;if(F===null){for(;!D.done;b++,D=G.next())D=S(W,D.value,V),D!==null&&($=d(D,$,b),H===null?re=D:H.sibling=D,H=D);return re}for(F=l(W,F);!D.done;b++,D=G.next())D=N(F,W,b,D.value,V),D!==null&&(e&&D.alternate!==null&&F.delete(D.key===null?b:D.key),$=d(D,$,b),H===null?re=D:H.sibling=D,H=D);return e&&F.forEach(function(K){return t(W,K)}),re}return function(W,$,G,V){var re=typeof G=="object"&&G!==null&&G.type===Ws&&G.key===null;re&&(G=G.props.children);var H=typeof G=="object"&&G!==null;if(H)switch(G.$$typeof){case $h:e:{for(H=G.key,re=$;re!==null;){if(re.key===H){switch(re.tag){case 7:if(G.type===Ws){r(W,re.sibling),$=c(re,G.props.children),$.return=W,W=$;break e}break;default:if(re.elementType===G.type){r(W,re.sibling),$=c(re,G.props),$.ref=Rh(W,re,G),$.return=W,W=$;break e}}r(W,re);break}else t(W,re);re=re.sibling}G.type===Ws?($=kc(G.props.children,W.mode,V,G.key),$.return=W,W=$):(V=hp(G.type,G.key,G.props,null,W.mode,V),V.ref=Rh(W,$,G),V.return=W,W=V)}return y(W);case Ql:e:{for(re=G.key;$!==null;){if($.key===re)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){r(W,$.sibling),$=c($,G.children||[]),$.return=W,W=$;break e}else{r(W,$);break}else t(W,$);$=$.sibling}$=dy(G,W.mode,V),$.return=W,W=$}return y(W)}if(typeof G=="string"||typeof G=="number")return G=""+G,$!==null&&$.tag===6?(r(W,$.sibling),$=c($,G),$.return=W,W=$):(r(W,$),$=fy(G,W.mode,V),$.return=W,W=$),y(W);if(Fd(G))return ee(W,$,G,V);if(Ph(G))return Y(W,$,G,V);if(H&&Bd(W,G),typeof G=="undefined"&&!re)switch(W.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ct(152,wc(W.type)||"Component"))}return r(W,$)}}var Rp=OE(!0),LE=OE(!1),Vf={},za=dl(Vf),zf=dl(Vf),Of=dl(Vf);function nu(e){if(e===Vf)throw Error(Ct(174));return e}function r0(e,t){switch(Fr(Of,t),Fr(zf,e),Fr(za,Vf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uy(t,e)}wr(za),Fr(za,t)}function Bc(){wr(za),wr(zf),wr(Of)}function gw(e){nu(Of.current);var t=nu(za.current),r=Uy(t,e.type);t!==r&&(Fr(zf,e),Fr(za,r))}function Xv(e){zf.current===e&&(wr(za),wr(zf))}var Rr=dl(0);function Fp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=null,Ys=null,Oa=!1;function RE(e,t){var r=zo(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function yw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function i0(e){if(Oa){var t=Ys;if(t){var r=t;if(!yw(e,t)){if(t=Tc(r.nextSibling),!t||!yw(e,t)){e.flags=e.flags&-1025|2,Oa=!1,us=e;return}RE(us,r)}us=e,Ys=Tc(t.firstChild)}else e.flags=e.flags&-1025|2,Oa=!1,us=e}}function vw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;us=e}function jd(e){if(e!==us)return!1;if(!Oa)return vw(e),Oa=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Jy(t,e.memoizedProps))for(t=Ys;t;)RE(e,t),t=Tc(t.nextSibling);if(vw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ys=Tc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ys=null}}else Ys=us?Tc(e.stateNode.nextSibling):null;return!0}function ly(){Ys=us=null,Oa=!1}var Ic=[];function Yv(){for(var e=0;e<Ic.length;e++)Ic[e]._workInProgressVersionPrimary=null;Ic.length=0}var uf=pu.ReactCurrentDispatcher,Ro=pu.ReactCurrentBatchConfig,Lf=0,Gr=null,Ei=null,hi=null,Bp=!1,cf=!1;function Ji(){throw Error(Ct(321))}function Kv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Mo(e[r],t[r]))return!1;return!0}function qv(e,t,r,l,c,d){if(Lf=d,Gr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uf.current=e===null||e.memoizedState===null?BP:jP,e=r(l,c),cf){d=0;do{if(cf=!1,!(25>d))throw Error(Ct(301));d+=1,hi=Ei=null,t.updateQueue=null,uf.current=DP,e=r(l,c)}while(cf)}if(uf.current=Up,t=Ei!==null&&Ei.next!==null,Lf=0,hi=Ei=Gr=null,Bp=!1,t)throw Error(Ct(300));return e}function ru(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Gr.memoizedState=hi=e:hi=hi.next=e,hi}function gu(){if(Ei===null){var e=Gr.alternate;e=e!==null?e.memoizedState:null}else e=Ei.next;var t=hi===null?Gr.memoizedState:hi.next;if(t!==null)hi=t,Ei=e;else{if(e===null)throw Error(Ct(310));Ei=e,e={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},hi===null?Gr.memoizedState=hi=e:hi=hi.next=e}return hi}function Pa(e,t){return typeof t=="function"?t(e):t}function Fh(e){var t=gu(),r=t.queue;if(r===null)throw Error(Ct(311));r.lastRenderedReducer=e;var l=Ei,c=l.baseQueue,d=r.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}l.baseQueue=c=d,r.pending=null}if(c!==null){c=c.next,l=l.baseState;var s=y=d=null,w=c;do{var E=w.lane;if((Lf&E)===E)s!==null&&(s=s.next={lane:0,action:w.action,eagerReducer:w.eagerReducer,eagerState:w.eagerState,next:null}),l=w.eagerReducer===e?w.eagerState:e(l,w.action);else{var C={lane:E,action:w.action,eagerReducer:w.eagerReducer,eagerState:w.eagerState,next:null};s===null?(y=s=C,d=l):s=s.next=C,Gr.lanes|=E,Gf|=E}w=w.next}while(w!==null&&w!==c);s===null?d=l:s.next=y,Mo(l,t.memoizedState)||(aa=!0),t.memoizedState=l,t.baseState=d,t.baseQueue=s,r.lastRenderedState=l}return[t.memoizedState,r.dispatch]}function Bh(e){var t=gu(),r=t.queue;if(r===null)throw Error(Ct(311));r.lastRenderedReducer=e;var l=r.dispatch,c=r.pending,d=t.memoizedState;if(c!==null){r.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);Mo(d,t.memoizedState)||(aa=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,l]}function _w(e,t,r){var l=t._getVersion;l=l(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===l:(e=e.mutableReadLanes,(e=(Lf&e)===e)&&(t._workInProgressVersionPrimary=l,Ic.push(t))),e)return r(t._source);throw Ic.push(t),Error(Ct(350))}function FE(e,t,r,l){var c=Gi;if(c===null)throw Error(Ct(349));var d=t._getVersion,y=d(t._source),s=uf.current,w=s.useState(function(){return _w(c,t,r)}),E=w[1],C=w[0];w=hi;var S=e.memoizedState,P=S.refs,N=P.getSnapshot,ee=S.source;S=S.subscribe;var Y=Gr;return e.memoizedState={refs:P,source:t,subscribe:l},s.useEffect(function(){P.getSnapshot=r,P.setSnapshot=E;var W=d(t._source);if(!Mo(y,W)){W=r(t._source),Mo(C,W)||(E(W),W=nl(Y),c.mutableReadLanes|=W&c.pendingLanes),W=c.mutableReadLanes,c.entangledLanes|=W;for(var $=c.entanglements,G=W;0<G;){var V=31-al(G),re=1<<V;$[V]|=W,G&=~re}}},[r,t,l]),s.useEffect(function(){return l(t._source,function(){var W=P.getSnapshot,$=P.setSnapshot;try{$(W(t._source));var G=nl(Y);c.mutableReadLanes|=G&c.pendingLanes}catch(V){$(function(){throw V})}})},[t,l]),Mo(N,r)&&Mo(ee,t)&&Mo(S,l)||(e={pending:null,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:C},e.dispatch=E=e1.bind(null,Gr,e),w.queue=e,w.baseQueue=null,C=_w(c,t,r),w.memoizedState=w.baseState=C),C}function BE(e,t,r){var l=gu();return FE(l,e,t,r)}function jh(e){var t=ru();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},e=e.dispatch=e1.bind(null,Gr,e),[t.memoizedState,e]}function jp(e,t,r,l){return e={tag:e,create:t,destroy:r,deps:l,next:null},t=Gr.updateQueue,t===null?(t={lastEffect:null},Gr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e)),e}function xw(e){var t=ru();return e={current:e},t.memoizedState=e}function Dp(){return gu().memoizedState}function o0(e,t,r,l){var c=ru();Gr.flags|=e,c.memoizedState=jp(1|t,r,void 0,l===void 0?null:l)}function Jv(e,t,r,l){var c=gu();l=l===void 0?null:l;var d=void 0;if(Ei!==null){var y=Ei.memoizedState;if(d=y.destroy,l!==null&&Kv(l,y.deps)){jp(t,r,d,l);return}}Gr.flags|=e,c.memoizedState=jp(1|t,r,d,l)}function ww(e,t){return o0(516,4,e,t)}function Np(e,t){return Jv(516,4,e,t)}function jE(e,t){return Jv(4,2,e,t)}function DE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NE(e,t,r){return r=r!=null?r.concat([e]):null,Jv(4,2,DE.bind(null,t,e),r)}function Qv(){}function UE(e,t){var r=gu();t=t===void 0?null:t;var l=r.memoizedState;return l!==null&&t!==null&&Kv(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function $E(e,t){var r=gu();t=t===void 0?null:t;var l=r.memoizedState;return l!==null&&t!==null&&Kv(t,l[1])?l[0]:(e=e(),r.memoizedState=[e,t],e)}function FP(e,t){var r=Fc();su(98>r?98:r,function(){e(!0)}),su(97<r?97:r,function(){var l=Ro.transition;Ro.transition=1;try{e(!1),t()}finally{Ro.transition=l}})}function e1(e,t,r){var l=po(),c=nl(e),d={lane:c,action:r,eagerReducer:null,eagerState:null,next:null},y=t.pending;if(y===null?d.next=d:(d.next=y.next,y.next=d),t.pending=d,y=e.alternate,e===Gr||y!==null&&y===Gr)cf=Bp=!0;else{if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var s=t.lastRenderedState,w=y(s,r);if(d.eagerReducer=y,d.eagerState=w,Mo(w,s))return}catch{}finally{}rl(e,c,l)}}var Up={readContext:Fo,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useMutableSource:Ji,useOpaqueIdentifier:Ji,unstable_isNewReconciler:!1},BP={readContext:Fo,useCallback:function(e,t){return ru().memoizedState=[e,t===void 0?null:t],e},useContext:Fo,useEffect:ww,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,o0(4,2,DE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return o0(4,2,e,t)},useMemo:function(e,t){var r=ru();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var l=ru();return t=r!==void 0?r(t):t,l.memoizedState=l.baseState=t,e=l.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=e1.bind(null,Gr,e),[l.memoizedState,e]},useRef:xw,useState:jh,useDebugValue:Qv,useDeferredValue:function(e){var t=jh(e),r=t[0],l=t[1];return ww(function(){var c=Ro.transition;Ro.transition=1;try{l(e)}finally{Ro.transition=c}},[e]),r},useTransition:function(){var e=jh(!1),t=e[0];return e=FP.bind(null,e[1]),xw(e),[e,t]},useMutableSource:function(e,t,r){var l=ru();return l.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},FE(l,e,t,r)},useOpaqueIdentifier:function(){if(Oa){var e=!1,t=kP(function(){throw e||(e=!0,r("r:"+(oy++).toString(36))),Error(Ct(355))}),r=jh(t)[1];return(Gr.mode&2)===0&&(Gr.flags|=516,jp(5,function(){r("r:"+(oy++).toString(36))},void 0,null)),t}return t="r:"+(oy++).toString(36),jh(t),t},unstable_isNewReconciler:!1},jP={readContext:Fo,useCallback:UE,useContext:Fo,useEffect:Np,useImperativeHandle:NE,useLayoutEffect:jE,useMemo:$E,useReducer:Fh,useRef:Dp,useState:function(){return Fh(Pa)},useDebugValue:Qv,useDeferredValue:function(e){var t=Fh(Pa),r=t[0],l=t[1];return Np(function(){var c=Ro.transition;Ro.transition=1;try{l(e)}finally{Ro.transition=c}},[e]),r},useTransition:function(){var e=Fh(Pa)[0];return[Dp().current,e]},useMutableSource:BE,useOpaqueIdentifier:function(){return Fh(Pa)[0]},unstable_isNewReconciler:!1},DP={readContext:Fo,useCallback:UE,useContext:Fo,useEffect:Np,useImperativeHandle:NE,useLayoutEffect:jE,useMemo:$E,useReducer:Bh,useRef:Dp,useState:function(){return Bh(Pa)},useDebugValue:Qv,useDeferredValue:function(e){var t=Bh(Pa),r=t[0],l=t[1];return Np(function(){var c=Ro.transition;Ro.transition=1;try{l(e)}finally{Ro.transition=c}},[e]),r},useTransition:function(){var e=Bh(Pa)[0];return[Dp().current,e]},useMutableSource:BE,useOpaqueIdentifier:function(){return Bh(Pa)[0]},unstable_isNewReconciler:!1},NP=pu.ReactCurrentOwner,aa=!1;function Qi(e,t,r,l){t.child=e===null?LE(t,null,r,l):Rp(t,e.child,r,l)}function bw(e,t,r,l,c){r=r.render;var d=t.ref;return Ac(t,c),l=qv(e,t,r,l,d,c),e!==null&&!aa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,cs(e,t,c)):(t.flags|=1,Qi(e,t,l,c),t.child)}function Ew(e,t,r,l,c,d){if(e===null){var y=r.type;return typeof y=="function"&&!a1(y)&&y.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=y,VE(e,t,y,l,c,d)):(e=hp(r.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}return y=e.child,(c&d)===0&&(c=y.memoizedProps,r=r.compare,r=r!==null?r:Cf,r(c,l)&&e.ref===t.ref)?cs(e,t,d):(t.flags|=1,e=ul(y,l),e.ref=t.ref,e.return=t,t.child=e)}function VE(e,t,r,l,c,d){if(e!==null&&Cf(e.memoizedProps,l)&&e.ref===t.ref)if(aa=!1,(d&c)!==0)(e.flags&16384)!==0&&(aa=!0);else return t.lanes=e.lanes,cs(e,t,d);return a0(e,t,r,l,d)}function uy(e,t,r){var l=t.pendingProps,c=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"||l.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},Nd(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},Nd(t,d!==null?d.baseLanes:r);else return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Nd(t,e),null;else d!==null?(l=d.baseLanes|r,t.memoizedState=null):l=r,Nd(t,l);return Qi(e,t,c,r),t.child}function GE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function a0(e,t,r,l,c){var d=no(r)?au:Ii.current;return d=Rc(t,d),Ac(t,c),r=qv(e,t,r,l,d,c),e!==null&&!aa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,cs(e,t,c)):(t.flags|=1,Qi(e,t,r,c),t.child)}function Sw(e,t,r,l,c){if(no(r)){var d=!0;ap(t)}else d=!1;if(Ac(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),zE(t,r,l),n0(t,r,l,c),l=!0;else if(e===null){var y=t.stateNode,s=t.memoizedProps;y.props=s;var w=y.context,E=r.contextType;typeof E=="object"&&E!==null?E=Fo(E):(E=no(r)?au:Ii.current,E=Rc(t,E));var C=r.getDerivedStateFromProps,S=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function";S||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(s!==l||w!==E)&&mw(t,y,l,E),$s=!1;var P=t.memoizedState;y.state=P,Mf(t,l,y,c),w=t.memoizedState,s!==l||P!==w||to.current||$s?(typeof C=="function"&&(Lp(t,r,C,l),w=t.memoizedState),(s=$s||pw(t,r,s,l,P,w,E))?(S||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4)):(typeof y.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=l,t.memoizedState=w),y.props=l,y.state=w,y.context=E,l=s):(typeof y.componentDidMount=="function"&&(t.flags|=4),l=!1)}else{y=t.stateNode,kE(e,t),s=t.memoizedProps,E=t.type===t.elementType?s:ra(t.type,s),y.props=E,S=t.pendingProps,P=y.context,w=r.contextType,typeof w=="object"&&w!==null?w=Fo(w):(w=no(r)?au:Ii.current,w=Rc(t,w));var N=r.getDerivedStateFromProps;(C=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(s!==S||P!==w)&&mw(t,y,l,w),$s=!1,P=t.memoizedState,y.state=P,Mf(t,l,y,c);var ee=t.memoizedState;s!==S||P!==ee||to.current||$s?(typeof N=="function"&&(Lp(t,r,N,l),ee=t.memoizedState),(E=$s||pw(t,r,E,l,P,ee,w))?(C||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,ee,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,ee,w)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof y.componentDidUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=256),t.memoizedProps=l,t.memoizedState=ee),y.props=l,y.state=ee,y.context=w,l=E):(typeof y.componentDidUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=256),l=!1)}return s0(e,t,r,l,d,c)}function s0(e,t,r,l,c,d){GE(e,t);var y=(t.flags&64)!==0;if(!l&&!y)return c&&uw(t,r,!1),cs(e,t,d);l=t.stateNode,NP.current=t;var s=y&&typeof r.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=Rp(t,e.child,null,d),t.child=Rp(t,null,s,d)):Qi(e,t,s,d),t.memoizedState=l.state,c&&uw(t,r,!0),t.child}function Tw(e){var t=e.stateNode;t.pendingContext?lw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lw(e,t.context,!1),r0(e,t.containerInfo)}var Dd={dehydrated:null,retryLane:0};function Aw(e,t,r){var l=t.pendingProps,c=Rr.current,d=!1,y;return(y=(t.flags&64)!==0)||(y=e!==null&&e.memoizedState===null?!1:(c&2)!==0),y?(d=!0,t.flags&=-65):e!==null&&e.memoizedState===null||l.fallback===void 0||l.unstable_avoidThisFallback===!0||(c|=1),Fr(Rr,c&1),e===null?(l.fallback!==void 0&&i0(t),e=l.children,c=l.fallback,d?(e=Iw(t,e,c,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Dd,e):typeof l.unstable_expectedLoadTime=="number"?(e=Iw(t,e,c,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Dd,t.lanes=33554432,e):(r=s1({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?d?(l=Pw(e,t,l.children,l.fallback,r),d=t.child,c=e.child.memoizedState,d.memoizedState=c===null?{baseLanes:r}:{baseLanes:c.baseLanes|r},d.childLanes=e.childLanes&~r,t.memoizedState=Dd,l):(r=Cw(e,t,l.children,r),t.memoizedState=null,r):d?(l=Pw(e,t,l.children,l.fallback,r),d=t.child,c=e.child.memoizedState,d.memoizedState=c===null?{baseLanes:r}:{baseLanes:c.baseLanes|r},d.childLanes=e.childLanes&~r,t.memoizedState=Dd,l):(r=Cw(e,t,l.children,r),t.memoizedState=null,r)}function Iw(e,t,r,l){var c=e.mode,d=e.child;return t={mode:"hidden",children:t},(c&2)===0&&d!==null?(d.childLanes=0,d.pendingProps=t):d=s1(t,c,0,null),r=kc(r,c,l,null),d.return=e,r.return=e,d.sibling=r,e.child=d,r}function Cw(e,t,r,l){var c=e.child;return e=c.sibling,r=ul(c,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=l),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Pw(e,t,r,l,c){var d=t.mode,y=e.child;e=y.sibling;var s={mode:"hidden",children:r};return(d&2)===0&&t.child!==y?(r=t.child,r.childLanes=0,r.pendingProps=s,y=r.lastEffect,y!==null?(t.firstEffect=r.firstEffect,t.lastEffect=y,y.nextEffect=null):t.firstEffect=t.lastEffect=null):r=ul(y,s),e!==null?l=ul(e,l):(l=kc(l,d,c,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,l}function kw(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),PE(e.return,t)}function cy(e,t,r,l,c,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:c,lastEffect:d}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=r,y.tailMode=c,y.lastEffect=d)}function Mw(e,t,r){var l=t.pendingProps,c=l.revealOrder,d=l.tail;if(Qi(e,t,l.children,r),l=Rr.current,(l&2)!==0)l=l&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kw(e,r);else if(e.tag===19)kw(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Fr(Rr,l),(t.mode&2)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&Fp(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),cy(t,!1,c,r,d,t.lastEffect);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Fp(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}cy(t,!0,r,null,d,t.lastEffect);break;case"together":cy(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Gf|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(Ct(153));if(t.child!==null){for(e=t.child,r=ul(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ul(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var WE,l0,ZE,HE;WE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};l0=function(){};ZE=function(e,t,r,l){var c=e.memoizedProps;if(c!==l){e=t.stateNode,nu(za.current);var d=null;switch(r){case"input":c=Ry(e,c),l=Ry(e,l),d=[];break;case"option":c=jy(e,c),l=jy(e,l),d=[];break;case"select":c=Sr({},c,{value:void 0}),l=Sr({},l,{value:void 0}),d=[];break;case"textarea":c=Dy(e,c),l=Dy(e,l),d=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Cp)}$y(r,l);var y;r=null;for(E in c)if(!l.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var s=c[E];for(y in s)s.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(wf.hasOwnProperty(E)?d||(d=[]):(d=d||[]).push(E,null));for(E in l){var w=l[E];if(s=c!=null?c[E]:void 0,l.hasOwnProperty(E)&&w!==s&&(w!=null||s!=null))if(E==="style")if(s){for(y in s)!s.hasOwnProperty(y)||w&&w.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in w)w.hasOwnProperty(y)&&s[y]!==w[y]&&(r||(r={}),r[y]=w[y])}else r||(d||(d=[]),d.push(E,r)),r=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,s=s?s.__html:void 0,w!=null&&s!==w&&(d=d||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(d=d||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(wf.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&xr("scroll",e),d||s===w||(d=[])):typeof w=="object"&&w!==null&&w.$$typeof===Iv?w.toString():(d=d||[]).push(E,w))}r&&(d=d||[]).push("style",r);var E=d;(t.updateQueue=E)&&(t.flags|=4)}};HE=function(e,t,r,l){r!==l&&(t.flags|=4)};function Dh(e,t){if(!Oa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function UP(e,t,r){var l=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return no(t.type)&&kp(),null;case 3:return Bc(),wr(to),wr(Ii),Yv(),l=t.stateNode,l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(jd(t)?t.flags|=4:l.hydrate||(t.flags|=256)),l0(t),null;case 5:Xv(t);var c=nu(Of.current);if(r=t.type,e!==null&&t.stateNode!=null)ZE(e,t,r,l,c),e.ref!==t.ref&&(t.flags|=128);else{if(!l){if(t.stateNode===null)throw Error(Ct(166));return null}if(e=nu(za.current),jd(t)){l=t.stateNode,r=t.type;var d=t.memoizedProps;switch(l[Xs]=t,l[Pp]=d,r){case"dialog":xr("cancel",l),xr("close",l);break;case"iframe":case"object":case"embed":xr("load",l);break;case"video":case"audio":for(e=0;e<Gh.length;e++)xr(Gh[e],l);break;case"source":xr("error",l);break;case"img":case"image":case"link":xr("error",l),xr("load",l);break;case"details":xr("toggle",l);break;case"input":Mx(l,d),xr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},xr("invalid",l);break;case"textarea":Ox(l,d),xr("invalid",l)}$y(r,d),e=null;for(var y in d)d.hasOwnProperty(y)&&(c=d[y],y==="children"?typeof c=="string"?l.textContent!==c&&(e=["children",c]):typeof c=="number"&&l.textContent!==""+c&&(e=["children",""+c]):wf.hasOwnProperty(y)&&c!=null&&y==="onScroll"&&xr("scroll",l));switch(r){case"input":zd(l),zx(l,d,!0);break;case"textarea":zd(l),Lx(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=Cp)}l=e,t.updateQueue=l,l!==null&&(t.flags|=4)}else{switch(y=c.nodeType===9?c:c.ownerDocument,e===Ny.html&&(e=N2(r)),e===Ny.html?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(r,{is:l.is}):(e=y.createElement(r),r==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,r),e[Xs]=t,e[Pp]=l,WE(e,t,!1,!1),t.stateNode=e,y=Vy(r,l),r){case"dialog":xr("cancel",e),xr("close",e),c=l;break;case"iframe":case"object":case"embed":xr("load",e),c=l;break;case"video":case"audio":for(c=0;c<Gh.length;c++)xr(Gh[c],e);c=l;break;case"source":xr("error",e),c=l;break;case"img":case"image":case"link":xr("error",e),xr("load",e),c=l;break;case"details":xr("toggle",e),c=l;break;case"input":Mx(e,l),c=Ry(e,l),xr("invalid",e);break;case"option":c=jy(e,l);break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=Sr({},l,{value:void 0}),xr("invalid",e);break;case"textarea":Ox(e,l),c=Dy(e,l),xr("invalid",e);break;default:c=l}$y(r,c);var s=c;for(d in s)if(s.hasOwnProperty(d)){var w=s[d];d==="style"?V2(e,w):d==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&U2(e,w)):d==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&bf(e,w):typeof w=="number"&&bf(e,""+w):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wf.hasOwnProperty(d)?w!=null&&d==="onScroll"&&xr("scroll",e):w!=null&&wv(e,d,w,y))}switch(r){case"input":zd(e),zx(e,l,!1);break;case"textarea":zd(e),Lx(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ol(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?bc(e,!!l.multiple,d,!1):l.defaultValue!=null&&bc(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Cp)}xE(r,l)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)HE(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Ct(166));r=nu(Of.current),nu(za.current),jd(t)?(l=t.stateNode,r=t.memoizedProps,l[Xs]=t,l.nodeValue!==r&&(t.flags|=4)):(l=(r.nodeType===9?r:r.ownerDocument).createTextNode(l),l[Xs]=t,t.stateNode=l)}return null;case 13:return wr(Rr),l=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(l=l!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&jd(t):r=e.memoizedState!==null,l&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Rr.current&1)!==0?fi===0&&(fi=3):((fi===0||fi===3)&&(fi=4),Gi===null||(Gf&134217727)===0&&(Xc&134217727)===0||Cc(Gi,Ti))),(l||r)&&(t.flags|=4),null);case 4:return Bc(),l0(t),e===null&&yE(t.stateNode.containerInfo),null;case 10:return Zv(t),null;case 17:return no(t.type)&&kp(),null;case 19:if(wr(Rr),l=t.memoizedState,l===null)return null;if(d=(t.flags&64)!==0,y=l.rendering,y===null)if(d)Dh(l,!1);else{if(fi!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(y=Fp(e),y!==null){for(t.flags|=64,Dh(l,!1),d=y.updateQueue,d!==null&&(t.updateQueue=d,t.flags|=4),l.lastEffect===null&&(t.firstEffect=null),t.lastEffect=l.lastEffect,l=r,r=t.child;r!==null;)d=r,e=l,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Fr(Rr,Rr.current&1|2),t.child}e=e.sibling}l.tail!==null&&Si()>p0&&(t.flags|=64,d=!0,Dh(l,!1),t.lanes=33554432)}else{if(!d)if(e=Fp(y),e!==null){if(t.flags|=64,d=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Dh(l,!0),l.tail===null&&l.tailMode==="hidden"&&!y.alternate&&!Oa)return t=t.lastEffect=l.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Si()-l.renderingStartTime>p0&&r!==1073741824&&(t.flags|=64,d=!0,Dh(l,!1),t.lanes=33554432);l.isBackwards?(y.sibling=t.child,t.child=y):(r=l.last,r!==null?r.sibling=y:t.child=y,l.last=y)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.lastEffect=t.lastEffect,l.renderingStartTime=Si(),r.sibling=null,t=Rr.current,Fr(Rr,d?t&1|2:t&1),r):null;case 23:case 24:return o1(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&l.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(Ct(156,t.tag))}function $P(e){switch(e.tag){case 1:no(e.type)&&kp();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Bc(),wr(to),wr(Ii),Yv(),t=e.flags,(t&64)!==0)throw Error(Ct(285));return e.flags=t&-4097|64,e;case 5:return Xv(e),null;case 13:return wr(Rr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return wr(Rr),null;case 4:return Bc(),null;case 10:return Zv(e),null;case 23:case 24:return o1(),null;default:return null}}function t1(e,t){try{var r="",l=t;do r+=bC(l),l=l.return;while(l);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c}}function u0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var VP=typeof WeakMap=="function"?WeakMap:Map;function XE(e,t,r){r=el(-1,r),r.tag=3,r.payload={element:null};var l=t.value;return r.callback=function(){Vp||(Vp=!0,m0=l),u0(e,t)},r}function YE(e,t,r){r=el(-1,r),r.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=t.value;r.payload=function(){return u0(e,t),l(c)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){typeof l!="function"&&(ka===null?ka=new Set([this]):ka.add(this),u0(e,t));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}var GP=typeof WeakSet=="function"?WeakSet:Set;function zw(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){il(e,r)}else t.current=null}function WP(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,l=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:ra(t.type,r),l),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&$v(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ct(163))}function ZP(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var l=e.create;e.destroy=l()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;l=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(iS(r,e),ek(r,e)),e=l}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(l=r.elementType===r.type?t.memoizedProps:ra(r.type,t.memoizedProps),e.componentDidUpdate(l,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&dw(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}dw(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&xE(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&Q2(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ct(163))}function Ow(e,t){for(var r=e;;){if(r.tag===5){var l=r.stateNode;if(t)l=l.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none";else{l=r.stateNode;var c=r.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$2("display",c)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Lw(e,t){if(ou&&typeof ou.onCommitFiberUnmount=="function")try{ou.onCommitFiberUnmount(Vv,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var l=r,c=l.destroy;if(l=l.tag,c!==void 0)if((l&4)!==0)iS(t,r);else{l=t;try{c()}catch(d){il(l,d)}}r=r.next}while(r!==e)}break;case 1:if(zw(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(d){il(t,d)}break;case 5:zw(t);break;case 4:KE(e,t)}}function Rw(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Fw(e){return e.tag===5||e.tag===3||e.tag===4}function Bw(e){e:{for(var t=e.return;t!==null;){if(Fw(t))break e;t=t.return}throw Error(Ct(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var l=!1;break;case 3:t=t.containerInfo,l=!0;break;case 4:t=t.containerInfo,l=!0;break;default:throw Error(Ct(161))}r.flags&16&&(bf(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Fw(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}l?c0(e,r,t):h0(e,r,t)}function c0(e,t,r){var l=e.tag,c=l===5||l===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Cp));else if(l!==4&&(e=e.child,e!==null))for(c0(e,t,r),e=e.sibling;e!==null;)c0(e,t,r),e=e.sibling}function h0(e,t,r){var l=e.tag,c=l===5||l===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(h0(e,t,r),e=e.sibling;e!==null;)h0(e,t,r),e=e.sibling}function KE(e,t){for(var r=t,l=!1,c,d;;){if(!l){l=r.return;e:for(;;){if(l===null)throw Error(Ct(160));switch(c=l.stateNode,l.tag){case 5:d=!1;break e;case 3:c=c.containerInfo,d=!0;break e;case 4:c=c.containerInfo,d=!0;break e}l=l.return}l=!0}if(r.tag===5||r.tag===6){e:for(var y=e,s=r,w=s;;)if(Lw(y,w),w.child!==null&&w.tag!==4)w.child.return=w,w=w.child;else{if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}d?(y=c,s=r.stateNode,y.nodeType===8?y.parentNode.removeChild(s):y.removeChild(s)):c.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){c=r.stateNode.containerInfo,d=!0,r.child.return=r,r=r.child;continue}}else if(Lw(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(l=!1)}r.sibling.return=r.return,r=r.sibling}}function hy(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do(l.tag&3)===3&&(e=l.destroy,l.destroy=void 0,e!==void 0&&e()),l=l.next;while(l!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){l=t.memoizedProps;var c=e!==null?e.memoizedProps:l;e=t.type;var d=t.updateQueue;if(t.updateQueue=null,d!==null){for(r[Pp]=l,e==="input"&&l.type==="radio"&&l.name!=null&&j2(r,l),Vy(e,c),t=Vy(e,l),c=0;c<d.length;c+=2){var y=d[c],s=d[c+1];y==="style"?V2(r,s):y==="dangerouslySetInnerHTML"?U2(r,s):y==="children"?bf(r,s):wv(r,y,s,t)}switch(e){case"input":Fy(r,l);break;case"textarea":D2(r,l);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!l.multiple,d=l.value,d!=null?bc(r,!!l.multiple,d,!1):e!==!!l.multiple&&(l.defaultValue!=null?bc(r,!!l.multiple,l.defaultValue,!0):bc(r,!!l.multiple,l.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Ct(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,Q2(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(i1=Si(),Ow(t.child,!0)),jw(t);return;case 19:jw(t);return;case 17:return;case 23:case 24:Ow(t,t.memoizedState!==null);return}throw Error(Ct(163))}function jw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new GP),t.forEach(function(l){var c=rk.bind(null,e,l);r.has(l)||(r.add(l),l.then(c,c))})}}function HP(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var XP=Math.ceil,$p=pu.ReactCurrentDispatcher,n1=pu.ReactCurrentOwner,bn=0,Gi=null,Kr=null,Ti=0,lu=0,f0=dl(0),fi=0,Fm=null,Hc=0,Gf=0,Xc=0,r1=0,d0=null,i1=0,p0=1/0;function Yc(){p0=Si()+500}var Qt=null,Vp=!1,m0=null,ka=null,ll=!1,hf=null,Wh=90,g0=[],y0=[],hs=null,ff=0,v0=null,lp=-1,ls=0,up=0,df=null,cp=!1;function po(){return(bn&48)!==0?Si():lp!==-1?lp:lp=Si()}function nl(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Fc()===99?1:2;if(ls===0&&(ls=Hc),RP.transition!==0){up!==0&&(up=d0!==null?d0.pendingLanes:0),e=ls;var t=4186112&~up;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Fc(),(bn&4)!==0&&e===98?e=Ap(12,ls):(e=jC(e),e=Ap(e,ls)),e}function rl(e,t,r){if(50<ff)throw ff=0,v0=null,Error(Ct(185));if(e=Bm(e,t),e===null)return null;Pm(e,t,r),e===Gi&&(Xc|=t,fi===4&&Cc(e,Ti));var l=Fc();t===1?(bn&8)!==0&&(bn&48)===0?_0(e):(Bo(e,r),bn===0&&(Yc(),Ra())):((bn&4)===0||l!==98&&l!==99||(hs===null?hs=new Set([e]):hs.add(e)),Bo(e,r)),d0=e}function Bm(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Bo(e,t){for(var r=e.callbackNode,l=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,y=e.pendingLanes;0<y;){var s=31-al(y),w=1<<s,E=d[s];if(E===-1){if((w&l)===0||(w&c)!==0){E=t,lc(w);var C=mr;d[s]=10<=C?E+250:6<=C?E+5e3:-1}}else E<=t&&(e.expiredLanes|=w);y&=~w}if(l=Af(e,e===Gi?Ti:0),t=mr,l===0)r!==null&&(r!==ay&&e0(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==ay&&e0(r)}t===15?(r=_0.bind(null,e),as===null?(as=[r],sp=Gv(Lm,CE)):as.push(r),r=ay):t===14?r=kf(99,_0.bind(null,e)):(r=DC(t),r=kf(r,qE.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function qE(e){if(lp=-1,up=ls=0,(bn&48)!==0)throw Error(Ct(327));var t=e.callbackNode;if(pl()&&e.callbackNode!==t)return null;var r=Af(e,e===Gi?Ti:0);if(r===0)return null;var l=r,c=bn;bn|=16;var d=tS();(Gi!==e||Ti!==l)&&(Yc(),Pc(e,l));do try{qP();break}catch(s){eS(e,s)}while(1);if(Wv(),$p.current=d,bn=c,Kr!==null?l=0:(Gi=null,Ti=0,l=fi),(Hc&Xc)!==0)Pc(e,0);else if(l!==0){if(l===2&&(bn|=64,e.hydrate&&(e.hydrate=!1,$v(e.containerInfo)),r=aE(e),r!==0&&(l=Zh(e,r))),l===1)throw t=Fm,Pc(e,0),Cc(e,r),Bo(e,Si()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,l){case 0:case 1:throw Error(Ct(345));case 2:ql(e);break;case 3:if(Cc(e,r),(r&62914560)===r&&(l=i1+500-Si(),10<l)){if(Af(e,0)!==0)break;if(c=e.suspendedLanes,(c&r)!==r){po(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ow(ql.bind(null,e),l);break}ql(e);break;case 4:if(Cc(e,r),(r&4186112)===r)break;for(l=e.eventTimes,c=-1;0<r;){var y=31-al(r);d=1<<y,y=l[y],y>c&&(c=y),r&=~d}if(r=c,r=Si()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XP(r/1960))-r,10<r){e.timeoutHandle=ow(ql.bind(null,e),r);break}ql(e);break;case 5:ql(e);break;default:throw Error(Ct(329))}}return Bo(e,Si()),e.callbackNode===t?qE.bind(null,e):null}function Cc(e,t){for(t&=~r1,t&=~Xc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-al(t),l=1<<r;e[r]=-1,t&=~l}}function _0(e){if((bn&48)!==0)throw Error(Ct(327));if(pl(),e===Gi&&(e.expiredLanes&Ti)!==0){var t=Ti,r=Zh(e,t);(Hc&Xc)!==0&&(t=Af(e,t),r=Zh(e,t))}else t=Af(e,0),r=Zh(e,t);if(e.tag!==0&&r===2&&(bn|=64,e.hydrate&&(e.hydrate=!1,$v(e.containerInfo)),t=aE(e),t!==0&&(r=Zh(e,t))),r===1)throw r=Fm,Pc(e,0),Cc(e,t),Bo(e,Si()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ql(e),Bo(e,Si()),null}function YP(){if(hs!==null){var e=hs;hs=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Bo(t,Si())})}Ra()}function JE(e,t){var r=bn;bn|=1;try{return e(t)}finally{bn=r,bn===0&&(Yc(),Ra())}}function QE(e,t){var r=bn;bn&=-2,bn|=8;try{return e(t)}finally{bn=r,bn===0&&(Yc(),Ra())}}function Nd(e,t){Fr(f0,lu),lu|=t,Hc|=t}function o1(){lu=f0.current,wr(f0)}function Pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PP(r)),Kr!==null)for(r=Kr.return;r!==null;){var l=r;switch(l.tag){case 1:l=l.type.childContextTypes,l!=null&&kp();break;case 3:Bc(),wr(to),wr(Ii),Yv();break;case 5:Xv(l);break;case 4:Bc();break;case 13:wr(Rr);break;case 19:wr(Rr);break;case 10:Zv(l);break;case 23:case 24:o1()}r=r.return}Gi=e,Kr=ul(e.current,null),Ti=lu=Hc=t,fi=0,Fm=null,r1=Xc=Gf=0}function eS(e,t){do{var r=Kr;try{if(Wv(),uf.current=Up,Bp){for(var l=Gr.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Bp=!1}if(Lf=0,hi=Ei=Gr=null,cf=!1,n1.current=null,r===null||r.return===null){fi=1,Fm=t,Kr=null;break}e:{var d=e,y=r.return,s=r,w=t;if(t=Ti,s.flags|=2048,s.firstEffect=s.lastEffect=null,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w;if((s.mode&2)===0){var C=s.alternate;C?(s.updateQueue=C.updateQueue,s.memoizedState=C.memoizedState,s.lanes=C.lanes):(s.updateQueue=null,s.memoizedState=null)}var S=(Rr.current&1)!==0,P=y;do{var N;if(N=P.tag===13){var ee=P.memoizedState;if(ee!==null)N=ee.dehydrated!==null;else{var Y=P.memoizedProps;N=Y.fallback===void 0?!1:Y.unstable_avoidThisFallback!==!0?!0:!S}}if(N){var W=P.updateQueue;if(W===null){var $=new Set;$.add(E),P.updateQueue=$}else W.add(E);if((P.mode&2)===0){if(P.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var G=el(-1,1);G.tag=2,tl(s,G)}s.lanes|=1;break e}w=void 0,s=t;var V=d.pingCache;if(V===null?(V=d.pingCache=new VP,w=new Set,V.set(E,w)):(w=V.get(E),w===void 0&&(w=new Set,V.set(E,w))),!w.has(s)){w.add(s);var re=nk.bind(null,d,E,s);E.then(re,re)}P.flags|=4096,P.lanes=t;break e}P=P.return}while(P!==null);w=Error((wc(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}fi!==5&&(fi=2),w=t1(w,s),P=y;do{switch(P.tag){case 3:d=w,P.flags|=4096,t&=-t,P.lanes|=t;var H=XE(P,d,t);fw(P,H);break e;case 1:d=w;var F=P.type,b=P.stateNode;if((P.flags&64)===0&&(typeof F.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ka===null||!ka.has(b)))){P.flags|=4096,t&=-t,P.lanes|=t;var M=YE(P,d,t);fw(P,M);break e}}P=P.return}while(P!==null)}rS(r)}catch(D){t=D,Kr===r&&r!==null&&(Kr=r=r.return);continue}break}while(1)}function tS(){var e=$p.current;return $p.current=Up,e===null?Up:e}function Zh(e,t){var r=bn;bn|=16;var l=tS();Gi===e&&Ti===t||Pc(e,t);do try{KP();break}catch(c){eS(e,c)}while(1);if(Wv(),bn=r,$p.current=l,Kr!==null)throw Error(Ct(261));return Gi=null,Ti=0,fi}function KP(){for(;Kr!==null;)nS(Kr)}function qP(){for(;Kr!==null&&!zP();)nS(Kr)}function nS(e){var t=oS(e.alternate,e,lu);e.memoizedProps=e.pendingProps,t===null?rS(e):Kr=t,n1.current=null}function rS(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=UP(r,t,lu),r!==null){Kr=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(lu&1073741824)!==0||(r.mode&4)===0){for(var l=0,c=r.child;c!==null;)l|=c.lanes|c.childLanes,c=c.sibling;r.childLanes=l}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=$P(t),r!==null){r.flags&=2047,Kr=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);fi===0&&(fi=5)}function ql(e){var t=Fc();return su(99,JP.bind(null,e,t)),null}function JP(e,t){do pl();while(hf!==null);if((bn&48)!==0)throw Error(Ct(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ct(177));e.callbackNode=null;var l=r.lanes|r.childLanes,c=l,d=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var y=e.eventTimes,s=e.expirationTimes;0<d;){var w=31-al(d),E=1<<w;c[w]=0,y[w]=-1,s[w]=-1,d&=~E}if(hs!==null&&(l&24)===0&&hs.has(e)&&hs.delete(e),e===Gi&&(Kr=Gi=null,Ti=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,l=r.firstEffect):l=r:l=r.firstEffect,l!==null){if(c=bn,bn|=32,n1.current=null,ry=rp,y=Jx(),Yy(y)){if("selectionStart"in y)s={start:y.selectionStart,end:y.selectionEnd};else e:if(s=(s=y.ownerDocument)&&s.defaultView||window,(E=s.getSelection&&s.getSelection())&&E.rangeCount!==0){s=E.anchorNode,d=E.anchorOffset,w=E.focusNode,E=E.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var C=0,S=-1,P=-1,N=0,ee=0,Y=y,W=null;t:for(;;){for(var $;Y!==s||d!==0&&Y.nodeType!==3||(S=C+d),Y!==w||E!==0&&Y.nodeType!==3||(P=C+E),Y.nodeType===3&&(C+=Y.nodeValue.length),($=Y.firstChild)!==null;)W=Y,Y=$;for(;;){if(Y===y)break t;if(W===s&&++N===d&&(S=C),W===w&&++ee===E&&(P=C),($=Y.nextSibling)!==null)break;Y=W,W=Y.parentNode}Y=$}s=S===-1||P===-1?null:{start:S,end:P}}else s=null;s=s||{start:0,end:0}}else s=null;iy={focusedElem:y,selectionRange:s},rp=!1,df=null,cp=!1,Qt=l;do try{QP()}catch(D){if(Qt===null)throw Error(Ct(330));il(Qt,D),Qt=Qt.nextEffect}while(Qt!==null);df=null,Qt=l;do try{for(y=e;Qt!==null;){var G=Qt.flags;if(G&16&&bf(Qt.stateNode,""),G&128){var V=Qt.alternate;if(V!==null){var re=V.ref;re!==null&&(typeof re=="function"?re(null):re.current=null)}}switch(G&1038){case 2:Bw(Qt),Qt.flags&=-3;break;case 6:Bw(Qt),Qt.flags&=-3,hy(Qt.alternate,Qt);break;case 1024:Qt.flags&=-1025;break;case 1028:Qt.flags&=-1025,hy(Qt.alternate,Qt);break;case 4:hy(Qt.alternate,Qt);break;case 8:s=Qt,KE(y,s);var H=s.alternate;Rw(s),H!==null&&Rw(H)}Qt=Qt.nextEffect}}catch(D){if(Qt===null)throw Error(Ct(330));il(Qt,D),Qt=Qt.nextEffect}while(Qt!==null);if(re=iy,V=Jx(),G=re.focusedElem,y=re.selectionRange,V!==G&&G&&G.ownerDocument&&pE(G.ownerDocument.documentElement,G)){for(y!==null&&Yy(G)&&(V=y.start,re=y.end,re===void 0&&(re=V),"selectionStart"in G?(G.selectionStart=V,G.selectionEnd=Math.min(re,G.value.length)):(re=(V=G.ownerDocument||document)&&V.defaultView||window,re.getSelection&&(re=re.getSelection(),s=G.textContent.length,H=Math.min(y.start,s),y=y.end===void 0?H:Math.min(y.end,s),!re.extend&&H>y&&(s=y,y=H,H=s),s=qx(G,H),d=qx(G,y),s&&d&&(re.rangeCount!==1||re.anchorNode!==s.node||re.anchorOffset!==s.offset||re.focusNode!==d.node||re.focusOffset!==d.offset)&&(V=V.createRange(),V.setStart(s.node,s.offset),re.removeAllRanges(),H>y?(re.addRange(V),re.extend(d.node,d.offset)):(V.setEnd(d.node,d.offset),re.addRange(V)))))),V=[],re=G;re=re.parentNode;)re.nodeType===1&&V.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<V.length;G++)re=V[G],re.element.scrollLeft=re.left,re.element.scrollTop=re.top}rp=!!ry,iy=ry=null,e.current=r,Qt=l;do try{for(G=e;Qt!==null;){var F=Qt.flags;if(F&36&&ZP(G,Qt.alternate,Qt),F&128){V=void 0;var b=Qt.ref;if(b!==null){var M=Qt.stateNode;switch(Qt.tag){case 5:V=M;break;default:V=M}typeof b=="function"?b(V):b.current=V}}Qt=Qt.nextEffect}}catch(D){if(Qt===null)throw Error(Ct(330));il(Qt,D),Qt=Qt.nextEffect}while(Qt!==null);Qt=null,LP(),bn=c}else e.current=r;if(ll)ll=!1,hf=e,Wh=t;else for(Qt=l;Qt!==null;)t=Qt.nextEffect,Qt.nextEffect=null,Qt.flags&8&&(F=Qt,F.sibling=null,F.stateNode=null),Qt=t;if(l=e.pendingLanes,l===0&&(ka=null),l===1?e===v0?ff++:(ff=0,v0=e):ff=0,r=r.stateNode,ou&&typeof ou.onCommitFiberRoot=="function")try{ou.onCommitFiberRoot(Vv,r,void 0,(r.current.flags&64)===64)}catch{}if(Bo(e,Si()),Vp)throw Vp=!1,e=m0,m0=null,e;return(bn&8)!==0||Ra(),null}function QP(){for(;Qt!==null;){var e=Qt.alternate;cp||df===null||((Qt.flags&8)!==0?Bx(Qt,df)&&(cp=!0):Qt.tag===13&&HP(e,Qt)&&Bx(Qt,df)&&(cp=!0));var t=Qt.flags;(t&256)!==0&&WP(e,Qt),(t&512)===0||ll||(ll=!0,kf(97,function(){return pl(),null})),Qt=Qt.nextEffect}}function pl(){if(Wh!==90){var e=97<Wh?97:Wh;return Wh=90,su(e,tk)}return!1}function ek(e,t){g0.push(t,e),ll||(ll=!0,kf(97,function(){return pl(),null}))}function iS(e,t){y0.push(t,e),ll||(ll=!0,kf(97,function(){return pl(),null}))}function tk(){if(hf===null)return!1;var e=hf;if(hf=null,(bn&48)!==0)throw Error(Ct(331));var t=bn;bn|=32;var r=y0;y0=[];for(var l=0;l<r.length;l+=2){var c=r[l],d=r[l+1],y=c.destroy;if(c.destroy=void 0,typeof y=="function")try{y()}catch(w){if(d===null)throw Error(Ct(330));il(d,w)}}for(r=g0,g0=[],l=0;l<r.length;l+=2){c=r[l],d=r[l+1];try{var s=c.create;c.destroy=s()}catch(w){if(d===null)throw Error(Ct(330));il(d,w)}}for(s=e.current.firstEffect;s!==null;)e=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=e;return bn=t,Ra(),!0}function Dw(e,t,r){t=t1(r,t),t=XE(e,t,1),tl(e,t),t=po(),e=Bm(e,1),e!==null&&(Pm(e,1,t),Bo(e,t))}function il(e,t){if(e.tag===3)Dw(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Dw(r,e,t);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ka===null||!ka.has(l))){e=t1(t,e);var c=YE(r,e,1);if(tl(r,c),c=po(),r=Bm(r,1),r!==null)Pm(r,1,c),Bo(r,c);else if(typeof l.componentDidCatch=="function"&&(ka===null||!ka.has(l)))try{l.componentDidCatch(t,e)}catch{}break}}r=r.return}}function nk(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),t=po(),e.pingedLanes|=e.suspendedLanes&r,Gi===e&&(Ti&r)===r&&(fi===4||fi===3&&(Ti&62914560)===Ti&&500>Si()-i1?Pc(e,0):r1|=r),Bo(e,t)}function rk(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Fc()===99?1:2:(ls===0&&(ls=Hc),t=uc(62914560&~ls),t===0&&(t=4194304))),r=po(),e=Bm(e,t),e!==null&&(Pm(e,t,r),Bo(e,r))}var oS;oS=function(e,t,r){var l=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||to.current)aa=!0;else if((r&l)!==0)aa=(e.flags&16384)!==0;else{switch(aa=!1,t.tag){case 3:Tw(t),ly();break;case 5:gw(t);break;case 1:no(t.type)&&ap(t);break;case 4:r0(t,t.stateNode.containerInfo);break;case 10:l=t.memoizedProps.value;var c=t.type._context;Fr(Mp,c._currentValue),c._currentValue=l;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?Aw(e,t,r):(Fr(Rr,Rr.current&1),t=cs(e,t,r),t!==null?t.sibling:null);Fr(Rr,Rr.current&1);break;case 19:if(l=(r&t.childLanes)!==0,(e.flags&64)!==0){if(l)return Mw(e,t,r);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Fr(Rr,Rr.current),l)break;return null;case 23:case 24:return t.lanes=0,uy(e,t,r)}return cs(e,t,r)}else aa=!1;switch(t.lanes=0,t.tag){case 2:if(l=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=Rc(t,Ii.current),Ac(t,r),c=qv(null,t,l,e,c,r),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,no(l)){var d=!0;ap(t)}else d=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Hv(t);var y=l.getDerivedStateFromProps;typeof y=="function"&&Lp(t,l,y,e),c.updater=Rm,t.stateNode=c,c._reactInternals=t,n0(t,l,e,r),t=s0(null,t,l,!0,d,r)}else t.tag=0,Qi(null,t,c,r),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,d=c._init,c=d(c._payload),t.type=c,d=t.tag=ok(c),e=ra(c,e),d){case 0:t=a0(null,t,c,e,r);break e;case 1:t=Sw(null,t,c,e,r);break e;case 11:t=bw(null,t,c,e,r);break e;case 14:t=Ew(null,t,c,ra(c.type,e),l,r);break e}throw Error(Ct(306,c,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:ra(l,c),a0(e,t,l,c,r);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:ra(l,c),Sw(e,t,l,c,r);case 3:if(Tw(t),l=t.updateQueue,e===null||l===null)throw Error(Ct(282));if(l=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,kE(e,t),Mf(t,l,null,r),l=t.memoizedState.element,l===c)ly(),t=cs(e,t,r);else{if(c=t.stateNode,(d=c.hydrate)&&(Ys=Tc(t.stateNode.containerInfo.firstChild),us=t,d=Oa=!0),d){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)d=e[c],d._workInProgressVersionPrimary=e[c+1],Ic.push(d);for(r=LE(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Qi(e,t,l,r),ly();t=t.child}return t;case 5:return gw(t),e===null&&i0(t),l=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,Jy(l,c)?y=null:d!==null&&Jy(l,d)&&(t.flags|=16),GE(e,t),Qi(e,t,y,r),t.child;case 6:return e===null&&i0(t),null;case 13:return Aw(e,t,r);case 4:return r0(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Rp(t,null,l,r):Qi(e,t,l,r),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:ra(l,c),bw(e,t,l,c,r);case 7:return Qi(e,t,t.pendingProps,r),t.child;case 8:return Qi(e,t,t.pendingProps.children,r),t.child;case 12:return Qi(e,t,t.pendingProps.children,r),t.child;case 10:e:{l=t.type._context,c=t.pendingProps,y=t.memoizedProps,d=c.value;var s=t.type._context;if(Fr(Mp,s._currentValue),s._currentValue=d,y!==null)if(s=y.value,d=Mo(s,d)?0:(typeof l._calculateChangedBits=="function"?l._calculateChangedBits(s,d):1073741823)|0,d===0){if(y.children===c.children&&!to.current){t=cs(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var w=s.dependencies;if(w!==null){y=s.child;for(var E=w.firstContext;E!==null;){if(E.context===l&&(E.observedBits&d)!==0){s.tag===1&&(E=el(-1,r&-r),E.tag=2,tl(s,E)),s.lanes|=r,E=s.alternate,E!==null&&(E.lanes|=r),PE(s.return,r),w.lanes|=r;break}E=E.next}}else y=s.tag===10&&s.type===t.type?null:s.child;if(y!==null)y.return=s;else for(y=s;y!==null;){if(y===t){y=null;break}if(s=y.sibling,s!==null){s.return=y.return,y=s;break}y=y.return}s=y}Qi(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,d=t.pendingProps,l=d.children,Ac(t,r),c=Fo(c,d.unstable_observedBits),l=l(c),t.flags|=1,Qi(e,t,l,r),t.child;case 14:return c=t.type,d=ra(c,t.pendingProps),d=ra(c.type,d),Ew(e,t,c,d,l,r);case 15:return VE(e,t,t.type,t.pendingProps,l,r);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:ra(l,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,no(l)?(e=!0,ap(t)):e=!1,Ac(t,r),zE(t,l,c),n0(t,l,c,r),s0(null,t,l,!0,e,r);case 19:return Mw(e,t,r);case 23:return uy(e,t,r);case 24:return uy(e,t,r)}throw Error(Ct(156,t.tag))};function ik(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zo(e,t,r,l){return new ik(e,t,r,l)}function a1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ok(e){if(typeof e=="function")return a1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Am)return 11;if(e===Im)return 14}return 2}function ul(e,t){var r=e.alternate;return r===null?(r=zo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function hp(e,t,r,l,c,d){var y=2;if(l=e,typeof e=="function")a1(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Ws:return kc(r.children,c,d,t);case R2:y=8,c|=16;break;case bv:y=8,c|=1;break;case tf:return e=zo(12,r,t,c|8),e.elementType=tf,e.type=tf,e.lanes=d,e;case nf:return e=zo(13,r,t,c),e.type=nf,e.elementType=nf,e.lanes=d,e;case bp:return e=zo(19,r,t,c),e.elementType=bp,e.lanes=d,e;case Cv:return s1(r,c,d,t);case Ly:return e=zo(24,r,t,c),e.elementType=Ly,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ev:y=10;break e;case Sv:y=9;break e;case Am:y=11;break e;case Im:y=14;break e;case Tv:y=16,l=null;break e;case Av:y=22;break e}throw Error(Ct(130,e==null?e:typeof e,""))}return t=zo(y,r,t,c),t.elementType=e,t.type=l,t.lanes=d,t}function kc(e,t,r,l){return e=zo(7,e,l,t),e.lanes=r,e}function s1(e,t,r,l){return e=zo(23,e,l,t),e.elementType=Cv,e.lanes=r,e}function fy(e,t,r){return e=zo(6,e,null,t),e.lanes=r,e}function dy(e,t,r){return t=zo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ak(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Kg(0),this.expirationTimes=Kg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kg(0),this.mutableSourceEagerHydrationData=null}function sk(e,t,r){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:l==null?null:""+l,children:e,containerInfo:t,implementation:r}}function Gp(e,t,r,l){var c=t.current,d=po(),y=nl(c);e:if(r){r=r._reactInternals;t:{if(mu(r)!==r||r.tag!==1)throw Error(Ct(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(no(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(Ct(171))}if(r.tag===1){var w=r.type;if(no(w)){r=bE(r,w,s);break e}}r=s}else r=sl;return t.context===null?t.context=r:t.pendingContext=r,t=el(d,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),tl(c,t),rl(c,y,d),y}function py(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function l1(e,t){Nw(e,t),(e=e.alternate)&&Nw(e,t)}function lk(){return null}function u1(e,t,r){var l=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new ak(e,t,r!=null&&r.hydrate===!0),t=zo(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,Hv(t),e[Zc]=r.current,yE(e.nodeType===8?e.parentNode:e),l)for(e=0;e<l.length;e++){t=l[e];var c=t._getVersion;c=c(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,c]:r.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=r}u1.prototype.render=function(e){Gp(e,this._internalRoot,null,null)};u1.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Gp(null,e,null,function(){t[Zc]=null})};function Wf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uk(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new u1(e,0,t?{hydrate:!0}:void 0)}function jm(e,t,r,l,c){var d=r._reactRootContainer;if(d){var y=d._internalRoot;if(typeof c=="function"){var s=c;c=function(){var E=py(y);s.call(E)}}Gp(t,y,e,c)}else{if(d=r._reactRootContainer=uk(r,l),y=d._internalRoot,typeof c=="function"){var w=c;c=function(){var E=py(y);w.call(E)}}QE(function(){Gp(t,y,e,c)})}return py(y)}K2=function(e){if(e.tag===13){var t=po();rl(e,4,t),l1(e,4)}};Ov=function(e){if(e.tag===13){var t=po();rl(e,67108864,t),l1(e,67108864)}};q2=function(e){if(e.tag===13){var t=po(),r=nl(e);rl(e,r,t),l1(e,r)}};J2=function(e,t){return t()};Gy=function(e,t,r){switch(t){case"input":if(Fy(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var c=Om(l);if(!c)throw Error(Ct(90));B2(l),Fy(l,c)}}}break;case"textarea":D2(e,r);break;case"select":t=r.value,t!=null&&bc(e,!!r.multiple,t,!1)}};kv=JE;Z2=function(e,t,r,l,c){var d=bn;bn|=4;try{return su(98,e.bind(null,t,r,l,c))}finally{bn=d,bn===0&&(Yc(),Ra())}};Mv=function(){(bn&49)===0&&(YP(),pl())};H2=function(e,t){var r=bn;bn|=2;try{return e(t)}finally{bn=r,bn===0&&(Yc(),Ra())}};function aS(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wf(t))throw Error(Ct(200));return sk(e,t,null,r)}var ck={Events:[$f,dc,Om,G2,W2,pl,{current:!1}]},Nh={findFiberByHostInstance:tu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},hk={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y2(e),e===null?null:e.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||lk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{Vv=Ud.inject(hk),ou=Ud}catch{}}jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck;jo.createPortal=aS;jo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ct(188)):Error(Ct(268,Object.keys(e)));return e=Y2(t),e=e===null?null:e.stateNode,e};jo.flushSync=function(e,t){var r=bn;if((r&48)!==0)return e(t);bn|=1;try{if(e)return su(99,e.bind(null,t))}finally{bn=r,Ra()}};jo.hydrate=function(e,t,r){if(!Wf(t))throw Error(Ct(200));return jm(null,e,t,!0,r)};jo.render=function(e,t,r){if(!Wf(t))throw Error(Ct(200));return jm(null,e,t,!1,r)};jo.unmountComponentAtNode=function(e){if(!Wf(e))throw Error(Ct(40));return e._reactRootContainer?(QE(function(){jm(null,null,e,!1,function(){e._reactRootContainer=null,e[Zc]=null})}),!0):!1};jo.unstable_batchedUpdates=JE;jo.unstable_createPortal=function(e,t){return aS(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};jo.unstable_renderSubtreeIntoContainer=function(e,t,r,l){if(!Wf(r))throw Error(Ct(200));if(e==null||e._reactInternals===void 0)throw Error(Ct(38));return jm(e,t,r,!1,l)};jo.version="17.0.2";function sS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sS)}catch(e){console.error(e)}}sS(),Sm.exports=jo;var dL=Sm.exports,c1={exports:{}};(function(e,t){(function(r,l){e.exports=l()})(Gs,function(){var r,l,c;function d(s,w){if(!r)r=w;else if(!l)l=w;else{var E="var sharedChunk = {}; ("+r+")(sharedChunk); ("+l+")(sharedChunk);",C={};r(C),c=w(C),typeof window!="undefined"&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}d(["exports"],function(s){var w=E;function E(o,n,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=h}function C(o,n,a,h){const p=new w(o,n,a,h);return function(v){return p.solve(v)}}E.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var p=this.sampleCurveX(a)-o;if(Math.abs(p)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=p/v}var _=0,A=1;for(a=o,h=0;h<20&&(p=this.sampleCurveX(a),!(Math.abs(p-o)<n));h++)o>p?_=a:A=a,a=.5*(A-_)+_;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const S=C(.25,.1,.25,1);function P(o,n,a){return Math.min(a,Math.max(n,o))}function N(o,n,a){const h=a-n,p=((o-n)%h+h)%h+n;return p===n?a:p}function ee(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}let Y=1;function W(o,n){o.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function $(o,n,a){const h={};for(const p in o)h[p]=n.call(a||this,o[p],p,o);return h}function G(o,n,a){const h={};for(const p in o)n.call(a||this,o[p],p,o)&&(h[p]=o[p]);return h}function V(o){return Array.isArray(o)?o.map(V):typeof o=="object"&&o?$(o,V):o}const re={};function H(o){re[o]||(typeof console!="undefined"&&console.warn(o),re[o]=!0)}function F(o,n,a){return(a.y-o.y)*(n.x-o.x)>(n.y-o.y)*(a.x-o.x)}function b(o){let n=0;for(let a,h,p=0,v=o.length,_=v-1;p<v;_=p++)a=o[p],h=o[_],n+=(h.x-a.x)*(a.y+h.y);return n}function M(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function D(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,p,v)=>{const _=p||v;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let q,K,de=null;function ye(o){if(de==null){const n=o.navigator?o.navigator.userAgent:null;de=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return de}function xe(o){return typeof ImageBitmap!="undefined"&&o instanceof ImageBitmap}const te={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const a=window.document.createElement("canvas"),h=a.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return a.width=o.width,a.height=o.height,h.drawImage(o,0,0,o.width,o.height),h.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(q||(q=document.createElement("a")),q.href=o,q.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(K==null&&(K=matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}};var ae=oe;function oe(o,n){this.x=o,this.y=n}oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,a=o.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),a=Math.sin(o),h=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,n){var a=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},oe.convert=function(o){return o instanceof oe?o:Array.isArray(o)?new oe(o[0],o[1]):o};const ue={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Ee="mapbox-tiles";let Pe,ce,ke=500,be=50;function Ie(){typeof caches=="undefined"||Pe||(Pe=caches.open(Ee))}let Be=1/0;const Ze={supported:!1,testSupport:function(o){!ct&&tt&&(St?ft(o):et=o)}};let et,tt,ct=!1,St=!1;function ft(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,tt),o.isContextLost())return;Ze.supported=!0}catch{}o.deleteTexture(n),ct=!0}typeof document!="undefined"&&(tt=document.createElement("img"),tt.onload=function(){et&&ft(et),et=null,St=!0},tt.onerror=function(){ct=!0,et=null},tt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const At={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(At);class qt extends Error{constructor(n,a,h,p){super(`AJAXError: ${a} (${n}): ${h}`),this.status=n,this.statusText=a,this.url=h,this.body=p}}const Bt=M()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ln(o,n){const a=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Bt(),signal:a.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),((_,A,k)=>{if(v)return;const U=Date.now();fetch(h).then(Q=>Q.ok?((ne,le,pe)=>{(o.type==="arrayBuffer"?ne.arrayBuffer():o.type==="json"?ne.json():ne.text()).then(_e=>{v||(le&&pe&&function(Re,je,He){if(Ie(),!Pe)return;const rt={status:je.status,statusText:je.statusText,headers:new Headers};je.headers.forEach((lt,yt)=>rt.headers.set(yt,lt));const Je=D(je.headers.get("Cache-Control")||"");Je["no-store"]||(Je["max-age"]&&rt.headers.set("Expires",new Date(He+1e3*Je["max-age"]).toUTCString()),new Date(rt.headers.get("Expires")).getTime()-He<42e4||function(lt,yt){if(ce===void 0)try{new Response(new ReadableStream),ce=!0}catch{ce=!1}ce?yt(lt.body):lt.blob().then(yt)}(je,lt=>{const yt=new Response(lt,rt);Ie(),Pe&&Pe.then(pt=>pt.put(function(Rt){const Jt=Rt.indexOf("?");return Jt<0?Rt:Rt.slice(0,Jt)}(Re.url),yt)).catch(pt=>H(pt.message))}))}(h,le,pe),p=!0,n(null,_e,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))}).catch(_e=>{v||n(new Error(_e.message))})})(Q,null,U):Q.blob().then(ne=>n(new qt(Q.status,Q.statusText,o.url,ne)))).catch(Q=>{Q.code!==20&&n(new Error(Q.message))})})(),{cancel:()=>{v=!0,p||a.abort()}}}const En=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(M()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!M()){const h=o.url.substring(0,o.url.indexOf("://"));return(ue.REGISTERED_PROTOCOLS[h]||ln)(o,n)}}if(!(/^file:/.test(a=o.url)||/^file:/.test(Bt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ln(o,n);if(M()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var a;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const _ in h.headers)v.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let _=v.response;if(h.type==="json")try{_=JSON.parse(v.response)}catch(A){return p(A)}p(null,_,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const _=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new qt(v.status,v.statusText,h.url,_))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},_n=function(o,n){return En(ee(o,{type:"arrayBuffer"}),n)};function nn(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ge,L;ge=[],L=0;const R=function(o,n){if(Ze.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),L>=ue.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return ge.push(v),v}L++;let a=!1;const h=()=>{if(!a)for(a=!0,L--;ge.length&&L<ue.MAX_PARALLEL_IMAGE_REQUESTS;){const v=ge.shift(),{requestParameters:_,callback:A,cancelled:k}=v;k||(v.cancel=R(_,A).cancel)}},p=_n(o,(v,_,A,k)=>{h(),v?n(v):_&&function(U,Q,ne,le){typeof createImageBitmap=="function"?function(pe,_e){const Re=new Blob([new Uint8Array(pe)],{type:"image/png"});createImageBitmap(Re).then(je=>{_e(null,je)}).catch(je=>{_e(new Error(`Could not load image because of ${je.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(U,Q):function(pe,_e,Re,je){const He=new Image;He.onload=()=>{_e(null,He),URL.revokeObjectURL(He.src),He.onload=null,window.requestAnimationFrame(()=>{He.src=Pn})},He.onerror=()=>_e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const rt=new Blob([new Uint8Array(pe)],{type:"image/png"});He.cacheControl=Re,He.expires=je,He.src=pe.byteLength?URL.createObjectURL(rt):Pn}(U,Q,ne,le)}(_,n,A,k)});return{cancel:()=>{p.cancel(),h()}}};function me(o,n,a){a[o]&&a[o].indexOf(n)!==-1||(a[o]=a[o]||[],a[o].push(n))}function Oe(o,n,a){if(a&&a[o]){const h=a[o].indexOf(n);h!==-1&&a[o].splice(h,1)}}class Ke{constructor(n,a={}){ee(this,a),this.type=n}}class at extends Ke{constructor(n,a={}){super("error",ee({error:n},a))}}class se{on(n,a){return this._listeners=this._listeners||{},me(n,a,this._listeners),this}off(n,a){return Oe(n,a,this._listeners),Oe(n,a,this._oneTimeListeners),this}once(n,a){return this._oneTimeListeners=this._oneTimeListeners||{},me(n,a,this._oneTimeListeners),this}fire(n,a){typeof n=="string"&&(n=new Ke(n,a||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const A of p)A.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const A of v)Oe(h,A,this._oneTimeListeners),A.call(this,n);const _=this._eventedParent;_&&(ee(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof at&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var T={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class z{constructor(n,a,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function we(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function De(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}function Xe(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Qe(o){if(Array.isArray(o))return o.map(Qe);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const a in o)n[a]=Qe(o[a]);return n}return Xe(o)}class $t extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Tn{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[h,p]of a)this.bindings[h]=p}concat(n){return new Tn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const pn={kind:"null"},dt={kind:"number"},Lt={kind:"string"},un={kind:"boolean"},Tr={kind:"color"},Hr={kind:"object"},cn={kind:"value"},er={kind:"collator"},pi={kind:"formatted"},gr={kind:"resolvedImage"};function jr(o,n){return{kind:"array",itemType:o,N:n}}function Vt(o){if(o.kind==="array"){const n=Vt(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Ut=[pn,dt,Lt,un,Tr,pi,Hr,jr(cn),gr];function Gt(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Gt(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const a of Ut)if(!Gt(a,n))return null}}return`Expected ${Vt(o)} but found ${Vt(n)} instead.`}function An(o,n){return n.some(a=>a.kind===o.kind)}function zn(o,n){return n.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var tr,Dr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ii(o){return(o=Math.round(o))<0?0:o>255?255:o}function ca(o){return ii(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Ae(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function Z(o,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(n-o)*a*6:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}try{tr={}.parseCSSColor=function(o){var n,a=o.replace(/ /g,"").toLowerCase();if(a in Dr)return Dr[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=a.indexOf("("),p=a.indexOf(")");if(h!==-1&&p+1===a.length){var v=a.substr(0,h),_=a.substr(h+1,p-(h+1)).split(","),A=1;switch(v){case"rgba":if(_.length!==4)return null;A=Ae(_.pop());case"rgb":return _.length!==3?null:[ca(_[0]),ca(_[1]),ca(_[2]),A];case"hsla":if(_.length!==4)return null;A=Ae(_.pop());case"hsl":if(_.length!==3)return null;var k=(parseFloat(_[0])%360+360)%360/360,U=Ae(_[1]),Q=Ae(_[2]),ne=Q<=.5?Q*(U+1):Q+U-Q*U,le=2*Q-ne;return[ii(255*Z(le,ne,k+1/3)),ii(255*Z(le,ne,k)),ii(255*Z(le,ne,k-1/3)),A];default:return null}}return null}}catch{}class J{constructor(n,a,h,p=1){this.r=n,this.g=a,this.b=h,this.a=p}static parse(n){if(!n)return;if(n instanceof J)return n;if(typeof n!="string")return;const a=tr(n);return a?new J(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,h,p]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(h)},${p})`}toArray(){const{r:n,g:a,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*n/p,255*a/p,255*h/p,p]}}J.black=new J(0,0,0,1),J.white=new J(1,1,1,1),J.transparent=new J(0,0,0,0),J.red=new J(1,0,0,1);class ve{constructor(n,a,h){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ce{constructor(n,a,h,p,v){this.text=n,this.image=a,this.scale=h,this.fontStack=p,this.textColor=v}}class Me{constructor(n){this.sections=n}static fromString(n){return new Me([new Ce(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Me?n:Me.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.name]);continue}n.push(a.text);const h={};a.fontStack&&(h["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(h["font-scale"]=a.scale),a.textColor&&(h["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(h)}return n}}class Ve{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ve({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Ne(o,n,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,a,h]:[o,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ue(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof J||o instanceof ve||o instanceof Me||o instanceof Ve)return!0;if(Array.isArray(o)){for(const n of o)if(!Ue(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Ue(o[n]))return!1;return!0}return!1}function Ge(o){if(o===null)return pn;if(typeof o=="string")return Lt;if(typeof o=="boolean")return un;if(typeof o=="number")return dt;if(o instanceof J)return Tr;if(o instanceof ve)return er;if(o instanceof Me)return pi;if(o instanceof Ve)return gr;if(Array.isArray(o)){const n=o.length;let a;for(const h of o){const p=Ge(h);if(a){if(a===p)continue;a=cn;break}a=p}return jr(a||cn,n)}return Hr}function st(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof J||o instanceof Me||o instanceof Ve?o.toString():JSON.stringify(o)}class mt{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ue(n[1]))return a.error("invalid value");const h=n[1];let p=Ge(h);const v=a.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new mt(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof J?["rgba"].concat(this.value.toArray()):this.value instanceof Me?this.value.serialize():this.value}}class ot{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Nt={string:Lt,number:dt,boolean:un,object:Hr};class It{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let A,k;if(n.length>2){const U=n[1];if(typeof U!="string"||!(U in Nt)||U==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);A=Nt[U],p++}else A=cn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);k=n[2],p++}h=jr(A,k)}else h=Nt[v];const _=[];for(;p<n.length;p++){const A=a.parse(n[p],p,cn);if(!A)return null;_.push(A)}return new It(h,_)}evaluate(n){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(n);if(!Gt(this.type,Ge(h)))return h;if(a===this.args.length-1)throw new ot(`Expected value to be of type ${Vt(this.type)}, but found ${Vt(Ge(h))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const h=n.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){a.push(h.kind);const p=n.N;(typeof p=="number"||this.args.length>1)&&a.push(p)}}return a.concat(this.args.map(h=>h.serialize()))}}class jt{constructor(n){this.type=pi,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=n.length-1;++_){const A=n[_];if(v&&typeof A=="object"&&!Array.isArray(A)){v=!1;let k=null;if(A["font-scale"]&&(k=a.parse(A["font-scale"],1,dt),!k))return null;let U=null;if(A["text-font"]&&(U=a.parse(A["text-font"],1,jr(Lt)),!U))return null;let Q=null;if(A["text-color"]&&(Q=a.parse(A["text-color"],1,Tr),!Q))return null;const ne=p[p.length-1];ne.scale=k,ne.font=U,ne.textColor=Q}else{const k=a.parse(n[_],1,cn);if(!k)return null;const U=k.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:k,scale:null,font:null,textColor:null})}}return new jt(p)}evaluate(n){return new Me(this.sections.map(a=>{const h=a.content.evaluate(n);return Ge(h)===gr?new Ce("",h,null,null,null):new Ce(st(h),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const h={};a.scale&&(h["font-scale"]=a.scale.serialize()),a.font&&(h["text-font"]=a.font.serialize()),a.textColor&&(h["text-color"]=a.textColor.serialize()),n.push(h)}return n}}class tn{constructor(n){this.type=gr,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const h=a.parse(n[1],1,Lt);return h?new tn(h):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),h=Ve.fromString(a);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(a)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Dt={"to-boolean":un,"to-color":Tr,"to-number":dt,"to-string":Lt};class vn{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[0];if((h==="to-boolean"||h==="to-string")&&n.length!==2)return a.error("Expected one argument.");const p=Dt[h],v=[];for(let _=1;_<n.length;_++){const A=a.parse(n[_],_,cn);if(!A)return null;v.push(A)}return new vn(p,v)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let a,h;for(const p of this.args){if(a=p.evaluate(n),h=null,a instanceof J)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Ne(a[0],a[1],a[2],a[3]),!h))return new J(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new ot(h||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(n),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new ot(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Me.fromString(st(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Ve.fromString(st(this.args[0].evaluate(n))):st(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new jt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new tn(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}const Sn=["Unknown","Point","LineString","Polygon"];class xn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Sn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=J.parse(n)),a}}class wn{constructor(n,a,h,p){this.name=n,this.type=a,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const h=n[0],p=wn.definitions[h];if(!p)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,A=_.filter(([U])=>!Array.isArray(U)||U.length===n.length-1);let k=null;for(const[U,Q]of A){k=new ws(a.registry,a.path,null,a.scope);const ne=[];let le=!1;for(let pe=1;pe<n.length;pe++){const _e=n[pe],Re=Array.isArray(U)?U[pe-1]:U.type,je=k.parse(_e,1+ne.length,Re);if(!je){le=!0;break}ne.push(je)}if(!le)if(Array.isArray(U)&&U.length!==ne.length)k.error(`Expected ${U.length} arguments, but found ${ne.length} instead.`);else{for(let pe=0;pe<ne.length;pe++){const _e=Array.isArray(U)?U[pe]:U.type,Re=ne[pe];k.concat(pe+1).checkSubtype(_e,Re.type)}if(k.errors.length===0)return new wn(h,v,Q,ne)}}if(A.length===1)a.errors.push(...k.errors);else{const U=(A.length?A:_).map(([ne])=>{return le=ne,Array.isArray(le)?`(${le.map(Vt).join(", ")})`:`(${Vt(le.type)}...)`;var le}).join(" | "),Q=[];for(let ne=1;ne<n.length;ne++){const le=a.parse(n[ne],1+Q.length);if(!le)return null;Q.push(Vt(le.type))}a.error(`Expected arguments of type ${U}, but found (${Q.join(", ")}) instead.`)}return null}static register(n,a){wn.definitions=a;for(const h in a)n[h]=wn}}class Qn{constructor(n,a,h){this.type=er,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const p=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,un);if(!p)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,un);if(!v)return null;let _=null;return h.locale&&(_=a.parse(h.locale,1,Lt),!_)?null:new Qn(p,v,_)}evaluate(n){return new ve(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const cr=8192;function Kn(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function vo(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Yi(o,n){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(a*p*cr),Math.round(h*p*cr)]}function ml(o,n,a){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-a[0],_=o[1]-a[1];return h*_-v*p==0&&h*v<=0&&p*_<=0}function Ba(o,n){let a=!1;for(let _=0,A=n.length;_<A;_++){const k=n[_];for(let U=0,Q=k.length;U<Q-1;U++){if(ml(o,k[U],k[U+1]))return!1;(p=k[U])[1]>(h=o)[1]!=(v=k[U+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(a=!a)}}var h,p,v;return a}function qn(o,n){for(let a=0;a<n.length;a++)if(Ba(o,n[a]))return!0;return!1}function Ki(o,n,a,h){const p=h[0]-a[0],v=h[1]-a[1],_=(o[0]-a[0])*v-p*(o[1]-a[1]),A=(n[0]-a[0])*v-p*(n[1]-a[1]);return _>0&&A<0||_<0&&A>0}function xu(o,n,a){for(const U of a)for(let Q=0;Q<U.length-1;++Q)if((A=[(_=U[Q+1])[0]-(v=U[Q])[0],_[1]-v[1]])[0]*(k=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-A[1]*k[0]!=0&&Ki(h,p,v,_)&&Ki(v,_,h,p))return!0;var h,p,v,_,A,k;return!1}function wu(o,n){for(let a=0;a<o.length;++a)if(!Ba(o[a],n))return!1;for(let a=0;a<o.length-1;++a)if(xu(o[a],o[a+1],n))return!1;return!0}function bu(o,n){for(let a=0;a<n.length;a++)if(wu(o,n[a]))return!0;return!1}function _s(o,n,a){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let _=0;_<o[p].length;_++){const A=Yi(o[p][_],a);Kn(n,A),v.push(A)}h.push(v)}return h}function Eu(o,n,a){const h=[];for(let p=0;p<o.length;p++){const v=_s(o[p],n,a);h.push(v)}return h}function ha(o,n,a,h){if(o[0]<a[0]||o[0]>a[2]){const p=.5*h;let v=o[0]-a[0]>p?-h:a[0]-o[0]>p?h:0;v===0&&(v=o[0]-a[2]>p?-h:a[2]-o[0]>p?h:0),o[0]+=v}Kn(n,o)}function gl(o,n,a,h){const p=Math.pow(2,h.z)*cr,v=[h.x*cr,h.y*cr],_=[];for(const A of o)for(const k of A){const U=[k.x+v[0],k.y+v[1]];ha(U,n,a,p),_.push(U)}return _}function Su(o,n,a,h){const p=Math.pow(2,h.z)*cr,v=[h.x*cr,h.y*cr],_=[];for(const k of o){const U=[];for(const Q of k){const ne=[Q.x+v[0],Q.y+v[1]];Kn(n,ne),U.push(ne)}_.push(U)}if(n[2]-n[0]<=p/2){(A=n)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const k of _)for(const U of k)ha(U,n,a,p)}var A;return _}class Nr{constructor(n,a){this.type=un,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ue(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Nr(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Nr(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Nr(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(h.type==="Polygon"){const A=_s(h.coordinates,v,_),k=gl(a.geometry(),p,v,_);if(!vo(p,v))return!1;for(const U of k)if(!Ba(U,A))return!1}if(h.type==="MultiPolygon"){const A=Eu(h.coordinates,v,_),k=gl(a.geometry(),p,v,_);if(!vo(p,v))return!1;for(const U of k)if(!qn(U,A))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(h.type==="Polygon"){const A=_s(h.coordinates,v,_),k=Su(a.geometry(),p,v,_);if(!vo(p,v))return!1;for(const U of k)if(!wu(U,A))return!1}if(h.type==="MultiPolygon"){const A=Eu(h.coordinates,v,_),k=Su(a.geometry(),p,v,_);if(!vo(p,v))return!1;for(const U of k)if(!bu(U,A))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function xs(o){if(o instanceof wn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Nr)return!1;let n=!0;return o.eachChild(a=>{n&&!xs(a)&&(n=!1)}),n}function ja(o){if(o instanceof wn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(a=>{n&&!ja(a)&&(n=!1)}),n}function Da(o,n){if(o instanceof wn&&n.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!Da(h,n)&&(a=!1)}),a}class Na{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=n[1];return a.scope.has(h)?new Na(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ws{constructor(n,a=[],h,p=new Tn,v=[]){this.registry=n,this.path=a,this.key=a.map(_=>`[${_}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h}parse(n,a,h,p,v={}){return a?this.concat(a,h,p)._parse(n,v):this._parse(n,v)}_parse(n,a){function h(p,v,_){return _==="assert"?new It(v,[p]):_==="coerce"?new vn(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const A=this.expectedType,k=_.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||k.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string"){if(this.checkSubtype(A,k))return null}else _=h(_,A,a.typeAnnotation||"coerce");else _=h(_,A,a.typeAnnotation||"assert")}if(!(_ instanceof mt)&&_.type.kind!=="resolvedImage"&&bs(_)){const A=new xn;try{_=new mt(_.type,_.evaluate(A))}catch(k){return this.error(k.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new ws(this.registry,p,a||null,v,this.errors)}error(n,...a){const h=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new $t(h,n))}checkSubtype(n,a){const h=Gt(n,a);return h&&this.error(h),h}}function bs(o){if(o instanceof Na)return bs(o.boundExpression);if(o instanceof wn&&o.name==="error"||o instanceof Qn||o instanceof Nr)return!1;const n=o instanceof vn||o instanceof It;let a=!0;return o.eachChild(h=>{a=n?a&&bs(h):a&&h instanceof mt}),!!a&&xs(o)&&Da(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _o(o,n){const a=o.length-1;let h,p,v=0,_=a,A=0;for(;v<=_;)if(A=Math.floor((v+_)/2),h=o[A],p=o[A+1],h<=n){if(A===a||n<p)return A;v=A+1}else{if(!(h>n))throw new ot("Input is not a number.");_=A-1}return 0}class fa{constructor(n,a,h){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(n[1],1,dt);if(!h)return null;const p=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let _=1;_<n.length;_+=2){const A=_===1?-1/0:n[_],k=n[_+1],U=_,Q=_+1;if(typeof A!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(p.length&&p[p.length-1][0]>=A)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const ne=a.parse(k,Q,v);if(!ne)return null;v=v||ne.type,p.push([A,ne])}return new fa(v,h,p)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return h[0].evaluate(n);const v=a.length;return p>=a[v-1]?h[v-1].evaluate(n):h[_o(a,p)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}function nr(o,n,a){return o*(1-a)+n*a}var Es=Object.freeze({__proto__:null,number:nr,color:function(o,n,a){return new J(nr(o.r,n.r,a),nr(o.g,n.g,a),nr(o.b,n.b,a),nr(o.a,n.a,a))},array:function(o,n,a){return o.map((h,p)=>nr(h,n[p],a))}});const xo=.95047,yl=1.08883,Tu=4/29,vl=6/29,_l=3*vl*vl,xl=Math.PI/180,Qc=180/Math.PI;function wl(o){return o>.008856451679035631?Math.pow(o,1/3):o/_l+Tu}function bl(o){return o>vl?o*o*o:_l*(o-Tu)}function Ua(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function El(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Au(o){const n=El(o.r),a=El(o.g),h=El(o.b),p=wl((.4124564*n+.3575761*a+.1804375*h)/xo),v=wl((.2126729*n+.7151522*a+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-wl((.0193339*n+.119192*a+.9503041*h)/yl)),alpha:o.a}}function Iu(o){let n=(o.l+16)/116,a=isNaN(o.a)?n:n+o.a/500,h=isNaN(o.b)?n:n-o.b/200;return n=1*bl(n),a=xo*bl(a),h=yl*bl(h),new J(Ua(3.2404542*a-1.5371385*n-.4985314*h),Ua(-.969266*a+1.8760108*n+.041556*h),Ua(.0556434*a-.2040259*n+1.0572252*h),o.alpha)}function Bn(o,n,a){const h=n-o;return o+a*(h>180||h<-180?h-360*Math.round(h/360):h)}const da={forward:Au,reverse:Iu,interpolate:function(o,n,a){return{l:nr(o.l,n.l,a),a:nr(o.a,n.a,a),b:nr(o.b,n.b,a),alpha:nr(o.alpha,n.alpha,a)}}},$a={forward:function(o){const{l:n,a,b:h}=Au(o),p=Math.atan2(h,a)*Qc;return{h:p<0?p+360:p,c:Math.sqrt(a*a+h*h),l:n,alpha:o.a}},reverse:function(o){const n=o.h*xl,a=o.c;return Iu({l:o.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:o.alpha})},interpolate:function(o,n,a){return{h:Bn(o.h,n.h,a),c:nr(o.c,n.c,a),l:nr(o.l,n.l,a),alpha:nr(o.alpha,n.alpha,a)}}};var Sl=Object.freeze({__proto__:null,lab:da,hcl:$a});class oi{constructor(n,a,h,p,v){this.type=n,this.operator=a,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[_,A]of v)this.labels.push(_),this.outputs.push(A)}static interpolationFactor(n,a,h,p){let v=0;if(n.name==="exponential")v=Tl(a,n.base,h,p);else if(n.name==="linear")v=Tl(a,1,h,p);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new w(_[0],_[1],_[2],_[3]).solve(Tl(a,1,h,p))}return v}static parse(n,a){let[h,p,v,..._]=n;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const U=p[1];if(typeof U!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:U}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const U=p.slice(1);if(U.length!==4||U.some(Q=>typeof Q!="number"||Q<0||Q>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:U}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,dt),!v)return null;const A=[];let k=null;h==="interpolate-hcl"||h==="interpolate-lab"?k=Tr:a.expectedType&&a.expectedType.kind!=="value"&&(k=a.expectedType);for(let U=0;U<_.length;U+=2){const Q=_[U],ne=_[U+1],le=U+3,pe=U+4;if(typeof Q!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(A.length&&A[A.length-1][0]>=Q)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const _e=a.parse(ne,pe,k);if(!_e)return null;k=k||_e.type,A.push([Q,_e])}return k.kind==="number"||k.kind==="color"||k.kind==="array"&&k.itemType.kind==="number"&&typeof k.N=="number"?new oi(k,h,p,v,A):a.error(`Type ${Vt(k)} is not interpolatable.`)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return h[0].evaluate(n);const v=a.length;if(p>=a[v-1])return h[v-1].evaluate(n);const _=_o(a,p),A=oi.interpolationFactor(this.interpolation,p,a[_],a[_+1]),k=h[_].evaluate(n),U=h[_+1].evaluate(n);return this.operator==="interpolate"?Es[this.type.kind.toLowerCase()](k,U,A):this.operator==="interpolate-hcl"?$a.reverse($a.interpolate($a.forward(k),$a.forward(U),A)):da.reverse(da.interpolate(da.forward(k),da.forward(U),A))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let h=0;h<this.labels.length;h++)a.push(this.labels[h],this.outputs[h].serialize());return a}}function Tl(o,n,a,h){const p=h-a,v=o-a;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class Va{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let h=null;const p=a.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const A of n.slice(1)){const k=a.parse(A,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!k)return null;h=h||k.type,v.push(k)}const _=p&&v.some(A=>Gt(p,A.type));return new Va(_?cn:h,v)}evaluate(n){let a,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Ve&&!h.available&&(a||(a=h.name),h=null,p===this.args.length&&(h=a)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}class Ss{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return a.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const A=a.parse(n[v+1],v+1);if(!A)return null;h.push([_,A])}const p=a.parse(n[n.length-1],n.length-1,a.expectedType,h);return p?new Ss(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,h]of this.bindings)n.push(a,h.serialize());return n.push(this.result.serialize()),n}}class Al{constructor(n,a,h){this.type=n,this.index=a,this.input=h}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,dt),p=a.parse(n[2],2,jr(a.expectedType||cn));return h&&p?new Al(p.type.itemType,h,p):null}evaluate(n){const a=this.index.evaluate(n),h=this.input.evaluate(n);if(a<0)throw new ot(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new ot(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new ot(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Il{constructor(n,a){this.type=un,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,cn),p=a.parse(n[2],2,cn);return h&&p?An(h.type,[un,Lt,dt,pn,cn])?new Il(h,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(h.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!zn(a,["boolean","string","number","null"]))throw new ot(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(Ge(a))} instead.`);if(!zn(h,["string","array"]))throw new ot(`Expected second argument to be of type array or string, but found ${Vt(Ge(h))} instead.`);return h.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ts{constructor(n,a,h){this.type=dt,this.needle=n,this.haystack=a,this.fromIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,cn),p=a.parse(n[2],2,cn);if(!h||!p)return null;if(!An(h.type,[un,Lt,dt,pn,cn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,dt);return v?new Ts(h,p,v):null}return new Ts(h,p)}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!zn(a,["boolean","string","number","null"]))throw new ot(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(Ge(a))} instead.`);if(!zn(h,["string","array"]))throw new ot(`Expected second argument to be of type array or string, but found ${Vt(Ge(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(a,p)}return h.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class As{constructor(n,a,h,p,v,_){this.inputType=n,this.type=a,this.input=h,this.cases=p,this.outputs=v,this.otherwise=_}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let h,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const v={},_=[];for(let U=2;U<n.length-1;U+=2){let Q=n[U];const ne=n[U+1];Array.isArray(Q)||(Q=[Q]);const le=a.concat(U);if(Q.length===0)return le.error("Expected at least one branch label.");for(const _e of Q){if(typeof _e!="number"&&typeof _e!="string")return le.error("Branch labels must be numbers or strings.");if(typeof _e=="number"&&Math.abs(_e)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _e=="number"&&Math.floor(_e)!==_e)return le.error("Numeric branch labels must be integer values.");if(h){if(le.checkSubtype(h,Ge(_e)))return null}else h=Ge(_e);if(v[String(_e)]!==void 0)return le.error("Branch labels must be unique.");v[String(_e)]=_.length}const pe=a.parse(ne,U,p);if(!pe)return null;p=p||pe.type,_.push(pe)}const A=a.parse(n[1],1,cn);if(!A)return null;const k=a.parse(n[n.length-1],n.length-1,p);return k?A.type.kind!=="value"&&a.concat(1).checkSubtype(h,A.type)?null:new As(h,p,A,v,_,k):null}evaluate(n){const a=this.input.evaluate(n);return(Ge(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),h=[],p={};for(const _ of a){const A=p[this.cases[_]];A===void 0?(p[this.cases[_]]=h.length,h.push([this.cases[_],[_]])):h[A][1].push(_)}const v=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,A]of h)n.push(A.length===1?v(A[0]):A.map(v)),n.push(this.outputs[_].serialize());return n.push(this.otherwise.serialize()),n}}class Cl{constructor(n,a,h){this.type=n,this.branches=a,this.otherwise=h}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const p=[];for(let _=1;_<n.length-1;_+=2){const A=a.parse(n[_],_,un);if(!A)return null;const k=a.parse(n[_+1],_+1,h);if(!k)return null;p.push([A,k]),h=h||k.type}const v=a.parse(n[n.length-1],n.length-1,h);return v?new Cl(h,p,v):null}evaluate(n){for(const[a,h]of this.branches)if(a.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,h]of this.branches)n(a),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}class pa{constructor(n,a,h,p){this.type=n,this.input=a,this.beginIndex=h,this.endIndex=p}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,cn),p=a.parse(n[2],2,dt);if(!h||!p)return null;if(!An(h.type,[jr(cn),Lt,cn]))return a.error(`Expected first argument to be of type array or string, but found ${Vt(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,dt);return v?new pa(h.type,h,p,v):null}return new pa(h.type,h,p)}evaluate(n){const a=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!zn(a,["string","array"]))throw new ot(`Expected first argument to be of type array or string, but found ${Vt(Ge(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return a.slice(h,p)}return a.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Cu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Pu(o,n,a,h){return h.compare(n,a)===0}function ma(o,n,a){const h=o!=="=="&&o!=="!=";return class lS{constructor(v,_,A){this.type=un,this.lhs=v,this.rhs=_,this.collator=A,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const A=v[0];let k=_.parse(v[1],1,cn);if(!k)return null;if(!Cu(A,k.type))return _.concat(1).error(`"${A}" comparisons are not supported for type '${Vt(k.type)}'.`);let U=_.parse(v[2],2,cn);if(!U)return null;if(!Cu(A,U.type))return _.concat(2).error(`"${A}" comparisons are not supported for type '${Vt(U.type)}'.`);if(k.type.kind!==U.type.kind&&k.type.kind!=="value"&&U.type.kind!=="value")return _.error(`Cannot compare types '${Vt(k.type)}' and '${Vt(U.type)}'.`);h&&(k.type.kind==="value"&&U.type.kind!=="value"?k=new It(U.type,[k]):k.type.kind!=="value"&&U.type.kind==="value"&&(U=new It(k.type,[U])));let Q=null;if(v.length===4){if(k.type.kind!=="string"&&U.type.kind!=="string"&&k.type.kind!=="value"&&U.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(Q=_.parse(v[3],3,er),!Q)return null}return new lS(k,U,Q)}evaluate(v){const _=this.lhs.evaluate(v),A=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const k=Ge(_),U=Ge(A);if(k.kind!==U.kind||k.kind!=="string"&&k.kind!=="number")throw new ot(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${k.kind}, ${U.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const k=Ge(_),U=Ge(A);if(k.kind!=="string"||U.kind!=="string")return n(v,_,A)}return this.collator?a(v,_,A,this.collator.evaluate(v)):n(v,_,A)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[o];return this.eachChild(_=>{v.push(_.serialize())}),v}}}const eh=ma("==",function(o,n,a){return n===a},Pu),th=ma("!=",function(o,n,a){return n!==a},function(o,n,a,h){return!Pu(0,n,a,h)}),nh=ma("<",function(o,n,a){return n<a},function(o,n,a,h){return h.compare(n,a)<0}),ku=ma(">",function(o,n,a){return n>a},function(o,n,a,h){return h.compare(n,a)>0}),Pl=ma("<=",function(o,n,a){return n<=a},function(o,n,a,h){return h.compare(n,a)<=0}),rh=ma(">=",function(o,n,a){return n>=a},function(o,n,a,h){return h.compare(n,a)>=0});class kl{constructor(n,a,h,p,v){this.type=Lt,this.number=n,this.locale=a,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const h=a.parse(n[1],1,dt);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=a.parse(p.locale,1,Lt),!v))return null;let _=null;if(p.currency&&(_=a.parse(p.currency,1,Lt),!_))return null;let A=null;if(p["min-fraction-digits"]&&(A=a.parse(p["min-fraction-digits"],1,dt),!A))return null;let k=null;return p["max-fraction-digits"]&&(k=a.parse(p["max-fraction-digits"],1,dt),!k)?null:new kl(h,v,_,A,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Ml{constructor(n){this.type=dt,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=a.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Vt(h.type)} instead.`):new Ml(h):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new ot(`Expected value to be of type string or array, but found ${Vt(Ge(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}const ga={"==":eh,"!=":th,">":ku,"<":nh,">=":rh,"<=":Pl,array:It,at:Al,boolean:It,case:Cl,coalesce:Va,collator:Qn,format:jt,image:tn,in:Il,"index-of":Ts,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:Ml,let:Ss,literal:mt,match:As,number:It,"number-format":kl,object:It,slice:pa,step:fa,string:It,"to-boolean":vn,"to-color":vn,"to-number":vn,"to-string":vn,var:Na,within:Nr};function zl(o,[n,a,h,p]){n=n.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,_=Ne(n,a,h,v);if(_)throw new ot(_);return new J(n/255*v,a/255*v,h/255*v,v)}function Mu(o,n){return o in n}function Ol(o,n){const a=n[o];return a===void 0?null:a}function Do(o){return{type:o}}function zu(o){return{result:"success",value:o}}function ro(o){return{result:"error",value:o}}function No(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Uo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Is(o){return!!o.expression&&o.expression.interpolated}function kn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function hr(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ih(o){return o}function jn(o,n){const a=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Is(n)?"exponential":"interval");if(a&&((o=De({},o)).stops&&(o.stops=o.stops.map(U=>[U[0],J.parse(U[1])])),o.default=J.parse(o.default?o.default:n.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!Sl[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let _,A,k;if(v==="exponential")_=wo;else if(v==="interval")_=fr;else if(v==="categorical"){_=rr,A=Object.create(null);for(const U of o.stops)A[U[0]]=U[1];k=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);_=Ou}if(h){const U={},Q=[];for(let pe=0;pe<o.stops.length;pe++){const _e=o.stops[pe],Re=_e[0].zoom;U[Re]===void 0&&(U[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},Q.push(Re)),U[Re].stops.push([_e[0].value,_e[1]])}const ne=[];for(const pe of Q)ne.push([U[pe].zoom,jn(U[pe],n)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:oi.interpolationFactor.bind(void 0,le),zoomStops:ne.map(pe=>pe[0]),evaluate:({zoom:pe},_e)=>wo({stops:ne,base:o.base},n,pe).evaluate(pe,_e)}}if(p){const U=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:oi.interpolationFactor.bind(void 0,U),zoomStops:o.stops.map(Q=>Q[0]),evaluate:({zoom:Q})=>_(o,n,Q,A,k)}}return{kind:"source",evaluate(U,Q){const ne=Q&&Q.properties?Q.properties[o.property]:void 0;return ne===void 0?$o(o.default,n.default):_(o,n,ne,A,k)}}}function $o(o,n,a){return o!==void 0?o:n!==void 0?n:a!==void 0?a:void 0}function rr(o,n,a,h,p){return $o(typeof a===p?h[a]:void 0,o.default,n.default)}function fr(o,n,a){if(kn(a)!=="number")return $o(o.default,n.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const p=_o(o.stops.map(v=>v[0]),a);return o.stops[p][1]}function wo(o,n,a){const h=o.base!==void 0?o.base:1;if(kn(a)!=="number")return $o(o.default,n.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const v=_o(o.stops.map(Q=>Q[0]),a),_=function(Q,ne,le,pe){const _e=pe-le,Re=Q-le;return _e===0?0:ne===1?Re/_e:(Math.pow(ne,Re)-1)/(Math.pow(ne,_e)-1)}(a,h,o.stops[v][0],o.stops[v+1][0]),A=o.stops[v][1],k=o.stops[v+1][1];let U=Es[n.type]||ih;if(o.colorSpace&&o.colorSpace!=="rgb"){const Q=Sl[o.colorSpace];U=(ne,le)=>Q.reverse(Q.interpolate(Q.forward(ne),Q.forward(le),_))}return typeof A.evaluate=="function"?{evaluate(...Q){const ne=A.evaluate.apply(void 0,Q),le=k.evaluate.apply(void 0,Q);if(ne!==void 0&&le!==void 0)return U(ne,le,_)}}:U(A,k,_)}function Ou(o,n,a){return n.type==="color"?a=J.parse(a):n.type==="formatted"?a=Me.fromString(a.toString()):n.type==="resolvedImage"?a=Ve.fromString(a.toString()):kn(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),$o(a,o.default,n.default)}wn.register(ga,{error:[{kind:"error"},[Lt],(o,[n])=>{throw new ot(n.evaluate(o))}],typeof:[Lt,[cn],(o,[n])=>Vt(Ge(n.evaluate(o)))],"to-rgba":[jr(dt,4),[Tr],(o,[n])=>n.evaluate(o).toArray()],rgb:[Tr,[dt,dt,dt],zl],rgba:[Tr,[dt,dt,dt,dt],zl],has:{type:un,overloads:[[[Lt],(o,[n])=>Mu(n.evaluate(o),o.properties())],[[Lt,Hr],(o,[n,a])=>Mu(n.evaluate(o),a.evaluate(o))]]},get:{type:cn,overloads:[[[Lt],(o,[n])=>Ol(n.evaluate(o),o.properties())],[[Lt,Hr],(o,[n,a])=>Ol(n.evaluate(o),a.evaluate(o))]]},"feature-state":[cn,[Lt],(o,[n])=>Ol(n.evaluate(o),o.featureState||{})],properties:[Hr,[],o=>o.properties()],"geometry-type":[Lt,[],o=>o.geometryType()],id:[cn,[],o=>o.id()],zoom:[dt,[],o=>o.globals.zoom],"heatmap-density":[dt,[],o=>o.globals.heatmapDensity||0],"line-progress":[dt,[],o=>o.globals.lineProgress||0],accumulated:[cn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[dt,Do(dt),(o,n)=>{let a=0;for(const h of n)a+=h.evaluate(o);return a}],"*":[dt,Do(dt),(o,n)=>{let a=1;for(const h of n)a*=h.evaluate(o);return a}],"-":{type:dt,overloads:[[[dt,dt],(o,[n,a])=>n.evaluate(o)-a.evaluate(o)],[[dt],(o,[n])=>-n.evaluate(o)]]},"/":[dt,[dt,dt],(o,[n,a])=>n.evaluate(o)/a.evaluate(o)],"%":[dt,[dt,dt],(o,[n,a])=>n.evaluate(o)%a.evaluate(o)],ln2:[dt,[],()=>Math.LN2],pi:[dt,[],()=>Math.PI],e:[dt,[],()=>Math.E],"^":[dt,[dt,dt],(o,[n,a])=>Math.pow(n.evaluate(o),a.evaluate(o))],sqrt:[dt,[dt],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[dt,[dt],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[dt,[dt],(o,[n])=>Math.log(n.evaluate(o))],log2:[dt,[dt],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[dt,[dt],(o,[n])=>Math.sin(n.evaluate(o))],cos:[dt,[dt],(o,[n])=>Math.cos(n.evaluate(o))],tan:[dt,[dt],(o,[n])=>Math.tan(n.evaluate(o))],asin:[dt,[dt],(o,[n])=>Math.asin(n.evaluate(o))],acos:[dt,[dt],(o,[n])=>Math.acos(n.evaluate(o))],atan:[dt,[dt],(o,[n])=>Math.atan(n.evaluate(o))],min:[dt,Do(dt),(o,n)=>Math.min(...n.map(a=>a.evaluate(o)))],max:[dt,Do(dt),(o,n)=>Math.max(...n.map(a=>a.evaluate(o)))],abs:[dt,[dt],(o,[n])=>Math.abs(n.evaluate(o))],round:[dt,[dt],(o,[n])=>{const a=n.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[dt,[dt],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[dt,[dt],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[un,[Lt,cn],(o,[n,a])=>o.properties()[n.value]===a.value],"filter-id-==":[un,[cn],(o,[n])=>o.id()===n.value],"filter-type-==":[un,[Lt],(o,[n])=>o.geometryType()===n.value],"filter-<":[un,[Lt,cn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h<p}],"filter-id-<":[un,[cn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<h}],"filter->":[un,[Lt,cn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h>p}],"filter-id->":[un,[cn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>h}],"filter-<=":[un,[Lt,cn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[un,[cn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<=h}],"filter->=":[un,[Lt,cn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[un,[cn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>=h}],"filter-has":[un,[cn],(o,[n])=>n.value in o.properties()],"filter-has-id":[un,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[un,[jr(Lt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[un,[jr(cn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[un,[Lt,jr(cn)],(o,[n,a])=>a.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[un,[Lt,jr(cn)],(o,[n,a])=>function(h,p,v,_){for(;v<=_;){const A=v+_>>1;if(p[A]===h)return!0;p[A]>h?_=A-1:v=A+1}return!1}(o.properties()[n.value],a.value,0,a.value.length-1)],all:{type:un,overloads:[[[un,un],(o,[n,a])=>n.evaluate(o)&&a.evaluate(o)],[Do(un),(o,n)=>{for(const a of n)if(!a.evaluate(o))return!1;return!0}]]},any:{type:un,overloads:[[[un,un],(o,[n,a])=>n.evaluate(o)||a.evaluate(o)],[Do(un),(o,n)=>{for(const a of n)if(a.evaluate(o))return!0;return!1}]]},"!":[un,[un],(o,[n])=>!n.evaluate(o)],"is-supported-script":[un,[Lt],(o,[n])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(n.evaluate(o))}],upcase:[Lt,[Lt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Lt,[Lt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Lt,Do(cn),(o,n)=>n.map(a=>st(a.evaluate(o))).join("")],"resolved-locale":[Lt,[er],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Ll{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new xn,this._defaultValue=a?function(h){return h.type==="color"&&hr(h.default)?new J(0,0,0,0):h.type==="color"?J.parse(h.default)||null:h.default===void 0?null:h.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,h,p,v,_){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,a,h,p,v,_){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new ot(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console!="undefined"&&console.warn(A.message)),this._defaultValue}}}function Vo(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in ga}function Ga(o,n){const a=new ws(ga,[],n?function(p){const v={color:Tr,string:Lt,number:dt,enum:Lt,boolean:un,formatted:pi,resolvedImage:gr};return p.type==="array"?jr(v[p.value]||cn,p.length):v[p.type]}(n):void 0),h=a.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?zu(new Ll(h,n)):ro(a.errors)}class Cs{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!ja(a.expression)}evaluateWithoutErrorHandling(n,a,h,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,p,v,_)}evaluate(n,a,h,p,v,_){return this._styleExpression.evaluate(n,a,h,p,v,_)}}class Ps{constructor(n,a,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!ja(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,a,h,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,p,v,_)}evaluate(n,a,h,p,v,_){return this._styleExpression.evaluate(n,a,h,p,v,_)}interpolationFactor(n,a,h){return this.interpolationType?oi.interpolationFactor(this.interpolationType,n,a,h):0}}function Rl(o,n){const a=Ga(o,n);if(a.result==="error")return a;const h=a.value.expression,p=xs(h);if(!p&&!No(n))return ro([new $t("","data expressions not supported")]);const v=Da(h,["zoom"]);if(!v&&!Uo(n))return ro([new $t("","zoom expressions not supported")]);const _=mi(h);return _||v?_ instanceof $t?ro([_]):_ instanceof oi&&!Is(n)?ro([new $t("",'"interpolate" expressions cannot be used with this property')]):zu(_?new Ps(p?"camera":"composite",a.value,_.labels,_ instanceof oi?_.interpolation:void 0):new Cs(p?"constant":"source",a.value)):ro([new $t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bo{constructor(n,a){this._parameters=n,this._specification=a,De(this,jn(this._parameters,this._specification))}static deserialize(n){return new bo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function mi(o){let n=null;if(o instanceof Ss)n=mi(o.result);else if(o instanceof Va){for(const a of o.args)if(n=mi(a),n)break}else(o instanceof fa||o instanceof oi)&&o.input instanceof wn&&o.input.name==="zoom"&&(n=o);return n instanceof $t||o.eachChild(a=>{const h=mi(a);h instanceof $t?n=h:!n&&h?n=new $t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new $t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ci(o){const n=o.key,a=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,_=o.styleSpec;let A=[];const k=kn(a);if(k!=="object")return[new z(n,a,`object expected, ${k} found`)];for(const U in a){const Q=U.split(".")[0],ne=h[Q]||h["*"];let le;if(p[Q])le=p[Q];else if(h[Q])le=ir;else if(p["*"])le=p["*"];else{if(!h["*"]){A.push(new z(n,a[U],`unknown property "${U}"`));continue}le=ir}A=A.concat(le({key:(n&&`${n}.`)+U,value:a[U],valueSpec:ne,style:v,styleSpec:_,object:a,objectKey:U},a))}for(const U in h)p[U]||h[U].required&&h[U].default===void 0&&a[U]===void 0&&A.push(new z(n,a,`missing required property "${U}"`));return A}function Fl(o){const n=o.value,a=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,_=o.arrayElementValidator||ir;if(kn(n)!=="array")return[new z(v,n,`array expected, ${kn(n)} found`)];if(a.length&&n.length!==a.length)return[new z(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new z(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let A={type:a.value,values:a.values};p.$version<7&&(A.function=a.function),kn(a.value)==="object"&&(A=a.value);let k=[];for(let U=0;U<n.length;U++)k=k.concat(_({array:n,arrayIndex:U,value:n[U],valueSpec:A,style:h,styleSpec:p,key:`${v}[${U}]`}));return k}function Wa(o){const n=o.key,a=o.value,h=o.valueSpec;let p=kn(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new z(n,a,`number expected, ${p} found`)]:"minimum"in h&&a<h.minimum?[new z(n,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new z(n,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function Lu(o){const n=o.valueSpec,a=Xe(o.value.type);let h,p,v,_={};const A=a!=="categorical"&&o.value.property===void 0,k=!A,U=kn(o.value.stops)==="array"&&kn(o.value.stops[0])==="array"&&kn(o.value.stops[0][0])==="object",Q=Ci({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(pe){if(a==="identity")return[new z(pe.key,pe.value,'identity function may not have a "stops" property')];let _e=[];const Re=pe.value;return _e=_e.concat(Fl({key:pe.key,value:Re,valueSpec:pe.valueSpec,style:pe.style,styleSpec:pe.styleSpec,arrayElementValidator:ne})),kn(Re)==="array"&&Re.length===0&&_e.push(new z(pe.key,Re,"array must have at least one stop")),_e},default:function(pe){return ir({key:pe.key,value:pe.value,valueSpec:n,style:pe.style,styleSpec:pe.styleSpec})}}});return a==="identity"&&A&&Q.push(new z(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||Q.push(new z(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Is(o.valueSpec)&&Q.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(k&&!No(o.valueSpec)?Q.push(new z(o.key,o.value,"property functions not supported")):A&&!Uo(o.valueSpec)&&Q.push(new z(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!U||o.value.property!==void 0||Q.push(new z(o.key,o.value,'"property" property is required')),Q;function ne(pe){let _e=[];const Re=pe.value,je=pe.key;if(kn(Re)!=="array")return[new z(je,Re,`array expected, ${kn(Re)} found`)];if(Re.length!==2)return[new z(je,Re,`array length 2 expected, length ${Re.length} found`)];if(U){if(kn(Re[0])!=="object")return[new z(je,Re,`object expected, ${kn(Re[0])} found`)];if(Re[0].zoom===void 0)return[new z(je,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new z(je,Re,"object stop key must have value")];if(v&&v>Xe(Re[0].zoom))return[new z(je,Re[0].zoom,"stop zoom values must appear in ascending order")];Xe(Re[0].zoom)!==v&&(v=Xe(Re[0].zoom),p=void 0,_={}),_e=_e.concat(Ci({key:`${je}[0]`,value:Re[0],valueSpec:{zoom:{}},style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{zoom:Wa,value:le}}))}else _e=_e.concat(le({key:`${je}[0]`,value:Re[0],valueSpec:{},style:pe.style,styleSpec:pe.styleSpec},Re));return Vo(Qe(Re[1]))?_e.concat([new z(`${je}[1]`,Re[1],"expressions are not allowed in function stops.")]):_e.concat(ir({key:`${je}[1]`,value:Re[1],valueSpec:n,style:pe.style,styleSpec:pe.styleSpec}))}function le(pe,_e){const Re=kn(pe.value),je=Xe(pe.value),He=pe.value!==null?pe.value:_e;if(h){if(Re!==h)return[new z(pe.key,He,`${Re} stop domain type must match previous stop domain type ${h}`)]}else h=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean")return[new z(pe.key,He,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&a!=="categorical"){let rt=`number expected, ${Re} found`;return No(n)&&a===void 0&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(pe.key,He,rt)]}return a!=="categorical"||Re!=="number"||isFinite(je)&&Math.floor(je)===je?a!=="categorical"&&Re==="number"&&p!==void 0&&je<p?[new z(pe.key,He,"stop domain values must appear in ascending order")]:(p=je,a==="categorical"&&je in _?[new z(pe.key,He,"stop domain values must be unique")]:(_[je]=!0,[])):[new z(pe.key,He,`integer expected, found ${je}`)]}}function Pi(o){const n=(o.expressionContext==="property"?Rl:Ga)(Qe(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const a=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ja(a))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ja(a))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Da(a,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!xs(a))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function io(o){const n=o.key,a=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Xe(a))===-1&&p.push(new z(n,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(Xe(a))===-1&&p.push(new z(n,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function Ur(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Ur(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Go={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ya(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ur(o)||(o=Wo(o));const n=Ga(o,Go);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,p)=>n.value.evaluate(a,h,{},p),needGeometry:Za(o)}}function ks(o,n){return o<n?-1:o>n?1:0}function Za(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Za(o[n]))return!0;return!1}function Wo(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Zo(o[1],o[2],"=="):n==="!="?Ho(Zo(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Zo(o[1],o[2],n):n==="any"?(a=o.slice(1),["any"].concat(a.map(Wo))):n==="all"?["all"].concat(o.slice(1).map(Wo)):n==="none"?["all"].concat(o.slice(1).map(Wo).map(Ho)):n==="in"?gi(o[1],o.slice(2)):n==="!in"?Ho(gi(o[1],o.slice(2))):n==="has"?oo(o[1]):n==="!has"?Ho(oo(o[1])):n!=="within"||o;var a}function Zo(o,n,a){switch(o){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,o,n]}}function gi(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",o,["literal",n.sort(ks)]]:["filter-in-small",o,["literal",n]]}}function oo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ho(o){return["!",o]}function Eo(o){return Ur(Qe(o.value))?Pi(De({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xo(o)}function Xo(o){const n=o.value,a=o.key;if(kn(n)!=="array")return[new z(a,n,`array expected, ${kn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new z(a,n,"filter array must have at least 1 element")];switch(v=v.concat(io({key:`${a}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Xe(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Xe(n[1])==="$type"&&v.push(new z(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new z(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=kn(n[1]),p!=="string"&&v.push(new z(`${a}[1]`,n[1],`string expected, ${p} found`)));for(let _=2;_<n.length;_++)p=kn(n[_]),Xe(n[1])==="$type"?v=v.concat(io({key:`${a}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new z(`${a}[${_}]`,n[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(Xo({key:`${a}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=kn(n[1]),n.length!==2?v.push(new z(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new z(`${a}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=kn(n[1]),n.length!==2?v.push(new z(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new z(`${a}[1]`,n[1],`object expected, ${p} found`))}return v}function Bl(o,n){const a=o.key,h=o.style,p=o.styleSpec,v=o.value,_=o.objectKey,A=p[`${n}_${o.layerType}`];if(!A)return[];const k=_.match(/^(.*)-transition$/);if(n==="paint"&&k&&A[k[1]]&&A[k[1]].transition)return ir({key:a,value:v,valueSpec:p.transition,style:h,styleSpec:p});const U=o.valueSpec||A[_];if(!U)return[new z(a,v,`unknown property "${_}"`)];let Q;if(kn(v)==="string"&&No(U)&&!U.tokens&&(Q=/^{([^}]+)}$/.exec(v)))return[new z(a,v,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&ne.push(new z(a,v,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&hr(Qe(v))&&Xe(v.type)==="identity"&&ne.push(new z(a,v,'"text-font" does not support identity functions'))),ne.concat(ir({key:o.key,value:v,valueSpec:U,style:h,styleSpec:p,expressionContext:"property",propertyType:n,propertyKey:_}))}function va(o){return Bl(o,"paint")}function jl(o){return Bl(o,"layout")}function Dl(o){let n=[];const a=o.value,h=o.key,p=o.style,v=o.styleSpec;a.type||a.ref||n.push(new z(h,a,'either "type" or "ref" is required'));let _=Xe(a.type);const A=Xe(a.ref);if(a.id){const k=Xe(a.id);for(let U=0;U<o.arrayIndex;U++){const Q=p.layers[U];Xe(Q.id)===k&&n.push(new z(h,a.id,`duplicate layer id "${a.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in a){let k;["type","source","source-layer","filter","layout"].forEach(U=>{U in a&&n.push(new z(h,a[U],`"${U}" is prohibited for ref layers`))}),p.layers.forEach(U=>{Xe(U.id)===A&&(k=U)}),k?k.ref?n.push(new z(h,a.ref,"ref cannot reference another ref layer")):_=Xe(k.type):n.push(new z(h,a.ref,`ref layer "${A}" not found`))}else if(_!=="background")if(a.source){const k=p.sources&&p.sources[a.source],U=k&&Xe(k.type);k?U==="vector"&&_==="raster"?n.push(new z(h,a.source,`layer "${a.id}" requires a raster source`)):U==="raster"&&_!=="raster"?n.push(new z(h,a.source,`layer "${a.id}" requires a vector source`)):U!=="vector"||a["source-layer"]?U==="raster-dem"&&_!=="hillshade"?n.push(new z(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!a.paint||!a.paint["line-gradient"]||U==="geojson"&&k.lineMetrics||n.push(new z(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new z(h,a.source,`source "${a.source}" not found`))}else n.push(new z(h,a,'missing required property "source"'));return n=n.concat(Ci({key:h,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ir({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:Eo,layout:k=>Ci({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":U=>jl(De({layerType:_},U))}}),paint:k=>Ci({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":U=>va(De({layerType:_},U))}})}})),n}function ai(o){const n=o.value,a=o.key,h=kn(n);return h!=="string"?[new z(a,n,`string expected, ${h} found`)]:[]}const Nl={promoteId:function({key:o,value:n}){if(kn(n)==="string")return ai({key:o,value:n});{const a=[];for(const h in n)a.push(...ai({key:`${o}.${h}`,value:n[h]}));return a}}};function Ru(o){const n=o.value,a=o.key,h=o.styleSpec,p=o.style;if(!n.type)return[new z(a,n,'"type" is required')];const v=Xe(n.type);let _;switch(v){case"vector":case"raster":case"raster-dem":return _=Ci({key:a,value:n,valueSpec:h[`source_${v.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Nl}),_;case"geojson":if(_=Ci({key:a,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:Nl}),n.cluster)for(const A in n.clusterProperties){const[k,U]=n.clusterProperties[A],Q=typeof k=="string"?[k,["accumulated"],["get",A]]:k;_.push(...Pi({key:`${a}.${A}.map`,value:U,expressionContext:"cluster-map"})),_.push(...Pi({key:`${a}.${A}.reduce`,value:Q,expressionContext:"cluster-reduce"}))}return _;case"video":return Ci({key:a,value:n,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return Ci({key:a,value:n,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new z(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return io({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:h})}}function _a(o){const n=o.value,a=o.styleSpec,h=a.light,p=o.style;let v=[];const _=kn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new z("light",n,`object expected, ${_} found`)]),v;for(const A in n){const k=A.match(/^(.*)-transition$/);v=v.concat(k&&h[k[1]]&&h[k[1]].transition?ir({key:A,value:n[A],valueSpec:a.transition,style:p,styleSpec:a}):h[A]?ir({key:A,value:n[A],valueSpec:h[A],style:p,styleSpec:a}):[new z(A,n[A],`unknown property "${A}"`)])}return v}const Yo={"*":()=>[],array:Fl,boolean:function(o){const n=o.value,a=o.key,h=kn(n);return h!=="boolean"?[new z(a,n,`boolean expected, ${h} found`)]:[]},number:Wa,color:function(o){const n=o.key,a=o.value,h=kn(a);return h!=="string"?[new z(n,a,`color expected, ${h} found`)]:tr(a)===null?[new z(n,a,`color expected, "${a}" found`)]:[]},constants:we,enum:io,filter:Eo,function:Lu,layer:Dl,object:Ci,source:Ru,light:_a,string:ai,formatted:function(o){return ai(o).length===0?[]:Pi(o)},resolvedImage:function(o){return ai(o).length===0?[]:Pi(o)}};function ir(o){const n=o.value,a=o.valueSpec,h=o.styleSpec;return a.expression&&hr(Xe(n))?Lu(o):a.expression&&Vo(Qe(n))?Pi(o):a.type&&Yo[a.type]?Yo[a.type](o):Ci(De({},o,{valueSpec:a.type?h[a.type]:a}))}function Ha(o){const n=o.value,a=o.key,h=ai(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(a,n,'"glyphs" url must include a "{range}" token'))),h}function So(o,n=T){let a=[];return a=a.concat(ir({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:Ha,"*":()=>[]}})),o.constants&&(a=a.concat(we({key:"constants",value:o.constants,style:o,styleSpec:n}))),j(a)}function j(o){return[].concat(o).sort((n,a)=>n.line-a.line)}function fe(o){return function(...n){return j(o.apply(this,n))}}So.source=fe(Ru),So.light=fe(_a),So.layer=fe(Dl),So.filter=fe(Eo),So.paintProperty=fe(va),So.layoutProperty=fe(jl);const Le=So,nt=Le.light,Pt=Le.paintProperty,Et=Le.layoutProperty;function Wt(o,n){let a=!1;if(n&&n.length)for(const h of n)o.fire(new at(new Error(h.message))),a=!0;return a}class Zt{constructor(n,a,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(a=_[1])+2*(h=_[2]);for(let k=0;k<this.d*this.d;k++){const U=_[3+k],Q=_[3+k+1];p.push(U===Q?null:_.subarray(U,Q))}const A=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],A),this.bboxes=_.subarray(A),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=h,this.scale=a/n,this.uid=0;const v=h/a*n;this.min=-v,this.max=n+v}insert(n,a,h,p,v){this._forEachCell(a,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,h,p,v,_){this.cells[v].push(_)}query(n,a,h,p,v){const _=this.min,A=this.max;if(n<=_&&a<=_&&A<=h&&A<=p&&!v)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,a,h,p,this._queryCell,k,{},v),k}}_queryCell(n,a,h,p,v,_,A,k){const U=this.cells[v];if(U!==null){const Q=this.keys,ne=this.bboxes;for(let le=0;le<U.length;le++){const pe=U[le];if(A[pe]===void 0){const _e=4*pe;(k?k(ne[_e+0],ne[_e+1],ne[_e+2],ne[_e+3]):n<=ne[_e+2]&&a<=ne[_e+3]&&h>=ne[_e+0]&&p>=ne[_e+1])?(A[pe]=!0,_.push(Q[pe])):A[pe]=!1}}}}_forEachCell(n,a,h,p,v,_,A,k){const U=this._convertToCellCoord(n),Q=this._convertToCellCoord(a),ne=this._convertToCellCoord(h),le=this._convertToCellCoord(p);for(let pe=U;pe<=ne;pe++)for(let _e=Q;_e<=le;_e++){const Re=this.d*_e+pe;if((!k||k(this._convertFromCellCoord(pe),this._convertFromCellCoord(_e),this._convertFromCellCoord(pe+1),this._convertFromCellCoord(_e+1)))&&v.call(this,n,a,h,p,Re,_,A,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const p=new Int32Array(a+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=a;for(let _=0;_<n.length;_++){const A=n[_];p[3+_]=v,p.set(A,v),v+=A.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,a){const h=n.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(n){return new Zt(n.buffer)}}const hn={};function _t(o,n,a={}){Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),hn[o]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}_t("Object",Object),_t("TransferableGridIndex",Zt),_t("Color",J),_t("Error",Error),_t("AJAXError",qt),_t("ResolvedImage",Ve),_t("StylePropertyFunction",bo),_t("StyleExpression",Ll,{omit:["_evaluator"]}),_t("ZoomDependentExpression",Ps),_t("ZoomConstantExpression",Cs),_t("CompoundExpression",wn,{omit:["_evaluate"]});for(const o in ga)ga[o]._classRegistryKey||_t(`Expression_${o}`,ga[o]);function Dn(o){return o&&typeof ArrayBuffer!="undefined"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Wn(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Dn(o)||xe(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return n&&n.push(a.buffer),a}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const h of o)a.push(Wn(h,n));return a}if(typeof o=="object"){const a=o.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");const p=a.serialize?a.serialize(o,n):{};if(!a.serialize){for(const v in o){if(!o.hasOwnProperty(v)||hn[h].omit.indexOf(v)>=0)continue;const _=o[v];p[v]=hn[h].shallow.indexOf(v)>=0?_:Wn(_,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Jn(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Dn(o)||xe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Jn);if(typeof o=="object"){const n=o.$name||"Object";if(!hn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=hn[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=hn[n].shallow.indexOf(p)>=0?v:Jn(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Ar{constructor(){this.first=!0}update(n,a){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const xt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ki(o){for(const n of o)if(Ms(n.charCodeAt(0)))return!0;return!1}function ao(o){for(const n of o)if(!To(n.charCodeAt(0)))return!1;return!0}function To(o){return!(xt.Arabic(o)||xt["Arabic Supplement"](o)||xt["Arabic Extended-A"](o)||xt["Arabic Presentation Forms-A"](o)||xt["Arabic Presentation Forms-B"](o))}function Ms(o){return!(o!==746&&o!==747&&(o<4352||!(xt["Bopomofo Extended"](o)||xt.Bopomofo(o)||xt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||xt["CJK Compatibility Ideographs"](o)||xt["CJK Compatibility"](o)||xt["CJK Radicals Supplement"](o)||xt["CJK Strokes"](o)||!(!xt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||xt["CJK Unified Ideographs Extension A"](o)||xt["CJK Unified Ideographs"](o)||xt["Enclosed CJK Letters and Months"](o)||xt["Hangul Compatibility Jamo"](o)||xt["Hangul Jamo Extended-A"](o)||xt["Hangul Jamo Extended-B"](o)||xt["Hangul Jamo"](o)||xt["Hangul Syllables"](o)||xt.Hiragana(o)||xt["Ideographic Description Characters"](o)||xt.Kanbun(o)||xt["Kangxi Radicals"](o)||xt["Katakana Phonetic Extensions"](o)||xt.Katakana(o)&&o!==12540||!(!xt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!xt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||xt["Unified Canadian Aboriginal Syllabics"](o)||xt["Unified Canadian Aboriginal Syllabics Extended"](o)||xt["Vertical Forms"](o)||xt["Yijing Hexagram Symbols"](o)||xt["Yi Syllables"](o)||xt["Yi Radicals"](o))))}function Ko(o){return!(Ms(o)||function(n){return!!(xt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||xt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||xt["Letterlike Symbols"](n)||xt["Number Forms"](n)||xt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||xt["Control Pictures"](n)&&n!==9251||xt["Optical Character Recognition"](n)||xt["Enclosed Alphanumerics"](n)||xt["Geometric Shapes"](n)||xt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||xt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||xt["CJK Symbols and Punctuation"](n)||xt.Katakana(n)||xt["Private Use Area"](n)||xt["CJK Compatibility Forms"](n)||xt["Small Form Variants"](n)||xt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Xa(o){return o>=1424&&o<=2303||xt["Arabic Presentation Forms-A"](o)||xt["Arabic Presentation Forms-B"](o)}function tg(o,n){return!(!n&&Xa(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||xt.Khmer(o))}function ng(o){for(const n of o)if(Xa(n.charCodeAt(0)))return!0;return!1}const oh="deferred",Fu="loading",ah="loaded";let sh=null,yi="unavailable",xa=null;const td=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(yi="error"),sh&&sh(o)};function lh(){uh.fire(new Ke("pluginStateChange",{pluginStatus:yi,pluginURL:xa}))}const uh=new se,zs=function(){return yi},nd=function(){if(yi!==oh||!xa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");yi=Fu,lh(),xa&&_n({url:xa},o=>{o?td(o):(yi=ah,lh())})},vi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>yi===ah||vi.applyArabicShaping!=null,isLoading:()=>yi===Fu,setState(o){yi=o.pluginStatus,xa=o.pluginURL},isParsed:()=>vi.applyArabicShaping!=null&&vi.processBidirectionalText!=null&&vi.processStyledBidirectionalText!=null,getPluginURL:()=>xa};class or{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ar,this.transition={})}isSupportedScript(n){return function(a,h){for(const p of a)if(!tg(p.charCodeAt(0),h))return!1;return!0}(n,vi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class Bu{constructor(n,a){this.property=n,this.value=a,this.expression=function(h,p){if(hr(h))return new bo(h,p);if(Vo(h)){const v=Rl(h,p);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=h;return typeof h=="string"&&p.type==="color"&&(v=J.parse(h)),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,h){return this.property.possiblyEvaluate(this,n,a,h)}}class ch{constructor(n){this.property=n,this.value=new Bu(n,void 0)}transitioned(n,a){return new rd(this.property,this.value,a,ee({},n.transition,this.transition),n.now)}untransitioned(){return new rd(this.property,this.value,null,{},0)}}class hh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return V(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ch(this._values[n].property)),this._values[n].value=new Bu(this._values[n].property,a===null?void 0:V(a))}getTransition(n){return V(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ch(this._values[n].property)),this._values[n].transition=V(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h);const p=this.getTransition(a);p!==void 0&&(n[`${a}-transition`]=p)}return n}transitioned(n,a){const h=new id(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,a._values[p]);return h}untransitioned(){const n=new id(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class rd{constructor(n,a,h,p,v){this.property=n,this.value=a,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,a,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,a,h),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(n,a,h);{const A=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,a,h),v,function(k){if(k<=0)return 0;if(k>=1)return 1;const U=k*k,Q=U*k;return 4*(k<.5?Q:3*(k-U)+Q-.75)}(A))}}return v}}class id{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,h){const p=new ju(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class rg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return V(this._values[n].value)}setValue(n,a){this._values[n]=new Bu(this._values[n].property,a===null?void 0:V(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h)}return n}possiblyEvaluate(n,a,h){const p=new ju(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,h);return p}}class Ao{constructor(n,a,h){this.property=n,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,h,p){return this.property.evaluate(this.value,this.parameters,n,a,h,p)}}class ju{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Xt{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,h){const p=Es[this.specification.type];return p?p(n,a,h):n}}class sn{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,h,p){return new Ao(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},h,p)}:n.expression,a)}interpolate(n,a,h){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Ao(this,{kind:"constant",value:void 0},n.parameters);const p=Es[this.specification.type];return p?new Ao(this,{kind:"constant",value:p(n.value.value,a.value.value,h)},n.parameters):n}evaluate(n,a,h,p,v,_){return n.kind==="constant"?n.value:n.evaluate(a,h,p,v,_)}}class Os extends sn{possiblyEvaluate(n,a,h,p){if(n.value===void 0)return new Ao(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,p),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,A=this._calculate(_,_,_,a);return new Ao(this,{kind:"constant",value:A},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Ao(this,{kind:"constant",value:v},a)}return new Ao(this,n.expression,a)}evaluate(n,a,h,p,v,_){if(n.kind==="source"){const A=n.evaluate(a,h,p,v,_);return this._calculate(A,A,A,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},h,p),n.evaluate({zoom:Math.floor(a.zoom)},h,p),n.evaluate({zoom:Math.floor(a.zoom)+1},h,p),a):n.value}_calculate(n,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Du{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,p);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new or(Math.floor(a.zoom-1),a)),n.expression.evaluate(new or(Math.floor(a.zoom),a)),n.expression.evaluate(new or(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Ul{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,p){return!!n.expression.evaluate(a,null,{},h,p)}interpolate(){return!1}}class _i{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const h=n[a];h.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new Bu(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new ch(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}_t("DataDrivenProperty",sn),_t("DataConstantProperty",Xt),_t("CrossFadedDataDrivenProperty",Os),_t("CrossFadedProperty",Du),_t("ColorRampProperty",Ul);const qo="-transition";class Mi extends se{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new rg(a.layout)),a.paint)){this._transitionablePaint=new hh(a.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ju(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,h={}){a!=null&&this._validate(Et,`layers.${this.id}.layout.${n}`,n,a,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(qo)?this._transitionablePaint.getTransition(n.slice(0,-qo.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,h={}){if(a!=null&&this._validate(Pt,`layers.${this.id}.paint.${n}`,n,a,h))return!1;if(n.endsWith(qo))return this._transitionablePaint.setTransition(n.slice(0,-qo.length),a||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),A=p.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,A,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),G(n,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(n,a,h,p,v={}){return(!v||v.validate!==!1)&&Wt(this,n.call(Le,{key:a,layerType:this.type,objectKey:h,value:p,styleSpec:T,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Ao&&No(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const $l={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Nu{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function vr(o,n=1){let a=0,h=0;return{members:o.map(p=>{const v=$l[p.type].BYTES_PER_ELEMENT,_=a=od(a,Math.max(n,v)),A=p.components||1;return h=Math.max(h,v),a+=v*A,{name:p.name,type:p.type,components:A,offset:_}}),size:od(a,Math.max(h,n)),alignment:n}}function od(o,n){return Math.ceil(o/n)*n}class Vl extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.int16[p+0]=a,this.int16[p+1]=h,n}}Vl.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",Vl);class Uu extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const _=4*n;return this.int16[_+0]=a,this.int16[_+1]=h,this.int16[_+2]=p,this.int16[_+3]=v,n}}Uu.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",Uu);class Gl extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,p,v,_)}emplace(n,a,h,p,v,_,A){const k=6*n;return this.int16[k+0]=a,this.int16[k+1]=h,this.int16[k+2]=p,this.int16[k+3]=v,this.int16[k+4]=_,this.int16[k+5]=A,n}}Gl.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",Gl);class m extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,p,v,_)}emplace(n,a,h,p,v,_,A){const k=4*n,U=8*n;return this.int16[k+0]=a,this.int16[k+1]=h,this.uint8[U+4]=p,this.uint8[U+5]=v,this.uint8[U+6]=_,this.uint8[U+7]=A,n}}m.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",m);class i extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.float32[p+0]=a,this.float32[p+1]=h,n}}i.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",i);class u extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_,A,k,U,Q){const ne=this.length;return this.resize(ne+1),this.emplace(ne,n,a,h,p,v,_,A,k,U,Q)}emplace(n,a,h,p,v,_,A,k,U,Q,ne){const le=10*n;return this.uint16[le+0]=a,this.uint16[le+1]=h,this.uint16[le+2]=p,this.uint16[le+3]=v,this.uint16[le+4]=_,this.uint16[le+5]=A,this.uint16[le+6]=k,this.uint16[le+7]=U,this.uint16[le+8]=Q,this.uint16[le+9]=ne,n}}u.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",u);class f extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_,A,k,U,Q,ne,le){const pe=this.length;return this.resize(pe+1),this.emplace(pe,n,a,h,p,v,_,A,k,U,Q,ne,le)}emplace(n,a,h,p,v,_,A,k,U,Q,ne,le,pe){const _e=12*n;return this.int16[_e+0]=a,this.int16[_e+1]=h,this.int16[_e+2]=p,this.int16[_e+3]=v,this.uint16[_e+4]=_,this.uint16[_e+5]=A,this.uint16[_e+6]=k,this.uint16[_e+7]=U,this.int16[_e+8]=Q,this.int16[_e+9]=ne,this.int16[_e+10]=le,this.int16[_e+11]=pe,n}}f.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",f);class g extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=p,n}}g.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",g);class x extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}x.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",x);class I extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_,A,k,U){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,a,h,p,v,_,A,k,U)}emplace(n,a,h,p,v,_,A,k,U,Q){const ne=10*n,le=5*n;return this.int16[ne+0]=a,this.int16[ne+1]=h,this.int16[ne+2]=p,this.int16[ne+3]=v,this.int16[ne+4]=_,this.int16[ne+5]=A,this.uint32[le+3]=k,this.uint16[ne+8]=U,this.uint16[ne+9]=Q,n}}I.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",I);class O extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,p,v,_)}emplace(n,a,h,p,v,_,A){const k=6*n;return this.int16[k+0]=a,this.int16[k+1]=h,this.int16[k+2]=p,this.int16[k+3]=v,this.int16[k+4]=_,this.int16[k+5]=A,n}}O.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",O);class B extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,a,h,p,v)}emplace(n,a,h,p,v,_){const A=4*n,k=8*n;return this.float32[A+0]=a,this.float32[A+1]=h,this.float32[A+2]=p,this.int16[k+6]=v,this.int16[k+7]=_,n}}B.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",B);class X extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const _=12*n,A=3*n;return this.uint8[_+0]=a,this.uint8[_+1]=h,this.float32[A+1]=p,this.float32[A+2]=v,n}}X.prototype.bytesPerElement=12,_t("StructArrayLayout2ub2f12",X);class ie extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}ie.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",ie);class he extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re,je,He){const rt=this.length;return this.resize(rt+1),this.emplace(rt,n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re,je,He)}emplace(n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re,je,He,rt){const Je=24*n,lt=12*n,yt=48*n;return this.int16[Je+0]=a,this.int16[Je+1]=h,this.uint16[Je+2]=p,this.uint16[Je+3]=v,this.uint32[lt+2]=_,this.uint32[lt+3]=A,this.uint32[lt+4]=k,this.uint16[Je+10]=U,this.uint16[Je+11]=Q,this.uint16[Je+12]=ne,this.float32[lt+7]=le,this.float32[lt+8]=pe,this.uint8[yt+36]=_e,this.uint8[yt+37]=Re,this.uint8[yt+38]=je,this.uint32[lt+10]=He,this.int16[Je+22]=rt,n}}he.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",he);class Se extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re,je,He,rt,Je,lt,yt,pt,Rt,Jt,kt,Mt,Tt,Ft){const zt=this.length;return this.resize(zt+1),this.emplace(zt,n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re,je,He,rt,Je,lt,yt,pt,Rt,Jt,kt,Mt,Tt,Ft)}emplace(n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re,je,He,rt,Je,lt,yt,pt,Rt,Jt,kt,Mt,Tt,Ft,zt){const wt=34*n,an=17*n;return this.int16[wt+0]=a,this.int16[wt+1]=h,this.int16[wt+2]=p,this.int16[wt+3]=v,this.int16[wt+4]=_,this.int16[wt+5]=A,this.int16[wt+6]=k,this.int16[wt+7]=U,this.uint16[wt+8]=Q,this.uint16[wt+9]=ne,this.uint16[wt+10]=le,this.uint16[wt+11]=pe,this.uint16[wt+12]=_e,this.uint16[wt+13]=Re,this.uint16[wt+14]=je,this.uint16[wt+15]=He,this.uint16[wt+16]=rt,this.uint16[wt+17]=Je,this.uint16[wt+18]=lt,this.uint16[wt+19]=yt,this.uint16[wt+20]=pt,this.uint16[wt+21]=Rt,this.uint16[wt+22]=Jt,this.uint32[an+12]=kt,this.float32[an+13]=Mt,this.float32[an+14]=Tt,this.float32[an+15]=Ft,this.float32[an+16]=zt,n}}Se.prototype.bytesPerElement=68,_t("StructArrayLayout8i15ui1ul4f68",Se);class ze extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}ze.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",ze);class Te extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=p,n}}Te.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",Te);class Fe extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}Fe.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",Fe);class $e extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.uint16[p+0]=a,this.uint16[p+1]=h,n}}$e.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",$e);class We extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}We.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",We);class qe extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const _=4*n;return this.float32[_+0]=a,this.float32[_+1]=h,this.float32[_+2]=p,this.float32[_+3]=v,n}}qe.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",qe);class Ye extends Nu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ae(this.anchorPointX,this.anchorPointY)}}Ye.prototype.size=20;class ht extends I{get(n){return new Ye(this,n)}}_t("CollisionBoxArray",ht);class it extends Nu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}it.prototype.size=48;class ut extends he{get(n){return new it(this,n)}}_t("PlacedSymbolArray",ut);class vt extends Nu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}vt.prototype.size=68;class bt extends Se{get(n){return new vt(this,n)}}_t("SymbolInstanceArray",bt);class gt extends ze{getoffsetX(n){return this.float32[1*n+0]}}_t("GlyphOffsetArray",gt);class Ht extends Te{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}_t("SymbolLineVertexArray",Ht);class Ot extends Nu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ot.prototype.size=8;class fn extends Fe{get(n){return new Ot(this,n)}}_t("FeatureIndexArray",fn);class Un extends Vl{}class In extends Vl{}class Cn extends Gl{}class _r extends m{}class yn extends i{}class On extends u{}class dr extends f{}class Xr extends g{}class zi extends x{}class Oi extends O{}class so extends X{}class Li extends ie{}class lo extends $e{}const wa=vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ya}=wa;class Hn{constructor(n=[]){this.segments=n}prepareSegment(n,a,h,p){let v=this.segments[this.segments.length-1];return n>Hn.MAX_VERTEX_ARRAY_LENGTH&&H(`Max vertices per segment is ${Hn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Hn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,h,p){return new Hn([{vertexOffset:n,primitiveOffset:a,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function $r(o,n){return 256*(o=P(Math.floor(o),0,255))+P(Math.floor(n),0,255)}Hn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",Hn);const Nn=vr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var kr={exports:{}},Ri={exports:{}};Ri.exports=function(o,n){var a,h,p,v,_,A,k,U;for(h=o.length-(a=3&o.length),p=n,_=3432918353,A=461845907,U=0;U<h;)k=255&o.charCodeAt(U)|(255&o.charCodeAt(++U))<<8|(255&o.charCodeAt(++U))<<16|(255&o.charCodeAt(++U))<<24,++U,p=27492+(65535&(v=5*(65535&(p=(p^=k=(65535&(k=(k=(65535&k)*_+(((k>>>16)*_&65535)<<16)&4294967295)<<15|k>>>17))*A+(((k>>>16)*A&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(k=0,a){case 3:k^=(255&o.charCodeAt(U+2))<<16;case 2:k^=(255&o.charCodeAt(U+1))<<8;case 1:p^=k=(65535&(k=(k=(65535&(k^=255&o.charCodeAt(U)))*_+(((k>>>16)*_&65535)<<16)&4294967295)<<15|k>>>17))*A+(((k>>>16)*A&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var ar={exports:{}};ar.exports=function(o,n){for(var a,h=o.length,p=n^h,v=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Ka=Ri.exports,qa=ar.exports;kr.exports=Ka,kr.exports.murmur3=Ka,kr.exports.murmur2=qa;var Ls=kr.exports;class $u{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,h,p){this.ids.push(ad(n)),this.positions.push(a,h,p)}getPositions(n){const a=ad(n);let h=0,p=this.ids.length-1;for(;h<p;){const _=h+p>>1;this.ids[_]>=a?p=_:h=_+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,a){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return fh(h,p,0,h.length-1),a&&a.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const a=new $u;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function ad(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Ls(String(o))}function fh(o,n,a,h){for(;a<h;){const p=o[a+h>>1];let v=a-1,_=h+1;for(;;){do v++;while(o[v]<p);do _--;while(o[_]>p);if(v>=_)break;ba(o,v,_),ba(n,3*v,3*_),ba(n,3*v+1,3*_+1),ba(n,3*v+2,3*_+2)}_-a<h-_?(fh(o,n,a,_),a=_+1):(fh(o,n,_+1,h),h=_)}}function ba(o,n,a){const h=o[n];o[n]=o[a],o[a]=h}_t("FeaturePositionMap",$u);class Ja{constructor(n,a){this.gl=n.gl,this.location=a}}class Qa extends Ja{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Vu extends Ja{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class n_ extends Ja{constructor(n,a){super(n,a),this.current=J.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const pA=new Float32Array(16);function ig(o){return[$r(255*o.r,255*o.g),$r(255*o.b,255*o.a)]}class dh{constructor(n,a,h){this.value=n,this.uniformNames=a.map(p=>`u_${p}`),this.type=h}setUniform(n,a,h){n.set(h.constantOr(this.value))}getBinding(n,a,h){return this.type==="color"?new n_(n,a):new Qa(n,a)}}class Gu{constructor(n,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,h){return h.substr(0,9)==="u_pattern"?new Vu(n,a):new Qa(n,a)}}class es{constructor(n,a,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,a,h,p,v){const _=this.paintVertexArray.length,A=this.expression.evaluate(new or(0),a,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,A)}updatePaintArray(n,a,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,a,v)}_setPaintValue(n,a,h){if(this.type==="color"){const p=ig(h);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<a;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jo{constructor(n,a,h,p,v,_){this.expression=n,this.uniformNames=a.map(A=>`u_${A}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(A=>({name:`a_${A}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,a,h,p,v){const _=this.expression.evaluate(new or(this.zoom),a,{},p,[],v),A=this.expression.evaluate(new or(this.zoom+1),a,{},p,[],v),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,_,A)}updatePaintArray(n,a,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),_=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,a,v,_)}_setPaintValue(n,a,h,p){if(this.type==="color"){const v=ig(h),_=ig(p);for(let A=n;A<a;A++)this.paintVertexArray.emplace(A,v[0],v[1],_[0],_[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=P(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,a,h){return new Qa(n,a)}}class Rs{constructor(n,a,h,p,v,_){this.expression=n,this.type=a,this.useIntegerZoom=h,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(n,a,h,p,v){this._setPaintValues(n,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,a,h,p){if(!p||!h)return;const{min:v,mid:_,max:A}=h,k=p[v],U=p[_],Q=p[A];if(k&&U&&Q)for(let ne=n;ne<a;ne++)this.zoomInPaintVertexArray.emplace(ne,U.tl[0],U.tl[1],U.br[0],U.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],U.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(ne,U.tl[0],U.tl[1],U.br[0],U.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],U.pixelRatio,Q.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Nn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Nn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class r_{constructor(n,a,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const _=n.paint.get(v);if(!(_ instanceof Ao&&No(_.property.specification)))continue;const A=mA(v,n.type),k=_.value,U=_.property.specification.type,Q=_.property.useIntegerZoom,ne=_.property.specification["property-type"],le=ne==="cross-faded"||ne==="cross-faded-data-driven";if(k.kind==="constant")this.binders[v]=le?new Gu(k.value,A):new dh(k.value,A,U),p.push(`/u_${v}`);else if(k.kind==="source"||le){const pe=i_(v,U,"source");this.binders[v]=le?new Rs(k,U,Q,a,pe,n.id):new es(k,A,U,pe),p.push(`/a_${v}`)}else{const pe=i_(v,U,"composite");this.binders[v]=new Jo(k,A,U,Q,a,pe),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof es||a instanceof Jo?a.maxValue:0}populatePaintArrays(n,a,h,p,v){for(const _ in this.binders){const A=this.binders[_];(A instanceof es||A instanceof Jo||A instanceof Rs)&&A.populatePaintArray(n,a,h,p,v)}}setConstantPatternPositions(n,a){for(const h in this.binders){const p=this.binders[h];p instanceof Gu&&p.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,h,p,v){let _=!1;for(const A in n){const k=a.getPositions(A);for(const U of k){const Q=h.feature(U.index);for(const ne in this.binders){const le=this.binders[ne];if((le instanceof es||le instanceof Jo||le instanceof Rs)&&le.expression.isStateDependent===!0){const pe=p.paint.get(ne);le.expression=pe.value,le.updatePaintArray(U.start,U.end,Q,n[A],v),_=!0}}}}return _}defines(){const n=[];for(const a in this.binders){const h=this.binders[a];(h instanceof dh||h instanceof Gu)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof es||h instanceof Jo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Rs)for(let p=0;p<Nn.members.length;p++)n.push(Nn.members[p].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof dh||h instanceof Gu||h instanceof Jo)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof dh||v instanceof Gu||v instanceof Jo){for(const _ of v.uniformNames)if(a[_]){const A=v.getBinding(n,a[_],_);h.push({name:_,property:p,binding:A})}}}return h}setUniforms(n,a,h,p){for(const{name:v,property:_,binding:A}of a)this.binders[_].setUniform(A,p,h.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(n&&h instanceof Rs){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof es||h instanceof Jo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const a in this.binders){const h=this.binders[a];(h instanceof es||h instanceof Jo||h instanceof Rs)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof es||a instanceof Jo||a instanceof Rs)&&a.destroy()}}}class Wl{constructor(n,a,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new r_(p,a,h);this.needsUpload=!1,this._featureMap=new $u,this._bufferOffset=0}populatePaintArrays(n,a,h,p,v,_){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(n,a,p,v,_);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function mA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function i_(o,n,a){const h={color:{source:i,composite:qe},number:{source:ze,composite:i}},p=function(v){return{"line-pattern":{source:On,composite:On},"fill-pattern":{source:On,composite:On},"fill-extrusion-pattern":{source:On,composite:On}}[v]}(o);return p&&p[a]||h[n][a]}_t("ConstantBinder",dh),_t("CrossFadedConstantBinder",Gu),_t("SourceExpressionBinder",es),_t("CrossFadedCompositeBinder",Rs),_t("CompositeExpressionBinder",Jo),_t("ProgramConfiguration",r_,{omit:["_buffers"]}),_t("ProgramConfigurationSet",Wl);var Vr=8192;const og=Math.pow(2,14)-1,o_=-og-1;function Zl(o){const n=Vr/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const p=a[h];for(let v=0;v<p.length;v++){const _=p[v],A=Math.round(_.x*n),k=Math.round(_.y*n);_.x=P(A,o_,og),_.y=P(k,o_,og),(A<_.x||A>_.x+1||k<_.y||k>_.y+1)&&H("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Hl(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Zl(o):[]}}function sd(o,n,a,h,p){o.emplaceBack(2*n+(h+1)/2,2*a+(p+1)/2)}class ag{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Un,this.indexArray=new Li,this.segments=new Hn,this.programConfigurations=new Wl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){const p=this.layers[0],v=[];let _=null,A=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),A=!_.isConstant());for(const{feature:k,id:U,index:Q,sourceLayerIndex:ne}of n){const le=this.layers[0]._featureFilter.needGeometry,pe=Hl(k,le);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),pe,h))continue;const _e=A?_.evaluate(pe,{},h):void 0,Re={id:U,properties:k.properties,type:k.type,sourceLayerIndex:ne,index:Q,geometry:le?pe.geometry:Zl(k),patterns:{},sortKey:_e};v.push(Re)}A&&v.sort((k,U)=>k.sortKey-U.sortKey);for(const k of v){const{geometry:U,index:Q,sourceLayerIndex:ne}=k,le=n[Q].feature;this.addFeature(k,U,Q,h),a.featureIndex.insert(le,U,Q,ne,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ya),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,p){for(const v of a)for(const _ of v){const A=_.x,k=_.y;if(A<0||A>=Vr||k<0||k>=Vr)continue;const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Q=U.vertexLength;sd(this.layoutVertexArray,A,k,-1,-1),sd(this.layoutVertexArray,A,k,1,-1),sd(this.layoutVertexArray,A,k,1,1),sd(this.layoutVertexArray,A,k,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+3,Q+2),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function a_(o,n){for(let a=0;a<o.length;a++)if(Wu(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(Wu(o,n[a]))return!0;return!!sg(o,n)}function gA(o,n,a){return!!Wu(o,n)||!!lg(n,o,a)}function s_(o,n){if(o.length===1)return u_(n,o[0]);for(let a=0;a<n.length;a++){const h=n[a];for(let p=0;p<h.length;p++)if(Wu(o,h[p]))return!0}for(let a=0;a<o.length;a++)if(u_(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(sg(o,n[a]))return!0;return!1}function yA(o,n,a){if(o.length>1){if(sg(o,n))return!0;for(let h=0;h<n.length;h++)if(lg(n[h],o,a))return!0}for(let h=0;h<o.length;h++)if(lg(o[h],n,a))return!0;return!1}function sg(o,n){if(o.length===0||n.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],p=o[a+1];for(let v=0;v<n.length-1;v++)if(vA(h,p,n[v],n[v+1]))return!0}return!1}function vA(o,n,a,h){return F(o,a,h)!==F(n,a,h)&&F(o,n,a)!==F(o,n,h)}function lg(o,n,a){const h=a*a;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(l_(o,n[p-1],n[p])<h)return!0;return!1}function l_(o,n,a){const h=n.distSqr(a);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(a.x-n.x)+(o.y-n.y)*(a.y-n.y))/h;return o.distSqr(p<0?n:p>1?a:a.sub(n)._mult(p)._add(n))}function u_(o,n){let a,h,p,v=!1;for(let _=0;_<o.length;_++){a=o[_];for(let A=0,k=a.length-1;A<a.length;k=A++)h=a[A],p=a[k],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Wu(o,n){let a=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],_=o[p];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(a=!a)}return a}function _A(o,n,a){const h=a[0],p=a[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=F(o,n,a[0]);return v!==F(o,n,a[1])||v!==F(o,n,a[2])||v!==F(o,n,a[3])}function ph(o,n,a){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(n.id).getMaxValue(o)}function ld(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function ud(o,n,a,h,p){if(!n[0]&&!n[1])return o;const v=ae.convert(n)._mult(p);a==="viewport"&&v._rotate(-h);const _=[];for(let A=0;A<o.length;A++)_.push(o[A].sub(v));return _}_t("CircleBucket",ag,{omit:["layers"]});const xA=new _i({"circle-sort-key":new sn(T.layout_circle["circle-sort-key"])});var wA={paint:new _i({"circle-radius":new sn(T.paint_circle["circle-radius"]),"circle-color":new sn(T.paint_circle["circle-color"]),"circle-blur":new sn(T.paint_circle["circle-blur"]),"circle-opacity":new sn(T.paint_circle["circle-opacity"]),"circle-translate":new Xt(T.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(T.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(T.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(T.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(T.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(T.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(T.paint_circle["circle-stroke-opacity"])}),layout:xA},Xl=typeof Float32Array!="undefined"?Float32Array:Array;function ug(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function c_(o,n,a){var h=n[0],p=n[1],v=n[2],_=n[3],A=n[4],k=n[5],U=n[6],Q=n[7],ne=n[8],le=n[9],pe=n[10],_e=n[11],Re=n[12],je=n[13],He=n[14],rt=n[15],Je=a[0],lt=a[1],yt=a[2],pt=a[3];return o[0]=Je*h+lt*A+yt*ne+pt*Re,o[1]=Je*p+lt*k+yt*le+pt*je,o[2]=Je*v+lt*U+yt*pe+pt*He,o[3]=Je*_+lt*Q+yt*_e+pt*rt,o[4]=(Je=a[4])*h+(lt=a[5])*A+(yt=a[6])*ne+(pt=a[7])*Re,o[5]=Je*p+lt*k+yt*le+pt*je,o[6]=Je*v+lt*U+yt*pe+pt*He,o[7]=Je*_+lt*Q+yt*_e+pt*rt,o[8]=(Je=a[8])*h+(lt=a[9])*A+(yt=a[10])*ne+(pt=a[11])*Re,o[9]=Je*p+lt*k+yt*le+pt*je,o[10]=Je*v+lt*U+yt*pe+pt*He,o[11]=Je*_+lt*Q+yt*_e+pt*rt,o[12]=(Je=a[12])*h+(lt=a[13])*A+(yt=a[14])*ne+(pt=a[15])*Re,o[13]=Je*p+lt*k+yt*le+pt*je,o[14]=Je*v+lt*U+yt*pe+pt*He,o[15]=Je*_+lt*Q+yt*_e+pt*rt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var bA=c_;function cg(){var o=new Xl(4);return Xl!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),o}function cd(o,n,a,h){var p=new Xl(4);return p[0]=o,p[1]=n,p[2]=a,p[3]=h,p}function hd(o,n,a){var h=n[0],p=n[1],v=n[2],_=n[3];return o[0]=a[0]*h+a[4]*p+a[8]*v+a[12]*_,o[1]=a[1]*h+a[5]*p+a[9]*v+a[13]*_,o[2]=a[2]*h+a[6]*p+a[10]*v+a[14]*_,o[3]=a[3]*h+a[7]*p+a[11]*v+a[15]*_,o}function h_(o,n){const a=hd(cg(),cd(o.x,o.y,0,1),n);return new ae(a[0]/a[3],a[1]/a[3])}cg();class f_ extends ag{}_t("HeatmapBucket",f_,{omit:["layers"]});var EA={paint:new _i({"heatmap-radius":new sn(T.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(T.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(T.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ul(T.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(T.paint_heatmap["heatmap-opacity"])})};function hg(o,{width:n,height:a},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*a*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*a*h}`)}else p=new Uint8Array(n*a*h);return o.width=n,o.height=a,o.data=p,o}function d_(o,{width:n,height:a},h){if(n===o.width&&a===o.height)return;const p=hg({},{width:n,height:a},h);fg(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,a)},h),o.width=n,o.height=a,o.data=p.data}function fg(o,n,a,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||a.x>o.width-p.width||a.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,A=n.data;for(let k=0;k<p.height;k++){const U=((a.y+k)*o.width+a.x)*v,Q=((h.y+k)*n.width+h.x)*v;for(let ne=0;ne<p.width*v;ne++)A[Q+ne]=_[U+ne]}return n}class mh{constructor(n,a){hg(this,n,1,a)}resize(n){d_(this,n,1)}clone(){return new mh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,p,v){fg(n,a,h,p,v,1)}}class uo{constructor(n,a){hg(this,n,4,a)}resize(n){d_(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new uo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,p,v){fg(n,a,h,p,v,4)}}function p_(o){const n={},a=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new uo({width:a,height:h}),v=(_,A,k)=>{n[o.evaluationKey]=k;const U=o.expression.evaluate(n);p.data[_+A+0]=Math.floor(255*U.r/U.a),p.data[_+A+1]=Math.floor(255*U.g/U.a),p.data[_+A+2]=Math.floor(255*U.b/U.a),p.data[_+A+3]=Math.floor(255*U.a)};if(o.clips)for(let _=0,A=0;_<h;++_,A+=4*a)for(let k=0,U=0;k<a;k++,U+=4){const Q=k/(a-1),{start:ne,end:le}=o.clips[_];v(A,U,ne*(1-Q)+le*Q)}else for(let _=0,A=0;_<a;_++,A+=4)v(0,A,_/(a-1));return p}_t("AlphaImage",mh),_t("RGBAImage",uo);var SA={paint:new _i({"hillshade-illumination-direction":new Xt(T.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(T.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(T.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(T.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(T.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(T.paint_hillshade["hillshade-accent-color"])})};const TA=vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:AA}=TA;var dg={exports:{}};function fd(o,n,a){a=a||2;var h,p,v,_,A,k,U,Q=n&&n.length,ne=Q?n[0]*a:o.length,le=m_(o,0,ne,a,!0),pe=[];if(!le||le.next===le.prev)return pe;if(Q&&(le=function(Re,je,He,rt){var Je,lt,yt,pt=[];for(Je=0,lt=je.length;Je<lt;Je++)(yt=m_(Re,je[Je]*rt,Je<lt-1?je[Je+1]*rt:Re.length,rt,!1))===yt.next&&(yt.steiner=!0),pt.push(LA(yt));for(pt.sort(MA),Je=0;Je<pt.length;Je++)He=Fs(He=zA(pt[Je],He),He.next);return He}(o,n,le,a)),o.length>80*a){h=v=o[0],p=_=o[1];for(var _e=a;_e<ne;_e+=a)(A=o[_e])<h&&(h=A),(k=o[_e+1])<p&&(p=k),A>v&&(v=A),k>_&&(_=k);U=(U=Math.max(v-h,_-p))!==0?1/U:0}return gh(le,pe,a,h,p,U),pe}function m_(o,n,a,h,p){var v,_;if(p===gg(o,n,a,h)>0)for(v=n;v<a;v+=h)_=v_(v,o[v],o[v+1],_);else for(v=a-h;v>=n;v-=h)_=v_(v,o[v],o[v+1],_);return _&&dd(_,_.next)&&(vh(_),_=_.next),_}function Fs(o,n){if(!o)return o;n||(n=o);var a,h=o;do if(a=!1,h.steiner||!dd(h,h.next)&&Ir(h.prev,h,h.next)!==0)h=h.next;else{if(vh(h),(h=n=h.prev)===h.next)break;a=!0}while(a||h!==n);return n}function gh(o,n,a,h,p,v,_){if(o){!_&&v&&function(Q,ne,le,pe){var _e=Q;do _e.z===null&&(_e.z=pg(_e.x,_e.y,ne,le,pe)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==Q);_e.prevZ.nextZ=null,_e.prevZ=null,function(Re){var je,He,rt,Je,lt,yt,pt,Rt,Jt=1;do{for(He=Re,Re=null,lt=null,yt=0;He;){for(yt++,rt=He,pt=0,je=0;je<Jt&&(pt++,rt=rt.nextZ);je++);for(Rt=Jt;pt>0||Rt>0&&rt;)pt!==0&&(Rt===0||!rt||He.z<=rt.z)?(Je=He,He=He.nextZ,pt--):(Je=rt,rt=rt.nextZ,Rt--),lt?lt.nextZ=Je:Re=Je,Je.prevZ=lt,lt=Je;He=rt}lt.nextZ=null,Jt*=2}while(yt>1)}(_e)}(o,h,p,v);for(var A,k,U=o;o.prev!==o.next;)if(A=o.prev,k=o.next,v?CA(o,h,p,v):IA(o))n.push(A.i/a),n.push(o.i/a),n.push(k.i/a),vh(o),o=k.next,U=k.next;else if((o=k)===U){_?_===1?gh(o=PA(Fs(o),n,a),n,a,h,p,v,2):_===2&&kA(o,n,a,h,p,v):gh(Fs(o),n,a,h,p,v,1);break}}}function IA(o){var n=o.prev,a=o,h=o.next;if(Ir(n,a,h)>=0)return!1;for(var p=o.next.next;p!==o.prev;){if(Zu(n.x,n.y,a.x,a.y,h.x,h.y,p.x,p.y)&&Ir(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function CA(o,n,a,h){var p=o.prev,v=o,_=o.next;if(Ir(p,v,_)>=0)return!1;for(var A=p.x>v.x?p.x>_.x?p.x:_.x:v.x>_.x?v.x:_.x,k=p.y>v.y?p.y>_.y?p.y:_.y:v.y>_.y?v.y:_.y,U=pg(p.x<v.x?p.x<_.x?p.x:_.x:v.x<_.x?v.x:_.x,p.y<v.y?p.y<_.y?p.y:_.y:v.y<_.y?v.y:_.y,n,a,h),Q=pg(A,k,n,a,h),ne=o.prevZ,le=o.nextZ;ne&&ne.z>=U&&le&&le.z<=Q;){if(ne!==o.prev&&ne!==o.next&&Zu(p.x,p.y,v.x,v.y,_.x,_.y,ne.x,ne.y)&&Ir(ne.prev,ne,ne.next)>=0||(ne=ne.prevZ,le!==o.prev&&le!==o.next&&Zu(p.x,p.y,v.x,v.y,_.x,_.y,le.x,le.y)&&Ir(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;ne&&ne.z>=U;){if(ne!==o.prev&&ne!==o.next&&Zu(p.x,p.y,v.x,v.y,_.x,_.y,ne.x,ne.y)&&Ir(ne.prev,ne,ne.next)>=0)return!1;ne=ne.prevZ}for(;le&&le.z<=Q;){if(le!==o.prev&&le!==o.next&&Zu(p.x,p.y,v.x,v.y,_.x,_.y,le.x,le.y)&&Ir(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function PA(o,n,a){var h=o;do{var p=h.prev,v=h.next.next;!dd(p,v)&&g_(p,h,h.next,v)&&yh(p,v)&&yh(v,p)&&(n.push(p.i/a),n.push(h.i/a),n.push(v.i/a),vh(h),vh(h.next),h=o=v),h=h.next}while(h!==o);return Fs(h)}function kA(o,n,a,h,p,v){var _=o;do{for(var A=_.next.next;A!==_.prev;){if(_.i!==A.i&&RA(_,A)){var k=y_(_,A);return _=Fs(_,_.next),k=Fs(k,k.next),gh(_,n,a,h,p,v),void gh(k,n,a,h,p,v)}A=A.next}_=_.next}while(_!==o)}function MA(o,n){return o.x-n.x}function zA(o,n){var a=function(v,_){var A,k=_,U=v.x,Q=v.y,ne=-1/0;do{if(Q<=k.y&&Q>=k.next.y&&k.next.y!==k.y){var le=k.x+(Q-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(le<=U&&le>ne){if(ne=le,le===U){if(Q===k.y)return k;if(Q===k.next.y)return k.next}A=k.x<k.next.x?k:k.next}}k=k.next}while(k!==_);if(!A)return null;if(U===ne)return A;var pe,_e=A,Re=A.x,je=A.y,He=1/0;k=A;do U>=k.x&&k.x>=Re&&U!==k.x&&Zu(Q<je?U:ne,Q,Re,je,Q<je?ne:U,Q,k.x,k.y)&&(pe=Math.abs(Q-k.y)/(U-k.x),yh(k,v)&&(pe<He||pe===He&&(k.x>A.x||k.x===A.x&&OA(A,k)))&&(A=k,He=pe)),k=k.next;while(k!==_e);return A}(o,n);if(!a)return n;var h=y_(a,o),p=Fs(a,a.next);return Fs(h,h.next),n===a?p:n}function OA(o,n){return Ir(o.prev,o,n.prev)<0&&Ir(n.next,o,o.next)<0}function pg(o,n,a,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-a)*p)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-h)*p)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function LA(o){var n=o,a=o;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==o);return a}function Zu(o,n,a,h,p,v,_,A){return(p-_)*(n-A)-(o-_)*(v-A)>=0&&(o-_)*(h-A)-(a-_)*(n-A)>=0&&(a-_)*(v-A)-(p-_)*(h-A)>=0}function RA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(a,h){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==h.i&&p.next.i!==h.i&&g_(p,p.next,a,h))return!0;p=p.next}while(p!==a);return!1}(o,n)&&(yh(o,n)&&yh(n,o)&&function(a,h){var p=a,v=!1,_=(a.x+h.x)/2,A=(a.y+h.y)/2;do p.y>A!=p.next.y>A&&p.next.y!==p.y&&_<(p.next.x-p.x)*(A-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==a);return v}(o,n)&&(Ir(o.prev,o,n.prev)||Ir(o,n.prev,n))||dd(o,n)&&Ir(o.prev,o,o.next)>0&&Ir(n.prev,n,n.next)>0)}function Ir(o,n,a){return(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y)}function dd(o,n){return o.x===n.x&&o.y===n.y}function g_(o,n,a,h){var p=md(Ir(o,n,a)),v=md(Ir(o,n,h)),_=md(Ir(a,h,o)),A=md(Ir(a,h,n));return p!==v&&_!==A||!(p!==0||!pd(o,a,n))||!(v!==0||!pd(o,h,n))||!(_!==0||!pd(a,o,h))||!(A!==0||!pd(a,n,h))}function pd(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}function md(o){return o>0?1:o<0?-1:0}function yh(o,n){return Ir(o.prev,o,o.next)<0?Ir(o,n,o.next)>=0&&Ir(o,o.prev,n)>=0:Ir(o,n,o.prev)<0||Ir(o,o.next,n)<0}function y_(o,n){var a=new mg(o.i,o.x,o.y),h=new mg(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,a.next=p,p.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function v_(o,n,a,h){var p=new mg(o,n,a);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function vh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function mg(o,n,a){this.i=o,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gg(o,n,a,h){for(var p=0,v=n,_=a-h;v<a;v+=h)p+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return p}dg.exports=fd,dg.exports.default=fd,fd.deviation=function(o,n,a,h){var p=n&&n.length,v=Math.abs(gg(o,0,p?n[0]*a:o.length,a));if(p)for(var _=0,A=n.length;_<A;_++)v-=Math.abs(gg(o,n[_]*a,_<A-1?n[_+1]*a:o.length,a));var k=0;for(_=0;_<h.length;_+=3){var U=h[_]*a,Q=h[_+1]*a,ne=h[_+2]*a;k+=Math.abs((o[U]-o[ne])*(o[Q+1]-o[U+1])-(o[U]-o[Q])*(o[ne+1]-o[U+1]))}return v===0&&k===0?0:Math.abs((k-v)/v)},fd.flatten=function(o){for(var n=o[0][0].length,a={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var _=0;_<n;_++)a.vertices.push(o[p][v][_]);p>0&&a.holes.push(h+=o[p-1].length)}return a};var __=dg.exports;function FA(o,n,a,h,p){x_(o,n,a||0,h||o.length-1,p||BA)}function x_(o,n,a,h,p){for(;h>a;){if(h-a>600){var v=h-a+1,_=n-a+1,A=Math.log(v),k=.5*Math.exp(2*A/3),U=.5*Math.sqrt(A*k*(v-k)/v)*(_-v/2<0?-1:1);x_(o,n,Math.max(a,Math.floor(n-_*k/v+U)),Math.min(h,Math.floor(n+(v-_)*k/v+U)),p)}var Q=o[n],ne=a,le=h;for(_h(o,a,n),p(o[h],Q)>0&&_h(o,a,h);ne<le;){for(_h(o,ne,le),ne++,le--;p(o[ne],Q)<0;)ne++;for(;p(o[le],Q)>0;)le--}p(o[a],Q)===0?_h(o,a,le):_h(o,++le,h),le<=n&&(a=le+1),n<=le&&(h=le-1)}}function _h(o,n,a){var h=o[n];o[n]=o[a],o[a]=h}function BA(o,n){return o<n?-1:o>n?1:0}function yg(o,n){const a=o.length;if(a<=1)return[o];const h=[];let p,v;for(let _=0;_<a;_++){const A=b(o[_]);A!==0&&(o[_].area=Math.abs(A),v===void 0&&(v=A<0),v===A<0?(p&&h.push(p),p=[o[_]]):p.push(o[_]))}if(p&&h.push(p),n>1)for(let _=0;_<h.length;_++)h[_].length<=n||(FA(h[_],n,1,h[_].length-1,jA),h[_]=h[_].slice(0,n));return h}function jA(o,n){return n.area-o.area}function vg(o,n,a){const h=a.patternDependencies;let p=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(p=!0);const A=_.constantOr(null);A&&(p=!0,h[A.to]=!0,h[A.from]=!0)}return p}function _g(o,n,a,h,p){const v=p.patternDependencies;for(const _ of n){const A=_.paint.get(`${o}-pattern`).value;if(A.kind!=="constant"){let k=A.evaluate({zoom:h-1},a,{},p.availableImages),U=A.evaluate({zoom:h},a,{},p.availableImages),Q=A.evaluate({zoom:h+1},a,{},p.availableImages);k=k&&k.name?k.name:k,U=U&&U.name?U.name:U,Q=Q&&Q.name?Q.name:Q,v[k]=!0,v[U]=!0,v[Q]=!0,a.patterns[_.id]={min:k,mid:U,max:Q}}}return a}class xg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new In,this.indexArray=new Li,this.indexArray2=new lo,this.programConfigurations=new Wl(n.layers,n.zoom),this.segments=new Hn,this.segments2=new Hn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=vg("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:A,id:k,index:U,sourceLayerIndex:Q}of n){const ne=this.layers[0]._featureFilter.needGeometry,le=Hl(A,ne);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),le,h))continue;const pe=v?p.evaluate(le,{},h,a.availableImages):void 0,_e={id:k,properties:A.properties,type:A.type,sourceLayerIndex:Q,index:U,geometry:ne?le.geometry:Zl(A),patterns:{},sortKey:pe};_.push(_e)}v&&_.sort((A,k)=>A.sortKey-k.sortKey);for(const A of _){const{geometry:k,index:U,sourceLayerIndex:Q}=A;if(this.hasPattern){const ne=_g("fill",this.layers,A,this.zoom,a);this.patternFeatures.push(ne)}else this.addFeature(A,k,U,h,{});a.featureIndex.insert(n[U].feature,k,U,Q,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,h,p,v){for(const _ of yg(a,500)){let A=0;for(const pe of _)A+=pe.length;const k=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),U=k.vertexLength,Q=[],ne=[];for(const pe of _){if(pe.length===0)continue;pe!==_[0]&&ne.push(Q.length/2);const _e=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Re=_e.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Re+pe.length-1,Re),Q.push(pe[0].x),Q.push(pe[0].y);for(let je=1;je<pe.length;je++)this.layoutVertexArray.emplaceBack(pe[je].x,pe[je].y),this.indexArray2.emplaceBack(Re+je-1,Re+je),Q.push(pe[je].x),Q.push(pe[je].y);_e.vertexLength+=pe.length,_e.primitiveLength+=pe.length}const le=__(Q,ne);for(let pe=0;pe<le.length;pe+=3)this.indexArray.emplaceBack(U+le[pe],U+le[pe+1],U+le[pe+2]);k.vertexLength+=A,k.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}_t("FillBucket",xg,{omit:["layers","patternFeatures"]});const DA=new _i({"fill-sort-key":new sn(T.layout_fill["fill-sort-key"])});var NA={paint:new _i({"fill-antialias":new Xt(T.paint_fill["fill-antialias"]),"fill-opacity":new sn(T.paint_fill["fill-opacity"]),"fill-color":new sn(T.paint_fill["fill-color"]),"fill-outline-color":new sn(T.paint_fill["fill-outline-color"]),"fill-translate":new Xt(T.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(T.paint_fill["fill-translate-anchor"]),"fill-pattern":new Os(T.paint_fill["fill-pattern"])}),layout:DA};const UA=vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:$A}=UA;var Bs={},VA=ae,w_=Hu;function Hu(o,n,a,h,p){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(GA,this,n)}function GA(o,n,a){o==1?n.id=a.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var _=p._keys[h.readVarint()],A=p._values[h.readVarint()];p.properties[_]=A}}(a,n):o==3?n.type=a.readVarint():o==4&&(n._geometry=a.pos)}function WA(o){for(var n,a,h=0,p=0,v=o.length,_=v-1;p<v;_=p++)h+=((a=o[_]).x-(n=o[p]).x)*(n.y+a.y);return h}Hu.types=["Unknown","Point","LineString","Polygon"],Hu.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,a=o.readVarint()+o.pos,h=1,p=0,v=0,_=0,A=[];o.pos<a;){if(p<=0){var k=o.readVarint();h=7&k,p=k>>3}if(p--,h===1||h===2)v+=o.readSVarint(),_+=o.readSVarint(),h===1&&(n&&A.push(n),n=[]),n.push(new VA(v,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&A.push(n),A},Hu.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,a=1,h=0,p=0,v=0,_=1/0,A=-1/0,k=1/0,U=-1/0;o.pos<n;){if(h<=0){var Q=o.readVarint();a=7&Q,h=Q>>3}if(h--,a===1||a===2)(p+=o.readSVarint())<_&&(_=p),p>A&&(A=p),(v+=o.readSVarint())<k&&(k=v),v>U&&(U=v);else if(a!==7)throw new Error("unknown command "+a)}return[_,k,A,U]},Hu.prototype.toGeoJSON=function(o,n,a){var h,p,v=this.extent*Math.pow(2,a),_=this.extent*o,A=this.extent*n,k=this.loadGeometry(),U=Hu.types[this.type];function Q(pe){for(var _e=0;_e<pe.length;_e++){var Re=pe[_e];pe[_e]=[360*(Re.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Re.y+A)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var ne=[];for(h=0;h<k.length;h++)ne[h]=k[h][0];Q(k=ne);break;case 2:for(h=0;h<k.length;h++)Q(k[h]);break;case 3:for(k=function(pe){var _e=pe.length;if(_e<=1)return[pe];for(var Re,je,He=[],rt=0;rt<_e;rt++){var Je=WA(pe[rt]);Je!==0&&(je===void 0&&(je=Je<0),je===Je<0?(Re&&He.push(Re),Re=[pe[rt]]):Re.push(pe[rt]))}return Re&&He.push(Re),He}(k),h=0;h<k.length;h++)for(p=0;p<k[h].length;p++)Q(k[h][p])}k.length===1?k=k[0]:U="Multi"+U;var le={type:"Feature",geometry:{type:U,coordinates:k},properties:this.properties};return"id"in this&&(le.id=this.id),le};var ZA=w_,b_=E_;function E_(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(HA,this,n),this.length=this._features.length}function HA(o,n,a){o===15?n.version=a.readVarint():o===1?n.name=a.readString():o===5?n.extent=a.readVarint():o===2?n._features.push(a.pos):o===3?n._keys.push(a.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var _=h.readVarint()>>3;p=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return p}(a))}E_.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new ZA(this._pbf,n,this.extent,this._keys,this._values)};var XA=b_;function YA(o,n,a){if(o===3){var h=new XA(a,a.readVarint()+a.pos);h.length&&(n[h.name]=h)}}Bs.VectorTile=function(o,n){this.layers=o.readFields(YA,{},n)},Bs.VectorTileFeature=w_,Bs.VectorTileLayer=b_;const KA=Bs.VectorTileFeature.types,wg=Math.pow(2,13);function xh(o,n,a,h,p,v,_,A){o.emplaceBack(n,a,2*Math.floor(h*wg)+_,p*wg*2,v*wg*2,Math.round(A))}class bg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Cn,this.indexArray=new Li,this.programConfigurations=new Wl(n.layers,n.zoom),this.segments=new Hn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.features=[],this.hasPattern=vg("fill-extrusion",this.layers,a);for(const{feature:p,id:v,index:_,sourceLayerIndex:A}of n){const k=this.layers[0]._featureFilter.needGeometry,U=Hl(p,k);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),U,h))continue;const Q={id:v,sourceLayerIndex:A,index:_,geometry:k?U.geometry:Zl(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(_g("fill-extrusion",this.layers,Q,this.zoom,a)):this.addFeature(Q,Q.geometry,_,h,{}),a.featureIndex.insert(p,Q.geometry,_,A,this.index,!0)}}addFeatures(n,a,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,a,h)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$A),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,p,v){for(const _ of yg(a,500)){let A=0;for(const pe of _)A+=pe.length;let k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const pe of _){if(pe.length===0||JA(pe))continue;let _e=0;for(let Re=0;Re<pe.length;Re++){const je=pe[Re];if(Re>=1){const He=pe[Re-1];if(!qA(je,He)){k.vertexLength+4>Hn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const rt=je.sub(He)._perp()._unit(),Je=He.dist(je);_e+Je>32768&&(_e=0),xh(this.layoutVertexArray,je.x,je.y,rt.x,rt.y,0,0,_e),xh(this.layoutVertexArray,je.x,je.y,rt.x,rt.y,0,1,_e),_e+=Je,xh(this.layoutVertexArray,He.x,He.y,rt.x,rt.y,0,0,_e),xh(this.layoutVertexArray,He.x,He.y,rt.x,rt.y,0,1,_e);const lt=k.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+A>Hn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),KA[n.type]!=="Polygon")continue;const U=[],Q=[],ne=k.vertexLength;for(const pe of _)if(pe.length!==0){pe!==_[0]&&Q.push(U.length/2);for(let _e=0;_e<pe.length;_e++){const Re=pe[_e];xh(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),U.push(Re.x),U.push(Re.y)}}const le=__(U,Q);for(let pe=0;pe<le.length;pe+=3)this.indexArray.emplaceBack(ne+le[pe],ne+le[pe+2],ne+le[pe+1]);k.primitiveLength+=le.length/3,k.vertexLength+=A}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function qA(o,n){return o.x===n.x&&(o.x<0||o.x>Vr)||o.y===n.y&&(o.y<0||o.y>Vr)}function JA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Vr)||o.every(n=>n.y<0)||o.every(n=>n.y>Vr)}_t("FillExtrusionBucket",bg,{omit:["layers","features"]});var QA={paint:new _i({"fill-extrusion-opacity":new Xt(T["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(T["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(T["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(T["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Os(T["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(T["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(T["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xt(T["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function wh(o,n){return o.x*n.x+o.y*n.y}function S_(o,n){if(o.length===1){let a=0;const h=n[a++];let p;for(;!p||h.equals(p);)if(p=n[a++],!p)return 1/0;for(;a<n.length;a++){const v=n[a],_=o[0],A=p.sub(h),k=v.sub(h),U=_.sub(h),Q=wh(A,A),ne=wh(A,k),le=wh(k,k),pe=wh(U,A),_e=wh(U,k),Re=Q*le-ne*ne,je=(le*pe-ne*_e)/Re,He=(Q*_e-ne*pe)/Re,rt=h.z*(1-je-He)+p.z*je+v.z*He;if(isFinite(rt))return rt}return 1/0}{let a=1/0;for(const h of n)a=Math.min(a,h.z);return a}}const eI=vr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:tI}=eI,nI=vr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:rI}=nI,iI=Bs.VectorTileFeature.types,oI=Math.cos(Math.PI/180*37.5),T_=Math.pow(2,14)/.5;class Eg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new _r,this.layoutVertexArray2=new yn,this.indexArray=new Li,this.programConfigurations=new Wl(n.layers,n.zoom),this.segments=new Hn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=vg("line",this.layers,a);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:A,id:k,index:U,sourceLayerIndex:Q}of n){const ne=this.layers[0]._featureFilter.needGeometry,le=Hl(A,ne);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),le,h))continue;const pe=v?p.evaluate(le,{},h):void 0,_e={id:k,properties:A.properties,type:A.type,sourceLayerIndex:Q,index:U,geometry:ne?le.geometry:Zl(A),patterns:{},sortKey:pe};_.push(_e)}v&&_.sort((A,k)=>A.sortKey-k.sortKey);for(const A of _){const{geometry:k,index:U,sourceLayerIndex:Q}=A;if(this.hasPattern){const ne=_g("line",this.layers,A,this.zoom,a);this.patternFeatures.push(ne)}else this.addFeature(A,k,U,h,{});a.featureIndex.insert(n[U].feature,k,U,Q,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,rI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,tI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,h,p,v){const _=this.layers[0].layout,A=_.get("line-join").evaluate(n,{}),k=_.get("line-cap"),U=_.get("line-miter-limit"),Q=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ne of a)this.addLine(ne,n,A,k,U,Q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,a,h,p,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let He=0;He<n.length-1;He++)this.totalDistance+=n[He].dist(n[He+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=iI[a.type]==="Polygon";let k=n.length;for(;k>=2&&n[k-1].equals(n[k-2]);)k--;let U=0;for(;U<k-1&&n[U].equals(n[U+1]);)U++;if(k<(A?3:2))return;h==="bevel"&&(v=1.05);const Q=this.overscaling<=16?122880/(512*this.overscaling):0,ne=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let le,pe,_e,Re,je;this.e1=this.e2=-1,A&&(le=n[k-2],je=n[U].sub(le)._unit()._perp());for(let He=U;He<k;He++){if(_e=He===k-1?A?n[U+1]:void 0:n[He+1],_e&&n[He].equals(_e))continue;je&&(Re=je),le&&(pe=le),le=n[He],je=_e?_e.sub(le)._unit()._perp():Re,Re=Re||je;let rt=Re.add(je);rt.x===0&&rt.y===0||rt._unit();const Je=Re.x*je.x+Re.y*je.y,lt=rt.x*je.x+rt.y*je.y,yt=lt!==0?1/lt:1/0,pt=2*Math.sqrt(2-2*lt),Rt=lt<oI&&pe&&_e,Jt=Re.x*je.y-Re.y*je.x>0;if(Rt&&He>U){const Tt=le.dist(pe);if(Tt>2*Q){const Ft=le.sub(le.sub(pe)._mult(Q/Tt)._round());this.updateDistance(pe,Ft),this.addCurrentVertex(Ft,Re,0,0,ne),pe=Ft}}const kt=pe&&_e;let Mt=kt?h:A?"butt":p;if(kt&&Mt==="round"&&(yt<_?Mt="miter":yt<=2&&(Mt="fakeround")),Mt==="miter"&&yt>v&&(Mt="bevel"),Mt==="bevel"&&(yt>2&&(Mt="flipbevel"),yt<v&&(Mt="miter")),pe&&this.updateDistance(pe,le),Mt==="miter")rt._mult(yt),this.addCurrentVertex(le,rt,0,0,ne);else if(Mt==="flipbevel"){if(yt>100)rt=je.mult(-1);else{const Tt=yt*Re.add(je).mag()/Re.sub(je).mag();rt._perp()._mult(Tt*(Jt?-1:1))}this.addCurrentVertex(le,rt,0,0,ne),this.addCurrentVertex(le,rt.mult(-1),0,0,ne)}else if(Mt==="bevel"||Mt==="fakeround"){const Tt=-Math.sqrt(yt*yt-1),Ft=Jt?Tt:0,zt=Jt?0:Tt;if(pe&&this.addCurrentVertex(le,Re,Ft,zt,ne),Mt==="fakeround"){const wt=Math.round(180*pt/Math.PI/20);for(let an=1;an<wt;an++){let en=an/wt;if(en!==.5){const Vn=en-.5;en+=en*Vn*(en-1)*((1.0904+Je*(Je*(3.55645-1.43519*Je)-3.2452))*Vn*Vn+(.848013+Je*(.215638*Je-1.06021)))}const Rn=je.sub(Re)._mult(en)._add(Re)._unit()._mult(Jt?-1:1);this.addHalfVertex(le,Rn.x,Rn.y,!1,Jt,0,ne)}}_e&&this.addCurrentVertex(le,je,-Ft,-zt,ne)}else if(Mt==="butt")this.addCurrentVertex(le,rt,0,0,ne);else if(Mt==="square"){const Tt=pe?1:-1;this.addCurrentVertex(le,rt,Tt,Tt,ne)}else Mt==="round"&&(pe&&(this.addCurrentVertex(le,Re,0,0,ne),this.addCurrentVertex(le,Re,1,1,ne,!0)),_e&&(this.addCurrentVertex(le,je,-1,-1,ne,!0),this.addCurrentVertex(le,je,0,0,ne)));if(Rt&&He<k-1){const Tt=le.dist(_e);if(Tt>2*Q){const Ft=le.add(_e.sub(le)._mult(Q/Tt)._round());this.updateDistance(le,Ft),this.addCurrentVertex(Ft,je,0,0,ne),le=Ft}}}}addCurrentVertex(n,a,h,p,v,_=!1){const A=a.y*p-a.x,k=-a.y-a.x*p;this.addHalfVertex(n,a.x+a.y*h,a.y-a.x*h,_,!1,h,v),this.addHalfVertex(n,A,k,_,!0,-p,v),this.distance>T_/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,a,h,p,v,_))}addHalfVertex({x:n,y:a},h,p,v,_,A,k){const U=.5*(this.lineClips?this.scaledDistance*(T_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(A===0?0:A<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Q),k.primitiveLength++),_?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}_t("LineBucket",Eg,{omit:["layers","patternFeatures"]});const aI=new _i({"line-cap":new Xt(T.layout_line["line-cap"]),"line-join":new sn(T.layout_line["line-join"]),"line-miter-limit":new Xt(T.layout_line["line-miter-limit"]),"line-round-limit":new Xt(T.layout_line["line-round-limit"]),"line-sort-key":new sn(T.layout_line["line-sort-key"])});var A_={paint:new _i({"line-opacity":new sn(T.paint_line["line-opacity"]),"line-color":new sn(T.paint_line["line-color"]),"line-translate":new Xt(T.paint_line["line-translate"]),"line-translate-anchor":new Xt(T.paint_line["line-translate-anchor"]),"line-width":new sn(T.paint_line["line-width"]),"line-gap-width":new sn(T.paint_line["line-gap-width"]),"line-offset":new sn(T.paint_line["line-offset"]),"line-blur":new sn(T.paint_line["line-blur"]),"line-dasharray":new Du(T.paint_line["line-dasharray"]),"line-pattern":new Os(T.paint_line["line-pattern"]),"line-gradient":new Ul(T.paint_line["line-gradient"])}),layout:aI};const I_=new class extends sn{possiblyEvaluate(o,n){return n=new or(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,a,h){return n=ee({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,a,h)}}(A_.paint.properties["line-width"].specification);function C_(o,n){return n>0?n+2*o:o}I_.useIntegerZoom=!0;const sI=vr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),lI=vr([{name:"a_projected_pos",components:3,type:"Float32"}],4);vr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const uI=vr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);vr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const P_=vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cI=vr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hI(o,n,a){return o.sections.forEach(h=>{h.text=function(p,v,_){const A=v.layout.get("text-transform").evaluate(_,{});return A==="uppercase"?p=p.toLocaleUpperCase():A==="lowercase"&&(p=p.toLocaleLowerCase()),vi.applyArabicShaping&&(p=vi.applyArabicShaping(p)),p}(h.text,n,a)}),o}vr([{name:"triangle",components:3,type:"Uint16"}]),vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),vr([{type:"Float32",name:"offsetX"}]),vr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const bh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Yr=24,Sg=Xn,k_=function(o,n,a,h,p){var v,_,A=8*p-h-1,k=(1<<A)-1,U=k>>1,Q=-7,ne=a?p-1:0,le=a?-1:1,pe=o[n+ne];for(ne+=le,v=pe&(1<<-Q)-1,pe>>=-Q,Q+=A;Q>0;v=256*v+o[n+ne],ne+=le,Q-=8);for(_=v&(1<<-Q)-1,v>>=-Q,Q+=h;Q>0;_=256*_+o[n+ne],ne+=le,Q-=8);if(v===0)v=1-U;else{if(v===k)return _?NaN:1/0*(pe?-1:1);_+=Math.pow(2,h),v-=U}return(pe?-1:1)*_*Math.pow(2,v-h)},M_=function(o,n,a,h,p,v){var _,A,k,U=8*v-p-1,Q=(1<<U)-1,ne=Q>>1,le=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,pe=h?0:v-1,_e=h?1:-1,Re=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(A=isNaN(n)?1:0,_=Q):(_=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-_))<1&&(_--,k*=2),(n+=_+ne>=1?le/k:le*Math.pow(2,1-ne))*k>=2&&(_++,k/=2),_+ne>=Q?(A=0,_=Q):_+ne>=1?(A=(n*k-1)*Math.pow(2,p),_+=ne):(A=n*Math.pow(2,ne-1)*Math.pow(2,p),_=0));p>=8;o[a+pe]=255&A,pe+=_e,A/=256,p-=8);for(_=_<<p|A,U+=p;U>0;o[a+pe]=255&_,pe+=_e,_/=256,U-=8);o[a+pe-_e]|=128*Re};function Xn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0,Xn.Fixed64=1,Xn.Bytes=2,Xn.Fixed32=5;var js,Tg=4294967296,z_=1/Tg,O_=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ts(o){return o.type===Xn.Bytes?o.readVarint()+o.pos:o.pos+1}function Xu(o,n,a){return a?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function L_(o,n,a){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(h);for(var p=a.pos-1;p>=o;p--)a.buf[p+h]=a.buf[p]}function fI(o,n){for(var a=0;a<o.length;a++)n.writeVarint(o[a])}function dI(o,n){for(var a=0;a<o.length;a++)n.writeSVarint(o[a])}function pI(o,n){for(var a=0;a<o.length;a++)n.writeFloat(o[a])}function mI(o,n){for(var a=0;a<o.length;a++)n.writeDouble(o[a])}function gI(o,n){for(var a=0;a<o.length;a++)n.writeBoolean(o[a])}function yI(o,n){for(var a=0;a<o.length;a++)n.writeFixed32(o[a])}function vI(o,n){for(var a=0;a<o.length;a++)n.writeSFixed32(o[a])}function _I(o,n){for(var a=0;a<o.length;a++)n.writeFixed64(o[a])}function xI(o,n){for(var a=0;a<o.length;a++)n.writeSFixed64(o[a])}function gd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Yu(o,n,a){o[a]=n,o[a+1]=n>>>8,o[a+2]=n>>>16,o[a+3]=n>>>24}function R_(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function wI(o,n,a){o===1&&a.readMessage(bI,n)}function bI(o,n,a){if(o===3){const{id:h,bitmap:p,width:v,height:_,left:A,top:k,advance:U}=a.readMessage(EI,{});n.push({id:h,bitmap:new mh({width:v+6,height:_+6},p),metrics:{width:v,height:_,left:A,top:k,advance:U}})}}function EI(o,n,a){o===1?n.id=a.readVarint():o===2?n.bitmap=a.readBytes():o===3?n.width=a.readVarint():o===4?n.height=a.readVarint():o===5?n.left=a.readSVarint():o===6?n.top=a.readSVarint():o===7&&(n.advance=a.readVarint())}function F_(o){let n=0,a=0;for(const _ of o)n+=_.w*_.h,a=Math.max(a,_.w);o.sort((_,A)=>A.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let p=0,v=0;for(const _ of o)for(let A=h.length-1;A>=0;A--){const k=h[A];if(!(_.w>k.w||_.h>k.h)){if(_.x=k.x,_.y=k.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===k.w&&_.h===k.h){const U=h.pop();A<h.length&&(h[A]=U)}else _.h===k.h?(k.x+=_.w,k.w-=_.w):_.w===k.w?(k.y+=_.h,k.h-=_.h):(h.push({x:k.x+_.w,y:k.y,w:k.w-_.w,h:_.h}),k.y+=_.h,k.h-=_.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}Xn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=gd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=R_(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=gd(this.buf,this.pos)+gd(this.buf,this.pos+4)*Tg;return this.pos+=8,o},readSFixed64:function(){var o=gd(this.buf,this.pos)+R_(this.buf,this.pos+4)*Tg;return this.pos+=8,o},readFloat:function(){var o=k_(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=k_(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,a,h=this.buf;return n=127&(a=h[this.pos++]),a<128?n:(n|=(127&(a=h[this.pos++]))<<7,a<128?n:(n|=(127&(a=h[this.pos++]))<<14,a<128?n:(n|=(127&(a=h[this.pos++]))<<21,a<128?n:function(p,v,_){var A,k,U=_.buf;if(A=(112&(k=U[_.pos++]))>>4,k<128||(A|=(127&(k=U[_.pos++]))<<3,k<128)||(A|=(127&(k=U[_.pos++]))<<10,k<128)||(A|=(127&(k=U[_.pos++]))<<17,k<128)||(A|=(127&(k=U[_.pos++]))<<24,k<128)||(A|=(1&(k=U[_.pos++]))<<31,k<128))return Xu(p,A,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&O_?function(a,h,p){return O_.decode(a.subarray(h,p))}(this.buf,n,o):function(a,h,p){for(var v="",_=h;_<p;){var A,k,U,Q=a[_],ne=null,le=Q>239?4:Q>223?3:Q>191?2:1;if(_+le>p)break;le===1?Q<128&&(ne=Q):le===2?(192&(A=a[_+1]))==128&&(ne=(31&Q)<<6|63&A)<=127&&(ne=null):le===3?(k=a[_+2],(192&(A=a[_+1]))==128&&(192&k)==128&&((ne=(15&Q)<<12|(63&A)<<6|63&k)<=2047||ne>=55296&&ne<=57343)&&(ne=null)):le===4&&(k=a[_+2],U=a[_+3],(192&(A=a[_+1]))==128&&(192&k)==128&&(192&U)==128&&((ne=(15&Q)<<18|(63&A)<<12|(63&k)<<6|63&U)<=65535||ne>=1114112)&&(ne=null)),ne===null?(ne=65533,le=1):ne>65535&&(ne-=65536,v+=String.fromCharCode(ne>>>10&1023|55296),ne=56320|1023&ne),v+=String.fromCharCode(ne),_+=le}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Xn.Bytes)return o.push(this.readVarint(n));var a=ts(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSVarint());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Xn.Bytes)return o.push(this.readBoolean());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFloat());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Xn.Bytes)return o.push(this.readDouble());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFixed32());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSFixed32());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFixed64());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSFixed64());var n=ts(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Xn.Fixed32)this.pos+=4;else{if(n!==Xn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Yu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Yu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Yu(this.buf,-1&o,this.pos),Yu(this.buf,Math.floor(o*z_),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Yu(this.buf,-1&o,this.pos),Yu(this.buf,Math.floor(o*z_),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,a){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,_,A){A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,A.buf[A.pos]=127&(v>>>=7)}(h,0,a),function(v,_){var A=(7&v)<<4;_.buf[_.pos++]|=A|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(p,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var _,A,k=0;k<p.length;k++){if((_=p.charCodeAt(k))>55295&&_<57344){if(!A){_>56319||k+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):A=_;continue}if(_<56320){h[v++]=239,h[v++]=191,h[v++]=189,A=_;continue}_=A-55296<<10|_-56320|65536,A=null}else A&&(h[v++]=239,h[v++]=191,h[v++]=189,A=null);_<128?h[v++]=_:(_<2048?h[v++]=_>>6|192:(_<65536?h[v++]=_>>12|224:(h[v++]=_>>18|240,h[v++]=_>>12&63|128),h[v++]=_>>6&63|128),h[v++]=63&_|128)}return v}(this.buf,o,this.pos);var a=this.pos-n;a>=128&&L_(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),M_(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),M_(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,n){this.pos++;var a=this.pos;o(n,this);var h=this.pos-a;h>=128&&L_(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,a){this.writeTag(o,Xn.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,fI,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,dI,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,gI,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,pI,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,mI,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,yI,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,vI,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,_I,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,xI,n)},writeBytesField:function(o,n){this.writeTag(o,Xn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Xn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Xn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Xn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,Boolean(n))}};class Ag{constructor(n,{pixelRatio:a,version:h,stretchX:p,stretchY:v,content:_}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=p,this.stretchY=v,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class B_{constructor(n,a){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(a,p,v);const{w:_,h:A}=F_(v),k=new uo({width:_||1,height:A||1});for(const U in n){const Q=n[U],ne=h[U].paddedRect;uo.copy(Q.data,k,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Q.data)}for(const U in a){const Q=a[U],ne=p[U].paddedRect,le=ne.x+1,pe=ne.y+1,_e=Q.data.width,Re=Q.data.height;uo.copy(Q.data,k,{x:0,y:0},{x:le,y:pe},Q.data),uo.copy(Q.data,k,{x:0,y:Re-1},{x:le,y:pe-1},{width:_e,height:1}),uo.copy(Q.data,k,{x:0,y:0},{x:le,y:pe+Re},{width:_e,height:1}),uo.copy(Q.data,k,{x:_e-1,y:0},{x:le-1,y:pe},{width:1,height:Re}),uo.copy(Q.data,k,{x:0,y:0},{x:le+_e,y:pe},{width:1,height:Re})}this.image=k,this.iconPositions=h,this.patternPositions=p}addImages(n,a,h){for(const p in n){const v=n[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(_),a[p]=new Ag(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),a)}patchUpdatedImage(n,a,h){if(!n||!a||n.version===a.version)return;n.version=a.version;const[p,v]=n.tl;h.update(a.data,void 0,{x:p,y:v})}}_t("ImagePosition",Ag),_t("ImageAtlas",B_),s.WritingMode=void 0,(js=s.WritingMode||(s.WritingMode={}))[js.none=0]="none",js[js.horizontal=1]="horizontal",js[js.vertical=2]="vertical",js[js.horizontalOnly=3]="horizontalOnly";const yd=-17;class Eh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const h=new Eh;return h.scale=n||1,h.fontStack=a,h}static forImage(n){const a=new Eh;return a.imageName=n,a}}class Ku{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const h=new Ku;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;a+=p&&Ko(p)&&!bh[n[h+1]]||v&&Ko(v)&&!bh[n[h-1]]||!bh[n[h]]?n[h]:bh[n[h]]}return a}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&_d[this.text.charCodeAt(h)];h++)n++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&_d[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const h=new Ku;return h.text=this.text.substring(n,a),h.sectionIndex=this.sectionIndex.slice(n,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Eh.forText(n.scale,n.fontStack||a));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void H("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Eh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):H("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vd(o,n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re){const je=Ku.fromFeature(o,p);let He;ne===s.WritingMode.vertical&&je.verticalizePunctuation();const{processBidirectionalText:rt,processStyledBidirectionalText:Je}=vi;if(rt&&je.sections.length===1){He=[];const pt=rt(je.toString(),Ig(je,U,v,n,h,pe,_e));for(const Rt of pt){const Jt=new Ku;Jt.text=Rt,Jt.sections=je.sections;for(let kt=0;kt<Rt.length;kt++)Jt.sectionIndex.push(0);He.push(Jt)}}else if(Je){He=[];const pt=Je(je.text,je.sectionIndex,Ig(je,U,v,n,h,pe,_e));for(const Rt of pt){const Jt=new Ku;Jt.text=Rt[0],Jt.sectionIndex=Rt[1],Jt.sections=je.sections,He.push(Jt)}}else He=function(pt,Rt){const Jt=[],kt=pt.text;let Mt=0;for(const Tt of Rt)Jt.push(pt.substring(Mt,Tt)),Mt=Tt;return Mt<kt.length&&Jt.push(pt.substring(Mt,kt.length)),Jt}(je,Ig(je,U,v,n,h,pe,_e));const lt=[],yt={positionedLines:lt,text:je.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:ne,iconsInText:!1,verticalizable:!1};return function(pt,Rt,Jt,kt,Mt,Tt,Ft,zt,wt,an,en,Rn){let Vn=0,sr=yd,lr=0,qr=0;const Mr=zt==="right"?1:zt==="left"?0:.5;let zr=0;for(const Or of Mt){Or.trim();const Qr=Or.getMaxScale(),li=(Qr-1)*Yr,xi={positionedGlyphs:[],lineOffset:0};pt.positionedLines[zr]=xi;const Bi=xi.positionedGlyphs;let ji=0;if(!Or.length()){sr+=Tt,++zr;continue}for(let Zr=0;Zr<Or.length();Zr++){const Mn=Or.getSection(Zr),qi=Or.getSectionIndex(Zr),ei=Or.getCharCode(Zr);let ui=0,Co=null,Qo=null,ea=null,ns=Yr;const Po=!(wt===s.WritingMode.horizontal||!en&&!Ms(ei)||en&&(_d[ei]||(Wr=ei,xt.Arabic(Wr)||xt["Arabic Supplement"](Wr)||xt["Arabic Extended-A"](Wr)||xt["Arabic Presentation Forms-A"](Wr)||xt["Arabic Presentation Forms-B"](Wr))));if(Mn.imageName){const co=kt[Mn.imageName];if(!co)continue;ea=Mn.imageName,pt.iconsInText=pt.iconsInText||!0,Qo=co.paddedRect;const Di=co.displaySize;Mn.scale=Mn.scale*Yr/Rn,Co={width:Di[0],height:Di[1],left:1,top:-3,advance:Po?Di[1]:Di[0]},ui=li+(Yr-Di[1]*Mn.scale),ns=Co.advance;const rs=Po?Di[0]*Mn.scale-Yr*Qr:Di[1]*Mn.scale-Yr*Qr;rs>0&&rs>ji&&(ji=rs)}else{const co=Jt[Mn.fontStack],Di=co&&co[ei];if(Di&&Di.rect)Qo=Di.rect,Co=Di.metrics;else{const rs=Rt[Mn.fontStack],Ah=rs&&rs[ei];if(!Ah)continue;Co=Ah.metrics}ui=(Qr-Mn.scale)*Yr}Po?(pt.verticalizable=!0,Bi.push({glyph:ei,imageName:ea,x:Vn,y:sr+ui,vertical:Po,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:qi,metrics:Co,rect:Qo}),Vn+=ns*Mn.scale+an):(Bi.push({glyph:ei,imageName:ea,x:Vn,y:sr+ui,vertical:Po,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:qi,metrics:Co,rect:Qo}),Vn+=Co.advance*Mn.scale+an)}Bi.length!==0&&(lr=Math.max(Vn-an,lr),AI(Bi,0,Bi.length-1,Mr,ji)),Vn=0;const pr=Tt*Qr+ji;xi.lineOffset=Math.max(ji,li),sr+=pr,qr=Math.max(pr,qr),++zr}var Wr;const Jr=sr-yd,{horizontalAlign:si,verticalAlign:Fi}=Cg(Ft);(function(Or,Qr,li,xi,Bi,ji,pr,Zr,Mn){const qi=(Qr-li)*Bi;let ei=0;ei=ji!==pr?-Zr*xi-yd:(-xi*Mn+.5)*pr;for(const ui of Or)for(const Co of ui.positionedGlyphs)Co.x+=qi,Co.y+=ei})(pt.positionedLines,Mr,si,Fi,lr,qr,Tt,Jr,Mt.length),pt.top+=-Fi*Jr,pt.bottom=pt.top+Jr,pt.left+=-si*lr,pt.right=pt.left+lr}(yt,n,a,h,He,_,A,k,ne,U,le,Re),!function(pt){for(const Rt of pt)if(Rt.positionedGlyphs.length!==0)return!1;return!0}(lt)&&yt}const _d={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},SI={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function j_(o,n,a,h,p,v){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*Yr/v+p:0}{const _=a[n.fontStack],A=_&&_[o];return A?A.metrics.advance*n.scale+p:0}}function D_(o,n,a,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(a)*a}function TI(o,n,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function N_(o,n,a,h,p,v){let _=null,A=D_(n,a,p,v);for(const k of h){const U=D_(n-k.x,a,p,v)+k.badness;U<=A&&(_=k,A=U)}return{index:o,x:n,priorBreak:_,badness:A}}function U_(o){return o?U_(o.priorBreak).concat(o.index):[]}function Ig(o,n,a,h,p,v,_){if(v!=="point")return[];if(!o)return[];const A=[],k=function(le,pe,_e,Re,je,He){let rt=0;for(let Je=0;Je<le.length();Je++){const lt=le.getSection(Je);rt+=j_(le.getCharCode(Je),lt,Re,je,pe,He)}return rt/Math.max(1,Math.ceil(rt/_e))}(o,n,a,h,p,_),U=o.text.indexOf("\u200B")>=0;let Q=0;for(let le=0;le<o.length();le++){const pe=o.getSection(le),_e=o.getCharCode(le);if(_d[_e]||(Q+=j_(_e,pe,h,p,n,_)),le<o.length()-1){const Re=!((ne=_e)<11904||!(xt["Bopomofo Extended"](ne)||xt.Bopomofo(ne)||xt["CJK Compatibility Forms"](ne)||xt["CJK Compatibility Ideographs"](ne)||xt["CJK Compatibility"](ne)||xt["CJK Radicals Supplement"](ne)||xt["CJK Strokes"](ne)||xt["CJK Symbols and Punctuation"](ne)||xt["CJK Unified Ideographs Extension A"](ne)||xt["CJK Unified Ideographs"](ne)||xt["Enclosed CJK Letters and Months"](ne)||xt["Halfwidth and Fullwidth Forms"](ne)||xt.Hiragana(ne)||xt["Ideographic Description Characters"](ne)||xt["Kangxi Radicals"](ne)||xt["Katakana Phonetic Extensions"](ne)||xt.Katakana(ne)||xt["Vertical Forms"](ne)||xt["Yi Radicals"](ne)||xt["Yi Syllables"](ne)));(SI[_e]||Re||pe.imageName)&&A.push(N_(le+1,Q,k,A,TI(_e,o.getCharCode(le+1),Re&&U),!1))}}var ne;return U_(N_(o.length(),Q,k,A,0,!0))}function Cg(o){let n=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function AI(o,n,a,h,p){if(!h&&!p)return;const v=o[a],_=(o[a].x+v.metrics.advance*v.scale)*h;for(let A=n;A<=a;A++)o[A].x-=_,o[A].y+=p}function II(o,n,a){const{horizontalAlign:h,verticalAlign:p}=Cg(a),v=n[0]-o.displaySize[0]*h,_=n[1]-o.displaySize[1]*p;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function $_(o,n,a,h,p,v){const _=o.image;let A;if(_.content){const je=_.content,He=_.pixelRatio||1;A=[je[0]/He,je[1]/He,_.displaySize[0]-je[2]/He,_.displaySize[1]-je[3]/He]}const k=n.left*v,U=n.right*v;let Q,ne,le,pe;a==="width"||a==="both"?(pe=p[0]+k-h[3],ne=p[0]+U+h[1]):(pe=p[0]+(k+U-_.displaySize[0])/2,ne=pe+_.displaySize[0]);const _e=n.top*v,Re=n.bottom*v;return a==="height"||a==="both"?(Q=p[1]+_e-h[0],le=p[1]+Re+h[2]):(Q=p[1]+(_e+Re-_.displaySize[1])/2,le=Q+_.displaySize[1]),{image:_,top:Q,right:ne,bottom:le,left:pe,collisionPadding:A}}const Ea=128;function Pg(o,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new or(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=a;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);const A=h[v],k=h[_];return a.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:k,interpolationType:p}:{kind:"camera",minZoom:A,maxZoom:k,minSize:a.evaluate(new or(A)),maxSize:a.evaluate(new or(k)),interpolationType:p}}}function V_(o,{uSize:n,uSizeT:a},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/Ea:o.kind==="composite"?nr(h/Ea,p/Ea,a):n}function G_(o,n){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=o,A=p?P(oi.interpolationFactor(p,n,v,_),0,1):0;o.kind==="camera"?h=nr(o.minSize,o.maxSize,A):a=A}return{uSizeT:a,uSize:h}}var CI=Object.freeze({__proto__:null,getSizeData:Pg,evaluateSizeForFeature:V_,evaluateSizeForZoom:G_,SIZE_PACK_FACTOR:Ea});class Ds extends ae{constructor(n,a,h,p){super(n,a),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Ds(this.x,this.y,this.angle,this.segment)}}function W_(o,n,a,h,p){if(n.segment===void 0)return!0;let v=n,_=n.segment+1,A=0;for(;A>-a/2;){if(_--,_<0)return!1;A-=o[_].dist(v),v=o[_]}A+=o[_].dist(o[_+1]),_++;const k=[];let U=0;for(;A<a/2;){const Q=o[_],ne=o[_+1];if(!ne)return!1;let le=o[_-1].angleTo(Q)-Q.angleTo(ne);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:A,angleDelta:le}),U+=le;A-k[0].distance>h;)U-=k.shift().angleDelta;if(U>p)return!1;_++,A+=Q.dist(ne)}return!0}function Z_(o){let n=0;for(let a=0;a<o.length-1;a++)n+=o[a].dist(o[a+1]);return n}function H_(o,n,a){return o?.6*n*a:0}function X_(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function PI(o,n,a,h,p,v){const _=H_(a,p,v),A=X_(a,h)*v;let k=0;const U=Z_(o)/2;for(let Q=0;Q<o.length-1;Q++){const ne=o[Q],le=o[Q+1],pe=ne.dist(le);if(k+pe>U){const _e=(U-k)/pe,Re=nr(ne.x,le.x,_e),je=nr(ne.y,le.y,_e),He=new Ds(Re,je,le.angleTo(ne),Q);return He._round(),!_||W_(o,He,A,_,n)?He:void 0}k+=pe}}function kI(o,n,a,h,p,v,_,A,k){const U=H_(h,v,_),Q=X_(h,p),ne=Q*_,le=o[0].x===0||o[0].x===k||o[0].y===0||o[0].y===k;return n-ne<n/4&&(n=ne+n/4),Y_(o,le?n/2*A%n:(Q/2+2*v)*_*A%n,n,U,a,ne,le,!1,k)}function Y_(o,n,a,h,p,v,_,A,k){const U=v/2,Q=Z_(o);let ne=0,le=n-a,pe=[];for(let _e=0;_e<o.length-1;_e++){const Re=o[_e],je=o[_e+1],He=Re.dist(je),rt=je.angleTo(Re);for(;le+a<ne+He;){le+=a;const Je=(le-ne)/He,lt=nr(Re.x,je.x,Je),yt=nr(Re.y,je.y,Je);if(lt>=0&&lt<k&&yt>=0&&yt<k&&le-U>=0&&le+U<=Q){const pt=new Ds(lt,yt,rt,_e);pt._round(),h&&!W_(o,pt,v,h,p)||pe.push(pt)}}ne+=He}return A||pe.length||_||(pe=Y_(o,ne/2,a,h,p,v,_,!0,k)),pe}function K_(o,n,a,h,p){const v=[];for(let _=0;_<o.length;_++){const A=o[_];let k;for(let U=0;U<A.length-1;U++){let Q=A[U],ne=A[U+1];Q.x<n&&ne.x<n||(Q.x<n?Q=new ae(n,Q.y+(n-Q.x)/(ne.x-Q.x)*(ne.y-Q.y))._round():ne.x<n&&(ne=new ae(n,Q.y+(n-Q.x)/(ne.x-Q.x)*(ne.y-Q.y))._round()),Q.y<a&&ne.y<a||(Q.y<a?Q=new ae(Q.x+(a-Q.y)/(ne.y-Q.y)*(ne.x-Q.x),a)._round():ne.y<a&&(ne=new ae(Q.x+(a-Q.y)/(ne.y-Q.y)*(ne.x-Q.x),a)._round()),Q.x>=h&&ne.x>=h||(Q.x>=h?Q=new ae(h,Q.y+(h-Q.x)/(ne.x-Q.x)*(ne.y-Q.y))._round():ne.x>=h&&(ne=new ae(h,Q.y+(h-Q.x)/(ne.x-Q.x)*(ne.y-Q.y))._round()),Q.y>=p&&ne.y>=p||(Q.y>=p?Q=new ae(Q.x+(p-Q.y)/(ne.y-Q.y)*(ne.x-Q.x),p)._round():ne.y>=p&&(ne=new ae(Q.x+(p-Q.y)/(ne.y-Q.y)*(ne.x-Q.x),p)._round()),k&&Q.equals(k[k.length-1])||(k=[Q],v.push(k)),k.push(ne)))))}}return v}function q_(o,n,a,h){const p=[],v=o.image,_=v.pixelRatio,A=v.paddedRect.w-2,k=v.paddedRect.h-2,U=o.right-o.left,Q=o.bottom-o.top,ne=v.stretchX||[[0,A]],le=v.stretchY||[[0,k]],pe=(Tt,Ft)=>Tt+Ft[1]-Ft[0],_e=ne.reduce(pe,0),Re=le.reduce(pe,0),je=A-_e,He=k-Re;let rt=0,Je=_e,lt=0,yt=Re,pt=0,Rt=je,Jt=0,kt=He;if(v.content&&h){const Tt=v.content;rt=xd(ne,0,Tt[0]),lt=xd(le,0,Tt[1]),Je=xd(ne,Tt[0],Tt[2]),yt=xd(le,Tt[1],Tt[3]),pt=Tt[0]-rt,Jt=Tt[1]-lt,Rt=Tt[2]-Tt[0]-Je,kt=Tt[3]-Tt[1]-yt}const Mt=(Tt,Ft,zt,wt)=>{const an=wd(Tt.stretch-rt,Je,U,o.left),en=bd(Tt.fixed-pt,Rt,Tt.stretch,_e),Rn=wd(Ft.stretch-lt,yt,Q,o.top),Vn=bd(Ft.fixed-Jt,kt,Ft.stretch,Re),sr=wd(zt.stretch-rt,Je,U,o.left),lr=bd(zt.fixed-pt,Rt,zt.stretch,_e),qr=wd(wt.stretch-lt,yt,Q,o.top),Mr=bd(wt.fixed-Jt,kt,wt.stretch,Re),zr=new ae(an,Rn),Wr=new ae(sr,Rn),Jr=new ae(sr,qr),si=new ae(an,qr),Fi=new ae(en/_,Vn/_),Or=new ae(lr/_,Mr/_),Qr=n*Math.PI/180;if(Qr){const Bi=Math.sin(Qr),ji=Math.cos(Qr),pr=[ji,-Bi,Bi,ji];zr._matMult(pr),Wr._matMult(pr),si._matMult(pr),Jr._matMult(pr)}const li=Tt.stretch+Tt.fixed,xi=Ft.stretch+Ft.fixed;return{tl:zr,tr:Wr,bl:si,br:Jr,tex:{x:v.paddedRect.x+1+li,y:v.paddedRect.y+1+xi,w:zt.stretch+zt.fixed-li,h:wt.stretch+wt.fixed-xi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fi,pixelOffsetBR:Or,minFontScaleX:Rt/_/U,minFontScaleY:kt/_/Q,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const Tt=J_(ne,je,_e),Ft=J_(le,He,Re);for(let zt=0;zt<Tt.length-1;zt++){const wt=Tt[zt],an=Tt[zt+1];for(let en=0;en<Ft.length-1;en++)p.push(Mt(wt,Ft[en],an,Ft[en+1]))}}else p.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:k+1}));return p}function xd(o,n,a){let h=0;for(const p of o)h+=Math.max(n,Math.min(a,p[1]))-Math.max(n,Math.min(a,p[0]));return h}function J_(o,n,a){const h=[{fixed:-1,stretch:0}];for(const[p,v]of o){const _=h[h.length-1];h.push({fixed:p-_.stretch,stretch:_.stretch}),h.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return h.push({fixed:n+1,stretch:a}),h}function wd(o,n,a,h){return o/n*a+h}function bd(o,n,a,h){return o-n*a/h}_t("Anchor",Ds);class Ed{constructor(n,a,h,p,v,_,A,k,U,Q){if(this.boxStartIndex=n.length,U){let ne=_.top,le=_.bottom;const pe=_.collisionPadding;pe&&(ne-=pe[1],le+=pe[3]);let _e=le-ne;_e>0&&(_e=Math.max(10,_e),this.circleDiameter=_e)}else{let ne=_.top*A-k,le=_.bottom*A+k,pe=_.left*A-k,_e=_.right*A+k;const Re=_.collisionPadding;if(Re&&(pe-=Re[0]*A,ne-=Re[1]*A,_e+=Re[2]*A,le+=Re[3]*A),Q){const je=new ae(pe,ne),He=new ae(_e,ne),rt=new ae(pe,le),Je=new ae(_e,le),lt=Q*Math.PI/180;je._rotate(lt),He._rotate(lt),rt._rotate(lt),Je._rotate(lt),pe=Math.min(je.x,He.x,rt.x,Je.x),_e=Math.max(je.x,He.x,rt.x,Je.x),ne=Math.min(je.y,He.y,rt.y,Je.y),le=Math.max(je.y,He.y,rt.y,Je.y)}n.emplaceBack(a.x,a.y,pe,ne,_e,le,h,p,v)}this.boxEndIndex=n.length}}class MI{constructor(n=[],a=zI){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:h}=this,p=a[n];for(;n>0;){const v=n-1>>1,_=a[v];if(h(p,_)>=0)break;a[n]=_,n=v}a[n]=p}_down(n){const{data:a,compare:h}=this,p=this.length>>1,v=a[n];for(;n<p;){let _=1+(n<<1),A=a[_];const k=_+1;if(k<this.length&&h(a[k],A)<0&&(_=k,A=a[k]),h(A,v)>=0)break;a[n]=A,n=_}a[n]=v}}function zI(o,n){return o<n?-1:o>n?1:0}function OI(o,n=1,a=!1){let h=1/0,p=1/0,v=-1/0,_=-1/0;const A=o[0];for(let pe=0;pe<A.length;pe++){const _e=A[pe];(!pe||_e.x<h)&&(h=_e.x),(!pe||_e.y<p)&&(p=_e.y),(!pe||_e.x>v)&&(v=_e.x),(!pe||_e.y>_)&&(_=_e.y)}const k=Math.min(v-h,_-p);let U=k/2;const Q=new MI([],LI);if(k===0)return new ae(h,p);for(let pe=h;pe<v;pe+=k)for(let _e=p;_e<_;_e+=k)Q.push(new qu(pe+U,_e+U,U,o));let ne=function(pe){let _e=0,Re=0,je=0;const He=pe[0];for(let rt=0,Je=He.length,lt=Je-1;rt<Je;lt=rt++){const yt=He[rt],pt=He[lt],Rt=yt.x*pt.y-pt.x*yt.y;Re+=(yt.x+pt.x)*Rt,je+=(yt.y+pt.y)*Rt,_e+=3*Rt}return new qu(Re/_e,je/_e,0,pe)}(o),le=Q.length;for(;Q.length;){const pe=Q.pop();(pe.d>ne.d||!ne.d)&&(ne=pe,a&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,le)),pe.max-ne.d<=n||(U=pe.h/2,Q.push(new qu(pe.p.x-U,pe.p.y-U,U,o)),Q.push(new qu(pe.p.x+U,pe.p.y-U,U,o)),Q.push(new qu(pe.p.x-U,pe.p.y+U,U,o)),Q.push(new qu(pe.p.x+U,pe.p.y+U,U,o)),le+=4)}return a&&(console.log(`num probes: ${le}`),console.log(`best distance: ${ne.d}`)),ne.p}function LI(o,n){return n.max-o.max}function qu(o,n,a,h){this.p=new ae(o,n),this.h=a,this.d=function(p,v){let _=!1,A=1/0;for(let k=0;k<v.length;k++){const U=v[k];for(let Q=0,ne=U.length,le=ne-1;Q<ne;le=Q++){const pe=U[Q],_e=U[le];pe.y>p.y!=_e.y>p.y&&p.x<(_e.x-pe.x)*(p.y-pe.y)/(_e.y-pe.y)+pe.x&&(_=!_),A=Math.min(A,l_(p,pe,_e))}}return(_?1:-1)*Math.sqrt(A)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const kg=Number.POSITIVE_INFINITY;function Q_(o,n){return n[1]!==kg?function(a,h,p){let v=0,_=0;switch(h=Math.abs(h),p=Math.abs(p),a){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,_]}(o,n[0],n[1]):function(a,h){let p=0,v=0;h<0&&(h=0);const _=h/Math.sqrt(2);switch(a){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(a){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function Mg(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function RI(o,n,a,h,p,v,_,A,k,U,Q){let ne=v.textMaxSize.evaluate(n,{});ne===void 0&&(ne=_);const le=o.layers[0].layout,pe=le.get("icon-offset").evaluate(n,{},Q),_e=tx(a.horizontal),Re=_/24,je=o.tilePixelRatio*Re,He=o.tilePixelRatio*ne/24,rt=o.tilePixelRatio*A,Je=o.tilePixelRatio*le.get("symbol-spacing"),lt=le.get("text-padding")*o.tilePixelRatio,yt=le.get("icon-padding")*o.tilePixelRatio,pt=le.get("text-max-angle")/180*Math.PI,Rt=le.get("text-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",Jt=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",kt=le.get("symbol-placement"),Mt=Je/2,Tt=le.get("icon-text-fit");let Ft;h&&Tt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(Ft=$_(h,a.vertical,Tt,le.get("icon-text-fit-padding"),pe,Re)),_e&&(h=$_(h,_e,Tt,le.get("icon-text-fit-padding"),pe,Re)));const zt=(wt,an)=>{an.x<0||an.x>=Vr||an.y<0||an.y>=Vr||function(en,Rn,Vn,sr,lr,qr,Mr,zr,Wr,Jr,si,Fi,Or,Qr,li,xi,Bi,ji,pr,Zr,Mn,qi,ei,ui,Co){const Qo=en.addToLineVertexArray(Rn,Vn);let ea,ns,Po,co,Di=0,rs=0,Ah=0,yx=0,Ug=-1,$g=-1;const is={};let vx=Ls(""),Vg=0,Gg=0;if(zr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Vg,Gg]=zr.layout.get("text-offset").evaluate(Mn,{},ui).map(Ni=>Ni*Yr):(Vg=zr.layout.get("text-radial-offset").evaluate(Mn,{},ui)*Yr,Gg=kg),en.allowVerticalPlacement&&sr.vertical){const Ni=zr.layout.get("text-rotate").evaluate(Mn,{},ui)+90;Po=new Ed(Wr,Rn,Jr,si,Fi,sr.vertical,Or,Qr,li,Ni),Mr&&(co=new Ed(Wr,Rn,Jr,si,Fi,Mr,Bi,ji,li,Ni))}if(lr){const Ni=zr.layout.get("icon-rotate").evaluate(Mn,{}),Sa=zr.layout.get("icon-text-fit")!=="none",Ih=q_(lr,Ni,ei,Sa),Ch=Mr?q_(Mr,Ni,ei,Sa):void 0;ns=new Ed(Wr,Rn,Jr,si,Fi,lr,Bi,ji,!1,Ni),Di=4*Ih.length;const wx=en.iconSizeData;let Kl=null;wx.kind==="source"?(Kl=[Ea*zr.layout.get("icon-size").evaluate(Mn,{})],Kl[0]>Ns&&H(`${en.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):wx.kind==="composite"&&(Kl=[Ea*qi.compositeIconSizes[0].evaluate(Mn,{},ui),Ea*qi.compositeIconSizes[1].evaluate(Mn,{},ui)],(Kl[0]>Ns||Kl[1]>Ns)&&H(`${en.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),en.addSymbols(en.icon,Ih,Kl,Zr,pr,Mn,s.WritingMode.none,Rn,Qo.lineStartIndex,Qo.lineLength,-1,ui),Ug=en.icon.placedSymbolArray.length-1,Ch&&(rs=4*Ch.length,en.addSymbols(en.icon,Ch,Kl,Zr,pr,Mn,s.WritingMode.vertical,Rn,Qo.lineStartIndex,Qo.lineLength,-1,ui),$g=en.icon.placedSymbolArray.length-1)}const _x=Object.keys(sr.horizontal);for(const Ni of _x){const Sa=sr.horizontal[Ni];if(!ea){vx=Ls(Sa.text);const Ch=zr.layout.get("text-rotate").evaluate(Mn,{},ui);ea=new Ed(Wr,Rn,Jr,si,Fi,Sa,Or,Qr,li,Ch)}const Ih=Sa.positionedLines.length===1;if(Ah+=ex(en,Rn,Sa,qr,zr,li,Mn,xi,Qo,sr.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,Ih?_x:[Ni],is,Ug,qi,ui),Ih)break}sr.vertical&&(yx+=ex(en,Rn,sr.vertical,qr,zr,li,Mn,xi,Qo,s.WritingMode.vertical,["vertical"],is,$g,qi,ui));const XI=ea?ea.boxStartIndex:en.collisionBoxArray.length,YI=ea?ea.boxEndIndex:en.collisionBoxArray.length,KI=Po?Po.boxStartIndex:en.collisionBoxArray.length,qI=Po?Po.boxEndIndex:en.collisionBoxArray.length,JI=ns?ns.boxStartIndex:en.collisionBoxArray.length,QI=ns?ns.boxEndIndex:en.collisionBoxArray.length,eC=co?co.boxStartIndex:en.collisionBoxArray.length,tC=co?co.boxEndIndex:en.collisionBoxArray.length;let ta=-1;const Cd=(Ni,Sa)=>Ni&&Ni.circleDiameter?Math.max(Ni.circleDiameter,Sa):Sa;ta=Cd(ea,ta),ta=Cd(Po,ta),ta=Cd(ns,ta),ta=Cd(co,ta);const xx=ta>-1?1:0;xx&&(ta*=Co/Yr),en.glyphOffsetArray.length>=Ju.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&en.addToSortKeyRanges(en.symbolInstances.length,Mn.sortKey),en.symbolInstances.emplaceBack(Rn.x,Rn.y,is.right>=0?is.right:-1,is.center>=0?is.center:-1,is.left>=0?is.left:-1,is.vertical||-1,Ug,$g,vx,XI,YI,KI,qI,JI,QI,eC,tC,Jr,Ah,yx,Di,rs,xx,0,Or,Vg,Gg,ta)}(o,an,wt,a,h,p,Ft,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,je,lt,Rt,k,rt,yt,Jt,pe,n,v,U,Q,_)};if(kt==="line")for(const wt of K_(n.geometry,0,0,Vr,Vr)){const an=kI(wt,Je,pt,a.vertical||_e,h,24,He,o.overscaling,Vr);for(const en of an){const Rn=_e;Rn&&FI(o,Rn.text,Mt,en)||zt(wt,en)}}else if(kt==="line-center"){for(const wt of n.geometry)if(wt.length>1){const an=PI(wt,pt,a.vertical||_e,h,24,He);an&&zt(wt,an)}}else if(n.type==="Polygon")for(const wt of yg(n.geometry,0)){const an=OI(wt,16);zt(wt[0],new Ds(an.x,an.y,0))}else if(n.type==="LineString")for(const wt of n.geometry)zt(wt,new Ds(wt[0].x,wt[0].y,0));else if(n.type==="Point")for(const wt of n.geometry)for(const an of wt)zt([an],new Ds(an.x,an.y,0))}const Ns=32640;function ex(o,n,a,h,p,v,_,A,k,U,Q,ne,le,pe,_e){const Re=function(rt,Je,lt,yt,pt,Rt,Jt,kt){const Mt=yt.layout.get("text-rotate").evaluate(Rt,{})*Math.PI/180,Tt=[];for(const Ft of Je.positionedLines)for(const zt of Ft.positionedGlyphs){if(!zt.rect)continue;const wt=zt.rect||{};let an=4,en=!0,Rn=1,Vn=0;const sr=(pt||kt)&&zt.vertical,lr=zt.metrics.advance*zt.scale/2;if(kt&&Je.verticalizable){const pr=(zt.scale-1)*Yr,Zr=(Yr-zt.metrics.width*zt.scale)/2;Vn=Ft.lineOffset/2-(zt.imageName?-Zr:pr)}if(zt.imageName){const pr=Jt[zt.imageName];en=pr.sdf,Rn=pr.pixelRatio,an=1/Rn}const qr=pt?[zt.x+lr,zt.y]:[0,0];let Mr=pt?[0,0]:[zt.x+lr+lt[0],zt.y+lt[1]-Vn],zr=[0,0];sr&&(zr=Mr,Mr=[0,0]);const Wr=(zt.metrics.left-an)*zt.scale-lr+Mr[0],Jr=(-zt.metrics.top-an)*zt.scale+Mr[1],si=Wr+wt.w*zt.scale/Rn,Fi=Jr+wt.h*zt.scale/Rn,Or=new ae(Wr,Jr),Qr=new ae(si,Jr),li=new ae(Wr,Fi),xi=new ae(si,Fi);if(sr){const pr=new ae(-lr,lr-yd),Zr=-Math.PI/2,Mn=12-lr,qi=new ae(22-Mn,-(zt.imageName?Mn:0)),ei=new ae(...zr);Or._rotateAround(Zr,pr)._add(qi)._add(ei),Qr._rotateAround(Zr,pr)._add(qi)._add(ei),li._rotateAround(Zr,pr)._add(qi)._add(ei),xi._rotateAround(Zr,pr)._add(qi)._add(ei)}if(Mt){const pr=Math.sin(Mt),Zr=Math.cos(Mt),Mn=[Zr,-pr,pr,Zr];Or._matMult(Mn),Qr._matMult(Mn),li._matMult(Mn),xi._matMult(Mn)}const Bi=new ae(0,0),ji=new ae(0,0);Tt.push({tl:Or,tr:Qr,bl:li,br:xi,tex:wt,writingMode:Je.writingMode,glyphOffset:qr,sectionIndex:zt.sectionIndex,isSDF:en,pixelOffsetTL:Bi,pixelOffsetBR:ji,minFontScaleX:0,minFontScaleY:0})}return Tt}(0,a,A,p,v,_,h,o.allowVerticalPlacement),je=o.textSizeData;let He=null;je.kind==="source"?(He=[Ea*p.layout.get("text-size").evaluate(_,{})],He[0]>Ns&&H(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):je.kind==="composite"&&(He=[Ea*pe.compositeTextSizes[0].evaluate(_,{},_e),Ea*pe.compositeTextSizes[1].evaluate(_,{},_e)],(He[0]>Ns||He[1]>Ns)&&H(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Re,He,A,v,_,U,n,k.lineStartIndex,k.lineLength,le,_e);for(const rt of Q)ne[rt]=o.text.placedSymbolArray.length-1;return 4*Re.length}function tx(o){for(const n in o)return o[n];return null}function FI(o,n,a,h){const p=o.compareText;if(n in p){const v=p[n];for(let _=v.length-1;_>=0;_--)if(h.dist(v[_])<a)return!0}else p[n]=[];return p[n].push(h),!1}const BI=Bs.VectorTileFeature.types,jI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sd(o,n,a,h,p,v,_,A,k,U,Q,ne,le){const pe=A?Math.min(Ns,Math.round(A[0])):0,_e=A?Math.min(Ns,Math.round(A[1])):0;o.emplaceBack(n,a,Math.round(32*h),Math.round(32*p),v,_,(pe<<1)+(k?1:0),_e,16*U,16*Q,256*ne,256*le)}function zg(o,n,a){o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a)}function DI(o){for(const n of o.sections)if(ng(n.text))return!0;return!1}class Og{constructor(n){this.layoutVertexArray=new dr,this.indexArray=new Li,this.programConfigurations=n,this.segments=new Hn,this.dynamicLayoutVertexArray=new Xr,this.opacityVertexArray=new zi,this.placedSymbolArray=new ut}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,lI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,jI,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_t("SymbolBuffers",Og);class Lg{constructor(n,a,h){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new h,this.segments=new Hn,this.collisionVertexArray=new so}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,uI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_t("CollisionBuffers",Lg);class Ju{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ug([]),this.placementViewportMatrix=ug([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pg(this.zoom,a["text-size"]),this.iconSizeData=Pg(this.zoom,a["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Fg(h,"text-overlap","text-allow-overlap")!=="never"||Fg(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>s.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new Og(new Wl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Og(new Wl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new gt,this.lineVertexArray=new Ht,this.symbolInstances=new bt}calculateGlyphDependencies(n,a,h,p,v){for(let _=0;_<n.length;_++)if(a[n.charCodeAt(_)]=!0,(h||p)&&v){const A=bh[n.charAt(_)];A&&(a[A.charCodeAt(0)]=!0)}}populate(n,a,h){const p=this.layers[0],v=p.layout,_=v.get("text-font"),A=v.get("text-field"),k=v.get("icon-image"),U=(A.value.kind!=="constant"||A.value.value instanceof Me&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),Q=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,ne=v.get("symbol-sort-key");if(this.features=[],!U&&!Q)return;const le=a.iconDependencies,pe=a.glyphDependencies,_e=a.availableImages,Re=new or(this.zoom);for(const{feature:je,id:He,index:rt,sourceLayerIndex:Je}of n){const lt=p._featureFilter.needGeometry,yt=Hl(je,lt);if(!p._featureFilter.filter(Re,yt,h))continue;let pt,Rt;if(lt||(yt.geometry=Zl(je)),U){const kt=p.getValueAndResolveTokens("text-field",yt,h,_e),Mt=Me.factory(kt);DI(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||zs()==="unavailable"||this.hasRTLText&&vi.isParsed())&&(pt=hI(Mt,p,yt))}if(Q){const kt=p.getValueAndResolveTokens("icon-image",yt,h,_e);Rt=kt instanceof Ve?kt:Ve.fromString(kt)}if(!pt&&!Rt)continue;const Jt=this.sortFeaturesByKey?ne.evaluate(yt,{},h):void 0;if(this.features.push({id:He,text:pt,icon:Rt,index:rt,sourceLayerIndex:Je,geometry:yt.geometry,properties:je.properties,type:BI[je.type],sortKey:Jt}),Rt&&(le[Rt.name]=!0),pt){const kt=_.evaluate(yt,{},h).join(","),Mt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const Tt of pt.sections)if(Tt.image)le[Tt.image.name]=!0;else{const Ft=ki(pt.toString()),zt=Tt.fontStack||kt,wt=pe[zt]=pe[zt]||{};this.calculateGlyphDependencies(Tt.text,wt,Mt,this.allowVerticalPlacement,Ft)}}}v.get("symbol-placement")==="line"&&(this.features=function(je){const He={},rt={},Je=[];let lt=0;function yt(kt){Je.push(je[kt]),lt++}function pt(kt,Mt,Tt){const Ft=rt[kt];return delete rt[kt],rt[Mt]=Ft,Je[Ft].geometry[0].pop(),Je[Ft].geometry[0]=Je[Ft].geometry[0].concat(Tt[0]),Ft}function Rt(kt,Mt,Tt){const Ft=He[Mt];return delete He[Mt],He[kt]=Ft,Je[Ft].geometry[0].shift(),Je[Ft].geometry[0]=Tt[0].concat(Je[Ft].geometry[0]),Ft}function Jt(kt,Mt,Tt){const Ft=Tt?Mt[0][Mt[0].length-1]:Mt[0][0];return`${kt}:${Ft.x}:${Ft.y}`}for(let kt=0;kt<je.length;kt++){const Mt=je[kt],Tt=Mt.geometry,Ft=Mt.text?Mt.text.toString():null;if(!Ft){yt(kt);continue}const zt=Jt(Ft,Tt),wt=Jt(Ft,Tt,!0);if(zt in rt&&wt in He&&rt[zt]!==He[wt]){const an=Rt(zt,wt,Tt),en=pt(zt,wt,Je[an].geometry);delete He[zt],delete rt[wt],rt[Jt(Ft,Je[en].geometry,!0)]=en,Je[an].geometry=null}else zt in rt?pt(zt,wt,Tt):wt in He?Rt(zt,wt,Tt):(yt(kt),He[zt]=lt-1,rt[wt]=lt-1)}return Je.filter(kt=>kt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((je,He)=>je.sortKey-He.sortKey)}update(n,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const _={};for(let A=n.segment+1;A<a.length;A++)_[A]={x:a[A].x,y:a[A].y,tileUnitDistanceFromAnchor:p},A<a.length-1&&(p+=a[A+1].dist(a[A]));for(let A=n.segment||0;A>=0;A--)_[A]={x:a[A].x,y:a[A].y,tileUnitDistanceFromAnchor:v},A>0&&(v+=a[A-1].dist(a[A]));for(let A=0;A<a.length;A++){const k=_[A];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,a,h,p,v,_,A,k,U,Q,ne,le){const pe=n.indexArray,_e=n.layoutVertexArray,Re=n.segments.prepareSegment(4*a.length,_e,pe,this.canOverlap?_.sortKey:void 0),je=this.glyphOffsetArray.length,He=Re.vertexLength,rt=this.allowVerticalPlacement&&A===s.WritingMode.vertical?Math.PI/2:0,Je=_.text&&_.text.sections;for(let lt=0;lt<a.length;lt++){const{tl:yt,tr:pt,bl:Rt,br:Jt,tex:kt,pixelOffsetTL:Mt,pixelOffsetBR:Tt,minFontScaleX:Ft,minFontScaleY:zt,glyphOffset:wt,isSDF:an,sectionIndex:en}=a[lt],Rn=Re.vertexLength,Vn=wt[1];Sd(_e,k.x,k.y,yt.x,Vn+yt.y,kt.x,kt.y,h,an,Mt.x,Mt.y,Ft,zt),Sd(_e,k.x,k.y,pt.x,Vn+pt.y,kt.x+kt.w,kt.y,h,an,Tt.x,Mt.y,Ft,zt),Sd(_e,k.x,k.y,Rt.x,Vn+Rt.y,kt.x,kt.y+kt.h,h,an,Mt.x,Tt.y,Ft,zt),Sd(_e,k.x,k.y,Jt.x,Vn+Jt.y,kt.x+kt.w,kt.y+kt.h,h,an,Tt.x,Tt.y,Ft,zt),zg(n.dynamicLayoutVertexArray,k,rt),pe.emplaceBack(Rn,Rn+1,Rn+2),pe.emplaceBack(Rn+1,Rn+2,Rn+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),lt!==a.length-1&&en===a[lt+1].sectionIndex||n.programConfigurations.populatePaintArrays(_e.length,_,_.index,{},le,Je&&Je[en])}n.placedSymbolArray.emplaceBack(k.x,k.y,je,this.glyphOffsetArray.length-je,He,U,Q,k.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],A,0,!1,0,ne)}_addCollisionDebugVertex(n,a,h,p,v,_){return a.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,a,h,p,v,_,A){const k=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=k.vertexLength,Q=v.layoutVertexArray,ne=v.collisionVertexArray,le=A.anchorX,pe=A.anchorY;this._addCollisionDebugVertex(Q,ne,_,le,pe,new ae(n,a)),this._addCollisionDebugVertex(Q,ne,_,le,pe,new ae(h,a)),this._addCollisionDebugVertex(Q,ne,_,le,pe,new ae(h,p)),this._addCollisionDebugVertex(Q,ne,_,le,pe,new ae(n,p)),k.vertexLength+=4;const _e=v.indexArray;_e.emplaceBack(U,U+1),_e.emplaceBack(U+1,U+2),_e.emplaceBack(U+2,U+3),_e.emplaceBack(U+3,U),k.primitiveLength+=4}addDebugCollisionBoxes(n,a,h,p){for(let v=n;v<a;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lg(Oi,P_.members,lo),this.iconCollisionBox=new Lg(Oi,P_.members,lo);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,h,p,v,_,A,k,U){const Q={};for(let ne=a;ne<h;ne++){const le=n.get(ne);Q.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.textFeatureIndex=le.featureIndex;break}for(let ne=p;ne<v;ne++){const le=n.get(ne);Q.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.verticalTextFeatureIndex=le.featureIndex;break}for(let ne=_;ne<A;ne++){const le=n.get(ne);Q.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.iconFeatureIndex=le.featureIndex;break}for(let ne=k;ne<U;ne++){const le=n.get(ne);Q.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},Q.verticalIconFeatureIndex=le.featureIndex;break}return Q}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const h=n.placedSymbolArray.get(a),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),h=Math.cos(n),p=[],v=[],_=[];for(let A=0;A<this.symbolInstances.length;++A){_.push(A);const k=this.symbolInstances.get(A);p.push(0|Math.round(a*k.anchorX+h*k.anchorY)),v.push(k.featureIndex)}return _.sort((A,k)=>p[A]-p[k]||v[k]-v[A]),_}addToSortKeyRanges(n,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}_t("SymbolBucket",Ju,{omit:["layers","collisionBoxArray","features","compareText"]}),Ju.MAX_GLYPHS=65535,Ju.addDynamicAttributes=zg;const NI=new _i({"symbol-placement":new Xt(T.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(T.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(T.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(T.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(T.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xt(T.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Xt(T.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Xt(T.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(T.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(T.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(T.layout_symbol["icon-size"]),"icon-text-fit":new Xt(T.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(T.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(T.layout_symbol["icon-image"]),"icon-rotate":new sn(T.layout_symbol["icon-rotate"]),"icon-padding":new Xt(T.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(T.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(T.layout_symbol["icon-offset"]),"icon-anchor":new sn(T.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(T.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(T.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(T.layout_symbol["text-rotation-alignment"]),"text-field":new sn(T.layout_symbol["text-field"]),"text-font":new sn(T.layout_symbol["text-font"]),"text-size":new sn(T.layout_symbol["text-size"]),"text-max-width":new sn(T.layout_symbol["text-max-width"]),"text-line-height":new Xt(T.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(T.layout_symbol["text-letter-spacing"]),"text-justify":new sn(T.layout_symbol["text-justify"]),"text-radial-offset":new sn(T.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(T.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(T.layout_symbol["text-anchor"]),"text-max-angle":new Xt(T.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(T.layout_symbol["text-writing-mode"]),"text-rotate":new sn(T.layout_symbol["text-rotate"]),"text-padding":new Xt(T.layout_symbol["text-padding"]),"text-keep-upright":new Xt(T.layout_symbol["text-keep-upright"]),"text-transform":new sn(T.layout_symbol["text-transform"]),"text-offset":new sn(T.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(T.layout_symbol["text-allow-overlap"]),"text-overlap":new Xt(T.layout_symbol["text-overlap"]),"text-ignore-placement":new Xt(T.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(T.layout_symbol["text-optional"])});var Rg={paint:new _i({"icon-opacity":new sn(T.paint_symbol["icon-opacity"]),"icon-color":new sn(T.paint_symbol["icon-color"]),"icon-halo-color":new sn(T.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(T.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(T.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(T.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(T.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(T.paint_symbol["text-opacity"]),"text-color":new sn(T.paint_symbol["text-color"],{runtimeType:Tr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sn(T.paint_symbol["text-halo-color"]),"text-halo-width":new sn(T.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(T.paint_symbol["text-halo-blur"]),"text-translate":new Xt(T.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(T.paint_symbol["text-translate-anchor"])}),layout:NI};class nx{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:pn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_t("FormatSectionOverride",nx,{omit:["defaultValue"]});class Td extends Mi{constructor(n){super(n,Rg)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,h,p){const v=this.layout.get(n).evaluate(a,{},h,p),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Vo(_.value)||!v?v:function(A,k){return k.replace(/{([^{}]+)}/g,(U,Q)=>Q in A?String(A[Q]):"")}(a.properties,v)}createBucket(n){return new Ju(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Rg.paint.overridableProperties){if(!Td.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),h=new nx(a),p=new Ll(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new Cs("source",p):new Ps("composite",p,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new Ao(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Td.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const h=n.get("text-field"),p=Rg.paint.properties[a];let v=!1;const _=A=>{for(const k of A)if(p.overrides&&p.overrides.hasOverride(k))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Me)_(h.value.value.sections);else if(h.value.kind==="source"){const A=U=>{v||(U instanceof mt&&Ge(U.value)===pi?_(U.value.sections):U instanceof jt?_(U.sections):U.eachChild(A))},k=h.value;k._styleExpression&&A(k._styleExpression.expression)}return v}}function Fg(o,n,a){let h="never";const p=o.get(n);return p?h=p:o.get(a)&&(h="always"),h}var UI={paint:new _i({"background-color":new Xt(T.paint_background["background-color"]),"background-pattern":new Du(T.paint_background["background-pattern"]),"background-opacity":new Xt(T.paint_background["background-opacity"])})},$I={paint:new _i({"raster-opacity":new Xt(T.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xt(T.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(T.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(T.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(T.paint_raster["raster-saturation"]),"raster-contrast":new Xt(T.paint_raster["raster-contrast"]),"raster-resampling":new Xt(T.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(T.paint_raster["raster-fade-duration"])})};class VI extends Mi{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const GI={circle:class extends Mi{constructor(o){super(o,wA)}createBucket(o){return new ag(o)}queryRadius(o){const n=o;return ph("circle-radius",this,n)+ph("circle-stroke-width",this,n)+ld(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,a,h,p,v,_,A){const k=ud(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,_),U=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a),Q=this.paint.get("circle-pitch-alignment")==="map",ne=Q?k:function(pe,_e){return pe.map(Re=>h_(Re,_e))}(k,A),le=Q?U*_:U;for(const pe of h)for(const _e of pe){const Re=Q?_e:h_(_e,A);let je=le;const He=hd(cg(),cd(_e.x,_e.y,0,1),A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?je*=He[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(je*=v.cameraToCenterDistance/He[3]),gA(ne,Re,je))return!0}return!1}},heatmap:class extends Mi{constructor(o){super(o,EA),this._updateColorRamp()}createBucket(o){return new f_(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=p_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Mi{constructor(o){super(o,SA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Mi{constructor(o){super(o,NA)}recalculate(o,n){super.recalculate(o,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new xg(o)}queryRadius(){return ld(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,a,h,p,v,_){return s_(ud(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,_),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Mi{constructor(o){super(o,QA)}createBucket(o){return new bg(o)}queryRadius(){return ld(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,a,h,p,v,_,A){const k=ud(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,_),U=this.paint.get("fill-extrusion-height").evaluate(n,a),Q=this.paint.get("fill-extrusion-base").evaluate(n,a),ne=function(pe,_e,Re,je){const He=[];for(const rt of pe){const Je=cd(rt.x,rt.y,0,1);hd(Je,Je,_e),He.push(new ae(Je[0]/Je[3],Je[1]/Je[3]))}return He}(k,A),le=function(pe,_e,Re,je){const He=[],rt=[],Je=je[8]*_e,lt=je[9]*_e,yt=je[10]*_e,pt=je[11]*_e,Rt=je[8]*Re,Jt=je[9]*Re,kt=je[10]*Re,Mt=je[11]*Re;for(const Tt of pe){const Ft=[],zt=[];for(const wt of Tt){const an=wt.x,en=wt.y,Rn=je[0]*an+je[4]*en+je[12],Vn=je[1]*an+je[5]*en+je[13],sr=je[2]*an+je[6]*en+je[14],lr=je[3]*an+je[7]*en+je[15],qr=sr+yt,Mr=lr+pt,zr=Rn+Rt,Wr=Vn+Jt,Jr=sr+kt,si=lr+Mt,Fi=new ae((Rn+Je)/Mr,(Vn+lt)/Mr);Fi.z=qr/Mr,Ft.push(Fi);const Or=new ae(zr/si,Wr/si);Or.z=Jr/si,zt.push(Or)}He.push(Ft),rt.push(zt)}return[He,rt]}(h,Q,U,A);return function(pe,_e,Re){let je=1/0;s_(Re,_e)&&(je=S_(Re,_e[0]));for(let He=0;He<_e.length;He++){const rt=_e[He],Je=pe[He];for(let lt=0;lt<rt.length-1;lt++){const yt=rt[lt],pt=[yt,rt[lt+1],Je[lt+1],Je[lt],yt];a_(Re,pt)&&(je=Math.min(je,S_(Re,pt)))}}return je!==1/0&&je}(le[0],le[1],ne)}},line:class extends Mi{constructor(o){super(o,A_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=I_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Eg(o)}queryRadius(o){const n=o,a=C_(ph("line-width",this,n),ph("line-gap-width",this,n)),h=ph("line-offset",this,n);return a/2+Math.abs(h)+ld(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,a,h,p,v,_){const A=ud(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,_),k=_/2*C_(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),U=this.paint.get("line-offset").evaluate(n,a);return U&&(h=function(Q,ne){const le=[],pe=new ae(0,0);for(let _e=0;_e<Q.length;_e++){const Re=Q[_e],je=[];for(let He=0;He<Re.length;He++){const rt=Re[He-1],Je=Re[He],lt=Re[He+1],yt=He===0?pe:Je.sub(rt)._unit()._perp(),pt=He===Re.length-1?pe:lt.sub(Je)._unit()._perp(),Rt=yt._add(pt)._unit();Rt._mult(1/(Rt.x*pt.x+Rt.y*pt.y)),je.push(Rt._mult(ne)._add(Je))}le.push(je)}return le}(h,U*_)),function(Q,ne,le){for(let pe=0;pe<ne.length;pe++){const _e=ne[pe];if(Q.length>=3){for(let Re=0;Re<_e.length;Re++)if(Wu(Q,_e[Re]))return!0}if(yA(Q,_e,le))return!0}return!1}(A,h,k)}isTileClipped(){return!0}},symbol:Td,background:class extends Mi{constructor(o){super(o,UI)}},raster:class extends Mi{constructor(o){super(o,$I)}}};class WI{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const rx=63710088e-1;class Er{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Er(N(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,h=this.lat*a,p=n.lat*a,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*a);return rx*Math.acos(Math.min(v,1))}toBounds(n=0){const a=360*n/40075017,h=a/Math.cos(Math.PI/180*this.lat);return new Yl(new Er(this.lng-h,this.lat-a),new Er(this.lng+h,this.lat+a))}static convert(n){if(n instanceof Er)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Er(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Er(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Yl{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Er?new Er(n.lng,n.lat):Er.convert(n),this}setSouthWest(n){return this._sw=n instanceof Er?new Er(n.lng,n.lat):Er.convert(n),this}extend(n){const a=this._sw,h=this._ne;let p,v;if(n instanceof Er)p=n,v=n;else{if(!(n instanceof Yl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Yl.convert(n)):this.extend(Er.convert(n)):this;if(p=n._sw,v=n._ne,!p||!v)return this}return a||h?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new Er(p.lng,p.lat),this._ne=new Er(v.lng,v.lat)),this}getCenter(){return new Er((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Er(this.getWest(),this.getNorth())}getSouthEast(){return new Er(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:h}=Er.convert(n);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(n){return n instanceof Yl?n:n&&new Yl(n)}}const ix=2*Math.PI*rx;function ox(o){return ix*Math.cos(o*Math.PI/180)}function ax(o){return(180+o)/360}function sx(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function lx(o,n){return o/ox(n)}function Bg(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Ad{constructor(n,a,h=0){this.x=+n,this.y=+a,this.z=+h}static fromLngLat(n,a=0){const h=Er.convert(n);return new Ad(ax(h.lng),sx(h.lat),lx(a,h.lat))}toLngLat(){return new Er(360*this.x-180,Bg(this.y))}toAltitude(){return this.z*ox(Bg(this.y))}meterInMercatorCoordinateUnits(){return 1/ix*(n=Bg(this.y),1/Math.cos(n*Math.PI/180));var n}}function ux(o,n,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class jg{constructor(n,a,h){this.z=n,this.x=a,this.y=h,this.key=Sh(0,n,n,a,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,h){const p=(_=this.y,A=this.z,k=ux(256*(v=this.x),256*(_=Math.pow(2,A)-_-1),A),U=ux(256*(v+1),256*(_+1),A),k[0]+","+k[1]+","+U[0]+","+U[1]);var v,_,A,k,U;const Q=function(ne,le,pe){let _e,Re="";for(let je=ne;je>0;je--)_e=1<<je-1,Re+=(le&_e?1:0)+(pe&_e?2:0);return Re}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,Q).replace(/{bbox-epsg-3857}/g,p)}getTilePoint(n){const a=Math.pow(2,this.z);return new ae((n.x*a-this.x)*Vr,(n.y*a-this.y)*Vr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cx{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Sh(n,a.z,a.z,a.x,a.y)}}class Io{constructor(n,a,h,p,v){this.overscaledZ=n,this.wrap=a,this.canonical=new jg(h,+p,+v),this.key=Sh(a,n,h,p,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new Io(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){const h=this.canonical.z-n;return n>this.canonical.z?Sh(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Sh(this.wrap*+a,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Io(a,this.wrap,a,h,p),new Io(a,this.wrap,a,h+1,p),new Io(a,this.wrap,a,h,p+1),new Io(a,this.wrap,a,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Io(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Ad(n.x-this.wrap,n.y))}}function Sh(o,n,a,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*p+h).toString(36)+a.toString(36)+n.toString(36)}_t("CanonicalTileID",jg),_t("OverscaledTileID",Io,{omit:["posMatrix"]});class hx{constructor(n,a,h){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void H(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const p=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<p;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(p,v)]=this.data[this._idx(p-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,p)]=this.data[this._idx(v,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]}get(n,a){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}_unpackMapbox(n,a,h){return(256*n*256+256*a+h)/10-1e4}_unpackTerrarium(n,a,h){return 256*n+a+h/256-32768}getPixels(){return new uo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,v=a*this.dim+this.dim,_=h*this.dim,A=h*this.dim+this.dim;switch(a){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:_=A-1;break;case 1:A=_+1}const k=-a*this.dim,U=-h*this.dim;for(let Q=_;Q<A;Q++)for(let ne=p;ne<v;ne++)this.data[this._idx(ne,Q)]=n.data[this._idx(ne+k,Q+U)]}}_t("DEMData",hx);class fx{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const h=n[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}class dx{constructor(n,a,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n=function(a,h){var p={};for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&h.indexOf(v)<0&&(p[v]=a[v]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(v=Object.getOwnPropertySymbols(a);_<v.length;_++)h.indexOf(v[_])<0&&Object.prototype.propertyIsEnumerable.call(a,v[_])&&(p[v[_]]=a[v[_]])}return p}(this,["_geometry","_vectorTileFeature"]);return n.geometry=this.geometry,n}}class px{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Zt(Vr,16,0),this.grid3D=new Zt(Vr,16,0),this.featureIndexArray=new fn,this.promoteId=a}insert(n,a,h,p,v,_){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const k=_?this.grid3D:this.grid;for(let U=0;U<a.length;U++){const Q=a[U],ne=[1/0,1/0,-1/0,-1/0];for(let le=0;le<Q.length;le++){const pe=Q[le];ne[0]=Math.min(ne[0],pe.x),ne[1]=Math.min(ne[1],pe.y),ne[2]=Math.max(ne[2],pe.x),ne[3]=Math.max(ne[3],pe.y)}ne[0]<Vr&&ne[1]<Vr&&ne[2]>=0&&ne[3]>=0&&k.insert(A,ne[0],ne[1],ne[2],ne[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Bs.VectorTile(new Sg(this.rawTileData)).layers,this.sourceLayerCoder=new fx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,h,p){this.loadVTLayers();const v=n.params||{},_=Vr/n.tileSize/n.scale,A=ya(v.filter),k=n.queryGeometry,U=n.queryPadding*_,Q=gx(k),ne=this.grid.query(Q.minX-U,Q.minY-U,Q.maxX+U,Q.maxY+U),le=gx(n.cameraQueryGeometry),pe=this.grid3D.query(le.minX-U,le.minY-U,le.maxX+U,le.maxY+U,(je,He,rt,Je)=>function(lt,yt,pt,Rt,Jt){for(const Mt of lt)if(yt<=Mt.x&&pt<=Mt.y&&Rt>=Mt.x&&Jt>=Mt.y)return!0;const kt=[new ae(yt,pt),new ae(yt,Jt),new ae(Rt,Jt),new ae(Rt,pt)];if(lt.length>2){for(const Mt of kt)if(Wu(lt,Mt))return!0}for(let Mt=0;Mt<lt.length-1;Mt++)if(_A(lt[Mt],lt[Mt+1],kt))return!0;return!1}(n.cameraQueryGeometry,je-U,He-U,rt+U,Je+U));for(const je of pe)ne.push(je);ne.sort(ZI);const _e={};let Re;for(let je=0;je<ne.length;je++){const He=ne[je];if(He===Re)continue;Re=He;const rt=this.featureIndexArray.get(He);let Je=null;this.loadMatchingFeature(_e,rt.bucketIndex,rt.sourceLayerIndex,rt.featureIndex,A,v.layers,v.availableImages,a,h,p,(lt,yt,pt)=>(Je||(Je=Zl(lt)),yt.queryIntersectsFeature(k,lt,pt,Je,this.z,n.transform,_,n.pixelPosMatrix)))}return _e}loadMatchingFeature(n,a,h,p,v,_,A,k,U,Q,ne){const le=this.bucketLayerIDs[a];if(_&&!function(je,He){for(let rt=0;rt<je.length;rt++)if(He.indexOf(je[rt])>=0)return!0;return!1}(_,le))return;const pe=this.sourceLayerCoder.decode(h),_e=this.vtLayers[pe].feature(p);if(v.needGeometry){const je=Hl(_e,!0);if(!v.filter(new or(this.tileID.overscaledZ),je,this.tileID.canonical))return}else if(!v.filter(new or(this.tileID.overscaledZ),_e))return;const Re=this.getId(_e,pe);for(let je=0;je<le.length;je++){const He=le[je];if(_&&_.indexOf(He)<0)continue;const rt=k[He];if(!rt)continue;let Je={};Re&&Q&&(Je=Q.getState(rt.sourceLayer||"_geojsonTileLayer",Re));const lt=ee({},U[He]);lt.paint=mx(lt.paint,rt.paint,_e,Je,A),lt.layout=mx(lt.layout,rt.layout,_e,Je,A);const yt=!ne||ne(_e,rt,Je);if(!yt)continue;const pt=new dx(_e,this.z,this.x,this.y,Re);pt.layer=lt;let Rt=n[He];Rt===void 0&&(Rt=n[He]=[]),Rt.push({featureIndex:p,feature:pt,intersectionZ:yt})}}lookupSymbolFeatures(n,a,h,p,v,_,A,k){const U={};this.loadVTLayers();const Q=ya(v);for(const ne of n)this.loadMatchingFeature(U,h,p,ne,Q,_,A,k,a);return U}hasLayer(n){for(const a of this.bucketLayerIDs)for(const h of a)if(n===h)return!0;return!1}getId(n,a){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function mx(o,n,a,h,p){return $(o,(v,_)=>{const A=n instanceof ju?n.get(_):null;return A&&A.evaluate?A.evaluate(a,h,p):A})}function gx(o){let n=1/0,a=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:a,maxX:h,maxY:p}}function ZI(o,n){return n-o}var Dg;_t("FeatureIndex",px,{omit:["rawTileData","sourceLayerCoder"]}),s.PerformanceMarkers=void 0,(Dg=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",Dg.load="load",Dg.fullLoad="fullLoad";let Id=null,Th=[];const Ng=1e3/30,HI={mark(o){performance.mark(o)},frame(o){const n=o;Id!=null&&Th.push(n-Id),Id=n},clearMetrics(){Id=null,Th=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure("fullLoadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,a=Th.length,h=1/(Th.reduce((v,_)=>v+_,0)/a/1e3),p=Th.filter(v=>v>Ng).reduce((v,_)=>v+(_-Ng)/Ng,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(a+p)*100}}};s.AJAXError=qt,s.ARRAY_TYPE=Xl,s.Actor=class{constructor(o,n,a){this.target=o,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},W(["receive","process"],this),this.invoker=new WI(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=M()?o:window}send(o,n,a,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const _=ye(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!a,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Wn(n,_)},_),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[a];const h=this.cancelCallbacks[a];delete this.cancelCallbacks[a],h&&h()}else M()||n.mustQueue?(this.tasks[a]=n,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(n.error?a(Jn(n.error)):a(null,Jn(n.data)))}else{let a=!1;const h=ye(this.globalScope)?void 0:[],p=n.hasCallback?(A,k)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:A?Wn(A):null,data:Wn(k,h)},h)}:A=>{a=!0};let v=null;const _=Jn(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,_,p);else if(this.parent.getWorkerSource){const A=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,A[0],_.source)[A[1]](_,p)}else p(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=mh,s.CanonicalTileID=jg,s.CollisionBoxArray=ht,s.CollisionCircleLayoutArray=class extends B{},s.Color=J,s.DEMData=hx,s.DataConstantProperty=Xt,s.DictionaryCoder=fx,s.EXTENT=Vr,s.ErrorEvent=at,s.EvaluationParameters=or,s.Event=Ke,s.Evented=se,s.FeatureIndex=px,s.FillBucket=xg,s.FillExtrusionBucket=bg,s.GeoJSONFeature=dx,s.ImageAtlas=B_,s.ImagePosition=Ag,s.LineBucket=Eg,s.LineStripIndexArray=class extends We{},s.LngLat=Er,s.LngLatBounds=Yl,s.MercatorCoordinate=Ad,s.ONE_EM=Yr,s.OverscaledTileID=Io,s.PerformanceUtils=HI,s.PosArray=class extends Vl{},s.Properties=_i,s.QuadTriangleArray=class extends ie{},s.RGBAImage=uo,s.RasterBoundsArray=class extends Uu{},s.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},s.ResourceType=At,s.SegmentVector=Hn,s.SymbolBucket=Ju,s.Transitionable=hh,s.TriangleIndexArray=Li,s.Uniform1f=Qa,s.Uniform1i=class extends Ja{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},s.Uniform2f=class extends Ja{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},s.Uniform3f=class extends Ja{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},s.Uniform4f=Vu,s.UniformColor=n_,s.UniformMatrix4f=class extends Ja{constructor(o,n){super(o,n),this.current=pA}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},s.UnwrappedTileID=cx,s.ValidationError=z,s.ZoomHistory=Ar,s.addDynamicAttributes=zg,s.asyncAll=function(o,n,a){if(!o.length)return a(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((_,A)=>{n(_,(k,U)=>{k&&(v=k),p[A]=U,--h==0&&a(v,p)})})},s.bezier=C,s.bindAll=W,s.cacheEntryPossiblyAdded=function(o){Be++,Be>be&&(o.getActor().send("enforceCacheSizeLimit",ke),Be=0)},s.clamp=P,s.clearTileCache=function(o){const n=caches.delete(Ee);o&&n.catch(o).then(()=>o())},s.clipLine=K_,s.clone=function(o){var n=new Xl(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},s.clone$1=V,s.collisionCircleLayout=cI,s.config=ue,s.create=function(){var o=new Xl(16);return Xl!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},s.createExpression=Ga,s.createFilter=ya,s.createLayout=vr,s.createStyleLayer=function(o){return o.type==="custom"?new VI(o):new GI[o.type](o)},s.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},s.ease=S,s.emitValidationErrors=Wt,s.enforceCacheSizeLimit=function(o){Ie(),Pe&&Pe.then(n=>{n.keys().then(a=>{for(let h=0;h<a.length-o;h++)n.delete(a[h])})})},s.evaluateSizeForFeature=V_,s.evaluateSizeForZoom=G_,s.evaluateVariableOffset=Q_,s.evented=uh,s.exported=te,s.exported$1=Ze,s.extend=ee,s.filterObject=G,s.fromValues=cd,s.getAnchorAlignment=Cg,s.getAnchorJustification=Mg,s.getArrayBuffer=_n,s.getImage=R,s.getJSON=function(o,n){return En(ee(o,{type:"json"}),n)},s.getOverlapMode=Fg,s.getRTLTextPluginStatus=zs,s.getReferrer=Bt,s.getVideo=function(o,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");nn(o[h])||(a.crossOrigin="Anonymous"),p.src=o[h],a.appendChild(p)}return{cancel:()=>{}}},s.identity=ug,s.invert=function(o,n){var a=n[0],h=n[1],p=n[2],v=n[3],_=n[4],A=n[5],k=n[6],U=n[7],Q=n[8],ne=n[9],le=n[10],pe=n[11],_e=n[12],Re=n[13],je=n[14],He=n[15],rt=a*A-h*_,Je=a*k-p*_,lt=a*U-v*_,yt=h*k-p*A,pt=h*U-v*A,Rt=p*U-v*k,Jt=Q*Re-ne*_e,kt=Q*je-le*_e,Mt=Q*He-pe*_e,Tt=ne*je-le*Re,Ft=ne*He-pe*Re,zt=le*He-pe*je,wt=rt*zt-Je*Ft+lt*Tt+yt*Mt-pt*kt+Rt*Jt;return wt?(o[0]=(A*zt-k*Ft+U*Tt)*(wt=1/wt),o[1]=(p*Ft-h*zt-v*Tt)*wt,o[2]=(Re*Rt-je*pt+He*yt)*wt,o[3]=(le*pt-ne*Rt-pe*yt)*wt,o[4]=(k*Mt-_*zt-U*kt)*wt,o[5]=(a*zt-p*Mt+v*kt)*wt,o[6]=(je*lt-_e*Rt-He*Je)*wt,o[7]=(Q*Rt-le*lt+pe*Je)*wt,o[8]=(_*Ft-A*Mt+U*Jt)*wt,o[9]=(h*Mt-a*Ft-v*Jt)*wt,o[10]=(_e*pt-Re*lt+He*rt)*wt,o[11]=(ne*lt-Q*pt-pe*rt)*wt,o[12]=(A*kt-_*Tt-k*Jt)*wt,o[13]=(a*Tt-h*kt+p*Jt)*wt,o[14]=(Re*Je-_e*yt-je*rt)*wt,o[15]=(Q*yt-ne*Je+le*rt)*wt,o):null},s.isImageBitmap=xe,s.isSafari=ye,s.keysDifference=function(o,n){const a=[];for(const h in o)h in n||a.push(h);return a},s.lazyLoadRTLTextPlugin=function(){vi.isLoading()||vi.isLoaded()||zs()!=="deferred"||nd()},s.makeRequest=En,s.mapObject=$,s.mercatorXfromLng=ax,s.mercatorYfromLat=sx,s.mercatorZfromAltitude=lx,s.mul=bA,s.multiply=c_,s.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},s.number=nr,s.ortho=function(o,n,a,h,p,v,_){var A=1/(n-a),k=1/(h-p),U=1/(v-_);return o[0]=-2*A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*k,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*U,o[11]=0,o[12]=(n+a)*A,o[13]=(p+h)*k,o[14]=(_+v)*U,o[15]=1,o},s.parseCacheControl=D,s.parseGlyphPBF=function(o){return new Sg(o).readFields(wI,[])},s.pbf=Sg,s.performSymbolLayout=function(o,n,a,h,p,v,_){o.createArrays(),o.tilePixelRatio=Vr/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const A=o.layers[0].layout,k=o.layers[0]._unevaluatedLayout._values,U={layoutIconSize:k["icon-size"].possiblyEvaluate(new or(o.zoom+1),_),layoutTextSize:k["text-size"].possiblyEvaluate(new or(o.zoom+1),_),textMaxSize:k["text-size"].possiblyEvaluate(new or(18))};if(o.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Re}=o.textSizeData;U.compositeTextSizes=[k["text-size"].possiblyEvaluate(new or(_e),_),k["text-size"].possiblyEvaluate(new or(Re),_)]}if(o.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Re}=o.iconSizeData;U.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new or(_e),_),k["icon-size"].possiblyEvaluate(new or(Re),_)]}const Q=A.get("text-line-height")*Yr,ne=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point",le=A.get("text-keep-upright"),pe=A.get("text-size");for(const _e of o.features){const Re=A.get("text-font").evaluate(_e,{},_).join(","),je=pe.evaluate(_e,{},_),He=U.layoutTextSize.evaluate(_e,{},_),rt=U.layoutIconSize.evaluate(_e,{},_),Je={horizontal:{},vertical:void 0},lt=_e.text;let yt,pt=[0,0];if(lt){const kt=lt.toString(),Mt=A.get("text-letter-spacing").evaluate(_e,{},_)*Yr,Tt=ao(kt)?Mt:0,Ft=A.get("text-anchor").evaluate(_e,{},_),zt=A.get("text-variable-anchor");if(!zt){const Vn=A.get("text-radial-offset").evaluate(_e,{},_);pt=Vn?Q_(Ft,[Vn*Yr,kg]):A.get("text-offset").evaluate(_e,{},_).map(sr=>sr*Yr)}let wt=ne?"center":A.get("text-justify").evaluate(_e,{},_);const an=A.get("symbol-placement"),en=an==="point"?A.get("text-max-width").evaluate(_e,{},_)*Yr:0,Rn=()=>{o.allowVerticalPlacement&&ki(kt)&&(Je.vertical=vd(lt,n,a,p,Re,en,Q,Ft,"left",Tt,pt,s.WritingMode.vertical,!0,an,He,je))};if(!ne&&zt){const Vn=wt==="auto"?zt.map(lr=>Mg(lr)):[wt];let sr=!1;for(let lr=0;lr<Vn.length;lr++){const qr=Vn[lr];if(!Je.horizontal[qr])if(sr)Je.horizontal[qr]=Je.horizontal[0];else{const Mr=vd(lt,n,a,p,Re,en,Q,"center",qr,Tt,pt,s.WritingMode.horizontal,!1,an,He,je);Mr&&(Je.horizontal[qr]=Mr,sr=Mr.positionedLines.length===1)}}Rn()}else{wt==="auto"&&(wt=Mg(Ft));const Vn=vd(lt,n,a,p,Re,en,Q,Ft,wt,Tt,pt,s.WritingMode.horizontal,!1,an,He,je);Vn&&(Je.horizontal[wt]=Vn),Rn(),ki(kt)&&ne&&le&&(Je.vertical=vd(lt,n,a,p,Re,en,Q,Ft,wt,Tt,pt,s.WritingMode.vertical,!1,an,He,je))}}let Rt=!1;if(_e.icon&&_e.icon.name){const kt=h[_e.icon.name];kt&&(yt=II(p[_e.icon.name],A.get("icon-offset").evaluate(_e,{},_),A.get("icon-anchor").evaluate(_e,{},_)),Rt=!!kt.sdf,o.sdfIcons===void 0?o.sdfIcons=Rt:o.sdfIcons!==Rt&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(kt.pixelRatio!==o.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const Jt=tx(Je.horizontal)||Je.vertical;o.iconsInText=!!Jt&&Jt.iconsInText,(Jt||yt)&&RI(o,_e,Je,yt,h,U,He,rt,pt,Rt,_)}v&&o.generateCollisionDebugBuffers()},s.perspective=function(o,n,a,h,p){var v,_=1/Math.tan(n/2);return o[0]=_/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},s.pick=function(o,n){const a={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(a[p]=o[p])}return a},s.plugin=vi,s.pointGeometry=ae,s.polygonIntersectsPolygon=a_,s.potpack=F_,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=_t,s.registerForPluginStateChange=function(o){return o({pluginStatus:yi,pluginURL:xa}),uh.on("pluginStateChange",o),o},s.renderColorRamp=p_,s.rotateX=function(o,n,a){var h=Math.sin(a),p=Math.cos(a),v=n[4],_=n[5],A=n[6],k=n[7],U=n[8],Q=n[9],ne=n[10],le=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+U*h,o[5]=_*p+Q*h,o[6]=A*p+ne*h,o[7]=k*p+le*h,o[8]=U*p-v*h,o[9]=Q*p-_*h,o[10]=ne*p-A*h,o[11]=le*p-k*h,o},s.rotateZ=function(o,n,a){var h=Math.sin(a),p=Math.cos(a),v=n[0],_=n[1],A=n[2],k=n[3],U=n[4],Q=n[5],ne=n[6],le=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+U*h,o[1]=_*p+Q*h,o[2]=A*p+ne*h,o[3]=k*p+le*h,o[4]=U*p-v*h,o[5]=Q*p-_*h,o[6]=ne*p-A*h,o[7]=le*p-k*h,o},s.scale=function(o,n,a){var h=a[0],p=a[1],v=a[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},s.scale$1=function(o,n,a){return o[0]=n[0]*a,o[1]=n[1]*a,o[2]=n[2]*a,o[3]=n[3]*a,o},s.setCacheLimits=function(o,n){ke=o,be=n},s.setRTLTextPlugin=function(o,n,a=!1){if(yi===oh||yi===Fu||yi===ah)throw new Error("setRTLTextPlugin cannot be called multiple times.");xa=te.resolveURL(o),yi=oh,sh=n,lh(),a||nd()},s.spec=T,s.sphericalToCartesian=function([o,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(a),y:o*Math.sin(n)*Math.sin(a),z:o*Math.cos(a)}},s.symbolSize=CI,s.toEvaluationFeature=Hl,s.transformMat4=hd,s.translate=function(o,n,a){var h,p,v,_,A,k,U,Q,ne,le,pe,_e,Re=a[0],je=a[1],He=a[2];return n===o?(o[12]=n[0]*Re+n[4]*je+n[8]*He+n[12],o[13]=n[1]*Re+n[5]*je+n[9]*He+n[13],o[14]=n[2]*Re+n[6]*je+n[10]*He+n[14],o[15]=n[3]*Re+n[7]*je+n[11]*He+n[15]):(p=n[1],v=n[2],_=n[3],A=n[4],k=n[5],U=n[6],Q=n[7],ne=n[8],le=n[9],pe=n[10],_e=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=_,o[4]=A,o[5]=k,o[6]=U,o[7]=Q,o[8]=ne,o[9]=le,o[10]=pe,o[11]=_e,o[12]=h*Re+A*je+ne*He+n[12],o[13]=p*Re+k*je+le*He+n[13],o[14]=v*Re+U*je+pe*He+n[14],o[15]=_*Re+Q*je+_e*He+n[15]),o},s.triggerPluginCompletionEvent=td,s.unicodeBlockLookup=xt,s.uniqueId=function(){return Y++},s.validateCustomStyleLayer=function(o){const n=[],a=o.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},s.validateLight=nt,s.validateStyle=Le,s.vectorTile=Bs,s.warnOnce=H,s.wrap=N}),d(["./shared"],function(s){function w(Ae){const Z=typeof Ae;if(Z==="number"||Z==="boolean"||Z==="string"||Ae==null)return JSON.stringify(Ae);if(Array.isArray(Ae)){let Ce="[";for(const Me of Ae)Ce+=`${w(Me)},`;return`${Ce}]`}const J=Object.keys(Ae).sort();let ve="{";for(let Ce=0;Ce<J.length;Ce++)ve+=`${JSON.stringify(J[Ce])}:${w(Ae[J[Ce]])},`;return`${ve}}`}function E(Ae){let Z="";for(const J of s.refProperties)Z+=`/${w(Ae[J])}`;return Z}class C{constructor(Z){this.keyCache={},Z&&this.replace(Z)}replace(Z){this._layerConfigs={},this._layers={},this.update(Z,[])}update(Z,J){for(const Ce of Z){this._layerConfigs[Ce.id]=Ce;const Me=this._layers[Ce.id]=s.createStyleLayer(Ce);Me._featureFilter=s.createFilter(Me.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of J)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const ve=function(Ce,Me){const Ve={};for(let Ue=0;Ue<Ce.length;Ue++){const Ge=Me&&Me[Ce[Ue].id]||E(Ce[Ue]);Me&&(Me[Ce[Ue].id]=Ge);let st=Ve[Ge];st||(st=Ve[Ge]=[]),st.push(Ce[Ue])}const Ne=[];for(const Ue in Ve)Ne.push(Ve[Ue]);return Ne}(Object.values(this._layerConfigs),this.keyCache);for(const Ce of ve){const Me=Ce.map(mt=>this._layers[mt.id]),Ve=Me[0];if(Ve.visibility==="none")continue;const Ne=Ve.source||"";let Ue=this.familiesBySource[Ne];Ue||(Ue=this.familiesBySource[Ne]={});const Ge=Ve.sourceLayer||"_geojsonTileLayer";let st=Ue[Ge];st||(st=Ue[Ge]=[]),st.push(Me)}}}class S{constructor(Z){const J={},ve=[];for(const Ne in Z){const Ue=Z[Ne],Ge=J[Ne]={};for(const st in Ue){const mt=Ue[+st];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const ot={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};ve.push(ot),Ge[st]={rect:ot,metrics:mt.metrics}}}const{w:Ce,h:Me}=s.potpack(ve),Ve=new s.AlphaImage({width:Ce||1,height:Me||1});for(const Ne in Z){const Ue=Z[Ne];for(const Ge in Ue){const st=Ue[+Ge];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const mt=J[Ne][Ge].rect;s.AlphaImage.copy(st.bitmap,Ve,{x:0,y:0},{x:mt.x+1,y:mt.y+1},st.bitmap)}}this.image=Ve,this.positions=J}}s.register("GlyphAtlas",S);class P{constructor(Z){this.tileID=new s.OverscaledTileID(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId}parse(Z,J,ve,Ce,Me){this.status="parsing",this.data=Z,this.collisionBoxArray=new s.CollisionBoxArray;const Ve=new s.DictionaryCoder(Object.keys(Z.layers).sort()),Ne=new s.FeatureIndex(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const Ue={},Ge={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ve},st=J.familiesBySource[this.source];for(const Sn in st){const xn=Z.layers[Sn];if(!xn)continue;xn.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${Sn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wn=Ve.encode(Sn),Qn=[];for(let cr=0;cr<xn.length;cr++){const Kn=xn.feature(cr),vo=Ne.getId(Kn,Sn);Qn.push({feature:Kn,id:vo,index:cr,sourceLayerIndex:wn})}for(const cr of st[Sn]){const Kn=cr[0];Kn.minzoom&&this.zoom<Math.floor(Kn.minzoom)||Kn.maxzoom&&this.zoom>=Kn.maxzoom||Kn.visibility!=="none"&&(N(cr,this.zoom,ve),(Ue[Kn.id]=Kn.createBucket({index:Ne.bucketLayerIDs.length,layers:cr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wn,sourceID:this.source})).populate(Qn,Ge,this.tileID.canonical),Ne.bucketLayerIDs.push(cr.map(vo=>vo.id)))}}let mt,ot,Nt,It;const jt=s.mapObject(Ge.glyphDependencies,Sn=>Object.keys(Sn).map(Number));Object.keys(jt).length?Ce.send("getGlyphs",{uid:this.uid,stacks:jt},(Sn,xn)=>{mt||(mt=Sn,ot=xn,vn.call(this))}):ot={};const tn=Object.keys(Ge.iconDependencies);tn.length?Ce.send("getImages",{icons:tn,source:this.source,tileID:this.tileID,type:"icons"},(Sn,xn)=>{mt||(mt=Sn,Nt=xn,vn.call(this))}):Nt={};const Dt=Object.keys(Ge.patternDependencies);function vn(){if(mt)return Me(mt);if(ot&&Nt&&It){const Sn=new S(ot),xn=new s.ImageAtlas(Nt,It);for(const wn in Ue){const Qn=Ue[wn];Qn instanceof s.SymbolBucket?(N(Qn.layers,this.zoom,ve),s.performSymbolLayout(Qn,ot,Sn.positions,Nt,xn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Qn.hasPattern&&(Qn instanceof s.LineBucket||Qn instanceof s.FillBucket||Qn instanceof s.FillExtrusionBucket)&&(N(Qn.layers,this.zoom,ve),Qn.addFeatures(Ge,this.tileID.canonical,xn.patternPositions))}this.status="done",Me(null,{buckets:Object.values(Ue).filter(wn=>!wn.isEmpty()),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sn.image,imageAtlas:xn,glyphMap:this.returnDependencies?ot:null,iconMap:this.returnDependencies?Nt:null,glyphPositions:this.returnDependencies?Sn.positions:null})}}Dt.length?Ce.send("getImages",{icons:Dt,source:this.source,tileID:this.tileID,type:"patterns"},(Sn,xn)=>{mt||(mt=Sn,It=xn,vn.call(this))}):It={},vn.call(this)}}function N(Ae,Z,J){const ve=new s.EvaluationParameters(Z);for(const Ce of Ae)Ce.recalculate(ve,J)}function ee(Ae,Z){const J=s.getArrayBuffer(Ae.request,(ve,Ce,Me,Ve)=>{ve?Z(ve):Ce&&Z(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(Ce)),rawData:Ce,cacheControl:Me,expires:Ve})});return()=>{J.cancel(),Z()}}class Y{constructor(Z,J,ve,Ce){this.actor=Z,this.layerIndex=J,this.availableImages=ve,this.loadVectorData=Ce||ee,this.loading={},this.loaded={}}loadTile(Z,J){const ve=Z.uid;this.loading||(this.loading={});const Ce=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new s.RequestPerformance(Z.request),Me=this.loading[ve]=new P(Z);Me.abort=this.loadVectorData(Z,(Ve,Ne)=>{if(delete this.loading[ve],Ve||!Ne)return Me.status="done",this.loaded[ve]=Me,J(Ve);const Ue=Ne.rawData,Ge={};Ne.expires&&(Ge.expires=Ne.expires),Ne.cacheControl&&(Ge.cacheControl=Ne.cacheControl);const st={};if(Ce){const mt=Ce.finish();mt&&(st.resourceTiming=JSON.parse(JSON.stringify(mt)))}Me.vectorTile=Ne.vectorTile,Me.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(mt,ot)=>{if(mt||!ot)return J(mt);J(null,s.extend({rawTileData:Ue.slice(0)},ot,Ge,st))}),this.loaded=this.loaded||{},this.loaded[ve]=Me})}reloadTile(Z,J){const ve=this.loaded,Ce=Z.uid,Me=this;if(ve&&ve[Ce]){const Ve=ve[Ce];Ve.showCollisionBoxes=Z.showCollisionBoxes;const Ne=(Ue,Ge)=>{const st=Ve.reloadCallback;st&&(delete Ve.reloadCallback,Ve.parse(Ve.vectorTile,Me.layerIndex,this.availableImages,Me.actor,st)),J(Ue,Ge)};Ve.status==="parsing"?Ve.reloadCallback=Ne:Ve.status==="done"&&(Ve.vectorTile?Ve.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,Ne):Ne())}}abortTile(Z,J){const ve=this.loading,Ce=Z.uid;ve&&ve[Ce]&&ve[Ce].abort&&(ve[Ce].abort(),delete ve[Ce]),J()}removeTile(Z,J){const ve=this.loaded,Ce=Z.uid;ve&&ve[Ce]&&delete ve[Ce],J()}}class W{constructor(){this.loaded={}}loadTile(Z,J){const{uid:ve,encoding:Ce,rawImageData:Me}=Z,Ve=s.isImageBitmap(Me)?this.getImageData(Me):Me,Ne=new s.DEMData(ve,Ve,Ce);this.loaded=this.loaded||{},this.loaded[ve]=Ne,J(null,Ne)}getImageData(Z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Z.width,Z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Z.width,this.offscreenCanvas.height=Z.height,this.offscreenCanvasContext.drawImage(Z,0,0,Z.width,Z.height);const J=this.offscreenCanvasContext.getImageData(-1,-1,Z.width+2,Z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:J.width,height:J.height},J.data)}removeTile(Z){const J=this.loaded,ve=Z.uid;J&&J[ve]&&delete J[ve]}}var $=function Ae(Z,J){var ve,Ce=Z&&Z.type;if(Ce==="FeatureCollection")for(ve=0;ve<Z.features.length;ve++)Ae(Z.features[ve],J);else if(Ce==="GeometryCollection")for(ve=0;ve<Z.geometries.length;ve++)Ae(Z.geometries[ve],J);else if(Ce==="Feature")Ae(Z.geometry,J);else if(Ce==="Polygon")G(Z.coordinates,J);else if(Ce==="MultiPolygon")for(ve=0;ve<Z.coordinates.length;ve++)G(Z.coordinates[ve],J);return Z};function G(Ae,Z){if(Ae.length!==0){V(Ae[0],Z);for(var J=1;J<Ae.length;J++)V(Ae[J],!Z)}}function V(Ae,Z){for(var J=0,ve=0,Ce=0,Me=Ae.length,Ve=Me-1;Ce<Me;Ve=Ce++){var Ne=(Ae[Ce][0]-Ae[Ve][0])*(Ae[Ve][1]+Ae[Ce][1]),Ue=J+Ne;ve+=Math.abs(J)>=Math.abs(Ne)?J-Ue+Ne:Ne-Ue+J,J=Ue}J+ve>=0!=!!Z&&Ae.reverse()}const re=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class H{constructor(Z){this._feature=Z,this.extent=s.EXTENT,this.type=Z.type,this.properties=Z.tags,"id"in Z&&!isNaN(Z.id)&&(this.id=parseInt(Z.id,10))}loadGeometry(){if(this._feature.type===1){const Z=[];for(const J of this._feature.geometry)Z.push([new s.pointGeometry(J[0],J[1])]);return Z}{const Z=[];for(const J of this._feature.geometry){const ve=[];for(const Ce of J)ve.push(new s.pointGeometry(Ce[0],Ce[1]));Z.push(ve)}return Z}}toGeoJSON(Z,J,ve){return re.call(this,Z,J,ve)}}class F{constructor(Z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Z.length,this._features=Z}feature(Z){return new H(this._features[Z])}}var b={exports:{}},M=s.pointGeometry,D=s.vectorTile.VectorTileFeature,q=K;function K(Ae,Z){this.options=Z||{},this.features=Ae,this.length=Ae.length}function de(Ae,Z){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=Z||4096}K.prototype.feature=function(Ae){return new de(this.features[Ae],this.options.extent)},de.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var Z=0;Z<Ae.length;Z++){for(var J=Ae[Z],ve=[],Ce=0;Ce<J.length;Ce++)ve.push(new M(J[Ce][0],J[Ce][1]));this.geometry.push(ve)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,Z=1/0,J=-1/0,ve=1/0,Ce=-1/0,Me=0;Me<Ae.length;Me++)for(var Ve=Ae[Me],Ne=0;Ne<Ve.length;Ne++){var Ue=Ve[Ne];Z=Math.min(Z,Ue.x),J=Math.max(J,Ue.x),ve=Math.min(ve,Ue.y),Ce=Math.max(Ce,Ue.y)}return[Z,ve,J,Ce]},de.prototype.toGeoJSON=D.prototype.toGeoJSON;var ye=s.pbf,xe=q;function te(Ae){var Z=new ye;return function(J,ve){for(var Ce in J.layers)ve.writeMessage(3,ae,J.layers[Ce])}(Ae,Z),Z.finish()}function ae(Ae,Z){var J;Z.writeVarintField(15,Ae.version||1),Z.writeStringField(1,Ae.name||""),Z.writeVarintField(5,Ae.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<Ae.length;J++)ve.feature=Ae.feature(J),Z.writeMessage(2,oe,ve);var Ce=ve.keys;for(J=0;J<Ce.length;J++)Z.writeStringField(3,Ce[J]);var Me=ve.values;for(J=0;J<Me.length;J++)Z.writeMessage(4,ke,Me[J])}function oe(Ae,Z){var J=Ae.feature;J.id!==void 0&&Z.writeVarintField(1,J.id),Z.writeMessage(2,ue,Ae),Z.writeVarintField(3,J.type),Z.writeMessage(4,ce,J)}function ue(Ae,Z){var J=Ae.feature,ve=Ae.keys,Ce=Ae.values,Me=Ae.keycache,Ve=Ae.valuecache;for(var Ne in J.properties){var Ue=J.properties[Ne],Ge=Me[Ne];if(Ue!==null){Ge===void 0&&(ve.push(Ne),Me[Ne]=Ge=ve.length-1),Z.writeVarint(Ge);var st=typeof Ue;st!=="string"&&st!=="boolean"&&st!=="number"&&(Ue=JSON.stringify(Ue));var mt=st+":"+Ue,ot=Ve[mt];ot===void 0&&(Ce.push(Ue),Ve[mt]=ot=Ce.length-1),Z.writeVarint(ot)}}}function Ee(Ae,Z){return(Z<<3)+(7&Ae)}function Pe(Ae){return Ae<<1^Ae>>31}function ce(Ae,Z){for(var J=Ae.loadGeometry(),ve=Ae.type,Ce=0,Me=0,Ve=J.length,Ne=0;Ne<Ve;Ne++){var Ue=J[Ne],Ge=1;ve===1&&(Ge=Ue.length),Z.writeVarint(Ee(1,Ge));for(var st=ve===3?Ue.length-1:Ue.length,mt=0;mt<st;mt++){mt===1&&ve!==1&&Z.writeVarint(Ee(2,st-1));var ot=Ue[mt].x-Ce,Nt=Ue[mt].y-Me;Z.writeVarint(Pe(ot)),Z.writeVarint(Pe(Nt)),Ce+=ot,Me+=Nt}ve===3&&Z.writeVarint(Ee(7,1))}}function ke(Ae,Z){var J=typeof Ae;J==="string"?Z.writeStringField(1,Ae):J==="boolean"?Z.writeBooleanField(7,Ae):J==="number"&&(Ae%1!=0?Z.writeDoubleField(3,Ae):Ae<0?Z.writeSVarintField(6,Ae):Z.writeVarintField(5,Ae))}b.exports=te,b.exports.fromVectorTileJs=te,b.exports.fromGeojsonVt=function(Ae,Z){Z=Z||{};var J={};for(var ve in Ae)J[ve]=new xe(Ae[ve].features,Z),J[ve].name=ve,J[ve].version=Z.version,J[ve].extent=Z.extent;return te({layers:J})},b.exports.GeoJSONWrapper=xe;var be=b.exports;function Ie(Ae,Z,J,ve,Ce,Me){if(Ce-ve<=J)return;const Ve=ve+Ce>>1;Be(Ae,Z,Ve,ve,Ce,Me%2),Ie(Ae,Z,J,ve,Ve-1,Me+1),Ie(Ae,Z,J,Ve+1,Ce,Me+1)}function Be(Ae,Z,J,ve,Ce,Me){for(;Ce>ve;){if(Ce-ve>600){const Ge=Ce-ve+1,st=J-ve+1,mt=Math.log(Ge),ot=.5*Math.exp(2*mt/3),Nt=.5*Math.sqrt(mt*ot*(Ge-ot)/Ge)*(st-Ge/2<0?-1:1);Be(Ae,Z,J,Math.max(ve,Math.floor(J-st*ot/Ge+Nt)),Math.min(Ce,Math.floor(J+(Ge-st)*ot/Ge+Nt)),Me)}const Ve=Z[2*J+Me];let Ne=ve,Ue=Ce;for(Ze(Ae,Z,ve,J),Z[2*Ce+Me]>Ve&&Ze(Ae,Z,ve,Ce);Ne<Ue;){for(Ze(Ae,Z,Ne,Ue),Ne++,Ue--;Z[2*Ne+Me]<Ve;)Ne++;for(;Z[2*Ue+Me]>Ve;)Ue--}Z[2*ve+Me]===Ve?Ze(Ae,Z,ve,Ue):(Ue++,Ze(Ae,Z,Ue,Ce)),Ue<=J&&(ve=Ue+1),J<=Ue&&(Ce=Ue-1)}}function Ze(Ae,Z,J,ve){et(Ae,J,ve),et(Z,2*J,2*ve),et(Z,2*J+1,2*ve+1)}function et(Ae,Z,J){const ve=Ae[Z];Ae[Z]=Ae[J],Ae[J]=ve}function tt(Ae,Z,J,ve){const Ce=Ae-J,Me=Z-ve;return Ce*Ce+Me*Me}const ct=Ae=>Ae[0],St=Ae=>Ae[1];class ft{constructor(Z,J=ct,ve=St,Ce=64,Me=Float64Array){this.nodeSize=Ce,this.points=Z;const Ve=Z.length<65536?Uint16Array:Uint32Array,Ne=this.ids=new Ve(Z.length),Ue=this.coords=new Me(2*Z.length);for(let Ge=0;Ge<Z.length;Ge++)Ne[Ge]=Ge,Ue[2*Ge]=J(Z[Ge]),Ue[2*Ge+1]=ve(Z[Ge]);Ie(Ne,Ue,Ce,0,Ne.length-1,0)}range(Z,J,ve,Ce){return function(Me,Ve,Ne,Ue,Ge,st,mt){const ot=[0,Me.length-1,0],Nt=[];let It,jt;for(;ot.length;){const tn=ot.pop(),Dt=ot.pop(),vn=ot.pop();if(Dt-vn<=mt){for(let wn=vn;wn<=Dt;wn++)It=Ve[2*wn],jt=Ve[2*wn+1],It>=Ne&&It<=Ge&&jt>=Ue&&jt<=st&&Nt.push(Me[wn]);continue}const Sn=Math.floor((vn+Dt)/2);It=Ve[2*Sn],jt=Ve[2*Sn+1],It>=Ne&&It<=Ge&&jt>=Ue&&jt<=st&&Nt.push(Me[Sn]);const xn=(tn+1)%2;(tn===0?Ne<=It:Ue<=jt)&&(ot.push(vn),ot.push(Sn-1),ot.push(xn)),(tn===0?Ge>=It:st>=jt)&&(ot.push(Sn+1),ot.push(Dt),ot.push(xn))}return Nt}(this.ids,this.coords,Z,J,ve,Ce,this.nodeSize)}within(Z,J,ve){return function(Ce,Me,Ve,Ne,Ue,Ge){const st=[0,Ce.length-1,0],mt=[],ot=Ue*Ue;for(;st.length;){const Nt=st.pop(),It=st.pop(),jt=st.pop();if(It-jt<=Ge){for(let xn=jt;xn<=It;xn++)tt(Me[2*xn],Me[2*xn+1],Ve,Ne)<=ot&&mt.push(Ce[xn]);continue}const tn=Math.floor((jt+It)/2),Dt=Me[2*tn],vn=Me[2*tn+1];tt(Dt,vn,Ve,Ne)<=ot&&mt.push(Ce[tn]);const Sn=(Nt+1)%2;(Nt===0?Ve-Ue<=Dt:Ne-Ue<=vn)&&(st.push(jt),st.push(tn-1),st.push(Sn)),(Nt===0?Ve+Ue>=Dt:Ne+Ue>=vn)&&(st.push(tn+1),st.push(It),st.push(Sn))}return mt}(this.ids,this.coords,Z,J,ve,this.nodeSize)}}const At={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},qt=Math.fround||(Bt=new Float32Array(1),Ae=>(Bt[0]=+Ae,Bt[0]));var Bt;class ln{constructor(Z){this.options=me(Object.create(At),Z),this.trees=new Array(this.options.maxZoom+1)}load(Z){const{log:J,minZoom:ve,maxZoom:Ce,nodeSize:Me}=this.options;J&&console.time("total time");const Ve=`prepare ${Z.length} points`;J&&console.time(Ve),this.points=Z;let Ne=[];for(let Ue=0;Ue<Z.length;Ue++)Z[Ue].geometry&&Ne.push(_n(Z[Ue],Ue));this.trees[Ce+1]=new ft(Ne,Oe,Ke,Me,Float32Array),J&&console.timeEnd(Ve);for(let Ue=Ce;Ue>=ve;Ue--){const Ge=+Date.now();Ne=this._cluster(Ne,Ue),this.trees[Ue]=new ft(Ne,Oe,Ke,Me,Float32Array),J&&console.log("z%d: %d clusters in %dms",Ue,Ne.length,+Date.now()-Ge)}return J&&console.timeEnd("total time"),this}getClusters(Z,J){let ve=((Z[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,Z[1]));let Me=Z[2]===180?180:((Z[2]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)ve=-180,Me=180;else if(ve>Me){const st=this.getClusters([ve,Ce,180,Ve],J),mt=this.getClusters([-180,Ce,Me,Ve],J);return st.concat(mt)}const Ne=this.trees[this._limitZoom(J)],Ue=Ne.range(ge(ve),L(Ve),ge(Me),L(Ce)),Ge=[];for(const st of Ue){const mt=Ne.points[st];Ge.push(mt.numPoints?nn(mt):this.points[mt.index])}return Ge}getChildren(Z){const J=this._getOriginId(Z),ve=this._getOriginZoom(Z),Ce="No cluster with the specified id.",Me=this.trees[ve];if(!Me)throw new Error(Ce);const Ve=Me.points[J];if(!Ve)throw new Error(Ce);const Ne=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),Ue=Me.within(Ve.x,Ve.y,Ne),Ge=[];for(const st of Ue){const mt=Me.points[st];mt.parentId===Z&&Ge.push(mt.numPoints?nn(mt):this.points[mt.index])}if(Ge.length===0)throw new Error(Ce);return Ge}getLeaves(Z,J,ve){const Ce=[];return this._appendLeaves(Ce,Z,J=J||10,ve=ve||0,0),Ce}getTile(Z,J,ve){const Ce=this.trees[this._limitZoom(Z)],Me=Math.pow(2,Z),{extent:Ve,radius:Ne}=this.options,Ue=Ne/Ve,Ge=(ve-Ue)/Me,st=(ve+1+Ue)/Me,mt={features:[]};return this._addTileFeatures(Ce.range((J-Ue)/Me,Ge,(J+1+Ue)/Me,st),Ce.points,J,ve,Me,mt),J===0&&this._addTileFeatures(Ce.range(1-Ue/Me,Ge,1,st),Ce.points,Me,ve,Me,mt),J===Me-1&&this._addTileFeatures(Ce.range(0,Ge,Ue/Me,st),Ce.points,-1,ve,Me,mt),mt.features.length?mt:null}getClusterExpansionZoom(Z){let J=this._getOriginZoom(Z)-1;for(;J<=this.options.maxZoom;){const ve=this.getChildren(Z);if(J++,ve.length!==1)break;Z=ve[0].properties.cluster_id}return J}_appendLeaves(Z,J,ve,Ce,Me){const Ve=this.getChildren(J);for(const Ne of Ve){const Ue=Ne.properties;if(Ue&&Ue.cluster?Me+Ue.point_count<=Ce?Me+=Ue.point_count:Me=this._appendLeaves(Z,Ue.cluster_id,ve,Ce,Me):Me<Ce?Me++:Z.push(Ne),Z.length===ve)break}return Me}_addTileFeatures(Z,J,ve,Ce,Me,Ve){for(const Ne of Z){const Ue=J[Ne],Ge=Ue.numPoints;let st,mt,ot;if(Ge)st=Pn(Ue),mt=Ue.x,ot=Ue.y;else{const jt=this.points[Ue.index];st=jt.properties,mt=ge(jt.geometry.coordinates[0]),ot=L(jt.geometry.coordinates[1])}const Nt={type:1,geometry:[[Math.round(this.options.extent*(mt*Me-ve)),Math.round(this.options.extent*(ot*Me-Ce))]],tags:st};let It;Ge?It=Ue.id:this.options.generateId?It=Ue.index:this.points[Ue.index].id&&(It=this.points[Ue.index].id),It!==void 0&&(Nt.id=It),Ve.features.push(Nt)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(+Z,this.options.maxZoom+1))}_cluster(Z,J){const ve=[],{radius:Ce,extent:Me,reduce:Ve,minPoints:Ne}=this.options,Ue=Ce/(Me*Math.pow(2,J));for(let Ge=0;Ge<Z.length;Ge++){const st=Z[Ge];if(st.zoom<=J)continue;st.zoom=J;const mt=this.trees[J+1],ot=mt.within(st.x,st.y,Ue),Nt=st.numPoints||1;let It=Nt;for(const jt of ot){const tn=mt.points[jt];tn.zoom>J&&(It+=tn.numPoints||1)}if(It>Nt&&It>=Ne){let jt=st.x*Nt,tn=st.y*Nt,Dt=Ve&&Nt>1?this._map(st,!0):null;const vn=(Ge<<5)+(J+1)+this.points.length;for(const Sn of ot){const xn=mt.points[Sn];if(xn.zoom<=J)continue;xn.zoom=J;const wn=xn.numPoints||1;jt+=xn.x*wn,tn+=xn.y*wn,xn.parentId=vn,Ve&&(Dt||(Dt=this._map(st,!0)),Ve(Dt,this._map(xn)))}st.parentId=vn,ve.push(En(jt/It,tn/It,vn,It,Dt))}else if(ve.push(st),It>1)for(const jt of ot){const tn=mt.points[jt];tn.zoom<=J||(tn.zoom=J,ve.push(tn))}}return ve}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,J){if(Z.numPoints)return J?me({},Z.properties):Z.properties;const ve=this.points[Z.index].properties,Ce=this.options.map(ve);return J&&Ce===ve?me({},Ce):Ce}}function En(Ae,Z,J,ve,Ce){return{x:qt(Ae),y:qt(Z),zoom:1/0,id:J,parentId:-1,numPoints:ve,properties:Ce}}function _n(Ae,Z){const[J,ve]=Ae.geometry.coordinates;return{x:qt(ge(J)),y:qt(L(ve)),zoom:1/0,index:Z,parentId:-1}}function nn(Ae){return{type:"Feature",id:Ae.id,properties:Pn(Ae),geometry:{type:"Point",coordinates:[(Z=Ae.x,360*(Z-.5)),R(Ae.y)]}};var Z}function Pn(Ae){const Z=Ae.numPoints,J=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z;return me(me({},Ae.properties),{cluster:!0,cluster_id:Ae.id,point_count:Z,point_count_abbreviated:J})}function ge(Ae){return Ae/360+.5}function L(Ae){const Z=Math.sin(Ae*Math.PI/180),J=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return J<0?0:J>1?1:J}function R(Ae){const Z=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function me(Ae,Z){for(const J in Z)Ae[J]=Z[J];return Ae}function Oe(Ae){return Ae.x}function Ke(Ae){return Ae.y}function at(Ae,Z,J,ve){for(var Ce,Me=ve,Ve=J-Z>>1,Ne=J-Z,Ue=Ae[Z],Ge=Ae[Z+1],st=Ae[J],mt=Ae[J+1],ot=Z+3;ot<J;ot+=3){var Nt=se(Ae[ot],Ae[ot+1],Ue,Ge,st,mt);if(Nt>Me)Ce=ot,Me=Nt;else if(Nt===Me){var It=Math.abs(ot-Ve);It<Ne&&(Ce=ot,Ne=It)}}Me>ve&&(Ce-Z>3&&at(Ae,Z,Ce,ve),Ae[Ce+2]=Me,J-Ce>3&&at(Ae,Ce,J,ve))}function se(Ae,Z,J,ve,Ce,Me){var Ve=Ce-J,Ne=Me-ve;if(Ve!==0||Ne!==0){var Ue=((Ae-J)*Ve+(Z-ve)*Ne)/(Ve*Ve+Ne*Ne);Ue>1?(J=Ce,ve=Me):Ue>0&&(J+=Ve*Ue,ve+=Ne*Ue)}return(Ve=Ae-J)*Ve+(Ne=Z-ve)*Ne}function T(Ae,Z,J,ve){var Ce={id:Ae===void 0?null:Ae,type:Z,geometry:J,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Me){var Ve=Me.geometry,Ne=Me.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")z(Me,Ve);else if(Ne==="Polygon"||Ne==="MultiLineString")for(var Ue=0;Ue<Ve.length;Ue++)z(Me,Ve[Ue]);else if(Ne==="MultiPolygon")for(Ue=0;Ue<Ve.length;Ue++)for(var Ge=0;Ge<Ve[Ue].length;Ge++)z(Me,Ve[Ue][Ge])}(Ce),Ce}function z(Ae,Z){for(var J=0;J<Z.length;J+=3)Ae.minX=Math.min(Ae.minX,Z[J]),Ae.minY=Math.min(Ae.minY,Z[J+1]),Ae.maxX=Math.max(Ae.maxX,Z[J]),Ae.maxY=Math.max(Ae.maxY,Z[J+1])}function we(Ae,Z,J,ve){if(Z.geometry){var Ce=Z.geometry.coordinates,Me=Z.geometry.type,Ve=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),Ne=[],Ue=Z.id;if(J.promoteId?Ue=Z.properties[J.promoteId]:J.generateId&&(Ue=ve||0),Me==="Point")De(Ce,Ne);else if(Me==="MultiPoint")for(var Ge=0;Ge<Ce.length;Ge++)De(Ce[Ge],Ne);else if(Me==="LineString")Xe(Ce,Ne,Ve,!1);else if(Me==="MultiLineString"){if(J.lineMetrics){for(Ge=0;Ge<Ce.length;Ge++)Xe(Ce[Ge],Ne=[],Ve,!1),Ae.push(T(Ue,"LineString",Ne,Z.properties));return}Qe(Ce,Ne,Ve,!1)}else if(Me==="Polygon")Qe(Ce,Ne,Ve,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(Ge=0;Ge<Z.geometry.geometries.length;Ge++)we(Ae,{id:Ue,geometry:Z.geometry.geometries[Ge],properties:Z.properties},J,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<Ce.length;Ge++){var st=[];Qe(Ce[Ge],st,Ve,!0),Ne.push(st)}}Ae.push(T(Ue,Me,Ne,Z.properties))}}function De(Ae,Z){Z.push($t(Ae[0])),Z.push(Tn(Ae[1])),Z.push(0)}function Xe(Ae,Z,J,ve){for(var Ce,Me,Ve=0,Ne=0;Ne<Ae.length;Ne++){var Ue=$t(Ae[Ne][0]),Ge=Tn(Ae[Ne][1]);Z.push(Ue),Z.push(Ge),Z.push(0),Ne>0&&(Ve+=ve?(Ce*Ge-Ue*Me)/2:Math.sqrt(Math.pow(Ue-Ce,2)+Math.pow(Ge-Me,2))),Ce=Ue,Me=Ge}var st=Z.length-3;Z[2]=1,at(Z,0,st,J),Z[st+2]=1,Z.size=Math.abs(Ve),Z.start=0,Z.end=Z.size}function Qe(Ae,Z,J,ve){for(var Ce=0;Ce<Ae.length;Ce++){var Me=[];Xe(Ae[Ce],Me,J,ve),Z.push(Me)}}function $t(Ae){return Ae/360+.5}function Tn(Ae){var Z=Math.sin(Ae*Math.PI/180),J=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return J<0?0:J>1?1:J}function pn(Ae,Z,J,ve,Ce,Me,Ve,Ne){if(ve/=Z,Me>=(J/=Z)&&Ve<ve)return Ae;if(Ve<J||Me>=ve)return null;for(var Ue=[],Ge=0;Ge<Ae.length;Ge++){var st=Ae[Ge],mt=st.geometry,ot=st.type,Nt=Ce===0?st.minX:st.minY,It=Ce===0?st.maxX:st.maxY;if(Nt>=J&&It<ve)Ue.push(st);else if(!(It<J||Nt>=ve)){var jt=[];if(ot==="Point"||ot==="MultiPoint")dt(mt,jt,J,ve,Ce);else if(ot==="LineString")Lt(mt,jt,J,ve,Ce,!1,Ne.lineMetrics);else if(ot==="MultiLineString")Tr(mt,jt,J,ve,Ce,!1);else if(ot==="Polygon")Tr(mt,jt,J,ve,Ce,!0);else if(ot==="MultiPolygon")for(var tn=0;tn<mt.length;tn++){var Dt=[];Tr(mt[tn],Dt,J,ve,Ce,!0),Dt.length&&jt.push(Dt)}if(jt.length){if(Ne.lineMetrics&&ot==="LineString"){for(tn=0;tn<jt.length;tn++)Ue.push(T(st.id,ot,jt[tn],st.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(jt.length===1?(ot="LineString",jt=jt[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=jt.length===3?"Point":"MultiPoint"),Ue.push(T(st.id,ot,jt,st.tags))}}}return Ue.length?Ue:null}function dt(Ae,Z,J,ve,Ce){for(var Me=0;Me<Ae.length;Me+=3){var Ve=Ae[Me+Ce];Ve>=J&&Ve<=ve&&(Z.push(Ae[Me]),Z.push(Ae[Me+1]),Z.push(Ae[Me+2]))}}function Lt(Ae,Z,J,ve,Ce,Me,Ve){for(var Ne,Ue,Ge=un(Ae),st=Ce===0?cn:er,mt=Ae.start,ot=0;ot<Ae.length-3;ot+=3){var Nt=Ae[ot],It=Ae[ot+1],jt=Ae[ot+2],tn=Ae[ot+3],Dt=Ae[ot+4],vn=Ce===0?Nt:It,Sn=Ce===0?tn:Dt,xn=!1;Ve&&(Ne=Math.sqrt(Math.pow(Nt-tn,2)+Math.pow(It-Dt,2))),vn<J?Sn>J&&(Ue=st(Ge,Nt,It,tn,Dt,J),Ve&&(Ge.start=mt+Ne*Ue)):vn>ve?Sn<ve&&(Ue=st(Ge,Nt,It,tn,Dt,ve),Ve&&(Ge.start=mt+Ne*Ue)):Hr(Ge,Nt,It,jt),Sn<J&&vn>=J&&(Ue=st(Ge,Nt,It,tn,Dt,J),xn=!0),Sn>ve&&vn<=ve&&(Ue=st(Ge,Nt,It,tn,Dt,ve),xn=!0),!Me&&xn&&(Ve&&(Ge.end=mt+Ne*Ue),Z.push(Ge),Ge=un(Ae)),Ve&&(mt+=Ne)}var wn=Ae.length-3;Nt=Ae[wn],It=Ae[wn+1],jt=Ae[wn+2],(vn=Ce===0?Nt:It)>=J&&vn<=ve&&Hr(Ge,Nt,It,jt),wn=Ge.length-3,Me&&wn>=3&&(Ge[wn]!==Ge[0]||Ge[wn+1]!==Ge[1])&&Hr(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&Z.push(Ge)}function un(Ae){var Z=[];return Z.size=Ae.size,Z.start=Ae.start,Z.end=Ae.end,Z}function Tr(Ae,Z,J,ve,Ce,Me){for(var Ve=0;Ve<Ae.length;Ve++)Lt(Ae[Ve],Z,J,ve,Ce,Me,!1)}function Hr(Ae,Z,J,ve){Ae.push(Z),Ae.push(J),Ae.push(ve)}function cn(Ae,Z,J,ve,Ce,Me){var Ve=(Me-Z)/(ve-Z);return Ae.push(Me),Ae.push(J+(Ce-J)*Ve),Ae.push(1),Ve}function er(Ae,Z,J,ve,Ce,Me){var Ve=(Me-J)/(Ce-J);return Ae.push(Z+(ve-Z)*Ve),Ae.push(Me),Ae.push(1),Ve}function pi(Ae,Z){for(var J=[],ve=0;ve<Ae.length;ve++){var Ce,Me=Ae[ve],Ve=Me.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")Ce=gr(Me.geometry,Z);else if(Ve==="MultiLineString"||Ve==="Polygon"){Ce=[];for(var Ne=0;Ne<Me.geometry.length;Ne++)Ce.push(gr(Me.geometry[Ne],Z))}else if(Ve==="MultiPolygon")for(Ce=[],Ne=0;Ne<Me.geometry.length;Ne++){for(var Ue=[],Ge=0;Ge<Me.geometry[Ne].length;Ge++)Ue.push(gr(Me.geometry[Ne][Ge],Z));Ce.push(Ue)}J.push(T(Me.id,Ve,Ce,Me.tags))}return J}function gr(Ae,Z){var J=[];J.size=Ae.size,Ae.start!==void 0&&(J.start=Ae.start,J.end=Ae.end);for(var ve=0;ve<Ae.length;ve+=3)J.push(Ae[ve]+Z,Ae[ve+1],Ae[ve+2]);return J}function jr(Ae,Z){if(Ae.transformed)return Ae;var J,ve,Ce,Me=1<<Ae.z,Ve=Ae.x,Ne=Ae.y;for(J=0;J<Ae.features.length;J++){var Ue=Ae.features[J],Ge=Ue.geometry,st=Ue.type;if(Ue.geometry=[],st===1)for(ve=0;ve<Ge.length;ve+=2)Ue.geometry.push(Vt(Ge[ve],Ge[ve+1],Z,Me,Ve,Ne));else for(ve=0;ve<Ge.length;ve++){var mt=[];for(Ce=0;Ce<Ge[ve].length;Ce+=2)mt.push(Vt(Ge[ve][Ce],Ge[ve][Ce+1],Z,Me,Ve,Ne));Ue.geometry.push(mt)}}return Ae.transformed=!0,Ae}function Vt(Ae,Z,J,ve,Ce,Me){return[Math.round(J*(Ae*ve-Ce)),Math.round(J*(Z*ve-Me))]}function Ut(Ae,Z,J,ve,Ce){for(var Me=Z===Ce.maxZoom?0:Ce.tolerance/((1<<Z)*Ce.extent),Ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ve,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ne=0;Ne<Ae.length;Ne++){Ve.numFeatures++,Gt(Ve,Ae[Ne],Me,Ce);var Ue=Ae[Ne].minX,Ge=Ae[Ne].minY,st=Ae[Ne].maxX,mt=Ae[Ne].maxY;Ue<Ve.minX&&(Ve.minX=Ue),Ge<Ve.minY&&(Ve.minY=Ge),st>Ve.maxX&&(Ve.maxX=st),mt>Ve.maxY&&(Ve.maxY=mt)}return Ve}function Gt(Ae,Z,J,ve){var Ce=Z.geometry,Me=Z.type,Ve=[];if(Me==="Point"||Me==="MultiPoint")for(var Ne=0;Ne<Ce.length;Ne+=3)Ve.push(Ce[Ne]),Ve.push(Ce[Ne+1]),Ae.numPoints++,Ae.numSimplified++;else if(Me==="LineString")An(Ve,Ce,Ae,J,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(Ne=0;Ne<Ce.length;Ne++)An(Ve,Ce[Ne],Ae,J,Me==="Polygon",Ne===0);else if(Me==="MultiPolygon")for(var Ue=0;Ue<Ce.length;Ue++){var Ge=Ce[Ue];for(Ne=0;Ne<Ge.length;Ne++)An(Ve,Ge[Ne],Ae,J,!0,Ne===0)}if(Ve.length){var st=Z.tags||null;if(Me==="LineString"&&ve.lineMetrics){for(var mt in st={},Z.tags)st[mt]=Z.tags[mt];st.mapbox_clip_start=Ce.start/Ce.size,st.mapbox_clip_end=Ce.end/Ce.size}var ot={geometry:Ve,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:st};Z.id!==null&&(ot.id=Z.id),Ae.features.push(ot)}}function An(Ae,Z,J,ve,Ce,Me){var Ve=ve*ve;if(ve>0&&Z.size<(Ce?Ve:ve))J.numPoints+=Z.length/3;else{for(var Ne=[],Ue=0;Ue<Z.length;Ue+=3)(ve===0||Z[Ue+2]>Ve)&&(J.numSimplified++,Ne.push(Z[Ue]),Ne.push(Z[Ue+1])),J.numPoints++;Ce&&function(Ge,st){for(var mt=0,ot=0,Nt=Ge.length,It=Nt-2;ot<Nt;It=ot,ot+=2)mt+=(Ge[ot]-Ge[It])*(Ge[ot+1]+Ge[It+1]);if(mt>0===st)for(ot=0,Nt=Ge.length;ot<Nt/2;ot+=2){var jt=Ge[ot],tn=Ge[ot+1];Ge[ot]=Ge[Nt-2-ot],Ge[ot+1]=Ge[Nt-1-ot],Ge[Nt-2-ot]=jt,Ge[Nt-1-ot]=tn}}(Ne,Me),Ae.push(Ne)}}function zn(Ae,Z){var J=(Z=this.options=function(Ce,Me){for(var Ve in Me)Ce[Ve]=Me[Ve];return Ce}(Object.create(this.options),Z)).debug;if(J&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");var ve=function(Ce,Me){var Ve=[];if(Ce.type==="FeatureCollection")for(var Ne=0;Ne<Ce.features.length;Ne++)we(Ve,Ce.features[Ne],Me,Ne);else we(Ve,Ce.type==="Feature"?Ce:{geometry:Ce},Me);return Ve}(Ae,Z);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ve=function(Ce,Me){var Ve=Me.buffer/Me.extent,Ne=Ce,Ue=pn(Ce,1,-1-Ve,Ve,0,-1,2,Me),Ge=pn(Ce,1,1-Ve,2+Ve,0,-1,2,Me);return(Ue||Ge)&&(Ne=pn(Ce,1,-Ve,1+Ve,0,-1,2,Me)||[],Ue&&(Ne=pi(Ue,1).concat(Ne)),Ge&&(Ne=Ne.concat(pi(Ge,-1)))),Ne}(ve,Z),ve.length&&this.splitTile(ve,0,0,0),J&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tr(Ae,Z,J){return 32*((1<<Ae)*J+Z)+Ae}function Dr(Ae,Z){const J=Ae.tileID.canonical;if(!this._geoJSONIndex)return Z(null,null);const ve=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ve)return Z(null,null);const Ce=new F(ve.features);let Me=be(Ce);Me.byteOffset===0&&Me.byteLength===Me.buffer.byteLength||(Me=new Uint8Array(Me)),Z(null,{vectorTile:Ce,rawData:Me.buffer})}zn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zn.prototype.splitTile=function(Ae,Z,J,ve,Ce,Me,Ve){for(var Ne=[Ae,Z,J,ve],Ue=this.options,Ge=Ue.debug;Ne.length;){ve=Ne.pop(),J=Ne.pop(),Z=Ne.pop(),Ae=Ne.pop();var st=1<<Z,mt=tr(Z,J,ve),ot=this.tiles[mt];if(!ot&&(Ge>1&&console.time("creation"),ot=this.tiles[mt]=Ut(Ae,Z,J,ve,Ue),this.tileCoords.push({z:Z,x:J,y:ve}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,J,ve,ot.numFeatures,ot.numPoints,ot.numSimplified),console.timeEnd("creation"));var Nt="z"+Z;this.stats[Nt]=(this.stats[Nt]||0)+1,this.total++}if(ot.source=Ae,Ce){if(Z===Ue.maxZoom||Z===Ce)continue;var It=1<<Ce-Z;if(J!==Math.floor(Me/It)||ve!==Math.floor(Ve/It))continue}else if(Z===Ue.indexMaxZoom||ot.numPoints<=Ue.indexMaxPoints)continue;if(ot.source=null,Ae.length!==0){Ge>1&&console.time("clipping");var jt,tn,Dt,vn,Sn,xn,wn=.5*Ue.buffer/Ue.extent,Qn=.5-wn,cr=.5+wn,Kn=1+wn;jt=tn=Dt=vn=null,Sn=pn(Ae,st,J-wn,J+cr,0,ot.minX,ot.maxX,Ue),xn=pn(Ae,st,J+Qn,J+Kn,0,ot.minX,ot.maxX,Ue),Ae=null,Sn&&(jt=pn(Sn,st,ve-wn,ve+cr,1,ot.minY,ot.maxY,Ue),tn=pn(Sn,st,ve+Qn,ve+Kn,1,ot.minY,ot.maxY,Ue),Sn=null),xn&&(Dt=pn(xn,st,ve-wn,ve+cr,1,ot.minY,ot.maxY,Ue),vn=pn(xn,st,ve+Qn,ve+Kn,1,ot.minY,ot.maxY,Ue),xn=null),Ge>1&&console.timeEnd("clipping"),Ne.push(jt||[],Z+1,2*J,2*ve),Ne.push(tn||[],Z+1,2*J,2*ve+1),Ne.push(Dt||[],Z+1,2*J+1,2*ve),Ne.push(vn||[],Z+1,2*J+1,2*ve+1)}}},zn.prototype.getTile=function(Ae,Z,J){var ve=this.options,Ce=ve.extent,Me=ve.debug;if(Ae<0||Ae>24)return null;var Ve=1<<Ae,Ne=tr(Ae,Z=(Z%Ve+Ve)%Ve,J);if(this.tiles[Ne])return jr(this.tiles[Ne],Ce);Me>1&&console.log("drilling down to z%d-%d-%d",Ae,Z,J);for(var Ue,Ge=Ae,st=Z,mt=J;!Ue&&Ge>0;)Ge--,st=Math.floor(st/2),mt=Math.floor(mt/2),Ue=this.tiles[tr(Ge,st,mt)];return Ue&&Ue.source?(Me>1&&console.log("found parent tile z%d-%d-%d",Ge,st,mt),Me>1&&console.time("drilling down"),this.splitTile(Ue.source,Ge,st,mt,Ae,Z,J),Me>1&&console.timeEnd("drilling down"),this.tiles[Ne]?jr(this.tiles[Ne],Ce):null):null};class ii extends Y{constructor(Z,J,ve,Ce){super(Z,J,ve,Dr),Ce&&(this.loadGeoJSON=Ce)}loadData(Z,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=J,this._pendingLoadDataParams=Z,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const Z=this._pendingCallback,J=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const ve=!!(J&&J.request&&J.request.collectResourceTiming)&&new s.RequestPerformance(J.request);this.loadGeoJSON(J,(Ce,Me)=>{if(Ce||!Me)return Z(Ce);if(typeof Me!="object")return Z(new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`));{$(Me,!0);try{if(J.filter){const Ne=s.createExpression(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(Ge=>`${Ge.key}: ${Ge.message}`).join(", "));const Ue=Me.features.filter(Ge=>Ne.value.evaluate({zoom:0},Ge));Me={type:"FeatureCollection",features:Ue}}this._geoJSONIndex=J.cluster?new ln(function({superclusterOptions:Ne,clusterProperties:Ue}){if(!Ue||!Ne)return Ne;const Ge={},st={},mt={accumulated:null,zoom:0},ot={properties:null},Nt=Object.keys(Ue);for(const It of Nt){const[jt,tn]=Ue[It],Dt=s.createExpression(tn),vn=s.createExpression(typeof jt=="string"?[jt,["accumulated"],["get",It]]:jt);Ge[It]=Dt.value,st[It]=vn.value}return Ne.map=It=>{ot.properties=It;const jt={};for(const tn of Nt)jt[tn]=Ge[tn].evaluate(mt,ot);return jt},Ne.reduce=(It,jt)=>{ot.properties=jt;for(const tn of Nt)mt.accumulated=It[tn],It[tn]=st[tn].evaluate(mt,ot)},Ne}(J)).load(Me.features):function(Ne,Ue){return new zn(Ne,Ue)}(Me,J.geojsonVtOptions)}catch(Ne){return Z(Ne)}this.loaded={};const Ve={};if(ve){const Ne=ve.finish();Ne&&(Ve.resourceTiming={},Ve.resourceTiming[J.source]=JSON.parse(JSON.stringify(Ne)))}Z(null,Ve)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(Z,J){const ve=this.loaded;return ve&&ve[Z.uid]?super.reloadTile(Z,J):this.loadTile(Z,J)}loadGeoJSON(Z,J){if(Z.request)s.getJSON(Z.request,J);else{if(typeof Z.data!="string")return J(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(Z.data))}catch{return J(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`))}}}removeSource(Z,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),J()}getClusterExpansionZoom(Z,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId))}catch(ve){J(ve)}}getClusterChildren(Z,J){try{J(null,this._geoJSONIndex.getChildren(Z.clusterId))}catch(ve){J(ve)}}getClusterLeaves(Z,J){try{J(null,this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset))}catch(ve){J(ve)}}}class ca{constructor(Z){this.self=Z,this.actor=new s.Actor(Z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Y,geojson:ii},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ve)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ve},this.self.registerRTLTextPlugin=J=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=J.applyArabicShaping,s.plugin.processBidirectionalText=J.processBidirectionalText,s.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}setReferrer(Z,J){this.referrer=J}setImages(Z,J,ve){this.availableImages[Z]=J;for(const Ce in this.workerSources[Z]){const Me=this.workerSources[Z][Ce];for(const Ve in Me)Me[Ve].availableImages=J}ve()}setLayers(Z,J,ve){this.getLayerIndex(Z).replace(J),ve()}updateLayers(Z,J,ve){this.getLayerIndex(Z).update(J.layers,J.removedIds),ve()}loadTile(Z,J,ve){this.getWorkerSource(Z,J.type,J.source).loadTile(J,ve)}loadDEMTile(Z,J,ve){this.getDEMWorkerSource(Z,J.source).loadTile(J,ve)}reloadTile(Z,J,ve){this.getWorkerSource(Z,J.type,J.source).reloadTile(J,ve)}abortTile(Z,J,ve){this.getWorkerSource(Z,J.type,J.source).abortTile(J,ve)}removeTile(Z,J,ve){this.getWorkerSource(Z,J.type,J.source).removeTile(J,ve)}removeDEMTile(Z,J){this.getDEMWorkerSource(Z,J.source).removeTile(J)}removeSource(Z,J,ve){if(!this.workerSources[Z]||!this.workerSources[Z][J.type]||!this.workerSources[Z][J.type][J.source])return;const Ce=this.workerSources[Z][J.type][J.source];delete this.workerSources[Z][J.type][J.source],Ce.removeSource!==void 0?Ce.removeSource(J,ve):ve()}loadWorkerSource(Z,J,ve){try{this.self.importScripts(J.url),ve()}catch(Ce){ve(Ce.toString())}}syncRTLPluginState(Z,J,ve){try{s.plugin.setState(J);const Ce=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Ce!=null){this.self.importScripts(Ce);const Me=s.plugin.isParsed();ve(Me?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ce}`),Me)}}catch(Ce){ve(Ce.toString())}}getAvailableImages(Z){let J=this.availableImages[Z];return J||(J=[]),J}getLayerIndex(Z){let J=this.layerIndexes[Z];return J||(J=this.layerIndexes[Z]=new C),J}getWorkerSource(Z,J,ve){if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][J]||(this.workerSources[Z][J]={}),!this.workerSources[Z][J][ve]){const Ce={send:(Me,Ve,Ne)=>{this.actor.send(Me,Ve,Ne,Z)}};this.workerSources[Z][J][ve]=new this.workerSourceTypes[J](Ce,this.getLayerIndex(Z),this.getAvailableImages(Z))}return this.workerSources[Z][J][ve]}getDEMWorkerSource(Z,J){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][J]||(this.demWorkerSources[Z][J]=new W),this.demWorkerSources[Z][J]}enforceCacheSizeLimit(Z,J){s.enforceCacheSizeLimit(J)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ca(self)),ca}),d(["./shared"],function(s){var w=E;function E(m){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var f,g,x=new Blob([""],{type:"text/javascript"}),I=URL.createObjectURL(x);try{g=new Worker(I),f=!0}catch{f=!1}return g&&g.terminate(),URL.revokeObjectURL(I),f}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var f=document.createElement("canvas");f.width=f.height=1;var g=f.getContext("2d");if(!g)return!1;var x=g.getImageData(0,0,1,1);return x&&x.width===f.width}()?(C[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(C[u]=function(f){var g,x=function(I){var O=document.createElement("canvas"),B=Object.create(E.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=I,O.getContext("webgl",B)||O.getContext("experimental-webgl",B)}(f);if(!x)return!1;try{g=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!g||x.isContextLost())&&(x.shaderSource(g,"void main() {}"),x.compileShader(g),x.getShaderParameter(g,x.COMPILE_STATUS)===!0)}(u)),C[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(m)}var C={};function S(m,i){if(Array.isArray(m)){if(!Array.isArray(i)||m.length!==i.length)return!1;for(let u=0;u<m.length;u++)if(!S(m[u],i[u]))return!1;return!0}if(typeof m=="object"&&m!==null&&i!==null){if(typeof i!="object"||Object.keys(m).length!==Object.keys(i).length)return!1;for(const u in m)if(!S(m[u],i[u]))return!1;return!0}return m===i}E.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class P{static testProp(i){if(!P.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in P.docStyle)return i[u];return i[0]}static create(i,u,f){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(i,u){i.style[P.transformProp]=u}static addEventListener(i,u,f,g={}){i.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(i,u,f,g={}){i.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new s.pointGeometry(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),g=[];for(let x=0;x<u.length;x++)g.push(new s.pointGeometry(u[x].clientX-f.left-i.clientLeft,u[x].clientY-f.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}P.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);class N{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const g=function(x){const I=x.match(ee);if(!I)throw new Error(`Unable to parse URL "${x}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(i);return g.path+=`${u}${f}`,function(x){const I=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${I}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(m){var i=new s.ARRAY_TYPE(3);return i[0]=m[0],i[1]=m[1],i[2]=m[2],i}function W(m,i,u){var f=new s.ARRAY_TYPE(3);return f[0]=m,f[1]=i,f[2]=u,f}var $,G=function(m,i,u){return m[0]=i[0]-u[0],m[1]=i[1]-u[1],m[2]=i[2]-u[2],m};$=new s.ARRAY_TYPE(3),s.ARRAY_TYPE!=Float32Array&&($[0]=0,$[1]=0,$[2]=0);var V=function(m){var i=m[0],u=m[1];return i*i+u*u};(function(){var m=new s.ARRAY_TYPE(2);s.ARRAY_TYPE!=Float32Array&&(m[0]=0,m[1]=0)})();class re{constructor(i,u,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,f){const{width:g,height:x}=i,I=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:O}=this,{gl:B}=O;if(this.useMipmap=Boolean(u&&u.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!u||u.premultiply!==!1)),I)this.size=[g,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.isImageBitmap(i)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,i):B.texImage2D(B.TEXTURE_2D,0,this.format,g,x,0,this.format,B.UNSIGNED_BYTE,i.data);else{const{x:X,y:ie}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.isImageBitmap(i)?B.texSubImage2D(B.TEXTURE_2D,0,X,ie,B.RGBA,B.UNSIGNED_BYTE,i):B.texSubImage2D(B.TEXTURE_2D,0,X,ie,g,x,B.RGBA,B.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(i,u,f){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function H(m){const{userImage:i}=m;return!!(i&&i.render&&i.render())&&(m.data.replace(new Uint8Array(i.data.buffer)),!0)}class F extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){u.version=this.images[i].version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const g of i){this.images[g]||this.fire(new s.Event("styleimagemissing",{id:g}));const x=this.images[g];x?f[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:s.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new s.ImagePosition(g,f);this.patterns[i]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new re(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:u,h:f}=s.potpack(i),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const x in this.patterns){const{bin:I}=this.patterns[x],O=I.x+1,B=I.y+1,X=this.images[x].data,ie=X.width,he=X.height;s.RGBAImage.copy(X,g,{x:0,y:0},{x:O,y:B},{width:ie,height:he}),s.RGBAImage.copy(X,g,{x:0,y:he-1},{x:O,y:B-1},{width:ie,height:1}),s.RGBAImage.copy(X,g,{x:0,y:0},{x:O,y:B+he},{width:ie,height:1}),s.RGBAImage.copy(X,g,{x:ie-1,y:0},{x:O-1,y:B},{width:1,height:he}),s.RGBAImage.copy(X,g,{x:0,y:0},{x:O+ie,y:B},{width:1,height:he})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.images[u];H(f)&&this.updateImage(u,f)}}}const b=1e20;function M(m,i,u,f,g,x,I,O,B){for(let X=i;X<i+f;X++)D(m,u*x+X,x,g,I,O,B);for(let X=u;X<u+g;X++)D(m,X*x+i,1,f,I,O,B)}function D(m,i,u,f,g,x,I){x[0]=0,I[0]=-b,I[1]=b,g[0]=m[i];for(let O=1,B=0,X=0;O<f;O++){g[O]=m[i+O*u];const ie=O*O;do{const he=x[B];X=(g[O]-g[he]+ie-he*he)/(O-he)/2}while(X<=I[B]&&--B>-1);B++,x[B]=O,I[B]=X,I[B+1]=b}for(let O=0,B=0;O<f;O++){for(;I[B+1]<O;)B++;const X=x[B],ie=O-X;m[i+O*u]=g[X]+ie*ie}}class q{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const g in i)for(const x of i[g])f.push({stack:g,id:x});s.asyncAll(f,({stack:g,id:x},I)=>{let O=this.entries[g];O||(O=this.entries[g]={glyphs:{},requests:{},ranges:{}});let B=O.glyphs[x];if(B!==void 0)return void I(null,{stack:g,id:x,glyph:B});if(B=this._tinySDF(O,g,x),B)return O.glyphs[x]=B,void I(null,{stack:g,id:x,glyph:B});const X=Math.floor(x/256);if(256*X>65535)return void I(new Error("glyphs > 65535 not supported"));if(O.ranges[X])return void I(null,{stack:g,id:x,glyph:B});let ie=O.requests[X];ie||(ie=O.requests[X]=[],q.loadGlyphRange(g,X,this.url,this.requestManager,(he,Se)=>{if(Se){for(const ze in Se)this._doesCharSupportLocalGlyph(+ze)||(O.glyphs[+ze]=Se[+ze]);O.ranges[X]=!0}for(const ze of ie)ze(he,Se);delete O.requests[X]})),ie.push((he,Se)=>{he?I(he):Se&&I(null,{stack:g,id:x,glyph:Se[x]||null})})},(g,x)=>{if(g)u(g);else if(x){const I={};for(const{stack:O,id:B,glyph:X}of x)(I[O]||(I[O]={}))[B]=X&&{id:X.id,bitmap:X.bitmap.clone(),metrics:X.metrics};u(null,I)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](i)||s.unicodeBlockLookup["Hangul Syllables"](i)||s.unicodeBlockLookup.Hiragana(i)||s.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=i.tinySDF;if(!x){let O="400";/bold/i.test(u)?O="900":/medium/i.test(u)?O="500":/light/i.test(u)&&(O="200"),x=i.tinySDF=new q.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:O})}const I=x.draw(String.fromCharCode(f));return{id:f,bitmap:new s.AlphaImage({width:I.width||30,height:I.height||30},I.data),metrics:{width:I.glyphWidth||24,height:I.glyphHeight||24,left:I.glyphLeft||0,top:I.glyphTop||-8,advance:I.glyphAdvance||24}}}}q.loadGlyphRange=function(m,i,u,f,g){const x=256*i,I=x+255,O=f.transformRequest(u.replace("{fontstack}",m).replace("{range}",`${x}-${I}`),s.ResourceType.Glyphs);s.getArrayBuffer(O,(B,X)=>{if(B)g(B);else if(X){const ie={};for(const he of s.parseGlyphPBF(X))ie[he.id]=he;g(null,ie)}})},q.TinySDF=class{constructor({fontSize:m=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:I="normal"}){this.buffer=i,this.cutoff=f,this.radius=u;const O=this.size=m+4*i,B=this._createCanvas(O),X=this.ctx=B.getContext("2d",{willReadFrequently:!0});X.font=`${I} ${x} ${m}px ${g}`,X.textBaseline="alphabetic",X.textAlign="left",X.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(m){const i=document.createElement("canvas");return i.width=i.height=m,i}draw(m){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(m),I=Math.floor(u),O=Math.min(this.size-this.buffer,Math.ceil(x-g)),B=Math.min(this.size-this.buffer,Math.ceil(u)+Math.ceil(f)),X=O+2*this.buffer,ie=B+2*this.buffer,he=X*ie,Se=new Uint8ClampedArray(he),ze={data:Se,width:X,height:ie,glyphWidth:O,glyphHeight:B,glyphTop:I,glyphLeft:0,glyphAdvance:i};if(O===0||B===0)return ze;const{ctx:Te,buffer:Fe,gridInner:$e,gridOuter:We}=this;Te.clearRect(Fe,Fe,O,B),Te.fillText(m,Fe,Fe+I+1);const qe=Te.getImageData(Fe,Fe,O,B);We.fill(b,0,he),$e.fill(0,0,he);for(let Ye=0;Ye<B;Ye++)for(let ht=0;ht<O;ht++){const it=qe.data[4*(Ye*O+ht)+3]/255;if(it===0)continue;const ut=(Ye+Fe)*X+ht+Fe;if(it===1)We[ut]=0,$e[ut]=b;else{const vt=.5-it;We[ut]=vt>0?vt*vt:0,$e[ut]=vt<0?vt*vt:0}}M(We,0,0,X,ie,X,this.f,this.v,this.z),M($e,Fe,Fe,O,B,X,this.f,this.v,this.z);for(let Ye=0;Ye<he;Ye++){const ht=Math.sqrt(We[Ye])-Math.sqrt($e[Ye]);Se[Ye]=Math.round(255-255*(ht/this.radius+this.cutoff))}return ze}};const K=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(m,i){return s.sphericalToCartesian(m.expression.evaluate(i))}interpolate(m,i,u){return{x:s.number(m.x,i.x,u),y:s.number(m.y,i.y,u),z:s.number(m.z,i.z,u)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),de="-transition";class ye extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(K),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(s.validateLight,i,u))for(const f in i){const g=i[f];f.endsWith(de)?this._transitionable.setTransition(f.slice(0,-de.length),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class xe{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const g=[];let x=i.length%2==1?-i[i.length-1]*f:0,I=i[0]*f,O=!0;g.push({left:x,right:I,isDash:O,zeroLength:i[0]===0});let B=i[0];for(let X=1;X<i.length;X++){O=!O;const ie=i[X];x=B*f,B+=ie,I=B*f,g.push({left:x,right:I,isDash:O,zeroLength:ie===0})}return g}addRoundDash(i,u,f){const g=u/2;for(let x=-f;x<=f;x++){const I=this.width*(this.nextRow+f+x);let O=0,B=i[O];for(let X=0;X<this.width;X++){X/B.right>1&&(B=i[++O]);const ie=Math.abs(X-B.left),he=Math.abs(X-B.right),Se=Math.min(ie,he);let ze;const Te=x/f*(g+1);if(B.isDash){const Fe=g-Math.abs(Te);ze=Math.sqrt(Se*Se+Fe*Fe)}else ze=g-Math.sqrt(Se*Se+Te*Te);this.data[I+X]=Math.max(0,Math.min(255,ze+128))}}}addRegularDash(i){for(let O=i.length-1;O>=0;--O){const B=i[O],X=i[O+1];B.zeroLength?i.splice(O,1):X&&X.isDash===B.isDash&&(X.left=B.left,i.splice(O,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let x=0,I=i[x];for(let O=0;O<this.width;O++){O/I.right>1&&(I=i[++x]);const B=Math.abs(O-I.left),X=Math.abs(O-I.right),ie=Math.min(B,X);this.data[g+O]=Math.max(0,Math.min(255,(I.isDash?ie:-ie)+128))}}addDash(i,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return s.warnOnce("LineAtlas out of space"),null;let x=0;for(let O=0;O<i.length;O++)x+=i[O];if(x!==0){const O=this.width/x,B=this.getDashRanges(i,this.width,O);u?this.addRoundDash(B,O,f):this.addRegularDash(B)}const I={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,I}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class te{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const f=this.workerPool.acquire(this.id);for(let g=0;g<f.length;g++){const x=new te.Actor(f[g],u,this.id);x.name=`Worker ${g}`,this.actors.push(x)}}broadcast(i,u,f){s.asyncAll(this.actors,(g,x)=>{g.send(i,u,x)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ae(m,i,u){const f=function(g,x){if(g)return u(g);if(x){const I=s.pick(s.extend(x,m),["tiles","minzoom","maxzoom","attribution","maplibreLogo","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(I.vectorLayers=x.vector_layers,I.vectorLayerIds=I.vectorLayers.map(O=>O.id)),u(null,I)}};return m.url?s.getJSON(i.transformRequest(m.url,s.ResourceType.Source),f):s.exported.frame(()=>f(null,m))}te.Actor=s.Actor;class oe{constructor(i,u,f){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*u),g=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*u),x=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*u),I=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=f&&i.x<x&&i.y>=g&&i.y<I}}class ue extends s.Evented{constructor(i,u,f,g){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(u,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ae(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new s.ErrorEvent(i)):u&&(s.extend(this,u),u.bounds&&(this.tileBounds=new oe(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,s.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(I,O){return delete i.request,i.aborted?u(null):I&&I.status!==404?u(I):(O&&O.resourceTiming&&(i.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&i.setExpiryData(O),i.loadVectorData(O,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,x.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,x.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ee extends s.Evented{constructor(i,u,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},u),s.extend(this,s.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ae(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):u&&(s.extend(this,u),u.bounds&&(this.tileBounds=new oe(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=s.getImage(this.map._requestManager.transformRequest(f,s.ResourceType.Tile),(g,x)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(x){this.map._refreshExpiredTiles&&i.setExpiryData(x),delete x.cacheControl,delete x.expires;const I=this.map.painter.context,O=I.gl;i.texture=this.map.painter.getTileTexture(x.width),i.texture?i.texture.update(x,{useMipmap:!0}):(i.texture=new re(I,x,O.RGBA,{useMipmap:!0}),i.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let Pe;class ce extends Ee{constructor(i,u,f,g){super(i,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(x,I){x&&(i.state="errored",u(x)),I&&(i.dem=I,i.needsHillshadePrepare=!0,i.state="loaded",u(null))}i.request=s.getImage(this.map._requestManager.transformRequest(f,s.ResourceType.Tile),function(x,I){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(x)i.state="errored",u(x);else if(I){this.map._refreshExpiredTiles&&i.setExpiryData(I),delete I.cacheControl,delete I.expires;const O=s.isImageBitmap(I)&&(Pe==null&&(Pe=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Pe)?I:s.exported.getImageData(I,1),B={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:O,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",B,g.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,x=u.x===0?i.wrap-1:i.wrap,I=(u.x+1+f)%f,O=u.x+1===f?i.wrap+1:i.wrap,B={};return B[new s.OverscaledTileID(i.overscaledZ,x,u.z,g,u.y).key]={backfilled:!1},B[new s.OverscaledTileID(i.overscaledZ,O,u.z,I,u.y).key]={backfilled:!1},u.y>0&&(B[new s.OverscaledTileID(i.overscaledZ,x,u.z,g,u.y-1).key]={backfilled:!1},B[new s.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},B[new s.OverscaledTileID(i.overscaledZ,O,u.z,I,u.y-1).key]={backfilled:!1}),u.y+1<f&&(B[new s.OverscaledTileID(i.overscaledZ,x,u.z,g,u.y+1).key]={backfilled:!1},B[new s.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},B[new s.OverscaledTileID(i.overscaledZ,O,u.z,I,u.y+1).key]={backfilled:!1}),B}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class ke extends s.Evented{constructor(i,u,f,g){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=s.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const x=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*x,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*x,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.EXTENT,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},g),this}_updateWorkerData(i){const u=s.extend({},this.workerOptions),f=this._data;typeof f=="string"?(u.request=this.map._requestManager.transformRequest(s.exported.resolveURL(f),s.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(f),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(g,x)=>{if(this._pendingLoads--,this._removed||x&&x.abandoned)return;let I=null;if(x&&x.resourceTiming&&x.resourceTiming[this.id]&&(I=x.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:u.source},null),g)return void this.fire(new s.ErrorEvent(g));const O={dataType:"source",sourceDataType:i};this._collectResourceTiming&&I&&I.length>0&&s.extend(O,{resourceTiming:I}),this.fire(new s.Event("data",O))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,g,(x,I)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):x?u(x):(i.loadVectorData(I,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var be=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ie extends s.Evented{constructor(i,u,f,g){super(),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}load(i,u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(f,g)=>{this._loaded=!0,f?this.fire(new s.ErrorEvent(f)):g&&(this.image=g,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(g){let x=1/0,I=1/0,O=-1/0,B=-1/0;for(const Se of g)x=Math.min(x,Se.x),I=Math.min(I,Se.y),O=Math.max(O,Se.x),B=Math.max(B,Se.y);const X=Math.max(O-x,B-I),ie=Math.max(0,Math.floor(-Math.log(X)/Math.LN2)),he=Math.pow(2,ie);return new s.CanonicalTileID(ie,Math.floor((x+O)/2*he),Math.floor((I+B)/2*he))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new re(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const f in this.tiles){const g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Be extends Ie{constructor(i,u,f,g){super(i,u,f,g),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,s.ResourceType.Source).url);s.getVideo(this.urls,(u,f)=>{this._loaded=!0,u?this.fire(new s.ErrorEvent(u)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new re(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const f in this.tiles){const g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ze extends Ie{constructor(i,u,f,g){super(i,u,f,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(I=>typeof I!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,f=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,be.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new re(u,this.canvas,f.RGBA,{premultiply:!0});for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const et={vector:ue,raster:Ee,"raster-dem":ce,geojson:ke,video:Be,image:Ie,canvas:Ze};function tt(m,i){const u=s.create();return s.translate(u,u,[1,1,0]),s.scale(u,u,[.5*m.width,.5*m.height,1]),s.multiply(u,u,m.calculatePosMatrix(i.toUnwrapped()))}function ct(m,i,u,f,g,x){const I=function(he,Se,ze){if(he)for(const Te of he){const Fe=Se[Te];if(Fe&&Fe.source===ze&&Fe.type==="fill-extrusion")return!0}else for(const Te in Se){const Fe=Se[Te];if(Fe.source===ze&&Fe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,m.id),O=x.maxPitchScaleFactor(),B=m.tilesIn(f,O,I);B.sort(St);const X=[];for(const he of B)X.push({wrappedTileID:he.tileID.wrapped().key,queryResults:he.tile.queryRenderedFeatures(i,u,m._state,he.queryGeometry,he.cameraQueryGeometry,he.scale,g,x,O,tt(m.transform,he.tileID))});const ie=function(he){const Se={},ze={};for(const Te of he){const Fe=Te.queryResults,$e=Te.wrappedTileID,We=ze[$e]=ze[$e]||{};for(const qe in Fe){const Ye=Fe[qe],ht=We[qe]=We[qe]||{},it=Se[qe]=Se[qe]||[];for(const ut of Ye)ht[ut.featureIndex]||(ht[ut.featureIndex]=!0,it.push(ut))}}return Se}(X);for(const he in ie)ie[he].forEach(Se=>{const ze=Se.feature,Te=m.getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=Te});return ie}function St(m,i){const u=m.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class ft{constructor(i,u){this.tileID=i,this.uid=s.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<s.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,x){const I={};if(!x)return I;for(const O of g){const B=O.layerIds.map(X=>x.getLayer(X)).filter(Boolean);if(B.length!==0){O.layers=B,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(X=>B.filter(ie=>ie.id===X)[0]));for(const X of B)I[X.id]=O}}return I}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof s.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new re(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new re(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,g,x,I,O,B,X,ie){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:I,tileSize:this.tileSize,pixelPosMatrix:ie,transform:B,params:O,queryPadding:this.queryPadding*X},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=u?u.sourceLayer:"",I=g._geojsonTileLayer||g[x];if(!I)return;const O=s.createFilter(u&&u.filter),{z:B,x:X,y:ie}=this.tileID.canonical,he={z:B,x:X,y:ie};for(let Se=0;Se<I.length;Se++){const ze=I.feature(Se);if(O.needGeometry){const $e=s.toEvaluationFeature(ze,!0);if(!O.filter(new s.EvaluationParameters(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!O.filter(new s.EvaluationParameters(this.tileID.overscaledZ),ze))continue;const Te=f.getId(ze,x),Fe=new s.GeoJSONFeature(ze,B,X,ie,Te);Fe.tile=he,i.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=s.parseCacheControl(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const x=this.expirationTime-u;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const x=this.buckets[g],I=x.layers[0].sourceLayer||"_geojsonTileLayer",O=f[I],B=i[I];if(!O||!B||Object.keys(B).length===0)continue;x.update(B,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});const X=u&&u.style&&u.style.getLayer(g);X&&(this.queryPadding=Math.max(this.queryPadding,X.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=s.exported.now()+i}setDependencies(i,u){const f={};for(const g of u)f[g]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const g=this.dependencies[f];if(g){for(const x of u)if(g[x])return!0}}return!1}}class At{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:u,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class qt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},s.extend(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==g&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const x in this.state[i][g])f[x]||(this.deletedStates[i][g][x]=null)}else for(const x in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][x]===null&&delete this.deletedStates[i][g][x]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),g=s.extend({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][u];if(x===null)return{};for(const I in x)delete g[I]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const I in this.stateChanges[g])this.state[g][I]||(this.state[g][I]={}),s.extend(this.state[g][I],this.stateChanges[g][I]),x[I]=this.state[g][I];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const I in this.state[g])x[I]={},this.state[g][I]={};else for(const I in this.deletedStates[g]){if(this.deletedStates[g][I]===null)this.state[g][I]={};else for(const O of Object.keys(this.deletedStates[g][I]))delete this.state[g][I][O];x[I]=this.state[g][I]}f[g]=f[g]||{},s.extend(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,u)}}class Bt extends s.Evented{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",()=>{this._sourceErrored=!0}),this._source=function(g,x,I,O){const B=new et[x.type](g,x,I,O);if(B.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${B.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],B),B}(i,u,f,this),this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new qt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new s.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(ln).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,g)=>{const x=f.tileID,I=g.tileID,O=new s.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),B=new s.pointGeometry(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-I.overscaledZ||B.y-O.y||B.x-O.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(ln).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new s.ErrorEvent(g,{tile:i})):this.update(this.transform));i.timeAdded=s.exported.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new s.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const x=u[g];if(i.neighboringTiles&&i.neighboringTiles[x]){const I=this.getTileByID(x);f(i,I),f(I,i)}}function f(g,x){g.needsHillshadePrepare=!0;let I=x.tileID.canonical.x-g.tileID.canonical.x;const O=x.tileID.canonical.y-g.tileID.canonical.y,B=Math.pow(2,g.tileID.canonical.z),X=x.tileID.key;I===0&&O===0||Math.abs(O)>1||(Math.abs(I)>1&&(Math.abs(I+B)===1?I+=B:Math.abs(I-B)===1&&(I-=B)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,I,O),g.neighboringTiles&&g.neighboringTiles[X]&&(g.neighboringTiles[X].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,g){for(const x in this._tiles){let I=this._tiles[x];if(g[x]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>f)continue;let O=I.tileID;for(;I&&I.tileID.overscaledZ>u+1;){const X=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[X.key],I&&I.hasData()&&(O=X)}let B=O;for(;B.overscaledZ>u;)if(B=B.scaledTo(B.overscaledZ-1),i[B.key]){g[O.key]=O;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const g=i.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*f*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let u;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?u=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new s.OverscaledTileID(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(u=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(u=u.filter(B=>this._source.hasTile(B)))):u=[];const f=i.coveringZoomLevel(this._source),g=Math.max(f-Bt.maxOverzooming,this._source.minzoom),x=Math.max(f+Bt.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(u,f);if(En(this._source.type)){const B={},X={},ie=Object.keys(I);for(const he of ie){const Se=I[he],ze=this._tiles[he];if(!ze||ze.fadeEndTime&&ze.fadeEndTime<=s.exported.now())continue;const Te=this.findLoadedParent(Se,g);Te&&(this._addTile(Te.tileID),B[Te.tileID.key]=Te.tileID),X[he]=Se}this._retainLoadedChildren(X,f,x,I);for(const he in B)I[he]||(this._coveredTiles[he]=!0,I[he]=B[he])}for(const B in I)this._tiles[B].clearFadeHold();const O=s.keysDifference(this._tiles,I);for(const B of O){const X=this._tiles[B];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},g={},x=Math.max(u-Bt.maxOverzooming,this._source.minzoom),I=Math.max(u+Bt.maxUnderzooming,this._source.minzoom),O={};for(const B of i){const X=this._addTile(B);f[B.key]=B,X.hasData()||u<this._source.maxzoom&&(O[B.key]=B)}this._retainLoadedChildren(O,u,I,f);for(const B of i){let X=this._tiles[B.key];if(X.hasData())continue;if(u+1>this._source.maxzoom){const he=B.children(this._source.maxzoom)[0],Se=this.getTile(he);if(Se&&Se.hasData()){f[he.key]=he;continue}}else{const he=B.children(this._source.maxzoom);if(f[he[0].key]&&f[he[1].key]&&f[he[2].key]&&f[he[3].key])continue}let ie=X.wasRequested();for(let he=B.overscaledZ-1;he>=x;--he){const Se=B.scaledTo(he);if(g[Se.key]||(g[Se.key]=!0,X=this.getTile(Se),!X&&ie&&(X=this._addTile(Se)),X&&(f[Se.key]=Se,ie=X.wasRequested(),X.hasData())))break}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of u)this._loadedParentTiles[x]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new ft(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new s.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const g=[],x=this.transform;if(!x)return g;const I=f?x.getCameraQueryGeometry(i):i,O=i.map(Te=>x.pointCoordinate(Te)),B=I.map(Te=>x.pointCoordinate(Te)),X=this.getIds();let ie=1/0,he=1/0,Se=-1/0,ze=-1/0;for(const Te of B)ie=Math.min(ie,Te.x),he=Math.min(he,Te.y),Se=Math.max(Se,Te.x),ze=Math.max(ze,Te.y);for(let Te=0;Te<X.length;Te++){const Fe=this._tiles[X[Te]];if(Fe.holdingForFade())continue;const $e=Fe.tileID,We=Math.pow(2,x.zoom-Fe.tileID.overscaledZ),qe=u*Fe.queryPadding*s.EXTENT/Fe.tileSize/We,Ye=[$e.getTilePoint(new s.MercatorCoordinate(ie,he)),$e.getTilePoint(new s.MercatorCoordinate(Se,ze))];if(Ye[0].x-qe<s.EXTENT&&Ye[0].y-qe<s.EXTENT&&Ye[1].x+qe>=0&&Ye[1].y+qe>=0){const ht=O.map(ut=>$e.getTilePoint(ut)),it=B.map(ut=>$e.getTilePoint(ut));g.push({tile:Fe,tileID:$e,queryGeometry:ht,cameraQueryGeometry:it,scale:We})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(En(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=s.exported.now())return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const g=this._tiles[i];g&&g.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function ln(m,i){const u=Math.abs(2*m.wrap)-+(m.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return m.overscaledZ-i.overscaledZ||f-u||i.canonical.y-m.canonical.y||i.canonical.x-m.canonical.x}function En(m){return m==="raster"||m==="image"||m==="video"}Bt.maxOverzooming=10,Bt.maxUnderzooming=3;const _n="mapboxgl_preloaded_worker_pool";class nn{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<nn.workerCount;)this.workers.push(new Worker(Gl.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[_n]}numActive(){return Object.keys(this.active).length}}const Pn=Math.floor(s.exported.hardwareConcurrency/2);let ge;function L(){return ge||(ge=new nn),ge}function R(m,i){const u={};for(const f in m)f!=="ref"&&(u[f]=m[f]);return s.refProperties.forEach(f=>{f in i&&(u[f]=i[f])}),u}function me(m){m=m.slice();const i=Object.create(null);for(let u=0;u<m.length;u++)i[m[u].id]=m[u];for(let u=0;u<m.length;u++)"ref"in m[u]&&(m[u]=R(m[u],i[m[u].ref]));return m}nn.workerCount=Math.max(Math.min(Pn,6),1);const Oe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ke(m,i,u){u.push({command:Oe.addSource,args:[m,i[m]]})}function at(m,i,u){i.push({command:Oe.removeSource,args:[m]}),u[m]=!0}function se(m,i,u,f){at(m,u,f),Ke(m,i,u)}function T(m,i,u){let f;for(f in m[u])if(Object.prototype.hasOwnProperty.call(m[u],f)&&f!=="data"&&!S(m[u][f],i[u][f]))return!1;for(f in i[u])if(Object.prototype.hasOwnProperty.call(i[u],f)&&f!=="data"&&!S(m[u][f],i[u][f]))return!1;return!0}function z(m,i,u,f,g,x){let I;for(I in i=i||{},m=m||{})Object.prototype.hasOwnProperty.call(m,I)&&(S(m[I],i[I])||u.push({command:x,args:[f,I,i[I],g]}));for(I in i)Object.prototype.hasOwnProperty.call(i,I)&&!Object.prototype.hasOwnProperty.call(m,I)&&(S(m[I],i[I])||u.push({command:x,args:[f,I,i[I],g]}))}function we(m){return m.id}function De(m,i){return m[i.id]=i,m}class Xe{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let u=1,f=this._distances[u];const g=i*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const x=u-1,I=this._distances[x],O=f-I,B=O>0?(g-I)/O:0;return this.points[x].mult(1-B).add(this.points[u].mult(B))}}function Qe(m,i){let u=!0;return m==="always"||m!=="never"&&i!=="never"||(u=!1),u}class $t{constructor(i,u,f){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let I=0;I<this.xCellCount*this.yCellCount;I++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,g,x){this._forEachCell(u,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(i,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,u,f,g,x,I){this.boxCells[x].push(I)}_insertCircleCell(i,u,f,g,x,I){this.circleCells[x].push(I)}_query(i,u,f,g,x,I,O){if(f<0||i>this.width||g<0||u>this.height)return[];const B=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=g){if(x)return[{key:null,x1:i,y1:u,x2:f,y2:g}];for(let X=0;X<this.boxKeys.length;X++)B.push({key:this.boxKeys[X],x1:this.bboxes[4*X],y1:this.bboxes[4*X+1],x2:this.bboxes[4*X+2],y2:this.bboxes[4*X+3]});for(let X=0;X<this.circleKeys.length;X++){const ie=this.circles[3*X],he=this.circles[3*X+1],Se=this.circles[3*X+2];B.push({key:this.circleKeys[X],x1:ie-Se,y1:he-Se,x2:ie+Se,y2:he+Se})}}else this._forEachCell(i,u,f,g,this._queryCell,B,{hitTest:x,overlapMode:I,seenUids:{box:{},circle:{}}},O);return B}query(i,u,f,g){return this._query(i,u,f,g,!1,null)}hitTest(i,u,f,g,x,I){return this._query(i,u,f,g,!0,x,I).length>0}hitTestCircle(i,u,f,g,x){const I=i-f,O=i+f,B=u-f,X=u+f;if(O<0||I>this.width||X<0||B>this.height)return!1;const ie=[];return this._forEachCell(I,B,O,X,this._queryCellCircle,ie,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},x),ie.length>0}_queryCell(i,u,f,g,x,I,O,B){const{seenUids:X,hitTest:ie,overlapMode:he}=O,Se=this.boxCells[x];if(Se!==null){const Te=this.bboxes;for(const Fe of Se)if(!X.box[Fe]){X.box[Fe]=!0;const $e=4*Fe,We=this.boxKeys[Fe];if(i<=Te[$e+2]&&u<=Te[$e+3]&&f>=Te[$e+0]&&g>=Te[$e+1]&&(!B||B(We))&&(!ie||!Qe(he,We.overlapMode))&&(I.push({key:We,x1:Te[$e],y1:Te[$e+1],x2:Te[$e+2],y2:Te[$e+3]}),ie))return!0}}const ze=this.circleCells[x];if(ze!==null){const Te=this.circles;for(const Fe of ze)if(!X.circle[Fe]){X.circle[Fe]=!0;const $e=3*Fe,We=this.circleKeys[Fe];if(this._circleAndRectCollide(Te[$e],Te[$e+1],Te[$e+2],i,u,f,g)&&(!B||B(We))&&(!ie||!Qe(he,We.overlapMode))){const qe=Te[$e],Ye=Te[$e+1],ht=Te[$e+2];if(I.push({key:We,x1:qe-ht,y1:Ye-ht,x2:qe+ht,y2:Ye+ht}),ie)return!0}}}return!1}_queryCellCircle(i,u,f,g,x,I,O,B){const{circle:X,seenUids:ie,overlapMode:he}=O,Se=this.boxCells[x];if(Se!==null){const Te=this.bboxes;for(const Fe of Se)if(!ie.box[Fe]){ie.box[Fe]=!0;const $e=4*Fe,We=this.boxKeys[Fe];if(this._circleAndRectCollide(X.x,X.y,X.radius,Te[$e+0],Te[$e+1],Te[$e+2],Te[$e+3])&&(!B||B(We))&&!Qe(he,We.overlapMode))return I.push(!0),!0}}const ze=this.circleCells[x];if(ze!==null){const Te=this.circles;for(const Fe of ze)if(!ie.circle[Fe]){ie.circle[Fe]=!0;const $e=3*Fe,We=this.circleKeys[Fe];if(this._circlesCollide(Te[$e],Te[$e+1],Te[$e+2],X.x,X.y,X.radius)&&(!B||B(We))&&!Qe(he,We.overlapMode))return I.push(!0),!0}}}_forEachCell(i,u,f,g,x,I,O,B){const X=this._convertToXCellCoord(i),ie=this._convertToYCellCoord(u),he=this._convertToXCellCoord(f),Se=this._convertToYCellCoord(g);for(let ze=X;ze<=he;ze++)for(let Te=ie;Te<=Se;Te++)if(x.call(this,i,u,f,g,this.xCellCount*Te+ze,I,O,B))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,g,x,I){const O=g-i,B=x-u,X=f+I;return X*X>O*O+B*B}_circleAndRectCollide(i,u,f,g,x,I,O){const B=(I-g)/2,X=Math.abs(i-(g+B));if(X>B+f)return!1;const ie=(O-x)/2,he=Math.abs(u-(x+ie));if(he>ie+f)return!1;if(X<=B||he<=ie)return!0;const Se=X-B,ze=he-ie;return Se*Se+ze*ze<=f*f}}function Tn(m,i,u,f,g){const x=s.create();return i?(s.scale(x,x,[1/g,1/g,1]),u||s.rotateZ(x,x,f.angle)):s.multiply(x,f.labelPlaneMatrix,m),x}function pn(m,i,u,f,g){if(i){const x=s.clone(m);return s.scale(x,x,[g,g,1]),u||s.rotateZ(x,x,-f.angle),x}return f.glCoordMatrix}function dt(m,i){const u=s.fromValues(m.x,m.y,0,1);Ut(u,u,i);const f=u[3];return{point:new s.pointGeometry(u[0]/f,u[1]/f),signedDistanceFromCamera:f}}function Lt(m,i){return .5+m/i*.5}function un(m,i){const u=m[0]/m[3],f=m[1]/m[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function Tr(m,i,u,f,g,x,I,O){const B=f?m.textSizeData:m.iconSizeData,X=s.evaluateSizeForZoom(B,u.transform.zoom),ie=[256/u.width*2+1,256/u.height*2+1],he=f?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;he.clear();const Se=m.lineVertexArray,ze=f?m.text.placedSymbolArray:m.icon.placedSymbolArray,Te=u.transform.width/u.transform.height;let Fe=!1;for(let $e=0;$e<ze.length;$e++){const We=ze.get($e);if(We.hidden||We.writingMode===s.WritingMode.vertical&&!Fe){Vt(We.numGlyphs,he);continue}Fe=!1;const qe=s.fromValues(We.anchorX,We.anchorY,0,1);if(s.transformMat4(qe,qe,i),!un(qe,ie)){Vt(We.numGlyphs,he);continue}const Ye=Lt(u.transform.cameraToCenterDistance,qe[3]),ht=s.evaluateSizeForFeature(B,X,We),it=I?ht/Ye:ht*Ye,ut=new s.pointGeometry(We.anchorX,We.anchorY),vt=dt(ut,g).point,bt={},gt=er(We,it,!1,O,i,g,x,m.glyphOffsetArray,Se,he,vt,ut,bt,Te);Fe=gt.useVertical,(gt.notEnoughRoom||Fe||gt.needsFlipping&&er(We,it,!0,O,i,g,x,m.glyphOffsetArray,Se,he,vt,ut,bt,Te).notEnoughRoom)&&Vt(We.numGlyphs,he)}f?m.text.dynamicLayoutVertexBuffer.updateData(he):m.icon.dynamicLayoutVertexBuffer.updateData(he)}function Hr(m,i,u,f,g,x,I,O,B,X,ie){const he=O.glyphStartIndex+O.numGlyphs,Se=O.lineStartIndex,ze=O.lineStartIndex+O.lineLength,Te=i.getoffsetX(O.glyphStartIndex),Fe=i.getoffsetX(he-1),$e=gr(m*Te,u,f,g,x,I,O.segment,Se,ze,B,X,ie);if(!$e)return null;const We=gr(m*Fe,u,f,g,x,I,O.segment,Se,ze,B,X,ie);return We?{first:$e,last:We}:null}function cn(m,i,u,f){return m===s.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(m===s.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function er(m,i,u,f,g,x,I,O,B,X,ie,he,Se,ze){const Te=i/24,Fe=m.lineOffsetX*Te,$e=m.lineOffsetY*Te;let We;if(m.numGlyphs>1){const qe=m.glyphStartIndex+m.numGlyphs,Ye=m.lineStartIndex,ht=m.lineStartIndex+m.lineLength,it=Hr(Te,O,Fe,$e,u,ie,he,m,B,x,Se);if(!it)return{notEnoughRoom:!0};const ut=dt(it.first.point,I).point,vt=dt(it.last.point,I).point;if(f&&!u){const bt=cn(m.writingMode,ut,vt,ze);if(bt)return bt}We=[it.first];for(let bt=m.glyphStartIndex+1;bt<qe-1;bt++)We.push(gr(Te*O.getoffsetX(bt),Fe,$e,u,ie,he,m.segment,Ye,ht,B,x,Se));We.push(it.last)}else{if(f&&!u){const Ye=dt(he,g).point,ht=m.lineStartIndex+m.segment+1,it=new s.pointGeometry(B.getx(ht),B.gety(ht)),ut=dt(it,g),vt=ut.signedDistanceFromCamera>0?ut.point:pi(he,it,Ye,1,g),bt=cn(m.writingMode,Ye,vt,ze);if(bt)return bt}const qe=gr(Te*O.getoffsetX(m.glyphStartIndex),Fe,$e,u,ie,he,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,B,x,Se);if(!qe)return{notEnoughRoom:!0};We=[qe]}for(const qe of We)s.addDynamicAttributes(X,qe.point,qe.angle);return{}}function pi(m,i,u,f,g){const x=dt(m.add(m.sub(i)._unit()),g).point,I=u.sub(x);return u.add(I._mult(f/I.mag()))}function gr(m,i,u,f,g,x,I,O,B,X,ie,he){const Se=f?m-i:m+i;let ze=Se>0?1:-1,Te=0;f&&(ze*=-1,Te=Math.PI),ze<0&&(Te+=Math.PI);let Fe=ze>0?O+I:O+I+1,$e=g,We=g,qe=0,Ye=0;const ht=Math.abs(Se),it=[];for(;qe+Ye<=ht;){if(Fe+=ze,Fe<O||Fe>=B)return null;if(We=$e,it.push($e),$e=he[Fe],$e===void 0){const Ht=new s.pointGeometry(X.getx(Fe),X.gety(Fe)),Ot=dt(Ht,ie);if(Ot.signedDistanceFromCamera>0)$e=he[Fe]=Ot.point;else{const fn=Fe-ze;$e=pi(qe===0?x:new s.pointGeometry(X.getx(fn),X.gety(fn)),Ht,We,ht-qe+1,ie)}}qe+=Ye,Ye=We.dist($e)}const ut=(ht-qe)/Ye,vt=$e.sub(We),bt=vt.mult(ut)._add(We);bt._add(vt._unit()._perp()._mult(u*ze));const gt=Te+Math.atan2($e.y-We.y,$e.x-We.x);return it.push(bt),{point:bt,angle:gt,path:it}}const jr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Vt(m,i){for(let u=0;u<m;u++){const f=i.length;i.resize(f+4),i.float32.set(jr,3*f)}}function Ut(m,i,u){const f=i[0],g=i[1];return m[0]=u[0]*f+u[4]*g+u[12],m[1]=u[1]*f+u[5]*g+u[13],m[3]=u[3]*f+u[7]*g+u[15],m}const Gt=100;class An{constructor(i,u=new $t(i.width+200,i.height+200,25),f=new $t(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Gt,this.screenBottomBoundary=i.height+Gt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,u,f,g,x){const I=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY),O=f*I.perspectiveRatio,B=i.x1*O+I.point.x,X=i.y1*O+I.point.y,ie=i.x2*O+I.point.x,he=i.y2*O+I.point.y;return!this.isInsideGrid(B,X,ie,he)||u!=="always"&&this.grid.hitTest(B,X,ie,he,u,x)?{box:[],offscreen:!1}:{box:[B,X,ie,he],offscreen:this.isOffscreen(B,X,ie,he)}}placeCollisionCircles(i,u,f,g,x,I,O,B,X,ie,he,Se,ze){const Te=[],Fe=new s.pointGeometry(u.anchorX,u.anchorY),$e=dt(Fe,I),We=Lt(this.transform.cameraToCenterDistance,$e.signedDistanceFromCamera),qe=(ie?x/We:x*We)/s.ONE_EM,Ye=dt(Fe,O).point,ht=Hr(qe,g,u.lineOffsetX*qe,u.lineOffsetY*qe,!1,Ye,Fe,u,f,O,{});let it=!1,ut=!1,vt=!0;if(ht){const bt=.5*Se*We+ze,gt=new s.pointGeometry(-100,-100),Ht=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ot=new Xe,fn=ht.first,Un=ht.last;let In=[];for(let yn=fn.path.length-1;yn>=1;yn--)In.push(fn.path[yn]);for(let yn=1;yn<Un.path.length;yn++)In.push(Un.path[yn]);const Cn=2.5*bt;if(B){const yn=In.map(On=>dt(On,B));In=yn.some(On=>On.signedDistanceFromCamera<=0)?[]:yn.map(On=>On.point)}let _r=[];if(In.length>0){const yn=In[0].clone(),On=In[0].clone();for(let dr=1;dr<In.length;dr++)yn.x=Math.min(yn.x,In[dr].x),yn.y=Math.min(yn.y,In[dr].y),On.x=Math.max(On.x,In[dr].x),On.y=Math.max(On.y,In[dr].y);_r=yn.x>=gt.x&&On.x<=Ht.x&&yn.y>=gt.y&&On.y<=Ht.y?[In]:On.x<gt.x||yn.x>Ht.x||On.y<gt.y||yn.y>Ht.y?[]:s.clipLine([In],gt.x,gt.y,Ht.x,Ht.y)}for(const yn of _r){Ot.reset(yn,.25*bt);let On=0;On=Ot.length<=.5*bt?1:Math.ceil(Ot.paddedLength/Cn)+1;for(let dr=0;dr<On;dr++){const Xr=dr/Math.max(On-1,1),zi=Ot.lerp(Xr),Oi=zi.x+Gt,so=zi.y+Gt;Te.push(Oi,so,bt,0);const Li=Oi-bt,lo=so-bt,wa=Oi+bt,Ya=so+bt;if(vt=vt&&this.isOffscreen(Li,lo,wa,Ya),ut=ut||this.isInsideGrid(Li,lo,wa,Ya),i!=="always"&&this.grid.hitTestCircle(Oi,so,bt,i,he)&&(it=!0,!X))return{circles:[],offscreen:!1,collisionDetected:it}}}}return{circles:!X&&it||!ut?[]:Te,offscreen:vt,collisionDetected:it}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,x=-1/0,I=-1/0;for(const ie of i){const he=new s.pointGeometry(ie.x+Gt,ie.y+Gt);f=Math.min(f,he.x),g=Math.min(g,he.y),x=Math.max(x,he.x),I=Math.max(I,he.y),u.push(he)}const O=this.grid.query(f,g,x,I).concat(this.ignoredGrid.query(f,g,x,I)),B={},X={};for(const ie of O){const he=ie.key;if(B[he.bucketInstanceId]===void 0&&(B[he.bucketInstanceId]={}),B[he.bucketInstanceId][he.featureIndex])continue;const Se=[new s.pointGeometry(ie.x1,ie.y1),new s.pointGeometry(ie.x2,ie.y1),new s.pointGeometry(ie.x2,ie.y2),new s.pointGeometry(ie.x1,ie.y2)];s.polygonIntersectsPolygon(u,Se)&&(B[he.bucketInstanceId][he.featureIndex]=!0,X[he.bucketInstanceId]===void 0&&(X[he.bucketInstanceId]=[]),X[he.bucketInstanceId].push(he.featureIndex))}return X}insertCollisionBox(i,u,f,g,x,I){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:I,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,g,x,I){const O=f?this.ignoredGrid:this.grid,B={bucketInstanceId:g,featureIndex:x,collisionGroupID:I,overlapMode:u};for(let X=0;X<i.length;X+=4)O.insertCircle(B,i[X],i[X+1],i[X+2])}projectAndGetPerspectiveRatio(i,u,f){const g=s.fromValues(u,f,0,1);return Ut(g,g,i),{point:new s.pointGeometry((g[0]/g[3]+1)/2*this.transform.width+Gt,(-g[1]/g[3]+1)/2*this.transform.height+Gt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/g[3]*.5}}isOffscreen(i,u,f,g){return f<Gt||i>=this.screenRightBoundary||g<Gt||u>this.screenBottomBoundary}isInsideGrid(i,u,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}function zn(m,i,u){return i*(s.EXTENT/(m.tileSize*Math.pow(2,u-m.tileID.overscaledZ)))}class tr{constructor(i,u,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Dr{constructor(i,u,f,g,x){this.text=new tr(i?i.text:null,u,f,x),this.icon=new tr(i?i.icon:null,u,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ii{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class ca{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ae{constructor(i,u,f,g,x){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}}class Z{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function J(m,i,u,f,g){const{horizontalAlign:x,verticalAlign:I}=s.getAnchorAlignment(m),O=-(x-.5)*i,B=-(I-.5)*u,X=s.evaluateVariableOffset(m,f);return new s.pointGeometry(O+X[0]*g,B+X[1]*g)}function ve(m,i,u,f,g,x){const{x1:I,x2:O,y1:B,y2:X,anchorPointX:ie,anchorPointY:he}=m,Se=new s.pointGeometry(i,u);return f&&Se._rotate(g?x:-x),{x1:I+Se.x,y1:B+Se.y,x2:O+Se.x,y2:X+Se.y,anchorPointX:ie,anchorPointY:he}}class Ce{constructor(i,u,f,g){this.transform=i.clone(),this.collisionIndex=new An(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new Z(f),this.collisionCircleArrays={},this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,g){const x=f.getBucket(u),I=f.latestFeatureIndex;if(!x||!I||u.id!==x.layerIds[0])return;const O=f.collisionBoxArray,B=x.layers[0].layout,X=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),ie=f.tileSize/s.EXTENT,he=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),Se=B.get("text-pitch-alignment")==="map",ze=B.get("text-rotation-alignment")==="map",Te=zn(f,1,this.transform.zoom),Fe=Tn(he,Se,ze,this.transform,Te);let $e=null;if(Se){const qe=pn(he,Se,ze,this.transform,Te);$e=s.multiply([],this.transform.labelPlaneMatrix,qe)}this.retainedQueryData[x.bucketInstanceId]=new Ae(x.bucketInstanceId,I,x.sourceLayerIndex,x.index,f.tileID);const We={bucket:x,layout:B,posMatrix:he,textLabelPlaneMatrix:Fe,labelToScreenMatrix:$e,scale:X,textPixelRatio:ie,holdingForFade:f.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const qe of x.sortKeyRanges){const{sortKey:Ye,symbolInstanceStart:ht,symbolInstanceEnd:it}=qe;i.push({sortKey:Ye,symbolInstanceStart:ht,symbolInstanceEnd:it,parameters:We})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:We})}attemptAnchorPlacement(i,u,f,g,x,I,O,B,X,ie,he,Se,ze,Te,Fe){const $e=[Se.textOffset0,Se.textOffset1],We=J(i,f,g,$e,x),qe=this.collisionIndex.placeCollisionBox(ve(u,We.x,We.y,I,O,this.transform.angle),he,B,X,ie.predicate);if((!Fe||this.collisionIndex.placeCollisionBox(ve(Fe,We.x,We.y,I,O,this.transform.angle),he,B,X,ie.predicate).box.length!==0)&&qe.box.length>0){let Ye;return this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),this.variableOffsets[Se.crossTileID]={textOffset:$e,width:f,height:g,anchor:i,textBoxScale:x,prevAnchor:Ye},this.markUsedJustification(ze,i,Se,Te),ze.allowVerticalPlacement&&(this.markUsedOrientation(ze,Te,Se),this.placedOrientations[Se.crossTileID]=Te),{shift:We,placedGlyphBoxes:qe}}}placeLayerBucketPart(i,u,f){const{bucket:g,layout:x,posMatrix:I,textLabelPlaneMatrix:O,labelToScreenMatrix:B,textPixelRatio:X,holdingForFade:ie,collisionBoxArray:he,partiallyEvaluatedTextSize:Se,collisionGroup:ze}=i.parameters,Te=x.get("text-optional"),Fe=x.get("icon-optional"),$e=s.getOverlapMode(x,"text-overlap","text-allow-overlap"),We=$e==="always",qe=s.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),Ye=qe==="always",ht=x.get("text-rotation-alignment")==="map",it=x.get("text-pitch-alignment")==="map",ut=x.get("icon-text-fit")!=="none",vt=x.get("symbol-z-order")==="viewport-y",bt=We&&(Ye||!g.hasIconData()||Fe),gt=Ye&&(We||!g.hasTextData()||Te);!g.collisionArrays&&he&&g.deserializeCollisionBoxes(he);const Ht=(Ot,fn)=>{if(u[Ot.crossTileID])return;if(ie)return void(this.placements[Ot.crossTileID]=new ii(!1,!1,!1));let Un=!1,In=!1,Cn=!0,_r=null,yn={box:null,offscreen:null},On={box:null,offscreen:null},dr=null,Xr=null,zi=null,Oi=0,so=0,Li=0;fn.textFeatureIndex?Oi=fn.textFeatureIndex:Ot.useRuntimeCollisionCircles&&(Oi=Ot.featureIndex),fn.verticalTextFeatureIndex&&(so=fn.verticalTextFeatureIndex);const lo=fn.textBox;if(lo){const Hn=Nn=>{let kr=s.WritingMode.horizontal;if(g.allowVerticalPlacement&&!Nn&&this.prevPlacement){const Ri=this.prevPlacement.placedOrientations[Ot.crossTileID];Ri&&(this.placedOrientations[Ot.crossTileID]=Ri,kr=Ri,this.markUsedOrientation(g,kr,Ot))}return kr},$r=(Nn,kr)=>{if(g.allowVerticalPlacement&&Ot.numVerticalGlyphVertices>0&&fn.verticalTextBox){for(const Ri of g.writingModes)if(Ri===s.WritingMode.vertical?(yn=kr(),On=yn):yn=Nn(),yn&&yn.box&&yn.box.length)break}else yn=Nn()};if(x.get("text-variable-anchor")){let Nn=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ot.crossTileID]){const ar=this.prevPlacement.variableOffsets[Ot.crossTileID];Nn.indexOf(ar.anchor)>0&&(Nn=Nn.filter(Ka=>Ka!==ar.anchor),Nn.unshift(ar.anchor))}const kr=(ar,Ka,qa)=>{const Ls=ar.x2-ar.x1,$u=ar.y2-ar.y1,ad=Ot.textBoxScale,fh=ut&&qe==="never"?Ka:null;let ba={box:[],offscreen:!1};const Ja=$e!=="never"?2*Nn.length:Nn.length;for(let Qa=0;Qa<Ja;++Qa){const Vu=this.attemptAnchorPlacement(Nn[Qa%Nn.length],ar,Ls,$u,ad,ht,it,X,I,ze,Qa>=Nn.length?$e:"never",Ot,g,qa,fh);if(Vu&&(ba=Vu.placedGlyphBoxes,ba&&ba.box&&ba.box.length)){Un=!0,_r=Vu.shift;break}}return ba};$r(()=>kr(lo,fn.iconBox,s.WritingMode.horizontal),()=>{const ar=fn.verticalTextBox;return g.allowVerticalPlacement&&!(yn&&yn.box&&yn.box.length)&&Ot.numVerticalGlyphVertices>0&&ar?kr(ar,fn.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),yn&&(Un=yn.box,Cn=yn.offscreen);const Ri=Hn(yn&&yn.box);if(!Un&&this.prevPlacement){const ar=this.prevPlacement.variableOffsets[Ot.crossTileID];ar&&(this.variableOffsets[Ot.crossTileID]=ar,this.markUsedJustification(g,ar.anchor,Ot,Ri))}}else{const Nn=(kr,Ri)=>{const ar=this.collisionIndex.placeCollisionBox(kr,$e,X,I,ze.predicate);return ar&&ar.box&&ar.box.length&&(this.markUsedOrientation(g,Ri,Ot),this.placedOrientations[Ot.crossTileID]=Ri),ar};$r(()=>Nn(lo,s.WritingMode.horizontal),()=>{const kr=fn.verticalTextBox;return g.allowVerticalPlacement&&Ot.numVerticalGlyphVertices>0&&kr?Nn(kr,s.WritingMode.vertical):{box:null,offscreen:null}}),Hn(yn&&yn.box&&yn.box.length)}}if(dr=yn,Un=dr&&dr.box&&dr.box.length>0,Cn=dr&&dr.offscreen,Ot.useRuntimeCollisionCircles){const Hn=g.text.placedSymbolArray.get(Ot.centerJustifiedTextSymbolIndex),$r=s.evaluateSizeForFeature(g.textSizeData,Se,Hn),Nn=x.get("text-padding");Xr=this.collisionIndex.placeCollisionCircles($e,Hn,g.lineVertexArray,g.glyphOffsetArray,$r,I,O,B,f,it,ze.predicate,Ot.collisionCircleDiameter,Nn),Un=We||Xr.circles.length>0&&!Xr.collisionDetected,Cn=Cn&&Xr.offscreen}if(fn.iconFeatureIndex&&(Li=fn.iconFeatureIndex),fn.iconBox){const Hn=$r=>{const Nn=ut&&_r?ve($r,_r.x,_r.y,ht,it,this.transform.angle):$r;return this.collisionIndex.placeCollisionBox(Nn,qe,X,I,ze.predicate)};On&&On.box&&On.box.length&&fn.verticalIconBox?(zi=Hn(fn.verticalIconBox),In=zi.box.length>0):(zi=Hn(fn.iconBox),In=zi.box.length>0),Cn=Cn&&zi.offscreen}const wa=Te||Ot.numHorizontalGlyphVertices===0&&Ot.numVerticalGlyphVertices===0,Ya=Fe||Ot.numIconVertices===0;if(wa||Ya?Ya?wa||(In=In&&Un):Un=In&&Un:In=Un=In&&Un,Un&&dr&&dr.box&&this.collisionIndex.insertCollisionBox(dr.box,$e,x.get("text-ignore-placement"),g.bucketInstanceId,On&&On.box&&so?so:Oi,ze.ID),In&&zi&&this.collisionIndex.insertCollisionBox(zi.box,qe,x.get("icon-ignore-placement"),g.bucketInstanceId,Li,ze.ID),Xr&&(Un&&this.collisionIndex.insertCollisionCircles(Xr.circles,$e,x.get("text-ignore-placement"),g.bucketInstanceId,Oi,ze.ID),f)){const Hn=g.bucketInstanceId;let $r=this.collisionCircleArrays[Hn];$r===void 0&&($r=this.collisionCircleArrays[Hn]=new ca);for(let Nn=0;Nn<Xr.circles.length;Nn+=4)$r.circles.push(Xr.circles[Nn+0]),$r.circles.push(Xr.circles[Nn+1]),$r.circles.push(Xr.circles[Nn+2]),$r.circles.push(Xr.collisionDetected?1:0)}this.placements[Ot.crossTileID]=new ii(Un||bt,In||gt,Cn||g.justReloaded),u[Ot.crossTileID]=!0};if(vt){const Ot=g.getSortedSymbolIndexes(this.transform.angle);for(let fn=Ot.length-1;fn>=0;--fn){const Un=Ot[fn];Ht(g.symbolInstances.get(Un),g.collisionArrays[Un])}}else for(let Ot=i.symbolInstanceStart;Ot<i.symbolInstanceEnd;Ot++)Ht(g.symbolInstances.get(Ot),g.collisionArrays[Ot]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const Ot=this.collisionCircleArrays[g.bucketInstanceId];s.invert(Ot.invProjMatrix,I),Ot.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,f,g){let x;x=g===s.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(u)];const I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const O of I)O>=0&&(i.text.placedSymbolArray.get(O).crossTileID=x>=0&&O!==x?0:f.crossTileID)}markUsedOrientation(i,u,f){const g=u===s.WritingMode.horizontal||u===s.WritingMode.horizontalOnly?u:0,x=u===s.WritingMode.vertical?u:0,I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const O of I)i.text.placedSymbolArray.get(O).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,x=u?u.opacities:{},I=u?u.variableOffsets:{},O=u?u.placedOrientations:{};for(const B in this.placements){const X=this.placements[B],ie=x[B];ie?(this.opacities[B]=new Dr(ie,g,X.text,X.icon),f=f||X.text!==ie.text.placed||X.icon!==ie.icon.placed):(this.opacities[B]=new Dr(null,g,X.text,X.icon,X.skipFade),f=f||X.text||X.icon)}for(const B in x){const X=x[B];if(!this.opacities[B]){const ie=new Dr(X,g,!1,!1);ie.isHidden()||(this.opacities[B]=ie,f=f||X.text.placed||X.icon.placed)}}for(const B in I)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=I[B]);for(const B in O)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=O[B]);f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const g of u){const x=g.getBucket(i);x&&g.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,f,g.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0].layout,x=new Dr(null,0,!1,!1,!0),I=g.get("text-allow-overlap"),O=g.get("icon-allow-overlap"),B=g.get("text-variable-anchor"),X=g.get("text-rotation-alignment")==="map",ie=g.get("text-pitch-alignment")==="map",he=g.get("icon-text-fit")!=="none",Se=new Dr(null,0,I&&(O||!i.hasIconData()||g.get("icon-optional")),O&&(I||!i.hasTextData()||g.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const ze=(Te,Fe,$e)=>{for(let We=0;We<Fe/4;We++)Te.opacityVertexArray.emplaceBack($e)};for(let Te=0;Te<i.symbolInstances.length;Te++){const Fe=i.symbolInstances.get(Te),{numHorizontalGlyphVertices:$e,numVerticalGlyphVertices:We,crossTileID:qe}=Fe;let Ye=this.opacities[qe];u[qe]?Ye=x:Ye||(Ye=Se,this.opacities[qe]=Ye),u[qe]=!0;const ht=Fe.numIconVertices>0,it=this.placedOrientations[Fe.crossTileID],ut=it===s.WritingMode.vertical,vt=it===s.WritingMode.horizontal||it===s.WritingMode.horizontalOnly;if($e>0||We>0){const bt=Nt(Ye.text);ze(i.text,$e,ut?It:bt),ze(i.text,We,vt?It:bt);const gt=Ye.text.isHidden();[Fe.rightJustifiedTextSymbolIndex,Fe.centerJustifiedTextSymbolIndex,Fe.leftJustifiedTextSymbolIndex].forEach(fn=>{fn>=0&&(i.text.placedSymbolArray.get(fn).hidden=gt||ut?1:0)}),Fe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Fe.verticalPlacedTextSymbolIndex).hidden=gt||vt?1:0);const Ht=this.variableOffsets[Fe.crossTileID];Ht&&this.markUsedJustification(i,Ht.anchor,Fe,it);const Ot=this.placedOrientations[Fe.crossTileID];Ot&&(this.markUsedJustification(i,"left",Fe,Ot),this.markUsedOrientation(i,Ot,Fe))}if(ht){const bt=Nt(Ye.icon),gt=!(he&&Fe.verticalPlacedIconSymbolIndex&&ut);Fe.placedIconSymbolIndex>=0&&(ze(i.icon,Fe.numIconVertices,gt?bt:It),i.icon.placedSymbolArray.get(Fe.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Fe.verticalPlacedIconSymbolIndex>=0&&(ze(i.icon,Fe.numVerticalIconVertices,gt?It:bt),i.icon.placedSymbolArray.get(Fe.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const bt=i.collisionArrays[Te];if(bt){let gt=new s.pointGeometry(0,0);if(bt.textBox||bt.verticalTextBox){let Ot=!0;if(B){const fn=this.variableOffsets[qe];fn?(gt=J(fn.anchor,fn.width,fn.height,fn.textOffset,fn.textBoxScale),X&&gt._rotate(ie?this.transform.angle:-this.transform.angle)):Ot=!1}bt.textBox&&Me(i.textCollisionBox.collisionVertexArray,Ye.text.placed,!Ot||ut,gt.x,gt.y),bt.verticalTextBox&&Me(i.textCollisionBox.collisionVertexArray,Ye.text.placed,!Ot||vt,gt.x,gt.y)}const Ht=Boolean(!vt&&bt.verticalIconBox);bt.iconBox&&Me(i.iconCollisionBox.collisionVertexArray,Ye.icon.placed,Ht,he?gt.x:0,he?gt.y:0),bt.verticalIconBox&&Me(i.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!Ht,he?gt.x:0,he?gt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Te.invProjMatrix,i.placementViewportMatrix=Te.viewportMatrix,i.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Me(m,i,u,f,g){m.emplaceBack(i?1:0,u?1:0,f||0,g||0),m.emplaceBack(i?1:0,u?1:0,f||0,g||0),m.emplaceBack(i?1:0,u?1:0,f||0,g||0),m.emplaceBack(i?1:0,u?1:0,f||0,g||0)}const Ve=Math.pow(2,25),Ne=Math.pow(2,24),Ue=Math.pow(2,17),Ge=Math.pow(2,16),st=Math.pow(2,9),mt=Math.pow(2,8),ot=Math.pow(2,1);function Nt(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const i=m.placed?1:0,u=Math.floor(127*m.opacity);return u*Ve+i*Ne+u*Ue+i*Ge+u*st+i*mt+u*ot+i}const It=0;class jt{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,g,x){const I=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(I,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((O,B)=>O.sortKey-B.sortKey));this._currentPartIndex<I.length;)if(u.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class tn{constructor(i,u,f,g,x,I,O){this.placement=new Ce(i,x,I,O),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const g=s.exported.now(),x=()=>{const I=s.exported.now()-g;return!this._forceFullPlacement&&I>2};for(;this._currentPlacementIndex>=0;){const I=u[i[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=O)&&(!I.maxzoom||I.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new jt(I)),this._inProgressLayer.continuePlacement(f[I.source],this.placement,this._showCollisionBoxes,I,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Dt=512/s.EXTENT/2;class vn{constructor(i,u,f){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(let g=0;g<u.length;g++){const x=u.get(g),I=x.key;this.indexedSymbolInstances[I]||(this.indexedSymbolInstances[I]=[]),this.indexedSymbolInstances[I].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,i)})}}getScaledCoordinates(i,u){const f=Dt/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*s.EXTENT+i.anchorX)*f),y:Math.floor((u.canonical.y*s.EXTENT+i.anchorY)*f)}}findMatches(i,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<i.length;x++){const I=i.get(x);if(I.crossTileID)continue;const O=this.indexedSymbolInstances[I.key];if(!O)continue;const B=this.getScaledCoordinates(I,u);for(const X of O)if(Math.abs(X.coord.x-B.x)<=g&&Math.abs(X.coord.y-B.y)<=g&&!f[X.crossTileID]){f[X.crossTileID]=!0,I.crossTileID=X.crossTileID;break}}}}class Sn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],x={};for(const I in g){const O=g[I];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+u),x[O.tileID.key]=O}this.indexes[f]=x}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const I=this.indexes[x];if(Number(x)>i.overscaledZ)for(const O in I){const B=I[O];B.tileID.isChildOf(i)&&B.findMatches(u.symbolInstances,i,g)}else{const O=I[i.scaledTo(Number(x)).key];O&&O.findMatches(u.symbolInstances,i,g)}}for(let x=0;x<u.symbolInstances.length;x++){const I=u.symbolInstances.get(x);I.crossTileID||(I.crossTileID=f.generate(),g[I.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new vn(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f in u.indexedSymbolInstances)for(const g of u.indexedSymbolInstances[f])delete this.usedCrossTileIDs[i][g.crossTileID]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const x in g)i[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],u=!0)}return u}}class wn{constructor(){this.layerIndexes={},this.crossTileIDs=new Sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new xn);let x=!1;const I={};g.handleWrapJump(f);for(const O of u){const B=O.getBucket(i);B&&i.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(O.tileID,B,this.crossTileIDs)&&(x=!0),I[B.bucketInstanceId]=!0)}return g.removeStaleBuckets(I)&&(x=!0),x}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const Qn=(m,i)=>s.emitValidationErrors(m,i&&i.filter(u=>u.identifier!=="source.canvas")),cr=s.pick(Oe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Kn=s.pick(Oe,["setCenter","setZoom","setBearing","setPitch"]),vo=function(){const m={},i=s.spec.$version;for(const u in s.spec.$root){const f=s.spec.$root[u];if(f.required){let g=null;g=u==="version"?i:f.type==="array"?[]:{},g!=null&&(m[u]=g)}}return m}();class Yi extends s.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new te(L(),this),this.imageManager=new F,this.imageManager.setEventedParent(this),this.glyphManager=new q(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new xe(256,512),this.crossTileSymbolIndex=new wn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const f=this;this._rtlTextPluginCallback=Yi.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,I)=>{if(s.triggerPluginCompletionEvent(x),I&&I.every(O=>O))for(const O in f.sourceCaches)f.sourceCaches[O].reload()})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const I=x.getSource();if(I&&I.vectorLayerIds)for(const O in this._layers){const B=this._layers[O];B.source===I.id&&this._validateLayer(B)}})}loadURL(i,u={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const f=typeof u.validate!="boolean"||u.validate,g=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(g,(x,I)=>{this._request=null,x?this.fire(new s.ErrorEvent(x)):I&&this._load(I,f)})}loadJSON(i,u={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(vo,!1)}_load(i,u){if(u&&Qn(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const g in i.sources)this.addSource(g,i.sources[g],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const f=me(this.stylesheet.layers);this._order=f.map(g=>g.id),this._layers={},this._serializedLayers={};for(let g of f)g=s.createStyleLayer(g),g.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=g,this._serializedLayers[g.id]=g.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ye(this.stylesheet.light),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,f,g,x){let I,O,B;const X=g>1?"@2x":"";let ie=s.getJSON(f.transformRequest(f.normalizeSpriteURL(u,X,".json"),s.ResourceType.SpriteJSON),(ze,Te)=>{ie=null,B||(B=ze,I=Te,Se())}),he=s.getImage(f.transformRequest(f.normalizeSpriteURL(u,X,".png"),s.ResourceType.SpriteImage),(ze,Te)=>{he=null,B||(B=ze,O=Te,Se())});function Se(){if(B)x(B);else if(I&&O){const ze=s.exported.getImageData(O),Te={};for(const Fe in I){const{width:$e,height:We,x:qe,y:Ye,sdf:ht,pixelRatio:it,stretchX:ut,stretchY:vt,content:bt}=I[Fe],gt=new s.RGBAImage({width:$e,height:We});s.RGBAImage.copy(ze,gt,{x:qe,y:Ye},{x:0,y:0},{width:$e,height:We}),Te[Fe]={data:gt,pixelRatio:it,sdf:ht,stretchX:ut,stretchY:vt,content:bt}}x(null,Te)}}return{cancel(){ie&&(ie.cancel(),ie=null),he&&(he.cancel(),he=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,f)=>{if(this._spriteRequest=null,u)this.fire(new s.ErrorEvent(u));else if(f)for(const g in f)this.imageManager.addImage(g,f[g]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const f of i){const g=this._layers[f];g.type!=="custom"&&u.push(g.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const I in this._updatedSources){const O=this._updatedSources[I];O==="reload"?this._reloadSource(I):O==="clear"&&this._clearSource(I)}this._updateTilesForChangedImages();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];f[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in f){const x=this.sourceCaches[g];f[g]!==x.used&&x.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),Qn(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=me(i.layers);const u=function(g,x){if(!g)return[{command:Oe.setStyle,args:[x]}];let I=[];try{if(!S(g.version,x.version))return[{command:Oe.setStyle,args:[x]}];S(g.center,x.center)||I.push({command:Oe.setCenter,args:[x.center]}),S(g.zoom,x.zoom)||I.push({command:Oe.setZoom,args:[x.zoom]}),S(g.bearing,x.bearing)||I.push({command:Oe.setBearing,args:[x.bearing]}),S(g.pitch,x.pitch)||I.push({command:Oe.setPitch,args:[x.pitch]}),S(g.sprite,x.sprite)||I.push({command:Oe.setSprite,args:[x.sprite]}),S(g.glyphs,x.glyphs)||I.push({command:Oe.setGlyphs,args:[x.glyphs]}),S(g.transition,x.transition)||I.push({command:Oe.setTransition,args:[x.transition]}),S(g.light,x.light)||I.push({command:Oe.setLight,args:[x.light]});const O={},B=[];(function(ie,he,Se,ze){let Te;for(Te in he=he||{},ie=ie||{})Object.prototype.hasOwnProperty.call(ie,Te)&&(Object.prototype.hasOwnProperty.call(he,Te)||at(Te,Se,ze));for(Te in he)Object.prototype.hasOwnProperty.call(he,Te)&&(Object.prototype.hasOwnProperty.call(ie,Te)?S(ie[Te],he[Te])||(ie[Te].type==="geojson"&&he[Te].type==="geojson"&&T(ie,he,Te)?Se.push({command:Oe.setGeoJSONSourceData,args:[Te,he[Te].data]}):se(Te,he,Se,ze)):Ke(Te,he,Se))})(g.sources,x.sources,B,O);const X=[];g.layers&&g.layers.forEach(ie=>{O[ie.source]?I.push({command:Oe.removeLayer,args:[ie.id]}):X.push(ie)}),I=I.concat(B),function(ie,he,Se){he=he||[];const ze=(ie=ie||[]).map(we),Te=he.map(we),Fe=ie.reduce(De,{}),$e=he.reduce(De,{}),We=ze.slice(),qe=Object.create(null);let Ye,ht,it,ut,vt,bt,gt;for(Ye=0,ht=0;Ye<ze.length;Ye++)it=ze[Ye],Object.prototype.hasOwnProperty.call($e,it)?ht++:(Se.push({command:Oe.removeLayer,args:[it]}),We.splice(We.indexOf(it,ht),1));for(Ye=0,ht=0;Ye<Te.length;Ye++)it=Te[Te.length-1-Ye],We[We.length-1-Ye]!==it&&(Object.prototype.hasOwnProperty.call(Fe,it)?(Se.push({command:Oe.removeLayer,args:[it]}),We.splice(We.lastIndexOf(it,We.length-ht),1)):ht++,bt=We[We.length-Ye],Se.push({command:Oe.addLayer,args:[$e[it],bt]}),We.splice(We.length-Ye,0,it),qe[it]=!0);for(Ye=0;Ye<Te.length;Ye++)if(it=Te[Ye],ut=Fe[it],vt=$e[it],!qe[it]&&!S(ut,vt))if(S(ut.source,vt.source)&&S(ut["source-layer"],vt["source-layer"])&&S(ut.type,vt.type)){for(gt in z(ut.layout,vt.layout,Se,it,null,Oe.setLayoutProperty),z(ut.paint,vt.paint,Se,it,null,Oe.setPaintProperty),S(ut.filter,vt.filter)||Se.push({command:Oe.setFilter,args:[it,vt.filter]}),S(ut.minzoom,vt.minzoom)&&S(ut.maxzoom,vt.maxzoom)||Se.push({command:Oe.setLayerZoomRange,args:[it,vt.minzoom,vt.maxzoom]}),ut)Object.prototype.hasOwnProperty.call(ut,gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?z(ut[gt],vt[gt],Se,it,gt.slice(6),Oe.setPaintProperty):S(ut[gt],vt[gt])||Se.push({command:Oe.setLayerProperty,args:[it,gt,vt[gt]]}));for(gt in vt)Object.prototype.hasOwnProperty.call(vt,gt)&&!Object.prototype.hasOwnProperty.call(ut,gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?z(ut[gt],vt[gt],Se,it,gt.slice(6),Oe.setPaintProperty):S(ut[gt],vt[gt])||Se.push({command:Oe.setLayerProperty,args:[it,gt,vt[gt]]}))}else Se.push({command:Oe.removeLayer,args:[it]}),bt=We[We.lastIndexOf(it)+1],Se.push({command:Oe.addLayer,args:[vt,bt]})}(X,x.layers,I)}catch(O){console.warn("Unable to compute style diff:",O),I=[{command:Oe.setStyle,args:[x]}]}return I}(this.serialize(),i).filter(g=>!(g.command in Kn));if(u.length===0)return!1;const f=u.filter(g=>!(g.command in cr));if(f.length>0)throw new Error(`Unimplemented: ${f.map(g=>g.command).join(", ")}.`);return u.forEach(g=>{g.command!=="setTransition"&&this[g.command].apply(this,g.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new s.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(s.validateStyle.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new Bt(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.clearTiles(),u.onRemove&&u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){this._checkLoaded(),this.sourceCaches[i].getSource().setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new s.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let x;if(i.type==="custom"){if(Qn(this,s.validateCustomStyleLayer(i)))return;x=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(g,i.source),i=s.clone$1(i),i=s.extend(i,{source:g})),this._validate(s.validateStyle.layer,`layers.${g}`,i,{arrayIndex:-1},f))return;x=s.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[x.id]=x.serialize()}const I=u?this._order.indexOf(u):this._order.length;if(u&&I===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(I,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const O=this._removedLayers[g];delete this._removedLayers[g],O.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!S(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(s.validateStyle.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=s.clone$1(u),this._updateLayer(g)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,f,g={}){this._checkLoaded();const x=this.getLayer(i);x?S(x.getLayoutProperty(u),f)||(x.setLayoutProperty(u,f,g),this._updateLayer(x)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,g={}){this._checkLoaded();const x=this.getLayer(i);x?S(x.getPaintProperty(u),f)||(x.setPaintProperty(u,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,g=i.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const I=x.getSource().type;I==="geojson"&&g?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||g?(i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,i.id,u)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const x=g.getSource().type,I=x==="vector"?i.sourceLayer:void 0;x!=="vector"||I?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(I,i.id,u):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,i.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=I=>this._layers[I].type==="fill-extrusion",f={},g=[];for(let I=this._order.length-1;I>=0;I--){const O=this._order[I];if(u(O)){f[O]=I;for(const B of i){const X=B[O];if(X)for(const ie of X)g.push(ie)}}}g.sort((I,O)=>O.intersectionZ-I.intersectionZ);const x=[];for(let I=this._order.length-1;I>=0;I--){const O=this._order[I];if(u(O))for(let B=g.length-1;B>=0;B--){const X=g[B].feature;if(f[X.layer.id]<I)break;x.push(X),g.pop()}else for(const B of i){const X=B[O];if(X)for(const ie of X)x.push(ie.feature)}}return x}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const O=this._layers[I];if(!O)return this.fire(new s.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];g[O.source]=!0}}const x=[];u.availableImages=this._availableImages;for(const I in this.sourceCaches)u.layers&&!g[I]||x.push(ct(this.sourceCaches[I],this._layers,this._serializedLayers,i,u,f));return this.placement&&x.push(function(I,O,B,X,ie,he,Se){const ze={},Te=he.queryRenderedSymbols(X),Fe=[];for(const $e of Object.keys(Te).map(Number))Fe.push(Se[$e]);Fe.sort(St);for(const $e of Fe){const We=$e.featureIndex.lookupSymbolFeatures(Te[$e.bucketInstanceId],O,$e.bucketIndex,$e.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,I);for(const qe in We){const Ye=ze[qe]=ze[qe]||[],ht=We[qe];ht.sort((it,ut)=>{const vt=$e.featureSortOrder;if(vt){const bt=vt.indexOf(it.featureIndex);return vt.indexOf(ut.featureIndex)-bt}return ut.featureIndex-it.featureIndex});for(const it of ht)Ye.push(it)}}for(const $e in ze)ze[$e].forEach(We=>{const qe=We.feature,Ye=B[I[$e].source].getFeatureState(qe.layer["source-layer"],qe.id);qe.source=qe.layer.source,qe.layer["source-layer"]&&(qe.sourceLayer=qe.layer["source-layer"]),qe.state=Ye});return ze}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,u){u&&u.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(g,x){const I=g.getRenderableIds().map(X=>g.getTileByID(X)),O=[],B={};for(let X=0;X<I.length;X++){const ie=I[X],he=ie.tileID.canonical.key;B[he]||(B[he]=!0,ie.querySourceFeatures(O,x))}return O}(f,u):[]}addSourceType(i,u,f){return Yi.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(Yi.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const I in i)if(!S(i[I],f[I])){g=!0;break}if(!g)return;const x={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(x)}_validate(i,u,f,g,x={}){return(!x||x.validate!==!1)&&Qn(this,i.call(s.validateStyle,s.extend({key:u,style:this.serialize(),value:f,styleSpec:s.spec},g)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,g,x=!1){let I=!1,O=!1;const B={};for(const X of this._order){const ie=this._layers[X];if(ie.type!=="symbol")continue;if(!B[ie.source]){const Se=this.sourceCaches[ie.source];B[ie.source]=Se.getRenderableIds(!0).map(ze=>Se.getTileByID(ze)).sort((ze,Te)=>Te.tileID.overscaledZ-ze.tileID.overscaledZ||(ze.tileID.isLessThan(Te.tileID)?-1:1))}const he=this.crossTileSymbolIndex.addLayer(ie,B[ie.source],i.center.lng);I=I||he}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new tn(i,this._order,x,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),O=!0),I&&this.pauseablePlacement.placement.setStale()),O||I)for(const X of this._order){const ie=this._layers[X];ie.type==="symbol"&&this.placement.updateLayerOpacities(ie,B[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f)}getResource(i,u,f){return s.makeRequest(u,f)}}Yi.getSourceType=function(m){return et[m]},Yi.setSourceType=function(m,i){et[m]=i},Yi.registerForPluginStateChange=s.registerForPluginStateChange;var ml=s.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ba={prelude:qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qn(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function qn(m,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),g=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=x?x.concat(g):g,O={};return{fragmentSource:m=m.replace(u,(B,X,ie,he,Se)=>(O[Se]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
varying ${ie} ${he} ${Se};
#else
uniform ${ie} ${he} u_${Se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Se}
    ${ie} ${he} ${Se} = u_${Se};
#endif
`)),vertexSource:i=i.replace(u,(B,X,ie,he,Se)=>{const ze=he==="float"?"vec2":"vec4",Te=Se.match(/color/)?"color":ze;return O[Se]?X==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${ie} ${ze} a_${Se};
varying ${ie} ${he} ${Se};
#else
uniform ${ie} ${he} u_${Se};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = a_${Se};
#else
    ${ie} ${he} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = unpack_mix_${Te}(a_${Se}, u_${Se}_t);
#else
    ${ie} ${he} ${Se} = u_${Se};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${ie} ${ze} a_${Se};
#else
uniform ${ie} ${he} u_${Se};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${ie} ${he} ${Se} = a_${Se};
#else
    ${ie} ${he} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${ie} ${he} ${Se} = unpack_mix_${Te}(a_${Se}, u_${Se}_t);
#else
    ${ie} ${he} ${Se} = u_${Se};
#endif
`}),staticAttributes:f,staticUniforms:I}}class Ki{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,g,x,I,O,B){this.context=i;let X=this.boundPaintVertexBuffers.length!==g.length;for(let ie=0;!X&&ie<g.length;ie++)this.boundPaintVertexBuffers[ie]!==g[ie]&&(X=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===f&&!X&&this.boundIndexBuffer===x&&this.boundVertexOffset===I&&this.boundDynamicVertexBuffer===O&&this.boundDynamicVertexBuffer2===B?(i.bindVertexArrayOES.set(this.vao),O&&O.bind(),x&&x.dynamicDraw&&x.bind(),B&&B.bind()):this.freshBind(u,f,g,x,I,O,B)}freshBind(i,u,f,g,x,I,O){let B;const X=i.numAttributes,ie=this.context,he=ie.gl;if(ie.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ie.extVertexArrayObject.createVertexArrayOES(),ie.bindVertexArrayOES.set(this.vao),B=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=O;else{B=ie.currentNumAttributes||0;for(let Se=X;Se<B;Se++)he.disableVertexAttribArray(Se)}u.enableAttributes(he,i);for(const Se of f)Se.enableAttributes(he,i);I&&I.enableAttributes(he,i),O&&O.enableAttributes(he,i),u.bind(),u.setVertexAttribPointers(he,i,x);for(const Se of f)Se.bind(),Se.setVertexAttribPointers(he,i,x);I&&(I.bind(),I.setVertexAttribPointers(he,i,x)),g&&g.bind(),O&&(O.bind(),O.setVertexAttribPointers(he,i,x)),ie.currentNumAttributes=X}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function xu(m){const i=[];for(let u=0;u<m.length;u++){if(m[u]===null)continue;const f=m[u].split(" ");i.push(f.pop())}return i}class wu{constructor(i,u,f,g,x,I){const O=i.gl;this.program=O.createProgram();const B=xu(f.staticAttributes),X=g?g.getBinderAttributes():[],ie=B.concat(X),he=f.staticUniforms?xu(f.staticUniforms):[],Se=g?g.getBinderUniforms():[],ze=he.concat(Se),Te=[];for(const it of ze)Te.indexOf(it)<0&&Te.push(it);const Fe=g?g.defines():[];I&&Fe.push("#define OVERDRAW_INSPECTOR;");const $e=Fe.concat(Ba.prelude.fragmentSource,f.fragmentSource).join(`
`),We=Fe.concat(Ba.prelude.vertexSource,f.vertexSource).join(`
`),qe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(qe,$e),O.compileShader(qe),O.attachShader(this.program,qe);const Ye=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(Ye,We),O.compileShader(Ye),O.attachShader(this.program,Ye),this.attributes={};const ht={};this.numAttributes=ie.length;for(let it=0;it<this.numAttributes;it++)ie[it]&&(O.bindAttribLocation(this.program,it,ie[it]),this.attributes[ie[it]]=it);O.linkProgram(this.program),O.deleteShader(Ye),O.deleteShader(qe);for(let it=0;it<Te.length;it++){const ut=Te[it];if(ut&&!ht[ut]){const vt=O.getUniformLocation(this.program,ut);vt&&(ht[ut]=vt)}}this.fixedUniforms=x(i,ht),this.binderUniforms=g?g.getUniforms(i,ht):[]}draw(i,u,f,g,x,I,O,B,X,ie,he,Se,ze,Te,Fe,$e){const We=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(x),i.setCullFace(I);for(const Ye in this.fixedUniforms)this.fixedUniforms[Ye].set(O[Ye]);Te&&Te.setUniforms(i,this.binderUniforms,Se,{zoom:ze});const qe={[We.LINES]:2,[We.TRIANGLES]:3,[We.LINE_STRIP]:1}[u];for(const Ye of he.get()){const ht=Ye.vaos||(Ye.vaos={});(ht[B]||(ht[B]=new Ki)).bind(i,this,X,Te?Te.getPaintVertexBuffers():[],ie,Ye.vertexOffset,Fe,$e),We.drawElements(u,Ye.primitiveLength*qe,We.UNSIGNED_SHORT,Ye.primitiveOffset*qe*2)}}}function bu(m,i,u){const f=1/zn(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,I=x*(u.tileID.canonical.x+u.tileID.wrap*g),O=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[I>>16,O>>16],u_pixel_coord_lower:[65535&I,65535&O]}}const _s=(m,i,u,f)=>{const g=i.style.light,x=g.properties.get("position"),I=W(x.x,x.y,x.z),O=function(){var X=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(X[1]=0,X[2]=0,X[3]=0,X[5]=0,X[6]=0,X[7]=0),X[0]=1,X[4]=1,X[8]=1,X}();g.properties.get("anchor")==="viewport"&&function(X,ie){var he=Math.sin(ie),Se=Math.cos(ie);X[0]=Se,X[1]=he,X[2]=0,X[3]=-he,X[4]=Se,X[5]=0,X[6]=0,X[7]=0,X[8]=1}(O,-i.transform.angle),function(X,ie,he){var Se=ie[0],ze=ie[1],Te=ie[2];X[0]=Se*he[0]+ze*he[3]+Te*he[6],X[1]=Se*he[1]+ze*he[4]+Te*he[7],X[2]=Se*he[2]+ze*he[5]+Te*he[8]}(I,I,O);const B=g.properties.get("color");return{u_matrix:m,u_lightpos:I,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+u,u_opacity:f}},Eu=(m,i,u,f,g,x,I)=>s.extend(_s(m,i,u,f),bu(x,i,I),{u_height_factor:-Math.pow(2,g.overscaledZ)/I.tileSize/8}),ha=m=>({u_matrix:m}),gl=(m,i,u,f)=>s.extend(ha(m),bu(u,i,f)),Su=(m,i)=>({u_matrix:m,u_world:i}),Nr=(m,i,u,f,g)=>s.extend(gl(m,i,u,f),{u_world:g}),xs=(m,i,u,f)=>{const g=m.transform;let x,I;if(f.paint.get("circle-pitch-alignment")==="map"){const O=zn(u,1,g.zoom);x=!0,I=[O,O]}else x=!1,I=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:I}},ja=(m,i,u)=>{const f=zn(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),x=u.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*g),i.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:x}},Da=(m,i,u=1)=>({u_matrix:m,u_color:i,u_overlay:0,u_overlay_scale:u}),Na=m=>({u_matrix:m}),ws=(m,i,u,f)=>({u_matrix:m,u_extrude_scale:zn(i,1,u),u_intensity:f});function bs(m,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new s.MercatorCoordinate(0,f/u).toLngLat().lat,new s.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const _o=(m,i,u)=>{const f=m.transform;return{u_matrix:yl(m,i,u),u_ratio:1/zn(i,1,f.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},fa=(m,i,u,f)=>s.extend(_o(m,i,u),{u_image:0,u_image_height:f}),nr=(m,i,u,f)=>{const g=m.transform,x=xo(i,g);return{u_matrix:yl(m,i,u),u_texsize:i.imageAtlasTexture.size,u_ratio:1/zn(i,1,g.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[x,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Es=(m,i,u,f,g)=>{const x=m.lineAtlas,I=xo(i,m.transform),O=u.layout.get("line-cap")==="round",B=x.getDash(f.from,O),X=x.getDash(f.to,O),ie=B.width*g.fromScale,he=X.width*g.toScale;return s.extend(_o(m,i,u),{u_patternscale_a:[I/ie,-B.height/2],u_patternscale_b:[I/he,-X.height/2],u_sdfgamma:x.width/(256*Math.min(ie,he)*m.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:X.y,u_mix:g.t})};function xo(m,i){return 1/zn(m,1,i.tileZoom)}function yl(m,i,u){return m.translatePosMatrix(i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Tu=(m,i,u,f,g)=>{return{u_matrix:m,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(I=g.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:vl(g.paint.get("raster-hue-rotate"))};var x,I};function vl(m){m*=Math.PI/180;const i=Math.sin(m),u=Math.cos(m);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const _l=(m,i,u,f,g,x,I,O,B,X)=>{const ie=g.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_pitch:ie.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ie.width/ie.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:I,u_coord_matrix:O,u_is_text:+B,u_pitch_with_map:+f,u_texsize:X,u_texture:0}},xl=(m,i,u,f,g,x,I,O,B,X,ie)=>{const he=g.transform;return s.extend(_l(m,i,u,f,g,x,I,O,B,X),{u_gamma_scale:f?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+ie})},Qc=(m,i,u,f,g,x,I,O,B,X)=>s.extend(xl(m,i,u,f,g,x,I,O,!0,B,!0),{u_texsize_icon:X,u_texture_icon:1}),wl=(m,i,u)=>({u_matrix:m,u_opacity:i,u_color:u}),bl=(m,i,u,f,g,x)=>s.extend(function(I,O,B,X){const ie=B.imageManager.getPattern(I.from.toString()),he=B.imageManager.getPattern(I.to.toString()),{width:Se,height:ze}=B.imageManager.getPixelSize(),Te=Math.pow(2,X.tileID.overscaledZ),Fe=X.tileSize*Math.pow(2,B.transform.tileZoom)/Te,$e=Fe*(X.tileID.canonical.x+X.tileID.wrap*Te),We=Fe*X.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ie.tl,u_pattern_br_a:ie.br,u_pattern_tl_b:he.tl,u_pattern_br_b:he.br,u_texsize:[Se,ze],u_mix:O.t,u_pattern_size_a:ie.displaySize,u_pattern_size_b:he.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/zn(X,1,B.transform.tileZoom),u_pixel_coord_upper:[$e>>16,We>>16],u_pixel_coord_lower:[65535&$e,65535&We]}}(f,x,u,g),{u_matrix:m,u_opacity:i}),Ua={fillExtrusion:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_lightpos:new s.Uniform3f(m,i.u_lightpos),u_lightintensity:new s.Uniform1f(m,i.u_lightintensity),u_lightcolor:new s.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(m,i.u_vertical_gradient),u_opacity:new s.Uniform1f(m,i.u_opacity)}),fillExtrusionPattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_lightpos:new s.Uniform3f(m,i.u_lightpos),u_lightintensity:new s.Uniform1f(m,i.u_lightintensity),u_lightcolor:new s.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(m,i.u_vertical_gradient),u_height_factor:new s.Uniform1f(m,i.u_height_factor),u_image:new s.Uniform1i(m,i.u_image),u_texsize:new s.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade),u_opacity:new s.Uniform1f(m,i.u_opacity)}),fill:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),fillPattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_image:new s.Uniform1i(m,i.u_image),u_texsize:new s.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade)}),fillOutline:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_world:new s.Uniform2f(m,i.u_world)}),fillOutlinePattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_world:new s.Uniform2f(m,i.u_world),u_image:new s.Uniform1i(m,i.u_image),u_texsize:new s.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade)}),circle:(m,i)=>({u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(m,i.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(m,i.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),collisionBox:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(m,i.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(m,i.u_extrude_scale),u_overscale_factor:new s.Uniform1f(m,i.u_overscale_factor)}),collisionCircle:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_inv_matrix:new s.UniformMatrix4f(m,i.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(m,i.u_viewport_size)}),debug:(m,i)=>({u_color:new s.UniformColor(m,i.u_color),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_overlay:new s.Uniform1i(m,i.u_overlay),u_overlay_scale:new s.Uniform1f(m,i.u_overlay_scale)}),clippingMask:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),heatmap:(m,i)=>({u_extrude_scale:new s.Uniform1f(m,i.u_extrude_scale),u_intensity:new s.Uniform1f(m,i.u_intensity),u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),heatmapTexture:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_world:new s.Uniform2f(m,i.u_world),u_image:new s.Uniform1i(m,i.u_image),u_color_ramp:new s.Uniform1i(m,i.u_color_ramp),u_opacity:new s.Uniform1f(m,i.u_opacity)}),hillshade:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_image:new s.Uniform1i(m,i.u_image),u_latrange:new s.Uniform2f(m,i.u_latrange),u_light:new s.Uniform2f(m,i.u_light),u_shadow:new s.UniformColor(m,i.u_shadow),u_highlight:new s.UniformColor(m,i.u_highlight),u_accent:new s.UniformColor(m,i.u_accent)}),hillshadePrepare:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_image:new s.Uniform1i(m,i.u_image),u_dimension:new s.Uniform2f(m,i.u_dimension),u_zoom:new s.Uniform1f(m,i.u_zoom),u_unpack:new s.Uniform4f(m,i.u_unpack)}),line:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels)}),lineGradient:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels),u_image:new s.Uniform1i(m,i.u_image),u_image_height:new s.Uniform1f(m,i.u_image_height)}),linePattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_texsize:new s.Uniform2f(m,i.u_texsize),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_image:new s.Uniform1i(m,i.u_image),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade)}),lineSDF:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(m,i.u_patternscale_a),u_patternscale_b:new s.Uniform2f(m,i.u_patternscale_b),u_sdfgamma:new s.Uniform1f(m,i.u_sdfgamma),u_image:new s.Uniform1i(m,i.u_image),u_tex_y_a:new s.Uniform1f(m,i.u_tex_y_a),u_tex_y_b:new s.Uniform1f(m,i.u_tex_y_b),u_mix:new s.Uniform1f(m,i.u_mix)}),raster:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_tl_parent:new s.Uniform2f(m,i.u_tl_parent),u_scale_parent:new s.Uniform1f(m,i.u_scale_parent),u_buffer_scale:new s.Uniform1f(m,i.u_buffer_scale),u_fade_t:new s.Uniform1f(m,i.u_fade_t),u_opacity:new s.Uniform1f(m,i.u_opacity),u_image0:new s.Uniform1i(m,i.u_image0),u_image1:new s.Uniform1i(m,i.u_image1),u_brightness_low:new s.Uniform1f(m,i.u_brightness_low),u_brightness_high:new s.Uniform1f(m,i.u_brightness_high),u_saturation_factor:new s.Uniform1f(m,i.u_saturation_factor),u_contrast_factor:new s.Uniform1f(m,i.u_contrast_factor),u_spin_weights:new s.Uniform3f(m,i.u_spin_weights)}),symbolIcon:(m,i)=>({u_is_size_zoom_constant:new s.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(m,i.u_size_t),u_size:new s.Uniform1f(m,i.u_size),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(m,i.u_pitch),u_rotate_symbol:new s.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(m,i.u_fade_change),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new s.Uniform1i(m,i.u_is_text),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_texsize:new s.Uniform2f(m,i.u_texsize),u_texture:new s.Uniform1i(m,i.u_texture)}),symbolSDF:(m,i)=>({u_is_size_zoom_constant:new s.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(m,i.u_size_t),u_size:new s.Uniform1f(m,i.u_size),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(m,i.u_pitch),u_rotate_symbol:new s.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(m,i.u_fade_change),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new s.Uniform1i(m,i.u_is_text),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_texsize:new s.Uniform2f(m,i.u_texsize),u_texture:new s.Uniform1i(m,i.u_texture),u_gamma_scale:new s.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(m,i.u_is_halo)}),symbolTextAndIcon:(m,i)=>({u_is_size_zoom_constant:new s.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(m,i.u_size_t),u_size:new s.Uniform1f(m,i.u_size),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(m,i.u_pitch),u_rotate_symbol:new s.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(m,i.u_fade_change),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new s.Uniform1i(m,i.u_is_text),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_texsize:new s.Uniform2f(m,i.u_texsize),u_texsize_icon:new s.Uniform2f(m,i.u_texsize_icon),u_texture:new s.Uniform1i(m,i.u_texture),u_texture_icon:new s.Uniform1i(m,i.u_texture_icon),u_gamma_scale:new s.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(m,i.u_is_halo)}),background:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_opacity:new s.Uniform1f(m,i.u_opacity),u_color:new s.UniformColor(m,i.u_color)}),backgroundPattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_opacity:new s.Uniform1f(m,i.u_opacity),u_image:new s.Uniform1i(m,i.u_image),u_pattern_tl_a:new s.Uniform2f(m,i.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(m,i.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(m,i.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(m,i.u_pattern_br_b),u_texsize:new s.Uniform2f(m,i.u_texsize),u_mix:new s.Uniform1f(m,i.u_mix),u_pattern_size_a:new s.Uniform2f(m,i.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(m,i.u_pattern_size_b),u_scale_a:new s.Uniform1f(m,i.u_scale_a),u_scale_b:new s.Uniform1f(m,i.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(m,i.u_tile_units_to_pixels)})};class El{constructor(i,u,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Au={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Iu{constructor(i,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,f){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],I=u.attributes[x.name];I!==void 0&&i.vertexAttribPointer(I,x.components,i[Au[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class da extends Bn{getDefault(){return s.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class $a extends Bn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Sl extends Bn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class oi extends Bn{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Tl extends Bn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Va extends Bn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Ss extends Bn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Al extends Bn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Il extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ts extends Bn{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class As extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Cl extends Bn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class pa extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Cu extends Bn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Pu extends Bn{getDefault(){return s.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ma extends Bn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class eh extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class th extends Bn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class nh extends Bn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class ku extends Bn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Pl extends Bn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class rh extends Bn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class kl extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ml extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ga extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class zl extends Bn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Mu extends Bn{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ol extends Bn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class Do extends Bn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class zu extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class ro extends Bn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class No extends Bn{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Uo extends No{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Is extends No{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class kn{constructor(i,u,f,g){this.context=i,this.width=u,this.height=f;const x=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Uo(i,x),g&&(this.depthAttachment=new Is(i,x))}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class hr{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}hr.Replace=[1,0],hr.disabled=new hr(hr.Replace,s.Color.transparent,[!1,!1,!1,!1]),hr.unblended=new hr(hr.Replace,s.Color.transparent,[!0,!0,!0,!0]),hr.alphaBlended=new hr([1,771],s.Color.transparent,[!0,!0,!0,!0]);class ih{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new da(this),this.clearDepth=new $a(this),this.clearStencil=new Sl(this),this.colorMask=new oi(this),this.depthMask=new Tl(this),this.stencilMask=new Va(this),this.stencilFunc=new Ss(this),this.stencilOp=new Al(this),this.stencilTest=new Il(this),this.depthRange=new Ts(this),this.depthTest=new As(this),this.depthFunc=new Cl(this),this.blend=new pa(this),this.blendFunc=new Cu(this),this.blendColor=new Pu(this),this.blendEquation=new ma(this),this.cullFace=new eh(this),this.cullFaceSide=new th(this),this.frontFace=new nh(this),this.program=new ku(this),this.activeTexture=new Pl(this),this.viewport=new rh(this),this.bindFramebuffer=new kl(this),this.bindRenderbuffer=new Ml(this),this.bindTexture=new ga(this),this.bindVertexBuffer=new zl(this),this.bindElementBuffer=new Mu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ol(this),this.pixelStoreUnpack=new Do(this),this.pixelStoreUnpackPremultiplyAlpha=new zu(this),this.pixelStoreUnpackFlipY=new ro(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new El(this,i,u)}createVertexBuffer(i,u,f){return new Iu(this,i,u,f)}createRenderbuffer(i,u,f){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),x}createFramebuffer(i,u,f){return new kn(this,i,u,f)}clear({color:i,depth:u}){const f=this.gl;let g=0;i&&(g|=f.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(g|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f.clear(g)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){S(i.blendFunction,hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class jn{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}jn.ReadOnly=!1,jn.ReadWrite=!0,jn.disabled=new jn(519,jn.ReadOnly,[0,1]);const $o=7680;class rr{constructor(i,u,f,g,x,I){this.test=i,this.ref=u,this.mask=f,this.fail=g,this.depthFail=x,this.pass=I}}rr.disabled=new rr({func:519,mask:0},0,0,$o,$o,$o);class fr{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let wo;function Ou(m,i,u,f,g,x,I){const O=m.context,B=O.gl,X=m.useProgram("collisionBox"),ie=[];let he=0,Se=0;for(let Ye=0;Ye<f.length;Ye++){const ht=f[Ye],it=i.getTile(ht),ut=it.getBucket(u);if(!ut)continue;let vt=ht.posMatrix;g[0]===0&&g[1]===0||(vt=m.translatePosMatrix(ht.posMatrix,it,g,x));const bt=I?ut.textCollisionBox:ut.iconCollisionBox,gt=ut.collisionCircleArray;if(gt.length>0){const Ht=s.create(),Ot=vt;s.mul(Ht,ut.placementInvProjMatrix,m.transform.glCoordMatrix),s.mul(Ht,Ht,ut.placementViewportMatrix),ie.push({circleArray:gt,circleOffset:Se,transform:Ot,invTransform:Ht}),he+=gt.length/4,Se=he}bt&&X.draw(O,B.LINES,jn.disabled,rr.disabled,m.colorModeForRenderPass(),fr.disabled,ja(vt,m.transform,it),u.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,null,m.transform.zoom,null,null,bt.collisionVertexBuffer)}if(!I||!ie.length)return;const ze=m.useProgram("collisionCircle"),Te=new s.CollisionCircleLayoutArray;Te.resize(4*he),Te._trim();let Fe=0;for(const Ye of ie)for(let ht=0;ht<Ye.circleArray.length/4;ht++){const it=4*ht,ut=Ye.circleArray[it+0],vt=Ye.circleArray[it+1],bt=Ye.circleArray[it+2],gt=Ye.circleArray[it+3];Te.emplace(Fe++,ut,vt,bt,gt,0),Te.emplace(Fe++,ut,vt,bt,gt,1),Te.emplace(Fe++,ut,vt,bt,gt,2),Te.emplace(Fe++,ut,vt,bt,gt,3)}(!wo||wo.length<2*he)&&(wo=function(Ye){const ht=2*Ye,it=new s.QuadTriangleArray;it.resize(ht),it._trim();for(let ut=0;ut<ht;ut++){const vt=6*ut;it.uint16[vt+0]=4*ut+0,it.uint16[vt+1]=4*ut+1,it.uint16[vt+2]=4*ut+2,it.uint16[vt+3]=4*ut+2,it.uint16[vt+4]=4*ut+3,it.uint16[vt+5]=4*ut+0}return it}(he));const $e=O.createIndexBuffer(wo,!0),We=O.createVertexBuffer(Te,s.collisionCircleLayout.members,!0);for(const Ye of ie){const ht={u_matrix:Ye.transform,u_inv_matrix:Ye.invTransform,u_camera_to_center_distance:(qe=m.transform).cameraToCenterDistance,u_viewport_size:[qe.width,qe.height]};ze.draw(O,B.TRIANGLES,jn.disabled,rr.disabled,m.colorModeForRenderPass(),fr.disabled,ht,u.id,We,$e,s.SegmentVector.simpleSegment(0,2*Ye.circleOffset,Ye.circleArray.length,Ye.circleArray.length/2),null,m.transform.zoom,null,null,null)}var qe;We.destroy(),$e.destroy()}fr.disabled=new fr(!1,1029,2305),fr.backCCW=new fr(!0,1029,2305);const Ll=s.identity(new Float32Array(16));function Vo(m,i,u,f,g,x){const{horizontalAlign:I,verticalAlign:O}=s.getAnchorAlignment(m),B=-(I-.5)*i,X=-(O-.5)*u,ie=s.evaluateVariableOffset(m,f);return new s.pointGeometry((B/g+ie[0])*x,(X/g+ie[1])*x)}function Ga(m,i,u,f,g,x,I,O,B,X,ie){const he=m.text.placedSymbolArray,Se=m.text.dynamicLayoutVertexArray,ze=m.icon.dynamicLayoutVertexArray,Te={};Se.clear();for(let Fe=0;Fe<he.length;Fe++){const $e=he.get(Fe),We=m.allowVerticalPlacement&&!$e.placedOrientation,qe=$e.hidden||!$e.crossTileID||We?null:f[$e.crossTileID];if(qe){const Ye=new s.pointGeometry($e.anchorX,$e.anchorY),ht=dt(Ye,u?O:I),it=Lt(x.cameraToCenterDistance,ht.signedDistanceFromCamera);let ut=g.evaluateSizeForFeature(m.textSizeData,X,$e)*it/s.ONE_EM;u&&(ut*=m.tilePixelRatio/B);const{width:vt,height:bt,anchor:gt,textOffset:Ht,textBoxScale:Ot}=qe,fn=Vo(gt,vt,bt,Ht,Ot,ut),Un=u?dt(Ye.add(fn),I).point:ht.point.add(i?fn.rotate(-x.angle):fn),In=m.allowVerticalPlacement&&$e.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Cn=0;Cn<$e.numGlyphs;Cn++)s.addDynamicAttributes(Se,Un,In);ie&&$e.associatedIconIndex>=0&&(Te[$e.associatedIconIndex]={shiftedAnchor:Un,angle:In})}else Vt($e.numGlyphs,Se)}if(ie){ze.clear();const Fe=m.icon.placedSymbolArray;for(let $e=0;$e<Fe.length;$e++){const We=Fe.get($e);if(We.hidden)Vt(We.numGlyphs,ze);else{const qe=Te[$e];if(qe)for(let Ye=0;Ye<We.numGlyphs;Ye++)s.addDynamicAttributes(ze,qe.shiftedAnchor,qe.angle);else Vt(We.numGlyphs,ze)}}m.icon.dynamicLayoutVertexBuffer.updateData(ze)}m.text.dynamicLayoutVertexBuffer.updateData(Se)}function Cs(m,i,u){return u.iconsInText&&i?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Ps(m,i,u,f,g,x,I,O,B,X,ie,he){const Se=m.context,ze=Se.gl,Te=m.transform,Fe=O==="map",$e=B==="map",We=Fe&&u.layout.get("symbol-placement")!=="point",qe=Fe&&!$e&&!We,Ye=!u.layout.get("symbol-sort-key").isConstant();let ht=!1;const it=m.depthModeForSublayer(0,jn.ReadOnly),ut=u.layout.get("text-variable-anchor"),vt=[];for(const bt of f){const gt=i.getTile(bt),Ht=gt.getBucket(u);if(!Ht)continue;const Ot=g?Ht.text:Ht.icon;if(!Ot||!Ot.segments.get().length)continue;const fn=Ot.programConfigurations.get(u.id),Un=g||Ht.sdfIcons,In=g?Ht.textSizeData:Ht.iconSizeData,Cn=$e||Te.pitch!==0,_r=m.useProgram(Cs(Un,g,Ht),fn),yn=s.evaluateSizeForZoom(In,Te.zoom);let On,dr,Xr,zi,Oi=[0,0],so=null;if(g){if(dr=gt.glyphAtlasTexture,Xr=ze.LINEAR,On=gt.glyphAtlasTexture.size,Ht.iconsInText){Oi=gt.imageAtlasTexture.size,so=gt.imageAtlasTexture;const qa=In.kind==="composite"||In.kind==="camera";zi=Cn||m.options.rotating||m.options.zooming||qa?ze.LINEAR:ze.NEAREST}}else{const qa=u.layout.get("icon-size").constantOr(0)!==1||Ht.iconsNeedLinear;dr=gt.imageAtlasTexture,Xr=Un||m.options.rotating||m.options.zooming||qa||Cn?ze.LINEAR:ze.NEAREST,On=gt.imageAtlasTexture.size}const Li=zn(gt,1,m.transform.zoom),lo=Tn(bt.posMatrix,$e,Fe,m.transform,Li),wa=pn(bt.posMatrix,$e,Fe,m.transform,Li),Ya=ut&&Ht.hasTextData(),Hn=u.layout.get("icon-text-fit")!=="none"&&Ya&&Ht.hasIconData();We&&Tr(Ht,bt.posMatrix,m,g,lo,wa,$e,X);const $r=m.translatePosMatrix(bt.posMatrix,gt,x,I),Nn=We||g&&ut||Hn?Ll:lo,kr=m.translatePosMatrix(wa,gt,x,I,!0),Ri=Un&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ar;ar=Un?Ht.iconsInText?Qc(In.kind,yn,qe,$e,m,$r,Nn,kr,On,Oi):xl(In.kind,yn,qe,$e,m,$r,Nn,kr,g,On,!0):_l(In.kind,yn,qe,$e,m,$r,Nn,kr,g,On);const Ka={program:_r,buffers:Ot,uniformValues:ar,atlasTexture:dr,atlasTextureIcon:so,atlasInterpolation:Xr,atlasInterpolationIcon:zi,isSDF:Un,hasHalo:Ri};if(Ye&&Ht.canOverlap){ht=!0;const qa=Ot.segments.get();for(const Ls of qa)vt.push({segments:new s.SegmentVector([Ls]),sortKey:Ls.sortKey,state:Ka})}else vt.push({segments:Ot.segments,sortKey:0,state:Ka})}ht&&vt.sort((bt,gt)=>bt.sortKey-gt.sortKey);for(const bt of vt){const gt=bt.state;if(Se.activeTexture.set(ze.TEXTURE0),gt.atlasTexture.bind(gt.atlasInterpolation,ze.CLAMP_TO_EDGE),gt.atlasTextureIcon&&(Se.activeTexture.set(ze.TEXTURE1),gt.atlasTextureIcon&&gt.atlasTextureIcon.bind(gt.atlasInterpolationIcon,ze.CLAMP_TO_EDGE)),gt.isSDF){const Ht=gt.uniformValues;gt.hasHalo&&(Ht.u_is_halo=1,Rl(gt.buffers,bt.segments,u,m,gt.program,it,ie,he,Ht)),Ht.u_is_halo=0}Rl(gt.buffers,bt.segments,u,m,gt.program,it,ie,he,gt.uniformValues)}}function Rl(m,i,u,f,g,x,I,O,B){const X=f.context;g.draw(X,X.gl.TRIANGLES,x,I,O,fr.disabled,B,u.id,m.layoutVertexBuffer,m.indexBuffer,i,u.paint,f.transform.zoom,m.programConfigurations.get(u.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function bo(m,i,u,f,g,x,I){const O=m.context.gl,B=u.paint.get("fill-pattern"),X=B&&B.constantOr(1),ie=u.getCrossfadeParameters();let he,Se,ze,Te,Fe;I?(Se=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=O.LINES):(Se=X?"fillPattern":"fill",he=O.TRIANGLES);for(const $e of f){const We=i.getTile($e);if(X&&!We.patternsLoaded())continue;const qe=We.getBucket(u);if(!qe)continue;const Ye=qe.programConfigurations.get(u.id),ht=m.useProgram(Se,Ye);X&&(m.context.activeTexture.set(O.TEXTURE0),We.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ye.updatePaintBuffers(ie));const it=B.constantOr(null);if(it&&We.imageAtlas){const vt=We.imageAtlas,bt=vt.patternPositions[it.to.toString()],gt=vt.patternPositions[it.from.toString()];bt&&gt&&Ye.setConstantPatternPositions(bt,gt)}const ut=m.translatePosMatrix($e.posMatrix,We,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(I){Te=qe.indexBuffer2,Fe=qe.segments2;const vt=[O.drawingBufferWidth,O.drawingBufferHeight];ze=Se==="fillOutlinePattern"&&X?Nr(ut,m,ie,We,vt):Su(ut,vt)}else Te=qe.indexBuffer,Fe=qe.segments,ze=X?gl(ut,m,ie,We):ha(ut);ht.draw(m.context,he,g,m.stencilModeForClipping($e),x,fr.disabled,ze,u.id,qe.layoutVertexBuffer,Te,Fe,u.paint,m.transform.zoom,Ye)}}function mi(m,i,u,f,g,x,I){const O=m.context,B=O.gl,X=u.paint.get("fill-extrusion-pattern"),ie=X.constantOr(1),he=u.getCrossfadeParameters(),Se=u.paint.get("fill-extrusion-opacity");for(const ze of f){const Te=i.getTile(ze),Fe=Te.getBucket(u);if(!Fe)continue;const $e=Fe.programConfigurations.get(u.id),We=m.useProgram(ie?"fillExtrusionPattern":"fillExtrusion",$e);ie&&(m.context.activeTexture.set(B.TEXTURE0),Te.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),$e.updatePaintBuffers(he));const qe=X.constantOr(null);if(qe&&Te.imageAtlas){const ut=Te.imageAtlas,vt=ut.patternPositions[qe.to.toString()],bt=ut.patternPositions[qe.from.toString()];vt&&bt&&$e.setConstantPatternPositions(vt,bt)}const Ye=m.translatePosMatrix(ze.posMatrix,Te,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ht=u.paint.get("fill-extrusion-vertical-gradient"),it=ie?Eu(Ye,m,ht,Se,ze,he,Te):_s(Ye,m,ht,Se);We.draw(O,O.gl.TRIANGLES,g,x,I,fr.backCCW,it,u.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,u.paint,m.transform.zoom,$e)}}function Ci(m,i,u,f,g,x){const I=m.context,O=I.gl,B=i.fbo;if(!B)return;const X=m.useProgram("hillshade");I.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,B.colorAttachment.get());const ie=((he,Se,ze)=>{const Te=ze.paint.get("hillshade-shadow-color"),Fe=ze.paint.get("hillshade-highlight-color"),$e=ze.paint.get("hillshade-accent-color");let We=ze.paint.get("hillshade-illumination-direction")*(Math.PI/180);ze.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=he.transform.angle);const qe=!he.options.moving;return{u_matrix:he.transform.calculatePosMatrix(Se.tileID.toUnwrapped(),qe),u_image:0,u_latrange:bs(0,Se.tileID),u_light:[ze.paint.get("hillshade-exaggeration"),We],u_shadow:Te,u_highlight:Fe,u_accent:$e}})(m,i,u);X.draw(I,O.TRIANGLES,f,g,x,fr.disabled,ie,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function Fl(m,i,u,f,g,x){const I=m.context,O=I.gl,B=i.dem;if(B&&B.data){const X=B.dim,ie=B.stride,he=B.getPixels();if(I.activeTexture.set(O.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||m.getTileTexture(ie),i.demTexture){const ze=i.demTexture;ze.update(he,{premultiply:!1}),ze.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else i.demTexture=new re(I,he,O.RGBA,{premultiply:!1}),i.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);I.activeTexture.set(O.TEXTURE0);let Se=i.fbo;if(!Se){const ze=new re(I,{width:X,height:X,data:null},O.RGBA);ze.bind(O.LINEAR,O.CLAMP_TO_EDGE),Se=i.fbo=I.createFramebuffer(X,X,!0),Se.colorAttachment.set(ze.texture)}I.bindFramebuffer.set(Se.framebuffer),I.viewport.set([0,0,X,X]),m.useProgram("hillshadePrepare").draw(I,O.TRIANGLES,f,g,x,fr.disabled,((ze,Te)=>{const Fe=Te.stride,$e=s.create();return s.ortho($e,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate($e,$e,[0,-s.EXTENT,0]),{u_matrix:$e,u_image:1,u_dimension:[Fe,Fe],u_zoom:ze.overscaledZ,u_unpack:Te.getUnpackVector()}})(i.tileID,B),u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Wa(m,i,u,f,g){const x=f.paint.get("raster-fade-duration");if(x>0){const I=s.exported.now(),O=(I-m.timeAdded)/x,B=i?(I-i.timeAdded)/x:-1,X=u.getSource(),ie=g.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),he=!i||Math.abs(i.tileID.overscaledZ-ie)>Math.abs(m.tileID.overscaledZ-ie),Se=he&&m.refreshedUponExpiration?1:s.clamp(he?O:1-B,0,1);return m.refreshedUponExpiration&&O>=1&&(m.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Se}:{opacity:Se,mix:0}}return{opacity:1,mix:0}}const Lu=new s.Color(1,0,0,1),Pi=new s.Color(0,1,0,1),io=new s.Color(0,0,1,1),Ur=new s.Color(1,0,1,1),Go=new s.Color(0,1,1,1);function ya(m,i,u,f){Za(m,0,i+u/2,m.transform.width,u,f)}function ks(m,i,u,f){Za(m,i-u/2,0,u,m.transform.height,f)}function Za(m,i,u,f,g,x){const I=m.context,O=I.gl;O.enable(O.SCISSOR_TEST),O.scissor(i*m.pixelRatio,u*m.pixelRatio,f*m.pixelRatio,g*m.pixelRatio),I.clear({color:x}),O.disable(O.SCISSOR_TEST)}function Wo(m,i,u){const f=m.context,g=f.gl,x=u.posMatrix,I=m.useProgram("debug"),O=jn.disabled,B=rr.disabled,X=m.colorModeForRenderPass(),ie="$debug";f.activeTexture.set(g.TEXTURE0),m.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),I.draw(f,g.LINE_STRIP,O,B,X,fr.disabled,Da(x,s.Color.red),ie,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);const he=i.getTileByID(u.key).latestRawTileData,Se=Math.floor((he&&he.byteLength||0)/1024),ze=i.getTile(u).tileSize,Te=512/Math.min(ze,512)*(u.overscaledZ/m.transform.zoom)*.5;let Fe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Fe+=` => ${u.overscaledZ}`),function($e,We){$e.initDebugOverlayCanvas();const qe=$e.debugOverlayCanvas,Ye=$e.context.gl,ht=$e.debugOverlayCanvas.getContext("2d");ht.clearRect(0,0,qe.width,qe.height),ht.shadowColor="white",ht.shadowBlur=2,ht.lineWidth=1.5,ht.strokeStyle="white",ht.textBaseline="top",ht.font="bold 36px Open Sans, sans-serif",ht.fillText(We,5,5),ht.strokeText(We,5,5),$e.debugOverlayTexture.update(qe),$e.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(m,`${Fe} ${Se}kb`),I.draw(f,g.TRIANGLES,O,B,hr.alphaBlended,fr.disabled,Da(x,s.Color.transparent,Te),ie,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}const Zo={symbol:function(m,i,u,f,g){if(m.renderPass!=="translucent")return;const x=rr.disabled,I=m.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(O,B,X,ie,he,Se,ze){const Te=B.transform,Fe=he==="map",$e=Se==="map";for(const We of O){const qe=ie.getTile(We),Ye=qe.getBucket(X);if(!Ye||!Ye.text||!Ye.text.segments.get().length)continue;const ht=s.evaluateSizeForZoom(Ye.textSizeData,Te.zoom),it=zn(qe,1,B.transform.zoom),ut=Tn(We.posMatrix,$e,Fe,B.transform,it),vt=X.layout.get("icon-text-fit")!=="none"&&Ye.hasIconData();if(ht){const bt=Math.pow(2,Te.zoom-qe.tileID.overscaledZ);Ga(Ye,Fe,$e,ze,s.symbolSize,Te,ut,We.posMatrix,bt,ht,vt)}}}(f,m,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&Ps(m,i,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),x,I),u.paint.get("text-opacity").constantOr(1)!==0&&Ps(m,i,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),x,I),i.map.showCollisionBoxes&&(Ou(m,i,u,f,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Ou(m,i,u,f,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(m,i,u,f){if(m.renderPass!=="translucent")return;const g=u.paint.get("circle-opacity"),x=u.paint.get("circle-stroke-width"),I=u.paint.get("circle-stroke-opacity"),O=!u.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(x.constantOr(1)===0||I.constantOr(1)===0))return;const B=m.context,X=B.gl,ie=m.depthModeForSublayer(0,jn.ReadOnly),he=rr.disabled,Se=m.colorModeForRenderPass(),ze=[];for(let Te=0;Te<f.length;Te++){const Fe=f[Te],$e=i.getTile(Fe),We=$e.getBucket(u);if(!We)continue;const qe=We.programConfigurations.get(u.id),Ye={programConfiguration:qe,program:m.useProgram("circle",qe),layoutVertexBuffer:We.layoutVertexBuffer,indexBuffer:We.indexBuffer,uniformValues:xs(m,Fe,$e,u)};if(O){const ht=We.segments.get();for(const it of ht)ze.push({segments:new s.SegmentVector([it]),sortKey:it.sortKey,state:Ye})}else ze.push({segments:We.segments,sortKey:0,state:Ye})}O&&ze.sort((Te,Fe)=>Te.sortKey-Fe.sortKey);for(const Te of ze){const{programConfiguration:Fe,program:$e,layoutVertexBuffer:We,indexBuffer:qe,uniformValues:Ye}=Te.state;$e.draw(B,X.TRIANGLES,ie,he,Se,fr.disabled,Ye,u.id,We,qe,Te.segments,u.paint,m.transform.zoom,Fe)}},heatmap:function(m,i,u,f){if(u.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const g=m.context,x=g.gl,I=rr.disabled,O=new hr([x.ONE,x.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(B,X,ie){const he=B.gl;B.activeTexture.set(he.TEXTURE1),B.viewport.set([0,0,X.width/4,X.height/4]);let Se=ie.heatmapFbo;if(Se)he.bindTexture(he.TEXTURE_2D,Se.colorAttachment.get()),B.bindFramebuffer.set(Se.framebuffer);else{const ze=he.createTexture();he.bindTexture(he.TEXTURE_2D,ze),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,he.LINEAR),Se=ie.heatmapFbo=B.createFramebuffer(X.width/4,X.height/4,!1),function(Te,Fe,$e,We){const qe=Te.gl;qe.texImage2D(qe.TEXTURE_2D,0,qe.RGBA,Fe.width/4,Fe.height/4,0,qe.RGBA,Te.extRenderToTextureHalfFloat?Te.extTextureHalfFloat.HALF_FLOAT_OES:qe.UNSIGNED_BYTE,null),We.colorAttachment.set($e)}(B,X,ze,Se)}})(g,m,u),g.clear({color:s.Color.transparent});for(let B=0;B<f.length;B++){const X=f[B];if(i.hasRenderableParent(X))continue;const ie=i.getTile(X),he=ie.getBucket(u);if(!he)continue;const Se=he.programConfigurations.get(u.id),ze=m.useProgram("heatmap",Se),{zoom:Te}=m.transform;ze.draw(g,x.TRIANGLES,jn.disabled,I,O,fr.disabled,ws(X.posMatrix,ie,Te,u.paint.get("heatmap-intensity")),u.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,u.paint,m.transform.zoom,Se)}g.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(g,x){const I=g.context,O=I.gl,B=x.heatmapFbo;if(!B)return;I.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,B.colorAttachment.get()),I.activeTexture.set(O.TEXTURE1);let X=x.colorRampTexture;X||(X=x.colorRampTexture=new re(I,x.colorRamp,O.RGBA)),X.bind(O.LINEAR,O.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(I,O.TRIANGLES,jn.disabled,rr.disabled,g.colorModeForRenderPass(),fr.disabled,((ie,he,Se,ze)=>{const Te=s.create();s.ortho(Te,0,ie.width,ie.height,0,0,1);const Fe=ie.context.gl;return{u_matrix:Te,u_world:[Fe.drawingBufferWidth,Fe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:he.paint.get("heatmap-opacity")}})(g,x),x.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,x.paint,g.transform.zoom)}(m,u))},line:function(m,i,u,f){if(m.renderPass!=="translucent")return;const g=u.paint.get("line-opacity"),x=u.paint.get("line-width");if(g.constantOr(1)===0||x.constantOr(1)===0)return;const I=m.depthModeForSublayer(0,jn.ReadOnly),O=m.colorModeForRenderPass(),B=u.paint.get("line-dasharray"),X=u.paint.get("line-pattern"),ie=X.constantOr(1),he=u.paint.get("line-gradient"),Se=u.getCrossfadeParameters(),ze=ie?"linePattern":B?"lineSDF":he?"lineGradient":"line",Te=m.context,Fe=Te.gl;let $e=!0;for(const We of f){const qe=i.getTile(We);if(ie&&!qe.patternsLoaded())continue;const Ye=qe.getBucket(u);if(!Ye)continue;const ht=Ye.programConfigurations.get(u.id),it=m.context.program.get(),ut=m.useProgram(ze,ht),vt=$e||ut.program!==it,bt=X.constantOr(null);if(bt&&qe.imageAtlas){const Ht=qe.imageAtlas,Ot=Ht.patternPositions[bt.to.toString()],fn=Ht.patternPositions[bt.from.toString()];Ot&&fn&&ht.setConstantPatternPositions(Ot,fn)}const gt=ie?nr(m,qe,u,Se):B?Es(m,qe,u,B,Se):he?fa(m,qe,u,Ye.lineClipsArray.length):_o(m,qe,u);if(ie)Te.activeTexture.set(Fe.TEXTURE0),qe.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),ht.updatePaintBuffers(Se);else if(B&&(vt||m.lineAtlas.dirty))Te.activeTexture.set(Fe.TEXTURE0),m.lineAtlas.bind(Te);else if(he){const Ht=Ye.gradients[u.id];let Ot=Ht.texture;if(u.gradientVersion!==Ht.version){let fn=256;if(u.stepInterpolant){const Un=i.getSource().maxzoom,In=We.canonical.z===Un?Math.ceil(1<<m.transform.maxZoom-We.canonical.z):1;fn=s.clamp(s.nextPowerOfTwo(Ye.maxLineLength/s.EXTENT*1024*In),256,Te.maxTextureSize)}Ht.gradient=s.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:fn,image:Ht.gradient||void 0,clips:Ye.lineClipsArray}),Ht.texture?Ht.texture.update(Ht.gradient):Ht.texture=new re(Te,Ht.gradient,Fe.RGBA),Ht.version=u.gradientVersion,Ot=Ht.texture}Te.activeTexture.set(Fe.TEXTURE0),Ot.bind(u.stepInterpolant?Fe.NEAREST:Fe.LINEAR,Fe.CLAMP_TO_EDGE)}ut.draw(Te,Fe.TRIANGLES,I,m.stencilModeForClipping(We),O,fr.disabled,gt,u.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,u.paint,m.transform.zoom,ht,Ye.layoutVertexBuffer2),$e=!1}},fill:function(m,i,u,f){const g=u.paint.get("fill-color"),x=u.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const I=m.colorModeForRenderPass(),O=u.paint.get("fill-pattern"),B=m.opaquePassEnabledForLayer()&&!O.constantOr(1)&&g.constantOr(s.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===B){const X=m.depthModeForSublayer(1,m.renderPass==="opaque"?jn.ReadWrite:jn.ReadOnly);bo(m,i,u,f,X,I,!1)}if(m.renderPass==="translucent"&&u.paint.get("fill-antialias")){const X=m.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,jn.ReadOnly);bo(m,i,u,f,X,I,!0)}},"fill-extrusion":function(m,i,u,f){const g=u.paint.get("fill-extrusion-opacity");if(g!==0&&m.renderPass==="translucent"){const x=new jn(m.context.gl.LEQUAL,jn.ReadWrite,m.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))mi(m,i,u,f,x,rr.disabled,hr.disabled),mi(m,i,u,f,x,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const I=m.colorModeForRenderPass();mi(m,i,u,f,x,rr.disabled,I)}}},hillshade:function(m,i,u,f){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const g=m.context,x=m.depthModeForSublayer(0,jn.ReadOnly),I=m.colorModeForRenderPass(),[O,B]=m.renderPass==="translucent"?m.stencilConfigForOverlap(f):[{},f];for(const X of B){const ie=i.getTile(X);ie.needsHillshadePrepare&&m.renderPass==="offscreen"?Fl(m,ie,u,x,rr.disabled,I):m.renderPass==="translucent"&&Ci(m,ie,u,x,O[X.overscaledZ],I)}g.viewport.set([0,0,m.width,m.height])},raster:function(m,i,u,f){if(m.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!f.length)return;const g=m.context,x=g.gl,I=i.getSource(),O=m.useProgram("raster"),B=m.colorModeForRenderPass(),[X,ie]=I instanceof Ie?[{},f]:m.stencilConfigForOverlap(f),he=ie[ie.length-1].overscaledZ,Se=!m.options.moving;for(const ze of ie){const Te=m.depthModeForSublayer(ze.overscaledZ-he,u.paint.get("raster-opacity")===1?jn.ReadWrite:jn.ReadOnly,x.LESS),Fe=i.getTile(ze),$e=m.transform.calculatePosMatrix(ze.toUnwrapped(),Se);Fe.registerFadeDuration(u.paint.get("raster-fade-duration"));const We=i.findLoadedParent(ze,0),qe=Wa(Fe,We,i,u,m.transform);let Ye,ht;const it=u.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;g.activeTexture.set(x.TEXTURE0),Fe.texture.bind(it,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(x.TEXTURE1),We?(We.texture.bind(it,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),Ye=Math.pow(2,We.tileID.overscaledZ-Fe.tileID.overscaledZ),ht=[Fe.tileID.canonical.x*Ye%1,Fe.tileID.canonical.y*Ye%1]):Fe.texture.bind(it,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const ut=Tu($e,ht||[0,0],Ye||1,qe,u);I instanceof Ie?O.draw(g,x.TRIANGLES,Te,rr.disabled,B,fr.disabled,ut,u.id,I.boundsBuffer,m.quadTriangleIndexBuffer,I.boundsSegments):O.draw(g,x.TRIANGLES,Te,X[ze.overscaledZ],B,fr.disabled,ut,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,i,u){const f=u.paint.get("background-color"),g=u.paint.get("background-opacity");if(g===0)return;const x=m.context,I=x.gl,O=m.transform,B=O.tileSize,X=u.paint.get("background-pattern");if(m.isPatternMissing(X))return;const ie=!X&&f.a===1&&g===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==ie)return;const he=rr.disabled,Se=m.depthModeForSublayer(0,ie==="opaque"?jn.ReadWrite:jn.ReadOnly),ze=m.colorModeForRenderPass(),Te=m.useProgram(X?"backgroundPattern":"background"),Fe=O.coveringTiles({tileSize:B});X&&(x.activeTexture.set(I.TEXTURE0),m.imageManager.bind(m.context));const $e=u.getCrossfadeParameters();for(const We of Fe){const qe=m.transform.calculatePosMatrix(We.toUnwrapped()),Ye=X?bl(qe,g,m,X,{tileID:We,tileSize:B},$e):wl(qe,g,f);Te.draw(x,I.TRIANGLES,Se,he,ze,fr.disabled,Ye,u.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}},debug:function(m,i,u){for(let f=0;f<u.length;f++)Wo(m,i,u[f])},custom:function(m,i,u){const f=m.context,g=u.implementation;if(m.renderPass==="offscreen"){const x=g.prerender;x&&(m.setCustomLayerDefaults(),f.setColorMode(m.colorModeForRenderPass()),x.call(g,f.gl,m.transform.customLayerMatrix()),f.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),f.setColorMode(m.colorModeForRenderPass()),f.setStencilMode(rr.disabled);const x=g.renderingMode==="3d"?new jn(m.context.gl.LEQUAL,jn.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,jn.ReadOnly);f.setDepthMode(x),g.render(f.gl,m.transform.customLayerMatrix()),f.setDirty(),m.setBaseState(),f.bindFramebuffer.set(null)}}};class gi{constructor(i,u){this.context=new ih(i),this.transform=u,this._tileTextures={},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wn,this.gpuTimers={}}resize(i,u,f){if(this.width=i*f,this.height=u*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new s.PosArray;u.emplaceBack(0,0),u.emplaceBack(s.EXTENT,0),u.emplaceBack(0,s.EXTENT),u.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,ml.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const f=new s.PosArray;f.emplaceBack(0,0),f.emplaceBack(s.EXTENT,0),f.emplaceBack(0,s.EXTENT),f.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(f,ml.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const g=new s.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(s.EXTENT,0,s.EXTENT,0),g.emplaceBack(0,s.EXTENT,0,s.EXTENT),g.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(g,be.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const x=new s.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,ml.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const I=new s.LineStripIndexArray;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(I);const O=new s.TriangleIndexArray;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(O),this.emptyTexture=new re(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const B=this.context.gl;this.stencilClearMode=new rr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=s.create();s.ortho(f,0,this.width,this.height,0,0,1),s.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,jn.disabled,this.stencilClearMode,hr.disabled,fr.disabled,Na(f),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(hr.disabled),f.setDepthMode(jn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of u){const O=this._tileClippingMaskIDs[I.key]=this.nextStencilID++;x.draw(f,g.TRIANGLES,jn.disabled,new rr({func:g.ALWAYS,mask:0},O,255,g.KEEP,g.KEEP,g.REPLACE),hr.disabled,fr.disabled,Na(I.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new rr({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new rr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((I,O)=>O.overscaledZ-I.overscaledZ),g=f[f.length-1].overscaledZ,x=f[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const I={};for(let O=0;O<x;O++)I[O+g]=new rr({func:u.GEQUAL,mask:255},O+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[I,f]}return[{[g]:rr.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new hr([i.CONSTANT_COLOR,i.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hr.unblended:hr.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return jn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new jn(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches;for(const B in g){const X=g[B];X.used&&X.prepare(this.context)}const x={},I={},O={};for(const B in g){const X=g[B];x[B]=X.getVisibleCoordinates(),I[B]=x[B].slice().reverse(),O[B]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<f.length;B++)if(this.style._layers[f[B]].is3D()){this.opaquePassCutoff=B;break}this.renderPass="offscreen";for(const B of f){const X=this.style._layers[B];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ie=I[X.source];(X.type==="custom"||ie.length)&&this.renderLayer(this,g[X.source],X,ie)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[f[this.currentLayer]],X=g[B.source],ie=x[B.source];this._renderTileClippingMasks(B,ie),this.renderLayer(this,X,B,ie)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const B=this.style._layers[f[this.currentLayer]],X=g[B.source],ie=(B.type==="symbol"?O:I)[B.source];this._renderTileClippingMasks(B,x[B.source]),this.renderLayer(this,X,B,ie)}if(this.options.showTileBoundaries){let B,X;Object.values(this.style._layers).forEach(ie=>{ie.source&&!ie.isHidden(this.transform.zoom)&&(ie.source!==(X&&X.id)&&(X=this.style.sourceCaches[ie.source]),(!B||B.getSource().maxzoom<X.getSource().maxzoom)&&(B=X))}),B&&Zo.debug(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const X=B.transform.padding;ya(B,B.transform.height-(X.top||0),3,Lu),ya(B,X.bottom||0,3,Pi),ks(B,X.left||0,3,io),ks(B,B.transform.width-(X.right||0),3,Ur);const ie=B.transform.centerPoint;(function(he,Se,ze,Te){Za(he,Se-1,ze-10,2,20,Te),Za(he,Se-10,ze-1,20,2,Te)})(B,ie.x,B.transform.height-ie.y,Go)}(this),this.context.setDefault()}renderLayer(i,u,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||g.length)&&(this.id=f.id,this.gpuTimingStart(f),Zo[f.type](i,u,f,g,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let f=this.gpuTimers[i.id];f||(f=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),f.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,f.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const f in i){const g=i[f],x=this.context.extTimerQuery,I=x.getQueryObjectEXT(g.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(g.query),u[f]=I}return u}translatePosMatrix(i,u,f,g,x){if(!f[0]&&!f[1])return i;const I=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(I){const X=Math.sin(I),ie=Math.cos(I);f=[f[0]*ie-f[1]*X,f[0]*X+f[1]*ie]}const O=W(x?f[0]:zn(u,f[0],this.transform.zoom),x?f[1]:zn(u,f[1],this.transform.zoom),0),B=new Float32Array(16);return s.translate(B,i,O),B}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=`${i}${u?u.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[f]||(this.cache[f]=new wu(this.context,i,Ba[i],u,Ua[i],this._showOverdrawInspector)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new re(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class oo{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>s.transformMat4([],O,i)).map(O=>s.scale$1([],O,1/O[3]/u*g)),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{const B=function(Se,ze){var Te=ze[0],Fe=ze[1],$e=ze[2],We=Te*Te+Fe*Fe+$e*$e;return We>0&&(We=1/Math.sqrt(We)),Se[0]=ze[0]*We,Se[1]=ze[1]*We,Se[2]=ze[2]*We,Se}([],function(Se,ze,Te){var Fe=ze[0],$e=ze[1],We=ze[2],qe=Te[0],Ye=Te[1],ht=Te[2];return Se[0]=$e*ht-We*Ye,Se[1]=We*qe-Fe*ht,Se[2]=Fe*Ye-$e*qe,Se}([],G([],x[O[0]],x[O[1]]),G([],x[O[2]],x[O[1]]))),X=-((ie=B)[0]*(he=x[O[1]])[0]+ie[1]*he[1]+ie[2]*he[2]);var ie,he;return B.concat(X)});return new oo(x,I)}}class Ho{constructor(i,u){this.min=i,this.max=u,this.center=function(f,g,x){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,x){return f[0]=g[0]+x[0],f[1]=g[1]+x[1],f[2]=g[2]+x[2],f}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],f=Y(this.min),g=Y(this.max);for(let x=0;x<u.length;x++)f[x]=u[x]?this.min[x]:this.center[x],g[x]=u[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Ho(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let f=!0;for(let g=0;g<i.planes.length;g++){const x=i.planes[g];let I=0;for(let O=0;O<u.length;O++)s.dot(x,u[O])>=0&&I++;if(I===0)return 0;I!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let O=0;O<i.points.length;O++){const B=i.points[O][g]-this.min[g];x=Math.min(x,B),I=Math.max(I,B)}if(I<0||x>this.max[g]-this.min[g])return 0}return 1}}class Eo{constructor(i=0,u=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=g}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=s.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=s.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=s.number(i.right,u.right,f)),this}getCenter(i,u){const f=s.clamp((this.left+i-this.right)/2,0,i),g=s.clamp((this.top+u-this.bottom)/2,0,u);return new s.pointGeometry(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Eo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Xo{constructor(i,u,f,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f==null?0:f,this._maxPitch=g==null?60:g,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Eo,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new Xo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-s.wrap(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,x){var I=g[0],O=g[1],B=g[2],X=g[3],ie=Math.sin(x),he=Math.cos(x);f[0]=I*he+B*ie,f[1]=O*he+X*ie,f[2]=I*-ie+B*he,f[3]=O*-ie+X*he}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new s.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new s.pointGeometry(0,0)),g=this.pointCoordinate(new s.pointGeometry(this.width,0)),x=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),I=this.pointCoordinate(new s.pointGeometry(0,this.height)),O=Math.floor(Math.min(f.x,g.x,x.x,I.x)),B=Math.floor(Math.max(f.x,g.x,x.x,I.x)),X=1;for(let ie=O-X;ie<=B+X;ie++)ie!==0&&u.push(new s.UnwrappedTileID(ie,i))}return u}coveringTiles(i){let u=this.coveringZoomLevel(i);const f=u;if(i.minzoom!==void 0&&u<i.minzoom)return[];i.maxzoom!==void 0&&u>i.maxzoom&&(u=i.maxzoom);const g=s.MercatorCoordinate.fromLngLat(this.center),x=Math.pow(2,u),I=[x*g.x,x*g.y,0],O=oo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u);let B=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(B=u);const X=Te=>({aabb:new Ho([Te*x,0,0],[(Te+1)*x,x,0]),zoom:0,x:0,y:0,wrap:Te,fullyVisible:!1}),ie=[],he=[],Se=u,ze=i.reparseOverscaled?f:u;if(this._renderWorldCopies)for(let Te=1;Te<=3;Te++)ie.push(X(-Te)),ie.push(X(Te));for(ie.push(X(0));ie.length>0;){const Te=ie.pop(),Fe=Te.x,$e=Te.y;let We=Te.fullyVisible;if(!We){const ut=Te.aabb.intersects(O);if(ut===0)continue;We=ut===2}const qe=Te.aabb.distanceX(I),Ye=Te.aabb.distanceY(I),ht=Math.max(Math.abs(qe),Math.abs(Ye)),it=3+(1<<Se-Te.zoom)-2;if(Te.zoom===Se||ht>it&&Te.zoom>=B)he.push({tileID:new s.OverscaledTileID(Te.zoom===Se?ze:Te.zoom,Te.wrap,Te.zoom,Fe,$e),distanceSq:V([I[0]-.5-Fe,I[1]-.5-$e])});else for(let ut=0;ut<4;ut++){const vt=(Fe<<1)+ut%2,bt=($e<<1)+(ut>>1);ie.push({aabb:Te.aabb.quadrant(ut),zoom:Te.zoom+1,x:vt,y:bt,wrap:Te.wrap,fullyVisible:We})}}return he.sort((Te,Fe)=>Te.distanceSq-Fe.distanceSq).map(Te=>Te.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=s.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.pointGeometry(s.mercatorXfromLng(i.lng)*this.worldSize,s.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new s.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),I=new s.MercatorCoordinate(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return s.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const u=[i.x,i.y,0,1],f=[i.x,i.y,1,1];s.transformMat4(u,u,this.pixelMatrixInverse),s.transformMat4(f,f,this.pixelMatrixInverse);const g=u[3],x=f[3],I=u[1]/g,O=f[1]/x,B=u[2]/g,X=f[2]/x,ie=B===X?0:(0-B)/(X-B);return new s.MercatorCoordinate(s.number(u[0]/g,f[0]/x,ie)/this.worldSize,s.number(I,O,ie)/this.worldSize)}coordinatePoint(i){const u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.transformMat4(u,u,this.pixelMatrix),new s.pointGeometry(u[0]/u[3],u[1]/u[3])}getBounds(){return new s.LngLatBounds().extend(this.pointLocation(new s.pointGeometry(0,0))).extend(this.pointLocation(new s.pointGeometry(this.width,0))).extend(this.pointLocation(new s.pointGeometry(this.width,this.height))).extend(this.pointLocation(new s.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const x=i.canonical,I=this.worldSize/this.zoomScale(x.z),O=x.x+Math.pow(2,x.z)*i.wrap,B=s.identity(new Float64Array(16));return s.translate(B,B,[O*I,x.y*I,0]),s.scale(B,B,[I/s.EXTENT,I/s.EXTENT,1]),s.multiply(B,u?this.alignedProjMatrix:this.projMatrix,B),g[f]=new Float32Array(B),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,g,x=-90,I=90,O=-180,B=180;const X=this.size,ie=this._unmodified;if(this.latRange){const ze=this.latRange;x=s.mercatorYfromLat(ze[1])*this.worldSize,I=s.mercatorYfromLat(ze[0])*this.worldSize,i=I-x<X.y?X.y/(I-x):0}if(this.lngRange){const ze=this.lngRange;O=s.mercatorXfromLng(ze[0])*this.worldSize,B=s.mercatorXfromLng(ze[1])*this.worldSize,u=B-O<X.x?X.x/(B-O):0}const he=this.point,Se=Math.max(u||0,i||0);if(Se)return this.center=this.unproject(new s.pointGeometry(u?(B+O)/2:he.x,i?(I+x)/2:he.y)),this.zoom+=this.scaleZoom(Se),this._unmodified=ie,void(this._constraining=!1);if(this.latRange){const ze=he.y,Te=X.y/2;ze-Te<x&&(g=x+Te),ze+Te>I&&(g=I-Te)}if(this.lngRange){const ze=he.x,Te=X.x/2;ze-Te<O&&(f=O+Te),ze+Te>B&&(f=B-Te)}f===void 0&&g===void 0||(this.center=this.unproject(new s.pointGeometry(f!==void 0?f:he.x,g!==void 0?g:he.y))),this._unmodified=ie,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const u=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),g=Math.sin(f)*this.cameraToCenterDistance/Math.sin(s.clamp(Math.PI-u-f,.01,Math.PI-.01)),x=this.point,I=x.x,O=x.y,B=1.01*(Math.cos(Math.PI/2-this._pitch)*g+this.cameraToCenterDistance),X=this.height/50;let ie=new Float64Array(16);s.perspective(ie,this._fov,this.width/this.height,X,B),ie[8]=2*-i.x/this.width,ie[9]=2*i.y/this.height,s.scale(ie,ie,[1,-1,1]),s.translate(ie,ie,[0,0,-this.cameraToCenterDistance]),s.rotateX(ie,ie,this._pitch),s.rotateZ(ie,ie,this.angle),s.translate(ie,ie,[-I,-O,0]),this.mercatorMatrix=s.scale([],ie,W(this.worldSize,this.worldSize,this.worldSize)),s.scale(ie,ie,W(1,1,s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize)),this.projMatrix=ie,this.invProjMatrix=s.invert([],this.projMatrix);const he=this.width%2/2,Se=this.height%2/2,ze=Math.cos(this.angle),Te=Math.sin(this.angle),Fe=I-Math.round(I)+ze*he+Te*Se,$e=O-Math.round(O)+ze*Se+Te*he,We=new Float64Array(ie);if(s.translate(We,We,[Fe>.5?Fe-1:Fe,$e>.5?$e-1:$e,0]),this.alignedProjMatrix=We,ie=s.create(),s.scale(ie,ie,[this.width/2,-this.height/2,1]),s.translate(ie,ie,[1,-1,0]),this.labelPlaneMatrix=ie,ie=s.create(),s.scale(ie,ie,[1,-1,1]),s.translate(ie,ie,[-1,-1,0]),s.scale(ie,ie,[2/this.width,2/this.height,1]),this.glCoordMatrix=ie,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ie=s.invert(new Float64Array(16),this.pixelMatrix),!ie)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ie,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new s.pointGeometry(0,0)),u=s.fromValues(i.x*this.worldSize,i.y*this.worldSize,0,1);return s.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,g=u.y,x=u.x,I=u.y;for(const O of i)f=Math.min(f,O.x),g=Math.min(g,O.y),x=Math.max(x,O.x),I=Math.max(I,O.y);return[new s.pointGeometry(f,g),new s.pointGeometry(x,g),new s.pointGeometry(x,I),new s.pointGeometry(f,I),new s.pointGeometry(f,g)]}}}class Bl{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,f){let g=!1,x=null;const I=()=>{x=null,g&&(u(),x=setTimeout(I,300),g=!1)};return()=>(g=!0,x||I(),x)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),I=Math.round(u.lng*x)/x,O=Math.round(u.lat*x)/x,B=this._map.getBearing(),X=this._map.getPitch();let ie="";if(ie+=i?`/${I}/${O}/${f}`:`${f}/${O}/${I}`,(B||X)&&(ie+="/"+Math.round(10*B)/10),X&&(ie+=`/${Math.round(X)}`),this._hashName){const he=this._hashName;let Se=!1;const ze=window.location.hash.slice(1).split("&").map(Te=>{const Fe=Te.split("=")[0];return Fe===he?(Se=!0,`${Fe}=${ie}`):Te}).filter(Te=>Te);return Se||ze.push(`${he}=${ie}`),`#${ze.join("&")}`}return`#${ie}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(u=f)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const va={linearity:.3,easing:s.bezier(0,0,.3,1)},jl=s.extend({deceleration:2500,maxSpeed:1400},va),Dl=s.extend({deceleration:20,maxSpeed:1400},va),ai=s.extend({deceleration:1e3,maxSpeed:360},va),Nl=s.extend({deceleration:1e3,maxSpeed:90},va);class Ru{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=s.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const x=Yo(u.pan.mag(),f,s.extend({},jl,i||{}));g.offset=u.pan.mult(x.amount/u.pan.mag()),g.center=this._map.transform.center,_a(g,x)}if(u.zoom){const x=Yo(u.zoom,f,Dl);g.zoom=this._map.transform.zoom+x.amount,_a(g,x)}if(u.bearing){const x=Yo(u.bearing,f,ai);g.bearing=this._map.transform.bearing+s.clamp(x.amount,-179,179),_a(g,x)}if(u.pitch){const x=Yo(u.pitch,f,Nl);g.pitch=this._map.transform.pitch+x.amount,_a(g,x)}if(g.zoom||g.bearing){const x=u.pinchAround===void 0?u.around:u.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),s.extend(g,{noMoveStart:!0})}}function _a(m,i){(!m.duration||m.duration<i.duration)&&(m.duration=i.duration,m.easing=i.easing)}function Yo(m,i,u){const{maxSpeed:f,linearity:g,deceleration:x}=u,I=s.clamp(m*g/(i/1e3),-f,f),O=Math.abs(I)/(x*g);return{easing:u.easing,duration:1e3*O,amount:I*(O/2)}}class ir extends s.Event{constructor(i,u,f,g={}){const x=P.mousePos(u.getCanvasContainer(),f),I=u.unproject(x);super(i,s.extend({point:x,lngLat:I,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ha extends s.Event{constructor(i,u,f){const g=i==="touchend"?f.changedTouches:f.touches,x=P.touchPos(u.getCanvasContainer(),g),I=x.map(B=>u.unproject(B)),O=x.reduce((B,X,ie,he)=>B.add(X.div(he.length)),new s.pointGeometry(0,0));super(i,{points:x,point:O,lngLats:I,lngLat:u.unproject(O),originalEvent:f}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class So extends s.Event{constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class j{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new So(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new ir(i.type,this._map,i))}mouseup(i){this._map.fire(new ir(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ir(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ir(i.type,this._map,i))}mouseover(i){this._map.fire(new ir(i.type,this._map,i))}mouseout(i){this._map.fire(new ir(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ha(i.type,this._map,i))}touchmove(i){this._map.fire(new Ha(i.type,this._map,i))}touchend(i){this._map.fire(new Ha(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ha(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fe{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ir(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ir("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new ir(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Le{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(P.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=P.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(g.x,f.x),I=Math.max(g.x,f.x),O=Math.min(g.y,f.y),B=Math.max(g.y,f.y);P.setTransform(this._box,`translate(${x}px,${O}px)`),this._box.style.width=I-x+"px",this._box.style.height=B-O+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,g=u;if(this.reset(),P.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(f,g,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new s.Event(i,{originalEvent:u}))}}function nt(m,i){const u={};for(let f=0;f<m.length;f++)u[m[f].identifier]=i[f];return u}class Pt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const x=new s.pointGeometry(0,0);for(const I of g)x._add(I);return x.div(g.length)}(u),this.touches=nt(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const g=nt(f,u);for(const x in this.touches){const I=this.touches[x],O=g[x];(!O||O.dist(I)>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Et{constructor(i){this.singleTap=new Pt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const g=this.singleTap.touchend(i,u,f);if(g){const x=i.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(g)<30;if(x&&I||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Wt{constructor(){this._zoomIn=new Et({numTouches:1,numTaps:2}),this._zoomOut=new Et({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const g=this._zoomIn.touchend(i,u,f),x=this._zoomOut.touchend(i,u,f);return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(g)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Zt={0:1,2:2};class hn{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const f=P.mouseButton(i);this._correctButton(i,f)&&(this._lastPoint=u,this._eventButton=f)}mousemoveWindow(i,u){const f=this._lastPoint;if(f){if(i.preventDefault(),function(g,x){const I=Zt[x];return g.buttons===void 0||(g.buttons&I)!==I}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(f,u)}}mouseupWindow(i){this._lastPoint&&P.mouseButton(i)===this._eventButton&&(this._moved&&P.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _t extends hn{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class Dn extends hn{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const f=.8*(u.x-i.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(i){i.preventDefault()}}class Wn extends hn{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const f=-.5*(u.y-i.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(i){i.preventDefault()}}class Jn{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const g=nt(f,u),x=new s.pointGeometry(0,0),I=new s.pointGeometry(0,0);let O=0;for(const X in g){const ie=g[X],he=this._touches[X];he&&(x._add(ie),I._add(ie.sub(he)),O++,g[X]=ie)}if(this._touches=g,O<this._minTouches||!I.mag())return;const B=I.div(O);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(O),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ar{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,f){return{}}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[g,x]=this._firstTwoTouches,I=xt(f,u,g),O=xt(f,u,x);if(!I||!O)return;const B=this._aroundCenter?null:I.add(O).div(2);return this._move([I,O],B,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,I=xt(f,u,g),O=xt(f,u,x);I&&O||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function xt(m,i,u){for(let f=0;f<m.length;f++)if(m[f].identifier===u)return i[f]}function ki(m,i){return Math.log(m/i)/Math.LN2}class ao extends Ar{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(ki(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ki(this._distance,f),pinchAround:u}}}function To(m,i){return 180*m.angleWith(i)/Math.PI}class Ms extends Ar{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:To(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=To(i,this._startVector);return Math.abs(f)<u}}function Ko(m){return Math.abs(m.y)>Math.abs(m.x)}class Xa extends Ar{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,Ko(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){const g=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,x=u.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const I=i.y>0==u.y>0;return Ko(i)&&Ko(u)&&I}}const tg={panStep:100,bearingStep:15,pitchStep:10};class ng{constructor(){const i=tg;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,g=0,x=0,I=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),I=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:O=>{const B=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:oh,zoom:u?Math.round(B)+u*(i.shiftKey?2:1):B,bearing:O.getBearing()+f*this._bearingStep,pitch:O.getPitch()+g*this._pitchStep,offset:[-x*this._panStep,-I*this._panStep],center:O.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function oh(m){return m*(2-m)}const Fu=4.000244140625;class ah{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=s.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Fu==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=P.mousePos(this._el,i);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>Fu?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&B!==0&&(B=1/B);const X=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(X*B))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,g=this._easing;let x,I=!1;if(this._type==="wheel"&&f&&g){const O=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),B=g(O);x=s.number(f,u,B),O<1?this._frameId||(this._frameId=!0):I=!0}else x=u,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=s.ease;if(this._prevEase){const f=this._prevEase,g=(s.exported.now()-f.start)/f.duration,x=f.easing(g+.01)-f.easing(g),I=.27/Math.sqrt(x*x+1e-4)*.01,O=Math.sqrt(.0729-I*I);u=s.bezier(I,O,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class sh{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yi{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(i.shiftKey?-1:1),around:f.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xa{constructor(){this._tap=new Et({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=u[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,u,f))}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,u,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class td{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lh{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class uh{constructor(i,u,f,g){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const zs=m=>m.zoom||m.drag||m.pitch||m.rotate;class nd extends s.Event{}function vi(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class or{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ru(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),s.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,I]of this._listeners)P.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[i,u,f]of this._listeners)P.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new j(u,i));const g=u.boxZoom=new Le(u,i);this._add("boxZoom",g);const x=new Wt,I=new yi;u.doubleClickZoom=new sh(I,x),this._add("tapZoom",x),this._add("clickZoom",I);const O=new xa;this._add("tapDragZoom",O);const B=u.touchPitch=new Xa;this._add("touchPitch",B);const X=new Dn(i),ie=new Wn(i);u.dragRotate=new lh(i,X,ie),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",ie,["mouseRotate"]);const he=new _t(i),Se=new Jn(i);u.dragPan=new td(f,he,Se),this._add("mousePan",he),this._add("touchPan",Se,["touchZoom","touchRotate"]);const ze=new Ms,Te=new ao;u.touchZoomRotate=new uh(f,Te,ze,O),this._add("touchRotate",ze,["touchPan","touchZoom"]),this._add("touchZoom",Te,["touchPan","touchRotate"]);const Fe=u.scrollZoom=new ah(u,this);this._add("scrollZoom",Fe,["mousePan"]);const $e=u.keyboard=new ng;this._add("keyboard",$e),this._add("blockableMapEvent",new fe(u));for(const We of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[We]&&u[We].enable(i[We])}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(zs(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,f){for(const g in i)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=i.type==="renderFrame"?void 0:i,g={needsRenderFrame:!1},x={},I={},O=i.touches,B=O?this._getMapTouches(O):void 0,X=B?P.touchPos(this._el,B):P.mousePos(this._el,i);for(const{handlerName:Se,handler:ze,allowed:Te}of this._handlers){if(!ze.isEnabled())continue;let Fe;this._blockedByActive(I,Te,Se)?ze.reset():ze[u||i.type]&&(Fe=ze[u||i.type](i,X,B),this.mergeHandlerResult(g,x,Fe,Se,f),Fe&&Fe.needsRenderFrame&&this._triggerRenderFrame()),(Fe||ze.isActive())&&(I[Se]=ze)}const ie={};for(const Se in this._previousActiveHandlers)I[Se]||(ie[Se]=f);this._previousActiveHandlers=I,(Object.keys(ie).length||vi(g))&&(this._changes.push([g,x,ie]),this._triggerRenderFrame()),(Object.keys(I).length||vi(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=g;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))}mergeHandlerResult(i,u,f,g,x){if(!f)return;s.extend(i,f);const I={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(u.zoom=I),f.panDelta!==void 0&&(u.drag=I),f.pitchDelta!==void 0&&(u.pitch=I),f.bearingDelta!==void 0&&(u.rotate=I)}_applyChanges(){const i={},u={},f={};for(const[g,x,I]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new s.pointGeometry(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),s.extend(u,x),s.extend(f,I);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const g=this._map,x=g.transform;if(!vi(i))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:O,bearingDelta:B,pitchDelta:X,around:ie,pinchAround:he}=i;he!==void 0&&(ie=he),g._stop(!0),ie=ie||g.transform.centerPoint;const Se=x.pointLocation(I?ie.sub(I):ie);B&&(x.bearing+=B),X&&(x.pitch+=X),O&&(x.zoom+=O),x.setLocationAtPoint(Se,ie),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const g=zs(this._eventsInProgress),x=zs(i),I={};for(const ie in i){const{originalEvent:he}=i[ie];this._eventsInProgress[ie]||(I[`${ie}start`]=he),this._eventsInProgress[ie]=i[ie]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const ie in I)this._fireEvent(ie,I[ie]);x&&this._fireEvent("move",x.originalEvent);for(const ie in i){const{originalEvent:he}=i[ie];this._fireEvent(ie,he)}const O={};let B;for(const ie in this._eventsInProgress){const{handlerName:he,originalEvent:Se}=this._eventsInProgress[ie];this._handlersById[he].isActive()||(delete this._eventsInProgress[ie],B=u[he]||Se,O[`${ie}end`]=B)}for(const ie in O)this._fireEvent(ie,O[ie]);const X=zs(this._eventsInProgress);if(f&&(g||x)&&!X){this._updatingCamera=!0;const ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),he=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;ie?(he(ie.bearing||this._map.getBearing())&&(ie.bearing=0),this._map.easeTo(ie,{originalEvent:B})):(this._map.fire(new s.Event("moveend",{originalEvent:B})),he(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new s.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new nd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Bu={extend:(m,...i)=>s.extend(m,...i),run(m){m()},logToElement(m,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${m}`)}};class ch extends s.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=s.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},u),f)}panTo(i,u,f){return this.easeTo(s.extend({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(s.extend({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(s.extend({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,s.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=s.LngLatBounds.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=s.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const it=g.padding;g.padding={top:it,bottom:it,right:it,left:it}}g.padding=s.extend(x,g.padding);const I=this.transform,O=I.padding,B=I.project(s.LngLat.convert(i)),X=I.project(s.LngLat.convert(u)),ie=B.rotate(-f*Math.PI/180),he=X.rotate(-f*Math.PI/180),Se=new s.pointGeometry(Math.max(ie.x,he.x),Math.max(ie.y,he.y)),ze=new s.pointGeometry(Math.min(ie.x,he.x),Math.min(ie.y,he.y)),Te=Se.sub(ze),Fe=(I.width-(O.left+O.right+g.padding.left+g.padding.right))/Te.x,$e=(I.height-(O.top+O.bottom+g.padding.top+g.padding.bottom))/Te.y;if($e<0||Fe<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const We=Math.min(I.scaleZoom(I.scale*Math.min(Fe,$e)),g.maxZoom),qe=s.pointGeometry.convert(g.offset),Ye=new s.pointGeometry((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),ht=qe.add(Ye).mult(I.scale/I.zoomScale(We));return{center:I.unproject(B.add(X).div(2).sub(ht)),zoom:We,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(i)),this.transform.pointLocation(s.pointGeometry.convert(u)),f,g),g,x)}_fitInternal(i,u,f){return i?(delete(u=s.extend(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this.transform;let g=!1,x=!1,I=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=s.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(x=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(I=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this.fire(new s.Event("movestart",u)).fire(new s.Event("move",u)),g&&this.fire(new s.Event("zoomstart",u)).fire(new s.Event("zoom",u)).fire(new s.Event("zoomend",u)),x&&this.fire(new s.Event("rotatestart",u)).fire(new s.Event("rotate",u)).fire(new s.Event("rotateend",u)),I&&this.fire(new s.Event("pitchstart",u)).fire(new s.Event("pitch",u)).fire(new s.Event("pitchend",u)),this.fire(new s.Event("moveend",u))}easeTo(i,u){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||!i.essential&&s.exported.prefersReducedMotion)&&(i.duration=0);const f=this.transform,g=this.getZoom(),x=this.getBearing(),I=this.getPitch(),O=this.getPadding(),B="zoom"in i?+i.zoom:g,X="bearing"in i?this._normalizeBearing(i.bearing,x):x,ie="pitch"in i?+i.pitch:I,he="padding"in i?i.padding:f.padding,Se=s.pointGeometry.convert(i.offset);let ze=f.centerPoint.add(Se);const Te=f.pointLocation(ze),Fe=s.LngLat.convert(i.center||Te);this._normalizeCenter(Fe);const $e=f.project(Te),We=f.project(Fe).sub($e),qe=f.zoomScale(B-g);let Ye,ht;i.around&&(Ye=s.LngLat.convert(i.around),ht=f.locationPoint(Ye));const it={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||B!==g,this._rotating=this._rotating||x!==X,this._pitching=this._pitching||ie!==I,this._padding=!f.isPaddingEqual(he),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,it),this._ease(ut=>{if(this._zooming&&(f.zoom=s.number(g,B,ut)),this._rotating&&(f.bearing=s.number(x,X,ut)),this._pitching&&(f.pitch=s.number(I,ie,ut)),this._padding&&(f.interpolatePadding(O,he,ut),ze=f.centerPoint.add(Se)),Ye)f.setLocationAtPoint(Ye,ht);else{const vt=f.zoomScale(f.zoom-g),bt=B>g?Math.min(2,qe):Math.max(.5,qe),gt=Math.pow(bt,1-ut),Ht=f.unproject($e.add(We.mult(ut*gt)).mult(vt));f.setLocationAtPoint(f.renderWorldCopies?Ht.wrap():Ht,ze)}this._fireMoveEvents(u)},ut=>{this._afterEase(u,ut)},i),this}_prepareEase(i,u,f={}){this._moving=!0,u||f.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new s.Event("zoomend",i)),g&&this.fire(new s.Event("rotateend",i)),x&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,u){if(!i.essential&&s.exported.prefersReducedMotion){const Cn=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Cn,u)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const f=this.transform,g=this.getZoom(),x=this.getBearing(),I=this.getPitch(),O=this.getPadding(),B="zoom"in i?s.clamp(+i.zoom,f.minZoom,f.maxZoom):g,X="bearing"in i?this._normalizeBearing(i.bearing,x):x,ie="pitch"in i?+i.pitch:I,he="padding"in i?i.padding:f.padding,Se=f.zoomScale(B-g),ze=s.pointGeometry.convert(i.offset);let Te=f.centerPoint.add(ze);const Fe=f.pointLocation(Te),$e=s.LngLat.convert(i.center||Fe);this._normalizeCenter($e);const We=f.project(Fe),qe=f.project($e).sub(We);let Ye=i.curve;const ht=Math.max(f.width,f.height),it=ht/Se,ut=qe.mag();if("minZoom"in i){const Cn=s.clamp(Math.min(i.minZoom,g,B),f.minZoom,f.maxZoom),_r=ht/f.zoomScale(Cn-g);Ye=Math.sqrt(_r/ut*2)}const vt=Ye*Ye;function bt(Cn){const _r=(it*it-ht*ht+(Cn?-1:1)*vt*vt*ut*ut)/(2*(Cn?it:ht)*vt*ut);return Math.log(Math.sqrt(_r*_r+1)-_r)}function gt(Cn){return(Math.exp(Cn)-Math.exp(-Cn))/2}function Ht(Cn){return(Math.exp(Cn)+Math.exp(-Cn))/2}const Ot=bt(0);let fn=function(Cn){return Ht(Ot)/Ht(Ot+Ye*Cn)},Un=function(Cn){return ht*((Ht(Ot)*(gt(_r=Ot+Ye*Cn)/Ht(_r))-gt(Ot))/vt)/ut;var _r},In=(bt(1)-Ot)/Ye;if(Math.abs(ut)<1e-6||!isFinite(In)){if(Math.abs(ht-it)<1e-6)return this.easeTo(i,u);const Cn=it<ht?-1:1;In=Math.abs(Math.log(it/ht))/Ye,Un=function(){return 0},fn=function(_r){return Math.exp(Cn*Ye*_r)}}return i.duration="duration"in i?+i.duration:1e3*In/("screenSpeed"in i?+i.screenSpeed/Ye:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=x!==X,this._pitching=ie!==I,this._padding=!f.isPaddingEqual(he),this._prepareEase(u,!1),this._ease(Cn=>{const _r=Cn*In,yn=1/fn(_r);f.zoom=Cn===1?B:g+f.scaleZoom(yn),this._rotating&&(f.bearing=s.number(x,X,Cn)),this._pitching&&(f.pitch=s.number(I,ie,Cn)),this._padding&&(f.interpolatePadding(O,he,Cn),Te=f.centerPoint.add(ze));const On=Cn===1?$e:f.unproject(We.add(qe.mult(Un(_r))).mult(yn));f.setLocationAtPoint(f.renderWorldCopies?On.wrap():On,Te),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=s.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=s.wrap(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}}class hh{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const x=u[g];if(x.used){const I=x.getSource();I.attribution&&i.indexOf(I.attribution)<0&&i.push(I.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,x)=>g.length-x.length),i=i.filter((g,x)=>{for(let I=x+1;I<i.length;I++)if(i[I].indexOf(g)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class rd{constructor(){s.bindAll(["_updateLogo"],this),s.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=P.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=P.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(void 0),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const i=this._map.style.sourceCaches;for(const u in i)if(i[u].getSource().maplibreLogo)return!0;return!1}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class id{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const rg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ju={showCompass:!0,showZoom:!0,visualizePitch:!1};class Xt{constructor(i,u,f=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Dn({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,f&&(this.mousePitch=new Wn({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),P.addEventListener(u,"mousedown",this.mousedown),P.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(u,"touchmove",this.touchmove),P.addEventListener(u,"touchend",this.touchend),P.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),P.disableDrag()}move(i,u){const f=this.map,g=this.mouseRotate.mousemoveWindow(i,u);if(g&&g.bearingDelta&&f.setBearing(f.getBearing()+g.bearingDelta),this.mousePitch){const x=this.mousePitch.mousemoveWindow(i,u);x&&x.pitchDelta&&f.setPitch(f.getPitch()+x.pitchDelta)}}off(){const i=this.element;P.removeEventListener(i,"mousedown",this.mousedown),P.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(i,"touchmove",this.touchmove),P.removeEventListener(i,"touchend",this.touchend),P.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),P.mousePos(this.element,i)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,P.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function sn(m,i,u){if(m=new s.LngLat(m.lng,m.lat),i){const f=new s.LngLat(m.lng-360,m.lat),g=new s.LngLat(m.lng+360,m.lat),x=u.locationPoint(m).distSqr(i);u.locationPoint(f).distSqr(i)<x?m=f:u.locationPoint(g).distSqr(i)<x&&(m=g)}for(;Math.abs(m.lng-u.center.lng)>180;){const f=u.locationPoint(m);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;m.lng>u.center.lng?m.lng-=360:m.lng+=360}return m}const Os={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Du(m,i,u){const f=m.classList;for(const g in Os)f.remove(`maplibregl-${u}-anchor-${g}`,`mapboxgl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class Ul extends s.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=s.extend({element:i},u)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=s.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div"),this._element.setAttribute("aria-label","Map marker");const f=P.createNS("http://www.w3.org/2000/svg","svg"),g=41,x=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${g}px`),f.setAttributeNS(null,"width",`${x}px`),f.setAttributeNS(null,"viewBox",`0 0 ${x} ${g}`);const I=P.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const O=P.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");const B=P.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(3.0, 29.0)"),B.setAttributeNS(null,"fill","#000000");const X=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const qe of X){const Ye=P.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",qe.rx),Ye.setAttributeNS(null,"ry",qe.ry),B.appendChild(Ye)}const ie=P.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill",this._color);const he=P.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ie.appendChild(he);const Se=P.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"fill","#000000");const ze=P.createNS("http://www.w3.org/2000/svg","path");ze.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Se.appendChild(ze);const Te=P.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Te.setAttributeNS(null,"fill","#FFFFFF");const Fe=P.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const $e=P.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#000000"),$e.setAttributeNS(null,"opacity","0.25"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962");const We=P.createNS("http://www.w3.org/2000/svg","circle");We.setAttributeNS(null,"fill","#FFFFFF"),We.setAttributeNS(null,"cx","5.5"),We.setAttributeNS(null,"cy","5.5"),We.setAttributeNS(null,"r","5.4999962"),Fe.appendChild($e),Fe.appendChild(We),O.appendChild(B),O.appendChild(ie),O.appendChild(Se),O.appendChild(Te),O.appendChild(Fe),f.appendChild(O),f.setAttributeNS(null,"height",g*this._scale+"px"),f.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(f),this._offset=s.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Du(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,f=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,f=this._element;this._popup&&(u===f||f.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=sn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Os[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${u}`)}getOffset(){return this._offset}setOffset(i){return this._offset=s.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const _i={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let qo,Mi=0,$l=!1;const Nu={maxWidth:100,unit:"metric"};function yr(m,i,u){const f=u&&u.maxWidth||100,g=m._container.clientHeight/2,x=m.unproject([0,g]),I=m.unproject([f,g]),O=x.distanceTo(I);if(u&&u.unit==="imperial"){const B=3.2808*O;B>5280?vr(i,f,B/5280,m._getUIString("ScaleControl.Miles")):vr(i,f,B,m._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?vr(i,f,O/1852,m._getUIString("ScaleControl.NauticalMiles")):O>=1e3?vr(i,f,O/1e3,m._getUIString("ScaleControl.Kilometers")):vr(i,f,O,m._getUIString("ScaleControl.Meters"))}function vr(m,i,u,f){const g=function(x){const I=Math.pow(10,`${Math.floor(x)}`.length-1);let O=x/I;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(B){const X=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*X)/X}(O),I*O}(u);m.style.width=i*(g/u)+"px",m.innerHTML=`${g}&nbsp;${f}`}const od={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Vl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Uu(m){if(m){if(typeof m=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(m,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,m),"top-left":new s.pointGeometry(i,i),"top-right":new s.pointGeometry(-i,i),bottom:new s.pointGeometry(0,-m),"bottom-left":new s.pointGeometry(i,-i),"bottom-right":new s.pointGeometry(-i,-i),left:new s.pointGeometry(m,0),right:new s.pointGeometry(-m,0)}}if(m instanceof s.pointGeometry||Array.isArray(m)){const i=s.pointGeometry.convert(m);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.pointGeometry.convert(m.center||[0,0]),top:s.pointGeometry.convert(m.top||[0,0]),"top-left":s.pointGeometry.convert(m["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(m["top-right"]||[0,0]),bottom:s.pointGeometry.convert(m.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(m["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(m["bottom-right"]||[0,0]),left:s.pointGeometry.convert(m.left||[0,0]),right:s.pointGeometry.convert(m.right||[0,0])}}return Uu(new s.pointGeometry(0,0))}const Gl={supported:w,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends ch{constructor(m){var i;if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(m=s.extend({},Ao,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Xo(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),{bearingSnap:m.bearingSnap}),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new id,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},rg,m.locale),this._clickTolerance=m.clickTolerance,this._pixelRatio=(i=m.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new N(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new or(this,m),this._hash=m.hash&&new Bl(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new hh({customAttribution:m.customAttribution})),this.addControl(new rd,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new s.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new s.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new s.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(m,i){if(i===void 0&&(i=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=m.onAdd(this);this._controls.push(m);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(m);return i>-1&&this._controls.splice(i,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}resize(m){const i=this._containerDimensions(),u=i[0],f=i[1];this._resizeCanvas(u,f,this.getPixelRatio()),this.transform.resize(u,f),this.painter.resize(u,f,this.getPixelRatio());const g=!this._moving;return g&&(this.stop(),this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m))),this.fire(new s.Event("resize",m)),g&&this.fire(new s.Event("moveend",m)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(m){const[i,u]=this._containerDimensions();this._pixelRatio=m,this._resizeCanvas(i,u,m),this.painter.resize(i,u,m)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(s.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m==null?-2:m)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m==null?22:m)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m==null?0:m)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m==null?60:m)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(s.LngLat.convert(m))}unproject(m){return this.transform.pointLocation(s.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(m,i,u){if(m==="mouseenter"||m==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:x=>{const I=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];I.length?f||(f=!0,u.call(this,new ir(m,this,x.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(m==="mouseleave"||m==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:I=>{(this.getLayer(i)?this.queryRenderedFeatures(I.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new ir(m,this,I.originalEvent)))},mouseout:I=>{f&&(f=!1,u.call(this,new ir(m,this,I.originalEvent)))}}}}{const f=g=>{const x=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];x.length&&(g.features=x,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[m]:f}}}}on(m,i,u){if(u===void 0)return super.on(m,i);const f=this._createDelegatedListener(m,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(m,i,u){if(u===void 0)return super.once(m,i);const f=this._createDelegatedListener(m,i,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(m,i,u){return u===void 0?super.off(m,i):(this._delegatedListeners&&this._delegatedListeners[m]&&(f=>{const g=this._delegatedListeners[m];for(let x=0;x<g.length;x++){const I=g[x];if(I.layer===i&&I.listener===u){for(const O in I.delegates)this.off(O,I.delegates[O]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(m,i){if(!this.style)return[];let u;if(i!==void 0||m===void 0||m instanceof s.pointGeometry||Array.isArray(m)||(i=m,m=void 0),i=i||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof s.pointGeometry||typeof m[0]=="number")u=[s.pointGeometry.convert(m)];else{const f=s.pointGeometry.convert(m[0]),g=s.pointGeometry.convert(m[1]);u=[f,new s.pointGeometry(g.x,f.y),g,new s.pointGeometry(f.x,g.y),f]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(m,i){return this.style.querySourceFeatures(m,i)}setStyle(m,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(m,i))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const i=this._locale[m];if(i==null)throw new Error(`Missing UI string '${m}'`);return i}_updateStyle(m,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new Yi(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Yi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,i){if(typeof m=="string"){const u=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(u,(f,g)=>{f?this.fire(new s.ErrorEvent(f)):g&&this._updateDiff(g,i)})}else typeof m=="object"&&this._updateDiff(m,i)}_updateDiff(m,i){try{this.style.setState(m)&&this._update(!0)}catch(u){s.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(m,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(m,i){return this._lazyInitEmptyStyle(),this.style.addSource(m,i),this._update(!0)}isSourceLoaded(m){const i=this.style&&this.style.sourceCaches[m];if(i!==void 0)return i.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${m}'`)))}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const i in m){const u=m[i]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(m,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,i,u)}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,i,{pixelRatio:u=1,sdf:f=!1,stretchX:g,stretchY:x,content:I}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||s.isImageBitmap(i)){const{width:O,height:B,data:X}=s.exported.getImageData(i);this.style.addImage(m,{data:new s.RGBAImage({width:O,height:B},X),pixelRatio:u,stretchX:g,stretchY:x,content:I,sdf:f,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:B,data:X}=i,ie=i;this.style.addImage(m,{data:new s.RGBAImage({width:O,height:B},new Uint8Array(X)),pixelRatio:u,stretchX:g,stretchY:x,content:I,sdf:f,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,m)}}}updateImage(m,i){const u=this.style.getImage(m);if(!u)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||s.isImageBitmap(i)?s.exported.getImageData(i):i,{width:g,height:x,data:I}=f;if(g===void 0||x===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||x!==u.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(i instanceof HTMLImageElement||s.isImageBitmap(i));u.data.replace(I,O),this.style.updateImage(m,u)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,i){s.getImage(this._requestManager.transformRequest(m,s.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(m,i){return this._lazyInitEmptyStyle(),this.style.addLayer(m,i),this._update(!0)}moveLayer(m,i){return this.style.moveLayer(m,i),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,i,u){return this.style.setLayerZoomRange(m,i,u),this._update(!0)}setFilter(m,i,u={}){return this.style.setFilter(m,i,u),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,i,u,f={}){return this.style.setPaintProperty(m,i,u,f),this._update(!0)}getPaintProperty(m,i){return this.style.getPaintProperty(m,i)}setLayoutProperty(m,i,u,f={}){return this.style.setLayoutProperty(m,i,u,f),this._update(!0)}getLayoutProperty(m,i){return this.style.getLayoutProperty(m,i)}setLight(m,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(m,i){return this.style.setFeatureState(m,i),this._update()}removeFeatureState(m,i){return this.style.removeFeatureState(m,i),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,i=0;return this._container&&(m=this._container.clientWidth||400,i=this._container.clientHeight||300),[m,i]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=P.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const f=this._controlContainer=P.create("div","maplibregl-control-container mapboxgl-control-container",m),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{g[x]=P.create("div",`maplibregl-ctrl-${x} mapboxgl-ctrl-${x}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,i,u){this._canvas.width=u*m,this._canvas.height=u*i,this._canvas.style.width=`${m}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const m=s.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);i?(this.painter=new gi(i,this.transform),s.exported$1.testSupport(i)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){let i,u=0;const f=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,i),u=s.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,O=s.exported.now();this.style.zoomHistory.update(I,O);const B=new s.EvaluationParameters(I,{now:O,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=B.crossFadingFactor();X===1&&X===this._crossFadingFactor||(g=!0,this._crossFadingFactor=X),this.style.update(B)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const I=s.exported.now()-u;f.endQueryEXT(f.TIME_ELAPSED_EXT,i),setTimeout(()=>{const O=f.getQueryObjectEXT(i,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:I,gpuTime:O}))},50)}if(this.listens("gpu-timing-layer")){const I=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(I);this.fire(new s.Event("gpu-timing-layer",{layerTimes:O}))},50)}const x=this._sourcesDirty||this._styleDirty||this._placementDirty;return x||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||x||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.exported.frame(m=>{s.PerformanceUtils.frame(m),this._frame=null,this._render(m)}))}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,i){s.setCacheLimits(m,i)}},NavigationControl:class{constructor(m){this.options=s.extend({},ju,m),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map.getZoom(),i=m===this._map.getMaxZoom(),u=m===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const m=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=m}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xt(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,i){const u=P.create("button",m,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(m,i){const u=this._map._getUIString(`NavigationControl.${i}`);m.title=u,m.setAttribute("aria-label",u)}},GeolocateControl:class extends s.Evented{constructor(m){super(),this.options=s.extend({},_i,m),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(m){var i;return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,qo!==void 0?i(qo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{qo=u.state!=="denied",i(qo)}):(qo=!!window.navigator.geolocation,i(qo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mi=0,$l=!1}_isOutOfMapMaxBounds(m){const i=this._map.getMaxBounds(),u=m.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",m)),this._finish()}}_updateCamera(m){const i=new s.LngLat(m.coords.longitude,m.coords.latitude),u=m.coords.accuracy,f=this._map.getBearing(),g=s.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),g,{geolocateSource:!0})}_updateMarker(m){if(m){const i=new s.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map._container.clientHeight/2,i=this._map.unproject([0,m]),u=this._map.unproject([1,m]),f=i.distanceTo(u),g=Math.ceil(2*this._accuracy/f);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&$l)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ul(this._dotElement),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ul({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mi--,$l=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Mi++,Mi>1?(m={maximumAge:6e5,timeout:0},$l=!0):(m=this.options.positionOptions,$l=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:hh,ScaleControl:class{constructor(m){this.options=s.extend({},Nu,m),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){yr(this._map,this._container,this.options)}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(m){this.options.unit=m,yr(this._map,this._container,this.options)}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(m){super(),this.options=s.extend(Object.create(od),m),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=s.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=m;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){this._container&&this._container.classList.add(m)}removeClassName(m){this._container&&this._container.classList.remove(m)}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(m){this._update(m.point)}_onMouseMove(m){this._update(m.point)}_onDrag(m){this._update(m.point)}_update(m){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=P.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sn(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!m))return;const i=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat);let u=this.options.anchor;const f=Uu(this.options.offset);if(!u){const x=this._container.offsetWidth,I=this._container.offsetHeight;let O;O=i.y+f.bottom.y<I?["top"]:i.y>this._map.transform.height-I?["bottom"]:[],i.x<x/2?O.push("left"):i.x>this._map.transform.width-x/2&&O.push("right"),u=O.length===0?"bottom":O.join("-")}const g=i.add(f[u]).round();P.setTransform(this._container,`${Os[u]} translate(${g.x}px,${g.y}px)`),Du(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Vl);m&&m.focus()}_onClose(){this.remove()}},Marker:Ul,Style:Yi,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,AJAXError:s.AJAXError,config:s.config,CanvasSource:Ze,GeoJSONSource:ke,ImageSource:Ie,RasterDEMTileSource:ce,RasterTileSource:Ee,VectorTileSource:ue,VideoSource:Be,prewarm:function(){L().acquire(_n)},clearPrewarmedResources:function(){const m=ge;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(_n),ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return nn.workerCount},set workerCount(m){nn.workerCount=m},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){s.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){s.clearTileCache(m)},workerUrl:"",addProtocol(m,i){s.config.REGISTERED_PROTOCOLS[m]=i},removeProtocol(m){delete s.config.REGISTERED_PROTOCOLS[m]}};return Bu.extend(Gl,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),Gl});var y=c;return y})})(c1);var fk=c1.exports,dk=Object.freeze(sC({__proto__:null,[Symbol.toStringTag]:"Module",default:fk},[c1.exports]));const pk=rn.exports.createContext(null);function Uw(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function $w(e,t){const r=t.viewState||t;let l=!1;if("longitude"in r&&"latitude"in r){const c=e.center;e.center=new c.constructor(r.longitude,r.latitude),l=l||c!==e.center}if("zoom"in r){const c=e.zoom;e.zoom=r.zoom,l=l||c!==e.zoom}if("bearing"in r){const c=e.bearing;e.bearing=r.bearing,l=l||c!==e.bearing}if("pitch"in r){const c=e.pitch;e.pitch=r.pitch,l=l||c!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(l=!0,e.padding=r.padding),l}const mk=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Vw(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const l of e.layers)t[l.id]=l;const r=e.layers.map(l=>{const c=t[l.ref];let d=null;if("interactive"in l&&(d=wi({},l),delete d.interactive),c){d=d||wi({},l),delete d.ref;for(const y of mk)y in c&&(d[y]=c[y])}return d||l});return Qu(wi({},e),{layers:r})}function gk(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,l=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===c&&l===d}function Oo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Oo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(const c of r)if(!t.hasOwnProperty(c)||!Oo(e[c],t[c]))return!1;return!0}return!1}const Gw={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},my={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Ww={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},yk=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],vk=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class jc{constructor(t,r,l){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[Ww[c.type]];d&&d(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[Gw[c.type]];if(d){if(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"){const y=this._hoveredFeatures||this._map.queryRenderedFeatures(c.point,{layers:this.props.interactiveLayerIds});if(!y.length)return;c.features=y}d(c),delete c.features}},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[my[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=r,this._initialize(l)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const l=this._updateSettings(t,r);l&&(this._renderTransform=this._map.transform.clone());const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(l||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const l=jc.savedMaps.pop();if(!l)return null;const c=l.map,d=c.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);return c._container=r,t.initialViewState&&l._updateViewState(t.initialViewState,!1),c.resize(),l.setProps(Qu(wi({},t),{styleDiffing:!1})),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),l}_initialize(t){const{props:r}=this,l=Qu(wi(wi({},r),r.initialViewState),{accessToken:r.mapboxAccessToken||_k()||null,container:t,style:Vw(r.mapStyle)}),c=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),r.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,r.gl)}const d=new this._MapClass(l);c.padding&&d.setPadding(c.padding),r.cursor&&(d.getCanvas().style.cursor=r.cursor),this._renderTransform=d.transform.clone();const y=d._render;d._render=E=>{this._inRender=!0,y.call(d,E),this._inRender=!1};const s=d._renderTaskQueue.run;d._renderTaskQueue.run=E=>{s.call(d._renderTaskQueue,E),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const w=d.fire;d.fire=this._fireEvent.bind(this,w),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>this._updateStyleComponents(this.props,{})),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in Gw)d.on(E,this._onPointerEvent);for(const E in my)d.on(E,this._onCameraEvent);for(const E in Ww)d.on(E,this._onEvent);this._map=d}recycle(){jc.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:r}=t;if(r){const l=this._map;if(r.width!==l.transform.width||r.height!==l.transform.height)return l.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const l=this._map,c=this._renderTransform,{zoom:d,pitch:y,bearing:s}=c,w=$w(c,wi(wi({},Uw(l.transform)),t));if(w&&r){const E=this._deferredEvents;E.move=!0,E.zoom||(E.zoom=d!==c.zoom),E.rotate||(E.rotate=s!==c.bearing),E.pitch||(E.pitch=y!==c.pitch)}return l.isMoving()||$w(l.transform,t),w}_updateSettings(t,r){const l=this._map;let c=!1;for(const d of yk)d in t&&!Oo(t[d],r[d])&&(c=!0,l[`set${d[0].toUpperCase()}${d.slice(1)}`](t[d]));return c}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==r.mapStyle){const l={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(l.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Vw(t.mapStyle),l),!0}return!1}_updateStyleComponents(t,r){const l=this._map;let c=!1;return l.style.loaded()&&("light"in t&&!Oo(t.light,r.light)&&(c=!0,l.setLight(t.light)),"fog"in t&&!Oo(t.fog,r.fog)&&(c=!0,l.setFog(t.fog)),"terrain"in t&&!Oo(t.terrain,r.terrain)&&(!t.terrain||l.getSource(t.terrain.source))&&(c=!0,l.setTerrain(t.terrain))),c}_updateHandlers(t,r){const l=this._map;let c=!1;for(const d of vk){const y=t[d];Oo(y,r[d])||(c=!0,y?l[d].enable(y):l[d].disable())}return c}_updateHover(t){var c;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const d=t.type,y=((c=this._hoveredFeatures)==null?void 0:c.length)>0;let s;if(d==="mousemove")try{s=this._map.queryRenderedFeatures(t.point,{layers:r.interactiveLayerIds})}catch{s=[]}else s=[];const w=s.length>0;!w&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,w&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,l){const c=this._map,d=c.transform,y=typeof r=="string"?r:r.type;return y==="move"&&this._updateViewState(this.props,!1),y in my&&(typeof r=="object"&&(r.viewState=Uw(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,r,l),c.transform=d,c):(t.call(c,r,l),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const l in this._deferredEvents)this._deferredEvents[l]&&t.fire(l);this._internalUpdate=!1;const r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=r}}}jc.savedMaps=[];function _k(){let e=null;if(typeof location!="undefined"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const xk=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Zw(e,t){if(!e)return null;const r=e.map,l={getMap:()=>r,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c))};for(const c of wk(r))!(c in l)&&!xk.includes(c)&&(l[c]=r[c].bind(r));return l}function wk(e){const t=new Set;let r=e;for(;r;){for(const l of Object.getOwnPropertyNames(r))l[0]!=="_"&&typeof e[l]=="function"&&l!=="fire"&&l!=="setEventedParent"&&t.add(l);r=Object.getPrototypeOf(r)}return Array.from(t)}const bk=typeof document!="undefined"?rn.exports.useLayoutEffect:rn.exports.useEffect,Ek=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Sk(e,t){for(const r of Ek)r in t&&(e[r]=t[r]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,r=>{r&&console.error(r)},!1)}const Kc=rn.exports.createContext(null),Tk={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},uS=rn.exports.forwardRef((e,t)=>{const r=rn.exports.useContext(pk),[l,c]=rn.exports.useState(null),d=rn.exports.useRef(),{current:y}=rn.exports.useRef({mapLib:null,map:null});rn.exports.useEffect(()=>{const w=e.mapLib;let E=!0,C;return Promise.resolve(w||Promise.resolve().then(function(){return dk})).then(S=>{if(!!E){if(S.Map||(S=S.default),!S||!S.Map)throw new Error("Invalid mapLib");if(S.supported(e))Sk(S,e),e.reuseMaps&&(C=jc.reuse(e,d.current)),C||(C=new jc(S.Map,e,d.current)),y.map=C.map,y.mapLib=S,c(C),r==null||r.onMapMount(Zw(C,S),e.id);else throw new Error("Map is not supported by this browser")}}).catch(S=>{e.onError({type:"error",target:null,originalEvent:null,error:S})}),()=>{E=!1,C&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),bk(()=>{l&&l.setProps(e)}),rn.exports.useImperativeHandle(t,()=>Zw(l,y.mapLib),[l]);const s=rn.exports.useMemo(()=>wi({position:"relative",width:"100%",height:"100%"},e.style),[e.style]);return rn.exports.createElement("div",{id:e.id,ref:d,style:s},l&&rn.exports.createElement(Kc.Provider,{value:y},e.children))});uS.displayName="Map";uS.defaultProps=Tk;const Ak=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function yu(e,t){if(!e||!t)return;const r=e.style;for(const l in t){const c=t[l];Number.isFinite(c)&&!Ak.test(l)?r[l]=`${c}px`:r[l]=c}}const Ik={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function cS(e){const{map:t,mapLib:r}=rn.exports.useContext(Kc),l=rn.exports.useRef({props:e});l.current.props=e;const c=rn.exports.useMemo(()=>{let d=!1;rn.exports.Children.forEach(e.children,w=>{w&&(d=!0)});const y=Qu(wi({},e),{element:d?document.createElement("div"):null}),s=new r.Marker(y).setLngLat([e.longitude,e.latitude]);return s.getElement().addEventListener("click",w=>{var E,C;(C=(E=l.current.props).onClick)==null||C.call(E,{type:"click",target:s,originalEvent:w})}),s.on("dragstart",w=>{var C,S;const E=w;E.lngLat=c.getLngLat(),(S=(C=l.current.props).onDragStart)==null||S.call(C,E)}),s.on("drag",w=>{var C,S;const E=w;E.lngLat=c.getLngLat(),(S=(C=l.current.props).onDrag)==null||S.call(C,E)}),s.on("dragend",w=>{var C,S;const E=w;E.lngLat=c.getLngLat(),(S=(C=l.current.props).onDragEnd)==null||S.call(C,E)}),s},[]);return rn.exports.useEffect(()=>(c.addTo(t),()=>{c.remove()}),[]),rn.exports.useEffect(()=>{yu(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!gk(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),Sm.exports.createPortal(e.children,c.getElement())}cS.defaultProps=Ik;var pL=rn.exports.memo(cS);function Hw(e){return new Set(e?e.trim().split(/\s+/):[])}function Ck(e){const{map:t,mapLib:r}=rn.exports.useContext(Kc),l=rn.exports.useMemo(()=>document.createElement("div"),[]),c=rn.exports.useRef({props:e});c.current.props=e;const d=rn.exports.useMemo(()=>{const y=wi({},e),s=new r.Popup(y).setLngLat([e.longitude,e.latitude]);return s.on("open",w=>{var E,C;(C=(E=c.current.props).onOpen)==null||C.call(E,w)}),s.on("close",w=>{var E,C;(C=(E=c.current.props).onClose)==null||C.call(E,w)}),s},[]);if(rn.exports.useEffect(()=>(d.setDOMContent(l).addTo(t),()=>{d.isOpen()&&d.remove()}),[]),rn.exports.useEffect(()=>{yu(d.getElement(),e.style)},[e.style]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Oo(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const y=Hw(d.options.className),s=Hw(e.className);for(const w of y)s.has(w)||d.removeClassName(w);for(const w of s)y.has(w)||d.addClassName(w);d.options.className=e.className}return Sm.exports.createPortal(e.children,l)}rn.exports.memo(Ck);function Zf(e,t,r){const l=rn.exports.useContext(Kc),c=rn.exports.useMemo(()=>e(l),[]);return rn.exports.useEffect(()=>{var y;const{map:d}=l;return d.hasControl(c)||d.addControl(c,(y=r||t)==null?void 0:y.position),()=>{typeof t=="function"&&t(l),d.hasControl(c)&&d.removeControl(c)}},[]),c}function Pk(e){const t=Zf(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return rn.exports.useEffect(()=>{yu(t._container,e.style)},[e.style]),null}rn.exports.memo(Pk);function kk(e){const t=Zf(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return rn.exports.useEffect(()=>{yu(t._controlContainer,e.style)},[e.style]),null}rn.exports.memo(kk);const hS=rn.exports.forwardRef((e,t)=>{const r=rn.exports.useRef({props:e}),l=Zf(({mapLib:c})=>{const d=new c.GeolocateControl(e);return d.on("geolocate",y=>{var s,w;(w=(s=r.current.props).onGeolocate)==null||w.call(s,y)}),d.on("error",y=>{var s,w;(w=(s=r.current.props).onError)==null||w.call(s,y)}),d.on("outofmaxbounds",y=>{var s,w;(w=(s=r.current.props).onOutOfMaxBounds)==null||w.call(s,y)}),d.on("trackuserlocationstart",y=>{var s,w;(w=(s=r.current.props).onTrackUserLocationStart)==null||w.call(s,y)}),d.on("trackuserlocationend",y=>{var s,w;(w=(s=r.current.props).onTrackUserLocationEnd)==null||w.call(s,y)}),d},{position:e.position});return r.current.props=e,rn.exports.useImperativeHandle(t,()=>({trigger:()=>l.trigger()}),[]),rn.exports.useEffect(()=>{yu(l._container,e.style)},[e.style]),null});hS.displayName="GeolocateControl";var mL=rn.exports.memo(hS);function Mk(e){const t=Zf(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return rn.exports.useEffect(()=>{yu(t._container,e.style)},[e.style]),null}var gL=rn.exports.memo(Mk);const zk={unit:"metric",maxWidth:100};function fS(e){const t=Zf(({mapLib:r})=>new r.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),rn.exports.useEffect(()=>{yu(t._container,e.style)},[e.style]),null}fS.defaultProps=zk;rn.exports.memo(fS);function Wp(e,t){if(!e)throw new Error(t)}let Ok=0;function Lk(e,t,r){if(e.style&&e.style._loaded){const l=wi({},r);return delete l.id,delete l.children,e.addSource(t,l),e.getSource(t)}return null}function Rk(e,t,r){Wp(t.id===r.id,"source id changed"),Wp(t.type===r.type,"source type changed");let l="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!Oo(r[y],t[y])&&(l=y,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((d==="canvas"||d==="video")&&c===1&&l==="coordinates")e.setCoordinates(t.coordinates);else if(d==="vector"&&"setUrl"in e)switch(l){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${l}`)}function yL(e){const{map:t}=rn.exports.useContext(Kc),r=rn.exports.useRef(e),[,l]=rn.exports.useState(0),c=rn.exports.useMemo(()=>e.id||`jsx-source-${Ok++}`,[]);rn.exports.useEffect(()=>{if(t){const y=()=>l(s=>s+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),setTimeout(()=>{t.style&&t.style._loaded&&t.getSource(c)&&t.removeSource(c)},0)}}},[t]);let d=t&&t.style&&t.getSource(c);return d?Rk(d,e,r.current):d=Lk(t,c,e),r.current=e,d&&rn.exports.Children.map(e.children,y=>y&&rn.exports.cloneElement(y,{source:c}))||null}function Fk(e,t,r,l){if(Wp(r.id===l.id,"layer id changed"),Wp(r.type===l.type,"layer type changed"),r.type==="custom"||l.type==="custom")return;const{layout:c={},paint:d={},filter:y,minzoom:s,maxzoom:w,beforeId:E}=r;if(E!==l.beforeId&&e.moveLayer(t,E),c!==l.layout){const C=l.layout||{};for(const S in c)Oo(c[S],C[S])||e.setLayoutProperty(t,S,c[S]);for(const S in C)c.hasOwnProperty(S)||e.setLayoutProperty(t,S,void 0)}if(d!==l.paint){const C=l.paint||{};for(const S in d)Oo(d[S],C[S])||e.setPaintProperty(t,S,d[S]);for(const S in C)d.hasOwnProperty(S)||e.setPaintProperty(t,S,void 0)}Oo(y,l.filter)||e.setFilter(t,y),(s!==l.minzoom||w!==l.maxzoom)&&e.setLayerZoomRange(t,s,w)}function Bk(e,t,r){if(e.style&&e.style._loaded&&e.getSource(r.source)){const l=Qu(wi({},r),{id:t});delete l.beforeId,e.addLayer(l,r.beforeId)}}let jk=0;function vL(e){const{map:t}=rn.exports.useContext(Kc),r=rn.exports.useRef(e),[,l]=rn.exports.useState(0),c=rn.exports.useMemo(()=>e.id||`jsx-layer-${jk++}`,[]);if(rn.exports.useEffect(()=>{if(t){const y=()=>l(s=>s+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{Fk(t,c,e,r.current)}catch(y){console.warn(y)}else Bk(t,c,e);return r.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function Xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,l)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(r),!0).forEach(function(l){Uk(e,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xw(Object(r)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(r,l))})}return e}function Zp(e){return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(e)}function Dk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yw(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function Nk(e,t,r){return t&&Yw(e.prototype,t),r&&Yw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h1(e,t){return Vk(e)||Wk(e,t)||dS(e,t)||Hk()}function Dm(e){return $k(e)||Gk(e)||dS(e)||Zk()}function $k(e){if(Array.isArray(e))return x0(e)}function Vk(e){if(Array.isArray(e))return e}function Gk(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wk(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var l=[],c=!0,d=!1,y,s;try{for(r=r.call(e);!(c=(y=r.next()).done)&&(l.push(y.value),!(t&&l.length===t));c=!0);}catch(w){d=!0,s=w}finally{try{!c&&r.return!=null&&r.return()}finally{if(d)throw s}}return l}}function dS(e,t){if(!!e){if(typeof e=="string")return x0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x0(e,t)}}function x0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,l=new Array(t);r<t;r++)l[r]=e[r];return l}function Zk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kw=function(){},f1={},pS={},mS=null,gS={mark:Kw,measure:Kw};try{typeof window!="undefined"&&(f1=window),typeof document!="undefined"&&(pS=document),typeof MutationObserver!="undefined"&&(mS=MutationObserver),typeof performance!="undefined"&&(gS=performance)}catch{}var Xk=f1.navigator||{},qw=Xk.userAgent,Jw=qw===void 0?"":qw,cl=f1,br=pS,Qw=mS,$d=gS;cl.document;var vs=!!br.documentElement&&!!br.head&&typeof br.addEventListener=="function"&&typeof br.createElement=="function",yS=~Jw.indexOf("MSIE")||~Jw.indexOf("Trident/"),ds="___FONT_AWESOME___",w0=16,vS="fa",_S="svg-inline--fa",uu="data-fa-i2svg",b0="data-fa-pseudo-element",Yk="data-fa-pseudo-element-pending",d1="data-prefix",p1="data-icon",eb="fontawesome-i2svg",Kk="async",qk=["HTML","HEAD","STYLE","SCRIPT"],xS=function(){try{return!0}catch{return!1}}(),m1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Hp={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},wS={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},Jk={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},Qk=/fa[srltdbk\-\ ]/,bS="fa-layers-text",eM=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,tM={"900":"fas","400":"far",normal:"far","300":"fal","100":"fat"},ES=[1,2,3,4,5,6,7,8,9,10],nM=ES.concat([11,12,13,14,15,16,17,18,19,20]),rM=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],iu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},iM=[].concat(Dm(Object.keys(Hp)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",iu.GROUP,iu.SWAP_OPACITY,iu.PRIMARY,iu.SECONDARY]).concat(ES.map(function(e){return"".concat(e,"x")})).concat(nM.map(function(e){return"w-".concat(e)})),SS=cl.FontAwesomeConfig||{};function oM(e){var t=br.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function aM(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(br&&typeof br.querySelector=="function"){var sM=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];sM.forEach(function(e){var t=h1(e,2),r=t[0],l=t[1],c=aM(oM(r));c!=null&&(SS[l]=c)})}var lM={familyPrefix:vS,styleDefault:"solid",replacementClass:_S,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},pf=Yt(Yt({},lM),SS);pf.autoReplaceSvg||(pf.observeMutations=!1);var gn={};Object.keys(pf).forEach(function(e){Object.defineProperty(gn,e,{enumerable:!0,set:function(r){pf[e]=r,fp.forEach(function(l){return l(gn)})},get:function(){return pf[e]}})});cl.FontAwesomeConfig=gn;var fp=[];function uM(e){return fp.push(e),function(){fp.splice(fp.indexOf(e),1)}}var Us=w0,Ma={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function cM(e){if(!(!e||!vs)){var t=br.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=br.head.childNodes,l=null,c=r.length-1;c>-1;c--){var d=r[c],y=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(l=d)}return br.head.insertBefore(t,l),e}}var hM="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Rf(){for(var e=12,t="";e-- >0;)t+=hM[Math.random()*62|0];return t}function qc(e){for(var t=[],r=(e||[]).length>>>0;r--;)t[r]=e[r];return t}function g1(e){return e.classList?qc(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function TS(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function fM(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,'="').concat(TS(e[r]),'" ')},"").trim()}function Nm(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,": ").concat(e[r].trim(),";")},"")}function y1(e){return e.size!==Ma.size||e.x!==Ma.x||e.y!==Ma.y||e.rotate!==Ma.rotate||e.flipX||e.flipY}function dM(e){var t=e.transform,r=e.containerWidth,l=e.iconWidth,c={transform:"translate(".concat(r/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(d," ").concat(y," ").concat(s)},E={transform:"translate(".concat(l/2*-1," -256)")};return{outer:c,inner:w,path:E}}function pM(e){var t=e.transform,r=e.width,l=r===void 0?w0:r,c=e.height,d=c===void 0?w0:c,y=e.startCentered,s=y===void 0?!1:y,w="";return s&&yS?w+="translate(".concat(t.x/Us-l/2,"em, ").concat(t.y/Us-d/2,"em) "):s?w+="translate(calc(-50% + ".concat(t.x/Us,"em), calc(-50% + ").concat(t.y/Us,"em)) "):w+="translate(".concat(t.x/Us,"em, ").concat(t.y/Us,"em) "),w+="scale(".concat(t.size/Us*(t.flipX?-1:1),", ").concat(t.size/Us*(t.flipY?-1:1),") "),w+="rotate(".concat(t.rotate,"deg) "),w}var mM=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function AS(){var e=vS,t=_S,r=gn.familyPrefix,l=gn.replacementClass,c=mM;if(r!==e||l!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(r,"-")).replace(y,"--".concat(r,"-")).replace(s,".".concat(l))}return c}var tb=!1;function gy(){gn.autoAddCss&&!tb&&(cM(AS()),tb=!0)}var gM={mixout:function(){return{dom:{css:AS,insertCss:gy}}},hooks:function(){return{beforeDOMElementCreation:function(){gy()},beforeI2svg:function(){gy()}}}},ps=cl||{};ps[ds]||(ps[ds]={});ps[ds].styles||(ps[ds].styles={});ps[ds].hooks||(ps[ds].hooks={});ps[ds].shims||(ps[ds].shims=[]);var sa=ps[ds],IS=[],yM=function e(){br.removeEventListener("DOMContentLoaded",e),Xp=1,IS.map(function(t){return t()})},Xp=!1;vs&&(Xp=(br.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(br.readyState),Xp||br.addEventListener("DOMContentLoaded",yM));function vM(e){!vs||(Xp?setTimeout(e,0):IS.push(e))}function Hf(e){var t=e.tag,r=e.attributes,l=r===void 0?{}:r,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?TS(e):"<".concat(t," ").concat(fM(l),">").concat(d.map(Hf).join(""),"</").concat(t,">")}function nb(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}var _M=function(t,r){return function(l,c,d,y){return t.call(r,l,c,d,y)}},yy=function(t,r,l,c){var d=Object.keys(t),y=d.length,s=c!==void 0?_M(r,c):r,w,E,C;for(l===void 0?(w=1,C=t[d[0]]):(w=0,C=l);w<y;w++)E=d[w],C=s(C,t[E],E,t);return C};function xM(e){for(var t=[],r=0,l=e.length;r<l;){var c=e.charCodeAt(r++);if(c>=55296&&c<=56319&&r<l){var d=e.charCodeAt(r++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),r--)}else t.push(c)}return t}function E0(e){var t=xM(e);return t.length===1?t[0].toString(16):null}function wM(e,t){var r=e.length,l=e.charCodeAt(t),c;return l>=55296&&l<=56319&&r>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(l-55296)*1024+c-56320+65536:l}function rb(e){return Object.keys(e).reduce(function(t,r){var l=e[r],c=!!l.icon;return c?t[l.iconName]=l.icon:t[r]=l,t},{})}function S0(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=r.skipHooks,c=l===void 0?!1:l,d=rb(t);typeof sa.hooks.addPack=="function"&&!c?sa.hooks.addPack(e,rb(t)):sa.styles[e]=Yt(Yt({},sa.styles[e]||{}),d),e==="fas"&&S0("fa",t)}var mf=sa.styles,bM=sa.shims,EM=Object.values(wS),v1=null,CS={},PS={},kS={},MS={},zS={},SM=Object.keys(m1);function TM(e){return~iM.indexOf(e)}function AM(e,t){var r=t.split("-"),l=r[0],c=r.slice(1).join("-");return l===e&&c!==""&&!TM(c)?c:null}var OS=function(){var t=function(d){return yy(mf,function(y,s,w){return y[w]=yy(s,d,{}),y},{})};CS=t(function(c,d,y){if(d[3]&&(c[d[3]]=y),d[2]){var s=d[2].filter(function(w){return typeof w=="number"});s.forEach(function(w){c[w.toString(16)]=y})}return c}),PS=t(function(c,d,y){if(c[y]=y,d[2]){var s=d[2].filter(function(w){return typeof w=="string"});s.forEach(function(w){c[w]=y})}return c}),zS=t(function(c,d,y){var s=d[2];return c[y]=y,s.forEach(function(w){c[w]=y}),c});var r="far"in mf||gn.autoFetchSvg,l=yy(bM,function(c,d){var y=d[0],s=d[1],w=d[2];return s==="far"&&!r&&(s="fas"),typeof y=="string"&&(c.names[y]={prefix:s,iconName:w}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:s,iconName:w}),c},{names:{},unicodes:{}});kS=l.names,MS=l.unicodes,v1=Um(gn.styleDefault)};uM(function(e){v1=Um(e.styleDefault)});OS();function _1(e,t){return(CS[e]||{})[t]}function IM(e,t){return(PS[e]||{})[t]}function gc(e,t){return(zS[e]||{})[t]}function LS(e){return kS[e]||{prefix:null,iconName:null}}function CM(e){var t=MS[e],r=_1("fas",e);return t||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function hl(){return v1}var x1=function(){return{prefix:null,iconName:null,rest:[]}};function Um(e){var t=m1[e],r=Hp[e]||Hp[t],l=e in sa.styles?e:null;return r||l||null}function $m(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.skipLookups,l=r===void 0?!1:r,c=null,d=e.reduce(function(y,s){var w=AM(gn.familyPrefix,s);if(mf[s]?(s=EM.includes(s)?Jk[s]:s,c=s,y.prefix=s):SM.indexOf(s)>-1?(c=s,y.prefix=Um(s)):w?y.iconName=w:s!==gn.replacementClass&&y.rest.push(s),!l&&y.prefix&&y.iconName){var E=c==="fa"?LS(y.iconName):{},C=gc(y.prefix,y.iconName);E.prefix&&(c=null),y.iconName=E.iconName||C||y.iconName,y.prefix=E.prefix||y.prefix,y.prefix==="far"&&!mf.far&&mf.fas&&!gn.autoFetchSvg&&(y.prefix="fas")}return y},x1());return(d.prefix==="fa"||c==="fa")&&(d.prefix=hl()||"fas"),d}var PM=function(){function e(){Dk(this,e),this.definitions={}}return Nk(e,[{key:"add",value:function(){for(var r=this,l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(s){r.definitions[s]=Yt(Yt({},r.definitions[s]||{}),y[s]),S0(s,y[s]);var w=wS[s];w&&S0(w,y[s]),OS()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,l){var c=l.prefix&&l.iconName&&l.icon?{0:l}:l;return Object.keys(c).map(function(d){var y=c[d],s=y.prefix,w=y.iconName,E=y.icon,C=E[2];r[s]||(r[s]={}),C.length>0&&C.forEach(function(S){typeof S=="string"&&(r[s][S]=E)}),r[s][w]=E}),r}}]),e}(),ib=[],yc={},Mc={},kM=Object.keys(Mc);function MM(e,t){var r=t.mixoutsTo;return ib=e,yc={},Object.keys(Mc).forEach(function(l){kM.indexOf(l)===-1&&delete Mc[l]}),ib.forEach(function(l){var c=l.mixout?l.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(r[y]=c[y]),Zp(c[y])==="object"&&Object.keys(c[y]).forEach(function(s){r[y]||(r[y]={}),r[y][s]=c[y][s]})}),l.hooks){var d=l.hooks();Object.keys(d).forEach(function(y){yc[y]||(yc[y]=[]),yc[y].push(d[y])})}l.provides&&l.provides(Mc)}),r}function T0(e,t){for(var r=arguments.length,l=new Array(r>2?r-2:0),c=2;c<r;c++)l[c-2]=arguments[c];var d=yc[e]||[];return d.forEach(function(y){t=y.apply(null,[t].concat(l))}),t}function cu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];var c=yc[e]||[];c.forEach(function(d){d.apply(null,r)})}function ms(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Mc[e]?Mc[e].apply(null,t):void 0}function A0(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,r=e.prefix||hl();if(!!t)return t=gc(r,t)||t,nb(RS.definitions,r,t)||nb(sa.styles,r,t)}var RS=new PM,zM=function(){gn.autoReplaceSvg=!1,gn.observeMutations=!1,cu("noAuto")},OM={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vs?(cu("beforeI2svg",t),ms("pseudoElements2svg",t),ms("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot;gn.autoReplaceSvg===!1&&(gn.autoReplaceSvg=!0),gn.observeMutations=!0,vM(function(){RM({autoReplaceSvgRoot:r}),cu("watch",t)})}},LM={icon:function(t){if(t===null)return null;if(Zp(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:gc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var r=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],l=Um(t[0]);return{prefix:l,iconName:gc(l,r)||r}}if(typeof t=="string"&&(t.indexOf("".concat(gn.familyPrefix,"-"))>-1||t.match(Qk))){var c=$m(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||hl(),iconName:gc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=hl();return{prefix:d,iconName:gc(d,t)||t}}}},go={noAuto:zM,config:gn,dom:OM,parse:LM,library:RS,findIconDefinition:A0,toHtml:Hf},RM=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot,l=r===void 0?br:r;(Object.keys(sa.styles).length>0||gn.autoFetchSvg)&&vs&&gn.autoReplaceSvg&&go.dom.i2svg({node:l})};function Vm(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(l){return Hf(l)})}}),Object.defineProperty(e,"node",{get:function(){if(!!vs){var l=br.createElement("div");return l.innerHTML=e.html,l.children}}}),e}function FM(e){var t=e.children,r=e.main,l=e.mask,c=e.attributes,d=e.styles,y=e.transform;if(y1(y)&&r.found&&!l.found){var s=r.width,w=r.height,E={x:s/w/2,y:.5};c.style=Nm(Yt(Yt({},d),{},{"transform-origin":"".concat(E.x+y.x/16,"em ").concat(E.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function BM(e){var t=e.prefix,r=e.iconName,l=e.children,c=e.attributes,d=e.symbol,y=d===!0?"".concat(t,"-").concat(gn.familyPrefix,"-").concat(r):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Yt(Yt({},c),{},{id:y}),children:l}]}]}function w1(e){var t=e.icons,r=t.main,l=t.mask,c=e.prefix,d=e.iconName,y=e.transform,s=e.symbol,w=e.title,E=e.maskId,C=e.titleId,S=e.extra,P=e.watchable,N=P===void 0?!1:P,ee=l.found?l:r,Y=ee.width,W=ee.height,$=c==="fak",G=[gn.replacementClass,d?"".concat(gn.familyPrefix,"-").concat(d):""].filter(function(D){return S.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(S.classes).join(" "),V={children:[],attributes:Yt(Yt({},S.attributes),{},{"data-prefix":c,"data-icon":d,class:G,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Y," ").concat(W)})},re=$&&!~S.classes.indexOf("fa-fw")?{width:"".concat(Y/W*16*.0625,"em")}:{};N&&(V.attributes[uu]=""),w&&(V.children.push({tag:"title",attributes:{id:V.attributes["aria-labelledby"]||"title-".concat(C||Rf())},children:[w]}),delete V.attributes.title);var H=Yt(Yt({},V),{},{prefix:c,iconName:d,main:r,mask:l,maskId:E,transform:y,symbol:s,styles:Yt(Yt({},re),S.styles)}),F=l.found&&r.found?ms("generateAbstractMask",H)||{children:[],attributes:{}}:ms("generateAbstractIcon",H)||{children:[],attributes:{}},b=F.children,M=F.attributes;return H.children=b,H.attributes=M,s?BM(H):FM(H)}function ob(e){var t=e.content,r=e.width,l=e.height,c=e.transform,d=e.title,y=e.extra,s=e.watchable,w=s===void 0?!1:s,E=Yt(Yt(Yt({},y.attributes),d?{title:d}:{}),{},{class:y.classes.join(" ")});w&&(E[uu]="");var C=Yt({},y.styles);y1(c)&&(C.transform=pM({transform:c,startCentered:!0,width:r,height:l}),C["-webkit-transform"]=C.transform);var S=Nm(C);S.length>0&&(E.style=S);var P=[];return P.push({tag:"span",attributes:E,children:[t]}),d&&P.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),P}function jM(e){var t=e.content,r=e.title,l=e.extra,c=Yt(Yt(Yt({},l.attributes),r?{title:r}:{}),{},{class:l.classes.join(" ")}),d=Nm(l.styles);d.length>0&&(c.style=d);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),r&&y.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),y}var vy=sa.styles;function I0(e){var t=e[0],r=e[1],l=e.slice(4),c=h1(l,1),d=c[0],y=null;return Array.isArray(d)?y={tag:"g",attributes:{class:"".concat(gn.familyPrefix,"-").concat(iu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(gn.familyPrefix,"-").concat(iu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(gn.familyPrefix,"-").concat(iu.PRIMARY),fill:"currentColor",d:d[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:r,icon:y}}var DM={found:!1,width:512,height:512};function NM(e,t){!xS&&!gn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function C0(e,t){var r=t;return t==="fa"&&gn.styleDefault!==null&&(t=hl()),new Promise(function(l,c){if(ms("missingIconAbstract"),r==="fa"){var d=LS(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&vy[t]&&vy[t][e]){var y=vy[t][e];return l(I0(y))}NM(e,t),l(Yt(Yt({},DM),{},{icon:gn.showMissingIcons&&e?ms("missingIconAbstract")||{}:{}}))})}var ab=function(){},P0=gn.measurePerformance&&$d&&$d.mark&&$d.measure?$d:{mark:ab,measure:ab},Hh='FA "6.0.0"',UM=function(t){return P0.mark("".concat(Hh," ").concat(t," begins")),function(){return FS(t)}},FS=function(t){P0.mark("".concat(Hh," ").concat(t," ends")),P0.measure("".concat(Hh," ").concat(t),"".concat(Hh," ").concat(t," begins"),"".concat(Hh," ").concat(t," ends"))},b1={begin:UM,end:FS},dp=function(){};function sb(e){var t=e.getAttribute?e.getAttribute(uu):null;return typeof t=="string"}function $M(e){var t=e.getAttribute?e.getAttribute(d1):null,r=e.getAttribute?e.getAttribute(p1):null;return t&&r}function VM(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(gn.replacementClass)}function GM(){if(gn.autoReplaceSvg===!0)return pp.replace;var e=pp[gn.autoReplaceSvg];return e||pp.replace}function WM(e){return br.createElementNS("http://www.w3.org/2000/svg",e)}function ZM(e){return br.createElement(e)}function BS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.ceFn,l=r===void 0?e.tag==="svg"?WM:ZM:r;if(typeof e=="string")return br.createTextNode(e);var c=l(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var d=e.children||[];return d.forEach(function(y){c.appendChild(BS(y,{ceFn:l}))}),c}function HM(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var pp={replace:function(t){var r=t[0];if(r.parentNode)if(t[1].forEach(function(c){r.parentNode.insertBefore(BS(c),r)}),r.getAttribute(uu)===null&&gn.keepOriginalSource){var l=br.createComment(HM(r));r.parentNode.replaceChild(l,r)}else r.remove()},nest:function(t){var r=t[0],l=t[1];if(~g1(r).indexOf(gn.replacementClass))return pp.replace(t);var c=new RegExp("".concat(gn.familyPrefix,"-.*"));if(delete l[0].attributes.id,l[0].attributes.class){var d=l[0].attributes.class.split(" ").reduce(function(s,w){return w===gn.replacementClass||w.match(c)?s.toSvg.push(w):s.toNode.push(w),s},{toNode:[],toSvg:[]});l[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",d.toNode.join(" "))}var y=l.map(function(s){return Hf(s)}).join(`
`);r.setAttribute(uu,""),r.innerHTML=y}};function lb(e){e()}function jS(e,t){var r=typeof t=="function"?t:dp;if(e.length===0)r();else{var l=lb;gn.mutateApproach===Kk&&(l=cl.requestAnimationFrame||lb),l(function(){var c=GM(),d=b1.begin("mutate");e.map(c),d(),r()})}}var E1=!1;function DS(){E1=!0}function k0(){E1=!1}var Yp=null;function ub(e){if(!!Qw&&!!gn.observeMutations){var t=e.treeCallback,r=t===void 0?dp:t,l=e.nodeCallback,c=l===void 0?dp:l,d=e.pseudoElementsCallback,y=d===void 0?dp:d,s=e.observeMutationsRoot,w=s===void 0?br:s;Yp=new Qw(function(E){if(!E1){var C=hl();qc(E).forEach(function(S){if(S.type==="childList"&&S.addedNodes.length>0&&!sb(S.addedNodes[0])&&(gn.searchPseudoElements&&y(S.target),r(S.target)),S.type==="attributes"&&S.target.parentNode&&gn.searchPseudoElements&&y(S.target.parentNode),S.type==="attributes"&&sb(S.target)&&~rM.indexOf(S.attributeName))if(S.attributeName==="class"&&$M(S.target)){var P=$m(g1(S.target)),N=P.prefix,ee=P.iconName;S.target.setAttribute(d1,N||C),ee&&S.target.setAttribute(p1,ee)}else VM(S.target)&&c(S.target)})}}),!!vs&&Yp.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function XM(){!Yp||Yp.disconnect()}function YM(e){var t=e.getAttribute("style"),r=[];return t&&(r=t.split(";").reduce(function(l,c){var d=c.split(":"),y=d[0],s=d.slice(1);return y&&s.length>0&&(l[y]=s.join(":").trim()),l},{})),r}function KM(e){var t=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),l=e.innerText!==void 0?e.innerText.trim():"",c=$m(g1(e));return c.prefix||(c.prefix=hl()),t&&r&&(c.prefix=t,c.iconName=r),c.iconName&&c.prefix||c.prefix&&l.length>0&&(c.iconName=IM(c.prefix,e.innerText)||_1(c.prefix,E0(e.innerText))),c}function qM(e){var t=qc(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),r=e.getAttribute("title"),l=e.getAttribute("data-fa-title-id");return gn.autoA11y&&(r?t["aria-labelledby"]="".concat(gn.replacementClass,"-title-").concat(l||Rf()):(t["aria-hidden"]="true",t.focusable="false")),t}function JM(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ma,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function cb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=KM(e),l=r.iconName,c=r.prefix,d=r.rest,y=qM(e),s=T0("parseNodeAttributes",{},e),w=t.styleParser?YM(e):[];return Yt({iconName:l,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:Ma,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:w,attributes:y}},s)}var QM=sa.styles;function NS(e){var t=gn.autoReplaceSvg==="nest"?cb(e,{styleParser:!1}):cb(e);return~t.extra.classes.indexOf(bS)?ms("generateLayersText",e,t):ms("generateSvgReplacementMutation",e,t)}function hb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!vs)return Promise.resolve();var r=br.documentElement.classList,l=function(S){return r.add("".concat(eb,"-").concat(S))},c=function(S){return r.remove("".concat(eb,"-").concat(S))},d=gn.autoFetchSvg?Object.keys(m1):Object.keys(QM),y=[".".concat(bS,":not([").concat(uu,"])")].concat(d.map(function(C){return".".concat(C,":not([").concat(uu,"])")})).join(", ");if(y.length===0)return Promise.resolve();var s=[];try{s=qc(e.querySelectorAll(y))}catch{}if(s.length>0)l("pending"),c("complete");else return Promise.resolve();var w=b1.begin("onTree"),E=s.reduce(function(C,S){try{var P=NS(S);P&&C.push(P)}catch(N){xS||N.name==="MissingIcon"&&console.error(N)}return C},[]);return new Promise(function(C,S){Promise.all(E).then(function(P){jS(P,function(){l("active"),l("complete"),c("pending"),typeof t=="function"&&t(),w(),C()})}).catch(function(P){w(),S(P)})})}function e3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;NS(e).then(function(r){r&&jS([r],t)})}function t3(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(t||{}).icon?t:A0(t||{}),c=r.mask;return c&&(c=(c||{}).icon?c:A0(c||{})),e(l,Yt(Yt({},r),{},{mask:c}))}}var n3=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=r.transform,c=l===void 0?Ma:l,d=r.symbol,y=d===void 0?!1:d,s=r.mask,w=s===void 0?null:s,E=r.maskId,C=E===void 0?null:E,S=r.title,P=S===void 0?null:S,N=r.titleId,ee=N===void 0?null:N,Y=r.classes,W=Y===void 0?[]:Y,$=r.attributes,G=$===void 0?{}:$,V=r.styles,re=V===void 0?{}:V;if(!!t){var H=t.prefix,F=t.iconName,b=t.icon;return Vm(Yt({type:"icon"},t),function(){return cu("beforeDOMElementCreation",{iconDefinition:t,params:r}),gn.autoA11y&&(P?G["aria-labelledby"]="".concat(gn.replacementClass,"-title-").concat(ee||Rf()):(G["aria-hidden"]="true",G.focusable="false")),w1({icons:{main:I0(b),mask:w?I0(w.icon):{found:!1,width:null,height:null,icon:{}}},prefix:H,iconName:F,transform:Yt(Yt({},Ma),c),symbol:y,title:P,maskId:C,titleId:ee,extra:{attributes:G,styles:re,classes:W}})})}},r3={mixout:function(){return{icon:t3(n3)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=hb,r.nodeCallback=e3,r}}},provides:function(t){t.i2svg=function(r){var l=r.node,c=l===void 0?br:l,d=r.callback,y=d===void 0?function(){}:d;return hb(c,y)},t.generateSvgReplacementMutation=function(r,l){var c=l.iconName,d=l.title,y=l.titleId,s=l.prefix,w=l.transform,E=l.symbol,C=l.mask,S=l.maskId,P=l.extra;return new Promise(function(N,ee){Promise.all([C0(c,s),C.iconName?C0(C.iconName,C.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Y){var W=h1(Y,2),$=W[0],G=W[1];N([r,w1({icons:{main:$,mask:G},prefix:s,iconName:c,transform:w,symbol:E,maskId:S,title:d,titleId:y,extra:P,watchable:!0})])}).catch(ee)})},t.generateAbstractIcon=function(r){var l=r.children,c=r.attributes,d=r.main,y=r.transform,s=r.styles,w=Nm(s);w.length>0&&(c.style=w);var E;return y1(y)&&(E=ms("generateAbstractTransformGrouping",{main:d,transform:y,containerWidth:d.width,iconWidth:d.width})),l.push(E||d.icon),{children:l,attributes:c}}}},i3={mixout:function(){return{layer:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.classes,d=c===void 0?[]:c;return Vm({type:"layer"},function(){cu("beforeDOMElementCreation",{assembler:r,params:l});var y=[];return r(function(s){Array.isArray(s)?s.map(function(w){y=y.concat(w.abstract)}):y=y.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(gn.familyPrefix,"-layers")].concat(Dm(d)).join(" ")},children:y}]})}}}},o3={mixout:function(){return{counter:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.title,d=c===void 0?null:c,y=l.classes,s=y===void 0?[]:y,w=l.attributes,E=w===void 0?{}:w,C=l.styles,S=C===void 0?{}:C;return Vm({type:"counter",content:r},function(){return cu("beforeDOMElementCreation",{content:r,params:l}),jM({content:r.toString(),title:d,extra:{attributes:E,styles:S,classes:["".concat(gn.familyPrefix,"-layers-counter")].concat(Dm(s))}})})}}}},a3={mixout:function(){return{text:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.transform,d=c===void 0?Ma:c,y=l.title,s=y===void 0?null:y,w=l.classes,E=w===void 0?[]:w,C=l.attributes,S=C===void 0?{}:C,P=l.styles,N=P===void 0?{}:P;return Vm({type:"text",content:r},function(){return cu("beforeDOMElementCreation",{content:r,params:l}),ob({content:r,transform:Yt(Yt({},Ma),d),title:s,extra:{attributes:S,styles:N,classes:["".concat(gn.familyPrefix,"-layers-text")].concat(Dm(E))}})})}}},provides:function(t){t.generateLayersText=function(r,l){var c=l.title,d=l.transform,y=l.extra,s=null,w=null;if(yS){var E=parseInt(getComputedStyle(r).fontSize,10),C=r.getBoundingClientRect();s=C.width/E,w=C.height/E}return gn.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([r,ob({content:r.innerHTML,width:s,height:w,transform:d,title:c,extra:y,watchable:!0})])}}},s3=new RegExp('"',"ug"),fb=[1105920,1112319];function l3(e){var t=e.replace(s3,""),r=wM(t,0),l=r>=fb[0]&&r<=fb[1],c=t.length===2?t[0]===t[1]:!1;return{value:E0(c?t[0]:t),isSecondary:l||c}}function db(e,t){var r="".concat(Yk).concat(t.replace(":","-"));return new Promise(function(l,c){if(e.getAttribute(r)!==null)return l();var d=qc(e.children),y=d.filter(function(F){return F.getAttribute(b0)===t})[0],s=cl.getComputedStyle(e,t),w=s.getPropertyValue("font-family").match(eM),E=s.getPropertyValue("font-weight"),C=s.getPropertyValue("content");if(y&&!w)return e.removeChild(y),l();if(w&&C!=="none"&&C!==""){var S=s.getPropertyValue("content"),P=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(w[2])?Hp[w[2].toLowerCase()]:tM[E],N=l3(S),ee=N.value,Y=N.isSecondary,W=w[0].startsWith("FontAwesome"),$=_1(P,ee),G=$;if(W){var V=CM(ee);V.iconName&&V.prefix&&($=V.iconName,P=V.prefix)}if($&&!Y&&(!y||y.getAttribute(d1)!==P||y.getAttribute(p1)!==G)){e.setAttribute(r,G),y&&e.removeChild(y);var re=JM(),H=re.extra;H.attributes[b0]=t,C0($,P).then(function(F){var b=w1(Yt(Yt({},re),{},{icons:{main:F,mask:x1()},prefix:P,iconName:G,extra:H,watchable:!0})),M=br.createElement("svg");t==="::before"?e.insertBefore(M,e.firstChild):e.appendChild(M),M.outerHTML=b.map(function(D){return Hf(D)}).join(`
`),e.removeAttribute(r),l()}).catch(c)}else l()}else l()})}function u3(e){return Promise.all([db(e,"::before"),db(e,"::after")])}function c3(e){return e.parentNode!==document.head&&!~qk.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(b0)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function pb(e){if(!!vs)return new Promise(function(t,r){var l=qc(e.querySelectorAll("*")).filter(c3).map(u3),c=b1.begin("searchPseudoElements");DS(),Promise.all(l).then(function(){c(),k0(),t()}).catch(function(){c(),k0(),r()})})}var h3={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=pb,r}}},provides:function(t){t.pseudoElements2svg=function(r){var l=r.node,c=l===void 0?br:l;gn.searchPseudoElements&&pb(c)}}},mb=!1,f3={mixout:function(){return{dom:{unwatch:function(){DS(),mb=!0}}}},hooks:function(){return{bootstrap:function(){ub(T0("mutationObserverCallbacks",{}))},noAuto:function(){XM()},watch:function(r){var l=r.observeMutationsRoot;mb?k0():ub(T0("mutationObserverCallbacks",{observeMutationsRoot:l}))}}}},gb=function(t){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(l,c){var d=c.toLowerCase().split("-"),y=d[0],s=d.slice(1).join("-");if(y&&s==="h")return l.flipX=!0,l;if(y&&s==="v")return l.flipY=!0,l;if(s=parseFloat(s),isNaN(s))return l;switch(y){case"grow":l.size=l.size+s;break;case"shrink":l.size=l.size-s;break;case"left":l.x=l.x-s;break;case"right":l.x=l.x+s;break;case"up":l.y=l.y-s;break;case"down":l.y=l.y+s;break;case"rotate":l.rotate=l.rotate+s;break}return l},r)},d3={mixout:function(){return{parse:{transform:function(r){return gb(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,l){var c=l.getAttribute("data-fa-transform");return c&&(r.transform=gb(c)),r}}},provides:function(t){t.generateAbstractTransformGrouping=function(r){var l=r.main,c=r.transform,d=r.containerWidth,y=r.iconWidth,s={transform:"translate(".concat(d/2," 256)")},w="translate(".concat(c.x*32,", ").concat(c.y*32,") "),E="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),C="rotate(".concat(c.rotate," 0 0)"),S={transform:"".concat(w," ").concat(E," ").concat(C)},P={transform:"translate(".concat(y/2*-1," -256)")},N={outer:s,inner:S,path:P};return{tag:"g",attributes:Yt({},N.outer),children:[{tag:"g",attributes:Yt({},N.inner),children:[{tag:l.icon.tag,children:l.icon.children,attributes:Yt(Yt({},l.icon.attributes),N.path)}]}]}}}},_y={x:0,y:0,width:"100%",height:"100%"};function yb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function p3(e){return e.tag==="g"?e.children:[e]}var m3={hooks:function(){return{parseNodeAttributes:function(r,l){var c=l.getAttribute("data-fa-mask"),d=c?$m(c.split(" ").map(function(y){return y.trim()})):x1();return d.prefix||(d.prefix=hl()),r.mask=d,r.maskId=l.getAttribute("data-fa-mask-id"),r}}},provides:function(t){t.generateAbstractMask=function(r){var l=r.children,c=r.attributes,d=r.main,y=r.mask,s=r.maskId,w=r.transform,E=d.width,C=d.icon,S=y.width,P=y.icon,N=dM({transform:w,containerWidth:S,iconWidth:E}),ee={tag:"rect",attributes:Yt(Yt({},_y),{},{fill:"white"})},Y=C.children?{children:C.children.map(yb)}:{},W={tag:"g",attributes:Yt({},N.inner),children:[yb(Yt({tag:C.tag,attributes:Yt(Yt({},C.attributes),N.path)},Y))]},$={tag:"g",attributes:Yt({},N.outer),children:[W]},G="mask-".concat(s||Rf()),V="clip-".concat(s||Rf()),re={tag:"mask",attributes:Yt(Yt({},_y),{},{id:G,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ee,$]},H={tag:"defs",children:[{tag:"clipPath",attributes:{id:V},children:p3(P)},re]};return l.push(H,{tag:"rect",attributes:Yt({fill:"currentColor","clip-path":"url(#".concat(V,")"),mask:"url(#".concat(G,")")},_y)}),{children:l,attributes:c}}}},g3={provides:function(t){var r=!1;cl.matchMedia&&(r=cl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var l=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};l.push({tag:"path",attributes:Yt(Yt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Yt(Yt({},d),{},{attributeName:"opacity"}),s={tag:"circle",attributes:Yt(Yt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||s.children.push({tag:"animate",attributes:Yt(Yt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Yt(Yt({},y),{},{values:"1;0;1;1;0;1;"})}),l.push(s),l.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:Yt(Yt({},y),{},{values:"1;0;0;0;0;1;"})}]}),r||l.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Yt(Yt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:l}}}},y3={hooks:function(){return{parseNodeAttributes:function(r,l){var c=l.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return r.symbol=d,r}}}},v3=[gM,r3,i3,o3,a3,h3,f3,d3,m3,g3,y3];MM(v3,{mixoutsTo:go});go.noAuto;go.config;go.library;go.dom;var M0=go.parse;go.findIconDefinition;go.toHtml;var _3=go.icon;go.layer;go.text;go.counter;var US={exports:{}},x3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",w3=x3,b3=w3;function $S(){}function VS(){}VS.resetWarningCache=$S;var E3=function(){function e(l,c,d,y,s,w){if(w!==b3){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:VS,resetWarningCache:$S};return r.PropTypes=r,r};US.exports=E3();var Zn=US.exports;function vb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,l)}return r}function Ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vb(Object(r),!0).forEach(function(l){vc(e,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vb(Object(r)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(r,l))})}return e}function Kp(e){return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function vc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S3(e,t){if(e==null)return{};var r={},l=Object.keys(e),c,d;for(d=0;d<l.length;d++)c=l[d],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function GS(e,t){if(e==null)return{};var r=S3(e,t),l,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)l=d[c],!(t.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,l)||(r[l]=e[l]))}return r}function z0(e){return T3(e)||A3(e)||I3(e)||C3()}function T3(e){if(Array.isArray(e))return O0(e)}function A3(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I3(e,t){if(!!e){if(typeof e=="string")return O0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O0(e,t)}}function O0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,l=new Array(t);r<t;r++)l[r]=e[r];return l}function C3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P3(e){var t,r=e.beat,l=e.fade,c=e.flash,d=e.spin,y=e.spinPulse,s=e.spinReverse,w=e.pulse,E=e.fixedWidth,C=e.inverse,S=e.border,P=e.listItem,N=e.flip,ee=e.size,Y=e.rotation,W=e.pull,$=(t={"fa-beat":r,"fa-fade":l,"fa-flash":c,"fa-spin":d,"fa-spin-reverse":s,"fa-spin-pulse":y,"fa-pulse":w,"fa-fw":E,"fa-inverse":C,"fa-border":S,"fa-li":P,"fa-flip-horizontal":N==="horizontal"||N==="both","fa-flip-vertical":N==="vertical"||N==="both"},vc(t,"fa-".concat(ee),typeof ee!="undefined"&&ee!==null),vc(t,"fa-rotate-".concat(Y),typeof Y!="undefined"&&Y!==null&&Y!==0),vc(t,"fa-pull-".concat(W),typeof W!="undefined"&&W!==null),vc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys($).map(function(G){return $[G]?G:null}).filter(function(G){return G})}function k3(e){return e=e-0,e===e}function WS(e){return k3(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,r){return r?r.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var M3=["style"];function z3(e){return e.charAt(0).toUpperCase()+e.slice(1)}function O3(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,r){var l=r.indexOf(":"),c=WS(r.slice(0,l)),d=r.slice(l+1).trim();return c.startsWith("webkit")?t[z3(c)]=d:t[c]=d,t},{})}function ZS(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var l=(t.children||[]).map(function(w){return ZS(e,w)}),c=Object.keys(t.attributes||{}).reduce(function(w,E){var C=t.attributes[E];switch(E){case"class":w.attrs.className=C,delete t.attributes.class;break;case"style":w.attrs.style=O3(C);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=C:w.attrs[WS(E)]=C}return w},{attrs:{}}),d=r.style,y=d===void 0?{}:d,s=GS(r,M3);return c.attrs.style=Ks(Ks({},c.attrs.style),y),e.apply(void 0,[t.tag,Ks(Ks({},c.attrs),s)].concat(z0(l)))}var HS=!1;try{HS=!0}catch{}function L3(){if(!HS&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function _b(e){if(e&&Kp(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(M0.icon)return M0.icon(e);if(e===null)return null;if(e&&Kp(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function xy(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?vc({},e,t):{}}var R3=["forwardedRef"];function Gm(e){var t=e.forwardedRef,r=GS(e,R3),l=r.icon,c=r.mask,d=r.symbol,y=r.className,s=r.title,w=r.titleId,E=_b(l),C=xy("classes",[].concat(z0(P3(r)),z0(y.split(" ")))),S=xy("transform",typeof r.transform=="string"?M0.transform(r.transform):r.transform),P=xy("mask",_b(c)),N=_3(E,Ks(Ks(Ks(Ks({},C),S),P),{},{symbol:d,title:s,titleId:w}));if(!N)return L3("Could not find icon",E),null;var ee=N.abstract,Y={ref:t};return Object.keys(r).forEach(function(W){Gm.defaultProps.hasOwnProperty(W)||(Y[W]=r[W])}),F3(ee[0],Y)}Gm.displayName="FontAwesomeIcon";Gm.propTypes={beat:Zn.bool,border:Zn.bool,className:Zn.string,fade:Zn.bool,flash:Zn.bool,mask:Zn.oneOfType([Zn.object,Zn.array,Zn.string]),fixedWidth:Zn.bool,inverse:Zn.bool,flip:Zn.oneOf(["horizontal","vertical","both"]),icon:Zn.oneOfType([Zn.object,Zn.array,Zn.string]),listItem:Zn.bool,pull:Zn.oneOf(["right","left"]),pulse:Zn.bool,rotation:Zn.oneOf([0,90,180,270]),size:Zn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Zn.bool,spinPulse:Zn.bool,spinReverse:Zn.bool,symbol:Zn.oneOfType([Zn.bool,Zn.string]),title:Zn.string,transform:Zn.oneOfType([Zn.string,Zn.object]),swapOpacity:Zn.bool};Gm.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var F3=ZS.bind(null,yC.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var B3={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},_L=B3,xL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},wL={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function Xh(e,t,r){return parseInt(e.substr(t,r),16)}function XS(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function wy(e,t,r){return r=r<0?r+6:r>6?r-6:r,XS(255*(r<1?e+(t-e)*r:r<3?t:r<4?e+(t-e)*(4-r):e))}function j3(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const r=e.length;if(r<6){const l=e[1],c=e[2],d=e[3],y=e[4]||"";t="#"+l+l+c+c+d+d+y+y}return(r==7||r>8)&&(t=e),t}}function D3(e,t,r){let l;if(t==0){const c=XS(r*255);l=c+c+c}else{const c=r<=.5?r*(t+1):r+t-r*t,d=r*2-c;l=wy(d,c,e*6+2)+wy(d,c,e*6)+wy(d,c,e*6-2)}return"#"+l}function Uh(e,t,r){const l=[.55,.5,.5,.46,.6,.55,.55],c=l[e*6+.5|0];return r=r<.5?r*c*2:c+(r-.5)*(1-c)*2,D3(e,t,r)}const N3=typeof window!="undefined"?window:typeof self!="undefined"?self:typeof global!="undefined"?global:{},xb={V:"jdenticon_config",n:"config"};var U3={};function $3(e,t){const r=typeof e=="object"&&e||U3[xb.n]||N3[xb.V]||{},l=r.lightness||{},c=r.saturation||{},d="color"in c?c.color:c,y=c.grayscale,s=r.backColor,w=r.padding;function E(S,P){let N=l[S];return N&&N.length>1||(N=P),function(ee){return ee=N[0]+ee*(N[1]-N[0]),ee<0?0:ee>1?1:ee}}function C(S){const P=r.hues;let N;return P&&P.length>0&&(N=P[0|.999*S*P.length]),typeof N=="number"?(N/360%1+1)%1:S}return{W:C,o:typeof d=="number"?d:.5,D:typeof y=="number"?y:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:j3(s),X:typeof e=="number"?e:typeof w=="number"?w:t}}class Vd{constructor(t,r){this.x=t,this.y=r}}class YS{constructor(t,r,l,c){this.q=t,this.t=r,this.H=l,this.Y=c}I(t,r,l,c){const d=this.q+this.H,y=this.t+this.H,s=this.Y;return s===1?new Vd(d-r-(c||0),this.t+t):s===2?new Vd(d-t-(l||0),y-r-(c||0)):s===3?new Vd(this.q+r,y-t-(l||0)):new Vd(this.q+t,this.t+r)}}const V3=new YS(0,0,0,0);class G3{constructor(t){this.J=t,this.u=V3}g(t,r){const l=r?-2:2,c=[];for(let d=r?t.length-2:0;d<t.length&&d>=0;d+=l)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,r,l,c){const d=this.u.I(t,r,l,l);this.J.h(d,l,c)}i(t,r,l,c,d){this.g([t,r,t+l,r,t+l,r+c,t,r+c],d)}j(t,r,l,c,d,y){const s=[t+l,r,t+l,r+c,t,r+c,t,r];s.splice((d||0)%4*2,2),this.g(s,y)}K(t,r,l,c,d){this.g([t+l/2,r,t+l,r+c/2,t+l/2,r+c,t,r+c/2],d)}}function W3(e,t,r,l){e=e%14;let c,d,y,s,w,E;e?e==1?(y=0|r*.5,s=0|r*.8,t.j(r-y,0,y,s,2)):e==2?(y=0|r/3,t.i(y,y,r-y,r-y)):e==3?(w=r*.1,E=r<6?1:r<8?2:0|r*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,r-w-E,r-w-E)):e==4?(d=0|r*.15,y=0|r*.5,t.h(r-y-d,r-y-d,y)):e==5?(w=r*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,r,r),t.g([E,E,r-w,E,E+(r-E-w)/2,r-w],!0)):e==6?t.g([0,0,r,0,r,r*.7,r*.4,r*.4,r*.7,r,0,r]):e==7?t.j(r/2,r/2,r/2,r/2,3):e==8?(t.i(0,0,r,r/2),t.i(0,r/2,r/2,r/2),t.j(r/2,r/2,r/2,r/2,1)):e==9?(w=r*.14,E=r<4?1:r<6?2:0|r*.35,w=r<8?w:0|w,t.i(0,0,r,r),t.i(E,E,r-E-w,r-E-w,!0)):e==10?(w=r*.12,E=w*3,t.i(0,0,r,r),t.h(E,E,r-w-E,!0)):e==11?t.j(r/2,r/2,r/2,r/2,3):e==12?(d=r*.25,t.i(0,0,r,r),t.K(d,d,r-d,r-d,!0)):!l&&(d=r*.4,y=r*1.2,t.h(d,d,y)):(c=r*.42,t.g([0,0,r,0,r,r-c*2,r-c,r,0,r]))}function wb(e,t,r){e=e%4;let l;e?e==1?t.j(0,r/2,r,r/2,0):e==2?t.K(0,0,r,r):(l=r/6,t.h(l,l,r-2*l)):t.j(0,0,r,r,0)}function Z3(e,t){return e=t.W(e),[Uh(e,t.D,t.F(0)),Uh(e,t.o,t.p(.5)),Uh(e,t.D,t.F(1)),Uh(e,t.o,t.p(1)),Uh(e,t.o,t.p(0))]}function H3(e,t,r){const l=$3(r,.08);l.G&&e.m(l.G);let c=e.k;const d=.5+c*l.X|0;c-=d*2;const y=new G3(e),s=0|c/4,w=0|d+c/2-s*2,E=0|d+c/2-s*2;function C(W,$,G,V,re){const H=Xh(t,G,1);let F=V?Xh(t,V,1):0;e.L(P[N[W]]);for(let b=0;b<re.length;b++)y.u=new YS(w+re[b][0]*s,E+re[b][1]*s,s,F++%4),$(H,y,s,b);e.M()}const S=Xh(t,-7)/268435455,P=Z3(S,l),N=[];let ee;function Y(W){if(W.indexOf(ee)>=0){for(let $=0;$<W.length;$++)if(N.indexOf(W[$])>=0)return!0}}for(let W=0;W<3;W++)ee=Xh(t,8+W,1)%P.length,(Y([0,4])||Y([2,3]))&&(ee=1),N.push(ee);C(0,wb,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),C(1,wb,4,5,[[0,0],[3,0],[3,3],[0,3]]),C(2,W3,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function X3(e){var l=0,c=0,d=encodeURI(e)+"%80",y=[],s,w=[],E=1732584193,C=4023233417,S=~E,P=~C,N=3285377520,ee=[E,C,S,P,N],Y=0,W="";function $(G,V){return G<<V|G>>>32-V}for(;l<d.length;c++)y[c>>2]=y[c>>2]|(d[l]=="%"?parseInt(d.substring(l+1,l+=3),16):d.charCodeAt(l++))<<(3-(c&3))*8;for(s=((c+7>>6)+1)*16,y[s-1]=c*8-8;Y<s;Y+=16){for(l=0;l<80;l++)c=$(E,5)+N+(l<20?(C&S^~C&P)+1518500249:l<40?(C^S^P)+1859775393:l<60?(C&S^C&P^S&P)+2400959708:(C^S^P)+3395469782)+(w[l]=l<16?y[Y+l]|0:$(w[l-3]^w[l-8]^w[l-14]^w[l-16],1)),N=P,P=S,S=$(C,30),C=E,E=c;ee[0]=E=ee[0]+E|0,ee[1]=C=ee[1]+C|0,ee[2]=S=ee[2]+S|0,ee[3]=P=ee[3]+P|0,ee[4]=N=ee[4]+N|0}for(l=0;l<40;l++)W+=(ee[l>>3]>>>(7-(l&7))*4&15).toString(16);return W}function Y3(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function K3(e){return X3(e==null?"":""+e)}function tc(e){return(e*10+.5|0)/10}class q3{constructor(){this.v=""}g(t){let r="";for(let l=0;l<t.length;l++)r+=(l?"L":"M")+tc(t[l].x)+" "+tc(t[l].y);this.v+=r+"Z"}h(t,r,l){const c=l?0:1,d=tc(r/2),y=tc(r),s="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+tc(t.x)+" "+tc(t.y+r/2)+s+y+",0"+s+-y+",0"}}class J3{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const r=/^(#......)(..)?/.exec(t),l=r[2]?Xh(r[2],0)/255:1;this.N.m(r[1],l)}L(t){this.A=this.B[t]||(this.B[t]=new q3)}M(){}g(t){this.A.g(t)}h(t,r,l){this.A.h(t,r,l)}finish(){const t=this.B;for(let r in t)t.hasOwnProperty(r)&&this.N.O(r,t[r].v)}}const Q3={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class e4{constructor(t){this.k=t,this.C='<svg xmlns="'+Q3.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,r){r&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+r.toFixed(2)+'"/>')}O(t,r){this.C+='<path fill="'+t+'" d="'+r+'"/>'}toString(){return this.C+"</svg>"}}function bL(e,t,r){const l=new e4(t);return H3(new J3(l),Y3(e)||K3(e),r),l.toString()}typeof document!="undefined"&&document.querySelectorAll.bind(document);var t4={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(l,c,d){function y(E,C){if(!c[E]){if(!l[E]){var S=typeof Pd=="function"&&Pd;if(!C&&S)return S(E,!0);if(s)return s(E,!0);var P=new Error("Cannot find module '"+E+"'");throw P.code="MODULE_NOT_FOUND",P}var N=c[E]={exports:{}};l[E][0].call(N.exports,function(ee){var Y=l[E][1][ee];return y(Y||ee)},N,N.exports,r,l,c,d)}return c[E].exports}for(var s=typeof Pd=="function"&&Pd,w=0;w<d.length;w++)y(d[w]);return y}return r}()({1:[function(r,l,c){c.byteLength=P,c.toByteArray=ee,c.fromByteArray=$;for(var d=[],y=[],s=typeof Uint8Array!="undefined"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,C=w.length;E<C;++E)d[E]=w[E],y[w.charCodeAt(E)]=E;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function S(G){var V=G.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var re=G.indexOf("=");re===-1&&(re=V);var H=re===V?0:4-re%4;return[re,H]}function P(G){var V=S(G),re=V[0],H=V[1];return(re+H)*3/4-H}function N(G,V,re){return(V+re)*3/4-re}function ee(G){var V,re=S(G),H=re[0],F=re[1],b=new s(N(G,H,F)),M=0,D=F>0?H-4:H,q;for(q=0;q<D;q+=4)V=y[G.charCodeAt(q)]<<18|y[G.charCodeAt(q+1)]<<12|y[G.charCodeAt(q+2)]<<6|y[G.charCodeAt(q+3)],b[M++]=V>>16&255,b[M++]=V>>8&255,b[M++]=V&255;return F===2&&(V=y[G.charCodeAt(q)]<<2|y[G.charCodeAt(q+1)]>>4,b[M++]=V&255),F===1&&(V=y[G.charCodeAt(q)]<<10|y[G.charCodeAt(q+1)]<<4|y[G.charCodeAt(q+2)]>>2,b[M++]=V>>8&255,b[M++]=V&255),b}function Y(G){return d[G>>18&63]+d[G>>12&63]+d[G>>6&63]+d[G&63]}function W(G,V,re){for(var H,F=[],b=V;b<re;b+=3)H=(G[b]<<16&16711680)+(G[b+1]<<8&65280)+(G[b+2]&255),F.push(Y(H));return F.join("")}function $(G){for(var V,re=G.length,H=re%3,F=[],b=16383,M=0,D=re-H;M<D;M+=b)F.push(W(G,M,M+b>D?D:M+b));return H===1?(V=G[re-1],F.push(d[V>>2]+d[V<<4&63]+"==")):H===2&&(V=(G[re-2]<<8)+G[re-1],F.push(d[V>>10]+d[V>>4&63]+d[V<<2&63]+"=")),F.join("")}},{}],2:[function(r,l,c){(function(d){(function(){var y=r("base64-js"),s=r("ieee754");c.Buffer=S,c.SlowBuffer=H,c.INSPECT_MAX_BYTES=50;var w=2147483647;c.kMaxLength=w,S.TYPED_ARRAY_SUPPORT=E(),!S.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var ge=new Uint8Array(1);return ge.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ge.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(!!S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(!!S.isBuffer(this))return this.byteOffset}});function C(ge){if(ge>w)throw new RangeError('The value "'+ge+'" is invalid for option "size"');var L=new Uint8Array(ge);return L.__proto__=S.prototype,L}function S(ge,L,R){if(typeof ge=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Y(ge)}return P(ge,L,R)}typeof Symbol!="undefined"&&Symbol.species!=null&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),S.poolSize=8192;function P(ge,L,R){if(typeof ge=="string")return W(ge,L);if(ArrayBuffer.isView(ge))return $(ge);if(ge==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(nn(ge,ArrayBuffer)||ge&&nn(ge.buffer,ArrayBuffer))return G(ge,L,R);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=ge.valueOf&&ge.valueOf();if(me!=null&&me!==ge)return S.from(me,L,R);var Oe=V(ge);if(Oe)return Oe;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return S.from(ge[Symbol.toPrimitive]("string"),L,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}S.from=function(ge,L,R){return P(ge,L,R)},S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array;function N(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function ee(ge,L,R){return N(ge),ge<=0?C(ge):L!==void 0?typeof R=="string"?C(ge).fill(L,R):C(ge).fill(L):C(ge)}S.alloc=function(ge,L,R){return ee(ge,L,R)};function Y(ge){return N(ge),C(ge<0?0:re(ge)|0)}S.allocUnsafe=function(ge){return Y(ge)},S.allocUnsafeSlow=function(ge){return Y(ge)};function W(ge,L){if((typeof L!="string"||L==="")&&(L="utf8"),!S.isEncoding(L))throw new TypeError("Unknown encoding: "+L);var R=F(ge,L)|0,me=C(R),Oe=me.write(ge,L);return Oe!==R&&(me=me.slice(0,Oe)),me}function $(ge){for(var L=ge.length<0?0:re(ge.length)|0,R=C(L),me=0;me<L;me+=1)R[me]=ge[me]&255;return R}function G(ge,L,R){if(L<0||ge.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<L+(R||0))throw new RangeError('"length" is outside of buffer bounds');var me;return L===void 0&&R===void 0?me=new Uint8Array(ge):R===void 0?me=new Uint8Array(ge,L):me=new Uint8Array(ge,L,R),me.__proto__=S.prototype,me}function V(ge){if(S.isBuffer(ge)){var L=re(ge.length)|0,R=C(L);return R.length===0||ge.copy(R,0,0,L),R}if(ge.length!==void 0)return typeof ge.length!="number"||Pn(ge.length)?C(0):$(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return $(ge.data)}function re(ge){if(ge>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return ge|0}function H(ge){return+ge!=ge&&(ge=0),S.alloc(+ge)}S.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==S.prototype},S.compare=function(L,R){if(nn(L,Uint8Array)&&(L=S.from(L,L.offset,L.byteLength)),nn(R,Uint8Array)&&(R=S.from(R,R.offset,R.byteLength)),!S.isBuffer(L)||!S.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===R)return 0;for(var me=L.length,Oe=R.length,Ke=0,at=Math.min(me,Oe);Ke<at;++Ke)if(L[Ke]!==R[Ke]){me=L[Ke],Oe=R[Ke];break}return me<Oe?-1:Oe<me?1:0},S.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(L,R){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return S.alloc(0);var me;if(R===void 0)for(R=0,me=0;me<L.length;++me)R+=L[me].length;var Oe=S.allocUnsafe(R),Ke=0;for(me=0;me<L.length;++me){var at=L[me];if(nn(at,Uint8Array)&&(at=S.from(at)),!S.isBuffer(at))throw new TypeError('"list" argument must be an Array of Buffers');at.copy(Oe,Ke),Ke+=at.length}return Oe};function F(ge,L){if(S.isBuffer(ge))return ge.length;if(ArrayBuffer.isView(ge)||nn(ge,ArrayBuffer))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);var R=ge.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&R===0)return 0;for(var Oe=!1;;)switch(L){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return qt(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return En(ge).length;default:if(Oe)return me?-1:qt(ge).length;L=(""+L).toLowerCase(),Oe=!0}}S.byteLength=F;function b(ge,L,R){var me=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,L>>>=0,R<=L))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return be(this,L,R);case"utf8":case"utf-8":return ue(this,L,R);case"ascii":return ce(this,L,R);case"latin1":case"binary":return ke(this,L,R);case"base64":return oe(this,L,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,L,R);default:if(me)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),me=!0}}S.prototype._isBuffer=!0;function M(ge,L,R){var me=ge[L];ge[L]=ge[R],ge[R]=me}S.prototype.swap16=function(){var L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<L;R+=2)M(this,R,R+1);return this},S.prototype.swap32=function(){var L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<L;R+=4)M(this,R,R+3),M(this,R+1,R+2);return this},S.prototype.swap64=function(){var L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<L;R+=8)M(this,R,R+7),M(this,R+1,R+6),M(this,R+2,R+5),M(this,R+3,R+4);return this},S.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?ue(this,0,L):b.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(L){if(!S.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:S.compare(this,L)===0},S.prototype.inspect=function(){var L="",R=c.INSPECT_MAX_BYTES;return L=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(L+=" ... "),"<Buffer "+L+">"},S.prototype.compare=function(L,R,me,Oe,Ke){if(nn(L,Uint8Array)&&(L=S.from(L,L.offset,L.byteLength)),!S.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(R===void 0&&(R=0),me===void 0&&(me=L?L.length:0),Oe===void 0&&(Oe=0),Ke===void 0&&(Ke=this.length),R<0||me>L.length||Oe<0||Ke>this.length)throw new RangeError("out of range index");if(Oe>=Ke&&R>=me)return 0;if(Oe>=Ke)return-1;if(R>=me)return 1;if(R>>>=0,me>>>=0,Oe>>>=0,Ke>>>=0,this===L)return 0;for(var at=Ke-Oe,se=me-R,T=Math.min(at,se),z=this.slice(Oe,Ke),we=L.slice(R,me),De=0;De<T;++De)if(z[De]!==we[De]){at=z[De],se=we[De];break}return at<se?-1:se<at?1:0};function D(ge,L,R,me,Oe){if(ge.length===0)return-1;if(typeof R=="string"?(me=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Pn(R)&&(R=Oe?0:ge.length-1),R<0&&(R=ge.length+R),R>=ge.length){if(Oe)return-1;R=ge.length-1}else if(R<0)if(Oe)R=0;else return-1;if(typeof L=="string"&&(L=S.from(L,me)),S.isBuffer(L))return L.length===0?-1:q(ge,L,R,me,Oe);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?Oe?Uint8Array.prototype.indexOf.call(ge,L,R):Uint8Array.prototype.lastIndexOf.call(ge,L,R):q(ge,[L],R,me,Oe);throw new TypeError("val must be string, number or Buffer")}function q(ge,L,R,me,Oe){var Ke=1,at=ge.length,se=L.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(ge.length<2||L.length<2)return-1;Ke=2,at/=2,se/=2,R/=2}function T(Qe,$t){return Ke===1?Qe[$t]:Qe.readUInt16BE($t*Ke)}var z;if(Oe){var we=-1;for(z=R;z<at;z++)if(T(ge,z)===T(L,we===-1?0:z-we)){if(we===-1&&(we=z),z-we+1===se)return we*Ke}else we!==-1&&(z-=z-we),we=-1}else for(R+se>at&&(R=at-se),z=R;z>=0;z--){for(var De=!0,Xe=0;Xe<se;Xe++)if(T(ge,z+Xe)!==T(L,Xe)){De=!1;break}if(De)return z}return-1}S.prototype.includes=function(L,R,me){return this.indexOf(L,R,me)!==-1},S.prototype.indexOf=function(L,R,me){return D(this,L,R,me,!0)},S.prototype.lastIndexOf=function(L,R,me){return D(this,L,R,me,!1)};function K(ge,L,R,me){R=Number(R)||0;var Oe=ge.length-R;me?(me=Number(me),me>Oe&&(me=Oe)):me=Oe;var Ke=L.length;me>Ke/2&&(me=Ke/2);for(var at=0;at<me;++at){var se=parseInt(L.substr(at*2,2),16);if(Pn(se))return at;ge[R+at]=se}return at}function de(ge,L,R,me){return _n(qt(L,ge.length-R),ge,R,me)}function ye(ge,L,R,me){return _n(Bt(L),ge,R,me)}function xe(ge,L,R,me){return ye(ge,L,R,me)}function te(ge,L,R,me){return _n(En(L),ge,R,me)}function ae(ge,L,R,me){return _n(ln(L,ge.length-R),ge,R,me)}S.prototype.write=function(L,R,me,Oe){if(R===void 0)Oe="utf8",me=this.length,R=0;else if(me===void 0&&typeof R=="string")Oe=R,me=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(me)?(me=me>>>0,Oe===void 0&&(Oe="utf8")):(Oe=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ke=this.length-R;if((me===void 0||me>Ke)&&(me=Ke),L.length>0&&(me<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");for(var at=!1;;)switch(Oe){case"hex":return K(this,L,R,me);case"utf8":case"utf-8":return de(this,L,R,me);case"ascii":return ye(this,L,R,me);case"latin1":case"binary":return xe(this,L,R,me);case"base64":return te(this,L,R,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,L,R,me);default:if(at)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),at=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function oe(ge,L,R){return L===0&&R===ge.length?y.fromByteArray(ge):y.fromByteArray(ge.slice(L,R))}function ue(ge,L,R){R=Math.min(ge.length,R);for(var me=[],Oe=L;Oe<R;){var Ke=ge[Oe],at=null,se=Ke>239?4:Ke>223?3:Ke>191?2:1;if(Oe+se<=R){var T,z,we,De;switch(se){case 1:Ke<128&&(at=Ke);break;case 2:T=ge[Oe+1],(T&192)===128&&(De=(Ke&31)<<6|T&63,De>127&&(at=De));break;case 3:T=ge[Oe+1],z=ge[Oe+2],(T&192)===128&&(z&192)===128&&(De=(Ke&15)<<12|(T&63)<<6|z&63,De>2047&&(De<55296||De>57343)&&(at=De));break;case 4:T=ge[Oe+1],z=ge[Oe+2],we=ge[Oe+3],(T&192)===128&&(z&192)===128&&(we&192)===128&&(De=(Ke&15)<<18|(T&63)<<12|(z&63)<<6|we&63,De>65535&&De<1114112&&(at=De))}}at===null?(at=65533,se=1):at>65535&&(at-=65536,me.push(at>>>10&1023|55296),at=56320|at&1023),me.push(at),Oe+=se}return Pe(me)}var Ee=4096;function Pe(ge){var L=ge.length;if(L<=Ee)return String.fromCharCode.apply(String,ge);for(var R="",me=0;me<L;)R+=String.fromCharCode.apply(String,ge.slice(me,me+=Ee));return R}function ce(ge,L,R){var me="";R=Math.min(ge.length,R);for(var Oe=L;Oe<R;++Oe)me+=String.fromCharCode(ge[Oe]&127);return me}function ke(ge,L,R){var me="";R=Math.min(ge.length,R);for(var Oe=L;Oe<R;++Oe)me+=String.fromCharCode(ge[Oe]);return me}function be(ge,L,R){var me=ge.length;(!L||L<0)&&(L=0),(!R||R<0||R>me)&&(R=me);for(var Oe="",Ke=L;Ke<R;++Ke)Oe+=At(ge[Ke]);return Oe}function Ie(ge,L,R){for(var me=ge.slice(L,R),Oe="",Ke=0;Ke<me.length;Ke+=2)Oe+=String.fromCharCode(me[Ke]+me[Ke+1]*256);return Oe}S.prototype.slice=function(L,R){var me=this.length;L=~~L,R=R===void 0?me:~~R,L<0?(L+=me,L<0&&(L=0)):L>me&&(L=me),R<0?(R+=me,R<0&&(R=0)):R>me&&(R=me),R<L&&(R=L);var Oe=this.subarray(L,R);return Oe.__proto__=S.prototype,Oe};function Be(ge,L,R){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+L>R)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(L,R,me){L=L>>>0,R=R>>>0,me||Be(L,R,this.length);for(var Oe=this[L],Ke=1,at=0;++at<R&&(Ke*=256);)Oe+=this[L+at]*Ke;return Oe},S.prototype.readUIntBE=function(L,R,me){L=L>>>0,R=R>>>0,me||Be(L,R,this.length);for(var Oe=this[L+--R],Ke=1;R>0&&(Ke*=256);)Oe+=this[L+--R]*Ke;return Oe},S.prototype.readUInt8=function(L,R){return L=L>>>0,R||Be(L,1,this.length),this[L]},S.prototype.readUInt16LE=function(L,R){return L=L>>>0,R||Be(L,2,this.length),this[L]|this[L+1]<<8},S.prototype.readUInt16BE=function(L,R){return L=L>>>0,R||Be(L,2,this.length),this[L]<<8|this[L+1]},S.prototype.readUInt32LE=function(L,R){return L=L>>>0,R||Be(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},S.prototype.readUInt32BE=function(L,R){return L=L>>>0,R||Be(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},S.prototype.readIntLE=function(L,R,me){L=L>>>0,R=R>>>0,me||Be(L,R,this.length);for(var Oe=this[L],Ke=1,at=0;++at<R&&(Ke*=256);)Oe+=this[L+at]*Ke;return Ke*=128,Oe>=Ke&&(Oe-=Math.pow(2,8*R)),Oe},S.prototype.readIntBE=function(L,R,me){L=L>>>0,R=R>>>0,me||Be(L,R,this.length);for(var Oe=R,Ke=1,at=this[L+--Oe];Oe>0&&(Ke*=256);)at+=this[L+--Oe]*Ke;return Ke*=128,at>=Ke&&(at-=Math.pow(2,8*R)),at},S.prototype.readInt8=function(L,R){return L=L>>>0,R||Be(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},S.prototype.readInt16LE=function(L,R){L=L>>>0,R||Be(L,2,this.length);var me=this[L]|this[L+1]<<8;return me&32768?me|4294901760:me},S.prototype.readInt16BE=function(L,R){L=L>>>0,R||Be(L,2,this.length);var me=this[L+1]|this[L]<<8;return me&32768?me|4294901760:me},S.prototype.readInt32LE=function(L,R){return L=L>>>0,R||Be(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},S.prototype.readInt32BE=function(L,R){return L=L>>>0,R||Be(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},S.prototype.readFloatLE=function(L,R){return L=L>>>0,R||Be(L,4,this.length),s.read(this,L,!0,23,4)},S.prototype.readFloatBE=function(L,R){return L=L>>>0,R||Be(L,4,this.length),s.read(this,L,!1,23,4)},S.prototype.readDoubleLE=function(L,R){return L=L>>>0,R||Be(L,8,this.length),s.read(this,L,!0,52,8)},S.prototype.readDoubleBE=function(L,R){return L=L>>>0,R||Be(L,8,this.length),s.read(this,L,!1,52,8)};function Ze(ge,L,R,me,Oe,Ke){if(!S.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Oe||L<Ke)throw new RangeError('"value" argument is out of bounds');if(R+me>ge.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(L,R,me,Oe){if(L=+L,R=R>>>0,me=me>>>0,!Oe){var Ke=Math.pow(2,8*me)-1;Ze(this,L,R,me,Ke,0)}var at=1,se=0;for(this[R]=L&255;++se<me&&(at*=256);)this[R+se]=L/at&255;return R+me},S.prototype.writeUIntBE=function(L,R,me,Oe){if(L=+L,R=R>>>0,me=me>>>0,!Oe){var Ke=Math.pow(2,8*me)-1;Ze(this,L,R,me,Ke,0)}var at=me-1,se=1;for(this[R+at]=L&255;--at>=0&&(se*=256);)this[R+at]=L/se&255;return R+me},S.prototype.writeUInt8=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,1,255,0),this[R]=L&255,R+1},S.prototype.writeUInt16LE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,2,65535,0),this[R]=L&255,this[R+1]=L>>>8,R+2},S.prototype.writeUInt16BE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,2,65535,0),this[R]=L>>>8,this[R+1]=L&255,R+2},S.prototype.writeUInt32LE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,4,4294967295,0),this[R+3]=L>>>24,this[R+2]=L>>>16,this[R+1]=L>>>8,this[R]=L&255,R+4},S.prototype.writeUInt32BE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,4,4294967295,0),this[R]=L>>>24,this[R+1]=L>>>16,this[R+2]=L>>>8,this[R+3]=L&255,R+4},S.prototype.writeIntLE=function(L,R,me,Oe){if(L=+L,R=R>>>0,!Oe){var Ke=Math.pow(2,8*me-1);Ze(this,L,R,me,Ke-1,-Ke)}var at=0,se=1,T=0;for(this[R]=L&255;++at<me&&(se*=256);)L<0&&T===0&&this[R+at-1]!==0&&(T=1),this[R+at]=(L/se>>0)-T&255;return R+me},S.prototype.writeIntBE=function(L,R,me,Oe){if(L=+L,R=R>>>0,!Oe){var Ke=Math.pow(2,8*me-1);Ze(this,L,R,me,Ke-1,-Ke)}var at=me-1,se=1,T=0;for(this[R+at]=L&255;--at>=0&&(se*=256);)L<0&&T===0&&this[R+at+1]!==0&&(T=1),this[R+at]=(L/se>>0)-T&255;return R+me},S.prototype.writeInt8=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,1,127,-128),L<0&&(L=255+L+1),this[R]=L&255,R+1},S.prototype.writeInt16LE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,2,32767,-32768),this[R]=L&255,this[R+1]=L>>>8,R+2},S.prototype.writeInt16BE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,2,32767,-32768),this[R]=L>>>8,this[R+1]=L&255,R+2},S.prototype.writeInt32LE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,4,2147483647,-2147483648),this[R]=L&255,this[R+1]=L>>>8,this[R+2]=L>>>16,this[R+3]=L>>>24,R+4},S.prototype.writeInt32BE=function(L,R,me){return L=+L,R=R>>>0,me||Ze(this,L,R,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[R]=L>>>24,this[R+1]=L>>>16,this[R+2]=L>>>8,this[R+3]=L&255,R+4};function et(ge,L,R,me,Oe,Ke){if(R+me>ge.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function tt(ge,L,R,me,Oe){return L=+L,R=R>>>0,Oe||et(ge,L,R,4),s.write(ge,L,R,me,23,4),R+4}S.prototype.writeFloatLE=function(L,R,me){return tt(this,L,R,!0,me)},S.prototype.writeFloatBE=function(L,R,me){return tt(this,L,R,!1,me)};function ct(ge,L,R,me,Oe){return L=+L,R=R>>>0,Oe||et(ge,L,R,8),s.write(ge,L,R,me,52,8),R+8}S.prototype.writeDoubleLE=function(L,R,me){return ct(this,L,R,!0,me)},S.prototype.writeDoubleBE=function(L,R,me){return ct(this,L,R,!1,me)},S.prototype.copy=function(L,R,me,Oe){if(!S.isBuffer(L))throw new TypeError("argument should be a Buffer");if(me||(me=0),!Oe&&Oe!==0&&(Oe=this.length),R>=L.length&&(R=L.length),R||(R=0),Oe>0&&Oe<me&&(Oe=me),Oe===me||L.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),L.length-R<Oe-me&&(Oe=L.length-R+me);var Ke=Oe-me;if(this===L&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,me,Oe);else if(this===L&&me<R&&R<Oe)for(var at=Ke-1;at>=0;--at)L[at+R]=this[at+me];else Uint8Array.prototype.set.call(L,this.subarray(me,Oe),R);return Ke},S.prototype.fill=function(L,R,me,Oe){if(typeof L=="string"){if(typeof R=="string"?(Oe=R,R=0,me=this.length):typeof me=="string"&&(Oe=me,me=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!S.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(L.length===1){var Ke=L.charCodeAt(0);(Oe==="utf8"&&Ke<128||Oe==="latin1")&&(L=Ke)}}else typeof L=="number"&&(L=L&255);if(R<0||this.length<R||this.length<me)throw new RangeError("Out of range index");if(me<=R)return this;R=R>>>0,me=me===void 0?this.length:me>>>0,L||(L=0);var at;if(typeof L=="number")for(at=R;at<me;++at)this[at]=L;else{var se=S.isBuffer(L)?L:S.from(L,Oe),T=se.length;if(T===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(at=0;at<me-R;++at)this[at+R]=se[at%T]}return this};var St=/[^+/0-9A-Za-z-_]/g;function ft(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(St,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function At(ge){return ge<16?"0"+ge.toString(16):ge.toString(16)}function qt(ge,L){L=L||1/0;for(var R,me=ge.length,Oe=null,Ke=[],at=0;at<me;++at){if(R=ge.charCodeAt(at),R>55295&&R<57344){if(!Oe){if(R>56319){(L-=3)>-1&&Ke.push(239,191,189);continue}else if(at+1===me){(L-=3)>-1&&Ke.push(239,191,189);continue}Oe=R;continue}if(R<56320){(L-=3)>-1&&Ke.push(239,191,189),Oe=R;continue}R=(Oe-55296<<10|R-56320)+65536}else Oe&&(L-=3)>-1&&Ke.push(239,191,189);if(Oe=null,R<128){if((L-=1)<0)break;Ke.push(R)}else if(R<2048){if((L-=2)<0)break;Ke.push(R>>6|192,R&63|128)}else if(R<65536){if((L-=3)<0)break;Ke.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((L-=4)<0)break;Ke.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Ke}function Bt(ge){for(var L=[],R=0;R<ge.length;++R)L.push(ge.charCodeAt(R)&255);return L}function ln(ge,L){for(var R,me,Oe,Ke=[],at=0;at<ge.length&&!((L-=2)<0);++at)R=ge.charCodeAt(at),me=R>>8,Oe=R%256,Ke.push(Oe),Ke.push(me);return Ke}function En(ge){return y.toByteArray(ft(ge))}function _n(ge,L,R,me){for(var Oe=0;Oe<me&&!(Oe+R>=L.length||Oe>=ge.length);++Oe)L[Oe+R]=ge[Oe];return Oe}function nn(ge,L){return ge instanceof L||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===L.name}function Pn(ge){return ge!==ge}}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(r,l,c){const d=r("./validator"),y=r("./xmlparser/XMLParser"),s=r("./xmlbuilder/json2xml");l.exports={XMLParser:y,XMLValidator:d,XMLBuilder:s}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(r,l,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s="["+d+"]["+y+"]*",w=new RegExp("^"+s+"$"),E=function(S,P){const N=[];let ee=P.exec(S);for(;ee;){const Y=[];Y.startIndex=P.lastIndex-ee[0].length;const W=ee.length;for(let $=0;$<W;$++)Y.push(ee[$]);N.push(Y),ee=P.exec(S)}return N},C=function(S){const P=w.exec(S);return!(P===null||typeof P=="undefined")};c.isExist=function(S){return typeof S!="undefined"},c.isEmptyObject=function(S){return Object.keys(S).length===0},c.merge=function(S,P,N){if(P){const ee=Object.keys(P),Y=ee.length;for(let W=0;W<Y;W++)N==="strict"?S[ee[W]]=[P[ee[W]]]:S[ee[W]]=P[ee[W]]}},c.getValue=function(S){return c.isExist(S)?S:""},c.isName=C,c.getAllMatches=E,c.nameRegexp=s},{}],5:[function(r,l,c){const d=r("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(F,b){b=Object.assign({},y,b);const M=[];let D=!1,q=!1;F[0]==="\uFEFF"&&(F=F.substr(1));for(let K=0;K<F.length;K++)if(F[K]==="<"&&F[K+1]==="?"){if(K+=2,K=w(F,K),K.err)return K}else if(F[K]==="<"){let de=K;if(K++,F[K]==="!"){K=E(F,K);continue}else{let ye=!1;F[K]==="/"&&(ye=!0,K++);let xe="";for(;K<F.length&&F[K]!==">"&&F[K]!==" "&&F[K]!=="	"&&F[K]!==`
`&&F[K]!=="\r";K++)xe+=F[K];if(xe=xe.trim(),xe[xe.length-1]==="/"&&(xe=xe.substring(0,xe.length-1),K--),!V(xe)){let oe;return xe.trim().length===0?oe="Invalid space after '<'.":oe="Tag '"+xe+"' is an invalid name.",$("InvalidTag",oe,re(F,K))}const te=P(F,K);if(te===!1)return $("InvalidAttr","Attributes for '"+xe+"' have open quote.",re(F,K));let ae=te.value;if(K=te.index,ae[ae.length-1]==="/"){const oe=K-ae.length;ae=ae.substring(0,ae.length-1);const ue=ee(ae,b);if(ue===!0)D=!0;else return $(ue.err.code,ue.err.msg,re(F,oe+ue.err.line))}else if(ye)if(te.tagClosed){if(ae.trim().length>0)return $("InvalidTag","Closing tag '"+xe+"' can't have attributes or invalid starting.",re(F,de));{const oe=M.pop();if(xe!==oe.tagName){let ue=re(F,oe.tagStartPos);return $("InvalidTag","Expected closing tag '"+oe.tagName+"' (opened in line "+ue.line+", col "+ue.col+") instead of closing tag '"+xe+"'.",re(F,de))}M.length==0&&(q=!0)}}else return $("InvalidTag","Closing tag '"+xe+"' doesn't have proper closing.",re(F,K));else{const oe=ee(ae,b);if(oe!==!0)return $(oe.err.code,oe.err.msg,re(F,K-ae.length+oe.err.line));if(q===!0)return $("InvalidXml","Multiple possible root nodes found.",re(F,K));b.unpairedTags.indexOf(xe)!==-1||M.push({tagName:xe,tagStartPos:de}),D=!0}for(K++;K<F.length;K++)if(F[K]==="<")if(F[K+1]==="!"){K++,K=E(F,K);continue}else if(F[K+1]==="?"){if(K=w(F,++K),K.err)return K}else break;else if(F[K]==="&"){const oe=W(F,K);if(oe==-1)return $("InvalidChar","char '&' is not expected.",re(F,K));K=oe}else if(q===!0&&!s(F[K]))return $("InvalidXml","Extra text at the end",re(F,K));F[K]==="<"&&K--}}else{if(s(F[K]))continue;return $("InvalidChar","char '"+F[K]+"' is not expected.",re(F,K))}if(D){if(M.length==1)return $("InvalidTag","Unclosed tag '"+M[0].tagName+"'.",re(F,M[0].tagStartPos));if(M.length>0)return $("InvalidXml","Invalid '"+JSON.stringify(M.map(K=>K.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return $("InvalidXml","Start tag expected.",1);return!0};function s(F){return F===" "||F==="	"||F===`
`||F==="\r"}function w(F,b){const M=b;for(;b<F.length;b++)if(F[b]=="?"||F[b]==" "){const D=F.substr(M,b-M);if(b>5&&D==="xml")return $("InvalidXml","XML declaration allowed only at the start of the document.",re(F,b));if(F[b]=="?"&&F[b+1]==">"){b++;break}else continue}return b}function E(F,b){if(F.length>b+5&&F[b+1]==="-"&&F[b+2]==="-"){for(b+=3;b<F.length;b++)if(F[b]==="-"&&F[b+1]==="-"&&F[b+2]===">"){b+=2;break}}else if(F.length>b+8&&F[b+1]==="D"&&F[b+2]==="O"&&F[b+3]==="C"&&F[b+4]==="T"&&F[b+5]==="Y"&&F[b+6]==="P"&&F[b+7]==="E"){let M=1;for(b+=8;b<F.length;b++)if(F[b]==="<")M++;else if(F[b]===">"&&(M--,M===0))break}else if(F.length>b+9&&F[b+1]==="["&&F[b+2]==="C"&&F[b+3]==="D"&&F[b+4]==="A"&&F[b+5]==="T"&&F[b+6]==="A"&&F[b+7]==="["){for(b+=8;b<F.length;b++)if(F[b]==="]"&&F[b+1]==="]"&&F[b+2]===">"){b+=2;break}}return b}const C='"',S="'";function P(F,b){let M="",D="",q=!1;for(;b<F.length;b++){if(F[b]===C||F[b]===S)D===""?D=F[b]:D!==F[b]||(D="");else if(F[b]===">"&&D===""){q=!0;break}M+=F[b]}return D!==""?!1:{value:M,index:b,tagClosed:q}}const N=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ee(F,b){const M=d.getAllMatches(F,N),D={};for(let q=0;q<M.length;q++){if(M[q][1].length===0)return $("InvalidAttr","Attribute '"+M[q][2]+"' has no space in starting.",H(M[q]));if(M[q][3]!==void 0&&M[q][4]===void 0)return $("InvalidAttr","Attribute '"+M[q][2]+"' is without value.",H(M[q]));if(M[q][3]===void 0&&!b.allowBooleanAttributes)return $("InvalidAttr","boolean attribute '"+M[q][2]+"' is not allowed.",H(M[q]));const K=M[q][2];if(!G(K))return $("InvalidAttr","Attribute '"+K+"' is an invalid name.",H(M[q]));if(!D.hasOwnProperty(K))D[K]=1;else return $("InvalidAttr","Attribute '"+K+"' is repeated.",H(M[q]))}return!0}function Y(F,b){let M=/\d/;for(F[b]==="x"&&(b++,M=/[\da-fA-F]/);b<F.length;b++){if(F[b]===";")return b;if(!F[b].match(M))break}return-1}function W(F,b){if(b++,F[b]===";")return-1;if(F[b]==="#")return b++,Y(F,b);let M=0;for(;b<F.length;b++,M++)if(!(F[b].match(/\w/)&&M<20)){if(F[b]===";")break;return-1}return b}function $(F,b,M){return{err:{code:F,msg:b,line:M.line||M,col:M.col}}}function G(F){return d.isName(F)}function V(F){return d.isName(F)}function re(F,b){const M=F.substring(0,b).split(/\r?\n/);return{line:M.length,col:M[M.length-1].length+1}}function H(F){return F.startIndex+F[1].length}},{"./util":4}],6:[function(r,l,c){const d=r("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressBooleanAttributes:!0,tagValueProcessor:function(W,$){return $},attributeValueProcessor:function(W,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:{">":{regex:new RegExp(">","g"),val:"&gt;"},"<":{regex:new RegExp("<","g"),val:"&lt;"},sQuot:{regex:new RegExp("'","g"),val:"&apos;"},dQuot:{regex:new RegExp('"',"g"),val:"&quot;"}},processEntities:!0,stopNodes:[]};function s(W){this.options=Object.assign({},y,W),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Y),this.processTextOrObjNode=w,this.options.format?(this.indentate=ee,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=N,this.buildObjNode=C):(this.buildTextNode=S,this.buildObjNode=E),this.buildTextValNode=S,this.buildObjectNode=E,this.replaceEntitiesValue=P}s.prototype.build=function(W){return this.options.preserveOrder?d(W,this.options):(Array.isArray(W)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(W={[this.options.arrayNodeName]:W}),this.j2x(W,0).val)},s.prototype.j2x=function(W,$){let G="",V="";for(let re in W)if(typeof W[re]!="undefined")if(W[re]===null)V+=this.indentate($)+"<"+re+"/"+this.tagEndChar;else if(W[re]instanceof Date)V+=this.buildTextNode(W[re],re,"",$);else if(typeof W[re]!="object"){const H=this.isAttribute(re);if(H){let F=this.options.attributeValueProcessor(H,""+W[re]);F=this.replaceEntitiesValue(F),G+=" "+H+'="'+F+'"'}else if(re===this.options.textNodeName){let F=this.options.tagValueProcessor(re,""+W[re]);V+=this.replaceEntitiesValue(F)}else V+=this.buildTextNode(W[re],re,"",$)}else if(Array.isArray(W[re])){const H=W[re].length;for(let F=0;F<H;F++){const b=W[re][F];typeof b=="undefined"||(b===null?V+=this.indentate($)+"<"+re+"/"+this.tagEndChar:typeof b=="object"?V+=this.processTextOrObjNode(b,re,$):V+=this.buildTextNode(b,re,"",$))}}else if(this.options.attributesGroupName&&re===this.options.attributesGroupName){const H=Object.keys(W[re]),F=H.length;for(let b=0;b<F;b++){let M=this.options.attributeValueProcessor(H[b],""+W[re][H[b]]);M=this.replaceEntitiesValue(M),G+=" "+H[b]+'="'+M+'"'}}else V+=this.processTextOrObjNode(W[re],re,$);return{attrStr:G,val:V}};function w(W,$,G){const V=this.j2x(W,G+1);return W[this.options.textNodeName]!==void 0&&Object.keys(W).length===1?this.buildTextNode(V.val,$,V.attrStr,G):this.buildObjNode(V.val,$,V.attrStr,G)}function E(W,$,G,V){return G&&W.indexOf("<")===-1?this.indentate(V)+"<"+$+G+">"+W+"</"+$+this.tagEndChar:this.indentate(V)+"<"+$+G+this.tagEndChar+W+this.indentate(V)+"</"+$+this.tagEndChar}function C(W,$,G,V){return W!==""?this.buildObjectNode(W,$,G,V):this.indentate(V)+"<"+$+G+"/"+this.tagEndChar}function S(W,$,G,V){let re=this.options.tagValueProcessor($,W);return re=this.replaceEntitiesValue(re),this.indentate(V)+"<"+$+G+">"+re+"</"+$+this.tagEndChar}function P(W){if(W&&W.length>0&&this.options.processEntities)for(const $ in this.options.entities){const G=this.options.entities[$];W=W.replace(G.regex,G.val)}return W}function N(W,$,G,V){return W===""&&this.options.unpairedTags.indexOf($)!==-1?this.indentate(V)+"<"+$+G+this.tagEndChar:W!==""?this.buildTextValNode(W,$,G,V):this.indentate(V)+"<"+$+G+"/"+this.tagEndChar}function ee(W){return this.options.indentBy.repeat(W)}function Y(W){return W.startsWith(this.options.attributeNamePrefix)?W.substr(this.attrPrefixLen):!1}l.exports=s},{"./orderedJs2Xml":7}],7:[function(r,l,c){const{EOL:d}=r("os");function y(P,N){return s(P,N,"",0)}function s(P,N,ee,Y){let W="",$="";N.format&&N.indentBy.length>0&&($=d+""+N.indentBy.repeat(Y));for(let G=0;G<P.length;G++){const V=P[G],re=w(V);let H="";if(ee.length===0?H=re:H=`${ee}.${re}`,re===N.textNodeName){let D=V[re];C(H,N)||(D=N.tagValueProcessor(re,D),D=S(D,N)),W+=$+D;continue}else if(re===N.cdataPropName){W+=$+`<![CDATA[${V[re][0][N.textNodeName]}]]>`;continue}else if(re===N.commentPropName){W+=$+`<!--${V[re][0][N.textNodeName]}-->`;continue}else if(re[0]==="?"){const D=E(V[":@"],N);W+=$+`<${re} ${V[re][0][N.textNodeName]} ${D}?>`;continue}const F=E(V[":@"],N);let b=$+`<${re}${F}`,M=s(V[re],N,H,Y+1);N.unpairedTags.indexOf(re)!==-1?W+=b+">":(!M||M.length===0)&&N.suppressEmptyNode?W+=b+"/>":W+=b+`>${M}${$}</${re}>`}return W}function w(P){const N=Object.keys(P);for(let ee=0;ee<N.length;ee++){const Y=N[ee];if(Y!==":@")return Y}}function E(P,N){let ee="";if(P&&!N.ignoreAttributes)for(attr in P){let Y=N.attributeValueProcessor(attr,P[attr]);Y=S(Y,N),Y===!0&&N.suppressBooleanAttributes?ee+=` ${attr.substr(N.attributeNamePrefix.length)}`:ee+=` ${attr.substr(N.attributeNamePrefix.length)}="${Y}"`}return ee}function C(P,N){P=P.substr(0,P.length-N.textNodeName.length-1);let ee=P.substr(P.lastIndexOf(".")+1);for(let Y in N.stopNodes)if(N.stopNodes[Y]===P||N.stopNodes[Y]==="*."+ee)return!0;return!1}function S(P,N){if(P&&P.length>0&&N.processEntities)for(const ee in N.entities){const Y=N.entities[ee];P=P.replace(Y.regex,Y.val)}return P}l.exports=y},{os:15}],8:[function(r,l,c){function d(w,E){const C={};if(w[E+3]==="O"&&w[E+4]==="C"&&w[E+5]==="T"&&w[E+6]==="Y"&&w[E+7]==="P"&&w[E+8]==="E"){E=E+9;let S=1,P=!1,N=!1,ee=!1,Y="";for(;E<w.length;E++)if(w[E]==="<"){if(P&&w[E+1]==="!"&&w[E+2]==="E"&&w[E+3]==="N"&&w[E+4]==="T"&&w[E+5]==="I"&&w[E+6]==="T"&&w[E+7]==="Y")E+=7,N=!0;else if(P&&w[E+1]==="!"&&w[E+2]==="E"&&w[E+3]==="L"&&w[E+4]==="E"&&w[E+5]==="M"&&w[E+6]==="E"&&w[E+7]==="N"&&w[E+8]==="T")E+=8;else if(w[E+1]==="!"&&w[E+2]==="-"&&w[E+3]==="-")ee=!0;else throw new Error("Invalid DOCTYPE");S++,Y=""}else if(w[E]===">"){if(ee)if(w[E-1]==="-"&&w[E-2]==="-")ee=!1;else throw new Error("Invalid XML comment in DOCTYPE");else N&&(s(Y,C),N=!1);if(S--,S===0)break}else w[E]==="["?P=!0:Y+=w[E];if(S!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:C,i:E}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function s(w,E){const C=y.exec(w);C&&(E[C[1]]={regx:RegExp(`&${C[1]};`,"g"),val:C[3]})}l.exports=d},{}],9:[function(r,l,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(s,w){return w},attributeValueProcessor:function(s,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1},y=function(s){return Object.assign({},d,s)};c.buildOptions=y,c.defaultOptions=d},{}],10:[function(r,l,c){const d=r("../util"),y=r("./xmlNode"),s=r("./DocTypeReader"),w=r("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class E{constructor(D){this.options=D,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=C,this.parseXml=Y,this.parseTextData=S,this.resolveNameSpace=P,this.buildAttributesMap=ee,this.isItStopNode=G,this.replaceEntitiesValue=W,this.readStopNodeData=F,this.saveTextToParentTag=$}}function C(M){const D=Object.keys(M);for(let q=0;q<D.length;q++){const K=D[q];this.lastEntities[K]={regex:new RegExp("&"+K+";","g"),val:M[K]}}}function S(M,D,q,K,de,ye,xe){if(M!==void 0&&(this.options.trimValues&&!K&&(M=M.trim()),M.length>0)){xe||(M=this.replaceEntitiesValue(M));const te=this.options.tagValueProcessor(D,M,q,de,ye);return te==null?M:typeof te!=typeof M||te!==M?te:this.options.trimValues?b(M,this.options.parseTagValue,this.options.numberParseOptions):M.trim()===M?b(M,this.options.parseTagValue,this.options.numberParseOptions):M}}function P(M){if(this.options.removeNSPrefix){const D=M.split(":"),q=M.charAt(0)==="/"?"/":"";if(D[0]==="xmlns")return"";D.length===2&&(M=q+D[1])}return M}const N=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ee(M,D){if(!this.options.ignoreAttributes&&typeof M=="string"){const q=d.getAllMatches(M,N),K=q.length,de={};for(let ye=0;ye<K;ye++){const xe=this.resolveNameSpace(q[ye][1]);let te=q[ye][4];const ae=this.options.attributeNamePrefix+xe;if(xe.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const oe=this.options.attributeValueProcessor(xe,te,D);oe==null?de[ae]=te:typeof oe!=typeof te||oe!==te?de[ae]=oe:de[ae]=b(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[ae]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const ye={};return ye[this.options.attributesGroupName]=de,ye}return de}}const Y=function(M){M=M.replace(/\r\n?/g,`
`);const D=new y("!xml");let q=D,K="",de="";for(let ye=0;ye<M.length;ye++)if(M[ye]==="<")if(M[ye+1]==="/"){const te=re(M,">",ye,"Closing Tag is not closed.");let ae=M.substring(ye+2,te).trim();if(this.options.removeNSPrefix){const oe=ae.indexOf(":");oe!==-1&&(ae=ae.substr(oe+1))}q&&(K=this.saveTextToParentTag(K,q,de)),de=de.substr(0,de.lastIndexOf(".")),q=this.tagsNodeStack.pop(),K="",ye=te}else if(M[ye+1]==="?"){let te=H(M,ye,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");K=this.saveTextToParentTag(K,q,de);const ae=new y(te.tagName);ae.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(ae[":@"]=this.buildAttributesMap(te.tagExp,de)),q.addChild(ae),ye=te.closeIndex+1}else if(M.substr(ye+1,3)==="!--"){const te=re(M,"-->",ye,"Comment is not closed.");if(this.options.commentPropName){const ae=M.substring(ye+4,te-2);K=this.saveTextToParentTag(K,q,de),q.add(this.options.commentPropName,[{[this.options.textNodeName]:ae}])}ye=te}else if(M.substr(ye+1,2)==="!D"){const te=s(M,ye);this.docTypeEntities=te.entities,ye=te.i}else if(M.substr(ye+1,2)==="!["){const te=re(M,"]]>",ye,"CDATA is not closed.")-2,ae=M.substring(ye+9,te);if(K=this.saveTextToParentTag(K,q,de),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:ae}]);else{let oe=this.parseTextData(ae,q.tagname,de,!0,!1,!0);oe||(oe=""),q.add(this.options.textNodeName,oe)}ye=te+2}else{let te=H(M,ye,this.options.removeNSPrefix),ae=te.tagName,oe=te.tagExp,ue=te.attrExpPresent,Ee=te.closeIndex;q&&K&&q.tagname!=="!xml"&&(K=this.saveTextToParentTag(K,q,de,!1)),ae!==D.tagname&&(de+=de?"."+ae:ae);const Pe=q;if(Pe&&this.options.unpairedTags.indexOf(Pe.tagname)!==-1&&(q=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,de,ae)){let ce="";if(!(oe.length>0&&oe.lastIndexOf("/")===oe.length-1)){if(this.options.unpairedTags.indexOf(ae)===-1){const be=this.readStopNodeData(M,ae,Ee+1);if(!be)throw new Error(`Unexpected end of ${ae}`);ye=be.i,ce=be.tagContent}}const ke=new y(ae);ae!==oe&&ue&&(ke[":@"]=this.buildAttributesMap(oe,de)),ce&&(ce=this.parseTextData(ce,ae,de,!0,ue,!0,!0)),de=de.substr(0,de.lastIndexOf(".")),ke.add(this.options.textNodeName,ce),q.addChild(ke)}else{if(oe.length>0&&oe.lastIndexOf("/")===oe.length-1){ae[ae.length-1]==="/"?(ae=ae.substr(0,ae.length-1),oe=ae):oe=oe.substr(0,oe.length-1);const ce=new y(ae);ae!==oe&&ue&&(ce[":@"]=this.buildAttributesMap(oe,de)),de=de.substr(0,de.lastIndexOf(".")),q.addChild(ce)}else{const ce=new y(ae);this.tagsNodeStack.push(q),ae!==oe&&ue&&(ce[":@"]=this.buildAttributesMap(oe,de)),q.addChild(ce),q=ce}K="",ye=Ee}}else K+=M[ye];return D.child},W=function(M){if(this.options.processEntities){for(let D in this.docTypeEntities){const q=this.docTypeEntities[D];M=M.replace(q.regx,q.val)}for(let D in this.lastEntities){const q=this.lastEntities[D];M=M.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let D in this.htmlEntities){const q=this.htmlEntities[D];M=M.replace(q.regex,q.val)}}return M};function $(M,D,q,K){return M&&(K===void 0&&(K=Object.keys(D.child).length===0),M=this.parseTextData(M,D.tagname,q,!1,D[":@"]?Object.keys(D[":@"]).length!==0:!1,K),M!==void 0&&M!==""&&D.add(this.options.textNodeName,M),M=""),M}function G(M,D,q){const K="*."+q;for(const de in M){const ye=M[de];if(K===ye||D===ye)return!0}return!1}function V(M,D,q=">"){let K,de="";for(let ye=D;ye<M.length;ye++){let xe=M[ye];if(K)xe===K&&(K="");else if(xe==='"'||xe==="'")K=xe;else if(xe===q[0])if(q[1]){if(M[ye+1]===q[1])return{data:de,index:ye}}else return{data:de,index:ye};else xe==="	"&&(xe=" ");de+=xe}}function re(M,D,q,K){const de=M.indexOf(D,q);if(de===-1)throw new Error(K);return de+D.length-1}function H(M,D,q,K=">"){const de=V(M,D+1,K);if(!de)return;let ye=de.data;const xe=de.index,te=ye.search(/\s/);let ae=ye,oe=!0;if(te!==-1&&(ae=ye.substr(0,te).replace(/\s\s*$/,""),ye=ye.substr(te+1)),q){const ue=ae.indexOf(":");ue!==-1&&(ae=ae.substr(ue+1),oe=ae!==de.data.substr(ue+1))}return{tagName:ae,tagExp:ye,closeIndex:xe,attrExpPresent:oe}}function F(M,D,q){const K=q;for(;q<M.length;q++)if(M[q]==="<"&&M[q+1]==="/"){const de=re(M,">",q,`${D} is not closed`);if(M.substring(q+2,de).trim()===D)return{tagContent:M.substring(K,q),i:de};q=de}}function b(M,D,q){if(D&&typeof M=="string"){const K=M.trim();return K==="true"?!0:K==="false"?!1:w(M,q)}else return d.isExist(M)?M:""}l.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:16}],11:[function(r,l,c){const{buildOptions:d}=r("./OptionsBuilder"),y=r("./OrderedObjParser"),{prettify:s}=r("./node2json"),w=r("../validator");class E{constructor(S){this.externalEntities={},this.options=d(S)}parse(S,P){if(typeof S!="string")if(S.toString)S=S.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(P){P===!0&&(P={});const Y=w.validate(S,P);if(Y!==!0)throw Error(`${Y.err.msg}:${Y.err.line}:${Y.err.col}`)}const N=new y(this.options);N.addExternalEntities(this.externalEntities);const ee=N.parseXml(S);return this.options.preserveOrder||ee===void 0?ee:s(ee,this.options)}addEntity(S,P){if(P.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(S.indexOf("&")!==-1||S.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[S]=P}}l.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(r,l,c){function d(C,S){return y(C,S)}function y(C,S,P){let N;const ee={};for(let Y=0;Y<C.length;Y++){const W=C[Y],$=s(W);let G="";if(P===void 0?G=$:G=P+"."+$,$===S.textNodeName)N===void 0?N=W[$]:N+=""+W[$];else{if($===void 0)continue;if(W[$]){let V=y(W[$],S,G);const re=E(V,S);W[":@"]?w(V,W[":@"],G,S):Object.keys(V).length===1&&V[S.textNodeName]!==void 0&&!S.alwaysCreateTextNode?V=V[S.textNodeName]:Object.keys(V).length===0&&(S.alwaysCreateTextNode?V[S.textNodeName]="":V=""),ee[$]!==void 0?(Array.isArray(ee[$])||(ee[$]=[ee[$]]),ee[$].push(V)):S.isArray($,G,re)?ee[$]=[V]:ee[$]=V}}}return typeof N=="string"?N.length>0&&(ee[S.textNodeName]=N):N!==void 0&&(ee[S.textNodeName]=N),ee}function s(C){const S=Object.keys(C);for(let P=0;P<S.length;P++){const N=S[P];if(N!==":@")return N}}function w(C,S,P,N){if(S){const ee=Object.keys(S),Y=ee.length;for(let W=0;W<Y;W++){const $=ee[W];N.isArray($,P+"."+$,!0,!0)?C[$]=[S[$]]:C[$]=S[$]}}}function E(C,S){const P=Object.keys(C).length;return!!(P===0||P===1&&C[S.textNodeName])}c.prettify=d},{}],13:[function(r,l,c){class d{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,w){this.child.push({[s]:w})}addChild(s){s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,[":@"]:s[":@"]}):this.child.push({[s.tagname]:s.child})}}l.exports=d},{}],14:[function(r,l,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,y,s,w,E){var C,S,P=E*8-w-1,N=(1<<P)-1,ee=N>>1,Y=-7,W=s?E-1:0,$=s?-1:1,G=d[y+W];for(W+=$,C=G&(1<<-Y)-1,G>>=-Y,Y+=P;Y>0;C=C*256+d[y+W],W+=$,Y-=8);for(S=C&(1<<-Y)-1,C>>=-Y,Y+=w;Y>0;S=S*256+d[y+W],W+=$,Y-=8);if(C===0)C=1-ee;else{if(C===N)return S?NaN:(G?-1:1)*(1/0);S=S+Math.pow(2,w),C=C-ee}return(G?-1:1)*S*Math.pow(2,C-w)},c.write=function(d,y,s,w,E,C){var S,P,N,ee=C*8-E-1,Y=(1<<ee)-1,W=Y>>1,$=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=w?0:C-1,V=w?1:-1,re=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(P=isNaN(y)?1:0,S=Y):(S=Math.floor(Math.log(y)/Math.LN2),y*(N=Math.pow(2,-S))<1&&(S--,N*=2),S+W>=1?y+=$/N:y+=$*Math.pow(2,1-W),y*N>=2&&(S++,N/=2),S+W>=Y?(P=0,S=Y):S+W>=1?(P=(y*N-1)*Math.pow(2,E),S=S+W):(P=y*Math.pow(2,W-1)*Math.pow(2,E),S=0));E>=8;d[s+G]=P&255,G+=V,P/=256,E-=8);for(S=S<<E|P,ee+=E;ee>0;d[s+G]=S&255,G+=V,S/=256,ee-=8);d[s+G-V]|=re*128}},{}],15:[function(r,l,c){c.endianness=function(){return"LE"},c.hostname=function(){return typeof location!="undefined"?location.hostname:""},c.loadavg=function(){return[]},c.uptime=function(){return 0},c.freemem=function(){return Number.MAX_VALUE},c.totalmem=function(){return Number.MAX_VALUE},c.cpus=function(){return[]},c.type=function(){return"Browser"},c.release=function(){return typeof navigator!="undefined"?navigator.appVersion:""},c.networkInterfaces=c.getNetworkInterfaces=function(){return{}},c.arch=function(){return"javascript"},c.platform=function(){return"browser"},c.tmpdir=c.tmpDir=function(){return"/tmp"},c.EOL=`
`,c.homedir=function(){return"/"}},{}],16:[function(r,l,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const s={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(C,S={}){if(S=Object.assign({},s,S),!C||typeof C!="string")return C;let P=C.trim();if(S.skipLike!==void 0&&S.skipLike.test(P))return C;if(S.hex&&d.test(P))return Number.parseInt(P,16);{const N=y.exec(P);if(N){const ee=N[1],Y=N[2];let W=E(N[3]);const $=N[4]||N[6];if(!S.leadingZeros&&Y.length>0&&ee&&P[2]!==".")return C;if(!S.leadingZeros&&Y.length>0&&!ee&&P[1]!==".")return C;{const G=Number(P),V=""+G;return V.search(/[eE]/)!==-1||$?S.eNotation?G:C:P.indexOf(".")!==-1?V==="0"&&W===""||V===W||ee&&V==="-"+W?G:C:Y?W===V||ee+W===V?G:C:P===V||P===ee+V?G:C}}else return C}}function E(C){return C&&C.indexOf(".")!==-1&&(C=C.replace(/0+$/,""),C==="."?C="0":C[0]==="."?C="0"+C:C[C.length-1]==="."&&(C=C.substr(0,C.length-1))),C}l.exports=w},{}],17:[function(r,l,c){(function(d){(function(){var y=this&&this.__awaiter||function(P,N,ee,Y){function W($){return $ instanceof ee?$:new ee(function(G){G($)})}return new(ee||(ee=Promise))(function($,G){function V(F){try{H(Y.next(F))}catch(b){G(b)}}function re(F){try{H(Y.throw(F))}catch(b){G(b)}}function H(F){F.done?$(F.value):W(F.value).then(V,re)}H((Y=Y.apply(P,N||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const s=r("../auth"),w=r("../config"),E=r("./_xml"),C=P=>typeof btoa=="undefined"?d.from(P,"binary").toString("base64"):btoa(P);function S(P,N,ee){return y(this,void 0,void 0,function*(){const{apiUrl:Y,authHeader:W,basicAuth:$,userAgent:G}=(0,w.getConfig)(),V=$&&`Basic ${C(`${$.username}:${$.password}`)}`,re=(0,s.getAuthToken)()&&`Bearer ${(0,s.getAuthToken)()}`;let H=new URLSearchParams(N).toString();H&&(H=`?${H}`);const F=yield fetch(`${Y}/api${P}${H}`,Object.assign(Object.assign({},ee),{headers:Object.assign({Authorization:W||V||re||"","User-Agent":G},ee==null?void 0:ee.headers)})),b=F.headers.get("Content-Type");if(b==null?void 0:b.startsWith("application/xml")){const M=yield F.text();return yield E.xmlParser.parse(M)}if(b==null?void 0:b.startsWith("application/json"))return F.json();if(F.ok)return yield F.text();throw new Error(`OSM API: ${yield F.text()}`)})}c.osmFetch=S}).call(this)}).call(this,r("buffer").Buffer)},{"../auth":38,"../config":40,"./_xml":18,buffer:2}],18:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=r("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],19:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=r("fast-xml-parser"),y=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,attributeValueProcessor:(C,S)=>S.replace(/&/g,"&amp;")});function s(C){return y.build({osm:{changeset:{tag:Object.entries(C).map(([S,P])=>({$k:S,$v:P}))}}})}c.createChangesetMetaXml=s;const w=(C,S,P)=>S.reduce((N,ee)=>{const Y={$id:ee.id,$version:P?0:ee.version,$changeset:C,tag:Object.entries(ee.tags||{}).map(([W,$])=>({$k:W,$v:$}))};switch(ee.type){case"node":{const W=Object.assign(Object.assign({},Y),{$lat:ee.lat,$lon:ee.lon});return Object.assign(Object.assign({},N),{node:[...N.node,W]})}case"way":{if(!ee.nodes)throw new Error("Way has no nodes");const W=Object.assign(Object.assign({},Y),{nd:ee.nodes.map($=>({$ref:$}))});return Object.assign(Object.assign({},N),{way:[...N.way,W]})}case"relation":{if(!ee.members)throw new Error("Relation has no members");const W=Object.assign(Object.assign({},Y),{member:ee.members.map($=>({$type:$.type,$ref:$.ref,$role:$.role}))});return Object.assign(Object.assign({},N),{relation:[...N.relation,W]})}default:return N}},{node:[],way:[],relation:[]});function E(C,S,P){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},P),{create:[w(C,S.create,!0)],modify:[w(C,S.modify)],delete:[Object.assign({"$if-unused":!0},w(C,S.delete))]})})}c.createOsmChangeXml=E},{"fast-xml-parser":3}],20:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=r("../_xml");function y(C){return{changeset:+C.$.changeset,id:+C.$.id,timestamp:C.$.timestamp,uid:+C.$.uid,user:C.$.user,version:+C.$.version,tags:C.tag?Object.fromEntries(C.tag.map(S=>[S.$.k,S.$.v])):void 0}}const s=C=>{const S=[];if(C.node){const P=C.node.map(N=>Object.assign(Object.assign({type:"node"},y(N)),{lat:+N.$.lat,lon:+N.$.lon}));S.push(...P)}if(C.way){const P=C.way.map(N=>{var ee;return Object.assign(Object.assign({type:"way"},y(N)),{nodes:((ee=N.nd)===null||ee===void 0?void 0:ee.map(Y=>+Y.$.ref))||[]})});S.push(...P)}if(C.relation){const P=C.relation.map(N=>{var ee;return Object.assign(Object.assign({type:"relation"},y(N)),{members:((ee=N.member)===null||ee===void 0?void 0:ee.map(Y=>({ref:+Y.$.ref,role:Y.$.role,type:Y.$.type})))||[]})});S.push(...P)}return S};function w(C){var S,P,N;return{create:((S=C.osmChange[0].create)===null||S===void 0?void 0:S.flatMap(s))||[],modify:((P=C.osmChange[0].modify)===null||P===void 0?void 0:P.flatMap(s))||[],delete:((N=C.osmChange[0].delete)===null||N===void 0?void 0:N.flatMap(s))||[]}}c.parseOsmChangeJson=w;function E(C){const S=d.xmlParser.parse(C);return console.log(S),w(S)}c.parseOsmChangeXml=E},{"../_xml":18}],21:[function(r,l,c){var d=this&&this.__awaiter||function(w,E,C,S){function P(N){return N instanceof C?N:new C(function(ee){ee(N)})}return new(C||(C=Promise))(function(N,ee){function Y(G){try{$(S.next(G))}catch(V){ee(V)}}function W(G){try{$(S.throw(G))}catch(V){ee(V)}}function $(G){G.done?N(G.value):P(G.value).then(Y,W)}$((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=r("../_osmFetch");function s(w,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=s},{"../_osmFetch":17}],22:[function(r,l,c){var d=this&&this.__awaiter||function(E,C,S,P){function N(ee){return ee instanceof S?ee:new S(function(Y){Y(ee)})}return new(S||(S=Promise))(function(ee,Y){function W(V){try{G(P.next(V))}catch(re){Y(re)}}function $(V){try{G(P.throw(V))}catch(re){Y(re)}}function G(V){V.done?ee(V.value):N(V.value).then(W,$)}G((P=P.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=r("../_osmFetch"),s=r("./_parseOsmChangeXml");function w(E){return d(this,void 0,void 0,function*(){const C=yield(0,y.osmFetch)(`/0.6/changeset/${E}/download`);return(0,s.parseOsmChangeJson)(C)})}c.getChangesetDiff=w},{"../_osmFetch":17,"./_parseOsmChangeXml":20}],23:[function(r,l,c){var d=this&&this.__awaiter||function(S,P,N,ee){function Y(W){return W instanceof N?W:new N(function($){$(W)})}return new(N||(N=Promise))(function(W,$){function G(H){try{re(ee.next(H))}catch(F){$(F)}}function V(H){try{re(ee.throw(H))}catch(F){$(F)}}function re(H){H.done?W(H.value):Y(H.value).then(G,V)}re((ee=ee.apply(S,P||[])).next())})},y=this&&this.__rest||function(S,P){var N={};for(var ee in S)Object.prototype.hasOwnProperty.call(S,ee)&&P.indexOf(ee)<0&&(N[ee]=S[ee]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,ee=Object.getOwnPropertySymbols(S);Y<ee.length;Y++)P.indexOf(ee[Y])<0&&Object.prototype.propertyIsEnumerable.call(S,ee[Y])&&(N[ee[Y]]=S[ee[Y]]);return N};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const s=r("../_osmFetch"),w=S=>{var P;return{id:+S.$.id,created_at:new Date(S.$.created_at),closed_at:new Date(S.$.closed_at),open:S.$.open==="true",comments_count:+S.$.comments_count,changes_count:+S.$.changes_count,min_lat:+S.$.min_lat,min_lon:+S.$.min_lon,max_lat:+S.$.max_lat,max_lon:+S.$.max_lon,uid:+S.$.uid,user:S.$.user,tags:Object.fromEntries(S.tag.map(N=>[N.$.k,N.$.v])),discussion:(P=S.discussion)===null||P===void 0?void 0:P[0].comment.map(N=>({date:new Date(N.$.date),user:N.$.user,uid:N.$.uid,text:N.text[0]}))}};function E(S){var P;return d(this,void 0,void 0,function*(){const{only:N}=S,ee=y(S,["only"]);return((P=(yield(0,s.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},N&&{[N]:!0}),ee))).osm[0].changeset)===null||P===void 0?void 0:P.map(w))||[]})}c.listChangesets=E;function C(S,P=!0){return d(this,void 0,void 0,function*(){return(yield(0,s.osmFetch)(`/0.6/changeset/${S}`,{include_discussion:P})).osm[0].changeset.map(w)[0]})}c.getChangeset=C},{"../_osmFetch":17}],24:[function(r,l,c){var d=this&&this.__createBinding||(Object.create?function(E,C,S,P){P===void 0&&(P=S),Object.defineProperty(E,P,{enumerable:!0,get:function(){return C[S]}})}:function(E,C,S,P){P===void 0&&(P=S),E[P]=C[S]}),y=this&&this.__exportStar||function(E,C){for(var S in E)S!=="default"&&!Object.prototype.hasOwnProperty.call(C,S)&&d(C,E,S)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(r("./createChangesetComment"),c),y(r("./getChangesetDiff"),c),y(r("./getChangesets"),c),y(r("./uploadChangeset"),c);var s=r("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return s.parseOsmChangeXml}});var w=r("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":19,"./_parseOsmChangeXml":20,"./createChangesetComment":21,"./getChangesetDiff":22,"./getChangesets":23,"./uploadChangeset":25}],25:[function(r,l,c){var d=this&&this.__awaiter||function(E,C,S,P){function N(ee){return ee instanceof S?ee:new S(function(Y){Y(ee)})}return new(S||(S=Promise))(function(ee,Y){function W(V){try{G(P.next(V))}catch(re){Y(re)}}function $(V){try{G(P.throw(V))}catch(re){Y(re)}}function G(V){V.done?ee(V.value):N(V.value).then(W,$)}G((P=P.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=r("../_osmFetch"),s=r("./_createOsmChangeXml");function w(E,C){return d(this,void 0,void 0,function*(){const S=(0,s.createChangesetMetaXml)(E),P=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:S,headers:{"content-type":"application/xml; charset=utf-8"}})),N=(0,s.createOsmChangeXml)(P,C);return yield(0,y.osmFetch)(`/0.6/changeset/${P}/upload`,void 0,{method:"POST",body:N,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${P}/close`,void 0,{method:"PUT"}),+P})}c.uploadChangeset=w},{"../_osmFetch":17,"./_createOsmChangeXml":19}],26:[function(r,l,c){var d=this&&this.__awaiter||function(w,E,C,S){function P(N){return N instanceof C?N:new C(function(ee){ee(N)})}return new(C||(C=Promise))(function(N,ee){function Y(G){try{$(S.next(G))}catch(V){ee(V)}}function W(G){try{$(S.throw(G))}catch(V){ee(V)}}function $(G){G.done?N(G.value):P(G.value).then(Y,W)}$((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=r("./_osmFetch");function s(){return d(this,void 0,void 0,function*(){const w=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+w.osm[0].api[0].area[0].$.maximum,maxNoteArea:+w.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+w.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+w.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+w.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+w.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:w.osm[0].policy[0].imagery[0].blacklist.map(C=>C.$.regex)}}})}c.getCapabilities=s},{"./_osmFetch":17}],27:[function(r,l,c){var d=this&&this.__awaiter||function(N,ee,Y,W){function $(G){return G instanceof Y?G:new Y(function(V){V(G)})}return new(Y||(Y=Promise))(function(G,V){function re(b){try{F(W.next(b))}catch(M){V(M)}}function H(b){try{F(W.throw(b))}catch(M){V(M)}}function F(b){b.done?G(b.value):$(b.value).then(re,H)}F((W=W.apply(N,ee||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=r("./_osmFetch");function s(N,ee,Y){return d(this,void 0,void 0,function*(){const W=Y&&N!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${N}/${ee}${W}.json`)).elements})}c.getFeature=s;function w(N,ee){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${N}s.json?${N}s=${ee.join(",")}`)).elements})}c.getFeatures=w;function E(N,ee,Y){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${N}/${ee}/${Y}.json`)).elements[0]})}c.getFeatureAtVersion=E;function C(N,ee){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${N}/${ee}/history.json`)).elements})}c.getFeatureHistory=C;function S(N){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${N}/ways.json`)).elements})}c.getWaysForNode=S;function P(N,ee){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${N}/${ee}/relation.json`)).elements})}c.getRelationsForElement=P},{"./_osmFetch":17}],28:[function(r,l,c){var d=this&&this.__awaiter||function(w,E,C,S){function P(N){return N instanceof C?N:new C(function(ee){ee(N)})}return new(C||(C=Promise))(function(N,ee){function Y(G){try{$(S.next(G))}catch(V){ee(V)}}function W(G){try{$(S.throw(G))}catch(V){ee(V)}}function $(G){G.done?N(G.value):P(G.value).then(Y,W)}$((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=r("./_osmFetch");function s(w){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:w})).elements})}c.getMapData=s},{"./_osmFetch":17}],29:[function(r,l,c){var d=this&&this.__awaiter||function(w,E,C,S){function P(N){return N instanceof C?N:new C(function(ee){ee(N)})}return new(C||(C=Promise))(function(N,ee){function Y(G){try{$(S.next(G))}catch(V){ee(V)}}function W(G){try{$(S.throw(G))}catch(V){ee(V)}}function $(G){G.done?N(G.value):P(G.value).then(Y,W)}$((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=r("./changesets");function s(w){return d(this,void 0,void 0,function*(){const E=yield(0,y.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}c.getUIdFromDisplayName=s},{"./changesets":24}],30:[function(r,l,c){var d=this&&this.__awaiter||function(E,C,S,P){function N(ee){return ee instanceof S?ee:new S(function(Y){Y(ee)})}return new(S||(S=Promise))(function(ee,Y){function W(V){try{G(P.next(V))}catch(re){Y(re)}}function $(V){try{G(P.throw(V))}catch(re){Y(re)}}function G(V){V.done?ee(V.value):N(V.value).then(W,$)}G((P=P.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=r("./_osmFetch");function s(E){return d(this,void 0,void 0,function*(){const C=yield(0,y.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},C.user),{account_created:new Date(C.user.account_created)})})}c.getUser=s;function w(E){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:E})).users.map(S=>Object.assign(Object.assign({},S),{account_created:new Date(S.account_created)}))})}c.getUsers=w},{"./_osmFetch":17}],31:[function(r,l,c){var d=this&&this.__createBinding||(Object.create?function(s,w,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return w[E]}})}:function(s,w,E,C){C===void 0&&(C=E),s[C]=w[E]}),y=this&&this.__exportStar||function(s,w){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&d(w,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(r("./changesets"),c),y(r("./notes"),c),y(r("./getCapabilities"),c),y(r("./getFeature"),c),y(r("./getMapData"),c),y(r("./getUIdFromDisplayName"),c),y(r("./getUser"),c)},{"./changesets":24,"./getCapabilities":26,"./getFeature":27,"./getMapData":28,"./getUIdFromDisplayName":29,"./getUser":30,"./notes":33}],32:[function(r,l,c){var d=this&&this.__awaiter||function(P,N,ee,Y){function W($){return $ instanceof ee?$:new ee(function(G){G($)})}return new(ee||(ee=Promise))(function($,G){function V(F){try{H(Y.next(F))}catch(b){G(b)}}function re(F){try{H(Y.throw(F))}catch(b){G(b)}}function H(F){F.done?$(F.value):W(F.value).then(V,re)}H((Y=Y.apply(P,N||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=r("../_osmFetch"),s=P=>{const[N,ee]=P.geometry.coordinates;return Object.assign(Object.assign({},P.properties),{location:{lat:ee,lng:N}})};function w(P,N){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${N?"/search":""}.json`,P)).features.map(s)})}function E(P){return w(P,!0)}c.getNotesForQuery=E;function C(P){return w({bbox:P},!1)}c.getNotesForArea=C;function S(P){return d(this,void 0,void 0,function*(){const N=yield(0,y.osmFetch)(`/0.6/notes/${P}.json`);return s(N)})}c.getNote=S},{"../_osmFetch":17}],33:[function(r,l,c){var d=this&&this.__createBinding||(Object.create?function(s,w,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return w[E]}})}:function(s,w,E,C){C===void 0&&(C=E),s[C]=w[E]}),y=this&&this.__exportStar||function(s,w){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&d(w,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(r("./getNotes"),c),y(r("./noteActions"),c)},{"./getNotes":32,"./noteActions":34}],34:[function(r,l,c){var d=this&&this.__awaiter||function(C,S,P,N){function ee(Y){return Y instanceof P?Y:new P(function(W){W(Y)})}return new(P||(P=Promise))(function(Y,W){function $(re){try{V(N.next(re))}catch(H){W(H)}}function G(re){try{V(N.throw(re))}catch(H){W(H)}}function V(re){re.done?Y(re.value):ee(re.value).then($,G)}V((N=N.apply(C,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=r("../_osmFetch");function s(C,S,P){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:C,lon:S,text:P})})}c.createNote=s;function w(C,S){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${C}/comment`,{text:S})})}c.commentOnNote=w;function E(C,S){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${C}/reopen`,{text:S})})}c.reopenNote=E},{"../_osmFetch":17}],35:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(y){let s=!1;return new Promise((w,E)=>{const[C,S]=[600,550],P=Object.entries({width:C,height:S,left:window.screen.width/2-C/2,top:window.screen.height/2-S/2}).map(([Y,W])=>`${Y}=${W}`).join(","),N=window.open("about:blank","oauth_window",P);if(!N)throw new Error("Popup was blocked");N.location=y,window.authComplete=Y=>{w(Y),s=!0};const ee=setInterval(()=>{N.closed&&(s||E(new Error("Cancelled")),clearInterval(ee))},500)})}c.createPopup=d},{}],36:[function(r,l,c){var d=this&&this.__awaiter||function(w,E,C,S){function P(N){return N instanceof C?N:new C(function(ee){ee(N)})}return new(C||(C=Promise))(function(N,ee){function Y(G){try{$(S.next(G))}catch(V){ee(V)}}function W(G){try{$(S.throw(G))}catch(V){ee(V)}}function $(G){G.done?N(G.value):P(G.value).then(Y,W)}$((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=r("./helpers");function s(w,{options:E,pkceVerifier:C,state:S}){return d(this,void 0,void 0,function*(){const P=new URL(w).searchParams,N=P.get("error_description"),ee=P.get("code"),Y=P.get("state");if(N)throw new Error(N);if(!ee)throw new Error("No code in OAuth response");if(!C||!S)throw new Error("No login in progress");if(S!==Y)throw new Error("State Mismatch");const W={grant_type:"authorization_code",code:ee,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:C},$=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(W).toString()}`,V=yield(yield fetch($,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in V)throw new Error(V.error_description);const re={issuedAt:new Date(V.created_at*1e3).toISOString(),accessToken:V.access_token,scopes:V.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(re)),delete window.authComplete,re})}c.exchangeCode=s},{"./helpers":37}],37:[function(r,l,c){var d=this&&this.__awaiter||function(C,S,P,N){function ee(Y){return Y instanceof P?Y:new P(function(W){W(Y)})}return new(P||(P=Promise))(function(Y,W){function $(re){try{V(N.next(re))}catch(H){W(H)}}function G(re){try{V(N.throw(re))}catch(H){W(H)}}function V(re){re.done?Y(re.value):ee(re.value).then($,G)}V((N=N.apply(C,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=r("../config");function s(C){return d(this,void 0,void 0,function*(){const S=new TextEncoder().encode(C),P=yield window.crypto.subtle.digest("SHA-256",S);return btoa(String.fromCharCode(...new Uint8Array(P))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=s;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(C=>`0${C.toString(16)}`.slice(-2)).join("")}c.getRandomString=w;function E(){let C=(0,y.getConfig)().apiUrl;return C==="https://api.openstreetmap.org"&&(C="https://www.openstreetmap.org"),C}c.getOAuthBaseUrl=E},{"../config":40}],38:[function(r,l,c){var d=this&&this.__createBinding||(Object.create?function(s,w,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return w[E]}})}:function(s,w,E,C){C===void 0&&(C=E),s[C]=w[E]}),y=this&&this.__exportStar||function(s,w){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&d(w,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(r("./oauth2"),c)},{"./oauth2":39}],39:[function(r,l,c){var d=this&&this.__awaiter||function(N,ee,Y,W){function $(G){return G instanceof Y?G:new Y(function(V){V(G)})}return new(Y||(Y=Promise))(function(G,V){function re(b){try{F(W.next(b))}catch(M){V(M)}}function H(b){try{F(W.throw(b))}catch(M){V(M)}}function F(b){b.done?G(b.value):$(b.value).then(re,H)}F((W=W.apply(N,ee||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=r("./createPopup"),s=r("./exchangeCode"),w=r("./helpers");function E(N){return d(this,void 0,void 0,function*(){if(!N.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!N.clientId)throw new Error("You must include the 'clientId' option");if(!N.scopes)throw new Error("You must include the 'scopes' option");const ee=(0,w.getRandomString)(),Y=(0,w.getRandomString)(),W=yield(0,w.sha256)(Y),$={scope:N.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:ee,redirect_uri:N.redirectUrl,client_id:N.clientId,code_challenge_method:"S256",code_challenge:W},G=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams($).toString()}`,V={state:ee,pkceVerifier:Y,options:N};if(N.mode==="popup"){const re=yield(0,y.createPopup)(G);return(0,s.exchangeCode)(re,V)}if(N.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(V)),window.location.replace(G);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=E,c.authReady=(()=>d(void 0,void 0,void 0,function*(){var N;if(typeof window=="undefined")return;const ee=window.location.href,Y=localStorage.getItem("__osmAuthTemp");if(new URL(ee).searchParams.get("code")){if((N=window.opener)===null||N===void 0?void 0:N.authComplete)window.opener.authComplete(ee),window.close();else if(Y)try{const W=JSON.parse(Y);yield(0,s.exchangeCode)(ee,W),localStorage.removeItem("__osmAuthTemp")}catch(W){console.error("OSM Auth Error",W)}}}))();const C=()=>{try{const N=localStorage.getItem("__osmAuth");return N?JSON.parse(N).accessToken:void 0}catch{return}};c.getAuthToken=C;const S=()=>!!(0,c.getAuthToken)();c.isLoggedIn=S;function P(){localStorage.removeItem("__osmAuth")}c.logout=P},{"./createPopup":35,"./exchangeCode":36,"./helpers":37}],40:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>d;c.getConfig=y;function s(w){Object.assign(d,w)}c.configure=s},{}],41:[function(r,l,c){var d=this&&this.__createBinding||(Object.create?function(s,w,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return w[E]}})}:function(s,w,E,C){C===void 0&&(C=E),s[C]=w[E]}),y=this&&this.__exportStar||function(s,w){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&d(w,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),r("./polyfill"),y(r("./api"),c),y(r("./auth"),c),y(r("./config"),c),y(r("./types"),c)},{"./api":31,"./auth":38,"./config":40,"./polyfill":42,"./types":46}],42:[function(r,l,c){if(typeof fetch=="undefined")try{r("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],43:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],44:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}],45:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}],46:[function(r,l,c){var d=this&&this.__createBinding||(Object.create?function(s,w,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return w[E]}})}:function(s,w,E,C){C===void 0&&(C=E),s[C]=w[E]}),y=this&&this.__exportStar||function(s,w){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&d(w,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(r("./changesets"),c),y(r("./features"),c),y(r("./general"),c),y(r("./notes"),c),y(r("./user"),c)},{"./changesets":43,"./features":44,"./general":45,"./notes":47,"./user":48}],47:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}],48:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}]},{},[41])(41)})})(t4);var n4={exports:{}},Xf={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r4=rn.exports,KS=60103;Xf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var bb=Symbol.for;KS=bb("react.element"),Xf.Fragment=bb("react.fragment")}var i4=r4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o4=Object.prototype.hasOwnProperty,a4={key:!0,ref:!0,__self:!0,__source:!0};function qS(e,t,r){var l,c={},d=null,y=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(y=t.ref);for(l in t)o4.call(t,l)&&!a4.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)c[l]===void 0&&(c[l]=t[l]);return{$$typeof:KS,type:e,key:d,ref:y,props:c,_owner:i4.current}}Xf.jsx=qS;Xf.jsxs=qS;n4.exports=Xf;var L0={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,l="4.15.0",c=200,d="Expected a function",y="__lodash_hash_undefined__",s=1,w=2,E=1/0,C=9007199254740991,S="[object Arguments]",P="[object Array]",N="[object Boolean]",ee="[object Date]",Y="[object Error]",W="[object Function]",$="[object GeneratorFunction]",G="[object Map]",V="[object Number]",re="[object Object]",H="[object Promise]",F="[object RegExp]",b="[object Set]",M="[object String]",D="[object Symbol]",q="[object WeakMap]",K="[object ArrayBuffer]",de="[object DataView]",ye="[object Float32Array]",xe="[object Float64Array]",te="[object Int8Array]",ae="[object Int16Array]",oe="[object Int32Array]",ue="[object Uint8Array]",Ee="[object Uint8ClampedArray]",Pe="[object Uint16Array]",ce="[object Uint32Array]",ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,Ie=/^\./,Be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,et=/\\(\\)?/g,tt=/\w*$/,ct=/^\[object .+?Constructor\]$/,St=/^(?:0|[1-9]\d*)$/,ft={};ft[ye]=ft[xe]=ft[te]=ft[ae]=ft[oe]=ft[ue]=ft[Ee]=ft[Pe]=ft[ce]=!0,ft[S]=ft[P]=ft[K]=ft[N]=ft[de]=ft[ee]=ft[Y]=ft[W]=ft[G]=ft[V]=ft[re]=ft[F]=ft[b]=ft[M]=ft[q]=!1;var At={};At[S]=At[P]=At[K]=At[de]=At[N]=At[ee]=At[ye]=At[xe]=At[te]=At[ae]=At[oe]=At[G]=At[V]=At[re]=At[F]=At[b]=At[M]=At[D]=At[ue]=At[Ee]=At[Pe]=At[ce]=!0,At[Y]=At[W]=At[q]=!1;var qt=typeof Gs=="object"&&Gs&&Gs.Object===Object&&Gs,Bt=typeof self=="object"&&self&&self.Object===Object&&self,ln=qt||Bt||Function("return this")(),En=t&&!t.nodeType&&t,_n=En&&!0&&e&&!e.nodeType&&e,nn=_n&&_n.exports===En,Pn=nn&&qt.process,ge=function(){try{return Pn&&Pn.binding("util")}catch{}}(),L=ge&&ge.isTypedArray;function R(j,fe){return j.set(fe[0],fe[1]),j}function me(j,fe){return j.add(fe),j}function Oe(j,fe,Le){switch(Le.length){case 0:return j.call(fe);case 1:return j.call(fe,Le[0]);case 2:return j.call(fe,Le[0],Le[1]);case 3:return j.call(fe,Le[0],Le[1],Le[2])}return j.apply(fe,Le)}function Ke(j,fe){for(var Le=-1,nt=j?j.length:0;++Le<nt&&fe(j[Le],Le,j)!==!1;);return j}function at(j,fe){for(var Le=-1,nt=fe.length,Pt=j.length;++Le<nt;)j[Pt+Le]=fe[Le];return j}function se(j,fe,Le,nt){var Pt=-1,Et=j?j.length:0;for(nt&&Et&&(Le=j[++Pt]);++Pt<Et;)Le=fe(Le,j[Pt],Pt,j);return Le}function T(j,fe){for(var Le=-1,nt=j?j.length:0;++Le<nt;)if(fe(j[Le],Le,j))return!0;return!1}function z(j){return function(fe){return fe==null?r:fe[j]}}function we(j,fe){for(var Le=-1,nt=Array(j);++Le<j;)nt[Le]=fe(Le);return nt}function De(j){return function(fe){return j(fe)}}function Xe(j,fe){return j==null?r:j[fe]}function Qe(j){var fe=!1;if(j!=null&&typeof j.toString!="function")try{fe=!!(j+"")}catch{}return fe}function $t(j){var fe=-1,Le=Array(j.size);return j.forEach(function(nt,Pt){Le[++fe]=[Pt,nt]}),Le}function Tn(j,fe){return function(Le){return j(fe(Le))}}function pn(j){var fe=-1,Le=Array(j.size);return j.forEach(function(nt){Le[++fe]=nt}),Le}var dt=Array.prototype,Lt=Function.prototype,un=Object.prototype,Tr=ln["__core-js_shared__"],Hr=function(){var j=/[^.]+$/.exec(Tr&&Tr.keys&&Tr.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}(),cn=Lt.toString,er=un.hasOwnProperty,pi=cn.call(Object),gr=un.toString,jr=RegExp("^"+cn.call(er).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=nn?ln.Buffer:r,Ut=ln.Symbol,Gt=ln.Uint8Array,An=Tn(Object.getPrototypeOf,Object),zn=Object.create,tr=un.propertyIsEnumerable,Dr=dt.splice,ii=Object.getOwnPropertySymbols,ca=Vt?Vt.isBuffer:r,Ae=Tn(Object.keys,Object),Z=Math.max,J=Uo(ln,"DataView"),ve=Uo(ln,"Map"),Ce=Uo(ln,"Promise"),Me=Uo(ln,"Set"),Ve=Uo(ln,"WeakMap"),Ne=Uo(Object,"create"),Ue=!tr.call({valueOf:1},"valueOf"),Ge=mi(J),st=mi(ve),mt=mi(Ce),ot=mi(Me),Nt=mi(Ve),It=Ut?Ut.prototype:r,jt=It?It.valueOf:r,tn=It?It.toString:r;function Dt(){}function vn(j){var fe=-1,Le=j?j.length:0;for(this.clear();++fe<Le;){var nt=j[fe];this.set(nt[0],nt[1])}}function Sn(){this.__data__=Ne?Ne(null):{}}function xn(j){return this.has(j)&&delete this.__data__[j]}function wn(j){var fe=this.__data__;if(Ne){var Le=fe[j];return Le===y?r:Le}return er.call(fe,j)?fe[j]:r}function Qn(j){var fe=this.__data__;return Ne?fe[j]!==r:er.call(fe,j)}function cr(j,fe){var Le=this.__data__;return Le[j]=Ne&&fe===r?y:fe,this}vn.prototype.clear=Sn,vn.prototype.delete=xn,vn.prototype.get=wn,vn.prototype.has=Qn,vn.prototype.set=cr;function Kn(j){var fe=-1,Le=j?j.length:0;for(this.clear();++fe<Le;){var nt=j[fe];this.set(nt[0],nt[1])}}function vo(){this.__data__=[]}function Yi(j){var fe=this.__data__,Le=nr(fe,j);if(Le<0)return!1;var nt=fe.length-1;return Le==nt?fe.pop():Dr.call(fe,Le,1),!0}function ml(j){var fe=this.__data__,Le=nr(fe,j);return Le<0?r:fe[Le][1]}function Ba(j){return nr(this.__data__,j)>-1}function qn(j,fe){var Le=this.__data__,nt=nr(Le,j);return nt<0?Le.push([j,fe]):Le[nt][1]=fe,this}Kn.prototype.clear=vo,Kn.prototype.delete=Yi,Kn.prototype.get=ml,Kn.prototype.has=Ba,Kn.prototype.set=qn;function Ki(j){var fe=-1,Le=j?j.length:0;for(this.clear();++fe<Le;){var nt=j[fe];this.set(nt[0],nt[1])}}function xu(){this.__data__={hash:new vn,map:new(ve||Kn),string:new vn}}function wu(j){return ro(this,j).delete(j)}function bu(j){return ro(this,j).get(j)}function _s(j){return ro(this,j).has(j)}function Eu(j,fe){return ro(this,j).set(j,fe),this}Ki.prototype.clear=xu,Ki.prototype.delete=wu,Ki.prototype.get=bu,Ki.prototype.has=_s,Ki.prototype.set=Eu;function ha(j){var fe=-1,Le=j?j.length:0;for(this.__data__=new Ki;++fe<Le;)this.add(j[fe])}function gl(j){return this.__data__.set(j,y),this}function Su(j){return this.__data__.has(j)}ha.prototype.add=ha.prototype.push=gl,ha.prototype.has=Su;function Nr(j){this.__data__=new Kn(j)}function xs(){this.__data__=new Kn}function ja(j){return this.__data__.delete(j)}function Da(j){return this.__data__.get(j)}function Na(j){return this.__data__.has(j)}function ws(j,fe){var Le=this.__data__;if(Le instanceof Kn){var nt=Le.__data__;if(!ve||nt.length<c-1)return nt.push([j,fe]),this;Le=this.__data__=new Ki(nt)}return Le.set(j,fe),this}Nr.prototype.clear=xs,Nr.prototype.delete=ja,Nr.prototype.get=Da,Nr.prototype.has=Na,Nr.prototype.set=ws;function bs(j,fe){var Le=Ur(j)||io(j)?we(j.length,String):[],nt=Le.length,Pt=!!nt;for(var Et in j)(fe||er.call(j,Et))&&!(Pt&&(Et=="length"||rr(Et,nt)))&&Le.push(Et);return Le}function _o(j,fe,Le){(Le!==r&&!Pi(j[fe],Le)||typeof fe=="number"&&Le===r&&!(fe in j))&&(j[fe]=Le)}function fa(j,fe,Le){var nt=j[fe];(!(er.call(j,fe)&&Pi(nt,Le))||Le===r&&!(fe in j))&&(j[fe]=Le)}function nr(j,fe){for(var Le=j.length;Le--;)if(Pi(j[Le][0],fe))return Le;return-1}function Es(j,fe){return j&&Pl(fe,ai(fe),j)}function xo(j,fe,Le,nt,Pt,Et,Wt){var Zt;if(nt&&(Zt=Et?nt(j,Pt,Et,Wt):nt(j)),Zt!==r)return Zt;if(!gi(j))return j;var hn=Ur(j);if(hn){if(Zt=ih(j),!fe)return ku(j,Zt)}else{var _t=kn(j),Dn=_t==W||_t==$;if(ks(j))return Cl(j,fe);if(_t==re||_t==S||Dn&&!Et){if(Qe(j))return Et?j:{};if(Zt=jn(Dn?{}:j),!fe)return rh(j,Es(Zt,j))}else{if(!At[_t])return Et?j:{};Zt=$o(j,_t,xo,fe)}}Wt||(Wt=new Nr);var Wn=Wt.get(j);if(Wn)return Wn;if(Wt.set(j,Zt),!hn)var Jn=Le?Do(j):ai(j);return Ke(Jn||j,function(Ar,xt){Jn&&(xt=Ar,Ar=j[xt]),fa(Zt,xt,xo(Ar,fe,Le,nt,xt,j,Wt))}),Zt}function yl(j){return gi(j)?zn(j):{}}var Tu=Ml(_l),vl=ga();function _l(j,fe){return j&&vl(j,fe,ai)}function xl(j,fe){fe=wo(fe,j)?[fe]:As(fe);for(var Le=0,nt=fe.length;j!=null&&Le<nt;)j=j[bo(fe[Le++])];return Le&&Le==nt?j:r}function Qc(j,fe,Le){var nt=fe(j);return Ur(j)?nt:at(nt,Le(j))}function wl(j){return gr.call(j)}function bl(j,fe){return j!=null&&fe in Object(j)}function Ua(j,fe,Le,nt,Pt){return j===fe?!0:j==null||fe==null||!gi(j)&&!oo(fe)?j!==j&&fe!==fe:El(j,fe,Ua,Le,nt,Pt)}function El(j,fe,Le,nt,Pt,Et){var Wt=Ur(j),Zt=Ur(fe),hn=P,_t=P;Wt||(hn=kn(j),hn=hn==S?re:hn),Zt||(_t=kn(fe),_t=_t==S?re:_t);var Dn=hn==re&&!Qe(j),Wn=_t==re&&!Qe(fe),Jn=hn==_t;if(Jn&&!Dn)return Et||(Et=new Nr),Wt||Xo(j)?zl(j,fe,Le,nt,Pt,Et):Mu(j,fe,hn,Le,nt,Pt,Et);if(!(Pt&w)){var Ar=Dn&&er.call(j,"__wrapped__"),xt=Wn&&er.call(fe,"__wrapped__");if(Ar||xt){var ki=Ar?j.value():j,ao=xt?fe.value():fe;return Et||(Et=new Nr),Le(ki,ao,nt,Pt,Et)}}return Jn?(Et||(Et=new Nr),Ol(j,fe,Le,nt,Pt,Et)):!1}function Au(j,fe,Le,nt){var Pt=Le.length,Et=Pt,Wt=!nt;if(j==null)return!Et;for(j=Object(j);Pt--;){var Zt=Le[Pt];if(Wt&&Zt[2]?Zt[1]!==j[Zt[0]]:!(Zt[0]in j))return!1}for(;++Pt<Et;){Zt=Le[Pt];var hn=Zt[0],_t=j[hn],Dn=Zt[1];if(Wt&&Zt[2]){if(_t===r&&!(hn in j))return!1}else{var Wn=new Nr;if(nt)var Jn=nt(_t,Dn,hn,j,fe,Wn);if(!(Jn===r?Ua(Dn,_t,nt,s|w,Wn):Jn))return!1}}return!0}function Iu(j){if(!gi(j)||Ll(j))return!1;var fe=Wo(j)||Qe(j)?jr:ct;return fe.test(mi(j))}function Bn(j){return oo(j)&&Zo(j.length)&&!!ft[gr.call(j)]}function da(j){return typeof j=="function"?j:j==null?_a:typeof j=="object"?Ur(j)?Tl(j[0],j[1]):oi(j):ir(j)}function $a(j){if(!Vo(j))return Ae(j);var fe=[];for(var Le in Object(j))er.call(j,Le)&&Le!="constructor"&&fe.push(Le);return fe}function Sl(j){if(!gi(j))return Ps(j);var fe=Vo(j),Le=[];for(var nt in j)nt=="constructor"&&(fe||!er.call(j,nt))||Le.push(nt);return Le}function oi(j){var fe=No(j);return fe.length==1&&fe[0][2]?Cs(fe[0][0],fe[0][1]):function(Le){return Le===j||Au(Le,j,fe)}}function Tl(j,fe){return wo(j)&&Ga(fe)?Cs(bo(j),fe):function(Le){var nt=jl(Le,j);return nt===r&&nt===fe?Dl(Le,j):Ua(fe,nt,r,s|w)}}function Va(j,fe,Le,nt,Pt){if(j!==fe){if(!(Ur(fe)||Xo(fe)))var Et=Sl(fe);Ke(Et||fe,function(Wt,Zt){if(Et&&(Zt=Wt,Wt=fe[Zt]),gi(Wt))Pt||(Pt=new Nr),Ss(j,fe,Zt,Le,Va,nt,Pt);else{var hn=nt?nt(j[Zt],Wt,Zt+"",j,fe,Pt):r;hn===r&&(hn=Wt),_o(j,Zt,hn)}})}}function Ss(j,fe,Le,nt,Pt,Et,Wt){var Zt=j[Le],hn=fe[Le],_t=Wt.get(hn);if(_t){_o(j,Le,_t);return}var Dn=Et?Et(Zt,hn,Le+"",j,fe,Wt):r,Wn=Dn===r;Wn&&(Dn=hn,Ur(hn)||Xo(hn)?Ur(Zt)?Dn=Zt:ya(Zt)?Dn=ku(Zt):(Wn=!1,Dn=xo(hn,!0)):Ho(hn)||io(hn)?io(Zt)?Dn=Bl(Zt):!gi(Zt)||nt&&Wo(Zt)?(Wn=!1,Dn=xo(hn,!0)):Dn=Zt:Wn=!1),Wn&&(Wt.set(hn,Dn),Pt(Dn,hn,nt,Et,Wt),Wt.delete(hn)),_o(j,Le,Dn)}function Al(j){return function(fe){return xl(fe,j)}}function Il(j,fe){return fe=Z(fe===r?j.length-1:fe,0),function(){for(var Le=arguments,nt=-1,Pt=Z(Le.length-fe,0),Et=Array(Pt);++nt<Pt;)Et[nt]=Le[fe+nt];nt=-1;for(var Wt=Array(fe+1);++nt<fe;)Wt[nt]=Le[nt];return Wt[fe]=Et,Oe(j,this,Wt)}}function Ts(j){if(typeof j=="string")return j;if(Eo(j))return tn?tn.call(j):"";var fe=j+"";return fe=="0"&&1/j==-E?"-0":fe}function As(j){return Ur(j)?j:Rl(j)}function Cl(j,fe){if(fe)return j.slice();var Le=new j.constructor(j.length);return j.copy(Le),Le}function pa(j){var fe=new j.constructor(j.byteLength);return new Gt(fe).set(new Gt(j)),fe}function Cu(j,fe){var Le=fe?pa(j.buffer):j.buffer;return new j.constructor(Le,j.byteOffset,j.byteLength)}function Pu(j,fe,Le){var nt=fe?Le($t(j),!0):$t(j);return se(nt,R,new j.constructor)}function ma(j){var fe=new j.constructor(j.source,tt.exec(j));return fe.lastIndex=j.lastIndex,fe}function eh(j,fe,Le){var nt=fe?Le(pn(j),!0):pn(j);return se(nt,me,new j.constructor)}function th(j){return jt?Object(jt.call(j)):{}}function nh(j,fe){var Le=fe?pa(j.buffer):j.buffer;return new j.constructor(Le,j.byteOffset,j.length)}function ku(j,fe){var Le=-1,nt=j.length;for(fe||(fe=Array(nt));++Le<nt;)fe[Le]=j[Le];return fe}function Pl(j,fe,Le,nt){Le||(Le={});for(var Pt=-1,Et=fe.length;++Pt<Et;){var Wt=fe[Pt],Zt=nt?nt(Le[Wt],j[Wt],Wt,Le,j):r;fa(Le,Wt,Zt===r?j[Wt]:Zt)}return Le}function rh(j,fe){return Pl(j,Is(j),fe)}function kl(j){return Il(function(fe,Le){var nt=-1,Pt=Le.length,Et=Pt>1?Le[Pt-1]:r,Wt=Pt>2?Le[2]:r;for(Et=j.length>3&&typeof Et=="function"?(Pt--,Et):r,Wt&&fr(Le[0],Le[1],Wt)&&(Et=Pt<3?r:Et,Pt=1),fe=Object(fe);++nt<Pt;){var Zt=Le[nt];Zt&&j(fe,Zt,nt,Et)}return fe})}function Ml(j,fe){return function(Le,nt){if(Le==null)return Le;if(!Go(Le))return j(Le,nt);for(var Pt=Le.length,Et=fe?Pt:-1,Wt=Object(Le);(fe?Et--:++Et<Pt)&&nt(Wt[Et],Et,Wt)!==!1;);return Le}}function ga(j){return function(fe,Le,nt){for(var Pt=-1,Et=Object(fe),Wt=nt(fe),Zt=Wt.length;Zt--;){var hn=Wt[j?Zt:++Pt];if(Le(Et[hn],hn,Et)===!1)break}return fe}}function zl(j,fe,Le,nt,Pt,Et){var Wt=Pt&w,Zt=j.length,hn=fe.length;if(Zt!=hn&&!(Wt&&hn>Zt))return!1;var _t=Et.get(j);if(_t&&Et.get(fe))return _t==fe;var Dn=-1,Wn=!0,Jn=Pt&s?new ha:r;for(Et.set(j,fe),Et.set(fe,j);++Dn<Zt;){var Ar=j[Dn],xt=fe[Dn];if(nt)var ki=Wt?nt(xt,Ar,Dn,fe,j,Et):nt(Ar,xt,Dn,j,fe,Et);if(ki!==r){if(ki)continue;Wn=!1;break}if(Jn){if(!T(fe,function(ao,To){if(!Jn.has(To)&&(Ar===ao||Le(Ar,ao,nt,Pt,Et)))return Jn.add(To)})){Wn=!1;break}}else if(!(Ar===xt||Le(Ar,xt,nt,Pt,Et))){Wn=!1;break}}return Et.delete(j),Et.delete(fe),Wn}function Mu(j,fe,Le,nt,Pt,Et,Wt){switch(Le){case de:if(j.byteLength!=fe.byteLength||j.byteOffset!=fe.byteOffset)return!1;j=j.buffer,fe=fe.buffer;case K:return!(j.byteLength!=fe.byteLength||!nt(new Gt(j),new Gt(fe)));case N:case ee:case V:return Pi(+j,+fe);case Y:return j.name==fe.name&&j.message==fe.message;case F:case M:return j==fe+"";case G:var Zt=$t;case b:var hn=Et&w;if(Zt||(Zt=pn),j.size!=fe.size&&!hn)return!1;var _t=Wt.get(j);if(_t)return _t==fe;Et|=s,Wt.set(j,fe);var Dn=zl(Zt(j),Zt(fe),nt,Pt,Et,Wt);return Wt.delete(j),Dn;case D:if(jt)return jt.call(j)==jt.call(fe)}return!1}function Ol(j,fe,Le,nt,Pt,Et){var Wt=Pt&w,Zt=ai(j),hn=Zt.length,_t=ai(fe),Dn=_t.length;if(hn!=Dn&&!Wt)return!1;for(var Wn=hn;Wn--;){var Jn=Zt[Wn];if(!(Wt?Jn in fe:er.call(fe,Jn)))return!1}var Ar=Et.get(j);if(Ar&&Et.get(fe))return Ar==fe;var xt=!0;Et.set(j,fe),Et.set(fe,j);for(var ki=Wt;++Wn<hn;){Jn=Zt[Wn];var ao=j[Jn],To=fe[Jn];if(nt)var Ms=Wt?nt(To,ao,Jn,fe,j,Et):nt(ao,To,Jn,j,fe,Et);if(!(Ms===r?ao===To||Le(ao,To,nt,Pt,Et):Ms)){xt=!1;break}ki||(ki=Jn=="constructor")}if(xt&&!ki){var Ko=j.constructor,Xa=fe.constructor;Ko!=Xa&&"constructor"in j&&"constructor"in fe&&!(typeof Ko=="function"&&Ko instanceof Ko&&typeof Xa=="function"&&Xa instanceof Xa)&&(xt=!1)}return Et.delete(j),Et.delete(fe),xt}function Do(j){return Qc(j,ai,Is)}function zu(){var j=Dt.iteratee||Yo;return j=j===Yo?da:j,arguments.length?j(arguments[0],arguments[1]):j}function ro(j,fe){var Le=j.__data__;return Ou(fe)?Le[typeof fe=="string"?"string":"hash"]:Le.map}function No(j){for(var fe=ai(j),Le=fe.length;Le--;){var nt=fe[Le],Pt=j[nt];fe[Le]=[nt,Pt,Ga(Pt)]}return fe}function Uo(j,fe){var Le=Xe(j,fe);return Iu(Le)?Le:r}var Is=ii?Tn(ii,Object):Ha,kn=wl;(J&&kn(new J(new ArrayBuffer(1)))!=de||ve&&kn(new ve)!=G||Ce&&kn(Ce.resolve())!=H||Me&&kn(new Me)!=b||Ve&&kn(new Ve)!=q)&&(kn=function(j){var fe=gr.call(j),Le=fe==re?j.constructor:r,nt=Le?mi(Le):r;if(nt)switch(nt){case Ge:return de;case st:return G;case mt:return H;case ot:return b;case Nt:return q}return fe});function hr(j,fe,Le){fe=wo(fe,j)?[fe]:As(fe);for(var nt,Pt=-1,Wt=fe.length;++Pt<Wt;){var Et=bo(fe[Pt]);if(!(nt=j!=null&&Le(j,Et)))break;j=j[Et]}if(nt)return nt;var Wt=j?j.length:0;return!!Wt&&Zo(Wt)&&rr(Et,Wt)&&(Ur(j)||io(j))}function ih(j){var fe=j.length,Le=j.constructor(fe);return fe&&typeof j[0]=="string"&&er.call(j,"index")&&(Le.index=j.index,Le.input=j.input),Le}function jn(j){return typeof j.constructor=="function"&&!Vo(j)?yl(An(j)):{}}function $o(j,fe,Le,nt){var Pt=j.constructor;switch(fe){case K:return pa(j);case N:case ee:return new Pt(+j);case de:return Cu(j,nt);case ye:case xe:case te:case ae:case oe:case ue:case Ee:case Pe:case ce:return nh(j,nt);case G:return Pu(j,nt,Le);case V:case M:return new Pt(j);case F:return ma(j);case b:return eh(j,nt,Le);case D:return th(j)}}function rr(j,fe){return fe=fe==null?C:fe,!!fe&&(typeof j=="number"||St.test(j))&&j>-1&&j%1==0&&j<fe}function fr(j,fe,Le){if(!gi(Le))return!1;var nt=typeof fe;return(nt=="number"?Go(Le)&&rr(fe,Le.length):nt=="string"&&fe in Le)?Pi(Le[fe],j):!1}function wo(j,fe){if(Ur(j))return!1;var Le=typeof j;return Le=="number"||Le=="symbol"||Le=="boolean"||j==null||Eo(j)?!0:be.test(j)||!ke.test(j)||fe!=null&&j in Object(fe)}function Ou(j){var fe=typeof j;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?j!=="__proto__":j===null}function Ll(j){return!!Hr&&Hr in j}function Vo(j){var fe=j&&j.constructor,Le=typeof fe=="function"&&fe.prototype||un;return j===Le}function Ga(j){return j===j&&!gi(j)}function Cs(j,fe){return function(Le){return Le==null?!1:Le[j]===fe&&(fe!==r||j in Object(Le))}}function Ps(j){var fe=[];if(j!=null)for(var Le in Object(j))fe.push(Le);return fe}var Rl=Wa(function(j){j=va(j);var fe=[];return Ie.test(j)&&fe.push(""),j.replace(Be,function(Le,nt,Pt,Et){fe.push(Pt?Et.replace(et,"$1"):nt||Le)}),fe});function bo(j){if(typeof j=="string"||Eo(j))return j;var fe=j+"";return fe=="0"&&1/j==-E?"-0":fe}function mi(j){if(j!=null){try{return cn.call(j)}catch{}try{return j+""}catch{}}return""}function Ci(j){for(var fe=-1,Le=j?j.length:0,nt=0,Pt=[];++fe<Le;){var Et=j[fe];Et&&(Pt[nt++]=Et)}return Pt}function Fl(j,fe){var Le=Ur(j)?Ke:Tu;return Le(j,zu(fe,3))}function Wa(j,fe){if(typeof j!="function"||fe&&typeof fe!="function")throw new TypeError(d);var Le=function(){var nt=arguments,Pt=fe?fe.apply(this,nt):nt[0],Et=Le.cache;if(Et.has(Pt))return Et.get(Pt);var Wt=j.apply(this,nt);return Le.cache=Et.set(Pt,Wt),Wt};return Le.cache=new(Wa.Cache||Ki),Le}Wa.Cache=Ki;function Lu(j){return xo(j,!1,!0)}function Pi(j,fe){return j===fe||j!==j&&fe!==fe}function io(j){return ya(j)&&er.call(j,"callee")&&(!tr.call(j,"callee")||gr.call(j)==S)}var Ur=Array.isArray;function Go(j){return j!=null&&Zo(j.length)&&!Wo(j)}function ya(j){return oo(j)&&Go(j)}var ks=ca||So;function Za(j){if(Go(j)&&(Ur(j)||typeof j=="string"||typeof j.splice=="function"||ks(j)||io(j)))return!j.length;var fe=kn(j);if(fe==G||fe==b)return!j.size;if(Ue||Vo(j))return!Ae(j).length;for(var Le in j)if(er.call(j,Le))return!1;return!0}function Wo(j){var fe=gi(j)?gr.call(j):"";return fe==W||fe==$}function Zo(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=C}function gi(j){var fe=typeof j;return!!j&&(fe=="object"||fe=="function")}function oo(j){return!!j&&typeof j=="object"}function Ho(j){if(!oo(j)||gr.call(j)!=re||Qe(j))return!1;var fe=An(j);if(fe===null)return!0;var Le=er.call(fe,"constructor")&&fe.constructor;return typeof Le=="function"&&Le instanceof Le&&cn.call(Le)==pi}function Eo(j){return typeof j=="symbol"||oo(j)&&gr.call(j)==D}var Xo=L?De(L):Bn;function Bl(j){return Pl(j,Nl(j))}function va(j){return j==null?"":Ts(j)}function jl(j,fe,Le){var nt=j==null?r:xl(j,fe);return nt===r?Le:nt}function Dl(j,fe){return j!=null&&hr(j,fe,bl)}function ai(j){return Go(j)?bs(j):$a(j)}function Nl(j){return Go(j)?bs(j,!0):Sl(j)}var Ru=kl(function(j,fe,Le){Va(j,fe,Le)});function _a(j){return j}function Yo(j){return da(typeof j=="function"?j:xo(j,!0))}function ir(j){return wo(j)?z(bo(j)):Al(j)}function Ha(){return[]}function So(){return!1}Dt.compact=Ci,Dt.iteratee=Yo,Dt.keys=ai,Dt.keysIn=Nl,Dt.memoize=Wa,Dt.merge=Ru,Dt.property=ir,Dt.toPlainObject=Bl,Dt.clone=Lu,Dt.eq=Pi,Dt.forEach=Fl,Dt.get=jl,Dt.hasIn=Dl,Dt.identity=_a,Dt.isArguments=io,Dt.isArray=Ur,Dt.isArrayLike=Go,Dt.isArrayLikeObject=ya,Dt.isBuffer=ks,Dt.isEmpty=Za,Dt.isFunction=Wo,Dt.isLength=Zo,Dt.isObject=gi,Dt.isObjectLike=oo,Dt.isPlainObject=Ho,Dt.isSymbol=Eo,Dt.isTypedArray=Xo,Dt.stubArray=Ha,Dt.stubFalse=So,Dt.toString=va,Dt.each=Fl,Dt.VERSION=l,_n&&((_n.exports=Dt)._=Dt,En._=Dt)}).call(Gs)})(L0,L0.exports);var S1={},Wm={};Wm.RADIUS=6378137;Wm.FLATTENING=1/298.257223563;Wm.POLAR_RADIUS=63567523142e-4;var Eb=Wm;S1.geometry=JS;S1.ring=R0;function JS(e){var t=0,r;switch(e.type){case"Polygon":return Sb(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=Sb(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=JS(e.geometries[r]);return t}}function Sb(e){var t=0;if(e&&e.length>0){t+=Math.abs(R0(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(R0(e[r]))}return t}function R0(e){var t,r,l,c,d,y,s,w=0,E=e.length;if(E>2){for(s=0;s<E;s++)s===E-2?(c=E-2,d=E-1,y=0):s===E-1?(c=E-1,d=0,y=1):(c=s,d=s+1,y=s+2),t=e[c],r=e[d],l=e[y],w+=(by(l[0])-by(t[0]))*Math.sin(by(r[1]));w=w*Eb.RADIUS*Eb.RADIUS/2}return w}function by(e){return e*Math.PI/180}var s4=S1,l4=mp;function mp(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(F0(mp,t)),e;case"GeometryCollection":return e.geometries=e.geometries.map(F0(mp,t)),e;case"Feature":return e.geometry=mp(e.geometry,t),e;case"Polygon":case"MultiPolygon":return u4(e,t);default:return e}}function F0(e,t){return function(r){return e(r,t)}}function u4(e,t){return e.type==="Polygon"?e.coordinates=Tb(e.coordinates,t):e.type==="MultiPolygon"&&(e.coordinates=e.coordinates.map(F0(Tb,t))),e}function Tb(e,t){t=!!t,e[0]=Ab(e[0],t);for(var r=1;r<e.length;r++)e[r]=Ab(e[r],!t);return e}function Ab(e,t){return c4(e)===t?e:e.reverse()}function c4(e){return s4.ring(e)>=0}var h4=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}],f4=h4,Ln=L0.exports,Gd=l4,gp={};f4.forEach(function(e){if(e.polygon==="all")gp[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",r={};e.values.forEach(function(l){r[l]=!0}),gp[e.key]={},gp[e.key][t]=r}});function d4(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Ln.merge(e,t)}var qp={};qp=function(e,t,r){t=Ln.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:gp,deduplicator:d4},t);var l;return typeof XMLDocument!="undefined"&&e instanceof XMLDocument||typeof XMLDocument=="undefined"&&e.childNodes?l=d(e):l=c(e),l;function c(w){var E=new Array,C=new Array,S=new Array;function P(H){var F=Ln.clone(H);F.lat=H.center.lat,F.lon=H.center.lon,F.__is_center_placeholder=!0,E.push(F)}function N(H){var F=Ln.clone(H);F.nodes=[];function b(M,D,q){var K={type:"node",id:"_"+F.type+"/"+F.id+"bounds"+q,lat:M,lon:D};F.nodes.push(K.id),E.push(K)}b(F.bounds.minlat,F.bounds.minlon,1),b(F.bounds.maxlat,F.bounds.minlon,2),b(F.bounds.maxlat,F.bounds.maxlon,3),b(F.bounds.minlat,F.bounds.maxlon,4),F.nodes.push(F.nodes[0]),F.__is_bounds_placeholder=!0,C.push(F)}function ee(H){function F(b,M,D){var q={type:"node",id:D,lat:b,lon:M};E.push(q)}Ln.isArray(H.nodes)||(H.nodes=H.geometry.map(function(b){return b!==null?"_anonymous@"+b.lat+"/"+b.lon:"_anonymous@unknown_location"})),H.geometry.forEach(function(b,M){b&&F(b.lat,b.lon,H.nodes[M])})}function Y(H){function F(M,D,q){var K={type:"node",id:q,lat:M,lon:D};E.push(K)}function b(M,D){if(C.some(function(de){return de.type=="way"&&de.id==D}))return;var q={type:"way",id:D,nodes:[]};function K(de,ye){var xe={type:"node",id:"_anonymous@"+de+"/"+ye,lat:de,lon:ye};q.nodes.push(xe.id),E.push(xe)}M.forEach(function(de){de?K(de.lat,de.lon):q.nodes.push(void 0)}),C.push(q)}H.members.forEach(function(M,D){M.type=="node"?M.lat&&F(M.lat,M.lon,M.ref):M.type=="way"&&M.geometry&&(M.ref="_fullGeom"+M.ref,b(M.geometry,M.ref))})}for(var W=0;W<w.elements.length;W++)switch(w.elements[W].type){case"node":var $=w.elements[W];E.push($);break;case"way":var G=Ln.clone(w.elements[W]);G.nodes=Ln.clone(G.nodes),C.push(G),G.center&&P(G),G.geometry?ee(G):G.bounds&&N(G);break;case"relation":var V=Ln.clone(w.elements[W]);V.members=Ln.clone(V.members),S.push(V);var re=V.members&&V.members.some(function(H){return H.type=="node"&&H.lat||H.type=="way"&&H.geometry&&H.geometry.length>0});V.center&&P(V),re?Y(V):V.bounds&&N(V);break}return y(E,C,S)}function d(w){var E=new Array,C=new Array,S=new Array;function P(V,re,H){V.hasAttribute(H)&&(re[H]=V.getAttribute(H))}function N(V,re){var H=Ln.clone(V);P(re,H,"lat"),P(re,H,"lon"),H.__is_center_placeholder=!0,E.push(H)}function ee(V,re){var H=Ln.clone(V);H.nodes=[];function F(b,M,D){var q={type:"node",id:"_"+H.type+"/"+H.id+"bounds"+D,lat:b,lon:M};H.nodes.push(q.id),E.push(q)}F(re.getAttribute("minlat"),re.getAttribute("minlon"),1),F(re.getAttribute("maxlat"),re.getAttribute("minlon"),2),F(re.getAttribute("maxlat"),re.getAttribute("maxlon"),3),F(re.getAttribute("minlat"),re.getAttribute("maxlon"),4),H.nodes.push(H.nodes[0]),H.__is_bounds_placeholder=!0,C.push(H)}function Y(V,re){function H(F,b,M){var D={type:"node",id:M,lat:F,lon:b};return E.push(D),D.id}Ln.isArray(V.nodes)||(V.nodes=[],Ln.each(re,function(F,b){V.nodes.push("_anonymous@"+F.getAttribute("lat")+"/"+F.getAttribute("lon"))})),Ln.each(re,function(F,b){F.getAttribute("lat")&&H(F.getAttribute("lat"),F.getAttribute("lon"),V.nodes[b])})}function W(V,re){function H(b,M,D){var q={type:"node",id:D,lat:b,lon:M};E.push(q)}function F(b,M){if(C.some(function(K){return K.type=="way"&&K.id==M}))return;var D={type:"way",id:M,nodes:[]};function q(K,de){var ye={type:"node",id:"_anonymous@"+K+"/"+de,lat:K,lon:de};D.nodes.push(ye.id),E.push(ye)}Ln.each(b,function(K){K.getAttribute("lat")?q(K.getAttribute("lat"),K.getAttribute("lon")):D.nodes.push(void 0)}),C.push(D)}Ln.each(re,function(b,M){V.members[M].type=="node"?b.getAttribute("lat")&&H(b.getAttribute("lat"),b.getAttribute("lon"),V.members[M].ref):V.members[M].type=="way"&&b.getElementsByTagName("nd").length>0&&(V.members[M].ref="_fullGeom"+V.members[M].ref,F(b.getElementsByTagName("nd"),V.members[M].ref))})}Ln.each(w.getElementsByTagName("node"),function(V,re){var H={};Ln.each(V.getElementsByTagName("tag"),function(b){H[b.getAttribute("k")]=b.getAttribute("v")});var F={type:"node"};P(V,F,"id"),P(V,F,"lat"),P(V,F,"lon"),P(V,F,"version"),P(V,F,"timestamp"),P(V,F,"changeset"),P(V,F,"uid"),P(V,F,"user"),Ln.isEmpty(H)||(F.tags=H),E.push(F)});var $,G;return Ln.each(w.getElementsByTagName("way"),function(V,re){var H={},F=[];Ln.each(V.getElementsByTagName("tag"),function(D){H[D.getAttribute("k")]=D.getAttribute("v")});var b=!1;Ln.each(V.getElementsByTagName("nd"),function(D,q){var K;(K=D.getAttribute("ref"))&&(F[q]=K),!b&&D.getAttribute("lat")&&(b=!0)});var M={type:"way"};P(V,M,"id"),P(V,M,"version"),P(V,M,"timestamp"),P(V,M,"changeset"),P(V,M,"uid"),P(V,M,"user"),F.length>0&&(M.nodes=F),Ln.isEmpty(H)||(M.tags=H),($=V.getElementsByTagName("center")[0])&&N(M,$),b?Y(M,V.getElementsByTagName("nd")):(G=V.getElementsByTagName("bounds")[0])&&ee(M,G),C.push(M)}),Ln.each(w.getElementsByTagName("relation"),function(V,re){var H={},F=[];Ln.each(V.getElementsByTagName("tag"),function(D){H[D.getAttribute("k")]=D.getAttribute("v")});var b=!1;Ln.each(V.getElementsByTagName("member"),function(D,q){F[q]={},P(D,F[q],"ref"),P(D,F[q],"role"),P(D,F[q],"type"),(!b&&F[q].type=="node"&&D.getAttribute("lat")||F[q].type=="way"&&D.getElementsByTagName("nd").length>0)&&(b=!0)});var M={type:"relation"};P(V,M,"id"),P(V,M,"version"),P(V,M,"timestamp"),P(V,M,"changeset"),P(V,M,"uid"),P(V,M,"user"),F.length>0&&(M.members=F),Ln.isEmpty(H)||(M.tags=H),($=V.getElementsByTagName("center")[0])&&N(M,$),b?W(M,V.getElementsByTagName("member")):(G=V.getElementsByTagName("bounds")[0])&&ee(M,G),S.push(M)}),y(E,C,S)}function y(w,E,C){function S(ke,be){if(typeof be!="object"&&(be={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ke,be);for(var Ie in ke)if(t.uninterestingTags[Ie]!==!0&&!(be[Ie]===!0||be[Ie]===ke[Ie]))return!0;return!1}function P(ke){var be={timestamp:ke.timestamp,version:ke.version,changeset:ke.changeset,user:ke.user,uid:ke.uid};for(var Ie in be)be[Ie]===void 0&&delete be[Ie];return be}for(var N=new Object,ee=new Object,Y=0;Y<w.length;Y++){var W=w[Y];N[W.id]!==void 0&&(W=t.deduplicator(W,N[W.id])),N[W.id]=W,typeof W.tags!="undefined"&&S(W.tags)&&(ee[W.id]=!0)}for(var Y=0;Y<C.length;Y++)if(Ln.isArray(C[Y].members))for(var $=0;$<C[Y].members.length;$++)C[Y].members[$].type=="node"&&(ee[C[Y].members[$].ref]=!0);for(var G=new Object,V=new Object,Y=0;Y<E.length;Y++){var re=E[Y];if(G[re.id]&&(re=t.deduplicator(re,G[re.id])),G[re.id]=re,Ln.isArray(re.nodes))for(var $=0;$<re.nodes.length;$++)typeof re.nodes[$]!="object"&&(V[re.nodes[$]]=!0,re.nodes[$]=N[re.nodes[$]])}var H=new Array;for(var F in N){var W=N[F];(!V[F]||ee[F])&&H.push(W)}for(var b=new Array,Y=0;Y<C.length;Y++){var M=C[Y];b[M.id]&&(M=t.deduplicator(M,b[M.id])),b[M.id]=M}var D={node:{},way:{},relation:{}};for(var F in b){var M=b[F];if(!Ln.isArray(M.members)){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"ignored because it has no members");continue}for(var $=0;$<M.members.length;$++){var q=M.members[$].type,K=M.members[$].ref;if(typeof K!="number"&&(K=K.replace("_fullGeom","")),!D[q]){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"member",q+"/"+K,"ignored because it has an invalid type");continue}typeof D[q][K]=="undefined"&&(D[q][K]=[]),D[q][K].push({role:M.members[$].role,rel:M.id,reltags:M.tags})}}var de,ye=[];for(Y=0;Y<H.length;Y++){if(typeof H[Y].lon=="undefined"||typeof H[Y].lat=="undefined"){t.verbose&&console.warn("POI",H[Y].type+"/"+H[Y].id,"ignored because it lacks coordinates");continue}var xe={type:"Feature",id:H[Y].type+"/"+H[Y].id,properties:{type:H[Y].type,id:H[Y].id,tags:H[Y].tags||{},relations:D.node[H[Y].id]||[],meta:P(H[Y])},geometry:{type:"Point",coordinates:[+H[Y].lon,+H[Y].lat]}};H[Y].__is_center_placeholder&&(xe.properties.geometry="center"),r?r(xe):ye.push(xe)}for(var te=[],ae=[],Y=0;Y<C.length;Y++)if(b[C[Y].id]===C[Y]){if(typeof C[Y].tags!="undefined"&&(C[Y].tags.type=="route"||C[Y].tags.type=="waterway")){let be=function(Ie){var Be=!1,Ze;Ze=Ie.members.filter(function(St){return St.type==="way"}),Ze=Ze.map(function(St){var ft=G[St.ref];if(ft===void 0||ft.nodes===void 0){t.verbose&&console.warn("Route "+Ie.type+"/"+Ie.id,"tainted by a missing or incomplete  way",St.type+"/"+St.ref),Be=!0;return}return{id:St.ref,role:St.role,way:ft,nodes:ft.nodes.filter(function(At){return At!==void 0?!0:(Be=!0,t.verbose&&console.warn("Route",Ie.type+"/"+Ie.id,"tainted by a way",St.type+"/"+St.ref,"with a missing node"),!1)})}}),Ze=Ln.compact(Ze);var et;et=Ey(Ze);var tt=[];if(tt=Ln.compact(et.map(function(St){return Ln.compact(St.map(function(ft){return[+ft.lon,+ft.lat]}))})),tt.length==0)return t.verbose&&console.warn("Route",Ie.type+"/"+Ie.id,"contains no coordinates"),!1;var ct={type:"Feature",id:Ie.type+"/"+Ie.id,properties:{type:Ie.type,id:Ie.id,tags:Ie.tags||{},relations:D[Ie.type][Ie.id]||[],meta:P(Ie)},geometry:{type:tt.length===1?"LineString":"MultiLineString",coordinates:tt.length===1?tt[0]:tt}};return Be&&(t.verbose&&console.warn("Route",Ie.type+"/"+Ie.id,"is tainted"),ct.properties.tainted=!0),ct};if(!Ln.isArray(C[Y].members)){t.verbose&&console.warn("Route",C[Y].type+"/"+C[Y].id,"ignored because it has no members");continue}if(C[Y].members.forEach(function(Ie){G[Ie.ref]&&!S(G[Ie.ref].tags)&&(G[Ie.ref].is_skippablerelationmember=!0)}),xe=be(C[Y]),xe===!1){t.verbose&&console.warn("Route relation",C[Y].type+"/"+C[Y].id,"ignored because it has invalid geometry");continue}r?r(Gd(xe)):ae.push(xe)}if(typeof C[Y].tags!="undefined"&&(C[Y].tags.type=="multipolygon"||C[Y].tags.type=="boundary")){let Ie=function(Be,Ze){var et=!1,tt=ue?"way":"relation",ct=typeof Be.id=="number"?Be.id:+Be.id.replace("_fullGeom",""),St;St=Ze.members.filter(function(ge){return ge.type==="way"}),St=St.map(function(ge){var L=G[ge.ref];if(L===void 0||L.nodes===void 0){t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"tainted by a missing or incomplete way",ge.type+"/"+ge.ref),et=!0;return}return{id:ge.ref,role:ge.role||"outer",way:L,nodes:L.nodes.filter(function(R){return R!==void 0?!0:(et=!0,t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"tainted by a way",ge.type+"/"+ge.ref,"with a missing node"),!1)})}}),St=Ln.compact(St);var ft,At;ft=Ey(St.filter(function(ge){return ge.role==="outer"})),At=Ey(St.filter(function(ge){return ge.role==="inner"}));var qt;function Bt(ge){var L=function(at,se){for(var T=0;T<se.length;T++)if(me(se[T],at))return!0;return!1},R=function(at){return at.map(function(se){return[+se.lat,+se.lon]})},me=function(at,se){for(var T=at[0],z=at[1],we=!1,De=0,Xe=se.length-1;De<se.length;Xe=De++){var Qe=se[De][0],$t=se[De][1],Tn=se[Xe][0],pn=se[Xe][1],dt=$t>z!=pn>z&&T<(Tn-Qe)*(z-$t)/(pn-$t)+Qe;dt&&(we=!we)}return we},Oe,Ke;for(ge=R(ge),Oe=0;Oe<ft.length;Oe++)if(Ke=R(ft[Oe]),L(Ke,ge))return Oe}qt=ft.map(function(ge){return[ge]});for(var ln=0;ln<At.length;ln++){var En=Bt(At[ln]);En!==void 0?qt[En].push(At[ln]):t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"contains an inner ring with no containing outer")}var _n=[];if(_n=Ln.compact(qt.map(function(ge){var L=Ln.compact(ge.map(function(R){if(R.length<4){t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"contains a ring with less than four nodes");return}return Ln.compact(R.map(function(me){return[+me.lon,+me.lat]}))}));if(L.length==0){t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"contains an empty ring cluster");return}return L})),_n.length==0)return t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"contains no coordinates"),!1;var nn="MultiPolygon";_n.length===1&&(nn="Polygon",_n=_n[0]);var Pn={type:"Feature",id:Be.type+"/"+ct,properties:{type:Be.type,id:ct,tags:Be.tags||{},relations:D[Be.type][Be.id]||[],meta:P(Be)},geometry:{type:nn,coordinates:_n}};return et&&(t.verbose&&console.warn("Multipolygon",tt+"/"+ct,"is tainted"),Pn.properties.tainted=!0),Pn};if(!Ln.isArray(C[Y].members)){t.verbose&&console.warn("Multipolygon",C[Y].type+"/"+C[Y].id,"ignored because it has no members");continue}for(var oe=0,$=0;$<C[Y].members.length;$++)C[Y].members[$].role=="outer"?oe++:t.verbose&&C[Y].members[$].role!="inner"&&console.warn("Multipolygon",C[Y].type+"/"+C[Y].id,"member",C[Y].members[$].type+"/"+C[Y].members[$].ref,'ignored because it has an invalid role: "'+C[Y].members[$].role+'"');if(C[Y].members.forEach(function(Be){G[Be.ref]&&(Be.role==="outer"&&!S(G[Be.ref].tags,C[Y].tags)&&(G[Be.ref].is_skippablerelationmember=!0),Be.role==="inner"&&!S(G[Be.ref].tags)&&(G[Be.ref].is_skippablerelationmember=!0))}),oe==0){t.verbose&&console.warn("Multipolygon relation",C[Y].type+"/"+C[Y].id,"ignored because it has no outer ways");continue}var ue=!1;oe==1&&!S(C[Y].tags,{type:!0})&&(ue=!0);var xe=null;if(!ue)xe=Ie(C[Y],C[Y]);else{var Ee=C[Y].members.filter(function(Be){return Be.role==="outer"})[0];if(Ee=G[Ee.ref],Ee===void 0){t.verbose&&console.warn("Multipolygon relation",C[Y].type+"/"+C[Y].id,"ignored because outer way",Ee.type+"/"+Ee.ref,"is missing");continue}Ee.is_skippablerelationmember=!0,xe=Ie(Ee,C[Y])}if(xe===!1){t.verbose&&console.warn("Multipolygon relation",C[Y].type+"/"+C[Y].id,"ignored because it has invalid geometry");continue}r?r(Gd(xe)):ae.push(xe)}}for(var Y=0;Y<E.length;Y++)if(G[E[Y].id]===E[Y]){if(!Ln.isArray(E[Y].nodes)){t.verbose&&console.warn("Way",E[Y].type+"/"+E[Y].id,"ignored because it has no nodes");continue}if(!E[Y].is_skippablerelationmember){typeof E[Y].id!="number"&&(E[Y].id=+E[Y].id.replace("_fullGeom","")),E[Y].tainted=!1,E[Y].hidden=!1;var Pe=new Array;for($=0;$<E[Y].nodes.length;$++)typeof E[Y].nodes[$]=="object"?Pe.push([+E[Y].nodes[$].lon,+E[Y].nodes[$].lat]):(t.verbose&&console.warn("Way",E[Y].type+"/"+E[Y].id,"is tainted by an invalid node"),E[Y].tainted=!0);if(Pe.length<=1){t.verbose&&console.warn("Way",E[Y].type+"/"+E[Y].id,"ignored because it contains too few nodes");continue}var ce="LineString";typeof E[Y].nodes[0]!="undefined"&&typeof E[Y].nodes[E[Y].nodes.length-1]!="undefined"&&E[Y].nodes[0].id===E[Y].nodes[E[Y].nodes.length-1].id&&(typeof E[Y].tags!="undefined"&&s(E[Y].tags)||E[Y].__is_bounds_placeholder)&&(ce="Polygon",Pe=[Pe]);var xe={type:"Feature",id:E[Y].type+"/"+E[Y].id,properties:{type:E[Y].type,id:E[Y].id,tags:E[Y].tags||{},relations:D.way[E[Y].id]||[],meta:P(E[Y])},geometry:{type:ce,coordinates:Pe}};E[Y].tainted&&(t.verbose&&console.warn("Way",E[Y].type+"/"+E[Y].id,"is tainted"),xe.properties.tainted=!0),E[Y].__is_bounds_placeholder&&(xe.properties.geometry="bounds"),r?r(Gd(xe)):ce=="LineString"?te.push(xe):ae.push(xe)}}return r?!0:(de={type:"FeatureCollection",features:[]},de.features=de.features.concat(ae),de.features=de.features.concat(te),de.features=de.features.concat(ye),t.flatProperties&&de.features.forEach(function(ke){ke.properties=Ln.merge(ke.properties.meta,ke.properties.tags,{id:ke.properties.type+"/"+ke.properties.id})}),de=Gd(de),de)}function s(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var C in w){var S=w[C],P=E[C];if(typeof P!="undefined"&&S!=="no"&&(P===!0||P.included_values&&P.included_values[S]===!0||P.excluded_values&&P.excluded_values[S]!==!0))return!0}return!1}};function Ey(e){for(var t=function(S){return S[0]},r=function(S){return S[S.length-1]},l=function(S,P){return S!==void 0&&P!==void 0&&S.id===P.id},c=[],d,y,s,w,E,C;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!l(t(d),r(d));){for(y=t(d),s=r(d),w=0;w<e.length;w++)if(C=e[w].nodes,l(s,t(C))){E=d.push,C=C.slice(1);break}else if(l(s,r(C))){E=d.push,C=C.slice(0,-1).reverse();break}else if(l(y,r(C))){E=d.unshift,C=C.slice(0,-1);break}else if(l(y,t(C))){E=d.unshift,C=C.slice(1).reverse();break}else C=E=null;if(!C)break;e.splice(w,1),E.apply(d,C)}return c}qp.toGeojson=qp;var EL=qp;function QS(e,t,r){r===void 0&&(r={});var l={type:"Feature"};return(r.id===0||r.id)&&(l.id=r.id),r.bbox&&(l.bbox=r.bbox),l.properties=t||{},l.geometry=e,l}function p4(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ib(e[0])||!Ib(e[1]))throw new Error("coordinates must contain numbers");var l={type:"Point",coordinates:e};return QS(l,t,r)}function SL(e,t,r){r===void 0&&(r={});for(var l=0,c=e;l<c.length;l++){var d=c[l];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<d[d.length-1].length;y++)if(d[d.length-1][y]!==d[0][y])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return QS(s,t,r)}function Ib(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function eT(e,t,r){if(e!==null)for(var l,c,d,y,s,w,E,C=0,S=0,P,N=e.type,ee=N==="FeatureCollection",Y=N==="Feature",W=ee?e.features.length:1,$=0;$<W;$++){E=ee?e.features[$].geometry:Y?e.geometry:e,P=E?E.type==="GeometryCollection":!1,s=P?E.geometries.length:1;for(var G=0;G<s;G++){var V=0,re=0;if(y=P?E.geometries[G]:E,y!==null){w=y.coordinates;var H=y.type;switch(C=r&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(t(w,S,$,V,re)===!1)return!1;S++,V++;break;case"LineString":case"MultiPoint":for(l=0;l<w.length;l++){if(t(w[l],S,$,V,re)===!1)return!1;S++,H==="MultiPoint"&&V++}H==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(l=0;l<w.length;l++){for(c=0;c<w[l].length-C;c++){if(t(w[l][c],S,$,V,re)===!1)return!1;S++}H==="MultiLineString"&&V++,H==="Polygon"&&re++}H==="Polygon"&&V++;break;case"MultiPolygon":for(l=0;l<w.length;l++){for(re=0,c=0;c<w[l].length;c++){for(d=0;d<w[l][c].length-C;d++){if(t(w[l][c][d],S,$,V,re)===!1)return!1;S++}re++}V++}break;case"GeometryCollection":for(l=0;l<y.geometries.length;l++)if(eT(y.geometries[l],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m4(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function g4(e){return e.type==="Feature"?e.geometry:e}function TL(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var l=m4(e),c=g4(t),d=c.type,y=t.bbox,s=c.coordinates;if(y&&y4(l,y)===!1)return!1;d==="Polygon"&&(s=[s]);for(var w=!1,E=0;E<s.length&&!w;E++)if(Cb(l,s[E][0],r.ignoreBoundary)){for(var C=!1,S=1;S<s[E].length&&!C;)Cb(l,s[E][S],!r.ignoreBoundary)&&(C=!0),S++;C||(w=!0)}return w}function Cb(e,t,r){var l=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var y=t[c][0],s=t[c][1],w=t[d][0],E=t[d][1],C=e[1]*(y-w)+s*(w-e[0])+E*(e[0]-y)===0&&(y-e[0])*(w-e[0])<=0&&(s-e[1])*(E-e[1])<=0;if(C)return!r;var S=s>e[1]!=E>e[1]&&e[0]<(w-y)*(e[1]-s)/(E-s)+y;S&&(l=!l)}return l}function y4(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function AL(e,t){t===void 0&&(t={});var r=0,l=0,c=0;return eT(e,function(d){r+=d[0],l+=d[1],c++},!0),p4([r/c,l/c],t.properties)}var v4={};class Ai{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const d=r[c],y=t+d,s=Math.abs(t)<Math.abs(d)?t-(y-d):d-(y-t);s&&(r[l++]=s),t=y}return r[l]=t,this._n=l+1,this}valueOf(){const t=this._partials;let r=this._n,l,c,d,y=0;if(r>0){for(y=t[--r];r>0&&(l=y,c=t[--r],y=l+c,d=c-(y-l),!d););r>0&&(d<0&&t[r-1]<0||d>0&&t[r-1]>0)&&(c=d*2,l=y+c,c==l-y&&(y=l))}return y}}function*_4(e){for(const t of e)yield*t}function tT(e){return Array.from(_4(e))}function _c(e,t,r){e=+e,t=+t,r=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+r;for(var l=-1,c=Math.max(0,Math.ceil((t-e)/r))|0,d=new Array(c);++l<c;)d[l]=e+l*r;return d}var dn=1e-6,Ff=1e-12,Fn=Math.PI,Br=Fn/2,Jp=Fn/4,Wi=Fn*2,ur=180/Fn,mn=Fn/180,$n=Math.abs,Jc=Math.atan,Zi=Math.atan2,on=Math.cos,Wd=Math.ceil,nT=Math.exp,B0=Math.hypot,Qp=Math.log,Sy=Math.pow,Kt=Math.sin,Lo=Math.sign||function(e){return e>0?1:e<0?-1:0},ri=Math.sqrt,T1=Math.tan;function rT(e){return e>1?0:e<-1?Fn:Math.acos(e)}function Hi(e){return e>1?Br:e<-1?-Br:Math.asin(e)}function Pb(e){return(e=Kt(e/2))*e}function Pr(){}function em(e,t){e&&Mb.hasOwnProperty(e.type)&&Mb[e.type](e,t)}var kb={Feature:function(e,t){em(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,l=-1,c=r.length;++l<c;)em(r[l].geometry,t)}},Mb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)e=r[l],t.point(e[0],e[1],e[2])},LineString:function(e,t){j0(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)j0(r[l],t,0)},Polygon:function(e,t){zb(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)zb(r[l],t)},GeometryCollection:function(e,t){for(var r=e.geometries,l=-1,c=r.length;++l<c;)em(r[l],t)}};function j0(e,t,r){var l=-1,c=e.length-r,d;for(t.lineStart();++l<c;)d=e[l],t.point(d[0],d[1],d[2]);t.lineEnd()}function zb(e,t){var r=-1,l=e.length;for(t.polygonStart();++r<l;)j0(e[r],t,1);t.polygonEnd()}function ia(e,t){e&&kb.hasOwnProperty(e.type)?kb[e.type](e,t):em(e,t)}var tm=new Ai,nm=new Ai,iT,oT,D0,N0,U0,La={point:Pr,lineStart:Pr,lineEnd:Pr,polygonStart:function(){tm=new Ai,La.lineStart=x4,La.lineEnd=w4},polygonEnd:function(){var e=+tm;nm.add(e<0?Wi+e:e),this.lineStart=this.lineEnd=this.point=Pr},sphere:function(){nm.add(Wi)}};function x4(){La.point=b4}function w4(){aT(iT,oT)}function b4(e,t){La.point=aT,iT=e,oT=t,e*=mn,t*=mn,D0=e,N0=on(t=t/2+Jp),U0=Kt(t)}function aT(e,t){e*=mn,t*=mn,t=t/2+Jp;var r=e-D0,l=r>=0?1:-1,c=l*r,d=on(t),y=Kt(t),s=U0*y,w=N0*d+s*on(c),E=s*l*Kt(c);tm.add(Zi(E,w)),D0=e,N0=d,U0=y}function E4(e){return nm=new Ai,ia(e,La),nm*2}function rm(e){return[Zi(e[1],e[0]),Hi(e[2])]}function hu(e){var t=e[0],r=e[1],l=on(r);return[l*on(t),l*Kt(t),Kt(r)]}function Zd(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ty(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Hd(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function im(e){var t=ri(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Cr,eo,Lr,fo,Jl,sT,lT,zc,gf,Vs,gs,ss={point:$0,lineStart:Ob,lineEnd:Lb,polygonStart:function(){ss.point=cT,ss.lineStart=S4,ss.lineEnd=T4,gf=new Ai,La.polygonStart()},polygonEnd:function(){La.polygonEnd(),ss.point=$0,ss.lineStart=Ob,ss.lineEnd=Lb,tm<0?(Cr=-(Lr=180),eo=-(fo=90)):gf>dn?fo=90:gf<-dn&&(eo=-90),gs[0]=Cr,gs[1]=Lr},sphere:function(){Cr=-(Lr=180),eo=-(fo=90)}};function $0(e,t){Vs.push(gs=[Cr=e,Lr=e]),t<eo&&(eo=t),t>fo&&(fo=t)}function uT(e,t){var r=hu([e*mn,t*mn]);if(zc){var l=Dc(zc,r),c=[l[1],-l[0],0],d=Dc(c,l);im(d),d=rm(d);var y=e-Jl,s=y>0?1:-1,w=d[0]*ur*s,E,C=$n(y)>180;C^(s*Jl<w&&w<s*e)?(E=d[1]*ur,E>fo&&(fo=E)):(w=(w+360)%360-180,C^(s*Jl<w&&w<s*e)?(E=-d[1]*ur,E<eo&&(eo=E)):(t<eo&&(eo=t),t>fo&&(fo=t))),C?e<Jl?ho(Cr,e)>ho(Cr,Lr)&&(Lr=e):ho(e,Lr)>ho(Cr,Lr)&&(Cr=e):Lr>=Cr?(e<Cr&&(Cr=e),e>Lr&&(Lr=e)):e>Jl?ho(Cr,e)>ho(Cr,Lr)&&(Lr=e):ho(e,Lr)>ho(Cr,Lr)&&(Cr=e)}else Vs.push(gs=[Cr=e,Lr=e]);t<eo&&(eo=t),t>fo&&(fo=t),zc=r,Jl=e}function Ob(){ss.point=uT}function Lb(){gs[0]=Cr,gs[1]=Lr,ss.point=$0,zc=null}function cT(e,t){if(zc){var r=e-Jl;gf.add($n(r)>180?r+(r>0?360:-360):r)}else sT=e,lT=t;La.point(e,t),uT(e,t)}function S4(){La.lineStart()}function T4(){cT(sT,lT),La.lineEnd(),$n(gf)>dn&&(Cr=-(Lr=180)),gs[0]=Cr,gs[1]=Lr,zc=null}function ho(e,t){return(t-=e)<0?t+360:t}function A4(e,t){return e[0]-t[0]}function Rb(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function I4(e){var t,r,l,c,d,y,s;if(fo=Lr=-(Cr=eo=1/0),Vs=[],ia(e,ss),r=Vs.length){for(Vs.sort(A4),t=1,l=Vs[0],d=[l];t<r;++t)c=Vs[t],Rb(l,c[0])||Rb(l,c[1])?(ho(l[0],c[1])>ho(l[0],l[1])&&(l[1]=c[1]),ho(c[0],l[1])>ho(l[0],l[1])&&(l[0]=c[0])):d.push(l=c);for(y=-1/0,r=d.length-1,t=0,l=d[r];t<=r;l=c,++t)c=d[t],(s=ho(l[1],c[0]))>y&&(y=s,Cr=c[0],Lr=l[1])}return Vs=gs=null,Cr===1/0||eo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cr,eo],[Lr,fo]]}var Yh,om,am,sm,lm,um,cm,hm,V0,G0,W0,hT,fT,Ui,$i,Vi,la={sphere:Pr,point:A1,lineStart:Fb,lineEnd:Bb,polygonStart:function(){la.lineStart=k4,la.lineEnd=M4},polygonEnd:function(){la.lineStart=Fb,la.lineEnd=Bb}};function A1(e,t){e*=mn,t*=mn;var r=on(t);Yf(r*on(e),r*Kt(e),Kt(t))}function Yf(e,t,r){++Yh,am+=(e-am)/Yh,sm+=(t-sm)/Yh,lm+=(r-lm)/Yh}function Fb(){la.point=C4}function C4(e,t){e*=mn,t*=mn;var r=on(t);Ui=r*on(e),$i=r*Kt(e),Vi=Kt(t),la.point=P4,Yf(Ui,$i,Vi)}function P4(e,t){e*=mn,t*=mn;var r=on(t),l=r*on(e),c=r*Kt(e),d=Kt(t),y=Zi(ri((y=$i*d-Vi*c)*y+(y=Vi*l-Ui*d)*y+(y=Ui*c-$i*l)*y),Ui*l+$i*c+Vi*d);om+=y,um+=y*(Ui+(Ui=l)),cm+=y*($i+($i=c)),hm+=y*(Vi+(Vi=d)),Yf(Ui,$i,Vi)}function Bb(){la.point=A1}function k4(){la.point=z4}function M4(){dT(hT,fT),la.point=A1}function z4(e,t){hT=e,fT=t,e*=mn,t*=mn,la.point=dT;var r=on(t);Ui=r*on(e),$i=r*Kt(e),Vi=Kt(t),Yf(Ui,$i,Vi)}function dT(e,t){e*=mn,t*=mn;var r=on(t),l=r*on(e),c=r*Kt(e),d=Kt(t),y=$i*d-Vi*c,s=Vi*l-Ui*d,w=Ui*c-$i*l,E=B0(y,s,w),C=Hi(E),S=E&&-C/E;V0.add(S*y),G0.add(S*s),W0.add(S*w),om+=C,um+=C*(Ui+(Ui=l)),cm+=C*($i+($i=c)),hm+=C*(Vi+(Vi=d)),Yf(Ui,$i,Vi)}function O4(e){Yh=om=am=sm=lm=um=cm=hm=0,V0=new Ai,G0=new Ai,W0=new Ai,ia(e,la);var t=+V0,r=+G0,l=+W0,c=B0(t,r,l);return c<Ff&&(t=um,r=cm,l=hm,om<dn&&(t=am,r=sm,l=lm),c=B0(t,r,l),c<Ff)?[NaN,NaN]:[Zi(r,t)*ur,Hi(l/c)*ur]}function nc(e){return function(){return e}}function Z0(e,t){function r(l,c){return l=e(l,c),t(l[0],l[1])}return e.invert&&t.invert&&(r.invert=function(l,c){return l=t.invert(l,c),l&&e.invert(l[0],l[1])}),r}function H0(e,t){return[$n(e)>Fn?e+Math.round(-e/Wi)*Wi:e,t]}H0.invert=H0;function I1(e,t,r){return(e%=Wi)?t||r?Z0(Db(e),Nb(t,r)):Db(e):t||r?Nb(t,r):H0}function jb(e){return function(t,r){return t+=e,[t>Fn?t-Wi:t<-Fn?t+Wi:t,r]}}function Db(e){var t=jb(e);return t.invert=jb(-e),t}function Nb(e,t){var r=on(e),l=Kt(e),c=on(t),d=Kt(t);function y(s,w){var E=on(w),C=on(s)*E,S=Kt(s)*E,P=Kt(w),N=P*r+C*l;return[Zi(S*c-N*d,C*r-P*l),Hi(N*c+S*d)]}return y.invert=function(s,w){var E=on(w),C=on(s)*E,S=Kt(s)*E,P=Kt(w),N=P*c-S*d;return[Zi(S*c+P*d,C*r+N*l),Hi(N*r-C*l)]},y}function pT(e){e=I1(e[0]*mn,e[1]*mn,e.length>2?e[2]*mn:0);function t(r){return r=e(r[0]*mn,r[1]*mn),r[0]*=ur,r[1]*=ur,r}return t.invert=function(r){return r=e.invert(r[0]*mn,r[1]*mn),r[0]*=ur,r[1]*=ur,r},t}function mT(e,t,r,l,c,d){if(!!r){var y=on(t),s=Kt(t),w=l*r;c==null?(c=t+l*Wi,d=t-w/2):(c=Ub(y,c),d=Ub(y,d),(l>0?c<d:c>d)&&(c+=l*Wi));for(var E,C=c;l>0?C>d:C<d;C-=w)E=rm([y,-s*on(C),-s*Kt(C)]),e.point(E[0],E[1])}}function Ub(e,t){t=hu(t),t[0]-=e,im(t);var r=rT(-t[1]);return((-t[2]<0?-r:r)+Wi-dn)%Wi}function L4(){var e=nc([0,0]),t=nc(90),r=nc(6),l,c,d={point:y};function y(w,E){l.push(w=c(w,E)),w[0]*=ur,w[1]*=ur}function s(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*mn,C=r.apply(this,arguments)*mn;return l=[],c=I1(-w[0]*mn,-w[1]*mn,0).invert,mT(d,E,C,1),w={type:"Polygon",coordinates:[l]},l=c=null,w}return s.center=function(w){return arguments.length?(e=typeof w=="function"?w:nc([+w[0],+w[1]]),s):e},s.radius=function(w){return arguments.length?(t=typeof w=="function"?w:nc(+w),s):t},s.precision=function(w){return arguments.length?(r=typeof w=="function"?w:nc(+w),s):r},s}function gT(){var e=[],t;return{point:function(r,l,c){t.push([r,l,c])},lineStart:function(){e.push(t=[])},lineEnd:Pr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function yp(e,t){return $n(e[0]-t[0])<dn&&$n(e[1]-t[1])<dn}function Xd(e,t,r,l){this.x=e,this.z=t,this.o=r,this.e=l,this.v=!1,this.n=this.p=null}function yT(e,t,r,l,c){var d=[],y=[],s,w;if(e.forEach(function(ee){if(!((Y=ee.length-1)<=0)){var Y,W=ee[0],$=ee[Y],G;if(yp(W,$)){if(!W[2]&&!$[2]){for(c.lineStart(),s=0;s<Y;++s)c.point((W=ee[s])[0],W[1]);c.lineEnd();return}$[0]+=2*dn}d.push(G=new Xd(W,ee,null,!0)),y.push(G.o=new Xd(W,null,G,!1)),d.push(G=new Xd($,ee,null,!1)),y.push(G.o=new Xd($,null,G,!0))}}),!!d.length){for(y.sort(t),$b(d),$b(y),s=0,w=y.length;s<w;++s)y[s].e=r=!r;for(var E=d[0],C,S;;){for(var P=E,N=!0;P.v;)if((P=P.n)===E)return;C=P.z,c.lineStart();do{if(P.v=P.o.v=!0,P.e){if(N)for(s=0,w=C.length;s<w;++s)c.point((S=C[s])[0],S[1]);else l(P.x,P.n.x,1,c);P=P.n}else{if(N)for(C=P.p.z,s=C.length-1;s>=0;--s)c.point((S=C[s])[0],S[1]);else l(P.x,P.p.x,-1,c);P=P.p}P=P.o,C=P.z,N=!N}while(!P.v);c.lineEnd()}}}function $b(e){if(!!(t=e.length)){for(var t,r=0,l=e[0],c;++r<t;)l.n=c=e[r],c.p=l,l=c;l.n=c=e[0],c.p=l}}function Ay(e){return $n(e[0])<=Fn?e[0]:Lo(e[0])*(($n(e[0])+Fn)%Wi-Fn)}function vT(e,t){var r=Ay(t),l=t[1],c=Kt(l),d=[Kt(r),-on(r),0],y=0,s=0,w=new Ai;c===1?l=Br+dn:c===-1&&(l=-Br-dn);for(var E=0,C=e.length;E<C;++E)if(!!(P=(S=e[E]).length))for(var S,P,N=S[P-1],ee=Ay(N),Y=N[1]/2+Jp,W=Kt(Y),$=on(Y),G=0;G<P;++G,ee=re,W=F,$=b,N=V){var V=S[G],re=Ay(V),H=V[1]/2+Jp,F=Kt(H),b=on(H),M=re-ee,D=M>=0?1:-1,q=D*M,K=q>Fn,de=W*F;if(w.add(Zi(de*D*Kt(q),$*b+de*on(q))),y+=K?M+D*Wi:M,K^ee>=r^re>=r){var ye=Dc(hu(N),hu(V));im(ye);var xe=Dc(d,ye);im(xe);var te=(K^M>=0?-1:1)*Hi(xe[2]);(l>te||l===te&&(ye[0]||ye[1]))&&(s+=K^M>=0?1:-1)}}return(y<-dn||y<dn&&w<-Ff)^s&1}function _T(e,t,r,l){return function(c){var d=t(c),y=gT(),s=t(y),w=!1,E,C,S,P={point:N,lineStart:Y,lineEnd:W,polygonStart:function(){P.point=$,P.lineStart=G,P.lineEnd=V,C=[],E=[]},polygonEnd:function(){P.point=N,P.lineStart=Y,P.lineEnd=W,C=tT(C);var re=vT(E,l);C.length?(w||(c.polygonStart(),w=!0),yT(C,F4,re,r,c)):re&&(w||(c.polygonStart(),w=!0),c.lineStart(),r(null,null,1,c),c.lineEnd()),w&&(c.polygonEnd(),w=!1),C=E=null},sphere:function(){c.polygonStart(),c.lineStart(),r(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function N(re,H){e(re,H)&&c.point(re,H)}function ee(re,H){d.point(re,H)}function Y(){P.point=ee,d.lineStart()}function W(){P.point=N,d.lineEnd()}function $(re,H){S.push([re,H]),s.point(re,H)}function G(){s.lineStart(),S=[]}function V(){$(S[0][0],S[0][1]),s.lineEnd();var re=s.clean(),H=y.result(),F,b=H.length,M,D,q;if(S.pop(),E.push(S),S=null,!!b){if(re&1){if(D=H[0],(M=D.length-1)>0){for(w||(c.polygonStart(),w=!0),c.lineStart(),F=0;F<M;++F)c.point((q=D[F])[0],q[1]);c.lineEnd()}return}b>1&&re&2&&H.push(H.pop().concat(H.shift())),C.push(H.filter(R4))}}return P}}function R4(e){return e.length>1}function F4(e,t){return((e=e.x)[0]<0?e[1]-Br-dn:Br-e[1])-((t=t.x)[0]<0?t[1]-Br-dn:Br-t[1])}var X0=_T(function(){return!0},B4,D4,[-Fn,-Br]);function B4(e){var t=NaN,r=NaN,l=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,y){var s=d>0?Fn:-Fn,w=$n(d-t);$n(w-Fn)<dn?(e.point(t,r=(r+y)/2>0?Br:-Br),e.point(l,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(d,r),c=0):l!==s&&w>=Fn&&($n(t-l)<dn&&(t-=l*dn),$n(d-s)<dn&&(d-=s*dn),r=j4(t,r,d,y),e.point(l,r),e.lineEnd(),e.lineStart(),e.point(s,r),c=0),e.point(t=d,r=y),l=s},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-c}}}function j4(e,t,r,l){var c,d,y=Kt(e-r);return $n(y)>dn?Jc((Kt(t)*(d=on(l))*Kt(r)-Kt(l)*(c=on(t))*Kt(e))/(c*d*y)):(t+l)/2}function D4(e,t,r,l){var c;if(e==null)c=r*Br,l.point(-Fn,c),l.point(0,c),l.point(Fn,c),l.point(Fn,0),l.point(Fn,-c),l.point(0,-c),l.point(-Fn,-c),l.point(-Fn,0),l.point(-Fn,c);else if($n(e[0]-t[0])>dn){var d=e[0]<t[0]?Fn:-Fn;c=r*d/2,l.point(-d,c),l.point(0,c),l.point(d,c)}else l.point(t[0],t[1])}function xT(e){var t=on(e),r=6*mn,l=t>0,c=$n(t)>dn;function d(C,S,P,N){mT(N,e,r,P,C,S)}function y(C,S){return on(C)*on(S)>t}function s(C){var S,P,N,ee,Y;return{lineStart:function(){ee=N=!1,Y=1},point:function(W,$){var G=[W,$],V,re=y(W,$),H=l?re?0:E(W,$):re?E(W+(W<0?Fn:-Fn),$):0;if(!S&&(ee=N=re)&&C.lineStart(),re!==N&&(V=w(S,G),(!V||yp(S,V)||yp(G,V))&&(G[2]=1)),re!==N)Y=0,re?(C.lineStart(),V=w(G,S),C.point(V[0],V[1])):(V=w(S,G),C.point(V[0],V[1],2),C.lineEnd()),S=V;else if(c&&S&&l^re){var F;!(H&P)&&(F=w(G,S,!0))&&(Y=0,l?(C.lineStart(),C.point(F[0][0],F[0][1]),C.point(F[1][0],F[1][1]),C.lineEnd()):(C.point(F[1][0],F[1][1]),C.lineEnd(),C.lineStart(),C.point(F[0][0],F[0][1],3)))}re&&(!S||!yp(S,G))&&C.point(G[0],G[1]),S=G,N=re,P=H},lineEnd:function(){N&&C.lineEnd(),S=null},clean:function(){return Y|(ee&&N)<<1}}}function w(C,S,P){var N=hu(C),ee=hu(S),Y=[1,0,0],W=Dc(N,ee),$=Zd(W,W),G=W[0],V=$-G*G;if(!V)return!P&&C;var re=t*$/V,H=-t*G/V,F=Dc(Y,W),b=Hd(Y,re),M=Hd(W,H);Ty(b,M);var D=F,q=Zd(b,D),K=Zd(D,D),de=q*q-K*(Zd(b,b)-1);if(!(de<0)){var ye=ri(de),xe=Hd(D,(-q-ye)/K);if(Ty(xe,b),xe=rm(xe),!P)return xe;var te=C[0],ae=S[0],oe=C[1],ue=S[1],Ee;ae<te&&(Ee=te,te=ae,ae=Ee);var Pe=ae-te,ce=$n(Pe-Fn)<dn,ke=ce||Pe<dn;if(!ce&&ue<oe&&(Ee=oe,oe=ue,ue=Ee),ke?ce?oe+ue>0^xe[1]<($n(xe[0]-te)<dn?oe:ue):oe<=xe[1]&&xe[1]<=ue:Pe>Fn^(te<=xe[0]&&xe[0]<=ae)){var be=Hd(D,(-q+ye)/K);return Ty(be,b),[xe,rm(be)]}}}function E(C,S){var P=l?e:Fn-e,N=0;return C<-P?N|=1:C>P&&(N|=2),S<-P?N|=4:S>P&&(N|=8),N}return _T(y,s,d,l?[0,-e]:[-Fn,e-Fn])}function N4(e,t,r,l,c,d){var y=e[0],s=e[1],w=t[0],E=t[1],C=0,S=1,P=w-y,N=E-s,ee;if(ee=r-y,!(!P&&ee>0)){if(ee/=P,P<0){if(ee<C)return;ee<S&&(S=ee)}else if(P>0){if(ee>S)return;ee>C&&(C=ee)}if(ee=c-y,!(!P&&ee<0)){if(ee/=P,P<0){if(ee>S)return;ee>C&&(C=ee)}else if(P>0){if(ee<C)return;ee<S&&(S=ee)}if(ee=l-s,!(!N&&ee>0)){if(ee/=N,N<0){if(ee<C)return;ee<S&&(S=ee)}else if(N>0){if(ee>S)return;ee>C&&(C=ee)}if(ee=d-s,!(!N&&ee<0)){if(ee/=N,N<0){if(ee>S)return;ee>C&&(C=ee)}else if(N>0){if(ee<C)return;ee<S&&(S=ee)}return C>0&&(e[0]=y+C*P,e[1]=s+C*N),S<1&&(t[0]=y+S*P,t[1]=s+S*N),!0}}}}}var Kh=1e9,Yd=-Kh;function Zm(e,t,r,l){function c(E,C){return e<=E&&E<=r&&t<=C&&C<=l}function d(E,C,S,P){var N=0,ee=0;if(E==null||(N=y(E,S))!==(ee=y(C,S))||w(E,C)<0^S>0)do P.point(N===0||N===3?e:r,N>1?l:t);while((N=(N+S+4)%4)!==ee);else P.point(C[0],C[1])}function y(E,C){return $n(E[0]-e)<dn?C>0?0:3:$n(E[0]-r)<dn?C>0?2:1:$n(E[1]-t)<dn?C>0?1:0:C>0?3:2}function s(E,C){return w(E.x,C.x)}function w(E,C){var S=y(E,1),P=y(C,1);return S!==P?S-P:S===0?C[1]-E[1]:S===1?E[0]-C[0]:S===2?E[1]-C[1]:C[0]-E[0]}return function(E){var C=E,S=gT(),P,N,ee,Y,W,$,G,V,re,H,F,b={point:M,lineStart:de,lineEnd:ye,polygonStart:q,polygonEnd:K};function M(te,ae){c(te,ae)&&C.point(te,ae)}function D(){for(var te=0,ae=0,oe=N.length;ae<oe;++ae)for(var ue=N[ae],Ee=1,Pe=ue.length,ce=ue[0],ke,be,Ie=ce[0],Be=ce[1];Ee<Pe;++Ee)ke=Ie,be=Be,ce=ue[Ee],Ie=ce[0],Be=ce[1],be<=l?Be>l&&(Ie-ke)*(l-be)>(Be-be)*(e-ke)&&++te:Be<=l&&(Ie-ke)*(l-be)<(Be-be)*(e-ke)&&--te;return te}function q(){C=S,P=[],N=[],F=!0}function K(){var te=D(),ae=F&&te,oe=(P=tT(P)).length;(ae||oe)&&(E.polygonStart(),ae&&(E.lineStart(),d(null,null,1,E),E.lineEnd()),oe&&yT(P,s,te,d,E),E.polygonEnd()),C=E,P=N=ee=null}function de(){b.point=xe,N&&N.push(ee=[]),H=!0,re=!1,G=V=NaN}function ye(){P&&(xe(Y,W),$&&re&&S.rejoin(),P.push(S.result())),b.point=M,re&&C.lineEnd()}function xe(te,ae){var oe=c(te,ae);if(N&&ee.push([te,ae]),H)Y=te,W=ae,$=oe,H=!1,oe&&(C.lineStart(),C.point(te,ae));else if(oe&&re)C.point(te,ae);else{var ue=[G=Math.max(Yd,Math.min(Kh,G)),V=Math.max(Yd,Math.min(Kh,V))],Ee=[te=Math.max(Yd,Math.min(Kh,te)),ae=Math.max(Yd,Math.min(Kh,ae))];N4(ue,Ee,e,t,r,l)?(re||(C.lineStart(),C.point(ue[0],ue[1])),C.point(Ee[0],Ee[1]),oe||C.lineEnd(),F=!1):oe&&(C.lineStart(),C.point(te,ae),F=!1)}G=te,V=ae,re=oe}return b}}function U4(){var e=0,t=0,r=960,l=500,c,d,y;return y={stream:function(s){return c&&d===s?c:c=Zm(e,t,r,l)(d=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],r=+s[1][0],l=+s[1][1],c=d=null,y):[[e,t],[r,l]]}}}var Y0,K0,vp,_p,Nc={sphere:Pr,point:Pr,lineStart:$4,lineEnd:Pr,polygonStart:Pr,polygonEnd:Pr};function $4(){Nc.point=G4,Nc.lineEnd=V4}function V4(){Nc.point=Nc.lineEnd=Pr}function G4(e,t){e*=mn,t*=mn,K0=e,vp=Kt(t),_p=on(t),Nc.point=W4}function W4(e,t){e*=mn,t*=mn;var r=Kt(t),l=on(t),c=$n(e-K0),d=on(c),y=Kt(c),s=l*y,w=_p*r-vp*l*d,E=vp*r+_p*l*d;Y0.add(Zi(ri(s*s+w*w),E)),K0=e,vp=r,_p=l}function wT(e){return Y0=new Ai,ia(e,Nc),+Y0}var q0=[null,null],Z4={type:"LineString",coordinates:q0};function fm(e,t){return q0[0]=e,q0[1]=t,wT(Z4)}var Vb={Feature:function(e,t){return dm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,l=-1,c=r.length;++l<c;)if(dm(r[l].geometry,t))return!0;return!1}},Gb={Sphere:function(){return!0},Point:function(e,t){return Wb(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)if(Wb(r[l],t))return!0;return!1},LineString:function(e,t){return Zb(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)if(Zb(r[l],t))return!0;return!1},Polygon:function(e,t){return Hb(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)if(Hb(r[l],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,l=-1,c=r.length;++l<c;)if(dm(r[l],t))return!0;return!1}};function dm(e,t){return e&&Gb.hasOwnProperty(e.type)?Gb[e.type](e,t):!1}function Wb(e,t){return fm(e,t)===0}function Zb(e,t){for(var r,l,c,d=0,y=e.length;d<y;d++){if(l=fm(e[d],t),l===0||d>0&&(c=fm(e[d],e[d-1]),c>0&&r<=c&&l<=c&&(r+l-c)*(1-Math.pow((r-l)/c,2))<Ff*c))return!0;r=l}return!1}function Hb(e,t){return!!vT(e.map(H4),bT(t))}function H4(e){return e=e.map(bT),e.pop(),e}function bT(e){return[e[0]*mn,e[1]*mn]}function X4(e,t){return(e&&Vb.hasOwnProperty(e.type)?Vb[e.type]:dm)(e,t)}function Xb(e,t,r){var l=_c(e,t-dn,r).concat(t);return function(c){return l.map(function(d){return[c,d]})}}function Yb(e,t,r){var l=_c(e,t-dn,r).concat(t);return function(c){return l.map(function(d){return[d,c]})}}function ET(){var e,t,r,l,c,d,y,s,w=10,E=w,C=90,S=360,P,N,ee,Y,W=2.5;function $(){return{type:"MultiLineString",coordinates:G()}}function G(){return _c(Wd(l/C)*C,r,C).map(ee).concat(_c(Wd(s/S)*S,y,S).map(Y)).concat(_c(Wd(t/w)*w,e,w).filter(function(V){return $n(V%C)>dn}).map(P)).concat(_c(Wd(d/E)*E,c,E).filter(function(V){return $n(V%S)>dn}).map(N))}return $.lines=function(){return G().map(function(V){return{type:"LineString",coordinates:V}})},$.outline=function(){return{type:"Polygon",coordinates:[ee(l).concat(Y(y).slice(1),ee(r).reverse().slice(1),Y(s).reverse().slice(1))]}},$.extent=function(V){return arguments.length?$.extentMajor(V).extentMinor(V):$.extentMinor()},$.extentMajor=function(V){return arguments.length?(l=+V[0][0],r=+V[1][0],s=+V[0][1],y=+V[1][1],l>r&&(V=l,l=r,r=V),s>y&&(V=s,s=y,y=V),$.precision(W)):[[l,s],[r,y]]},$.extentMinor=function(V){return arguments.length?(t=+V[0][0],e=+V[1][0],d=+V[0][1],c=+V[1][1],t>e&&(V=t,t=e,e=V),d>c&&(V=d,d=c,c=V),$.precision(W)):[[t,d],[e,c]]},$.step=function(V){return arguments.length?$.stepMajor(V).stepMinor(V):$.stepMinor()},$.stepMajor=function(V){return arguments.length?(C=+V[0],S=+V[1],$):[C,S]},$.stepMinor=function(V){return arguments.length?(w=+V[0],E=+V[1],$):[w,E]},$.precision=function(V){return arguments.length?(W=+V,P=Xb(d,c,90),N=Yb(t,e,W),ee=Xb(s,y,90),Y=Yb(l,r,W),$):W},$.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}function Y4(){return ET()()}function K4(e,t){var r=e[0]*mn,l=e[1]*mn,c=t[0]*mn,d=t[1]*mn,y=on(l),s=Kt(l),w=on(d),E=Kt(d),C=y*on(r),S=y*Kt(r),P=w*on(c),N=w*Kt(c),ee=2*Hi(ri(Pb(d-l)+y*w*Pb(c-r))),Y=Kt(ee),W=ee?function($){var G=Kt($*=ee)/Y,V=Kt(ee-$)/Y,re=V*C+G*P,H=V*S+G*N,F=V*s+G*E;return[Zi(H,re)*ur,Zi(F,ri(re*re+H*H))*ur]}:function(){return[r*ur,l*ur]};return W.distance=ee,W}var Bf=e=>e,Iy=new Ai,J0=new Ai,ST,TT,Q0,ev,Zs={point:Pr,lineStart:Pr,lineEnd:Pr,polygonStart:function(){Zs.lineStart=q4,Zs.lineEnd=Q4},polygonEnd:function(){Zs.lineStart=Zs.lineEnd=Zs.point=Pr,Iy.add($n(J0)),J0=new Ai},result:function(){var e=Iy/2;return Iy=new Ai,e}};function q4(){Zs.point=J4}function J4(e,t){Zs.point=AT,ST=Q0=e,TT=ev=t}function AT(e,t){J0.add(ev*e-Q0*t),Q0=e,ev=t}function Q4(){AT(ST,TT)}var Kb=Zs,Uc=1/0,pm=Uc,jf=-Uc,mm=jf,ez={point:tz,lineStart:Pr,lineEnd:Pr,polygonStart:Pr,polygonEnd:Pr,result:function(){var e=[[Uc,pm],[jf,mm]];return jf=mm=-(pm=Uc=1/0),e}};function tz(e,t){e<Uc&&(Uc=e),e>jf&&(jf=e),t<pm&&(pm=t),t>mm&&(mm=t)}var gm=ez,tv=0,nv=0,qh=0,ym=0,vm=0,xc=0,rv=0,iv=0,Jh=0,IT,CT,Ta,Aa,oa={point:fu,lineStart:qb,lineEnd:Jb,polygonStart:function(){oa.lineStart=iz,oa.lineEnd=oz},polygonEnd:function(){oa.point=fu,oa.lineStart=qb,oa.lineEnd=Jb},result:function(){var e=Jh?[rv/Jh,iv/Jh]:xc?[ym/xc,vm/xc]:qh?[tv/qh,nv/qh]:[NaN,NaN];return tv=nv=qh=ym=vm=xc=rv=iv=Jh=0,e}};function fu(e,t){tv+=e,nv+=t,++qh}function qb(){oa.point=nz}function nz(e,t){oa.point=rz,fu(Ta=e,Aa=t)}function rz(e,t){var r=e-Ta,l=t-Aa,c=ri(r*r+l*l);ym+=c*(Ta+e)/2,vm+=c*(Aa+t)/2,xc+=c,fu(Ta=e,Aa=t)}function Jb(){oa.point=fu}function iz(){oa.point=az}function oz(){PT(IT,CT)}function az(e,t){oa.point=PT,fu(IT=Ta=e,CT=Aa=t)}function PT(e,t){var r=e-Ta,l=t-Aa,c=ri(r*r+l*l);ym+=c*(Ta+e)/2,vm+=c*(Aa+t)/2,xc+=c,c=Aa*e-Ta*t,rv+=c*(Ta+e),iv+=c*(Aa+t),Jh+=c*3,fu(Ta=e,Aa=t)}var Qb=oa;function kT(e){this._context=e}kT.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wi);break}}},result:Pr};var ov=new Ai,Cy,MT,zT,Qh,ef,_m={point:Pr,lineStart:function(){_m.point=sz},lineEnd:function(){Cy&&OT(MT,zT),_m.point=Pr},polygonStart:function(){Cy=!0},polygonEnd:function(){Cy=null},result:function(){var e=+ov;return ov=new Ai,e}};function sz(e,t){_m.point=OT,MT=Qh=e,zT=ef=t}function OT(e,t){Qh-=e,ef-=t,ov.add(ri(Qh*Qh+ef*ef)),Qh=e,ef=t}var e2=_m;function LT(){this._string=[]}LT.prototype={_radius:4.5,_circle:t2(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=t2(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function t2(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function lz(e,t){var r=4.5,l,c;function d(y){return y&&(typeof r=="function"&&c.pointRadius(+r.apply(this,arguments)),ia(y,l(c))),c.result()}return d.area=function(y){return ia(y,l(Kb)),Kb.result()},d.measure=function(y){return ia(y,l(e2)),e2.result()},d.bounds=function(y){return ia(y,l(gm)),gm.result()},d.centroid=function(y){return ia(y,l(Qb)),Qb.result()},d.projection=function(y){return arguments.length?(l=y==null?(e=null,Bf):(e=y).stream,d):e},d.context=function(y){return arguments.length?(c=y==null?(t=null,new LT):new kT(t=y),typeof r!="function"&&c.pointRadius(r),d):t},d.pointRadius=function(y){return arguments.length?(r=typeof y=="function"?y:(c.pointRadius(+y),+y),d):r},d.projection(e).context(t)}function uz(e){return{stream:Kf(e)}}function Kf(e){return function(t){var r=new av;for(var l in e)r[l]=e[l];return r.stream=t,r}}function av(){}av.prototype={constructor:av,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function C1(e,t,r){var l=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),l!=null&&e.clipExtent(null),ia(r,e.stream(gm)),t(gm.result()),l!=null&&e.clipExtent(l),e}function Hm(e,t,r){return C1(e,function(l){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],y=Math.min(c/(l[1][0]-l[0][0]),d/(l[1][1]-l[0][1])),s=+t[0][0]+(c-y*(l[1][0]+l[0][0]))/2,w=+t[0][1]+(d-y*(l[1][1]+l[0][1]))/2;e.scale(150*y).translate([s,w])},r)}function P1(e,t,r){return Hm(e,[[0,0],t],r)}function k1(e,t,r){return C1(e,function(l){var c=+t,d=c/(l[1][0]-l[0][0]),y=(c-d*(l[1][0]+l[0][0]))/2,s=-d*l[0][1];e.scale(150*d).translate([y,s])},r)}function M1(e,t,r){return C1(e,function(l){var c=+t,d=c/(l[1][1]-l[0][1]),y=-d*l[0][0],s=(c-d*(l[1][1]+l[0][1]))/2;e.scale(150*d).translate([y,s])},r)}var n2=16,cz=on(30*mn);function r2(e,t){return+t?fz(e,t):hz(e)}function hz(e){return Kf({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function fz(e,t){function r(l,c,d,y,s,w,E,C,S,P,N,ee,Y,W){var $=E-l,G=C-c,V=$*$+G*G;if(V>4*t&&Y--){var re=y+P,H=s+N,F=w+ee,b=ri(re*re+H*H+F*F),M=Hi(F/=b),D=$n($n(F)-1)<dn||$n(d-S)<dn?(d+S)/2:Zi(H,re),q=e(D,M),K=q[0],de=q[1],ye=K-l,xe=de-c,te=G*ye-$*xe;(te*te/V>t||$n(($*ye+G*xe)/V-.5)>.3||y*P+s*N+w*ee<cz)&&(r(l,c,d,y,s,w,K,de,D,re/=b,H/=b,F,Y,W),W.point(K,de),r(K,de,D,re,H,F,E,C,S,P,N,ee,Y,W))}}return function(l){var c,d,y,s,w,E,C,S,P,N,ee,Y,W={point:$,lineStart:G,lineEnd:re,polygonStart:function(){l.polygonStart(),W.lineStart=H},polygonEnd:function(){l.polygonEnd(),W.lineStart=G}};function $(M,D){M=e(M,D),l.point(M[0],M[1])}function G(){S=NaN,W.point=V,l.lineStart()}function V(M,D){var q=hu([M,D]),K=e(M,D);r(S,P,C,N,ee,Y,S=K[0],P=K[1],C=M,N=q[0],ee=q[1],Y=q[2],n2,l),l.point(S,P)}function re(){W.point=$,l.lineEnd()}function H(){G(),W.point=F,W.lineEnd=b}function F(M,D){V(c=M,D),d=S,y=P,s=N,w=ee,E=Y,W.point=V}function b(){r(S,P,C,N,ee,Y,d,y,c,s,w,E,n2,l),W.lineEnd=re,re()}return W}}var dz=Kf({point:function(e,t){this.stream.point(e*mn,t*mn)}});function pz(e){return Kf({point:function(t,r){var l=e(t,r);return this.stream.point(l[0],l[1])}})}function mz(e,t,r,l,c){function d(y,s){return y*=l,s*=c,[t+e*y,r-e*s]}return d.invert=function(y,s){return[(y-t)/e*l,(r-s)/e*c]},d}function i2(e,t,r,l,c,d){if(!d)return mz(e,t,r,l,c);var y=on(d),s=Kt(d),w=y*e,E=s*e,C=y/e,S=s/e,P=(s*r-y*t)/e,N=(s*t+y*r)/e;function ee(Y,W){return Y*=l,W*=c,[w*Y-E*W+t,r-E*Y-w*W]}return ee.invert=function(Y,W){return[l*(C*Y-S*W+P),c*(N-S*Y-C*W)]},ee}function Fa(e){return z1(function(){return e})()}function z1(e){var t,r=150,l=480,c=250,d=0,y=0,s=0,w=0,E=0,C,S=0,P=1,N=1,ee=null,Y=X0,W=null,$,G,V,re=Bf,H=.5,F,b,M,D,q;function K(te){return M(te[0]*mn,te[1]*mn)}function de(te){return te=M.invert(te[0],te[1]),te&&[te[0]*ur,te[1]*ur]}K.stream=function(te){return D&&q===te?D:D=dz(pz(C)(Y(F(re(q=te)))))},K.preclip=function(te){return arguments.length?(Y=te,ee=void 0,xe()):Y},K.postclip=function(te){return arguments.length?(re=te,W=$=G=V=null,xe()):re},K.clipAngle=function(te){return arguments.length?(Y=+te?xT(ee=te*mn):(ee=null,X0),xe()):ee*ur},K.clipExtent=function(te){return arguments.length?(re=te==null?(W=$=G=V=null,Bf):Zm(W=+te[0][0],$=+te[0][1],G=+te[1][0],V=+te[1][1]),xe()):W==null?null:[[W,$],[G,V]]},K.scale=function(te){return arguments.length?(r=+te,ye()):r},K.translate=function(te){return arguments.length?(l=+te[0],c=+te[1],ye()):[l,c]},K.center=function(te){return arguments.length?(d=te[0]%360*mn,y=te[1]%360*mn,ye()):[d*ur,y*ur]},K.rotate=function(te){return arguments.length?(s=te[0]%360*mn,w=te[1]%360*mn,E=te.length>2?te[2]%360*mn:0,ye()):[s*ur,w*ur,E*ur]},K.angle=function(te){return arguments.length?(S=te%360*mn,ye()):S*ur},K.reflectX=function(te){return arguments.length?(P=te?-1:1,ye()):P<0},K.reflectY=function(te){return arguments.length?(N=te?-1:1,ye()):N<0},K.precision=function(te){return arguments.length?(F=r2(b,H=te*te),xe()):ri(H)},K.fitExtent=function(te,ae){return Hm(K,te,ae)},K.fitSize=function(te,ae){return P1(K,te,ae)},K.fitWidth=function(te,ae){return k1(K,te,ae)},K.fitHeight=function(te,ae){return M1(K,te,ae)};function ye(){var te=i2(r,0,0,P,N,S).apply(null,t(d,y)),ae=i2(r,l-te[0],c-te[1],P,N,S);return C=I1(s,w,E),b=Z0(t,ae),M=Z0(C,b),F=r2(b,H),xe()}function xe(){return D=q=null,K}return function(){return t=e.apply(this,arguments),K.invert=t.invert&&de,ye()}}function O1(e){var t=0,r=Fn/3,l=z1(e),c=l(t,r);return c.parallels=function(d){return arguments.length?l(t=d[0]*mn,r=d[1]*mn):[t*ur,r*ur]},c}function gz(e){var t=on(e);function r(l,c){return[l*t,Kt(c)/t]}return r.invert=function(l,c){return[l/t,Hi(c*t)]},r}function RT(e,t){var r=Kt(e),l=(r+Kt(t))/2;if($n(l)<dn)return gz(e);var c=1+r*(2*l-r),d=ri(c)/l;function y(s,w){var E=ri(c-2*l*Kt(w))/l;return[E*Kt(s*=l),d-E*on(s)]}return y.invert=function(s,w){var E=d-w,C=Zi(s,$n(E))*Lo(E);return E*l<0&&(C-=Fn*Lo(s)*Lo(E)),[C/l,Hi((c-(s*s+E*E)*l*l)/(2*l))]},y}function xm(){return O1(RT).scale(155.424).center([0,33.6442])}function FT(){return xm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function yz(e){var t=e.length;return{point:function(r,l){for(var c=-1;++c<t;)e[c].point(r,l)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function vz(){var e,t,r=FT(),l,c=xm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,y=xm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,w,E={point:function(P,N){w=[P,N]}};function C(P){var N=P[0],ee=P[1];return w=null,l.point(N,ee),w||(d.point(N,ee),w)||(s.point(N,ee),w)}C.invert=function(P){var N=r.scale(),ee=r.translate(),Y=(P[0]-ee[0])/N,W=(P[1]-ee[1])/N;return(W>=.12&&W<.234&&Y>=-.425&&Y<-.214?c:W>=.166&&W<.234&&Y>=-.214&&Y<-.115?y:r).invert(P)},C.stream=function(P){return e&&t===P?e:e=yz([r.stream(t=P),c.stream(P),y.stream(P)])},C.precision=function(P){return arguments.length?(r.precision(P),c.precision(P),y.precision(P),S()):r.precision()},C.scale=function(P){return arguments.length?(r.scale(P),c.scale(P*.35),y.scale(P),C.translate(r.translate())):r.scale()},C.translate=function(P){if(!arguments.length)return r.translate();var N=r.scale(),ee=+P[0],Y=+P[1];return l=r.translate(P).clipExtent([[ee-.455*N,Y-.238*N],[ee+.455*N,Y+.238*N]]).stream(E),d=c.translate([ee-.307*N,Y+.201*N]).clipExtent([[ee-.425*N+dn,Y+.12*N+dn],[ee-.214*N-dn,Y+.234*N-dn]]).stream(E),s=y.translate([ee-.205*N,Y+.212*N]).clipExtent([[ee-.214*N+dn,Y+.166*N+dn],[ee-.115*N-dn,Y+.234*N-dn]]).stream(E),S()},C.fitExtent=function(P,N){return Hm(C,P,N)},C.fitSize=function(P,N){return P1(C,P,N)},C.fitWidth=function(P,N){return k1(C,P,N)},C.fitHeight=function(P,N){return M1(C,P,N)};function S(){return e=t=null,C}return C.scale(1070)}function BT(e){return function(t,r){var l=on(t),c=on(r),d=e(l*c);return d===1/0?[2,0]:[d*c*Kt(t),d*Kt(r)]}}function qf(e){return function(t,r){var l=ri(t*t+r*r),c=e(l),d=Kt(c),y=on(c);return[Zi(t*d,l*y),Hi(l&&r*d/l)]}}var L1=BT(function(e){return ri(2/(1+e))});L1.invert=qf(function(e){return 2*Hi(e/2)});function _z(){return Fa(L1).scale(124.75).clipAngle(180-.001)}var R1=BT(function(e){return(e=rT(e))&&e/Kt(e)});R1.invert=qf(function(e){return e});function xz(){return Fa(R1).scale(79.4188).clipAngle(180-.001)}function Jf(e,t){return[e,Qp(T1((Br+t)/2))]}Jf.invert=function(e,t){return[e,2*Jc(nT(t))-Br]};function wz(){return jT(Jf).scale(961/Wi)}function jT(e){var t=Fa(e),r=t.center,l=t.scale,c=t.translate,d=t.clipExtent,y=null,s,w,E;t.scale=function(S){return arguments.length?(l(S),C()):l()},t.translate=function(S){return arguments.length?(c(S),C()):c()},t.center=function(S){return arguments.length?(r(S),C()):r()},t.clipExtent=function(S){return arguments.length?(S==null?y=s=w=E=null:(y=+S[0][0],s=+S[0][1],w=+S[1][0],E=+S[1][1]),C()):y==null?null:[[y,s],[w,E]]};function C(){var S=Fn*l(),P=t(pT(t.rotate()).invert([0,0]));return d(y==null?[[P[0]-S,P[1]-S],[P[0]+S,P[1]+S]]:e===Jf?[[Math.max(P[0]-S,y),s],[Math.min(P[0]+S,w),E]]:[[y,Math.max(P[1]-S,s)],[w,Math.min(P[1]+S,E)]])}return C()}function Kd(e){return T1((Br+e)/2)}function DT(e,t){var r=on(e),l=e===t?Kt(e):Qp(r/on(t))/Qp(Kd(t)/Kd(e)),c=r*Sy(Kd(e),l)/l;if(!l)return Jf;function d(y,s){c>0?s<-Br+dn&&(s=-Br+dn):s>Br-dn&&(s=Br-dn);var w=c/Sy(Kd(s),l);return[w*Kt(l*y),c-w*on(l*y)]}return d.invert=function(y,s){var w=c-s,E=Lo(l)*ri(y*y+w*w),C=Zi(y,$n(w))*Lo(w);return w*l<0&&(C-=Fn*Lo(y)*Lo(w)),[C/l,2*Jc(Sy(c/E,1/l))-Br]},d}function bz(){return O1(DT).scale(109.5).parallels([30,30])}function Df(e,t){return[e,t]}Df.invert=Df;function Ez(){return Fa(Df).scale(152.63)}function NT(e,t){var r=on(e),l=e===t?Kt(e):(r-on(t))/(t-e),c=r/l+e;if($n(l)<dn)return Df;function d(y,s){var w=c-s,E=l*y;return[w*Kt(E),c-w*on(E)]}return d.invert=function(y,s){var w=c-s,E=Zi(y,$n(w))*Lo(w);return w*l<0&&(E-=Fn*Lo(y)*Lo(w)),[E/l,c-Lo(l)*ri(y*y+w*w)]},d}function Sz(){return O1(NT).scale(131.154).center([0,13.9389])}var yf=1.340264,vf=-.081106,_f=893e-6,xf=.003796,wm=ri(3)/2,Tz=12;function F1(e,t){var r=Hi(wm*Kt(t)),l=r*r,c=l*l*l;return[e*on(r)/(wm*(yf+3*vf*l+c*(7*_f+9*xf*l))),r*(yf+vf*l+c*(_f+xf*l))]}F1.invert=function(e,t){for(var r=t,l=r*r,c=l*l*l,d=0,y,s,w;d<Tz&&(s=r*(yf+vf*l+c*(_f+xf*l))-t,w=yf+3*vf*l+c*(7*_f+9*xf*l),r-=y=s/w,l=r*r,c=l*l*l,!($n(y)<Ff));++d);return[wm*e*(yf+3*vf*l+c*(7*_f+9*xf*l))/on(r),Hi(Kt(r)/wm)]};function Az(){return Fa(F1).scale(177.158)}function B1(e,t){var r=on(t),l=on(e)*r;return[r*Kt(e)/l,Kt(t)/l]}B1.invert=qf(Jc);function Iz(){return Fa(B1).scale(144.049).clipAngle(60)}function Cz(){var e=1,t=0,r=0,l=1,c=1,d=0,y,s,w=null,E,C,S,P=1,N=1,ee=Kf({point:function(re,H){var F=V([re,H]);this.stream.point(F[0],F[1])}}),Y=Bf,W,$;function G(){return P=e*l,N=e*c,W=$=null,V}function V(re){var H=re[0]*P,F=re[1]*N;if(d){var b=F*y-H*s;H=H*y+F*s,F=b}return[H+t,F+r]}return V.invert=function(re){var H=re[0]-t,F=re[1]-r;if(d){var b=F*y+H*s;H=H*y-F*s,F=b}return[H/P,F/N]},V.stream=function(re){return W&&$===re?W:W=ee(Y($=re))},V.postclip=function(re){return arguments.length?(Y=re,w=E=C=S=null,G()):Y},V.clipExtent=function(re){return arguments.length?(Y=re==null?(w=E=C=S=null,Bf):Zm(w=+re[0][0],E=+re[0][1],C=+re[1][0],S=+re[1][1]),G()):w==null?null:[[w,E],[C,S]]},V.scale=function(re){return arguments.length?(e=+re,G()):e},V.translate=function(re){return arguments.length?(t=+re[0],r=+re[1],G()):[t,r]},V.angle=function(re){return arguments.length?(d=re%360*mn,s=Kt(d),y=on(d),G()):d*ur},V.reflectX=function(re){return arguments.length?(l=re?-1:1,G()):l<0},V.reflectY=function(re){return arguments.length?(c=re?-1:1,G()):c<0},V.fitExtent=function(re,H){return Hm(V,re,H)},V.fitSize=function(re,H){return P1(V,re,H)},V.fitWidth=function(re,H){return k1(V,re,H)},V.fitHeight=function(re,H){return M1(V,re,H)},V}function j1(e,t){var r=t*t,l=r*r;return[e*(.8707-.131979*r+l*(-.013791+l*(.003971*r-.001529*l))),t*(1.007226+r*(.015085+l*(-.044475+.028874*r-.005916*l)))]}j1.invert=function(e,t){var r=t,l=25,c;do{var d=r*r,y=d*d;r-=c=(r*(1.007226+d*(.015085+y*(-.044475+.028874*d-.005916*y)))-t)/(1.007226+d*(.015085*3+y*(-.044475*7+.028874*9*d-.005916*11*y)))}while($n(c)>dn&&--l>0);return[e/(.8707+(d=r*r)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),r]};function Pz(){return Fa(j1).scale(175.295)}function D1(e,t){return[on(t)*Kt(e),Kt(t)]}D1.invert=qf(Hi);function kz(){return Fa(D1).scale(249.5).clipAngle(90+dn)}function N1(e,t){var r=on(t),l=1+on(e)*r;return[r*Kt(e)/l,Kt(t)/l]}N1.invert=qf(function(e){return 2*Jc(e)});function Mz(){return Fa(N1).scale(250).clipAngle(142)}function U1(e,t){return[Qp(T1((Br+t)/2)),-e]}U1.invert=function(e,t){return[-t,2*Jc(nT(e))-Br]};function zz(){var e=jT(U1),t=e.center,r=e.rotate;return e.center=function(l){return arguments.length?t([-l[1],l[0]]):(l=t(),[l[1],-l[0]])},e.rotate=function(l){return arguments.length?r([l[0],l[1],l.length>2?l[2]+90:90]):(l=r(),[l[0],l[1],l[2]-90])},r([0,0,90]).scale(159.155)}var Oz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",geoArea:E4,geoBounds:I4,geoCentroid:O4,geoCircle:L4,geoClipAntimeridian:X0,geoClipCircle:xT,geoClipExtent:U4,geoClipRectangle:Zm,geoContains:X4,geoDistance:fm,geoGraticule:ET,geoGraticule10:Y4,geoInterpolate:K4,geoLength:wT,geoPath:lz,geoAlbers:FT,geoAlbersUsa:vz,geoAzimuthalEqualArea:_z,geoAzimuthalEqualAreaRaw:L1,geoAzimuthalEquidistant:xz,geoAzimuthalEquidistantRaw:R1,geoConicConformal:bz,geoConicConformalRaw:DT,geoConicEqualArea:xm,geoConicEqualAreaRaw:RT,geoConicEquidistant:Sz,geoConicEquidistantRaw:NT,geoEqualEarth:Az,geoEqualEarthRaw:F1,geoEquirectangular:Ez,geoEquirectangularRaw:Df,geoGnomonic:Iz,geoGnomonicRaw:B1,geoIdentity:Cz,geoProjection:Fa,geoProjectionMutator:z1,geoMercator:wz,geoMercatorRaw:Jf,geoNaturalEarth1:Pz,geoNaturalEarth1Raw:j1,geoOrthographic:kz,geoOrthographicRaw:D1,geoStereographic:Mz,geoStereographicRaw:N1,geoTransverseMercator:zz,geoTransverseMercatorRaw:U1,geoRotation:pT,geoStream:ia,geoTransform:uz}),Lz=dv(Oz),fl=2*Math.PI*6378137/2,Rz=Math.PI/180;function UT(e){return e=e||256,2*Math.PI*6378137/e}function Fz(e){var t=e[0],r=e[1],l=e[2];return(1<<l)*((1<<l)+t)+r}function sv(e,t,r){var l=$T(e,t,r);return l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l}function $T(e,t,r){var l=t,c=Y1(e[0]),d=X1(e[1]),y=Math.sin(d*Rz),s=Math.pow(2,l),w=s*(c/360+.5),E=s*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return vu([w,E,l],r)}function Bz(e,t=6){var r=e[0],l=e[1],c=e[2],d=e[3],y=(r-c)/2+c,s=(l-d)/2+d;return t!=null&&(y=Number(y.toFixed(t)),s=Number(s.toFixed(t))),[y,s]}function bm(e,t,r={enable:!0,decimal:1}){e=Xm(e,t);var l=e[0],c=e[1],d=l*fl/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*fl/180,r.enable&&(d=Number(d.toFixed(r.decimal)),y=Number(y.toFixed(r.decimal))),[d,y]}function lv(e,t=6){var r=e[0],l=e[1],c=r/fl*180,d=l/fl*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function $1(e,t,r){var l=e[0],c=e[1],d=Z1(t,r),y=(l+fl)/d,s=(c+fl)/d;return[y,s,t]}function VT(e,t,r){e=Xm(e,r);var l=bm(e),c=$1(l,t);return V1(c)}function jz(e,t,r){if(e=Xm(e,r),t===0)return[0,0,0];var l=VT(e,t);return WT(l)}function Dz(e,t){if(t===0)return[0,0,0];var r=$1(e,t);return V1(r)}function uv(e,t,r=1){var l=e[0],c=e[1],d=e[2],y=Z1(d,t),s=l*y-fl,w=c*y-fl;return r!=null&&(s=Number(s.toFixed(r)),w=Number(w.toFixed(r))),[s,w]}function V1(e,t,r){t=t||256;var l=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];W1(d);var y=Math.ceil(l/t)-1,s=Math.ceil(c/t)-1;return y<0&&(y=0),s<0&&(s=0),[y,s,d]}function G1(e,t,r){vu(e,r),t=t||256;var l=e[0],c=e[1],d=e[2],y=uv([l*t,c*t,d]),s=uv([(l+1)*t,(c+1)*t,d]);return[y[0],y[1],s[0],s[1]]}function GT(e,t){vu(e,t);var r=e[0],l=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=G1([r,l,c]),y=d[0],s=d[1],w=d[2],E=d[3],C=lv([y,s,c]),S=lv([w,E,c]);return[C[0],C[1],S[0],S[1]]}function Nz(e){var t=Qf(e);return G1(t)}function Uz(e){var t=Qf(e);return GT(t)}function WT(e,t){vu(e,t);var r=e[0],l=e[1],c=e[2];if(c===0)return[0,0,0];var d=r,y=Math.pow(2,c)-1-l;return[d,y,c]}function Qf(e){var t=e[0],r=e[1],l=e[2],c=t,d=Math.pow(2,l)-r-1;return[c,d,l]}function $z(e){var t=Qf(e);return ZT(t)}function ZT(e,t){vu(e,t);var r=e[0],l=e[1],c=e[2];if(c===0)return"";var d="";return l=Math.pow(2,c)-1-l,H1(c,0,-1).map(function(y){var s=0,w=1<<y-1;(r&w)!==0&&(s+=1),(l&w)!==0&&(s+=2),d=d.concat(s)}),d}function Vz(e){var t=HT(e);return Qf(t)}function HT(e){var t=0,r=0,l=e.length;return H1(l,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[l-c],0)){case 0:break;case 1:t+=d;break;case 2:r+=d;break;case 3:t+=d,r+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,r,l]}function Gz(e){var t=bm([e[0],e[1]]),r=bm([e[2],e[3]]);return[t[0],t[1],r[0],r[1]]}function vu(e,t){var r=e[0],l=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(l==null)throw new Error("<y> is required");return c=W1(c),e=XT(e),e}function XT(e){var t=e[0],r=e[1],l=e[2],c=Math.pow(2,l);return t=t%c,t<0&&(t=t+c),[t,r,l]}function W1(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Xm(e,t){if(t===!1)return e;var r=Y1(e[0]),l=X1(e[1]);return l>85&&(l=85),l<-85&&(l=-85),[r,l]}function Z1(e,t){return UT(t)/Math.pow(2,e)}function H1(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/r),0),c=Array(l),d=0;d<l;d++,e+=r)c[d]=e;return c}function Wz(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],r=e[0][1],l=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<r&&(r=d[1]),d[2]>l&&(l=d[2]),d[3]>c&&(c=d[3])}),[t,r,l,c]}}function Zz(e){try{return vu(e),!0}catch{return!1}}function X1(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Y1(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function Hz(e){var t=sv([e[0],e[1]],32),r=sv([e[2],e[3]],32),l=[t[0],t[1],r[0],r[1]],c=Xz(l);if(c===0)return[0,0,0];var d=l[0]>>>32-c,y=l[1]>>>32-c;return[d,y,c]}function Xz(e){for(var t=28,r=0;r<t;r++){var l=1<<32-(r+1);if((e[0]&l)!==(e[2]&l)||(e[1]&l)!==(e[3]&l))return r}return t}var Yz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",initialResolution:UT,hash:Fz,pointToTile:sv,pointToTileFraction:$T,bboxToCenter:Bz,lngLatToMeters:bm,metersToLngLat:lv,metersToPixels:$1,lngLatToTile:VT,lngLatToGoogle:jz,metersToTile:Dz,pixelsToMeters:uv,pixelsToTile:V1,tileToBBoxMeters:G1,tileToBBox:GT,googleToBBoxMeters:Nz,googleToBBox:Uz,tileToGoogle:WT,googleToTile:Qf,googleToQuadkey:$z,tileToQuadkey:ZT,quadkeyToTile:Vz,quadkeyToGoogle:HT,bboxToMeters:Gz,validateTile:vu,wrapTile:XT,validateZoom:W1,validateLngLat:Xm,resolution:Z1,range:H1,maxBBox:Wz,validTile:Zz,latitude:X1,longitude:Y1,bboxToTile:Hz}),Kz=dv(Yz),Ym={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ym.read=function(e,t,r,l,c){var d,y,s=c*8-l-1,w=(1<<s)-1,E=w>>1,C=-7,S=r?c-1:0,P=r?-1:1,N=e[t+S];for(S+=P,d=N&(1<<-C)-1,N>>=-C,C+=s;C>0;d=d*256+e[t+S],S+=P,C-=8);for(y=d&(1<<-C)-1,d>>=-C,C+=l;C>0;y=y*256+e[t+S],S+=P,C-=8);if(d===0)d=1-E;else{if(d===w)return y?NaN:(N?-1:1)*(1/0);y=y+Math.pow(2,l),d=d-E}return(N?-1:1)*y*Math.pow(2,d-l)};Ym.write=function(e,t,r,l,c,d){var y,s,w,E=d*8-c-1,C=(1<<E)-1,S=C>>1,P=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=l?0:d-1,ee=l?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,y=C):(y=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-y))<1&&(y--,w*=2),y+S>=1?t+=P/w:t+=P*Math.pow(2,1-S),t*w>=2&&(y++,w/=2),y+S>=C?(s=0,y=C):y+S>=1?(s=(t*w-1)*Math.pow(2,c),y=y+S):(s=t*Math.pow(2,S-1)*Math.pow(2,c),y=0));c>=8;e[r+N]=s&255,N+=ee,s/=256,c-=8);for(y=y<<c|s,E+=c;E>0;e[r+N]=y&255,N+=ee,y/=256,E-=8);e[r+N-ee]|=Y*128};var qz=Yn,qd=Ym;function Yn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0;Yn.Fixed64=1;Yn.Bytes=2;Yn.Fixed32=5;var cv=(1<<16)*(1<<16),o2=1/cv,Jz=12,YT=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Yn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var l=this.readVarint(),c=l>>3,d=this.pos;this.type=l&7,e(c,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Jd(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=s2(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Jd(this.buf,this.pos)+Jd(this.buf,this.pos+4)*cv;return this.pos+=8,e},readSFixed64:function(){var e=Jd(this.buf,this.pos)+s2(this.buf,this.pos+4)*cv;return this.pos+=8,e},readFloat:function(){var e=qd.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=qd.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r,l;return l=t[this.pos++],r=l&127,l<128||(l=t[this.pos++],r|=(l&127)<<7,l<128)||(l=t[this.pos++],r|=(l&127)<<14,l<128)||(l=t[this.pos++],r|=(l&127)<<21,l<128)?r:(l=t[this.pos],r|=(l&15)<<28,Qz(r,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Jz&&YT?dO(this.buf,t,e):fO(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Yn.Bytes)return e.push(this.readVarint(t));var r=os(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSVarint());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Yn.Bytes)return e.push(this.readBoolean());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFloat());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Yn.Bytes)return e.push(this.readDouble());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed32());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed32());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed64());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed64());var t=os(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Yn.Fixed32)this.pos+=4;else if(t===Yn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ic(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ic(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ic(this.buf,e&-1,this.pos),ic(this.buf,Math.floor(e*o2),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ic(this.buf,e&-1,this.pos),ic(this.buf,Math.floor(e*o2),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){eO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=pO(this.buf,e,this.pos);var r=this.pos-t;r>=128&&a2(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),qd.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),qd.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var l=this.pos-r;l>=128&&a2(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,r){this.writeTag(e,Yn.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,rO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,iO,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,sO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,oO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,aO,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,lO,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uO,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,cO,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hO,t)},writeBytesField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function Qz(e,t,r){var l=r.buf,c,d;if(d=l[r.pos++],c=(d&112)>>4,d<128||(d=l[r.pos++],c|=(d&127)<<3,d<128)||(d=l[r.pos++],c|=(d&127)<<10,d<128)||(d=l[r.pos++],c|=(d&127)<<17,d<128)||(d=l[r.pos++],c|=(d&127)<<24,d<128)||(d=l[r.pos++],c|=(d&1)<<31,d<128))return rc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function os(e){return e.type===Yn.Bytes?e.readVarint()+e.pos:e.pos+1}function rc(e,t,r){return r?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function eO(e,t){var r,l;if(e>=0?(r=e%4294967296|0,l=e/4294967296|0):(r=~(-e%4294967296),l=~(-e/4294967296),r^4294967295?r=r+1|0:(r=0,l=l+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),tO(r,l,t),nO(l,t)}function tO(e,t,r){r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos]=e&127}function nO(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),!!e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),!!e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),!!e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),!!e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),!!e&&(t.buf[t.pos++]=e&127)))))}function a2(e,t,r){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(l);for(var c=r.pos-1;c>=e;c--)r.buf[c+l]=r.buf[c]}function rO(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function iO(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function oO(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function aO(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function sO(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function lO(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function uO(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function cO(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function hO(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function Jd(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function ic(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function s2(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function fO(e,t,r){for(var l="",c=t;c<r;){var d=e[c],y=null,s=d>239?4:d>223?3:d>191?2:1;if(c+s>r)break;var w,E,C;s===1?d<128&&(y=d):s===2?(w=e[c+1],(w&192)===128&&(y=(d&31)<<6|w&63,y<=127&&(y=null))):s===3?(w=e[c+1],E=e[c+2],(w&192)===128&&(E&192)===128&&(y=(d&15)<<12|(w&63)<<6|E&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):s===4&&(w=e[c+1],E=e[c+2],C=e[c+3],(w&192)===128&&(E&192)===128&&(C&192)===128&&(y=(d&15)<<18|(w&63)<<12|(E&63)<<6|C&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,s=1):y>65535&&(y-=65536,l+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),l+=String.fromCharCode(y),c+=s}return l}function dO(e,t,r){return YT.decode(e.subarray(t,r))}function pO(e,t,r){for(var l=0,c,d;l<t.length;l++){if(c=t.charCodeAt(l),c>55295&&c<57344)if(d)if(c<56320){e[r++]=239,e[r++]=191,e[r++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||l+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):d=c;continue}else d&&(e[r++]=239,e[r++]=191,e[r++]=189,d=null);c<128?e[r++]=c:(c<2048?e[r++]=c>>6|192:(c<65536?e[r++]=c>>12|224:(e[r++]=c>>18|240,e[r++]=c>>12&63|128),e[r++]=c>>6&63|128),e[r++]=c&63|128)}return r}var K1={exports:{}},KT=function(t,r){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(r,c)}},mO=KT,_u=Object.prototype.toString;function q1(e){return _u.call(e)==="[object Array]"}function hv(e){return typeof e=="undefined"}function gO(e){return e!==null&&!hv(e)&&e.constructor!==null&&!hv(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function yO(e){return _u.call(e)==="[object ArrayBuffer]"}function vO(e){return typeof FormData!="undefined"&&e instanceof FormData}function _O(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function xO(e){return typeof e=="string"}function wO(e){return typeof e=="number"}function qT(e){return e!==null&&typeof e=="object"}function xp(e){if(_u.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function bO(e){return _u.call(e)==="[object Date]"}function EO(e){return _u.call(e)==="[object File]"}function SO(e){return _u.call(e)==="[object Blob]"}function JT(e){return _u.call(e)==="[object Function]"}function TO(e){return qT(e)&&JT(e.pipe)}function AO(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function IO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function CO(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function J1(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),q1(e))for(var r=0,l=e.length;r<l;r++)t.call(null,e[r],r,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function fv(){var e={};function t(c,d){xp(e[d])&&xp(c)?e[d]=fv(e[d],c):xp(c)?e[d]=fv({},c):q1(c)?e[d]=c.slice():e[d]=c}for(var r=0,l=arguments.length;r<l;r++)J1(arguments[r],t);return e}function PO(e,t,r){return J1(t,function(c,d){r&&typeof c=="function"?e[d]=mO(c,r):e[d]=c}),e}function kO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var yo={isArray:q1,isArrayBuffer:yO,isBuffer:gO,isFormData:vO,isArrayBufferView:_O,isString:xO,isNumber:wO,isObject:qT,isPlainObject:xp,isUndefined:hv,isDate:bO,isFile:EO,isBlob:SO,isFunction:JT,isStream:TO,isURLSearchParams:AO,isStandardBrowserEnv:CO,forEach:J1,merge:fv,extend:PO,trim:IO,stripBOM:kO},oc=yo;function l2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var QT=function(t,r,l){if(!r)return t;var c;if(l)c=l(r);else if(oc.isURLSearchParams(r))c=r.toString();else{var d=[];oc.forEach(r,function(w,E){w===null||typeof w=="undefined"||(oc.isArray(w)?E=E+"[]":w=[w],oc.forEach(w,function(S){oc.isDate(S)?S=S.toISOString():oc.isObject(S)&&(S=JSON.stringify(S)),d.push(l2(E)+"="+l2(S))}))}),c=d.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},MO=yo;function Km(){this.handlers=[]}Km.prototype.use=function(t,r,l){return this.handlers.push({fulfilled:t,rejected:r,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1};Km.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Km.prototype.forEach=function(t){MO.forEach(this.handlers,function(l){l!==null&&t(l)})};var zO=Km,OO=yo,LO=function(t,r){OO.forEach(t,function(c,d){d!==r&&d.toUpperCase()===r.toUpperCase()&&(t[r]=c,delete t[d])})},eA=function(t,r,l,c,d){return t.config=r,l&&(t.code=l),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},RO=eA,tA=function(t,r,l,c,d){var y=new Error(t);return RO(y,r,l,c,d)},FO=tA,BO=function(t,r,l){var c=l.config.validateStatus;!l.status||!c||c(l.status)?t(l):r(FO("Request failed with status code "+l.status,l.config,null,l.request,l))},Qd=yo,jO=Qd.isStandardBrowserEnv()?function(){return{write:function(r,l,c,d,y,s){var w=[];w.push(r+"="+encodeURIComponent(l)),Qd.isNumber(c)&&w.push("expires="+new Date(c).toGMTString()),Qd.isString(d)&&w.push("path="+d),Qd.isString(y)&&w.push("domain="+y),s===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(r){var l=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),DO=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},NO=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},UO=DO,$O=NO,VO=function(t,r){return t&&!UO(r)?$O(t,r):r},Py=yo,GO=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],WO=function(t){var r={},l,c,d;return t&&Py.forEach(t.split(`
`),function(s){if(d=s.indexOf(":"),l=Py.trim(s.substr(0,d)).toLowerCase(),c=Py.trim(s.substr(d+1)),l){if(r[l]&&GO.indexOf(l)>=0)return;l==="set-cookie"?r[l]=(r[l]?r[l]:[]).concat([c]):r[l]=r[l]?r[l]+", "+c:c}}),r},u2=yo,ZO=u2.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),l;function c(d){var y=d;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return l=c(window.location.href),function(y){var s=u2.isString(y)?c(y):y;return s.protocol===l.protocol&&s.host===l.host}}():function(){return function(){return!0}}(),ep=yo,HO=BO,XO=jO,YO=QT,KO=VO,qO=WO,JO=ZO,ky=tA,c2=function(t){return new Promise(function(l,c){var d=t.data,y=t.headers,s=t.responseType;ep.isFormData(d)&&delete y["Content-Type"];var w=new XMLHttpRequest;if(t.auth){var E=t.auth.username||"",C=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.Authorization="Basic "+btoa(E+":"+C)}var S=KO(t.baseURL,t.url);w.open(t.method.toUpperCase(),YO(S,t.params,t.paramsSerializer),!0),w.timeout=t.timeout;function P(){if(!!w){var ee="getAllResponseHeaders"in w?qO(w.getAllResponseHeaders()):null,Y=!s||s==="text"||s==="json"?w.responseText:w.response,W={data:Y,status:w.status,statusText:w.statusText,headers:ee,config:t,request:w};HO(l,c,W),w=null}}if("onloadend"in w?w.onloadend=P:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(P)},w.onabort=function(){!w||(c(ky("Request aborted",t,"ECONNABORTED",w)),w=null)},w.onerror=function(){c(ky("Network Error",t,null,w)),w=null},w.ontimeout=function(){var Y="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(Y=t.timeoutErrorMessage),c(ky(Y,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",w)),w=null},ep.isStandardBrowserEnv()){var N=(t.withCredentials||JO(S))&&t.xsrfCookieName?XO.read(t.xsrfCookieName):void 0;N&&(y[t.xsrfHeaderName]=N)}"setRequestHeader"in w&&ep.forEach(y,function(Y,W){typeof d=="undefined"&&W.toLowerCase()==="content-type"?delete y[W]:w.setRequestHeader(W,Y)}),ep.isUndefined(t.withCredentials)||(w.withCredentials=!!t.withCredentials),s&&s!=="json"&&(w.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&w.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(Y){!w||(w.abort(),c(Y),w=null)}),d||(d=null),w.send(d)})},ci=yo,h2=LO,QO=eA,e5={"Content-Type":"application/x-www-form-urlencoded"};function f2(e,t){!ci.isUndefined(e)&&ci.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function t5(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=c2),e}function n5(e,t,r){if(ci.isString(e))try{return(t||JSON.parse)(e),ci.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(r||JSON.stringify)(e)}var qm={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:t5(),transformRequest:[function(t,r){return h2(r,"Accept"),h2(r,"Content-Type"),ci.isFormData(t)||ci.isArrayBuffer(t)||ci.isBuffer(t)||ci.isStream(t)||ci.isFile(t)||ci.isBlob(t)?t:ci.isArrayBufferView(t)?t.buffer:ci.isURLSearchParams(t)?(f2(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ci.isObject(t)||r&&r["Content-Type"]==="application/json"?(f2(r,"application/json"),n5(t)):t}],transformResponse:[function(t){var r=this.transitional,l=r&&r.silentJSONParsing,c=r&&r.forcedJSONParsing,d=!l&&this.responseType==="json";if(d||c&&ci.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(d)throw y.name==="SyntaxError"?QO(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};qm.headers={common:{Accept:"application/json, text/plain, */*"}};ci.forEach(["delete","get","head"],function(t){qm.headers[t]={}});ci.forEach(["post","put","patch"],function(t){qm.headers[t]=ci.merge(e5)});var Q1=qm,r5=yo,i5=Q1,o5=function(t,r,l){var c=this||i5;return r5.forEach(l,function(y){t=y.call(c,t,r)}),t},nA=function(t){return!!(t&&t.__CANCEL__)},d2=yo,My=o5,a5=nA,s5=Q1;function zy(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var l5=function(t){zy(t),t.headers=t.headers||{},t.data=My.call(t,t.data,t.headers,t.transformRequest),t.headers=d2.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),d2.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var r=t.adapter||s5.adapter;return r(t).then(function(c){return zy(t),c.data=My.call(t,c.data,c.headers,t.transformResponse),c},function(c){return a5(c)||(zy(t),c&&c.response&&(c.response.data=My.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},bi=yo,rA=function(t,r){r=r||{};var l={},c=["url","method","data"],d=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function w(P,N){return bi.isPlainObject(P)&&bi.isPlainObject(N)?bi.merge(P,N):bi.isPlainObject(N)?bi.merge({},N):bi.isArray(N)?N.slice():N}function E(P){bi.isUndefined(r[P])?bi.isUndefined(t[P])||(l[P]=w(void 0,t[P])):l[P]=w(t[P],r[P])}bi.forEach(c,function(N){bi.isUndefined(r[N])||(l[N]=w(void 0,r[N]))}),bi.forEach(d,E),bi.forEach(y,function(N){bi.isUndefined(r[N])?bi.isUndefined(t[N])||(l[N]=w(void 0,t[N])):l[N]=w(void 0,r[N])}),bi.forEach(s,function(N){N in r?l[N]=w(t[N],r[N]):N in t&&(l[N]=w(void 0,t[N]))});var C=c.concat(d).concat(y).concat(s),S=Object.keys(t).concat(Object.keys(r)).filter(function(N){return C.indexOf(N)===-1});return bi.forEach(S,E),l};const u5="axios",c5="0.21.4",h5="Promise based HTTP client for the browser and node.js",f5="index.js",d5={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},p5={type:"git",url:"https://github.com/axios/axios.git"},m5=["xhr","http","ajax","promise","node"],g5="Matt Zabriskie",y5="MIT",v5={url:"https://github.com/axios/axios/issues"},_5="https://axios-http.com",x5={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},w5={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},b5="dist/axios.min.js",E5="dist/axios.min.js",S5="./index.d.ts",T5={"follow-redirects":"^1.14.0"},A5=[{path:"./dist/axios.min.js",threshold:"5kB"}];var I5={name:u5,version:c5,description:h5,main:f5,scripts:d5,repository:p5,keywords:m5,author:g5,license:y5,bugs:v5,homepage:_5,devDependencies:x5,browser:w5,jsdelivr:b5,unpkg:E5,typings:S5,dependencies:T5,bundlesize:A5},iA=I5,e_={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){e_[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});var p2={},C5=iA.version.split(".");function oA(e,t){for(var r=t?t.split("."):C5,l=e.split("."),c=0;c<3;c++){if(r[c]>l[c])return!0;if(r[c]<l[c])return!1}return!1}e_.transitional=function(t,r,l){var c=r&&oA(r);function d(y,s){return"[Axios v"+iA.version+"] Transitional option '"+y+"'"+s+(l?". "+l:"")}return function(y,s,w){if(t===!1)throw new Error(d(s," has been removed in "+r));return c&&!p2[s]&&(p2[s]=!0,console.warn(d(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(y,s,w):!0}};function P5(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var l=Object.keys(e),c=l.length;c-- >0;){var d=l[c],y=t[d];if(y){var s=e[d],w=s===void 0||y(s,d,e);if(w!==!0)throw new TypeError("option "+d+" must be "+w);continue}if(r!==!0)throw Error("Unknown option "+d)}}var k5={isOlderVersion:oA,assertOptions:P5,validators:e_},aA=yo,M5=QT,m2=zO,g2=l5,Jm=rA,sA=k5,ac=sA.validators;function ed(e){this.defaults=e,this.interceptors={request:new m2,response:new m2}}ed.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Jm(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&sA.assertOptions(r,{silentJSONParsing:ac.transitional(ac.boolean,"1.0.0"),forcedJSONParsing:ac.transitional(ac.boolean,"1.0.0"),clarifyTimeoutError:ac.transitional(ac.boolean,"1.0.0")},!1);var l=[],c=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(c=c&&P.synchronous,l.unshift(P.fulfilled,P.rejected))});var d=[];this.interceptors.response.forEach(function(P){d.push(P.fulfilled,P.rejected)});var y;if(!c){var s=[g2,void 0];for(Array.prototype.unshift.apply(s,l),s=s.concat(d),y=Promise.resolve(t);s.length;)y=y.then(s.shift(),s.shift());return y}for(var w=t;l.length;){var E=l.shift(),C=l.shift();try{w=E(w)}catch(S){C(S);break}}try{y=g2(w)}catch(S){return Promise.reject(S)}for(;d.length;)y=y.then(d.shift(),d.shift());return y};ed.prototype.getUri=function(t){return t=Jm(this.defaults,t),M5(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};aA.forEach(["delete","get","head","options"],function(t){ed.prototype[t]=function(r,l){return this.request(Jm(l||{},{method:t,url:r,data:(l||{}).data}))}});aA.forEach(["post","put","patch"],function(t){ed.prototype[t]=function(r,l,c){return this.request(Jm(c||{},{method:t,url:r,data:l}))}});var z5=ed;function t_(e){this.message=e}t_.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};t_.prototype.__CANCEL__=!0;var lA=t_,O5=lA;function Em(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(c){t=c});var r=this;e(function(c){r.reason||(r.reason=new O5(c),t(r.reason))})}Em.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Em.source=function(){var t,r=new Em(function(c){t=c});return{token:r,cancel:t}};var L5=Em,R5=function(t){return function(l){return t.apply(null,l)}},F5=function(t){return typeof t=="object"&&t.isAxiosError===!0},y2=yo,B5=KT,wp=z5,j5=rA,D5=Q1;function uA(e){var t=new wp(e),r=B5(wp.prototype.request,t);return y2.extend(r,wp.prototype,t),y2.extend(r,t),r}var ua=uA(D5);ua.Axios=wp;ua.create=function(t){return uA(j5(ua.defaults,t))};ua.Cancel=lA;ua.CancelToken=L5;ua.isCancel=nA;ua.all=function(t){return Promise.all(t)};ua.spread=R5;ua.isAxiosError=F5;K1.exports=ua;K1.exports.default=ua;var N5=K1.exports,U5={},$5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U5}),V5=dv($5),Qm={},G5=Oc;function Oc(e,t){this.x=e,this.y=t}Oc.prototype={clone:function(){return new Oc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),l=t*this.x-r*this.y,c=r*this.x+t*this.y;return this.x=l,this.y=c,this},_rotateAround:function(e,t){var r=Math.cos(e),l=Math.sin(e),c=t.x+r*(this.x-t.x)-l*(this.y-t.y),d=t.y+l*(this.x-t.x)+r*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Oc.convert=function(e){return e instanceof Oc?e:Array.isArray(e)?new Oc(e[0],e[1]):e};var W5=G5,cA=$c;function $c(e,t,r,l,c){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=c,e.readFields(Z5,this,t)}function Z5(e,t,r){e==1?t.id=r.readVarint():e==2?H5(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function H5(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var l=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[l]=c}}$c.types=["Unknown","Point","LineString","Polygon"];$c.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,l=0,c=0,d=0,y=[],s;e.pos<t;){if(l<=0){var w=e.readVarint();r=w&7,l=w>>3}if(l--,r===1||r===2)c+=e.readSVarint(),d+=e.readSVarint(),r===1&&(s&&y.push(s),s=[]),s.push(new W5(c,d));else if(r===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+r)}return s&&y.push(s),y};$c.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,l=0,c=0,d=0,y=1/0,s=-1/0,w=1/0,E=-1/0;e.pos<t;){if(l<=0){var C=e.readVarint();r=C&7,l=C>>3}if(l--,r===1||r===2)c+=e.readSVarint(),d+=e.readSVarint(),c<y&&(y=c),c>s&&(s=c),d<w&&(w=d),d>E&&(E=d);else if(r!==7)throw new Error("unknown command "+r)}return[y,w,s,E]};$c.prototype.toGeoJSON=function(e,t,r){var l=this.extent*Math.pow(2,r),c=this.extent*e,d=this.extent*t,y=this.loadGeometry(),s=$c.types[this.type],w,E;function C(N){for(var ee=0;ee<N.length;ee++){var Y=N[ee],W=180-(Y.y+d)*360/l;N[ee]=[(Y.x+c)*360/l-180,360/Math.PI*Math.atan(Math.exp(W*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(w=0;w<y.length;w++)S[w]=y[w][0];y=S,C(y);break;case 2:for(w=0;w<y.length;w++)C(y[w]);break;case 3:for(y=X5(y),w=0;w<y.length;w++)for(E=0;E<y[w].length;E++)C(y[w][E]);break}y.length===1?y=y[0]:s="Multi"+s;var P={type:"Feature",geometry:{type:s,coordinates:y},properties:this.properties};return"id"in this&&(P.id=this.id),P};function X5(e){var t=e.length;if(t<=1)return[e];for(var r=[],l,c,d=0;d<t;d++){var y=Y5(e[d]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(l&&r.push(l),l=[e[d]]):l.push(e[d]))}return l&&r.push(l),r}function Y5(e){for(var t=0,r=0,l=e.length,c=l-1,d,y;r<l;c=r++)d=e[r],y=e[c],t+=(y.x-d.x)*(d.y+y.y);return t}var K5=cA,hA=fA;function fA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(q5,this,t),this.length=this._features.length}function q5(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(J5(r))}function J5(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var l=e.readVarint()>>3;t=l===1?e.readString():l===2?e.readFloat():l===3?e.readDouble():l===4?e.readVarint64():l===5?e.readVarint():l===6?e.readSVarint():l===7?e.readBoolean():null}return t}fA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new K5(this._pbf,t,this.extent,this._keys,this._values)};var Q5=hA,eL=tL;function tL(e,t){this.layers=e.readFields(nL,{},t)}function nL(e,t,r){if(e===3){var l=new Q5(r,r.readVarint()+r.pos);l.length&&(t[l.name]=l)}}Qm.VectorTile=eL;Qm.VectorTileFeature=cA;Qm.VectorTileLayer=hA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Lz,r=Kz,l=qz,c=N5,d=V5,y=Qm;function s(G){return G&&typeof G=="object"&&"default"in G?G:{default:G}}var w=s(l),E=s(c),C=s(d),S=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Gs!="undefined"?Gs:typeof self!="undefined"?self:{};function P(G){var V={exports:{}};return G(V,V.exports),V.exports}var N=P(function(G,V){(function(H,F){G.exports=F(E.default)})(S,function(re){return function(H){var F={};function b(M){if(F[M])return F[M].exports;var D=F[M]={i:M,l:!1,exports:{}};return H[M].call(D.exports,D,D.exports,b),D.l=!0,D.exports}return b.m=H,b.c=F,b.d=function(M,D,q){b.o(M,D)||Object.defineProperty(M,D,{enumerable:!0,get:q})},b.r=function(M){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},b.t=function(M,D){if(D&1&&(M=b(M)),D&8||D&4&&typeof M=="object"&&M&&M.__esModule)return M;var q=Object.create(null);if(b.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:M}),D&2&&typeof M!="string")for(var K in M)b.d(q,K,function(de){return M[de]}.bind(null,K));return q},b.n=function(M){var D=M&&M.__esModule?function(){return M.default}:function(){return M};return b.d(D,"a",D),D},b.o=function(M,D){return Object.prototype.hasOwnProperty.call(M,D)},b.p="",b(b.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(H,F,b){b.r(F),b.d(F,"CacheControl",function(){return ce}),b.d(F,"parse",function(){return ke}),b.d(F,"format",function(){return be}),b("./node_modules/core-js/modules/es6.array.from.js"),b("./node_modules/core-js/modules/es6.function.name.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/core-js/modules/web.dom.iterable.js"),b("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.regexp.split.js"),b("./node_modules/core-js/modules/es6.number.is-finite.js");function M(Ie,Be){return ye(Ie)||de(Ie,Be)||q(Ie,Be)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(Ie,Be){if(!!Ie){if(typeof Ie=="string")return K(Ie,Be);var Ze=Object.prototype.toString.call(Ie).slice(8,-1);if(Ze==="Object"&&Ie.constructor&&(Ze=Ie.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(Ie);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return K(Ie,Be)}}function K(Ie,Be){(Be==null||Be>Ie.length)&&(Be=Ie.length);for(var Ze=0,et=new Array(Be);Ze<Be;Ze++)et[Ze]=Ie[Ze];return et}function de(Ie,Be){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Ie)))){var Ze=[],et=!0,tt=!1,ct=void 0;try{for(var St=Ie[Symbol.iterator](),ft;!(et=(ft=St.next()).done)&&(Ze.push(ft.value),!(Be&&Ze.length===Be));et=!0);}catch(At){tt=!0,ct=At}finally{try{!et&&St.return!=null&&St.return()}finally{if(tt)throw ct}}return Ze}}function ye(Ie){if(Array.isArray(Ie))return Ie}function xe(Ie,Be){if(!(Ie instanceof Be))throw new TypeError("Cannot call a class as a function")}function te(Ie,Be){for(var Ze=0;Ze<Be.length;Ze++){var et=Be[Ze];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(Ie,et.key,et)}}function ae(Ie,Be,Ze){return Be&&te(Ie.prototype,Be),Ze&&te(Ie,Ze),Ie}var oe=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ue={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function Ee(Ie){return Ie===null}function Pe(Ie){if(!Ie)return null;var Be=parseInt(Ie,10);return!Number.isFinite(Be)||Be<0?null:Be}var ce=function(){function Ie(){xe(this,Ie),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ae(Ie,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var et={},tt=Ze.match(oe)||[];return Array.prototype.forEach.call(tt,function(ct){var St=ct.split("=",2),ft=M(St,1),At=ft[0],qt=null;St.length>1&&(qt=St[1].trim()),et[At.toLowerCase()]=qt}),this.maxAge=Pe(et[ue.maxAge]),this.sharedMaxAge=Pe(et[ue.sharedMaxAge]),this.maxStale=Ee(et[ue.maxStale]),this.maxStaleDuration=Pe(et[ue.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Pe(et[ue.minFresh]),this.immutable=Ee(et[ue.immutable]),this.mustRevalidate=Ee(et[ue.mustRevalidate]),this.noCache=Ee(et[ue.noCache]),this.noStore=Ee(et[ue.noStore]),this.noTransform=Ee(et[ue.noTransform]),this.onlyIfCached=Ee(et[ue.onlyIfCached]),this.private=Ee(et[ue.private]),this.proxyRevalidate=Ee(et[ue.proxyRevalidate]),this.public=Ee(et[ue.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(ue.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(ue.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(ue.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(ue.maxStale)),this.minFresh&&Ze.push("".concat(ue.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(ue.immutable),this.mustRevalidate&&Ze.push(ue.mustRevalidate),this.noCache&&Ze.push(ue.noCache),this.noStore&&Ze.push(ue.noStore),this.noTransform&&Ze.push(ue.noTransform),this.onlyIfCached&&Ze.push(ue.onlyIfCached),this.private&&Ze.push(ue.private),this.proxyRevalidate&&Ze.push(ue.proxyRevalidate),this.public&&Ze.push(ue.public),Ze.join(", ")}}]),Ie}();function ke(Ie){var Be=new ce;return Be.parse(Ie)}function be(Ie){return Ie instanceof ce?Ie.format():ce.prototype.format.call(Ie)}F.default={CacheControl:ce,parse:ke,format:be}},"./node_modules/charenc/charenc.js":function(H,F){var b={utf8:{stringToBytes:function(M){return b.bin.stringToBytes(unescape(encodeURIComponent(M)))},bytesToString:function(M){return decodeURIComponent(escape(b.bin.bytesToString(M)))}},bin:{stringToBytes:function(M){for(var D=[],q=0;q<M.length;q++)D.push(M.charCodeAt(q)&255);return D},bytesToString:function(M){for(var D=[],q=0;q<M.length;q++)D.push(String.fromCharCode(M[q]));return D.join("")}}};H.exports=b},"./node_modules/core-js/modules/_a-function.js":function(H,F){H.exports=function(b){if(typeof b!="function")throw TypeError(b+" is not a function!");return b}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_wks.js")("unscopables"),D=Array.prototype;D[M]==null&&b("./node_modules/core-js/modules/_hide.js")(D,M,{}),H.exports=function(q){D[M][q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_string-at.js")(!0);H.exports=function(D,q,K){return q+(K?M(D,q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_is-object.js");H.exports=function(D){if(!M(D))throw TypeError(D+" is not an object!");return D}},"./node_modules/core-js/modules/_array-includes.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_to-iobject.js"),D=b("./node_modules/core-js/modules/_to-length.js"),q=b("./node_modules/core-js/modules/_to-absolute-index.js");H.exports=function(K){return function(de,ye,xe){var te=M(de),ae=D(te.length),oe=q(xe,ae),ue;if(K&&ye!=ye){for(;ae>oe;)if(ue=te[oe++],ue!=ue)return!0}else for(;ae>oe;oe++)if((K||oe in te)&&te[oe]===ye)return K||oe||0;return!K&&-1}}},"./node_modules/core-js/modules/_bind.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_a-function.js"),D=b("./node_modules/core-js/modules/_is-object.js"),q=b("./node_modules/core-js/modules/_invoke.js"),K=[].slice,de={},ye=function(xe,te,ae){if(!(te in de)){for(var oe=[],ue=0;ue<te;ue++)oe[ue]="a["+ue+"]";de[te]=Function("F,a","return new F("+oe.join(",")+")")}return de[te](xe,ae)};H.exports=Function.bind||function(te){var ae=M(this),oe=K.call(arguments,1),ue=function(){var Ee=oe.concat(K.call(arguments));return this instanceof ue?ye(ae,Ee.length,Ee):q(ae,Ee,te)};return D(ae.prototype)&&(ue.prototype=ae.prototype),ue}},"./node_modules/core-js/modules/_classof.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_cof.js"),D=b("./node_modules/core-js/modules/_wks.js")("toStringTag"),q=M(function(){return arguments}())=="Arguments",K=function(de,ye){try{return de[ye]}catch{}};H.exports=function(de){var ye,xe,te;return de===void 0?"Undefined":de===null?"Null":typeof(xe=K(ye=Object(de),D))=="string"?xe:q?M(ye):(te=M(ye))=="Object"&&typeof ye.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(H,F){var b={}.toString;H.exports=function(M){return b.call(M).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(H,F){var b=H.exports={version:"2.6.12"};typeof __e=="number"&&(__e=b)},"./node_modules/core-js/modules/_create-property.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-dp.js"),D=b("./node_modules/core-js/modules/_property-desc.js");H.exports=function(q,K,de){K in q?M.f(q,K,D(0,de)):q[K]=de}},"./node_modules/core-js/modules/_ctx.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_a-function.js");H.exports=function(D,q,K){if(M(D),q===void 0)return D;switch(K){case 1:return function(de){return D.call(q,de)};case 2:return function(de,ye){return D.call(q,de,ye)};case 3:return function(de,ye,xe){return D.call(q,de,ye,xe)}}return function(){return D.apply(q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(H,F){H.exports=function(b){if(b==null)throw TypeError("Can't call method on  "+b);return b}},"./node_modules/core-js/modules/_descriptors.js":function(H,F,b){H.exports=!b("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_is-object.js"),D=b("./node_modules/core-js/modules/_global.js").document,q=M(D)&&M(D.createElement);H.exports=function(K){return q?D.createElement(K):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(H,F){H.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-keys.js"),D=b("./node_modules/core-js/modules/_object-gops.js"),q=b("./node_modules/core-js/modules/_object-pie.js");H.exports=function(K){var de=M(K),ye=D.f;if(ye)for(var xe=ye(K),te=q.f,ae=0,oe;xe.length>ae;)te.call(K,oe=xe[ae++])&&de.push(oe);return de}},"./node_modules/core-js/modules/_export.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_global.js"),D=b("./node_modules/core-js/modules/_core.js"),q=b("./node_modules/core-js/modules/_hide.js"),K=b("./node_modules/core-js/modules/_redefine.js"),de=b("./node_modules/core-js/modules/_ctx.js"),ye="prototype",xe=function(te,ae,oe){var ue=te&xe.F,Ee=te&xe.G,Pe=te&xe.S,ce=te&xe.P,ke=te&xe.B,be=Ee?M:Pe?M[ae]||(M[ae]={}):(M[ae]||{})[ye],Ie=Ee?D:D[ae]||(D[ae]={}),Be=Ie[ye]||(Ie[ye]={}),Ze,et,tt,ct;Ee&&(oe=ae);for(Ze in oe)et=!ue&&be&&be[Ze]!==void 0,tt=(et?be:oe)[Ze],ct=ke&&et?de(tt,M):ce&&typeof tt=="function"?de(Function.call,tt):tt,be&&K(be,Ze,tt,te&xe.U),Ie[Ze]!=tt&&q(Ie,Ze,ct),ce&&Be[Ze]!=tt&&(Be[Ze]=tt)};M.core=D,xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128,H.exports=xe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_wks.js")("match");H.exports=function(D){var q=/./;try{"/./"[D](q)}catch{try{return q[M]=!1,!"/./"[D](q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(H,F){H.exports=function(b){try{return!!b()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(H,F,b){b("./node_modules/core-js/modules/es6.regexp.exec.js");var M=b("./node_modules/core-js/modules/_redefine.js"),D=b("./node_modules/core-js/modules/_hide.js"),q=b("./node_modules/core-js/modules/_fails.js"),K=b("./node_modules/core-js/modules/_defined.js"),de=b("./node_modules/core-js/modules/_wks.js"),ye=b("./node_modules/core-js/modules/_regexp-exec.js"),xe=de("species"),te=!q(function(){var oe=/./;return oe.exec=function(){var ue=[];return ue.groups={a:"7"},ue},"".replace(oe,"$<a>")!=="7"}),ae=function(){var oe=/(?:)/,ue=oe.exec;oe.exec=function(){return ue.apply(this,arguments)};var Ee="ab".split(oe);return Ee.length===2&&Ee[0]==="a"&&Ee[1]==="b"}();H.exports=function(oe,ue,Ee){var Pe=de(oe),ce=!q(function(){var et={};return et[Pe]=function(){return 7},""[oe](et)!=7}),ke=ce?!q(function(){var et=!1,tt=/a/;return tt.exec=function(){return et=!0,null},oe==="split"&&(tt.constructor={},tt.constructor[xe]=function(){return tt}),tt[Pe](""),!et}):void 0;if(!ce||!ke||oe==="replace"&&!te||oe==="split"&&!ae){var be=/./[Pe],Ie=Ee(K,Pe,""[oe],function(tt,ct,St,ft,At){return ct.exec===ye?ce&&!At?{done:!0,value:be.call(ct,St,ft)}:{done:!0,value:tt.call(St,ct,ft)}:{done:!1}}),Be=Ie[0],Ze=Ie[1];M(String.prototype,oe,Be),D(RegExp.prototype,Pe,ue==2?function(et,tt){return Ze.call(et,this,tt)}:function(et){return Ze.call(et,this)})}}},"./node_modules/core-js/modules/_flags.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_an-object.js");H.exports=function(){var D=M(this),q="";return D.global&&(q+="g"),D.ignoreCase&&(q+="i"),D.multiline&&(q+="m"),D.unicode&&(q+="u"),D.sticky&&(q+="y"),q}},"./node_modules/core-js/modules/_function-to-string.js":function(H,F,b){H.exports=b("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(H,F){var b=H.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=b)},"./node_modules/core-js/modules/_has.js":function(H,F){var b={}.hasOwnProperty;H.exports=function(M,D){return b.call(M,D)}},"./node_modules/core-js/modules/_hide.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-dp.js"),D=b("./node_modules/core-js/modules/_property-desc.js");H.exports=b("./node_modules/core-js/modules/_descriptors.js")?function(q,K,de){return M.f(q,K,D(1,de))}:function(q,K,de){return q[K]=de,q}},"./node_modules/core-js/modules/_html.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_global.js").document;H.exports=M&&M.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(H,F,b){H.exports=!b("./node_modules/core-js/modules/_descriptors.js")&&!b("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(b("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(H,F){H.exports=function(b,M,D){var q=D===void 0;switch(M.length){case 0:return q?b():b.call(D);case 1:return q?b(M[0]):b.call(D,M[0]);case 2:return q?b(M[0],M[1]):b.call(D,M[0],M[1]);case 3:return q?b(M[0],M[1],M[2]):b.call(D,M[0],M[1],M[2]);case 4:return q?b(M[0],M[1],M[2],M[3]):b.call(D,M[0],M[1],M[2],M[3])}return b.apply(D,M)}},"./node_modules/core-js/modules/_iobject.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_cof.js");H.exports=Object("z").propertyIsEnumerable(0)?Object:function(D){return M(D)=="String"?D.split(""):Object(D)}},"./node_modules/core-js/modules/_is-array-iter.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_iterators.js"),D=b("./node_modules/core-js/modules/_wks.js")("iterator"),q=Array.prototype;H.exports=function(K){return K!==void 0&&(M.Array===K||q[D]===K)}},"./node_modules/core-js/modules/_is-array.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_cof.js");H.exports=Array.isArray||function(q){return M(q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(H,F){H.exports=function(b){return typeof b=="object"?b!==null:typeof b=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_is-object.js"),D=b("./node_modules/core-js/modules/_cof.js"),q=b("./node_modules/core-js/modules/_wks.js")("match");H.exports=function(K){var de;return M(K)&&((de=K[q])!==void 0?!!de:D(K)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_an-object.js");H.exports=function(D,q,K,de){try{return de?q(M(K)[0],K[1]):q(K)}catch(xe){var ye=D.return;throw ye!==void 0&&M(ye.call(D)),xe}}},"./node_modules/core-js/modules/_iter-create.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-create.js"),D=b("./node_modules/core-js/modules/_property-desc.js"),q=b("./node_modules/core-js/modules/_set-to-string-tag.js"),K={};b("./node_modules/core-js/modules/_hide.js")(K,b("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),H.exports=function(de,ye,xe){de.prototype=M(K,{next:D(1,xe)}),q(de,ye+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_library.js"),D=b("./node_modules/core-js/modules/_export.js"),q=b("./node_modules/core-js/modules/_redefine.js"),K=b("./node_modules/core-js/modules/_hide.js"),de=b("./node_modules/core-js/modules/_iterators.js"),ye=b("./node_modules/core-js/modules/_iter-create.js"),xe=b("./node_modules/core-js/modules/_set-to-string-tag.js"),te=b("./node_modules/core-js/modules/_object-gpo.js"),ae=b("./node_modules/core-js/modules/_wks.js")("iterator"),oe=!([].keys&&"next"in[].keys()),ue="@@iterator",Ee="keys",Pe="values",ce=function(){return this};H.exports=function(ke,be,Ie,Be,Ze,et,tt){ye(Ie,be,Be);var ct=function(L){if(!oe&&L in qt)return qt[L];switch(L){case Ee:return function(){return new Ie(this,L)};case Pe:return function(){return new Ie(this,L)}}return function(){return new Ie(this,L)}},St=be+" Iterator",ft=Ze==Pe,At=!1,qt=ke.prototype,Bt=qt[ae]||qt[ue]||Ze&&qt[Ze],ln=Bt||ct(Ze),En=Ze?ft?ct("entries"):ln:void 0,_n=be=="Array"&&qt.entries||Bt,nn,Pn,ge;if(_n&&(ge=te(_n.call(new ke)),ge!==Object.prototype&&ge.next&&(xe(ge,St,!0),!M&&typeof ge[ae]!="function"&&K(ge,ae,ce))),ft&&Bt&&Bt.name!==Pe&&(At=!0,ln=function(){return Bt.call(this)}),(!M||tt)&&(oe||At||!qt[ae])&&K(qt,ae,ln),de[be]=ln,de[St]=ce,Ze)if(nn={values:ft?ln:ct(Pe),keys:et?ln:ct(Ee),entries:En},tt)for(Pn in nn)Pn in qt||q(qt,Pn,nn[Pn]);else D(D.P+D.F*(oe||At),be,nn);return nn}},"./node_modules/core-js/modules/_iter-detect.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_wks.js")("iterator"),D=!1;try{var q=[7][M]();q.return=function(){D=!0},Array.from(q,function(){throw 2})}catch{}H.exports=function(K,de){if(!de&&!D)return!1;var ye=!1;try{var xe=[7],te=xe[M]();te.next=function(){return{done:ye=!0}},xe[M]=function(){return te},K(xe)}catch{}return ye}},"./node_modules/core-js/modules/_iter-step.js":function(H,F){H.exports=function(b,M){return{value:M,done:!!b}}},"./node_modules/core-js/modules/_iterators.js":function(H,F){H.exports={}},"./node_modules/core-js/modules/_library.js":function(H,F){H.exports=!1},"./node_modules/core-js/modules/_meta.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_uid.js")("meta"),D=b("./node_modules/core-js/modules/_is-object.js"),q=b("./node_modules/core-js/modules/_has.js"),K=b("./node_modules/core-js/modules/_object-dp.js").f,de=0,ye=Object.isExtensible||function(){return!0},xe=!b("./node_modules/core-js/modules/_fails.js")(function(){return ye(Object.preventExtensions({}))}),te=function(Pe){K(Pe,M,{value:{i:"O"+ ++de,w:{}}})},ae=function(Pe,ce){if(!D(Pe))return typeof Pe=="symbol"?Pe:(typeof Pe=="string"?"S":"P")+Pe;if(!q(Pe,M)){if(!ye(Pe))return"F";if(!ce)return"E";te(Pe)}return Pe[M].i},oe=function(Pe,ce){if(!q(Pe,M)){if(!ye(Pe))return!0;if(!ce)return!1;te(Pe)}return Pe[M].w},ue=function(Pe){return xe&&Ee.NEED&&ye(Pe)&&!q(Pe,M)&&te(Pe),Pe},Ee=H.exports={KEY:M,NEED:!1,fastKey:ae,getWeak:oe,onFreeze:ue}},"./node_modules/core-js/modules/_object-create.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_an-object.js"),D=b("./node_modules/core-js/modules/_object-dps.js"),q=b("./node_modules/core-js/modules/_enum-bug-keys.js"),K=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),de=function(){},ye="prototype",xe=function(){var te=b("./node_modules/core-js/modules/_dom-create.js")("iframe"),ae=q.length,oe="<",ue=">",Ee;for(te.style.display="none",b("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",Ee=te.contentWindow.document,Ee.open(),Ee.write(oe+"script"+ue+"document.F=Object"+oe+"/script"+ue),Ee.close(),xe=Ee.F;ae--;)delete xe[ye][q[ae]];return xe()};H.exports=Object.create||function(ae,oe){var ue;return ae!==null?(de[ye]=M(ae),ue=new de,de[ye]=null,ue[K]=ae):ue=xe(),oe===void 0?ue:D(ue,oe)}},"./node_modules/core-js/modules/_object-dp.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_an-object.js"),D=b("./node_modules/core-js/modules/_ie8-dom-define.js"),q=b("./node_modules/core-js/modules/_to-primitive.js"),K=Object.defineProperty;F.f=b("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ye,xe,te){if(M(ye),xe=q(xe,!0),M(te),D)try{return K(ye,xe,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(ye[xe]=te.value),ye}},"./node_modules/core-js/modules/_object-dps.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-dp.js"),D=b("./node_modules/core-js/modules/_an-object.js"),q=b("./node_modules/core-js/modules/_object-keys.js");H.exports=b("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(de,ye){D(de);for(var xe=q(ye),te=xe.length,ae=0,oe;te>ae;)M.f(de,oe=xe[ae++],ye[oe]);return de}},"./node_modules/core-js/modules/_object-gopd.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-pie.js"),D=b("./node_modules/core-js/modules/_property-desc.js"),q=b("./node_modules/core-js/modules/_to-iobject.js"),K=b("./node_modules/core-js/modules/_to-primitive.js"),de=b("./node_modules/core-js/modules/_has.js"),ye=b("./node_modules/core-js/modules/_ie8-dom-define.js"),xe=Object.getOwnPropertyDescriptor;F.f=b("./node_modules/core-js/modules/_descriptors.js")?xe:function(ae,oe){if(ae=q(ae),oe=K(oe,!0),ye)try{return xe(ae,oe)}catch{}if(de(ae,oe))return D(!M.f.call(ae,oe),ae[oe])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_to-iobject.js"),D=b("./node_modules/core-js/modules/_object-gopn.js").f,q={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],de=function(ye){try{return D(ye)}catch{return K.slice()}};H.exports.f=function(xe){return K&&q.call(xe)=="[object Window]"?de(xe):D(M(xe))}},"./node_modules/core-js/modules/_object-gopn.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-keys-internal.js"),D=b("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");F.f=Object.getOwnPropertyNames||function(K){return M(K,D)}},"./node_modules/core-js/modules/_object-gops.js":function(H,F){F.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_has.js"),D=b("./node_modules/core-js/modules/_to-object.js"),q=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),K=Object.prototype;H.exports=Object.getPrototypeOf||function(de){return de=D(de),M(de,q)?de[q]:typeof de.constructor=="function"&&de instanceof de.constructor?de.constructor.prototype:de instanceof Object?K:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_has.js"),D=b("./node_modules/core-js/modules/_to-iobject.js"),q=b("./node_modules/core-js/modules/_array-includes.js")(!1),K=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");H.exports=function(de,ye){var xe=D(de),te=0,ae=[],oe;for(oe in xe)oe!=K&&M(xe,oe)&&ae.push(oe);for(;ye.length>te;)M(xe,oe=ye[te++])&&(~q(ae,oe)||ae.push(oe));return ae}},"./node_modules/core-js/modules/_object-keys.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-keys-internal.js"),D=b("./node_modules/core-js/modules/_enum-bug-keys.js");H.exports=Object.keys||function(K){return M(K,D)}},"./node_modules/core-js/modules/_object-pie.js":function(H,F){F.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-gopn.js"),D=b("./node_modules/core-js/modules/_object-gops.js"),q=b("./node_modules/core-js/modules/_an-object.js"),K=b("./node_modules/core-js/modules/_global.js").Reflect;H.exports=K&&K.ownKeys||function(ye){var xe=M.f(q(ye)),te=D.f;return te?xe.concat(te(ye)):xe}},"./node_modules/core-js/modules/_property-desc.js":function(H,F){H.exports=function(b,M){return{enumerable:!(b&1),configurable:!(b&2),writable:!(b&4),value:M}}},"./node_modules/core-js/modules/_redefine.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_global.js"),D=b("./node_modules/core-js/modules/_hide.js"),q=b("./node_modules/core-js/modules/_has.js"),K=b("./node_modules/core-js/modules/_uid.js")("src"),de=b("./node_modules/core-js/modules/_function-to-string.js"),ye="toString",xe=(""+de).split(ye);b("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return de.call(te)},(H.exports=function(te,ae,oe,ue){var Ee=typeof oe=="function";Ee&&(q(oe,"name")||D(oe,"name",ae)),te[ae]!==oe&&(Ee&&(q(oe,K)||D(oe,K,te[ae]?""+te[ae]:xe.join(String(ae)))),te===M?te[ae]=oe:ue?te[ae]?te[ae]=oe:D(te,ae,oe):(delete te[ae],D(te,ae,oe)))})(Function.prototype,ye,function(){return typeof this=="function"&&this[K]||de.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_classof.js"),D=RegExp.prototype.exec;H.exports=function(q,K){var de=q.exec;if(typeof de=="function"){var ye=de.call(q,K);if(typeof ye!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ye}if(M(q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return D.call(q,K)}},"./node_modules/core-js/modules/_regexp-exec.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_flags.js"),D=RegExp.prototype.exec,q=String.prototype.replace,K=D,de="lastIndex",ye=function(){var ae=/a/,oe=/b*/g;return D.call(ae,"a"),D.call(oe,"a"),ae[de]!==0||oe[de]!==0}(),xe=/()??/.exec("")[1]!==void 0,te=ye||xe;te&&(K=function(oe){var ue=this,Ee,Pe,ce,ke;return xe&&(Pe=new RegExp("^"+ue.source+"$(?!\\s)",M.call(ue))),ye&&(Ee=ue[de]),ce=D.call(ue,oe),ye&&ce&&(ue[de]=ue.global?ce.index+ce[0].length:Ee),xe&&ce&&ce.length>1&&q.call(ce[0],Pe,function(){for(ke=1;ke<arguments.length-2;ke++)arguments[ke]===void 0&&(ce[ke]=void 0)}),ce}),H.exports=K},"./node_modules/core-js/modules/_set-to-string-tag.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-dp.js").f,D=b("./node_modules/core-js/modules/_has.js"),q=b("./node_modules/core-js/modules/_wks.js")("toStringTag");H.exports=function(K,de,ye){K&&!D(K=ye?K:K.prototype,q)&&M(K,q,{configurable:!0,value:de})}},"./node_modules/core-js/modules/_shared-key.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_shared.js")("keys"),D=b("./node_modules/core-js/modules/_uid.js");H.exports=function(q){return M[q]||(M[q]=D(q))}},"./node_modules/core-js/modules/_shared.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_core.js"),D=b("./node_modules/core-js/modules/_global.js"),q="__core-js_shared__",K=D[q]||(D[q]={});(H.exports=function(de,ye){return K[de]||(K[de]=ye!==void 0?ye:{})})("versions",[]).push({version:M.version,mode:b("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_an-object.js"),D=b("./node_modules/core-js/modules/_a-function.js"),q=b("./node_modules/core-js/modules/_wks.js")("species");H.exports=function(K,de){var ye=M(K).constructor,xe;return ye===void 0||(xe=M(ye)[q])==null?de:D(xe)}},"./node_modules/core-js/modules/_string-at.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_to-integer.js"),D=b("./node_modules/core-js/modules/_defined.js");H.exports=function(q){return function(K,de){var ye=String(D(K)),xe=M(de),te=ye.length,ae,oe;return xe<0||xe>=te?q?"":void 0:(ae=ye.charCodeAt(xe),ae<55296||ae>56319||xe+1===te||(oe=ye.charCodeAt(xe+1))<56320||oe>57343?q?ye.charAt(xe):ae:q?ye.slice(xe,xe+2):(ae-55296<<10)+(oe-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_is-regexp.js"),D=b("./node_modules/core-js/modules/_defined.js");H.exports=function(q,K,de){if(M(K))throw TypeError("String#"+de+" doesn't accept regex!");return String(D(q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_to-integer.js"),D=Math.max,q=Math.min;H.exports=function(K,de){return K=M(K),K<0?D(K+de,0):q(K,de)}},"./node_modules/core-js/modules/_to-integer.js":function(H,F){var b=Math.ceil,M=Math.floor;H.exports=function(D){return isNaN(D=+D)?0:(D>0?M:b)(D)}},"./node_modules/core-js/modules/_to-iobject.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_iobject.js"),D=b("./node_modules/core-js/modules/_defined.js");H.exports=function(q){return M(D(q))}},"./node_modules/core-js/modules/_to-length.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_to-integer.js"),D=Math.min;H.exports=function(q){return q>0?D(M(q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_defined.js");H.exports=function(D){return Object(M(D))}},"./node_modules/core-js/modules/_to-primitive.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_is-object.js");H.exports=function(D,q){if(!M(D))return D;var K,de;if(q&&typeof(K=D.toString)=="function"&&!M(de=K.call(D))||typeof(K=D.valueOf)=="function"&&!M(de=K.call(D))||!q&&typeof(K=D.toString)=="function"&&!M(de=K.call(D)))return de;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(H,F){var b=0,M=Math.random();H.exports=function(D){return"Symbol(".concat(D===void 0?"":D,")_",(++b+M).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_global.js"),D=b("./node_modules/core-js/modules/_core.js"),q=b("./node_modules/core-js/modules/_library.js"),K=b("./node_modules/core-js/modules/_wks-ext.js"),de=b("./node_modules/core-js/modules/_object-dp.js").f;H.exports=function(ye){var xe=D.Symbol||(D.Symbol=q?{}:M.Symbol||{});ye.charAt(0)!="_"&&!(ye in xe)&&de(xe,ye,{value:K.f(ye)})}},"./node_modules/core-js/modules/_wks-ext.js":function(H,F,b){F.f=b("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_shared.js")("wks"),D=b("./node_modules/core-js/modules/_uid.js"),q=b("./node_modules/core-js/modules/_global.js").Symbol,K=typeof q=="function",de=H.exports=function(ye){return M[ye]||(M[ye]=K&&q[ye]||(K?q:D)("Symbol."+ye))};de.store=M},"./node_modules/core-js/modules/core.get-iterator-method.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_classof.js"),D=b("./node_modules/core-js/modules/_wks.js")("iterator"),q=b("./node_modules/core-js/modules/_iterators.js");H.exports=b("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(K){if(K!=null)return K[D]||K["@@iterator"]||q[M(K)]}},"./node_modules/core-js/modules/es6.array.from.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_ctx.js"),D=b("./node_modules/core-js/modules/_export.js"),q=b("./node_modules/core-js/modules/_to-object.js"),K=b("./node_modules/core-js/modules/_iter-call.js"),de=b("./node_modules/core-js/modules/_is-array-iter.js"),ye=b("./node_modules/core-js/modules/_to-length.js"),xe=b("./node_modules/core-js/modules/_create-property.js"),te=b("./node_modules/core-js/modules/core.get-iterator-method.js");D(D.S+D.F*!b("./node_modules/core-js/modules/_iter-detect.js")(function(ae){Array.from(ae)}),"Array",{from:function(oe){var ue=q(oe),Ee=typeof this=="function"?this:Array,Pe=arguments.length,ce=Pe>1?arguments[1]:void 0,ke=ce!==void 0,be=0,Ie=te(ue),Be,Ze,et,tt;if(ke&&(ce=M(ce,Pe>2?arguments[2]:void 0,2)),Ie!=null&&!(Ee==Array&&de(Ie)))for(tt=Ie.call(ue),Ze=new Ee;!(et=tt.next()).done;be++)xe(Ze,be,ke?K(tt,ce,[et.value,be],!0):et.value);else for(Be=ye(ue.length),Ze=new Ee(Be);Be>be;be++)xe(Ze,be,ke?ce(ue[be],be):ue[be]);return Ze.length=be,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_add-to-unscopables.js"),D=b("./node_modules/core-js/modules/_iter-step.js"),q=b("./node_modules/core-js/modules/_iterators.js"),K=b("./node_modules/core-js/modules/_to-iobject.js");H.exports=b("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(de,ye){this._t=K(de),this._i=0,this._k=ye},function(){var de=this._t,ye=this._k,xe=this._i++;return!de||xe>=de.length?(this._t=void 0,D(1)):ye=="keys"?D(0,xe):ye=="values"?D(0,de[xe]):D(0,[xe,de[xe]])},"values"),q.Arguments=q.Array,M("keys"),M("values"),M("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_export.js");M(M.P,"Function",{bind:b("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_object-dp.js").f,D=Function.prototype,q=/^\s*function ([^ (]*)/,K="name";K in D||b("./node_modules/core-js/modules/_descriptors.js")&&M(D,K,{configurable:!0,get:function(){try{return(""+this).match(q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_export.js"),D=b("./node_modules/core-js/modules/_global.js").isFinite;M(M.S,"Number",{isFinite:function(K){return typeof K=="number"&&D(K)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_classof.js"),D={};D[b("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",D+""!="[object z]"&&b("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+M(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_regexp-exec.js");b("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:M!==/./.exec},{exec:M})},"./node_modules/core-js/modules/es6.regexp.split.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_is-regexp.js"),D=b("./node_modules/core-js/modules/_an-object.js"),q=b("./node_modules/core-js/modules/_species-constructor.js"),K=b("./node_modules/core-js/modules/_advance-string-index.js"),de=b("./node_modules/core-js/modules/_to-length.js"),ye=b("./node_modules/core-js/modules/_regexp-exec-abstract.js"),xe=b("./node_modules/core-js/modules/_regexp-exec.js"),te=b("./node_modules/core-js/modules/_fails.js"),ae=Math.min,oe=[].push,ue="split",Ee="length",Pe="lastIndex",ce=4294967295,ke=!te(function(){});b("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(be,Ie,Be,Ze){var et;return"abbc"[ue](/(b)*/)[1]=="c"||"test"[ue](/(?:)/,-1)[Ee]!=4||"ab"[ue](/(?:ab)*/)[Ee]!=2||"."[ue](/(.?)(.?)/)[Ee]!=4||"."[ue](/()()/)[Ee]>1||""[ue](/.?/)[Ee]?et=function(tt,ct){var St=String(this);if(tt===void 0&&ct===0)return[];if(!M(tt))return Be.call(St,tt,ct);for(var ft=[],At=(tt.ignoreCase?"i":"")+(tt.multiline?"m":"")+(tt.unicode?"u":"")+(tt.sticky?"y":""),qt=0,Bt=ct===void 0?ce:ct>>>0,ln=new RegExp(tt.source,At+"g"),En,_n,nn;(En=xe.call(ln,St))&&(_n=ln[Pe],!(_n>qt&&(ft.push(St.slice(qt,En.index)),En[Ee]>1&&En.index<St[Ee]&&oe.apply(ft,En.slice(1)),nn=En[0][Ee],qt=_n,ft[Ee]>=Bt)));)ln[Pe]===En.index&&ln[Pe]++;return qt===St[Ee]?(nn||!ln.test(""))&&ft.push(""):ft.push(St.slice(qt)),ft[Ee]>Bt?ft.slice(0,Bt):ft}:"0"[ue](void 0,0)[Ee]?et=function(tt,ct){return tt===void 0&&ct===0?[]:Be.call(this,tt,ct)}:et=Be,[function(ct,St){var ft=be(this),At=ct==null?void 0:ct[Ie];return At!==void 0?At.call(ct,ft,St):et.call(String(ft),ct,St)},function(tt,ct){var St=Ze(et,tt,this,ct,et!==Be);if(St.done)return St.value;var ft=D(tt),At=String(this),qt=q(ft,RegExp),Bt=ft.unicode,ln=(ft.ignoreCase?"i":"")+(ft.multiline?"m":"")+(ft.unicode?"u":"")+(ke?"y":"g"),En=new qt(ke?ft:"^(?:"+ft.source+")",ln),_n=ct===void 0?ce:ct>>>0;if(_n===0)return[];if(At.length===0)return ye(En,At)===null?[At]:[];for(var nn=0,Pn=0,ge=[];Pn<At.length;){En.lastIndex=ke?Pn:0;var L=ye(En,ke?At:At.slice(Pn)),R;if(L===null||(R=ae(de(En.lastIndex+(ke?0:Pn)),At.length))===nn)Pn=K(At,Pn,Bt);else{if(ge.push(At.slice(nn,Pn)),ge.length===_n)return ge;for(var me=1;me<=L.length-1;me++)if(ge.push(L[me]),ge.length===_n)return ge;Pn=nn=R}}return ge.push(At.slice(nn)),ge}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_export.js"),D=b("./node_modules/core-js/modules/_string-context.js"),q="includes";M(M.P+M.F*b("./node_modules/core-js/modules/_fails-is-regexp.js")(q),"String",{includes:function(de){return!!~D(this,de,q).indexOf(de,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_global.js"),D=b("./node_modules/core-js/modules/_has.js"),q=b("./node_modules/core-js/modules/_descriptors.js"),K=b("./node_modules/core-js/modules/_export.js"),de=b("./node_modules/core-js/modules/_redefine.js"),ye=b("./node_modules/core-js/modules/_meta.js").KEY,xe=b("./node_modules/core-js/modules/_fails.js"),te=b("./node_modules/core-js/modules/_shared.js"),ae=b("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=b("./node_modules/core-js/modules/_uid.js"),ue=b("./node_modules/core-js/modules/_wks.js"),Ee=b("./node_modules/core-js/modules/_wks-ext.js"),Pe=b("./node_modules/core-js/modules/_wks-define.js"),ce=b("./node_modules/core-js/modules/_enum-keys.js"),ke=b("./node_modules/core-js/modules/_is-array.js"),be=b("./node_modules/core-js/modules/_an-object.js"),Ie=b("./node_modules/core-js/modules/_is-object.js"),Be=b("./node_modules/core-js/modules/_to-object.js"),Ze=b("./node_modules/core-js/modules/_to-iobject.js"),et=b("./node_modules/core-js/modules/_to-primitive.js"),tt=b("./node_modules/core-js/modules/_property-desc.js"),ct=b("./node_modules/core-js/modules/_object-create.js"),St=b("./node_modules/core-js/modules/_object-gopn-ext.js"),ft=b("./node_modules/core-js/modules/_object-gopd.js"),At=b("./node_modules/core-js/modules/_object-gops.js"),qt=b("./node_modules/core-js/modules/_object-dp.js"),Bt=b("./node_modules/core-js/modules/_object-keys.js"),ln=ft.f,En=qt.f,_n=St.f,nn=M.Symbol,Pn=M.JSON,ge=Pn&&Pn.stringify,L="prototype",R=ue("_hidden"),me=ue("toPrimitive"),Oe={}.propertyIsEnumerable,Ke=te("symbol-registry"),at=te("symbols"),se=te("op-symbols"),T=Object[L],z=typeof nn=="function"&&!!At.f,we=M.QObject,De=!we||!we[L]||!we[L].findChild,Xe=q&&xe(function(){return ct(En({},"a",{get:function(){return En(this,"a",{value:7}).a}})).a!=7})?function(Vt,Ut,Gt){var An=ln(T,Ut);An&&delete T[Ut],En(Vt,Ut,Gt),An&&Vt!==T&&En(T,Ut,An)}:En,Qe=function(Vt){var Ut=at[Vt]=ct(nn[L]);return Ut._k=Vt,Ut},$t=z&&typeof nn.iterator=="symbol"?function(Vt){return typeof Vt=="symbol"}:function(Vt){return Vt instanceof nn},Tn=function(Ut,Gt,An){return Ut===T&&Tn(se,Gt,An),be(Ut),Gt=et(Gt,!0),be(An),D(at,Gt)?(An.enumerable?(D(Ut,R)&&Ut[R][Gt]&&(Ut[R][Gt]=!1),An=ct(An,{enumerable:tt(0,!1)})):(D(Ut,R)||En(Ut,R,tt(1,{})),Ut[R][Gt]=!0),Xe(Ut,Gt,An)):En(Ut,Gt,An)},pn=function(Ut,Gt){be(Ut);for(var An=ce(Gt=Ze(Gt)),zn=0,tr=An.length,Dr;tr>zn;)Tn(Ut,Dr=An[zn++],Gt[Dr]);return Ut},dt=function(Ut,Gt){return Gt===void 0?ct(Ut):pn(ct(Ut),Gt)},Lt=function(Ut){var Gt=Oe.call(this,Ut=et(Ut,!0));return this===T&&D(at,Ut)&&!D(se,Ut)?!1:Gt||!D(this,Ut)||!D(at,Ut)||D(this,R)&&this[R][Ut]?Gt:!0},un=function(Ut,Gt){if(Ut=Ze(Ut),Gt=et(Gt,!0),!(Ut===T&&D(at,Gt)&&!D(se,Gt))){var An=ln(Ut,Gt);return An&&D(at,Gt)&&!(D(Ut,R)&&Ut[R][Gt])&&(An.enumerable=!0),An}},Tr=function(Ut){for(var Gt=_n(Ze(Ut)),An=[],zn=0,tr;Gt.length>zn;)!D(at,tr=Gt[zn++])&&tr!=R&&tr!=ye&&An.push(tr);return An},Hr=function(Ut){for(var Gt=Ut===T,An=_n(Gt?se:Ze(Ut)),zn=[],tr=0,Dr;An.length>tr;)D(at,Dr=An[tr++])&&(Gt?D(T,Dr):!0)&&zn.push(at[Dr]);return zn};z||(nn=function(){if(this instanceof nn)throw TypeError("Symbol is not a constructor!");var Ut=oe(arguments.length>0?arguments[0]:void 0),Gt=function(An){this===T&&Gt.call(se,An),D(this,R)&&D(this[R],Ut)&&(this[R][Ut]=!1),Xe(this,Ut,tt(1,An))};return q&&De&&Xe(T,Ut,{configurable:!0,set:Gt}),Qe(Ut)},de(nn[L],"toString",function(){return this._k}),ft.f=un,qt.f=Tn,b("./node_modules/core-js/modules/_object-gopn.js").f=St.f=Tr,b("./node_modules/core-js/modules/_object-pie.js").f=Lt,At.f=Hr,q&&!b("./node_modules/core-js/modules/_library.js")&&de(T,"propertyIsEnumerable",Lt,!0),Ee.f=function(Vt){return Qe(ue(Vt))}),K(K.G+K.W+K.F*!z,{Symbol:nn});for(var cn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),er=0;cn.length>er;)ue(cn[er++]);for(var pi=Bt(ue.store),gr=0;pi.length>gr;)Pe(pi[gr++]);K(K.S+K.F*!z,"Symbol",{for:function(Vt){return D(Ke,Vt+="")?Ke[Vt]:Ke[Vt]=nn(Vt)},keyFor:function(Ut){if(!$t(Ut))throw TypeError(Ut+" is not a symbol!");for(var Gt in Ke)if(Ke[Gt]===Ut)return Gt},useSetter:function(){De=!0},useSimple:function(){De=!1}}),K(K.S+K.F*!z,"Object",{create:dt,defineProperty:Tn,defineProperties:pn,getOwnPropertyDescriptor:un,getOwnPropertyNames:Tr,getOwnPropertySymbols:Hr});var jr=xe(function(){At.f(1)});K(K.S+K.F*jr,"Object",{getOwnPropertySymbols:function(Ut){return At.f(Be(Ut))}}),Pn&&K(K.S+K.F*(!z||xe(function(){var Vt=nn();return ge([Vt])!="[null]"||ge({a:Vt})!="{}"||ge(Object(Vt))!="{}"})),"JSON",{stringify:function(Ut){for(var Gt=[Ut],An=1,zn,tr;arguments.length>An;)Gt.push(arguments[An++]);if(tr=zn=Gt[1],!(!Ie(zn)&&Ut===void 0||$t(Ut)))return ke(zn)||(zn=function(Dr,ii){if(typeof tr=="function"&&(ii=tr.call(this,Dr,ii)),!$t(ii))return ii}),Gt[1]=zn,ge.apply(Pn,Gt)}}),nn[L][me]||b("./node_modules/core-js/modules/_hide.js")(nn[L],me,nn[L].valueOf),ae(nn,"Symbol"),ae(Math,"Math",!0),ae(M.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_export.js"),D=b("./node_modules/core-js/modules/_array-includes.js")(!0);M(M.P,"Array",{includes:function(K){return D(this,K,arguments.length>1?arguments[1]:void 0)}}),b("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(H,F,b){var M=b("./node_modules/core-js/modules/_export.js"),D=b("./node_modules/core-js/modules/_own-keys.js"),q=b("./node_modules/core-js/modules/_to-iobject.js"),K=b("./node_modules/core-js/modules/_object-gopd.js"),de=b("./node_modules/core-js/modules/_create-property.js");M(M.S,"Object",{getOwnPropertyDescriptors:function(xe){for(var te=q(xe),ae=K.f,oe=D(te),ue={},Ee=0,Pe,ce;oe.length>Ee;)ce=ae(te,Pe=oe[Ee++]),ce!==void 0&&de(ue,Pe,ce);return ue}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(H,F,b){b("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(H,F,b){for(var M=b("./node_modules/core-js/modules/es6.array.iterator.js"),D=b("./node_modules/core-js/modules/_object-keys.js"),q=b("./node_modules/core-js/modules/_redefine.js"),K=b("./node_modules/core-js/modules/_global.js"),de=b("./node_modules/core-js/modules/_hide.js"),ye=b("./node_modules/core-js/modules/_iterators.js"),xe=b("./node_modules/core-js/modules/_wks.js"),te=xe("iterator"),ae=xe("toStringTag"),oe=ye.Array,ue={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ee=D(ue),Pe=0;Pe<Ee.length;Pe++){var ce=Ee[Pe],ke=ue[ce],be=K[ce],Ie=be&&be.prototype,Be;if(Ie&&(Ie[te]||de(Ie,te,oe),Ie[ae]||de(Ie,ae,ce),ye[ce]=oe,ke))for(Be in M)Ie[Be]||q(Ie,Be,M[Be],!0)}},"./node_modules/crypt/crypt.js":function(H,F){(function(){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M={rotl:function(D,q){return D<<q|D>>>32-q},rotr:function(D,q){return D<<32-q|D>>>q},endian:function(D){if(D.constructor==Number)return M.rotl(D,8)&16711935|M.rotl(D,24)&4278255360;for(var q=0;q<D.length;q++)D[q]=M.endian(D[q]);return D},randomBytes:function(D){for(var q=[];D>0;D--)q.push(Math.floor(Math.random()*256));return q},bytesToWords:function(D){for(var q=[],K=0,de=0;K<D.length;K++,de+=8)q[de>>>5]|=D[K]<<24-de%32;return q},wordsToBytes:function(D){for(var q=[],K=0;K<D.length*32;K+=8)q.push(D[K>>>5]>>>24-K%32&255);return q},bytesToHex:function(D){for(var q=[],K=0;K<D.length;K++)q.push((D[K]>>>4).toString(16)),q.push((D[K]&15).toString(16));return q.join("")},hexToBytes:function(D){for(var q=[],K=0;K<D.length;K+=2)q.push(parseInt(D.substr(K,2),16));return q},bytesToBase64:function(D){for(var q=[],K=0;K<D.length;K+=3)for(var de=D[K]<<16|D[K+1]<<8|D[K+2],ye=0;ye<4;ye++)K*8+ye*6<=D.length*8?q.push(b.charAt(de>>>6*(3-ye)&63)):q.push("=");return q.join("")},base64ToBytes:function(D){D=D.replace(/[^A-Z0-9+\/]/ig,"");for(var q=[],K=0,de=0;K<D.length;de=++K%4)de!=0&&q.push((b.indexOf(D.charAt(K-1))&Math.pow(2,-2*de+8)-1)<<de*2|b.indexOf(D.charAt(K))>>>6-de*2);return q}};H.exports=M})()},"./node_modules/is-buffer/index.js":function(H,F){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */H.exports=function(D){return D!=null&&(b(D)||M(D)||!!D._isBuffer)};function b(D){return!!D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D)}function M(D){return typeof D.readFloatLE=="function"&&typeof D.slice=="function"&&b(D.slice(0,0))}},"./node_modules/md5/md5.js":function(H,F,b){(function(){var M=b("./node_modules/crypt/crypt.js"),D=b("./node_modules/charenc/charenc.js").utf8,q=b("./node_modules/is-buffer/index.js"),K=b("./node_modules/charenc/charenc.js").bin,de=function(ye,xe){ye.constructor==String?xe&&xe.encoding==="binary"?ye=K.stringToBytes(ye):ye=D.stringToBytes(ye):q(ye)?ye=Array.prototype.slice.call(ye,0):!Array.isArray(ye)&&ye.constructor!==Uint8Array&&(ye=ye.toString());for(var te=M.bytesToWords(ye),ae=ye.length*8,oe=1732584193,ue=-271733879,Ee=-1732584194,Pe=271733878,ce=0;ce<te.length;ce++)te[ce]=(te[ce]<<8|te[ce]>>>24)&16711935|(te[ce]<<24|te[ce]>>>8)&4278255360;te[ae>>>5]|=128<<ae%32,te[(ae+64>>>9<<4)+14]=ae;for(var ke=de._ff,be=de._gg,Ie=de._hh,Be=de._ii,ce=0;ce<te.length;ce+=16){var Ze=oe,et=ue,tt=Ee,ct=Pe;oe=ke(oe,ue,Ee,Pe,te[ce+0],7,-680876936),Pe=ke(Pe,oe,ue,Ee,te[ce+1],12,-389564586),Ee=ke(Ee,Pe,oe,ue,te[ce+2],17,606105819),ue=ke(ue,Ee,Pe,oe,te[ce+3],22,-1044525330),oe=ke(oe,ue,Ee,Pe,te[ce+4],7,-176418897),Pe=ke(Pe,oe,ue,Ee,te[ce+5],12,1200080426),Ee=ke(Ee,Pe,oe,ue,te[ce+6],17,-1473231341),ue=ke(ue,Ee,Pe,oe,te[ce+7],22,-45705983),oe=ke(oe,ue,Ee,Pe,te[ce+8],7,1770035416),Pe=ke(Pe,oe,ue,Ee,te[ce+9],12,-1958414417),Ee=ke(Ee,Pe,oe,ue,te[ce+10],17,-42063),ue=ke(ue,Ee,Pe,oe,te[ce+11],22,-1990404162),oe=ke(oe,ue,Ee,Pe,te[ce+12],7,1804603682),Pe=ke(Pe,oe,ue,Ee,te[ce+13],12,-40341101),Ee=ke(Ee,Pe,oe,ue,te[ce+14],17,-1502002290),ue=ke(ue,Ee,Pe,oe,te[ce+15],22,1236535329),oe=be(oe,ue,Ee,Pe,te[ce+1],5,-165796510),Pe=be(Pe,oe,ue,Ee,te[ce+6],9,-1069501632),Ee=be(Ee,Pe,oe,ue,te[ce+11],14,643717713),ue=be(ue,Ee,Pe,oe,te[ce+0],20,-373897302),oe=be(oe,ue,Ee,Pe,te[ce+5],5,-701558691),Pe=be(Pe,oe,ue,Ee,te[ce+10],9,38016083),Ee=be(Ee,Pe,oe,ue,te[ce+15],14,-660478335),ue=be(ue,Ee,Pe,oe,te[ce+4],20,-405537848),oe=be(oe,ue,Ee,Pe,te[ce+9],5,568446438),Pe=be(Pe,oe,ue,Ee,te[ce+14],9,-1019803690),Ee=be(Ee,Pe,oe,ue,te[ce+3],14,-187363961),ue=be(ue,Ee,Pe,oe,te[ce+8],20,1163531501),oe=be(oe,ue,Ee,Pe,te[ce+13],5,-1444681467),Pe=be(Pe,oe,ue,Ee,te[ce+2],9,-51403784),Ee=be(Ee,Pe,oe,ue,te[ce+7],14,1735328473),ue=be(ue,Ee,Pe,oe,te[ce+12],20,-1926607734),oe=Ie(oe,ue,Ee,Pe,te[ce+5],4,-378558),Pe=Ie(Pe,oe,ue,Ee,te[ce+8],11,-2022574463),Ee=Ie(Ee,Pe,oe,ue,te[ce+11],16,1839030562),ue=Ie(ue,Ee,Pe,oe,te[ce+14],23,-35309556),oe=Ie(oe,ue,Ee,Pe,te[ce+1],4,-1530992060),Pe=Ie(Pe,oe,ue,Ee,te[ce+4],11,1272893353),Ee=Ie(Ee,Pe,oe,ue,te[ce+7],16,-155497632),ue=Ie(ue,Ee,Pe,oe,te[ce+10],23,-1094730640),oe=Ie(oe,ue,Ee,Pe,te[ce+13],4,681279174),Pe=Ie(Pe,oe,ue,Ee,te[ce+0],11,-358537222),Ee=Ie(Ee,Pe,oe,ue,te[ce+3],16,-722521979),ue=Ie(ue,Ee,Pe,oe,te[ce+6],23,76029189),oe=Ie(oe,ue,Ee,Pe,te[ce+9],4,-640364487),Pe=Ie(Pe,oe,ue,Ee,te[ce+12],11,-421815835),Ee=Ie(Ee,Pe,oe,ue,te[ce+15],16,530742520),ue=Ie(ue,Ee,Pe,oe,te[ce+2],23,-995338651),oe=Be(oe,ue,Ee,Pe,te[ce+0],6,-198630844),Pe=Be(Pe,oe,ue,Ee,te[ce+7],10,1126891415),Ee=Be(Ee,Pe,oe,ue,te[ce+14],15,-1416354905),ue=Be(ue,Ee,Pe,oe,te[ce+5],21,-57434055),oe=Be(oe,ue,Ee,Pe,te[ce+12],6,1700485571),Pe=Be(Pe,oe,ue,Ee,te[ce+3],10,-1894986606),Ee=Be(Ee,Pe,oe,ue,te[ce+10],15,-1051523),ue=Be(ue,Ee,Pe,oe,te[ce+1],21,-2054922799),oe=Be(oe,ue,Ee,Pe,te[ce+8],6,1873313359),Pe=Be(Pe,oe,ue,Ee,te[ce+15],10,-30611744),Ee=Be(Ee,Pe,oe,ue,te[ce+6],15,-1560198380),ue=Be(ue,Ee,Pe,oe,te[ce+13],21,1309151649),oe=Be(oe,ue,Ee,Pe,te[ce+4],6,-145523070),Pe=Be(Pe,oe,ue,Ee,te[ce+11],10,-1120210379),Ee=Be(Ee,Pe,oe,ue,te[ce+2],15,718787259),ue=Be(ue,Ee,Pe,oe,te[ce+9],21,-343485551),oe=oe+Ze>>>0,ue=ue+et>>>0,Ee=Ee+tt>>>0,Pe=Pe+ct>>>0}return M.endian([oe,ue,Ee,Pe])};de._ff=function(ye,xe,te,ae,oe,ue,Ee){var Pe=ye+(xe&te|~xe&ae)+(oe>>>0)+Ee;return(Pe<<ue|Pe>>>32-ue)+xe},de._gg=function(ye,xe,te,ae,oe,ue,Ee){var Pe=ye+(xe&ae|te&~ae)+(oe>>>0)+Ee;return(Pe<<ue|Pe>>>32-ue)+xe},de._hh=function(ye,xe,te,ae,oe,ue,Ee){var Pe=ye+(xe^te^ae)+(oe>>>0)+Ee;return(Pe<<ue|Pe>>>32-ue)+xe},de._ii=function(ye,xe,te,ae,oe,ue,Ee){var Pe=ye+(te^(xe|~ae))+(oe>>>0)+Ee;return(Pe<<ue|Pe>>>32-ue)+xe},de._blocksize=16,de._digestsize=16,H.exports=function(ye,xe){if(ye==null)throw new Error("Illegal argument "+ye);var te=M.wordsToBytes(de(ye,xe));return xe&&xe.asBytes?te:xe&&xe.asString?K.bytesToString(te):M.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(H,F,b){var M=function(D){var q=Object.prototype,K=q.hasOwnProperty,de,ye=typeof Symbol=="function"?Symbol:{},xe=ye.iterator||"@@iterator",te=ye.asyncIterator||"@@asyncIterator",ae=ye.toStringTag||"@@toStringTag";function oe(L,R,me){return Object.defineProperty(L,R,{value:me,enumerable:!0,configurable:!0,writable:!0}),L[R]}try{oe({},"")}catch{oe=function(R,me,Oe){return R[me]=Oe}}function ue(L,R,me,Oe){var Ke=R&&R.prototype instanceof Be?R:Be,at=Object.create(Ke.prototype),se=new nn(Oe||[]);return at._invoke=Bt(L,me,se),at}D.wrap=ue;function Ee(L,R,me){try{return{type:"normal",arg:L.call(R,me)}}catch(Oe){return{type:"throw",arg:Oe}}}var Pe="suspendedStart",ce="suspendedYield",ke="executing",be="completed",Ie={};function Be(){}function Ze(){}function et(){}var tt={};tt[xe]=function(){return this};var ct=Object.getPrototypeOf,St=ct&&ct(ct(Pn([])));St&&St!==q&&K.call(St,xe)&&(tt=St);var ft=et.prototype=Be.prototype=Object.create(tt);Ze.prototype=ft.constructor=et,et.constructor=Ze,Ze.displayName=oe(et,ae,"GeneratorFunction");function At(L){["next","throw","return"].forEach(function(R){oe(L,R,function(me){return this._invoke(R,me)})})}D.isGeneratorFunction=function(L){var R=typeof L=="function"&&L.constructor;return R?R===Ze||(R.displayName||R.name)==="GeneratorFunction":!1},D.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,et):(L.__proto__=et,oe(L,ae,"GeneratorFunction")),L.prototype=Object.create(ft),L},D.awrap=function(L){return{__await:L}};function qt(L,R){function me(at,se,T,z){var we=Ee(L[at],L,se);if(we.type==="throw")z(we.arg);else{var De=we.arg,Xe=De.value;return Xe&&typeof Xe=="object"&&K.call(Xe,"__await")?R.resolve(Xe.__await).then(function(Qe){me("next",Qe,T,z)},function(Qe){me("throw",Qe,T,z)}):R.resolve(Xe).then(function(Qe){De.value=Qe,T(De)},function(Qe){return me("throw",Qe,T,z)})}}var Oe;function Ke(at,se){function T(){return new R(function(z,we){me(at,se,z,we)})}return Oe=Oe?Oe.then(T,T):T()}this._invoke=Ke}At(qt.prototype),qt.prototype[te]=function(){return this},D.AsyncIterator=qt,D.async=function(L,R,me,Oe,Ke){Ke===void 0&&(Ke=Promise);var at=new qt(ue(L,R,me,Oe),Ke);return D.isGeneratorFunction(R)?at:at.next().then(function(se){return se.done?se.value:at.next()})};function Bt(L,R,me){var Oe=Pe;return function(at,se){if(Oe===ke)throw new Error("Generator is already running");if(Oe===be){if(at==="throw")throw se;return ge()}for(me.method=at,me.arg=se;;){var T=me.delegate;if(T){var z=ln(T,me);if(z){if(z===Ie)continue;return z}}if(me.method==="next")me.sent=me._sent=me.arg;else if(me.method==="throw"){if(Oe===Pe)throw Oe=be,me.arg;me.dispatchException(me.arg)}else me.method==="return"&&me.abrupt("return",me.arg);Oe=ke;var we=Ee(L,R,me);if(we.type==="normal"){if(Oe=me.done?be:ce,we.arg===Ie)continue;return{value:we.arg,done:me.done}}else we.type==="throw"&&(Oe=be,me.method="throw",me.arg=we.arg)}}}function ln(L,R){var me=L.iterator[R.method];if(me===de){if(R.delegate=null,R.method==="throw"){if(L.iterator.return&&(R.method="return",R.arg=de,ln(L,R),R.method==="throw"))return Ie;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ie}var Oe=Ee(me,L.iterator,R.arg);if(Oe.type==="throw")return R.method="throw",R.arg=Oe.arg,R.delegate=null,Ie;var Ke=Oe.arg;if(!Ke)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,Ie;if(Ke.done)R[L.resultName]=Ke.value,R.next=L.nextLoc,R.method!=="return"&&(R.method="next",R.arg=de);else return Ke;return R.delegate=null,Ie}At(ft),oe(ft,ae,"Generator"),ft[xe]=function(){return this},ft.toString=function(){return"[object Generator]"};function En(L){var R={tryLoc:L[0]};1 in L&&(R.catchLoc=L[1]),2 in L&&(R.finallyLoc=L[2],R.afterLoc=L[3]),this.tryEntries.push(R)}function _n(L){var R=L.completion||{};R.type="normal",delete R.arg,L.completion=R}function nn(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(En,this),this.reset(!0)}D.keys=function(L){var R=[];for(var me in L)R.push(me);return R.reverse(),function Oe(){for(;R.length;){var Ke=R.pop();if(Ke in L)return Oe.value=Ke,Oe.done=!1,Oe}return Oe.done=!0,Oe}};function Pn(L){if(L){var R=L[xe];if(R)return R.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var me=-1,Oe=function Ke(){for(;++me<L.length;)if(K.call(L,me))return Ke.value=L[me],Ke.done=!1,Ke;return Ke.value=de,Ke.done=!0,Ke};return Oe.next=Oe}}return{next:ge}}D.values=Pn;function ge(){return{value:de,done:!0}}return nn.prototype={constructor:nn,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=de,this.done=!1,this.delegate=null,this.method="next",this.arg=de,this.tryEntries.forEach(_n),!L)for(var R in this)R.charAt(0)==="t"&&K.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=de)},stop:function(){this.done=!0;var L=this.tryEntries[0],R=L.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var R=this;function me(z,we){return at.type="throw",at.arg=L,R.next=z,we&&(R.method="next",R.arg=de),!!we}for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Ke=this.tryEntries[Oe],at=Ke.completion;if(Ke.tryLoc==="root")return me("end");if(Ke.tryLoc<=this.prev){var se=K.call(Ke,"catchLoc"),T=K.call(Ke,"finallyLoc");if(se&&T){if(this.prev<Ke.catchLoc)return me(Ke.catchLoc,!0);if(this.prev<Ke.finallyLoc)return me(Ke.finallyLoc)}else if(se){if(this.prev<Ke.catchLoc)return me(Ke.catchLoc,!0)}else if(T){if(this.prev<Ke.finallyLoc)return me(Ke.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(L,R){for(var me=this.tryEntries.length-1;me>=0;--me){var Oe=this.tryEntries[me];if(Oe.tryLoc<=this.prev&&K.call(Oe,"finallyLoc")&&this.prev<Oe.finallyLoc){var Ke=Oe;break}}Ke&&(L==="break"||L==="continue")&&Ke.tryLoc<=R&&R<=Ke.finallyLoc&&(Ke=null);var at=Ke?Ke.completion:{};return at.type=L,at.arg=R,Ke?(this.method="next",this.next=Ke.finallyLoc,Ie):this.complete(at)},complete:function(L,R){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&R&&(this.next=R),Ie},finish:function(L){for(var R=this.tryEntries.length-1;R>=0;--R){var me=this.tryEntries[R];if(me.finallyLoc===L)return this.complete(me.completion,me.afterLoc),_n(me),Ie}},catch:function(L){for(var R=this.tryEntries.length-1;R>=0;--R){var me=this.tryEntries[R];if(me.tryLoc===L){var Oe=me.completion;if(Oe.type==="throw"){var Ke=Oe.arg;_n(me)}return Ke}}throw new Error("illegal catch attempt")},delegateYield:function(L,R,me){return this.delegate={iterator:Pn(L),resultName:R,nextLoc:me},this.method==="next"&&(this.arg=de),Ie}},D}(H.exports);try{regeneratorRuntime=M}catch{Function("r","regeneratorRuntime = r")(M)}},"./src/api.js":function(H,F,b){b.r(F),b.d(F,"setup",function(){return ke}),b.d(F,"setupCache",function(){return ce}),b("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js");var M=b("axios"),D=b.n(M),q=b("./src/request.js"),K=b("./src/cache.js");b.d(F,"serializeQuery",function(){return K.serializeQuery});var de=b("./src/config.js"),ye=b("./src/utilities.js");function xe(be,Ie){if(be==null)return{};var Be=te(be,Ie),Ze,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(be);for(et=0;et<tt.length;et++)Ze=tt[et],!(Ie.indexOf(Ze)>=0)&&(!Object.prototype.propertyIsEnumerable.call(be,Ze)||(Be[Ze]=be[Ze]))}return Be}function te(be,Ie){if(be==null)return{};var Be={},Ze=Object.keys(be),et,tt;for(tt=0;tt<Ze.length;tt++)et=Ze[tt],!(Ie.indexOf(et)>=0)&&(Be[et]=be[et]);return Be}function ae(be,Ie){var Be=Object.keys(be);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(be);Ie&&(Ze=Ze.filter(function(et){return Object.getOwnPropertyDescriptor(be,et).enumerable})),Be.push.apply(Be,Ze)}return Be}function oe(be){for(var Ie=1;Ie<arguments.length;Ie++){var Be=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?ae(Object(Be),!0).forEach(function(Ze){ue(be,Ze,Be[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Be)):ae(Object(Be)).forEach(function(Ze){Object.defineProperty(be,Ze,Object.getOwnPropertyDescriptor(Be,Ze))})}return be}function ue(be,Ie,Be){return Ie in be?Object.defineProperty(be,Ie,{value:Be,enumerable:!0,configurable:!0,writable:!0}):be[Ie]=Be,be}function Ee(be,Ie,Be,Ze,et,tt,ct){try{var St=be[tt](ct),ft=St.value}catch(At){Be(At);return}St.done?Ie(ft):Promise.resolve(ft).then(Ze,et)}function Pe(be){return function(){var Ie=this,Be=arguments;return new Promise(function(Ze,et){var tt=be.apply(Ie,Be);function ct(ft){Ee(tt,Ze,et,ct,St,"next",ft)}function St(ft){Ee(tt,Ze,et,ct,St,"throw",ft)}ct(void 0)})}}function ce(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};be=Object(de.makeConfig)(be);function Ie(Ze){return Be.apply(this,arguments)}function Be(){return Be=Pe(regeneratorRuntime.mark(function Ze(et){var tt,ct,St,ft,At;return regeneratorRuntime.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return tt=Object(de.mergeRequestConfig)(be,et),Bt.next=3,Object(q.default)(tt,et);case 3:if(ct=Bt.sent,St=ct.next,Object(ye.isFunction)(St)){Bt.next=7;break}return Bt.abrupt("return",St);case 7:return Bt.prev=7,Bt.next=10,tt.adapter(et);case 10:ct=Bt.sent,Bt.next=16;break;case 13:Bt.prev=13,Bt.t0=Bt.catch(7),ft=Bt.t0;case 16:if(!ft){Bt.next=31;break}if(At=Object(ye.isFunction)(tt.readOnError)?tt.readOnError(ft,et):tt.readOnError,!At){Bt.next=30;break}return Bt.prev=19,tt.acceptStale=!0,Bt.next=23,Object(q.default)(tt,et);case 23:return ct=Bt.sent,ct.next.request.stale=!0,Bt.abrupt("return",ct.next);case 28:Bt.prev=28,Bt.t1=Bt.catch(19);case 30:throw ft;case 31:return Bt.abrupt("return",St(ct));case 32:case"end":return Bt.stop()}},Ze,null,[[7,13],[19,28]])})),Be.apply(this,arguments)}return{adapter:Ie,config:be,store:be.store}}function ke(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=oe(oe(oe({},de.defaults.axios),be),{},{cache:oe(oe({},de.defaults.axios.cache),be.cache)}),Be=ce(Ie.cache);Ie.cache;var Ze=xe(Ie,["cache"]),et=D.a.create(oe(oe({},Ze),{},{adapter:Be.adapter}));return et.cache=Be.store,et}F.default={setup:ke,setupCache:ce,serializeQuery:K.serializeQuery}},"./src/cache.js":function(H,F,b){b.r(F),b.d(F,"read",function(){return ae}),b.d(F,"write",function(){return xe}),b.d(F,"key",function(){return ue}),b.d(F,"invalidate",function(){return ce}),b.d(F,"serializeQuery",function(){return ke}),b("./node_modules/core-js/modules/es7.array.includes.js"),b("./node_modules/core-js/modules/es6.string.includes.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var M=b("./src/utilities.js"),D=b("./node_modules/md5/md5.js"),q=b.n(D),K=b("./src/serialize.js");function de(be,Ie,Be,Ze,et,tt,ct){try{var St=be[tt](ct),ft=St.value}catch(At){Be(At);return}St.done?Ie(ft):Promise.resolve(ft).then(Ze,et)}function ye(be){return function(){var Ie=this,Be=arguments;return new Promise(function(Ze,et){var tt=be.apply(Ie,Be);function ct(ft){de(tt,Ze,et,ct,St,"next",ft)}function St(ft){de(tt,Ze,et,ct,St,"throw",ft)}ct(void 0)})}}function xe(be,Ie,Be){return te.apply(this,arguments)}function te(){return te=ye(regeneratorRuntime.mark(function be(Ie,Be,Ze){var et;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.prev=0,et={expires:Ie.expires,data:Object(K.default)(Ie,Be,Ze)},ct.next=4,Ie.store.setItem(Ie.uuid,et);case 4:ct.next=19;break;case 6:if(ct.prev=6,ct.t0=ct.catch(0),Ie.debug("Could not store response",ct.t0),!Ie.clearOnError){ct.next=18;break}return ct.prev=10,ct.next=13,Ie.store.clear();case 13:ct.next=18;break;case 15:ct.prev=15,ct.t1=ct.catch(10),Ie.debug("Could not clear store",ct.t1);case 18:return ct.abrupt("return",!1);case 19:return ct.abrupt("return",!0);case 20:case"end":return ct.stop()}},be,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function ae(be,Ie){return oe.apply(this,arguments)}function oe(){return oe=ye(regeneratorRuntime.mark(function be(Ie,Be){var Ze,et,tt,ct,St,ft,At,qt;return regeneratorRuntime.wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:return Ze=Ie.uuid,et=Ie.ignoreCache,ln.next=3,Ie.store.getItem(Ze);case 3:if(tt=ln.sent,!(et||!tt||!tt.data)){ln.next=10;break}throw Ie.debug("cache-miss",Be.url),ct=new Error,ct.reason="cache-miss",ct.message="Entry not found from cache",ct;case 10:if(St=tt.expires,ft=tt.data,At=typeof navigator!="undefined"&&"onLine"in navigator&&!navigator.onLine,!(!At&&!Ie.acceptStale&&St!==0&&St<Date.now())){ln.next=18;break}throw Ie.debug("cache-stale",Be.url),qt=new Error,qt.reason="cache-stale",qt.message="Entry is stale",qt;case 18:return Ie.debug(Ie.acceptStale?"cache-hit-stale":"cache-hit",Be.url),ln.abrupt("return",ft);case 20:case"end":return ln.stop()}},be)})),oe.apply(this,arguments)}function ue(be){if(Object(M.isFunction)(be.key))return be.key;var Ie;return Object(M.isString)(be.key)?Ie=function(Ze){var et="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),tt="".concat(be.key,"/").concat(et).concat(ke(Ze));return Ze.data?tt+q()(Ze.data):tt}:Ie=function(Ze){var et="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),tt=et+ke(Ze);return Ze.data?tt+q()(Ze.data):tt},Ie}function Ee(be,Ie){return Pe.apply(this,arguments)}function Pe(){return Pe=ye(regeneratorRuntime.mark(function be(Ie,Be){var Ze;return regeneratorRuntime.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(Ze=Be.method.toLowerCase(),!Ie.exclude.methods.includes(Ze)){tt.next=4;break}return tt.next=4,Ie.store.removeItem(Ie.uuid);case 4:case"end":return tt.stop()}},be)})),Pe.apply(this,arguments)}function ce(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(M.isFunction)(be.invalidate)?be.invalidate:Ee}function ke(be){if(!be.params)return"";if(typeof URLSearchParams=="undefined")return JSON.stringify(be.params);var Ie=be.params,Be=be.params instanceof URLSearchParams;return Be||(Ie=new URLSearchParams,Object.keys(be.params).forEach(function(Ze){return Ie.append(Ze,be.params[Ze])})),"?".concat(Ie.toString())}F.default={read:ae,write:xe,key:ue,invalidate:ce,serializeQuery:ke}},"./src/config.js":function(H,F,b){b.r(F),b.d(F,"defaults",function(){return oe}),b.d(F,"makeConfig",function(){return Ee}),b.d(F,"mergeRequestConfig",function(){return Pe}),b("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var M=b("axios"),D=b.n(M),q=b("./src/memory.js"),K=b("./src/cache.js");function de(ce,ke){var be=Object.keys(ce);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(ce);ke&&(Ie=Ie.filter(function(Be){return Object.getOwnPropertyDescriptor(ce,Be).enumerable})),be.push.apply(be,Ie)}return be}function ye(ce){for(var ke=1;ke<arguments.length;ke++){var be=arguments[ke]!=null?arguments[ke]:{};ke%2?de(Object(be),!0).forEach(function(Ie){xe(ce,Ie,be[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(be)):de(Object(be)).forEach(function(Ie){Object.defineProperty(ce,Ie,Object.getOwnPropertyDescriptor(be,Ie))})}return ce}function xe(ce,ke,be){return ke in ce?Object.defineProperty(ce,ke,{value:be,enumerable:!0,configurable:!0,writable:!0}):ce[ke]=be,ce}var te=function(){},ae=function(){for(var ke,be=arguments.length,Ie=new Array(be),Be=0;Be<be;Be++)Ie[Be]=arguments[Be];return(ke=console).log.apply(ke,["[axios-cache-adapter]"].concat(Ie))},oe={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:D.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ue=["limit","store","adapter","uuid","acceptStale"],Ee=function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=ye(ye(ye({},oe.cache),ke),{},{exclude:ye(ye({},oe.cache.exclude),ke.exclude)});return be.key=Object(K.key)(be),be.invalidate=Object(K.invalidate)(be),be.debug!==!1?be.debug=typeof be.debug=="function"?be.debug:ae:be.debug=te,be.store||(be.store=new q.default),be.debug("Global cache config",be),be},Pe=function(ke,be){var Ie=be.cache||{};Ie&&ue.forEach(function(Ze){return Ie[Ze]?delete Ie[Ze]:void 0});var Be=ye(ye(ye({},ke),Ie),{},{exclude:ye(ye({},ke.exclude),Ie.exclude)});return Be.debug===!0&&(Be.debug=ae),Ie.key&&(Be.key=Object(K.key)(Ie)),Be.uuid=Be.key(be),ke.debug("Request config for ".concat(be.url),Be),Be};F.default={defaults:oe,makeConfig:Ee,mergeRequestConfig:Pe}},"./src/exclude.js":function(H,F,b){b.r(F),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/core-js/modules/es7.array.includes.js"),b("./node_modules/core-js/modules/es6.string.includes.js");var M=b("./src/utilities.js");function D(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0,de=q.exclude,ye=de===void 0?{}:de,xe=q.debug,te=K.method.toLowerCase();if(te==="head"||ye.methods.includes(te))return xe("Excluding request by HTTP method ".concat(K.url)),!0;if(typeof ye.filter=="function"&&ye.filter(K))return xe("Excluding request by filter ".concat(K.url)),!0;var ae=/\?.*$/.test(K.url)||Object(M.isObject)(K.params)&&Object.keys(K.params).length!==0||typeof URLSearchParams!="undefined"&&K.params instanceof URLSearchParams;if(ye.query&&ae)return xe("Excluding request by query ".concat(K.url)),!0;var oe=ye.paths||[],ue=oe.some(function(Ee){return K.url.match(Ee)});return ue?(xe("Excluding request by url match ".concat(K.url)),!0):!1}F.default=D},"./src/index.node.js":function(H,F,b){b.r(F);var M=b("./src/api.js");b.d(F,"setup",function(){return M.setup}),b.d(F,"setupCache",function(){return M.setupCache}),b.d(F,"serializeQuery",function(){return M.serializeQuery});var D=b("./src/redis.js");b.d(F,"RedisStore",function(){return D.default});var q=b("./src/redis-default.js");b.d(F,"RedisDefaultStore",function(){return q.default}),F.default={setup:M.setup,setupCache:M.setupCache,serializeQuery:M.serializeQuery,RedisStore:D.default,RedisDefaultStore:q.default}},"./src/limit.js":function(H,F,b){b.r(F),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function M(de,ye,xe,te,ae,oe,ue){try{var Ee=de[oe](ue),Pe=Ee.value}catch(ce){xe(ce);return}Ee.done?ye(Pe):Promise.resolve(Pe).then(te,ae)}function D(de){return function(){var ye=this,xe=arguments;return new Promise(function(te,ae){var oe=de.apply(ye,xe);function ue(Pe){M(oe,te,ae,ue,Ee,"next",Pe)}function Ee(Pe){M(oe,te,ae,ue,Ee,"throw",Pe)}ue(void 0)})}}function q(de){return K.apply(this,arguments)}function K(){return K=D(regeneratorRuntime.mark(function de(ye){var xe,te;return regeneratorRuntime.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,ye.store.length();case 2:if(xe=oe.sent,!(xe<ye.limit)){oe.next=5;break}return oe.abrupt("return");case 5:return ye.debug("Current store size: ".concat(xe)),oe.next=8,ye.store.iterate(function(ue,Ee){te||(te={value:ue,key:Ee}),ue.expires<te.value.expires&&(te={value:ue,key:Ee})});case 8:if(!te){oe.next=12;break}return ye.debug("Removing item: ".concat(te.key)),oe.next=12,ye.store.removeItem(te.key);case 12:case"end":return oe.stop()}},de)})),K.apply(this,arguments)}F.default=q},"./src/memory.js":function(H,F,b){b.r(F),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js");var M=b("./src/utilities.js");function D(te,ae,oe,ue,Ee,Pe,ce){try{var ke=te[Pe](ce),be=ke.value}catch(Ie){oe(Ie);return}ke.done?ae(be):Promise.resolve(be).then(ue,Ee)}function q(te){return function(){var ae=this,oe=arguments;return new Promise(function(ue,Ee){var Pe=te.apply(ae,oe);function ce(be){D(Pe,ue,Ee,ce,ke,"next",be)}function ke(be){D(Pe,ue,Ee,ce,ke,"throw",be)}ce(void 0)})}}function K(te,ae){if(!(te instanceof ae))throw new TypeError("Cannot call a class as a function")}function de(te,ae){for(var oe=0;oe<ae.length;oe++){var ue=ae[oe];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(te,ue.key,ue)}}function ye(te,ae,oe){return ae&&de(te.prototype,ae),oe&&de(te,oe),te}var xe=function(){function te(){K(this,te),this.store={}}return ye(te,[{key:"getItem",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee){var Pe;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return Pe=this.store[Ee]||null,ke.abrupt("return",JSON.parse(Pe));case 2:case"end":return ke.stop()}},ue,this)}));function oe(ue){return ae.apply(this,arguments)}return oe}()},{key:"setItem",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee,Pe){return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return this.store[Ee]=JSON.stringify(Pe),ke.abrupt("return",Pe);case 2:case"end":return ke.stop()}},ue,this)}));function oe(ue,Ee){return ae.apply(this,arguments)}return oe}()},{key:"removeItem",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:delete this.store[Ee];case 1:case"end":return ce.stop()}},ue,this)}));function oe(ue){return ae.apply(this,arguments)}return oe}()},{key:"clear",value:function(){var ae=q(regeneratorRuntime.mark(function ue(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:this.store={};case 1:case"end":return Pe.stop()}},ue,this)}));function oe(){return ae.apply(this,arguments)}return oe}()},{key:"length",value:function(){var ae=q(regeneratorRuntime.mark(function ue(){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Pe.stop()}},ue,this)}));function oe(){return ae.apply(this,arguments)}return oe}()},{key:"iterate",value:function(oe){return Promise.all(Object(M.mapObject)(this.store,oe))}}]),te}();F.default=xe},"./src/redis-default.js":function(H,F,b){b.r(F),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.function.bind.js"),b("./node_modules/core-js/modules/es6.function.name.js");var M=b("util");function D(te,ae,oe,ue,Ee,Pe,ce){try{var ke=te[Pe](ce),be=ke.value}catch(Ie){oe(Ie);return}ke.done?ae(be):Promise.resolve(be).then(ue,Ee)}function q(te){return function(){var ae=this,oe=arguments;return new Promise(function(ue,Ee){var Pe=te.apply(ae,oe);function ce(be){D(Pe,ue,Ee,ce,ke,"next",be)}function ke(be){D(Pe,ue,Ee,ce,ke,"throw",be)}ce(void 0)})}}function K(te,ae){if(!(te instanceof ae))throw new TypeError("Cannot call a class as a function")}function de(te,ae){for(var oe=0;oe<ae.length;oe++){var ue=ae[oe];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(te,ue.key,ue)}}function ye(te,ae,oe){return ae&&de(te.prototype,ae),oe&&de(te,oe),te}var xe=function(){function te(ae){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,te);var ue=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ae.constructor.name!=="RedisClient")throw ue}catch{throw ue}this.client=ae,this.prefix=oe.prefix||"axios-cache",this.maxScanCount=oe.maxScanCount||1e3,this.getAsync=Object(M.promisify)(ae.get).bind(ae),this.psetexAsync=Object(M.promisify)(ae.psetex).bind(ae),this.delAsync=Object(M.promisify)(ae.del).bind(ae),this.scanAsync=Object(M.promisify)(ae.scan).bind(ae)}return ye(te,[{key:"calculateTTL",value:function(oe){var ue=Date.now();return oe.expires&&oe.expires>ue?oe.expires-ue:-1}},{key:"transformKey",value:function(oe){return this.prefix+"_"+oe}},{key:"getItem",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee){var Pe;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.getAsync(this.transformKey(Ee));case 2:if(ke.t0=ke.sent,ke.t0){ke.next=5;break}ke.t0=null;case 5:return Pe=ke.t0,ke.abrupt("return",JSON.parse(Pe));case 7:case"end":return ke.stop()}},ue,this)}));function oe(ue){return ae.apply(this,arguments)}return oe}()},{key:"setItem",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee,Pe){var ce,ke;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(ce=this.transformKey(Ee),ke=this.calculateTTL(Pe),!(ke>0)){Ie.next=5;break}return Ie.next=5,this.psetexAsync(ce,ke,JSON.stringify(Pe));case 5:return Ie.abrupt("return",Pe);case 6:case"end":return Ie.stop()}},ue,this)}));function oe(ue,Ee){return ae.apply(this,arguments)}return oe}()},{key:"removeItem",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,this.delAsync(this.transformKey(Ee));case 2:case"end":return ce.stop()}},ue,this)}));function oe(ue){return ae.apply(this,arguments)}return oe}()},{key:"scan",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee){var Pe,ce;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:Pe="0";case 1:return be.next=3,this.scanAsync(Pe,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return ce=be.sent,Pe=ce[0],be.next=7,Ee(ce[1]);case 7:if(Pe!=="0"){be.next=1;break}case 8:case"end":return be.stop()}},ue,this)}));function oe(ue){return ae.apply(this,arguments)}return oe}()},{key:"clear",value:function(){var ae=q(regeneratorRuntime.mark(function ue(){var Ee=this;return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,this.scan(function(ke){return Ee.delAsync(ke)});case 2:case"end":return ce.stop()}},ue,this)}));function oe(){return ae.apply(this,arguments)}return oe}()},{key:"length",value:function(){var ae=q(regeneratorRuntime.mark(function ue(){var Ee;return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return Ee=0,ce.next=3,this.scan(function(ke){Ee+=ke.length});case 3:return ce.abrupt("return",Ee);case 4:case"end":return ce.stop()}},ue,this)}));function oe(){return ae.apply(this,arguments)}return oe}()},{key:"iterate",value:function(){var ae=q(regeneratorRuntime.mark(function ue(Ee){var Pe=this,ce,ke;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return ke=function(){return ke=q(regeneratorRuntime.mark(function Ze(et){var tt,ct;return regeneratorRuntime.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,this.getAsync(et);case 2:if(ft.t0=ft.sent,ft.t0){ft.next=5;break}ft.t0=null;case 5:return tt=ft.t0,ct=JSON.parse(tt),ft.next=9,Ee(ct,et);case 9:return ft.abrupt("return",ft.sent);case 10:case"end":return ft.stop()}},Ze,this)})),ke.apply(this,arguments)},ce=function(Ze){return ke.apply(this,arguments)},Ie.next=4,this.scan(function(Be){return Promise.all(Be.map(ce.bind(Pe)))});case 4:return Ie.abrupt("return",Promise.resolve([]));case 5:case"end":return Ie.stop()}},ue,this)}));function oe(ue){return ae.apply(this,arguments)}return oe}()}]),te}();F.default=xe},"./src/redis.js":function(H,F,b){b.r(F),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.function.bind.js"),b("./node_modules/core-js/modules/es6.function.name.js");var M=b("util"),D=b("./src/utilities.js");function q(ae,oe,ue,Ee,Pe,ce,ke){try{var be=ae[ce](ke),Ie=be.value}catch(Be){ue(Be);return}be.done?oe(Ie):Promise.resolve(Ie).then(Ee,Pe)}function K(ae){return function(){var oe=this,ue=arguments;return new Promise(function(Ee,Pe){var ce=ae.apply(oe,ue);function ke(Ie){q(ce,Ee,Pe,ke,be,"next",Ie)}function be(Ie){q(ce,Ee,Pe,ke,be,"throw",Ie)}ke(void 0)})}}function de(ae,oe){if(!(ae instanceof oe))throw new TypeError("Cannot call a class as a function")}function ye(ae,oe){for(var ue=0;ue<oe.length;ue++){var Ee=oe[ue];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ae,Ee.key,Ee)}}function xe(ae,oe,ue){return oe&&ye(ae.prototype,oe),ue&&ye(ae,ue),ae}var te=function(){function ae(oe){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";de(this,ae);var Ee=new TypeError("First parameter must be a valid RedisClient instance.");try{if(oe.constructor.name!=="RedisClient")throw Ee}catch{throw Ee}this.client=oe,this.HASH_KEY=ue,this.hgetAsync=Object(M.promisify)(oe.hget).bind(oe),this.hsetAsync=Object(M.promisify)(oe.hset).bind(oe),this.hdelAsync=Object(M.promisify)(oe.hdel).bind(oe),this.delAsync=Object(M.promisify)(oe.del).bind(oe),this.hlenAsync=Object(M.promisify)(oe.hlen).bind(oe),this.hgetallAsync=Object(M.promisify)(oe.hgetall).bind(oe)}return xe(ae,[{key:"getItem",value:function(){var oe=K(regeneratorRuntime.mark(function Ee(Pe){var ce;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,this.hgetAsync(this.HASH_KEY,Pe);case 2:if(be.t0=be.sent,be.t0){be.next=5;break}be.t0=null;case 5:return ce=be.t0,be.abrupt("return",JSON.parse(ce));case 7:case"end":return be.stop()}},Ee,this)}));function ue(Ee){return oe.apply(this,arguments)}return ue}()},{key:"setItem",value:function(){var oe=K(regeneratorRuntime.mark(function Ee(Pe,ce){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,this.hsetAsync(this.HASH_KEY,Pe,JSON.stringify(ce));case 2:return be.abrupt("return",ce);case 3:case"end":return be.stop()}},Ee,this)}));function ue(Ee,Pe){return oe.apply(this,arguments)}return ue}()},{key:"removeItem",value:function(){var oe=K(regeneratorRuntime.mark(function Ee(Pe){return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hdelAsync(this.HASH_KEY,Pe);case 2:case"end":return ke.stop()}},Ee,this)}));function ue(Ee){return oe.apply(this,arguments)}return ue}()},{key:"clear",value:function(){var oe=K(regeneratorRuntime.mark(function Ee(){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return ce.stop()}},Ee,this)}));function ue(){return oe.apply(this,arguments)}return ue}()},{key:"length",value:function(){var oe=K(regeneratorRuntime.mark(function Ee(){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return ce.stop()}},Ee,this)}));function ue(){return oe.apply(this,arguments)}return ue}()},{key:"iterate",value:function(){var oe=K(regeneratorRuntime.mark(function Ee(Pe){var ce;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return ce=be.sent,be.abrupt("return",Promise.all(Object(D.mapObject)(ce,Pe)));case 4:case"end":return be.stop()}},Ee,this)}));function ue(Ee){return oe.apply(this,arguments)}return ue}()}]),ae}();F.default=te},"./src/request.js":function(H,F,b){b.r(F),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var M=b("./src/response.js"),D=b("./src/exclude.js"),q=b("./src/cache.js");function K(te,ae,oe,ue,Ee,Pe,ce){try{var ke=te[Pe](ce),be=ke.value}catch(Ie){oe(Ie);return}ke.done?ae(be):Promise.resolve(be).then(ue,Ee)}function de(te){return function(){var ae=this,oe=arguments;return new Promise(function(ue,Ee){var Pe=te.apply(ae,oe);function ce(be){K(Pe,ue,Ee,ce,ke,"next",be)}function ke(be){K(Pe,ue,Ee,ce,ke,"throw",be)}ce(void 0)})}}function ye(te,ae){return xe.apply(this,arguments)}function xe(){return xe=de(regeneratorRuntime.mark(function te(ae,oe){var ue,Ee,Pe;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return Pe=function(){return ae.excludeFromCache=!0,{config:ae,next:ue}},ae.debug("uuid",ae.uuid),ue=function(){for(var Ie=arguments.length,Be=new Array(Ie),Ze=0;Ze<Ie;Ze++)Be[Ze]=arguments[Ze];return M.default.apply(void 0,[ae,oe].concat(Be))},ke.next=5,ae.invalidate(ae,oe);case 5:if(!Object(D.default)(ae,oe)){ke.next=7;break}return ke.abrupt("return",Pe());case 7:return ke.prev=7,ke.next=10,Object(q.read)(ae,oe);case 10:return Ee=ke.sent,Ee.config=oe,Ee.request={fromCache:!0},ke.abrupt("return",{config:ae,next:Ee});case 16:if(ke.prev=16,ke.t0=ke.catch(7),!(ae.clearOnStale&&ke.t0.reason==="cache-stale")){ke.next=21;break}return ke.next=21,ae.store.removeItem(ae.uuid);case 21:return ke.abrupt("return",{config:ae,next:ue});case 22:case"end":return ke.stop()}},te,null,[[7,16]])})),xe.apply(this,arguments)}F.default=ye},"./src/response.js":function(H,F,b){b.r(F),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var M=b("./src/limit.js"),D=b("./src/cache.js"),q=b("./node_modules/cache-control-esm/index.js");function K(te,ae,oe,ue,Ee,Pe,ce){try{var ke=te[Pe](ce),be=ke.value}catch(Ie){oe(Ie);return}ke.done?ae(be):Promise.resolve(be).then(ue,Ee)}function de(te){return function(){var ae=this,oe=arguments;return new Promise(function(ue,Ee){var Pe=te.apply(ae,oe);function ce(be){K(Pe,ue,Ee,ce,ke,"next",be)}function ke(be){K(Pe,ue,Ee,ce,ke,"throw",be)}ce(void 0)})}}function ye(te,ae,oe){return xe.apply(this,arguments)}function xe(){return xe=de(regeneratorRuntime.mark(function te(ae,oe,ue){var Ee,Pe,ce,ke,be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(Ee=ue.request,Pe=Ee===void 0?{}:Ee,ce=ue.headers,ke=ce===void 0?{}:ce,!(["arraybuffer","blob"].indexOf(Pe.responseType)>-1)){Be.next=3;break}return Be.abrupt("return",ue);case 3:if(be={},ae.readHeaders&&(ke["cache-control"]?(be=Object(q.parse)(ke["cache-control"]),(be.noCache||be.noStore)&&(ae.excludeFromCache=!0)):ke.expires?ae.expires=new Date(ke.expires).getTime():ae.expires=new Date().getTime()),ae.excludeFromCache){Be.next=15;break}if(be.maxAge||be.maxAge===0?ae.expires=Date.now()+be.maxAge*1e3:ae.readHeaders||(ae.expires=ae.maxAge===0?Date.now():Date.now()+ae.maxAge),!ae.limit){Be.next=11;break}return ae.debug("Detected limit: ".concat(ae.limit)),Be.next=11,Object(M.default)(ae);case 11:return Be.next=13,Object(D.write)(ae,oe,ue);case 13:Be.next=16;break;case 15:ue.request.excludedFromCache=!0;case 16:return Be.abrupt("return",ue);case 17:case"end":return Be.stop()}},te)})),xe.apply(this,arguments)}F.default=ye},"./src/serialize.js":function(H,F,b){b.r(F),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function M(K,de){if(K==null)return{};var ye=D(K,de),xe,te;if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(K);for(te=0;te<ae.length;te++)xe=ae[te],!(de.indexOf(xe)>=0)&&(!Object.prototype.propertyIsEnumerable.call(K,xe)||(ye[xe]=K[xe]))}return ye}function D(K,de){if(K==null)return{};var ye={},xe=Object.keys(K),te,ae;for(ae=0;ae<xe.length;ae++)te=xe[ae],!(de.indexOf(te)>=0)&&(ye[te]=K[te]);return ye}function q(K,de,ye){if(ye.data)try{ye.data=JSON.parse(ye.data)}catch(te){K.debug("Could not parse data as JSON",te)}ye.request,ye.config;var xe=M(ye,["request","config"]);return xe}F.default=q},"./src/utilities.js":function(H,F,b){b.r(F),b.d(F,"isObject",function(){return D}),b.d(F,"getTag",function(){return q}),b.d(F,"isFunction",function(){return K}),b.d(F,"isString",function(){return de}),b.d(F,"mapObject",function(){return ye}),b("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function M(xe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(ae){return typeof ae}:M=function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},M(xe)}function D(xe){var te=M(xe);return xe!=null&&(te==="object"||te==="function")}function q(xe){return xe===null?xe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(xe)}function K(xe){if(!D(xe))return!1;var te=q(xe);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function de(xe){var te=M(xe);return te==="string"||te==="object"&&xe!=null&&!Array.isArray(xe)&&q(xe)==="[object String]"}function ye(xe,te){return D(xe)?Object.keys(xe).map(function(ae){return te(xe[ae],ae)}):[]}},axios:function(H,F){H.exports=re},util:function(H,F){H.exports=C.default}})})});const ee={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Y=N.setupCache({maxAge:60*60*24*1e3}),W=E.default.create({adapter:Y.adapter}),$=async(G,V={})=>{const re=wi(wi({},ee),V),[H,F]=r.lngLatToGoogle(G,re.zoomBase),b=re.tileUrl.replace("{z}",String(re.zoomBase)).replace("{x}",String(H)).replace("{y}",String(F)),M={code:"",prefecture:"",city:""};let D;try{const de=await W.get(b,{responseType:"arraybuffer"});D=Buffer.from(de.data,"binary")}catch(de){throw new Error(de)}const q=new y.VectorTile(new w.default(D));let K=Object.keys(q.layers);return Array.isArray(K)||(K=[K]),K.forEach(de=>{const ye=q.layers[de];if(ye&&re.layer===ye.name)for(let xe=0;xe<ye.length;xe++){const te=ye.feature(xe).toGeoJSON(H,F,re.zoomBase);K.length>1&&(te.properties.vt_layer=de);const ae={type:"FeatureCollection",features:[te]};t.geoContains(ae,G)&&(M.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,M.prefecture=te.properties.prefecture,M.city=te.properties.city)}}),M};e.openReverseGeocoder=$})(v4);var rL={},eg={};eg.byteLength=aL;eg.toByteArray=lL;eg.fromByteArray=hL;var Ia=[],ko=[],iL=typeof Uint8Array!="undefined"?Uint8Array:Array,Oy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var sc=0,oL=Oy.length;sc<oL;++sc)Ia[sc]=Oy[sc],ko[Oy.charCodeAt(sc)]=sc;ko["-".charCodeAt(0)]=62;ko["_".charCodeAt(0)]=63;function dA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var l=r===t?0:4-r%4;return[r,l]}function aL(e){var t=dA(e),r=t[0],l=t[1];return(r+l)*3/4-l}function sL(e,t,r){return(t+r)*3/4-r}function lL(e){var t,r=dA(e),l=r[0],c=r[1],d=new iL(sL(e,l,c)),y=0,s=c>0?l-4:l,w;for(w=0;w<s;w+=4)t=ko[e.charCodeAt(w)]<<18|ko[e.charCodeAt(w+1)]<<12|ko[e.charCodeAt(w+2)]<<6|ko[e.charCodeAt(w+3)],d[y++]=t>>16&255,d[y++]=t>>8&255,d[y++]=t&255;return c===2&&(t=ko[e.charCodeAt(w)]<<2|ko[e.charCodeAt(w+1)]>>4,d[y++]=t&255),c===1&&(t=ko[e.charCodeAt(w)]<<10|ko[e.charCodeAt(w+1)]<<4|ko[e.charCodeAt(w+2)]>>2,d[y++]=t>>8&255,d[y++]=t&255),d}function uL(e){return Ia[e>>18&63]+Ia[e>>12&63]+Ia[e>>6&63]+Ia[e&63]}function cL(e,t,r){for(var l,c=[],d=t;d<r;d+=3)l=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(uL(l));return c.join("")}function hL(e){for(var t,r=e.length,l=r%3,c=[],d=16383,y=0,s=r-l;y<s;y+=d)c.push(cL(e,y,y+d>s?s:y+d));return l===1?(t=e[r-1],c.push(Ia[t>>2]+Ia[t<<4&63]+"==")):l===2&&(t=(e[r-2]<<8)+e[r-1],c.push(Ia[t>>10]+Ia[t>>4&63]+Ia[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=eg,r=Ym,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=G,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,s.TYPED_ARRAY_SUPPORT=d(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const se=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(se,T),se.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function y(se){if(se>c)throw new RangeError('The value "'+se+'" is invalid for option "size"');const T=new Uint8Array(se);return Object.setPrototypeOf(T,s.prototype),T}function s(se,T,z){if(typeof se=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(se)}return w(se,T,z)}s.poolSize=8192;function w(se,T,z){if(typeof se=="string")return P(se,T);if(ArrayBuffer.isView(se))return ee(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(R(se,ArrayBuffer)||se&&R(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(R(se,SharedArrayBuffer)||se&&R(se.buffer,SharedArrayBuffer)))return Y(se,T,z);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const we=se.valueOf&&se.valueOf();if(we!=null&&we!==se)return s.from(we,T,z);const De=W(se);if(De)return De;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return s.from(se[Symbol.toPrimitive]("string"),T,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}s.from=function(se,T,z){return w(se,T,z)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function E(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function C(se,T,z){return E(se),se<=0?y(se):T!==void 0?typeof z=="string"?y(se).fill(T,z):y(se).fill(T):y(se)}s.alloc=function(se,T,z){return C(se,T,z)};function S(se){return E(se),y(se<0?0:$(se)|0)}s.allocUnsafe=function(se){return S(se)},s.allocUnsafeSlow=function(se){return S(se)};function P(se,T){if((typeof T!="string"||T==="")&&(T="utf8"),!s.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const z=V(se,T)|0;let we=y(z);const De=we.write(se,T);return De!==z&&(we=we.slice(0,De)),we}function N(se){const T=se.length<0?0:$(se.length)|0,z=y(T);for(let we=0;we<T;we+=1)z[we]=se[we]&255;return z}function ee(se){if(R(se,Uint8Array)){const T=new Uint8Array(se);return Y(T.buffer,T.byteOffset,T.byteLength)}return N(se)}function Y(se,T,z){if(T<0||se.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<T+(z||0))throw new RangeError('"length" is outside of buffer bounds');let we;return T===void 0&&z===void 0?we=new Uint8Array(se):z===void 0?we=new Uint8Array(se,T):we=new Uint8Array(se,T,z),Object.setPrototypeOf(we,s.prototype),we}function W(se){if(s.isBuffer(se)){const T=$(se.length)|0,z=y(T);return z.length===0||se.copy(z,0,0,T),z}if(se.length!==void 0)return typeof se.length!="number"||me(se.length)?y(0):N(se);if(se.type==="Buffer"&&Array.isArray(se.data))return N(se.data)}function $(se){if(se>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return se|0}function G(se){return+se!=se&&(se=0),s.alloc(+se)}s.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==s.prototype},s.compare=function(T,z){if(R(T,Uint8Array)&&(T=s.from(T,T.offset,T.byteLength)),R(z,Uint8Array)&&(z=s.from(z,z.offset,z.byteLength)),!s.isBuffer(T)||!s.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===z)return 0;let we=T.length,De=z.length;for(let Xe=0,Qe=Math.min(we,De);Xe<Qe;++Xe)if(T[Xe]!==z[Xe]){we=T[Xe],De=z[Xe];break}return we<De?-1:De<we?1:0},s.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(T,z){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return s.alloc(0);let we;if(z===void 0)for(z=0,we=0;we<T.length;++we)z+=T[we].length;const De=s.allocUnsafe(z);let Xe=0;for(we=0;we<T.length;++we){let Qe=T[we];if(R(Qe,Uint8Array))Xe+Qe.length>De.length?(s.isBuffer(Qe)||(Qe=s.from(Qe)),Qe.copy(De,Xe)):Uint8Array.prototype.set.call(De,Qe,Xe);else if(s.isBuffer(Qe))Qe.copy(De,Xe);else throw new TypeError('"list" argument must be an Array of Buffers');Xe+=Qe.length}return De};function V(se,T){if(s.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||R(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const z=se.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&z===0)return 0;let De=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return _n(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return ge(se).length;default:if(De)return we?-1:_n(se).length;T=(""+T).toLowerCase(),De=!0}}s.byteLength=V;function re(se,T,z){let we=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,T>>>=0,z<=T))return"";for(se||(se="utf8");;)switch(se){case"hex":return Ee(this,T,z);case"utf8":case"utf-8":return xe(this,T,z);case"ascii":return oe(this,T,z);case"latin1":case"binary":return ue(this,T,z);case"base64":return ye(this,T,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,T,z);default:if(we)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),we=!0}}s.prototype._isBuffer=!0;function H(se,T,z){const we=se[T];se[T]=se[z],se[z]=we}s.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<T;z+=2)H(this,z,z+1);return this},s.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<T;z+=4)H(this,z,z+3),H(this,z+1,z+2);return this},s.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<T;z+=8)H(this,z,z+7),H(this,z+1,z+6),H(this,z+2,z+5),H(this,z+3,z+4);return this},s.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?xe(this,0,T):re.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(T){if(!s.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:s.compare(this,T)===0},s.prototype.inspect=function(){let T="";const z=e.INSPECT_MAX_BYTES;return T=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(T+=" ... "),"<Buffer "+T+">"},l&&(s.prototype[l]=s.prototype.inspect),s.prototype.compare=function(T,z,we,De,Xe){if(R(T,Uint8Array)&&(T=s.from(T,T.offset,T.byteLength)),!s.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(z===void 0&&(z=0),we===void 0&&(we=T?T.length:0),De===void 0&&(De=0),Xe===void 0&&(Xe=this.length),z<0||we>T.length||De<0||Xe>this.length)throw new RangeError("out of range index");if(De>=Xe&&z>=we)return 0;if(De>=Xe)return-1;if(z>=we)return 1;if(z>>>=0,we>>>=0,De>>>=0,Xe>>>=0,this===T)return 0;let Qe=Xe-De,$t=we-z;const Tn=Math.min(Qe,$t),pn=this.slice(De,Xe),dt=T.slice(z,we);for(let Lt=0;Lt<Tn;++Lt)if(pn[Lt]!==dt[Lt]){Qe=pn[Lt],$t=dt[Lt];break}return Qe<$t?-1:$t<Qe?1:0};function F(se,T,z,we,De){if(se.length===0)return-1;if(typeof z=="string"?(we=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,me(z)&&(z=De?0:se.length-1),z<0&&(z=se.length+z),z>=se.length){if(De)return-1;z=se.length-1}else if(z<0)if(De)z=0;else return-1;if(typeof T=="string"&&(T=s.from(T,we)),s.isBuffer(T))return T.length===0?-1:b(se,T,z,we,De);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?De?Uint8Array.prototype.indexOf.call(se,T,z):Uint8Array.prototype.lastIndexOf.call(se,T,z):b(se,[T],z,we,De);throw new TypeError("val must be string, number or Buffer")}function b(se,T,z,we,De){let Xe=1,Qe=se.length,$t=T.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(se.length<2||T.length<2)return-1;Xe=2,Qe/=2,$t/=2,z/=2}function Tn(dt,Lt){return Xe===1?dt[Lt]:dt.readUInt16BE(Lt*Xe)}let pn;if(De){let dt=-1;for(pn=z;pn<Qe;pn++)if(Tn(se,pn)===Tn(T,dt===-1?0:pn-dt)){if(dt===-1&&(dt=pn),pn-dt+1===$t)return dt*Xe}else dt!==-1&&(pn-=pn-dt),dt=-1}else for(z+$t>Qe&&(z=Qe-$t),pn=z;pn>=0;pn--){let dt=!0;for(let Lt=0;Lt<$t;Lt++)if(Tn(se,pn+Lt)!==Tn(T,Lt)){dt=!1;break}if(dt)return pn}return-1}s.prototype.includes=function(T,z,we){return this.indexOf(T,z,we)!==-1},s.prototype.indexOf=function(T,z,we){return F(this,T,z,we,!0)},s.prototype.lastIndexOf=function(T,z,we){return F(this,T,z,we,!1)};function M(se,T,z,we){z=Number(z)||0;const De=se.length-z;we?(we=Number(we),we>De&&(we=De)):we=De;const Xe=T.length;we>Xe/2&&(we=Xe/2);let Qe;for(Qe=0;Qe<we;++Qe){const $t=parseInt(T.substr(Qe*2,2),16);if(me($t))return Qe;se[z+Qe]=$t}return Qe}function D(se,T,z,we){return L(_n(T,se.length-z),se,z,we)}function q(se,T,z,we){return L(nn(T),se,z,we)}function K(se,T,z,we){return L(ge(T),se,z,we)}function de(se,T,z,we){return L(Pn(T,se.length-z),se,z,we)}s.prototype.write=function(T,z,we,De){if(z===void 0)De="utf8",we=this.length,z=0;else if(we===void 0&&typeof z=="string")De=z,we=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(we)?(we=we>>>0,De===void 0&&(De="utf8")):(De=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xe=this.length-z;if((we===void 0||we>Xe)&&(we=Xe),T.length>0&&(we<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");let Qe=!1;for(;;)switch(De){case"hex":return M(this,T,z,we);case"utf8":case"utf-8":return D(this,T,z,we);case"ascii":case"latin1":case"binary":return q(this,T,z,we);case"base64":return K(this,T,z,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,T,z,we);default:if(Qe)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Qe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ye(se,T,z){return T===0&&z===se.length?t.fromByteArray(se):t.fromByteArray(se.slice(T,z))}function xe(se,T,z){z=Math.min(se.length,z);const we=[];let De=T;for(;De<z;){const Xe=se[De];let Qe=null,$t=Xe>239?4:Xe>223?3:Xe>191?2:1;if(De+$t<=z){let Tn,pn,dt,Lt;switch($t){case 1:Xe<128&&(Qe=Xe);break;case 2:Tn=se[De+1],(Tn&192)===128&&(Lt=(Xe&31)<<6|Tn&63,Lt>127&&(Qe=Lt));break;case 3:Tn=se[De+1],pn=se[De+2],(Tn&192)===128&&(pn&192)===128&&(Lt=(Xe&15)<<12|(Tn&63)<<6|pn&63,Lt>2047&&(Lt<55296||Lt>57343)&&(Qe=Lt));break;case 4:Tn=se[De+1],pn=se[De+2],dt=se[De+3],(Tn&192)===128&&(pn&192)===128&&(dt&192)===128&&(Lt=(Xe&15)<<18|(Tn&63)<<12|(pn&63)<<6|dt&63,Lt>65535&&Lt<1114112&&(Qe=Lt))}}Qe===null?(Qe=65533,$t=1):Qe>65535&&(Qe-=65536,we.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),we.push(Qe),De+=$t}return ae(we)}const te=4096;function ae(se){const T=se.length;if(T<=te)return String.fromCharCode.apply(String,se);let z="",we=0;for(;we<T;)z+=String.fromCharCode.apply(String,se.slice(we,we+=te));return z}function oe(se,T,z){let we="";z=Math.min(se.length,z);for(let De=T;De<z;++De)we+=String.fromCharCode(se[De]&127);return we}function ue(se,T,z){let we="";z=Math.min(se.length,z);for(let De=T;De<z;++De)we+=String.fromCharCode(se[De]);return we}function Ee(se,T,z){const we=se.length;(!T||T<0)&&(T=0),(!z||z<0||z>we)&&(z=we);let De="";for(let Xe=T;Xe<z;++Xe)De+=Oe[se[Xe]];return De}function Pe(se,T,z){const we=se.slice(T,z);let De="";for(let Xe=0;Xe<we.length-1;Xe+=2)De+=String.fromCharCode(we[Xe]+we[Xe+1]*256);return De}s.prototype.slice=function(T,z){const we=this.length;T=~~T,z=z===void 0?we:~~z,T<0?(T+=we,T<0&&(T=0)):T>we&&(T=we),z<0?(z+=we,z<0&&(z=0)):z>we&&(z=we),z<T&&(z=T);const De=this.subarray(T,z);return Object.setPrototypeOf(De,s.prototype),De};function ce(se,T,z){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+T>z)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(T,z,we){T=T>>>0,z=z>>>0,we||ce(T,z,this.length);let De=this[T],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)De+=this[T+Qe]*Xe;return De},s.prototype.readUintBE=s.prototype.readUIntBE=function(T,z,we){T=T>>>0,z=z>>>0,we||ce(T,z,this.length);let De=this[T+--z],Xe=1;for(;z>0&&(Xe*=256);)De+=this[T+--z]*Xe;return De},s.prototype.readUint8=s.prototype.readUInt8=function(T,z){return T=T>>>0,z||ce(T,1,this.length),this[T]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(T,z){return T=T>>>0,z||ce(T,2,this.length),this[T]|this[T+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(T,z){return T=T>>>0,z||ce(T,2,this.length),this[T]<<8|this[T+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},s.prototype.readBigUInt64LE=Ke(function(T){T=T>>>0,qt(T,"offset");const z=this[T],we=this[T+7];(z===void 0||we===void 0)&&Bt(T,this.length-8);const De=z+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,Xe=this[++T]+this[++T]*2**8+this[++T]*2**16+we*2**24;return BigInt(De)+(BigInt(Xe)<<BigInt(32))}),s.prototype.readBigUInt64BE=Ke(function(T){T=T>>>0,qt(T,"offset");const z=this[T],we=this[T+7];(z===void 0||we===void 0)&&Bt(T,this.length-8);const De=z*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],Xe=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+we;return(BigInt(De)<<BigInt(32))+BigInt(Xe)}),s.prototype.readIntLE=function(T,z,we){T=T>>>0,z=z>>>0,we||ce(T,z,this.length);let De=this[T],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)De+=this[T+Qe]*Xe;return Xe*=128,De>=Xe&&(De-=Math.pow(2,8*z)),De},s.prototype.readIntBE=function(T,z,we){T=T>>>0,z=z>>>0,we||ce(T,z,this.length);let De=z,Xe=1,Qe=this[T+--De];for(;De>0&&(Xe*=256);)Qe+=this[T+--De]*Xe;return Xe*=128,Qe>=Xe&&(Qe-=Math.pow(2,8*z)),Qe},s.prototype.readInt8=function(T,z){return T=T>>>0,z||ce(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},s.prototype.readInt16LE=function(T,z){T=T>>>0,z||ce(T,2,this.length);const we=this[T]|this[T+1]<<8;return we&32768?we|4294901760:we},s.prototype.readInt16BE=function(T,z){T=T>>>0,z||ce(T,2,this.length);const we=this[T+1]|this[T]<<8;return we&32768?we|4294901760:we},s.prototype.readInt32LE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},s.prototype.readInt32BE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},s.prototype.readBigInt64LE=Ke(function(T){T=T>>>0,qt(T,"offset");const z=this[T],we=this[T+7];(z===void 0||we===void 0)&&Bt(T,this.length-8);const De=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(we<<24);return(BigInt(De)<<BigInt(32))+BigInt(z+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),s.prototype.readBigInt64BE=Ke(function(T){T=T>>>0,qt(T,"offset");const z=this[T],we=this[T+7];(z===void 0||we===void 0)&&Bt(T,this.length-8);const De=(z<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(De)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+we)}),s.prototype.readFloatLE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),r.read(this,T,!0,23,4)},s.prototype.readFloatBE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),r.read(this,T,!1,23,4)},s.prototype.readDoubleLE=function(T,z){return T=T>>>0,z||ce(T,8,this.length),r.read(this,T,!0,52,8)},s.prototype.readDoubleBE=function(T,z){return T=T>>>0,z||ce(T,8,this.length),r.read(this,T,!1,52,8)};function ke(se,T,z,we,De,Xe){if(!s.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>De||T<Xe)throw new RangeError('"value" argument is out of bounds');if(z+we>se.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(T,z,we,De){if(T=+T,z=z>>>0,we=we>>>0,!De){const $t=Math.pow(2,8*we)-1;ke(this,T,z,we,$t,0)}let Xe=1,Qe=0;for(this[z]=T&255;++Qe<we&&(Xe*=256);)this[z+Qe]=T/Xe&255;return z+we},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(T,z,we,De){if(T=+T,z=z>>>0,we=we>>>0,!De){const $t=Math.pow(2,8*we)-1;ke(this,T,z,we,$t,0)}let Xe=we-1,Qe=1;for(this[z+Xe]=T&255;--Xe>=0&&(Qe*=256);)this[z+Xe]=T/Qe&255;return z+we},s.prototype.writeUint8=s.prototype.writeUInt8=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,1,255,0),this[z]=T&255,z+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,2,65535,0),this[z]=T&255,this[z+1]=T>>>8,z+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,2,65535,0),this[z]=T>>>8,this[z+1]=T&255,z+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,4,4294967295,0),this[z+3]=T>>>24,this[z+2]=T>>>16,this[z+1]=T>>>8,this[z]=T&255,z+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,4,4294967295,0),this[z]=T>>>24,this[z+1]=T>>>16,this[z+2]=T>>>8,this[z+3]=T&255,z+4};function be(se,T,z,we,De){At(T,we,De,se,z,7);let Xe=Number(T&BigInt(4294967295));se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe;let Qe=Number(T>>BigInt(32)&BigInt(4294967295));return se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,z}function Ie(se,T,z,we,De){At(T,we,De,se,z,7);let Xe=Number(T&BigInt(4294967295));se[z+7]=Xe,Xe=Xe>>8,se[z+6]=Xe,Xe=Xe>>8,se[z+5]=Xe,Xe=Xe>>8,se[z+4]=Xe;let Qe=Number(T>>BigInt(32)&BigInt(4294967295));return se[z+3]=Qe,Qe=Qe>>8,se[z+2]=Qe,Qe=Qe>>8,se[z+1]=Qe,Qe=Qe>>8,se[z]=Qe,z+8}s.prototype.writeBigUInt64LE=Ke(function(T,z=0){return be(this,T,z,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Ke(function(T,z=0){return Ie(this,T,z,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(T,z,we,De){if(T=+T,z=z>>>0,!De){const Tn=Math.pow(2,8*we-1);ke(this,T,z,we,Tn-1,-Tn)}let Xe=0,Qe=1,$t=0;for(this[z]=T&255;++Xe<we&&(Qe*=256);)T<0&&$t===0&&this[z+Xe-1]!==0&&($t=1),this[z+Xe]=(T/Qe>>0)-$t&255;return z+we},s.prototype.writeIntBE=function(T,z,we,De){if(T=+T,z=z>>>0,!De){const Tn=Math.pow(2,8*we-1);ke(this,T,z,we,Tn-1,-Tn)}let Xe=we-1,Qe=1,$t=0;for(this[z+Xe]=T&255;--Xe>=0&&(Qe*=256);)T<0&&$t===0&&this[z+Xe+1]!==0&&($t=1),this[z+Xe]=(T/Qe>>0)-$t&255;return z+we},s.prototype.writeInt8=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,1,127,-128),T<0&&(T=255+T+1),this[z]=T&255,z+1},s.prototype.writeInt16LE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,2,32767,-32768),this[z]=T&255,this[z+1]=T>>>8,z+2},s.prototype.writeInt16BE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,2,32767,-32768),this[z]=T>>>8,this[z+1]=T&255,z+2},s.prototype.writeInt32LE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,4,2147483647,-2147483648),this[z]=T&255,this[z+1]=T>>>8,this[z+2]=T>>>16,this[z+3]=T>>>24,z+4},s.prototype.writeInt32BE=function(T,z,we){return T=+T,z=z>>>0,we||ke(this,T,z,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[z]=T>>>24,this[z+1]=T>>>16,this[z+2]=T>>>8,this[z+3]=T&255,z+4},s.prototype.writeBigInt64LE=Ke(function(T,z=0){return be(this,T,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Ke(function(T,z=0){return Ie(this,T,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Be(se,T,z,we,De,Xe){if(z+we>se.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Ze(se,T,z,we,De){return T=+T,z=z>>>0,De||Be(se,T,z,4),r.write(se,T,z,we,23,4),z+4}s.prototype.writeFloatLE=function(T,z,we){return Ze(this,T,z,!0,we)},s.prototype.writeFloatBE=function(T,z,we){return Ze(this,T,z,!1,we)};function et(se,T,z,we,De){return T=+T,z=z>>>0,De||Be(se,T,z,8),r.write(se,T,z,we,52,8),z+8}s.prototype.writeDoubleLE=function(T,z,we){return et(this,T,z,!0,we)},s.prototype.writeDoubleBE=function(T,z,we){return et(this,T,z,!1,we)},s.prototype.copy=function(T,z,we,De){if(!s.isBuffer(T))throw new TypeError("argument should be a Buffer");if(we||(we=0),!De&&De!==0&&(De=this.length),z>=T.length&&(z=T.length),z||(z=0),De>0&&De<we&&(De=we),De===we||T.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),T.length-z<De-we&&(De=T.length-z+we);const Xe=De-we;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,we,De):Uint8Array.prototype.set.call(T,this.subarray(we,De),z),Xe},s.prototype.fill=function(T,z,we,De){if(typeof T=="string"){if(typeof z=="string"?(De=z,z=0,we=this.length):typeof we=="string"&&(De=we,we=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!s.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(T.length===1){const Qe=T.charCodeAt(0);(De==="utf8"&&Qe<128||De==="latin1")&&(T=Qe)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(z<0||this.length<z||this.length<we)throw new RangeError("Out of range index");if(we<=z)return this;z=z>>>0,we=we===void 0?this.length:we>>>0,T||(T=0);let Xe;if(typeof T=="number")for(Xe=z;Xe<we;++Xe)this[Xe]=T;else{const Qe=s.isBuffer(T)?T:s.from(T,De),$t=Qe.length;if($t===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(Xe=0;Xe<we-z;++Xe)this[Xe+z]=Qe[Xe%$t]}return this};const tt={};function ct(se,T,z){tt[se]=class extends z{constructor(){super();Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(se,T){return`The "${se}" argument must be of type number. Received type ${typeof T}`},TypeError),ct("ERR_OUT_OF_RANGE",function(se,T,z){let we=`The value of "${se}" is out of range.`,De=z;return Number.isInteger(z)&&Math.abs(z)>2**32?De=St(String(z)):typeof z=="bigint"&&(De=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(De=St(De)),De+="n"),we+=` It must be ${T}. Received ${De}`,we},RangeError);function St(se){let T="",z=se.length;const we=se[0]==="-"?1:0;for(;z>=we+4;z-=3)T=`_${se.slice(z-3,z)}${T}`;return`${se.slice(0,z)}${T}`}function ft(se,T,z){qt(T,"offset"),(se[T]===void 0||se[T+z]===void 0)&&Bt(T,se.length-(z+1))}function At(se,T,z,we,De,Xe){if(se>z||se<T){const Qe=typeof T=="bigint"?"n":"";let $t;throw Xe>3?T===0||T===BigInt(0)?$t=`>= 0${Qe} and < 2${Qe} ** ${(Xe+1)*8}${Qe}`:$t=`>= -(2${Qe} ** ${(Xe+1)*8-1}${Qe}) and < 2 ** ${(Xe+1)*8-1}${Qe}`:$t=`>= ${T}${Qe} and <= ${z}${Qe}`,new tt.ERR_OUT_OF_RANGE("value",$t,se)}ft(we,De,Xe)}function qt(se,T){if(typeof se!="number")throw new tt.ERR_INVALID_ARG_TYPE(T,"number",se)}function Bt(se,T,z){throw Math.floor(se)!==se?(qt(se,z),new tt.ERR_OUT_OF_RANGE(z||"offset","an integer",se)):T<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${T}`,se)}const ln=/[^+/0-9A-Za-z-_]/g;function En(se){if(se=se.split("=")[0],se=se.trim().replace(ln,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function _n(se,T){T=T||1/0;let z;const we=se.length;let De=null;const Xe=[];for(let Qe=0;Qe<we;++Qe){if(z=se.charCodeAt(Qe),z>55295&&z<57344){if(!De){if(z>56319){(T-=3)>-1&&Xe.push(239,191,189);continue}else if(Qe+1===we){(T-=3)>-1&&Xe.push(239,191,189);continue}De=z;continue}if(z<56320){(T-=3)>-1&&Xe.push(239,191,189),De=z;continue}z=(De-55296<<10|z-56320)+65536}else De&&(T-=3)>-1&&Xe.push(239,191,189);if(De=null,z<128){if((T-=1)<0)break;Xe.push(z)}else if(z<2048){if((T-=2)<0)break;Xe.push(z>>6|192,z&63|128)}else if(z<65536){if((T-=3)<0)break;Xe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((T-=4)<0)break;Xe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return Xe}function nn(se){const T=[];for(let z=0;z<se.length;++z)T.push(se.charCodeAt(z)&255);return T}function Pn(se,T){let z,we,De;const Xe=[];for(let Qe=0;Qe<se.length&&!((T-=2)<0);++Qe)z=se.charCodeAt(Qe),we=z>>8,De=z%256,Xe.push(De),Xe.push(we);return Xe}function ge(se){return t.toByteArray(En(se))}function L(se,T,z,we){let De;for(De=0;De<we&&!(De+z>=T.length||De>=se.length);++De)T[De+z]=se[De];return De}function R(se,T){return se instanceof T||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===T.name}function me(se){return se!==se}const Oe=function(){const se="0123456789abcdef",T=new Array(256);for(let z=0;z<16;++z){const we=z*16;for(let De=0;De<16;++De)T[we+De]=se[z]+se[De]}return T}();function Ke(se){return typeof BigInt=="undefined"?at:se}function at(){throw new Error("BigInt not supported")}})(rL);export{Gm as F,mL as G,vL as L,pL as M,gL as N,dL as R,yL as S,uS as a,TL as b,AL as c,t4 as d,fk as e,_L as f,xL as g,wL as h,rL as i,n4 as j,yC as k,v4 as m,EL as o,SL as p,rn as r,bL as t};
